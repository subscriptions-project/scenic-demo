{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/css/components/dialog.css.js","build/css/ui/ui.css.js","node_modules/promise-pjs/promise.js","node_modules/web-activities/activity-ports.js","src/api/client-event-manager-api.js","src/api/deferred-account-creation.js","src/api/entitlements.js","src/api/logger-api.js","src/api/offer.js","src/api/propensity-api.js","src/api/subscribe-response.js","src/api/subscriptions.js","src/api/user-data.js","src/components/activities.js","src/components/dialog-manager.js","src/components/dialog.js","src/components/friendly-iframe.js","src/components/graypane.js","src/components/view.js","src/main-babel.js","src/main.js","src/model/doc.js","src/model/page-config-resolver.js","src/model/page-config.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/object-values.js","src/polyfills/promise.js","src/proto/api_messages.js","src/runtime/analytics-service.js","src/runtime/button-api.js","src/runtime/callbacks.js","src/runtime/client-event-manager.js","src/runtime/contributions-flow.js","src/runtime/deferred-account-flow.js","src/runtime/deps.js","src/runtime/entitlements-manager.js","src/runtime/event-type-mapping.js","src/runtime/experiment-flags.js","src/runtime/experiments.js","src/runtime/fetcher.js","src/runtime/jserror.js","src/runtime/link-accounts-flow.js","src/runtime/logger.js","src/runtime/login-notification-api.js","src/runtime/login-prompt-api.js","src/runtime/offers-api.js","src/runtime/offers-flow.js","src/runtime/pay-client.js","src/runtime/pay-flow.js","src/runtime/propensity-server.js","src/runtime/propensity.js","src/runtime/runtime.js","src/runtime/services.js","src/runtime/smart-button-api.js","src/runtime/storage.js","src/runtime/wait-for-subscription-lookup-api.js","src/ui/activity-iframe-view.js","src/ui/loading-view.js","src/ui/toast.js","src/utils/activity-utils.js","src/utils/animation.js","src/utils/bytes.js","src/utils/document-ready.js","src/utils/dom.js","src/utils/errors.js","src/utils/i18n.js","src/utils/json.js","src/utils/jwt.js","src/utils/log.js","src/utils/object.js","src/utils/preconnect.js","src/utils/random.js","src/utils/string.js","src/utils/style.js","src/utils/types.js","src/utils/url.js","src/utils/xhr.js","third_party/babel/custom-babel-helpers.js","third_party/gpay/src/constants.js","third_party/gpay/src/element_injector.js","third_party/gpay/src/graypane.js","third_party/gpay/src/pay_frame_helper.js","third_party/gpay/src/payjs_async.js","third_party/gpay/src/payments_client_delegate_interface.js","third_party/gpay/src/payments_request_delegate.js","third_party/gpay/src/payments_web_activity_delegate.js","third_party/gpay/src/post_message_service.js","third_party/gpay/src/upi_handler.js","third_party/gpay/src/utils.js","third_party/gpay/src/validator.js","third_party/gpay/third_party/random_uuid/Random.uuid.js"],"names":[],"mappings":"AAAA;;ACAO,IAAM,GAAG,GAAG,w4BAAw4B,CAAC;;;;;ACAr5B,IAAM,GAAG,GAAG,g3CAAg3C,CAAC;;;;ACAp4C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACngBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;iCC9wD6C,uBAAuB;;;AAG7D,IAAM,YAAY,GAAG;;AAE1B,eAAa,EAAE,CAAC;;AAEhB,cAAY,EAAE,CAAC;CAChB,CAAC;;;;;;;;;;;;;;;;;;;AAkBK,IAAI,WAAW,YAAA,CAAC;;;;;;;IAKV,qBAAqB;WAArB,qBAAqB;sCAArB,qBAAqB;;;;;;;;;AAArB,uB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","file":"subscriptions.max.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export const CSS = \".swg-dialog,.swg-toast{box-sizing:border-box;background-color:#fff!important}.swg-toast{position:fixed!important;bottom:0!important;max-height:46px!important;z-index:2147483647!important;border:none!important}@media (max-height:640px), (max-width:640px){.swg-dialog,.swg-toast{width:480px!important;left:-240px!important;margin-left:50vw!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important}}@media (min-width:640px) and (min-height:640px){.swg-dialog{width:630px!important;left:-315px!important;margin-left:50vw!important;background-color:transparent!important;border:none!important}.swg-toast{left:0!important}}@media (max-width:480px){.swg-dialog,.swg-toast{width:100%!important;left:0!important;right:0!important;margin-left:0!important}}\\n/*# sourceURL=/./src/components/dialog.css*/\";","export const CSS = \"body{padding:0;margin:0}swg-container,swg-loading,swg-loading-animate,swg-loading-image{display:block}swg-loading-container{width:100%!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;-ms-flex-pack:center!important;justify-content:center!important;min-height:148px!important;height:100%!important;bottom:0!important;margin-top:5px!important;z-index:2147483647!important}@media (min-height:630px), (min-width:630px){swg-loading-container{width:560px!important;margin-left:35px!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;background-color:#fff!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important}}swg-loading{z-index:2147483647!important;width:36px;height:36px;overflow:hidden;animation:mspin-rotate 1568.63ms linear infinite}swg-loading-animate{animation:mspin-revrot 5332ms steps(4) infinite}swg-loading-image{background-image:url($assets$/loader.svg);background-size:100%;width:11664px;height:36px;animation:swg-loading-film 5332ms steps(324) infinite}@keyframes swg-loading-film{0%{transform:translateX(0)}to{transform:translateX(-11664px)}}@keyframes mspin-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes mspin-revrot{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}\\n/*# sourceURL=/./src/ui/ui.css*/\";","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid an promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * @license\n * Copyright 2017 The Web Activities Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n /** Version: 1.24 */\n'use strict';\n\n/*eslint no-unused-vars: 0*/\n\n\n/**\n * @enum {string}\n */\nconst ActivityMode = {\n  IFRAME: 'iframe',\n  POPUP: 'popup',\n  REDIRECT: 'redirect',\n};\n\n\n/**\n * The result code used for `ActivityResult`.\n * @enum {string}\n */\nconst ActivityResultCode = {\n  OK: 'ok',\n  CANCELED: 'canceled',\n  FAILED: 'failed',\n};\n\n\n/**\n * The result of an activity. The activity implementation returns this object\n * for a successful result, a cancelation or a failure.\n * @struct\n */\nclass ActivityResult {\n  /**\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @param {!ActivityMode} mode\n   * @param {string} origin\n   * @param {boolean} originVerified\n   * @param {boolean} secureChannel\n   */\n  constructor(code, data, mode, origin, originVerified, secureChannel) {\n    /** @const {!ActivityResultCode} */\n    this.code = code;\n    /** @const {*} */\n    this.data = code == ActivityResultCode.OK ? data : null;\n    /** @const {!ActivityMode} */\n    this.mode = mode;\n    /** @const {string} */\n    this.origin = origin;\n    /** @const {boolean} */\n    this.originVerified = originVerified;\n    /** @const {boolean} */\n    this.secureChannel = secureChannel;\n    /** @const {boolean} */\n    this.ok = code == ActivityResultCode.OK;\n    /** @const {?Error} */\n    this.error = code == ActivityResultCode.FAILED ?\n        new Error(String(data) || '') :\n        null;\n  }\n}\n\n\n/**\n * The activity request that different types of hosts can be started with.\n * @typedef {{\n *   requestId: string,\n *   returnUrl: string,\n *   args: ?Object,\n *   origin: (string|undefined),\n *   originVerified: (boolean|undefined),\n * }}\n */\nlet ActivityRequest;\n\n\n/**\n * The activity \"open\" options used for popups and redirects.\n *\n * - returnUrl: override the return URL. By default, the current URL will be\n *   used.\n * - skipRequestInUrl: removes the activity request from the URL, in case\n *   redirect is used. By default, the activity request is appended to the\n *   activity URL. This option can be used if the activity request is passed\n *   to the activity by some alternative means.\n * - disableRedirectFallback: disallows popup fallback to redirect. By default\n *   the redirect fallback is allowed. This option has to be used very carefully\n *   because there are many user agents that may fail to open a popup and it\n *   won't be always possible for the opener window to even be aware of such\n *   failures.\n *\n * @typedef {{\n *   returnUrl: (string|undefined),\n *   skipRequestInUrl: (boolean|undefined),\n *   disableRedirectFallback: (boolean|undefined),\n *   width: (number|undefined),\n *   height: (number|undefined),\n * }}\n */\nlet ActivityOpenOptions;\n\n\n/**\n * Activity client-side binding. The port provides limited ways to communicate\n * with the activity and receive signals and results from it. Not every type\n * of activity exposes a port.\n *\n * @interface\n */\nclass ActivityPort {\n\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!ActivityMode}\n   */\n  getMode() {}\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!ActivityResult>}\n   */\n  acceptResult() {}\n}\n\n\n/**\n * Activity client-side binding for messaging.\n *\n * Whether the host can or cannot receive a message depends on the type of\n * host and its state. Ensure that the code has an alternative path if\n * messaging is not available.\n *\n * @interface\n */\nclass ActivityMessagingPort {\n\n  /**\n   * Returns the target window where host is loaded. May be unavailable.\n   * @return {?Window}\n   */\n  getTargetWin() {}\n\n  /**\n   * Sends a message to the host.\n   * @param {!Object} payload\n   */\n  message(payload) {}\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * @param {function(!Object)} callback\n   */\n  onMessage(callback) {}\n\n  /**\n   * Creates a new communication channel or returns an existing one.\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  messageChannel(opt_name) {}\n}\n\n\n\n/** DOMException.ABORT_ERR name */\nconst ABORT_ERR_NAME = 'AbortError';\n\n/** DOMException.ABORT_ERR = 20 */\nconst ABORT_ERR_CODE = 20;\n\n/** @type {?HTMLAnchorElement} */\nlet aResolver;\n\n\n/**\n * @param {string} urlString\n * @return {!HTMLAnchorElement}\n */\nfunction parseUrl(urlString) {\n  if (!aResolver) {\n    aResolver = /** @type {!HTMLAnchorElement} */ (document.createElement('a'));\n  }\n  aResolver.href = urlString;\n  return /** @type {!HTMLAnchorElement} */ (aResolver);\n}\n\n\n/**\n * @param {!Location|!URL|!HTMLAnchorElement} loc\n * @return {string}\n */\nfunction getOrigin(loc) {\n  if (loc.origin) {\n    return loc.origin;\n  }\n  // Make sure that the origin is normalized. Specifically on IE, host sometimes\n  // includes the default port, which is not per standard.\n  const protocol = loc.protocol;\n  let host = loc.host;\n  if (protocol == 'https:' && host.indexOf(':443') == host.length - 4) {\n    host = host.replace(':443', '');\n  } else if (protocol == 'http:' && host.indexOf(':80') == host.length - 3) {\n    host = host.replace(':80', '');\n  }\n  return protocol + '//' + host;\n}\n\n\n/**\n * @param {string} urlString\n * @return {string}\n */\nfunction getOriginFromUrl(urlString) {\n  return getOrigin(parseUrl(urlString));\n}\n\n\n/**\n * @param {string} urlString\n * @return {string}\n */\nfunction removeFragment(urlString) {\n  const index = urlString.indexOf('#');\n  if (index == -1) {\n    return urlString;\n  }\n  return urlString.substring(0, index);\n}\n\n\n/**\n * Parses and builds Object of URL query string.\n * @param {string} query The URL query string.\n * @return {!Object<string, string>}\n */\nfunction parseQueryString(query) {\n  if (!query) {\n    return {};\n  }\n  return (/^[?#]/.test(query) ? query.slice(1) : query)\n      .split('&')\n      .reduce((params, param) => {\n        const item = param.split('=');\n        const key = decodeURIComponent(item[0] || '');\n        const value = decodeURIComponent(item[1] || '');\n        if (key) {\n          params[key] = value;\n        }\n        return params;\n      }, {});\n}\n\n\n/**\n * @param {string} queryString  A query string in the form of \"a=b&c=d\". Could\n *   be optionally prefixed with \"?\" or \"#\".\n * @param {string} param The param to get from the query string.\n * @return {?string}\n */\nfunction getQueryParam(queryString, param) {\n  return parseQueryString(queryString)[param];\n}\n\n\n/**\n * Add a query-like parameter to the fragment string.\n * @param {string} url\n * @param {string} param\n * @param {string} value\n * @return {string}\n */\nfunction addFragmentParam(url, param, value) {\n  return url +\n      (url.indexOf('#') == -1 ? '#' : '&') +\n      encodeURIComponent(param) + '=' + encodeURIComponent(value);\n}\n\n\n/**\n * @param {string} queryString  A query string in the form of \"a=b&c=d\". Could\n *   be optionally prefixed with \"?\" or \"#\".\n * @param {string} param The param to remove from the query string.\n * @return {?string}\n */\nfunction removeQueryParam(queryString, param) {\n  if (!queryString) {\n    return queryString;\n  }\n  const search = encodeURIComponent(param) + '=';\n  let index = -1;\n  do {\n    index = queryString.indexOf(search, index);\n    if (index != -1) {\n      const prev = index > 0 ? queryString.substring(index - 1, index) : '';\n      if (prev == '' || prev == '?' || prev == '#' || prev == '&') {\n        let end = queryString.indexOf('&', index + 1);\n        if (end == -1) {\n          end = queryString.length;\n        }\n        queryString =\n            queryString.substring(0, index) +\n            queryString.substring(end + 1);\n      } else {\n        index++;\n      }\n    }\n  } while (index != -1 && index < queryString.length);\n  return queryString;\n}\n\n\n/**\n * @param {!ActivityRequest} request\n * @return {string}\n */\nfunction serializeRequest(request) {\n  const map = {\n    'requestId': request.requestId,\n    'returnUrl': request.returnUrl,\n    'args': request.args,\n  };\n  if (request.origin !== undefined) {\n    map['origin'] = request.origin;\n  }\n  if (request.originVerified !== undefined) {\n    map['originVerified'] = request.originVerified;\n  }\n  return JSON.stringify(map);\n}\n\n\n/**\n * @param {*} error\n * @return {boolean}\n */\nfunction isAbortError(error) {\n  if (!error || typeof error != 'object') {\n    return false;\n  }\n  return (error['name'] === ABORT_ERR_NAME);\n}\n\n\n/**\n * Creates or emulates a DOMException of AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {!Window} win\n * @param {string=} opt_message\n * @return {!DOMException}\n */\nfunction createAbortError(win, opt_message) {\n  const message = 'AbortError' + (opt_message ? ': ' + opt_message : '');\n  let error = null;\n  if (typeof win['DOMException'] == 'function') {\n    // TODO(dvoytenko): remove typecast once externs are fixed.\n    const constr = /** @type {function(new:DOMException, string, string)} */ (\n        win['DOMException']);\n    try {\n      error = new constr(message, ABORT_ERR_NAME);\n    } catch (e) {\n      // Ignore. In particular, `new DOMException()` fails in Edge.\n    }\n  }\n  if (!error) {\n    // TODO(dvoytenko): remove typecast once externs are fixed.\n    const constr = /** @type {function(new:DOMException, string)} */ (\n        Error);\n    error = new constr(message);\n    error.name = ABORT_ERR_NAME;\n    error.code = ABORT_ERR_CODE;\n  }\n  return error;\n}\n\n\n/**\n * Resolves the activity result as a promise:\n *  - `OK` result is yielded as the promise's payload;\n *  - `CANCEL` result is rejected with the `AbortError`;\n *  - `FAILED` result is rejected with the embedded error.\n *\n * @param {!Window} win\n * @param {!ActivityResult} result\n * @param {function((!ActivityResult|!Promise))} resolver\n */\nfunction resolveResult(win, result, resolver) {\n  if (result.ok) {\n    resolver(result);\n  } else {\n    const error = result.error || createAbortError(win);\n    error.activityResult = result;\n    resolver(Promise.reject(error));\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIeBrowser(win) {\n  // MSIE and Trident are typical user agents for IE browsers.\n  const nav = win.navigator;\n  return /Trident|MSIE|IEMobile/i.test(nav && nav.userAgent);\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isEdgeBrowser(win) {\n  const nav = win.navigator;\n  return /Edge/i.test(nav && nav.userAgent);\n}\n\n\n/**\n * @param {!Error} e\n */\nfunction throwAsync(e) {\n  setTimeout(() => {throw e;});\n}\n\n\n/**\n * Polyfill of the `Node.isConnected` API. See\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected.\n * @param {!Node} node\n * @return {boolean}\n */\nfunction isNodeConnected(node) {\n  // Ensure that node is attached if specified. This check uses a new and\n  // fast `isConnected` API and thus only checked on platforms that have it.\n  // See https://www.chromestatus.com/feature/5676110549352448.\n  if ('isConnected' in node) {\n    return node['isConnected'];\n  }\n  // Polyfill.\n  const root = node.ownerDocument && node.ownerDocument.documentElement;\n  return (root && root.contains(node)) || false;\n}\n\n\n\nconst SENTINEL = '__ACTIVITIES__';\n\n\n/**\n * The messenger helper for activity's port and host.\n */\nclass Messenger {\n\n  /**\n   * @param {!Window} win\n   * @param {!Window|function():?Window} targetOrCallback\n   * @param {?string} targetOrigin\n   * @param {boolean} requireTarget\n   */\n  constructor(win, targetOrCallback, targetOrigin, requireTarget) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Window|function():?Window} */\n    this.targetOrCallback_ = targetOrCallback;\n\n    /**\n     * May start as unknown (`null`) until received in the first message.\n     * @private {?string}\n     */\n    this.targetOrigin_ = targetOrigin;\n\n    /** @private @const {boolean} */\n    this.requireTarget_ = requireTarget;\n\n    /** @private {?Window} */\n    this.target_ = null;\n\n    /** @private {boolean} */\n    this.acceptsChannel_ = false;\n\n    /** @private {?MessagePort} */\n    this.port_ = null;\n\n    /** @private {?function(string, ?Object)} */\n    this.onCommand_ = null;\n\n    /** @private {?function(!Object)} */\n    this.onCustomMessage_ = null;\n\n    /**\n     * @private {?Object<string, !ChannelHolder>}\n     */\n    this.channels_ = null;\n\n    /** @private @const */\n    this.boundHandleEvent_ = this.handleEvent_.bind(this);\n  }\n\n  /**\n   * Connect the port to the host or vice versa.\n   * @param {function(string, ?Object)} onCommand\n   */\n  connect(onCommand) {\n    if (this.onCommand_) {\n      throw new Error('already connected');\n    }\n    this.onCommand_ = onCommand;\n    this.win_.addEventListener('message', this.boundHandleEvent_);\n  }\n\n  /**\n   * Disconnect messenger.\n   */\n  disconnect() {\n    if (this.onCommand_) {\n      this.onCommand_ = null;\n      if (this.port_) {\n        closePort(this.port_);\n        this.port_ = null;\n      }\n      this.win_.removeEventListener('message', this.boundHandleEvent_);\n      if (this.channels_) {\n        for (const k in this.channels_) {\n          const channelObj = this.channels_[k];\n          if (channelObj.port1) {\n            closePort(channelObj.port1);\n          }\n          if (channelObj.port2) {\n            closePort(channelObj.port2);\n          }\n        }\n        this.channels_ = null;\n      }\n    }\n  }\n\n  /**\n   * Returns whether the messenger has been connected already.\n   * @return {boolean}\n   */\n  isConnected() {\n    return this.targetOrigin_ != null;\n  }\n\n  /**\n   * Returns the messaging target. Only available when connection has been\n   * establihsed.\n   * @return {!Window}\n   */\n  getTarget() {\n    const target = this.getOptionalTarget_();\n    if (!target) {\n      throw new Error('not connected');\n    }\n    return target;\n  }\n\n  /**\n   * @return {?Window}\n   * @private\n   */\n  getOptionalTarget_() {\n    if (this.onCommand_ && !this.target_) {\n      if (typeof this.targetOrCallback_ == 'function') {\n        this.target_ = this.targetOrCallback_();\n      } else {\n        this.target_ = /** @type {!Window} */ (this.targetOrCallback_);\n      }\n    }\n    return this.target_;\n  }\n\n  /**\n   * Returns the messaging origin. Only available when connection has been\n   * establihsed.\n   * @return {string}\n   */\n  getTargetOrigin() {\n    if (this.targetOrigin_ == null) {\n      throw new Error('not connected');\n    }\n    return this.targetOrigin_;\n  }\n\n  /**\n   * The host sends this message to the client to indicate that it's ready to\n   * start communicating. The client is expected to respond back with the\n   * \"start\" command. See `sendStartCommand` method.\n   */\n  sendConnectCommand() {\n    // TODO(dvoytenko): MessageChannel is critically necessary for IE/Edge,\n    // since window messaging doesn't always work. It's also preferred as an API\n    // for other browsers: it's newer, cleaner and arguably more secure.\n    // Unfortunately, browsers currently do not propagate user gestures via\n    // MessageChannel, only via window messaging. This should be re-enabled\n    // once browsers fix user gesture propagation.\n    // See:\n    // Safari: https://bugs.webkit.org/show_bug.cgi?id=186593\n    // Chrome: https://bugs.chromium.org/p/chromium/issues/detail?id=851493\n    // Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1469422\n    const acceptsChannel = isIeBrowser(this.win_) || isEdgeBrowser(this.win_);\n    this.sendCommand('connect', {'acceptsChannel': acceptsChannel});\n  }\n\n  /**\n   * The client sends this message to the host upon receiving the \"connect\"\n   * message to start the main communication channel. As a payload, the message\n   * will contain the provided start arguments.\n   * @param {?Object} args\n   */\n  sendStartCommand(args) {\n    let channel = null;\n    if (this.acceptsChannel_ && typeof this.win_.MessageChannel == 'function') {\n      channel = new this.win_.MessageChannel();\n    }\n    if (channel) {\n      this.sendCommand('start', args, [channel.port2]);\n      // It's critical to switch to port messaging only after \"start\" has been\n      // sent. Otherwise, it won't be delivered.\n      this.switchToChannel_(channel.port1);\n    } else {\n      this.sendCommand('start', args);\n    }\n  }\n\n  /**\n   * Sends the specified command from the port to the host or vice versa.\n   * @param {string} cmd\n   * @param {?Object=} opt_payload\n   * @param {?Array=} opt_transfer\n   */\n  sendCommand(cmd, opt_payload, opt_transfer) {\n    const data = {\n      'sentinel': SENTINEL,\n      'cmd': cmd,\n      'payload': opt_payload || null,\n    };\n    if (this.port_) {\n      this.port_.postMessage(data, opt_transfer || undefined);\n    } else {\n      const target = this.getTarget();\n      // Only \"connect\" command is allowed to use `targetOrigin == '*'`\n      const targetOrigin =\n          cmd == 'connect' ?\n          (this.targetOrigin_ != null ? this.targetOrigin_ : '*') :\n          this.getTargetOrigin();\n      target.postMessage(data, targetOrigin, opt_transfer || undefined);\n    }\n  }\n\n  /**\n   * Sends a message to the client.\n   * @param {!Object} payload\n   */\n  customMessage(payload) {\n    this.sendCommand('msg', payload);\n  }\n\n  /**\n   * Registers a callback to receive messages from the client.\n   * @param {function(!Object)} callback\n   */\n  onCustomMessage(callback) {\n    this.onCustomMessage_ = callback;\n  }\n\n  /**\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  startChannel(opt_name) {\n    const name = opt_name || '';\n    const channelObj = this.getChannelObj_(name);\n    if (!channelObj.port1) {\n      const channel = new this.win_.MessageChannel();\n      channelObj.port1 = channel.port1;\n      channelObj.port2 = channel.port2;\n      channelObj.resolver(channelObj.port1);\n    }\n    if (channelObj.port2) {\n      // Not yet sent.\n      this.sendCommand('cnset', {'name': name}, [channelObj.port2]);\n      channelObj.port2 = null;\n    }\n    return channelObj.promise;\n  }\n\n  /**\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  askChannel(opt_name) {\n    const name = opt_name || '';\n    const channelObj = this.getChannelObj_(name);\n    if (!channelObj.port1) {\n      this.sendCommand('cnget', {'name': name});\n    }\n    return channelObj.promise;\n  }\n\n  /**\n   * @param {string} name\n   * @param {!MessagePort} port\n   * @private\n   */\n  receiveChannel_(name, port) {\n    const channelObj = this.getChannelObj_(name);\n    channelObj.port1 = port;\n    channelObj.resolver(port);\n  }\n\n  /**\n   * @param {string} name\n   * @return {!ChannelHolder}\n   */\n  getChannelObj_(name) {\n    if (!this.channels_) {\n      this.channels_ = {};\n    }\n    let channelObj = this.channels_[name];\n    if (!channelObj) {\n      let resolver;\n      const promise = new Promise(resolve => {\n        resolver = resolve;\n      });\n      channelObj = {\n        port1: null,\n        port2: null,\n        resolver,\n        promise,\n      };\n      this.channels_[name] = channelObj;\n    }\n    return channelObj;\n  }\n\n  /**\n   * @param {!MessagePort} port\n   * @private\n   */\n  switchToChannel_(port) {\n    if (this.port_) {\n      closePort(this.port_);\n    }\n    this.port_ = port;\n    this.port_.onmessage = event => {\n      const data = event.data;\n      const cmd = data && data['cmd'];\n      const payload = data && data['payload'] || null;\n      if (cmd) {\n        this.handleCommand_(cmd, payload, event);\n      }\n    };\n    // Even though all messaging will switch to ports, the window-based message\n    // listener will be preserved just in case the host is refreshed and needs\n    // another connection.\n  }\n\n  /**\n   * @param {!MessageEvent} event\n   * @private\n   */\n  handleEvent_(event) {\n    if (this.requireTarget_ && this.getOptionalTarget_() != event.source) {\n      // When target is required, confirm it against the event.source. This\n      // is normally only needed for ports where a single window can include\n      // multiple iframes to match the event to a specific iframe. Otherwise,\n      // the origin checks below are sufficient.\n      return;\n    }\n    const data = event.data;\n    if (!data || data['sentinel'] != SENTINEL) {\n      return;\n    }\n    const cmd = data['cmd'];\n    if (this.port_ && cmd != 'connect' && cmd != 'start') {\n      // Messaging channel has already taken over. However, the \"connect\" and\n      // \"start\" commands are allowed to proceed in case re-connection is\n      // requested.\n      return;\n    }\n    const origin = /** @type {string} */ (event.origin);\n    const payload = data['payload'] || null;\n    if (this.targetOrigin_ == null && cmd == 'start') {\n      this.targetOrigin_ = origin;\n    }\n    if (this.targetOrigin_ == null && event.source) {\n      if (this.getOptionalTarget_() == event.source) {\n        this.targetOrigin_ = origin;\n      }\n    }\n    // Notice that event.source may differ from the target because of\n    // friendly-iframe intermediaries.\n    if (origin != this.targetOrigin_) {\n      return;\n    }\n    this.handleCommand_(cmd, payload, event);\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @param {!MessageEvent} event\n   * @private\n   */\n  handleCommand_(cmd, payload, event) {\n    if (cmd == 'connect') {\n      if (this.port_) {\n        // In case the port has already been open - close it to reopen it\n        // again later.\n        closePort(this.port_);\n        this.port_ = null;\n      }\n      this.acceptsChannel_ = payload && payload['acceptsChannel'] || false;\n      this.onCommand_(cmd, payload);\n    } else if (cmd == 'start') {\n      const port = event.ports && event.ports[0];\n      if (port) {\n        this.switchToChannel_(port);\n      }\n      this.onCommand_(cmd, payload);\n    } else if (cmd == 'msg') {\n      if (this.onCustomMessage_ != null && payload != null) {\n        this.onCustomMessage_(payload);\n      }\n    } else if (cmd == 'cnget') {\n      const name = payload['name'];\n      this.startChannel(name);\n    } else if (cmd == 'cnset') {\n      const name = payload['name'];\n      const port = event.ports[0];\n      this.receiveChannel_(name, /** @type {!MessagePort} */ (port));\n    } else {\n      this.onCommand_(cmd, payload);\n    }\n  }\n}\n\n\n/**\n * @param {!MessagePort} port\n */\nfunction closePort(port) {\n  try {\n    port.close();\n  } catch (e) {\n    // Ignore.\n  }\n}\n\n\n\n\n/**\n * The `ActivityPort` implementation for the iframe case. Unlike other types\n * of activities, iframe-based activities are always connected and can react\n * to size requests.\n *\n * @implements {ActivityPort}\n * @implements {ActivityMessagingPort}\n */\nclass ActivityIframePort {\n\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   */\n  constructor(iframe, url, opt_args) {\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = iframe;\n    /** @private @const {string} */\n    this.url_ = url;\n    /** @private @const {?Object} */\n    this.args_ = opt_args || null;\n\n    /** @private @const {!Window} */\n    this.win_ = /** @type {!Window} */ (this.iframe_.ownerDocument.defaultView);\n\n    /** @private @const {string} */\n    this.targetOrigin_ = getOriginFromUrl(url);\n\n    /** @private {boolean} */\n    this.connected_ = false;\n\n    /** @private {?function()} */\n    this.connectedResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.connectedPromise_ = new Promise(resolve => {\n      this.connectedResolver_ = resolve;\n    });\n\n    /** @private {?function()} */\n    this.readyResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.readyPromise_ = new Promise(resolve => {\n      this.readyResolver_ = resolve;\n    });\n\n    /** @private {?function((!ActivityResult|!Promise))} */\n    this.resultResolver_ = null;\n\n    /** @private @const {!Promise<!ActivityResult>} */\n    this.resultPromise_ = new Promise(resolve => {\n      this.resultResolver_ = resolve;\n    });\n\n    /** @private {?function(number)} */\n    this.onResizeRequest_ = null;\n\n    /** @private {?number} */\n    this.requestedHeight_ = null;\n\n    /** @private @const {!Messenger} */\n    this.messenger_ = new Messenger(\n        this.win_,\n        () => this.iframe_.contentWindow,\n        this.targetOrigin_,\n        /* requireTarget */ true);\n  }\n\n  /** @override */\n  getMode() {\n    return ActivityMode.IFRAME;\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {\n    if (!isNodeConnected(this.iframe_)) {\n      throw new Error('iframe must be in DOM');\n    }\n    this.messenger_.connect(this.handleCommand_.bind(this));\n    this.iframe_.src = this.url_;\n    return this.connectedPromise_;\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    this.connected_ = false;\n    this.messenger_.disconnect();\n  }\n\n  /** @override */\n  acceptResult() {\n    return this.resultPromise_;\n  }\n\n  /** @override */\n  getTargetWin() {\n    return this.iframe_.contentWindow || null;\n  }\n\n  /** @override */\n  message(payload) {\n    this.messenger_.customMessage(payload);\n  }\n\n  /** @override */\n  onMessage(callback) {\n    this.messenger_.onCustomMessage(callback);\n  }\n\n  /** @override */\n  messageChannel(opt_name) {\n    return this.messenger_.askChannel(opt_name);\n  }\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.readyPromise_;\n  }\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} callback\n   */\n  onResizeRequest(callback) {\n    this.onResizeRequest_ = callback;\n    Promise.resolve().then(() => {\n      if (this.requestedHeight_ != null) {\n        callback(this.requestedHeight_);\n      }\n    });\n  }\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {\n    if (!this.connected_) {\n      return;\n    }\n    const height = this.iframe_.offsetHeight;\n    this.messenger_.sendCommand('resized', {'height': height});\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @private\n   */\n  handleCommand_(cmd, payload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.connected_ = true;\n      this.messenger_.sendStartCommand(this.args_);\n      this.connectedResolver_();\n    } else if (cmd == 'result') {\n      // The last message. Indicates that the result has been received.\n      if (this.resultResolver_) {\n        const code = /** @type {!ActivityResultCode} */ (payload['code']);\n        const data =\n            code == ActivityResultCode.FAILED ?\n            new Error(payload['data'] || '') :\n            payload['data'];\n        const result = new ActivityResult(\n            code,\n            data,\n            ActivityMode.IFRAME,\n            this.messenger_.getTargetOrigin(),\n            /* originVerified */ true,\n            /* secureChannel */ true);\n        resolveResult(this.win_, result, this.resultResolver_);\n        this.resultResolver_ = null;\n        this.messenger_.sendCommand('close');\n        this.disconnect();\n      }\n    } else if (cmd == 'ready') {\n      if (this.readyResolver_) {\n        this.readyResolver_();\n        this.readyResolver_ = null;\n      }\n    } else if (cmd == 'resize') {\n      this.requestedHeight_ = /** @type {number} */ (payload['height']);\n      if (this.onResizeRequest_) {\n        this.onResizeRequest_(this.requestedHeight_);\n      }\n    }\n  }\n}\n\n\n\n\n/**\n * The `ActivityPort` implementation for the standalone window activity\n * client executed as a popup.\n *\n * @implements {ActivityPort}\n * @implements {ActivityMessagingPort}\n */\nclass ActivityWindowPort {\n\n  /**\n   * @param {!Window} win\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   */\n  constructor(win, requestId, url, target, opt_args, opt_options) {\n    const isValidTarget =\n        target &&\n        (target == '_blank' || target == '_top' || target[0] != '_');\n    if (!isValidTarget) {\n      throw new Error('The only allowed targets are \"_blank\", \"_top\"' +\n          ' and name targets');\n    }\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {string} */\n    this.requestId_ = requestId;\n    /** @private @const {string} */\n    this.url_ = url;\n    /** @private @const {string} */\n    this.openTarget_ = target;\n    /** @private @const {?Object} */\n    this.args_ = opt_args || null;\n    /** @private @const {!ActivityOpenOptions} */\n    this.options_ = opt_options || {};\n\n    /** @private {?function()} */\n    this.connectedResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.connectedPromise_ = new Promise(resolve => {\n      this.connectedResolver_ = resolve;\n    });\n\n    /** @private {?function((!ActivityResult|!Promise))} */\n    this.resultResolver_ = null;\n\n    /** @private @const {!Promise<!ActivityResult>} */\n    this.resultPromise_ = new Promise(resolve => {\n      this.resultResolver_ = resolve;\n    });\n\n    /** @private {?Window} */\n    this.targetWin_ = null;\n\n    /** @private {?number} */\n    this.heartbeatInterval_ = null;\n\n    /** @private {?Messenger} */\n    this.messenger_ = null;\n  }\n\n  /** @override */\n  getMode() {\n    return this.openTarget_ == '_top' ?\n        ActivityMode.REDIRECT :\n        ActivityMode.POPUP;\n  }\n\n  /**\n   * Opens the activity in a window, either as a popup or via redirect.\n   *\n   * Returns the promise that will yield when the window returns or closed.\n   * Notice, that this promise may never complete if \"redirect\" mode was used.\n   *\n   * @return {!Promise}\n   */\n  open() {\n    return this.openInternal_();\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  whenConnected() {\n    return this.connectedPromise_;\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    if (this.heartbeatInterval_) {\n      this.win_.clearInterval(this.heartbeatInterval_);\n      this.heartbeatInterval_ = null;\n    }\n    if (this.messenger_) {\n      this.messenger_.disconnect();\n      this.messenger_ = null;\n    }\n    if (this.targetWin_) {\n      // Try to close the popup window. The host will also try to do the same.\n      try {\n        this.targetWin_.close();\n      } catch (e) {\n        // Ignore.\n      }\n      this.targetWin_ = null;\n    }\n    this.resultResolver_ = null;\n  }\n\n  /** @override */\n  getTargetWin() {\n    return this.targetWin_;\n  }\n\n  /** @override */\n  acceptResult() {\n    return this.resultPromise_;\n  }\n\n  /**\n   * Sends a message to the host.\n   * Whether the host can or cannot receive a message depends on the type of\n   * host and its state. Ensure that the code has an alternative path if\n   * messaging is not available.\n   * @override\n   */\n  message(payload) {\n    this.messenger_.customMessage(payload);\n  }\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * Whether the host can or cannot receive a message depends on the type of\n   * host and its state. Ensure that the code has an alternative path if\n   * messaging is not available.\n   * @override\n   */\n  onMessage(callback) {\n    this.messenger_.onCustomMessage(callback);\n  }\n\n  /**\n   * Creates a new communication channel or returns an existing one.\n   * Whether the host can or cannot receive a message depends on the type of\n   * host and its state. Ensure that the code has an alternative path if\n   * messaging is not available.\n   * @override\n   */\n  messageChannel(opt_name) {\n    return this.messenger_.askChannel(opt_name);\n  }\n\n  /**\n   * This method wraps around window's open method. It first tries to execute\n   * `open` call with the provided target and if it fails, it retries the call\n   * with the `_top` target. This is necessary given that in some embedding\n   * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n   * is blocked by default.\n   * @return {!Promise}\n   * @private\n   */\n  openInternal_() {\n    const featuresStr = this.buildFeatures_();\n\n    // Protectively, the URL will contain the request payload, unless explicitly\n    // directed not to via `skipRequestInUrl` option.\n    let url = this.url_;\n    if (!this.options_.skipRequestInUrl) {\n      const returnUrl =\n          this.options_.returnUrl ||\n          removeFragment(this.win_.location.href);\n      const requestString = serializeRequest({\n        requestId: this.requestId_,\n        returnUrl,\n        args: this.args_,\n      });\n      url = addFragmentParam(url, '__WA__', requestString);\n    }\n\n    // Open the window.\n    let targetWin;\n    let openTarget = this.openTarget_;\n    // IE does not support CORS popups - the popup has to fallback to redirect\n    // mode.\n    if (openTarget != '_top') {\n      if (isIeBrowser(this.win_)) {\n        openTarget = '_top';\n      }\n    }\n    // Try first with the specified target. If we're inside the WKWebView or\n    // a similar environments, this method is expected to fail by default for\n    // all targets except `_top`.\n    try {\n      targetWin = this.win_.open(url, openTarget, featuresStr);\n    } catch (e) {\n      // Ignore.\n    }\n    // Then try with `_top` target.\n    if (!targetWin &&\n        openTarget != '_top' &&\n        !this.options_.disableRedirectFallback) {\n      openTarget = '_top';\n      try {\n        targetWin = this.win_.open(url, openTarget);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n\n    // Setup the target window.\n    if (targetWin) {\n      this.targetWin_ = targetWin;\n      if (openTarget != '_top') {\n        this.setupPopup_();\n      }\n    } else {\n      this.disconnectWithError_(new Error('failed to open window'));\n    }\n\n    // Return result promise, even though it may never complete.\n    return this.resultPromise_.catch(() => {\n      // Ignore. Call to the `acceptResult()` should fail if needed.\n    });\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  buildFeatures_() {\n    // The max width and heights are calculated as following:\n    // MaxSize = AvailSize - ControlsSize\n    // ControlsSize = OuterSize - InnerSize\n    const screen = this.win_.screen;\n    const availWidth = screen.availWidth || screen.width;\n    const availHeight = screen.availHeight || screen.height;\n    const isTop = this.isTopWindow_();\n    const isEdge = isEdgeBrowser(this.win_);\n    // Limit controls to 100px width and height. Notice that it's only\n    // possible to calculate controls size in the top window, not in iframes.\n    // Notice that the Edge behavior is somewhat unique. If we can't find the\n    // right width/height, it will launch in the full-screen. Other browsers\n    // deal with such cases more gracefully.\n    const controlsWidth =\n        isTop && this.win_.outerWidth > this.win_.innerWidth ?\n        Math.min(100, this.win_.outerWidth - this.win_.innerWidth) :\n        (isEdge ? 100 : 0);\n    const controlsHeight =\n        isTop && this.win_.outerHeight > this.win_.innerHeight ?\n        Math.min(100, this.win_.outerHeight - this.win_.innerHeight) :\n        (isEdge ? 100 : 0);\n    // With all the adjustments, at least 50% of the available width/height\n    // should be made available to a popup.\n    const maxWidth = Math.max(availWidth - controlsWidth, availWidth * 0.5);\n    const maxHeight = Math.max(availHeight - controlsHeight, availHeight * 0.5);\n    let w = Math.floor(Math.min(600, maxWidth * 0.9));\n    let h = Math.floor(Math.min(600, maxHeight * 0.9));\n    if (this.options_.width) {\n      w = Math.min(this.options_.width, maxWidth);\n    }\n    if (this.options_.height) {\n      h = Math.min(this.options_.height, maxHeight);\n    }\n    const x = Math.floor((screen.width - w) / 2);\n    const y = Math.floor((screen.height - h) / 2);\n    const features = {\n      'height': h,\n      'width': w,\n      'resizable': 'yes',\n      'scrollbars': 'yes',\n    };\n    // Do not set left/top in Edge: it fails.\n    if (!isEdge) {\n      features['left'] = x;\n      features['top'] = y;\n    }\n    let featuresStr = '';\n    for (const f in features) {\n      if (featuresStr) {\n        featuresStr += ',';\n      }\n      featuresStr += `${f}=${features[f]}`;\n    }\n    return featuresStr;\n  }\n\n  /**\n   * This method only exists to make iframe/top emulation possible in tests.\n   * Otherwise `window.top` cannot be overridden.\n   * @return {boolean}\n   * @private\n   */\n  isTopWindow_() {\n    return this.win_ == this.win_.top;\n  }\n\n  /** @private */\n  setupPopup_() {\n    // Keep alive to catch the window closing, which would indicate\n    // \"cancel\" signal.\n    this.heartbeatInterval_ = this.win_.setInterval(() => {\n      this.check_(/* delayCancel */ true);\n    }, 500);\n\n    // Start up messaging. The messaging is explicitly allowed to proceed\n    // without origin check b/c all arguments have already been passed in\n    // the URL and special handling is enforced when result is delivered.\n    this.messenger_ = new Messenger(\n        this.win_,\n        /** @type {!Window} */ (this.targetWin_),\n        /* targetOrigin */ null,\n        /* requireTarget */ true);\n    this.messenger_.connect(this.handleCommand_.bind(this));\n  }\n\n  /**\n   * @param {boolean=} opt_delayCancel\n   * @private\n   */\n  check_(opt_delayCancel) {\n    if (!this.targetWin_ || this.targetWin_.closed) {\n      if (this.heartbeatInterval_) {\n        this.win_.clearInterval(this.heartbeatInterval_);\n        this.heartbeatInterval_ = null;\n      }\n      // Give a chance for the result to arrive, but otherwise consider the\n      // responce to be empty.\n      this.win_.setTimeout(() => {\n        try {\n          this.result_(ActivityResultCode.CANCELED, /* data */ null);\n        } catch (e) {\n          this.disconnectWithError_(e);\n        }\n      }, opt_delayCancel ? 3000 : 0);\n    }\n  }\n\n  /**\n   * @param {!Error} reason\n   * @private\n   */\n  disconnectWithError_(reason) {\n    if (this.resultResolver_) {\n      this.resultResolver_(Promise.reject(reason));\n    }\n    this.disconnect();\n  }\n\n  /**\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @private\n   */\n  result_(code, data) {\n    if (this.resultResolver_) {\n      const isConnected = this.messenger_.isConnected();\n      const result = new ActivityResult(\n          code,\n          data,\n          ActivityMode.POPUP,\n          isConnected ?\n              this.messenger_.getTargetOrigin() :\n              getOriginFromUrl(this.url_),\n          /* originVerified */ isConnected,\n          /* secureChannel */ isConnected);\n      resolveResult(this.win_, result, this.resultResolver_);\n      this.resultResolver_ = null;\n    }\n    if (this.messenger_) {\n      this.messenger_.sendCommand('close');\n    }\n    this.disconnect();\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @private\n   */\n  handleCommand_(cmd, payload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.messenger_.sendStartCommand(this.args_);\n      this.connectedResolver_();\n    } else if (cmd == 'result') {\n      // The last message. Indicates that the result has been received.\n      const code = /** @type {!ActivityResultCode} */ (payload['code']);\n      const data =\n          code == ActivityResultCode.FAILED ?\n          new Error(payload['data'] || '') :\n          payload['data'];\n      this.result_(code, data);\n    } else if (cmd == 'check') {\n      this.win_.setTimeout(() => this.check_(), 200);\n    }\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @param {string} fragment\n * @param {string} requestId\n * @return {?ActivityPort}\n */\nfunction discoverRedirectPort(win, fragment, requestId) {\n  // Try to find the result in the fragment.\n  const paramName = '__WA_RES__';\n  const fragmentParam = getQueryParam(fragment, paramName);\n  if (!fragmentParam) {\n    return null;\n  }\n  const response = /** @type {?Object} */ (JSON.parse(fragmentParam));\n  if (!response || response['requestId'] != requestId) {\n    return null;\n  }\n\n  // Remove the found param from the fragment.\n  const cleanFragment = removeQueryParam(win.location.hash, paramName) || '';\n  if (cleanFragment != win.location.hash) {\n    if (win.history && win.history.replaceState) {\n      try {\n        win.history.replaceState(win.history.state, '', cleanFragment);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n  }\n\n  const code = response['code'];\n  const data = response['data'];\n  const origin = response['origin'];\n  const referrerOrigin = win.document.referrer &&\n      getOriginFromUrl(win.document.referrer);\n  const originVerified = origin == referrerOrigin;\n  return new ActivityWindowRedirectPort(\n      win,\n      code,\n      data,\n      origin,\n      originVerified);\n}\n\n\n/**\n * The `ActivityPort` implementation for the standalone window activity\n * client executed as a popup.\n *\n * @implements {ActivityPort}\n */\nclass ActivityWindowRedirectPort {\n\n  /**\n   * @param {!Window} win\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @param {string} targetOrigin\n   * @param {boolean} targetOriginVerified\n   */\n  constructor(win, code, data, targetOrigin, targetOriginVerified) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!ActivityResultCode} */\n    this.code_ = code;\n    /** @private @const {*} */\n    this.data_ = data;\n    /** @private {string} */\n    this.targetOrigin_ = targetOrigin;\n    /** @private {boolean} */\n    this.targetOriginVerified_ = targetOriginVerified;\n  }\n\n  /** @override */\n  getMode() {\n    return ActivityMode.REDIRECT;\n  }\n\n  /** @override */\n  acceptResult() {\n    const result = new ActivityResult(\n        this.code_,\n        this.data_,\n        ActivityMode.REDIRECT,\n        this.targetOrigin_,\n        this.targetOriginVerified_,\n        /* secureChannel */ false);\n    return new Promise(resolve => {\n      resolveResult(this.win_, result, resolve);\n    });\n  }\n}\n\n\n\n\n/**\n * The page-level activities manager ports. This class is intended to be used\n * as a singleton. It can start activities of all modes: iframe, popup, and\n * redirect.\n */\nclass ActivityPorts {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {string} */\n    this.version = '1.24';\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {string} */\n    this.fragment_ = win.location.hash;\n\n    /**\n     * @private @const {!Object<string, !Array<function(!ActivityPort)>>}\n     */\n    this.requestHandlers_ = {};\n\n    /**\n     * The result buffer is indexed by `requestId`.\n     * @private @const {!Object<string, !ActivityPort>}\n     */\n    this.resultBuffer_ = {};\n\n    /** @private {?function(!Error)} */\n    this.redirectErrorResolver_ = null;\n\n    /** @private {!Promise<!Error>} */\n    this.redirectErrorPromise_ = new Promise(resolve => {\n      this.redirectErrorResolver_ = resolve;\n    });\n  }\n\n  /**\n   * Start an activity within the specified iframe.\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   * @return {!Promise<!ActivityIframePort>}\n   */\n  openIframe(iframe, url, opt_args) {\n    const port = new ActivityIframePort(iframe, url, opt_args);\n    return port.connect().then(() => port);\n  }\n\n  /**\n   * Start an activity in a separate window. The result will be delivered\n   * to the `onResult` callback.\n   *\n   * The activity can be opened in two modes: \"popup\" and \"redirect\". This\n   * depends on the `target` value, but also on the browser/environment.\n   *\n   * The allowed `target` values are `_blank`, `_top` and name targets. The\n   * `_self`, `_parent` and similar targets are not allowed.\n   *\n   * The `_top` target indicates that the activity should be opened as a\n   * \"redirect\", while other targets indicate that the activity should be\n   * opened as a popup. The activity client will try to honor the requested\n   * target. However, it's not always possible. Some environments do not\n   * allow popups and they either force redirect or fail the window open\n   * request. In this case, the activity will try to fallback to the \"redirect\"\n   * mode.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {{targetWin: ?Window}}\n   */\n  open(requestId, url, target, opt_args, opt_options) {\n    const port = this.openWin_(requestId, url, target, opt_args, opt_options);\n    return {targetWin: port.getTargetWin()};\n  }\n\n  /**\n   * Start an activity in a separate window and tries to setup messaging with\n   * this window.\n   *\n   * See `open()` method for more details, including `onResult` callback.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {!Promise<!ActivityMessagingPort>}\n   */\n  openWithMessaging(requestId, url, target, opt_args, opt_options) {\n    const port = this.openWin_(requestId, url, target, opt_args, opt_options);\n    return port.whenConnected().then(() => port);\n  }\n\n  /**\n   * Registers the callback for the result of the activity opened with the\n   * specified `requestId` (see the `open()` method). The callback is a\n   * function that takes a single `ActivityPort` argument. The client\n   * can use this object to verify the port using it's origin, verified and\n   * secure channel flags. Then the client can call\n   * `ActivityPort.acceptResult()` method to accept the result.\n   *\n   * The activity result is handled via a separate callback because of a\n   * possible redirect. So use of direct callbacks and/or promises is not\n   * possible in that case.\n   *\n   * A typical implementation would look like:\n   * ```\n   * ports.onResult('request1', function(port) {\n   *   port.acceptResult().then(function(result) {\n   *     // Only verified origins are allowed.\n   *     if (result.origin == expectedOrigin &&\n   *         result.originVerified &&\n   *         result.secureChannel) {\n   *       handleResultForRequest1(result);\n   *     }\n   *   });\n   * })\n   *\n   * ports.open('request1', request1Url, '_blank');\n   * ```\n   *\n   * @param {string} requestId\n   * @param {function(!ActivityPort)} callback\n   */\n  onResult(requestId, callback) {\n    let handlers = this.requestHandlers_[requestId];\n    if (!handlers) {\n      handlers = [];\n      this.requestHandlers_[requestId] = handlers;\n    }\n    handlers.push(callback);\n\n    // Consume available result.\n    const availableResult = this.discoverResult_(requestId);\n    if (availableResult) {\n      this.consumeResult_(availableResult, callback);\n    }\n  }\n\n  /**\n   * @param {function(!Error)} handler\n   */\n  onRedirectError(handler) {\n    this.redirectErrorPromise_.then(handler);\n  }\n\n  /**\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {!ActivityWindowPort}\n   */\n  openWin_(requestId, url, target, opt_args, opt_options) {\n    const port = new ActivityWindowPort(\n        this.win_, requestId, url, target, opt_args, opt_options);\n    port.open().then(() => {\n      // Await result if possible. Notice that when falling back to \"redirect\",\n      // the result will never arrive through this port.\n      this.consumeResultAll_(requestId, port);\n    });\n    return port;\n  }\n\n  /**\n   * @param {string} requestId\n   * @return {?ActivityPort}\n   * @private\n   */\n  discoverResult_(requestId) {\n    let port = this.resultBuffer_[requestId];\n    if (!port && this.fragment_) {\n      try {\n        port = discoverRedirectPort(\n            this.win_, this.fragment_, requestId);\n      } catch (e) {\n        throwAsync(e);\n        this.redirectErrorResolver_(e);\n      }\n      if (port) {\n        this.resultBuffer_[requestId] = port;\n      }\n    }\n    return port;\n  }\n\n  /**\n   * @param {!ActivityPort} port\n   * @param {function(!ActivityPort)} callback\n   * @private\n   */\n  consumeResult_(port, callback) {\n    Promise.resolve().then(() => {\n      callback(port);\n    });\n  }\n\n  /**\n   * @param {string} requestId\n   * @param {!ActivityPort} port\n   * @private\n   */\n  consumeResultAll_(requestId, port) {\n    // Find and execute handlers.\n    const handlers = this.requestHandlers_[requestId];\n    if (handlers) {\n      handlers.forEach(handler => {\n        this.consumeResult_(port, handler);\n      });\n    }\n    // Buffer the result for callbacks that may arrive in the future.\n    this.resultBuffer_[requestId] = port;\n  }\n}\n\n\n\nmodule.exports = {\n  ActivityPorts,\n  ActivityIframePort,\n  ActivityMessagingPort,\n  ActivityMode,\n  ActivityOpenOptions,\n  ActivityPort,\n  ActivityRequest,\n  ActivityResult,\n  ActivityResultCode,\n  ActivityWindowPort,\n  createAbortError,\n  isAbortError,\n};\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AnalyticsEvent,EventOriginator} from '../proto/api_messages';\n\n/** @enum {number}  */\nexport const FilterResult = {\n  /** The event is allowed to proceed to the listeners. */\n  PROCESS_EVENT: 0,\n  /** The event is canceled and the listeners are not informed about it. */\n  CANCEL_EVENT: 1,\n};\n\n/**\n * Defines a client event in SwG\n * Properties:\n * - eventType: Required. The AnalyticsEvent type that occurred.\n * - eventOriginator: Required.  The codebase that initiated the event.\n * - isFromUserAction: Optional.  True if the user took an action to generate\n *   the event.\n * - additionalParameters: Optional.  A JSON object to store generic data.\n *\n *  @typedef {{\n *    eventType: !AnalyticsEvent,\n *    eventOriginator: !EventOriginator,\n *    isFromUserAction: ?boolean,\n *    additionalParameters: ?Object,\n * }}\n */\nexport let ClientEvent;\n\n/**\n * @interface\n */\nexport class ClientEventManagerApi {\n  /**\n   * Call this function to log an event. The registered listeners will be\n   * invoked unless the event is filtered.\n   * @param {!function(!ClientEvent)} listener\n   */\n  registerEventListener(listener) { }\n\n  /**\n   * Register a filterer for events if you need to potentially prevent the\n   * listeners from hearing about it.  A filterer should return\n   * FilterResult.CANCEL_EVENT to prevent listeners from hearing about the\n   * event.\n   * @param {!function(!ClientEvent):FilterResult} filterer\n   */\n  registerEventFilterer(filterer) { }\n\n  /**\n   * Call this function to log an event.  It will immediately throw an error if\n   * the event is invalid.  It will then asynchronously call the filterers and\n   * stop the event if a filterer cancels it.  After that, it will call each\n   * listener asynchronously.\n   * @param {!ClientEvent} event\n   */\n  logEvent(event) { }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlements} from './entitlements';\nimport {PurchaseData} from './subscribe-response';\nimport {UserData} from './user-data';\n\n\n/**\n * Properties:\n * - entitlements - the current entitlements.\n * - consent - whether to ask the user for account creation consent.\n *   Default is `true`.\n *\n * @typedef {{\n *   entitlements: (?Entitlements|undefined),\n *   consent: (boolean|undefined),\n * }}\n */\nexport let DeferredAccountCreationRequest;\n\n\n/**\n */\nexport class DeferredAccountCreationResponse {\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @param {!UserData} userData\n   * @param {!Array<!PurchaseData>} purchaseDataList\n   * @param {function():!Promise} completeHandler\n   */\n  constructor(entitlements, userData, purchaseDataList, completeHandler) {\n    /** @const {!Entitlements} */\n    this.entitlements = entitlements;\n    /** @const {!UserData} */\n    this.userData = userData;\n    /** @const {!Array<!PurchaseData>} */\n    this.purchaseDataList = purchaseDataList;\n    // TODO(dvoytenko): deprecate.\n    /** @const {!PurchaseData} */\n    this.purchaseData = purchaseDataList[0];\n    /** @private @const {function():!Promise} */\n    this.completeHandler_ = completeHandler;\n  }\n\n  /**\n   * @return {!DeferredAccountCreationResponse}\n   */\n  clone() {\n    return new DeferredAccountCreationResponse(\n        this.entitlements,\n        this.userData,\n        this.purchaseDataList,\n        this.completeHandler_);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'entitlements': this.entitlements.json(),\n      'userData': this.userData.json(),\n      'purchaseDataList': this.purchaseDataList.map(pd => pd.json()),\n      // TODO(dvoytenko): deprecate.\n      'purchaseData': this.purchaseData.json(),\n    };\n  }\n\n  /**\n   * Allows the receiving site to complete/acknowledge that it registered\n   * the subscription info. The typical action would be to create an\n   * account (or match an existing one) and associated the subscription with\n   * that account.\n   *\n   * SwG will display progress indicator until this method is called and\n   * upon receiving this call will show the confirmation to the user.\n   * The promise returned by this method will yield once the user closes\n   * the confirmation.\n   *\n   * @return {!Promise}\n   */\n  complete() {\n    return this.completeHandler_();\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The holder of the entitlements for a service.\n */\nexport class Entitlements {\n\n  /**\n   * @param {string} service\n   * @param {string} raw\n   * @param {!Array<!Entitlement>} entitlements\n   * @param {?string} currentProduct\n   * @param {function(!Entitlements)} ackHandler\n   * @param {?boolean|undefined} isReadyToPay\n   * @param {?string|undefined} decryptedDocumentKey\n   */\n  constructor(service, raw, entitlements, currentProduct, ackHandler,\n    isReadyToPay, decryptedDocumentKey) {\n\n    /** @const {string} */\n    this.service = service;\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {!Array<!Entitlement>} */\n    this.entitlements = entitlements;\n    /** @const {boolean} */\n    this.isReadyToPay = isReadyToPay || false;\n    /** @const {?string} */\n    this.decryptedDocumentKey = decryptedDocumentKey || null;\n\n    /** @private @const {?string} */\n    this.product_ = currentProduct;\n    /** @private @const {function(!Entitlements)} */\n    this.ackHandler_ = ackHandler;\n  }\n\n  /**\n   * @return {!Entitlements}\n   */\n  clone() {\n    return new Entitlements(\n        this.service,\n        this.raw,\n        this.entitlements.map(ent => ent.clone()),\n        this.product_,\n        this.ackHandler_,\n        this.isReadyToPay,\n        this.decryptedDocumentKey);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'service': this.service,\n      'entitlements': this.entitlements.map(item => item.json()),\n      'isReadyToPay': this.isReadyToPay,\n    };\n  }\n\n  /**\n   * @param {string=} opt_source\n   * @return {boolean}\n   */\n  enablesThis(opt_source) {\n    return this.enables(this.product_, opt_source);\n  }\n\n  /**\n   * @param {string=} opt_source\n   * @return {boolean}\n   */\n  enablesAny(opt_source) {\n    for (let i = 0; i < this.entitlements.length; i++) {\n      if (this.entitlements[i].products.length > 0 &&\n          (!opt_source || opt_source == this.entitlements[i].source)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Whether these entitlements enable the specified product, optionally also\n   * restricting the source.\n   * @param {?string} product\n   * @param {string=} opt_source\n   * @return {boolean}\n   */\n  enables(product, opt_source) {\n    if (!product) {\n      return false;\n    }\n    return !!this.getEntitlementFor(product, opt_source);\n  }\n\n  /**\n   * Returns the first matching entitlement for the current product,\n   * optionally also matching the specified source.\n   * @param {string=} opt_source\n   * @return {?Entitlement}\n   */\n  getEntitlementForThis(opt_source) {\n    return this.getEntitlementFor(this.product_, opt_source);\n  }\n\n  /**\n   * Returns the first matching entitlement for the specified product,\n   * optionally also matching the specified source.\n   * @param {?string} product\n   * @param {string=} opt_source\n   * @return {?Entitlement}\n   */\n  getEntitlementFor(product, opt_source) {\n    if (product && this.entitlements.length > 0) {\n      for (let i = 0; i < this.entitlements.length; i++) {\n        if (this.entitlements[i].enables(product) &&\n            (!opt_source || opt_source == this.entitlements[i].source)) {\n          return this.entitlements[i];\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the first matching entitlement for the specified source w/o\n   * matching any specific products.\n   * @param {string} source\n   * @return {?Entitlement}\n   */\n  getEntitlementForSource(source) {\n    if (this.entitlements.length > 0) {\n      for (let i = 0; i < this.entitlements.length; i++) {\n        if (this.entitlements[i].subscriptionToken &&\n            (source == this.entitlements[i].source)) {\n          return this.entitlements[i];\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * A 3p site should call this method to acknowledge that it \"saw\" and\n   * \"understood\" entitlements.\n   */\n  ack() {\n    this.ackHandler_(this);\n  }\n}\n\n\n/**\n * The single entitlement object.\n */\nexport class Entitlement {\n\n  /**\n   * @param {string} source\n   * @param {!Array<string>} products\n   * @param {string} subscriptionToken\n   */\n  constructor(source, products, subscriptionToken) {\n    /** @const {string} */\n    this.source = source;\n    /** @const {!Array<string>} */\n    this.products = products;\n    /** @const {string} */\n    this.subscriptionToken = subscriptionToken;\n  }\n\n  /**\n   * @return {!Entitlement}\n   */\n  clone() {\n    return new Entitlement(\n        this.source,\n        this.products.slice(0),\n        this.subscriptionToken);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'source': this.source,\n      'products': this.products,\n      'subscriptionToken': this.subscriptionToken,\n    };\n  }\n\n  /**\n   * @param {?string} product\n   * @return {boolean}\n   */\n  enables(product) {\n    if (!product) {\n      return false;\n    }\n    // Wildcard allows this product.\n    const eq = product.indexOf(':');\n    if (eq != -1 &&\n        this.products.includes(product.substring(0, eq + 1) + '*')) {\n      return true;\n    }\n    return this.products.includes(product);\n  }\n\n  /**\n   * @param {?Object} json\n   * @return {!Entitlement}\n   */\n  static parseFromJson(json) {\n    if (!json) {\n      json = {};\n    }\n    const source = json['source'] || '';\n    const products = json['products'] || [];\n    const subscriptionToken = json['subscriptionToken'];\n    return new Entitlement(source, products, subscriptionToken);\n  }\n\n  /**\n   * The JSON is expected in one of the forms:\n   * - Single entitlement: `{products: [], ...}`.\n   * - A list of entitlements: `[{products: [], ...}, {...}]`.\n   * @param {!Object|!Array<!Object>} json\n   * @return {!Array<!Entitlement>}\n   */\n  static parseListFromJson(json) {\n    const jsonList = Array.isArray(json) ?\n        /** @type {!Array<Object>} */ (json) : [json];\n    return jsonList.map(json => Entitlement.parseFromJson(json));\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @enum {string}\n */\nexport const SubscriptionState = {\n  // user's subscription state not known.\n  UNKNOWN: 'unknown',\n  // user is not a subscriber.\n  NON_SUBSCRIBER: 'non_subscriber',\n  // user is a subscriber.\n  SUBSCRIBER: 'subscriber',\n  // user's subscription has expired.\n  PAST_SUBSCRIBER: 'past_subscriber',\n};\n\n/**\n * Subscription related events. Listed below are enum strings that\n * represent events related to Subscription flow. Event parameters\n * that provide more context about the event are sent as a JSON\n * block of depth 1 in the sendEvent() API call.\n * @enum {string}\n */\nexport const Event = {\n  /**\n   * IMPRESSION_PAYWALL event.\n   * User hits a paywall.\n   * Every impression should be qualified as active or passive.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false to indicate this.\n   * If the user has run out of metering, and thats why was shown\n   * a paywall, that would be a passive impression of the paywall.\n   * For example:\n   * const propensityEvent = {\n   *  name: 'paywall',\n   *  active: false,\n   * }\n   */\n  IMPRESSION_PAYWALL: 'paywall',\n  /**\n   * IMPRESSION_AD event.\n   * User has been shown a subscription ad.\n   * Every impression should be qualified as active or passive.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false to indicate this.\n   * The JSON block can provide the name of the subscription ad\n   * creative or campaign. Ad impressions are usually passive.\n   * const propensityEvent = {\n   *   name: 'ad_shown',\n   *   active: false,\n   *   data: {'ad_name': 'fall_ad'}\n   * }\n   */\n  IMPRESSION_AD: 'ad_shown',\n  /**\n   * IMPRESSION_OFFERS event.\n   * User has been shown a list of available offers for subscription.\n   * Every impression should be qualified as active or passive.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false to indicate this.\n   * The JSON block can provide a list of products displayed,\n   * and the source to indicate why the user was shown the offer.\n   * Note: source is not the same as referrer.\n   * In the cases below, the user took action before seeing the offers,\n   * and therefore considered active impression.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'offers_shown',\n   *   active: true,\n   *   data: {'offers': ['basic-monthly', 'premium-weekly'],\n   *           'source': 'ad-click'}\n   * }\n   * For example:\n   * const propensityEvent = {\n   *   name: 'offers_shown',\n   *   active: true,\n   *   data: {'offers': ['basic-monthly', 'premium-weekly'],\n   *           'source': navigate-to-offers-page}\n   * }\n   * If the user was shown the offers as a result of paywall metering\n   * expiration, it is considered a passive impression.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'offers_shown',\n   *   active: false,\n   *   data: {'offers': ['basic-monthly', 'premium-weekly'],\n   *           'source': paywall-metering-expired}\n   * }\n   */\n  IMPRESSION_OFFERS: 'offers_shown',\n  /**\n   * ACTION_SUBSCRIPTIONS_LANDING_PAGE event.\n   * User has taken the action to arrive at a landing page of the\n   * subscription workflow. The landing page should satisfy one of\n   * the following conditions and hence be a part of the funnel to\n   * get the user to subscribe:\n   * - have a button to navigate the user to an offers page, (in\n   *   this case, the next event will be IMPRESSION_OFFERS, with\n   *   parameter 'source' as subscriptions-landing-page and\n   *   'is_active' set to true),\n   * - show offers the user can select, (in this case, the next\n   *   event will be IMPRESSION_OFFERS, with a parameter 'source'\n   *   as navigate-to-offers-page and 'is_active' set to true),\n   * - provide a way to start the payment flow for a specific offer.\n   *   (in this case, the next event will be ACTION_OFFER_SELECTED\n   *   or ACTION_PAYMENT_FLOW_STARTED depending on if that button\n   *   took the user to a checkout page on the publishers site or\n   *   directly started the payment flow).\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block with this event can provide additional information\n   * such as the source, indicating what caused the user to navigate\n   * to this page.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'subscriptions_landing_page',\n   *   active: true,\n   *   data: {'source': 'marketing_via_email'}\n   * }\n   */\n  ACTION_SUBSCRIPTIONS_LANDING_PAGE: 'subscriptions_landing_page',\n  /**\n   * ACTION_OFFER_SELECTED event.\n   * User has selected an offer.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block can provide the product selected.\n   * For example: {\n   *   name: 'offer_selected',\n   *   active: true,\n   *   data: {product': 'basic-monthly'}\n   * }\n   * When offer selection starts the payment flow directly,\n   * use the next event ACTION_PAYMENT_FLOW_STARTED instead.\n   */\n  ACTION_OFFER_SELECTED: 'offer_selected',\n  /**\n   * ACTION_PAYMENT_FLOW_STARTED event.\n   * User has started payment flow.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block can provide the product selected.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'payment_flow_started',\n   *   active: true,\n   *   data: {product': 'basic-monthly'}\n   * }\n   */\n  ACTION_PAYMENT_FLOW_STARTED: 'payment_flow_start',\n  /**\n   * ACTION_PAYMENT_COMPLETED.\n   * User has made the payment for a subscription.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block can provide the product user paid for.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'payment_complete',\n   *   active: true,\n   *   data: {product': 'basic-monthly'}\n   * }\n   */\n  ACTION_PAYMENT_COMPLETED: 'payment_complete',\n  /**\n   * EVENT_CUSTOM: custom publisher event.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false depending on if the event\n   * was generated as a result of a user action.\n   * The JSON block can provide the event name for the custom event.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'custom',\n   *   active: true,\n   *   data: {\n   *     'event_name': 'social_share',\n   *     'platform_used': 'whatsapp'\n   *   }\n   *  }\n   */\n  EVENT_CUSTOM: 'custom',\n};\n\n/**\n * Propensity Event\n * Properties:\n * - name: Required. Name should be valid string in the Event\n *         enum within src/api/logger-api.js.\n * - active: Required. A boolean that indicates whether the\n *         user took some action to participate in the flow\n *         that generated this event. For impression event,\n *         this is set to true if is_active field would be\n *         set to true, as described in documentation for\n *         enum Event. Otherwise, set this field to false.\n *         For action events, this field must always be set\n *         to true. The caller must always set this field.\n * - data: Optional. JSON block of depth '1' provides event\n *         parameters. The guideline to create this JSON block\n *         that describes the event is provided against each\n *         enum listed in the Event enum above.\n *\n *  @typedef {{\n  *    name: string,\n  *    active: boolean,\n  *    data: ?JsonObject,\n  * }}\n  */\nexport let PublisherEvent;\n\n/**\n * @interface\n */\nexport class LoggerApi {\n  /**\n   * Send a buy-flow event that occurred on the publisher's site to Google.  The\n   * ultimate destination is controlled by configuration settings.  Data is\n   * sent to Propensity if the Propensity module is fetched from runtime and to\n   * Google's analytics service if you activate buy-flow comparative analysis.\n   * @param {!PublisherEvent} userEvent\n   */\n  sendEvent(userEvent) { }\n\n  /**\n   * Send user subscription state upon initial discovery.\n   * A user may have active subscriptions to some products\n   * and expired subscriptions to others. Make one API call\n   * per subscription state and provide a corresponding\n   * list of products with a json object of depth 1.\n   * For example:\n   *     {'product': ['product1', 'product2']}\n   * Each call to this API should have the first argument\n   * as a valid string from the enum SubscriptionState.\n   * @param {SubscriptionState} state\n   * @param {?JsonObject} jsonProducts\n   */\n  sendSubscriptionState(state, jsonProducts) {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nexport class Offer {\n\n  /**\n   * @param {string} skuId\n   * @param {string} title\n   * @param {string} description\n   * @param {string} price\n   */\n  constructor(skuId, title, description, price) {\n    /** @const {string} */\n    this.skuId = skuId;\n    /** @const {string} */\n    this.title = title;\n    /** @const {string} */\n    this.description = description;\n    /** @const {string} */\n    this.price = price;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as LoggerApi from './logger-api';\n\n/**\n * @enum {string}\n */\nexport const PropensityType = {\n  // Propensity score for a user to subscribe to a publication.\n  GENERAL: 'general',\n  // Propensity score when blocked access to content by paywall.\n  PAYWALL: 'paywall',\n};\n\n/**\n * The Propensity Score\n * - value: Required. A number that indicates the propensity to subscribe.\n * - bucketed: Required. Indicates if the score is a raw score [1-100] or bucketed[1-20].\n *\n * @typedef {{\n *   value: number,\n *   bucketed: boolean,\n * }}\n */\nexport let Score;\n\n/**\n * Propensity Score Detail\n * Properties:\n * - product: Required. Indicates the publication_id:product_id for which the score is provided.\n * - score: Optional. When score is available, this field contains the propensity score for this product.\n * - error: Optional. When no score is avaialble, a string provides the error message.\n *\n * @typedef {{\n *   product: string,\n *   score: ?Score,\n *   error: ?string,\n * }}\n */\nexport let ScoreDetail;\n\n/**\n * The Body field of the Propensity Score.\n * Properties:\n * - scores: Optional, an array of scores. When header indicates so, atleast one score is available.\n * - error: Optional, string describing why, if no scores were provided by the server.\n *\n *  @typedef {{\n *    scores: ?Array<ScoreDetail>,\n *    error: ?string,\n * }}\n */\nexport let Body;\n\n/**\n * The Header of the Propensity Score.\n * Properties:\n * - ok: Required. true, if propensity score is available, false otherwise.\n *\n *  @typedef {{\n *    ok: boolean,\n * }}\n */\nexport let Header;\n\n/**\n * The Propensity Score.\n * Properties:\n * - header: Required. Provides the header of the Score response.\n * - body: Required. Provides the body of the Score response.\n *\n *  @typedef {{\n *    header: Header,\n *    body: Body,\n * }}\n */\nexport let PropensityScore;\n\n/**\n * Propensity Event\n *   Please note that the primary defition of this object has changed to\n *   PublisherEvent and is defined in logger-api.js.  These two object\n *   definitions are identical.\n * Properties:\n * - name: Required. Name should be valid string in the Event\n *         enum within src/api/logger-api.js.\n * - active: Required. A boolean that indicates whether the\n *         user took some action to participate in the flow\n *         that generated this event. For impression event,\n *         this is set to true if is_active field would be\n *         set to true, as described in documentation for\n *         enum Event. Otherwise, set this field to false.\n *         For action events, this field must always be set\n *         to true. The caller must always set this field.\n * - data: Optional. JSON block of depth '1' provides event\n *         parameters. The guideline to create this JSON block\n *         that describes the event is provided against each\n *         enum listed in the Event enum above.\n *\n *  @typedef {{\n *    name: string,\n *    active: boolean,\n *    data: ?JsonObject,\n * }}\n */\nexport let PropensityEvent;\n\n/*\n * Please note that the definitions of Event and SubscriptionState have moved\n * to logger-api.js.  This is now the preferred interface to use for logging\n * publisher events and setting the user's current subscription state.\n * Propensity will continue to function as an event logger until we are certain\n * no publishers are actively using it to log events.\n */\nexport const Event = LoggerApi.Event;\nexport const SubscriptionState = LoggerApi.SubscriptionState;\n\n/**\n * @extends {LoggerApi.LoggerApi}\n * @interface\n */\nexport class PropensityApi extends LoggerApi.LoggerApi {\n  /**\n   * Get the propensity of a user to subscribe based on the type.\n   * The argument should be a valid string from PropensityType.\n   * If no type is provided, GENERAL score is returned.\n   * @param {PropensityType=} type\n   * @return {?Promise<!PropensityScore>}\n   */\n  getPropensity(type) {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlements} from './entitlements';\nimport {UserData} from './user-data';\n\n\n/**\n */\nexport class SubscribeResponse {\n\n  /**\n   * @param {string} raw\n   * @param {!PurchaseData} purchaseData\n   * @param {?UserData} userData\n   * @param {?Entitlements} entitlements\n   * @param {!string} productType\n   * @param {function():!Promise} completeHandler\n   */\n  constructor(raw, purchaseData, userData, entitlements, productType,\n      completeHandler) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {!PurchaseData} */\n    this.purchaseData = purchaseData;\n    /** @const {?UserData} */\n    this.userData = userData;\n    /** @const {?Entitlements} */\n    this.entitlements = entitlements;\n    /** @const {string} */\n    this.productType = productType;\n    /** @private @const {function():!Promise} */\n    this.completeHandler_ = completeHandler;\n  }\n\n  /**\n   * @return {!SubscribeResponse}\n   */\n  clone() {\n    return new SubscribeResponse(\n        this.raw,\n        this.purchaseData,\n        this.userData,\n        this.entitlements,\n        this.productType,\n        this.completeHandler_);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'purchaseData': this.purchaseData.json(),\n      'userData': this.userData ? this.userData.json() : null,\n      'entitlements': this.entitlements ? this.entitlements.json() : null,\n      'productType': this.productType,\n    };\n  }\n\n  /**\n   * Allows the receiving site to complete/acknowledge that it registered\n   * the subscription purchase. The typical action would be to create an\n   * account (or match an existing one) and associated the purchase with\n   * that account.\n   *\n   * SwG will display progress indicator until this method is called and\n   * upon receiving this call will show the confirmation to the user.\n   * The promise returned by this method will yield once the user closes\n   * the confirmation.\n   *\n   * @return {!Promise}\n   */\n  complete() {\n    return this.completeHandler_();\n  }\n}\n\n\n/**\n */\nexport class PurchaseData {\n\n  /**\n   * @param {string} raw\n   * @param {string} signature\n   */\n  constructor(raw, signature) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {string} */\n    this.data = raw;\n    /** @const {string} */\n    this.signature = signature;\n  }\n\n  /**\n   * @return {!PurchaseData}\n   */\n  clone() {\n    return new PurchaseData(this.raw, this.signature);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'data': this.raw,\n      'signature': this.signature,\n    };\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlements} from './entitlements';\nimport {Offer} from './offer';\nimport {\n  DeferredAccountCreationRequest,\n  DeferredAccountCreationResponse,\n} from './deferred-account-creation';\nimport {SubscribeResponse} from './subscribe-response';\nimport {PropensityApi} from './propensity-api';\nimport {LoggerApi} from './logger-api';\n\n/**\n * @interface\n */\nexport class Subscriptions {\n\n  /**\n   * Optionally initializes the subscriptions runtime with publication or\n   * product ID. If not called, the runtime will look for the initialization\n   * parameters in the page's markup.\n   * @param {string} productOrPublicationId\n   */\n  init(productOrPublicationId) {}\n\n  /**\n   * Optionally configures the runtime with non-default properties. See\n   * `Config` definition for details.\n   * @param {!Config} config\n   */\n  configure(config) {}\n\n  /**\n   * Starts the entitlement flow.\n   */\n  start() {}\n\n  /**\n   * Resets the entitlements that can be fetched again.\n   */\n  reset() {}\n\n  /**\n   * Resets the entitlements and clears all of the caches.\n   */\n  clear() {}\n\n  /**\n   * @param {?string=} opt_encryptedDocumentKey\n   * @return {!Promise<!Entitlements>}\n   */\n  getEntitlements(opt_encryptedDocumentKey) {}\n\n  /**\n   * Set the subscribe callback.\n   * @param {function(!Promise<!Entitlements>)} callback\n   */\n  setOnEntitlementsResponse(callback) {}\n\n  /**\n   * Returns a set of offers.\n   * @param {{\n   *   productId: (string|undefined),\n   * }=} opt_options\n   * @return {!Promise<!Array<!Offer>>}\n   */\n  getOffers(opt_options) {}\n\n  /**\n   * Starts the Offers flow.\n   * @param {!OffersRequest=} opt_options\n   */\n  showOffers(opt_options) {}\n\n  /**\n   * Starts the Offers flow for a subscription update.\n   * @param {!OffersRequest=} opt_options\n   */\n  showUpdateOffers(opt_options) {}\n\n  /**\n   * Show subscription option.\n   * @param {!OffersRequest=} opt_options\n   */\n  showSubscribeOption(opt_options) {}\n\n  /**\n   * Show abbreviated offers.\n   * @param {!OffersRequest=} opt_options\n   */\n  showAbbrvOffer(opt_options) {}\n\n  /**\n   * Show contribution options for the users to select from.\n   * The options are grouped together by periods (Weekly, Monthly, etc.).\n   * User can select the amount to contribute to from available options\n   * to the publisher. These options are based on the SKUs defined in the Play\n   * console for a given publication.\n   * Each SKU has Amount, Period, SKUId and other attributes.\n   * @param {!OffersRequest=} opt_options\n   */\n  showContributionOptions(opt_options) {}\n\n  /**\n   * Set the callback for the native subscribe request. Setting this callback\n   * triggers the \"native\" option in the offers flow.\n   * @param {function()} callback\n   */\n  setOnNativeSubscribeRequest(callback) {}\n\n  /**\n   * Set the subscribe complete callback.\n   * @param {function(!Promise<!SubscribeResponse>)} callback\n   */\n  setOnSubscribeResponse(callback) {}\n\n  /**\n   * Starts subscription purchase flow.\n   * @param {string} sku\n   */\n  subscribe(sku) {}\n\n  /**\n   * Starts subscription purchase flow.\n   * @param {SubscriptionRequest} subscriptionRequest\n   */\n  updateSubscription(subscriptionRequest) {}\n\n  /**\n   * Set the contribution complete callback.\n   * @param {function(!Promise<!SubscribeResponse>)} callback\n   */\n  setOnContributionResponse(callback) {}\n\n   /**\n   * Starts contributions purchase flow.\n   * @param {string|SubscriptionRequest} skuOrSubscriptionRequest\n   */\n  contribute(skuOrSubscriptionRequest) {}\n\n  /**\n   * Starts the deferred account creation flow.\n   * See `DeferredAccountCreationRequest` for more details.\n   * @param {?DeferredAccountCreationRequest=} opt_options\n   * @return {!Promise<!DeferredAccountCreationResponse>}\n   */\n  completeDeferredAccountCreation(opt_options) {}\n\n  /**\n   * @param {function(!LoginRequest)} callback\n   */\n  setOnLoginRequest(callback) {}\n\n  /**\n   * Starts the login prompt flow.\n   * @return {!Promise}\n   */\n  showLoginPrompt() {}\n\n  /**\n   * Starts the login notification flow.\n   * @return {!Promise}\n   */\n  showLoginNotification() {}\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkComplete(callback) {}\n\n  /**\n   * @param {!Promise} accountPromise Publisher's promise to lookup account.\n   * @return {!Promise}\n   */\n  waitForSubscriptionLookup(accountPromise) {}\n\n  /**\n   * Starts the Account linking flow.\n   * TODO(dparikh): decide if it's only exposed for testing or PROD purposes.\n   */\n  linkAccount() {}\n\n  /**\n   * Notifies the client that a flow has been started. The name of the flow\n   * is passed as the callback argument. The flow name corresponds to the\n   * method name in this interface, such as \"showOffers\", or \"subscribe\".\n   * See `SubscriptionFlows` for the full list.\n   *\n   * Also see `setOnFlowCanceled` method.\n   *\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowStarted(callback) {}\n\n  /**\n   * Notifies the client that a flow has been canceled. The name of the flow\n   * is passed as the callback argument. The flow name corresponds to the\n   * method name in this interface, such as \"showOffers\", or \"subscribe\".\n   * See `SubscriptionFlows` for the full list.\n   *\n   * Notice that some of the flows, such as \"subscribe\", could additionally\n   * have their own \"cancel\" events.\n   *\n   * Also see `setOnFlowStarted` method.\n   *\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowCanceled(callback) {}\n\n /**\n  * Starts the save subscriptions flow.\n  * @param {!SaveSubscriptionRequestCallback} requestCallback\n  * @return {!Promise} a promise indicating flow is started\n  */\n  saveSubscription(requestCallback) {}\n\n  /**\n   * Creates an element with the SwG button style and the provided callback.\n   * The default theme is \"light\".\n   *\n   * @param {!ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {!Element}\n   */\n  createButton(optionsOrCallback, opt_callback) {}\n\n  /**\n   * Attaches the SwG button style and the provided callback to an existing\n   * DOM element. The default theme is \"light\".\n   *\n   * @param {!Element} button\n   * @param {!ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   */\n  attachButton(button, optionsOrCallback, opt_callback) {}\n\n  /**\n   * Attaches smartButton element and the provided callback.\n   * The default theme is \"light\".\n   *\n   * @param {!Element} button\n   * @param {!SmartButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   */\n  attachSmartButton(button, optionsOrCallback, opt_callback) {}\n\n  /**\n   * Retrieves the propensity module that provides APIs to\n   * get propensity scores based on user state and events\n   * @return {!Promise<PropensityApi>}\n   */\n  getPropensityModule() {}\n\n  /** @return {!Promise<LoggerApi>} */\n  getLogger() {}\n}\n\n/** @enum {string} */\nexport const SubscriptionFlows = {\n  SHOW_OFFERS: 'showOffers',\n  SHOW_SUBSCRIBE_OPTION: 'showSubscribeOption',\n  SHOW_ABBRV_OFFER: 'showAbbrvOffer',\n  SHOW_CONTRIBUTION_OPTIONS: 'showContributionOptions',\n  SUBSCRIBE: 'subscribe',\n  CONTRIBUTE: 'contribute',\n  COMPLETE_DEFERRED_ACCOUNT_CREATION: 'completeDeferredAccountCreation',\n  LINK_ACCOUNT: 'linkAccount',\n  SHOW_LOGIN_PROMPT: 'showLoginPrompt',\n  SHOW_LOGIN_NOTIFICATION: 'showLoginNotification',\n};\n\n\n/**\n * Configuration properties:\n * - windowOpenMode - either \"auto\" or \"redirect\". The \"redirect\" value will\n *   force redirect flow for any window.open operation, including payments.\n *   The \"auto\" value either uses a redirect or a popup flow depending on\n *   what's possible on a specific environment. Defaults to \"auto\".\n * - enableSwgAnalytics - if set to true then events logged by the publisher's\n *   client will be sent to Google's SwG analytics service.  This information is\n *   used to compare the effectiveness of Google's buy-flow events to those\n *   generated by the publisher's client code.  This includes events sent to\n *   both PropensityApi and LoggerApi.\n * - enablePropensity - If true events from the logger api are sent to the\n *   propensity server.  Note events from the legacy propensity endpoint are\n *   always sent. \n * @typedef {{\n *   experiments: (!Array<string>|undefined),\n *   windowOpenMode: (!WindowOpenMode|undefined),\n *   analyticsMode: (!AnalyticsMode|undefined),\n *   enableSwgAnalytics: (boolean|undefined),\n *   enablePropensity: (boolean|undefined),\n * }}\n */\nexport let Config;\n\n/**\n * @enum {number}\n */\nexport const AnalyticsMode = {\n  DEFAULT: 0,\n  IMPRESSIONS: 1,\n};\n\n/**\n * @enum {string}\n */\nexport const WindowOpenMode = {\n  AUTO: 'auto',\n  REDIRECT: 'redirect',\n};\n\n/**\n * @enum {string}\n */\nexport const ReplaceSkuProrationMode = {\n  // The replacement takes effect immediately, and the remaining time will\n  // be prorated and credited to the user. This is the current default\n  // behavior.\n  IMMEDIATE_WITH_TIME_PRORATION: 'IMMEDIATE_WITH_TIME_PRORATION',\n};\n\n/**\n * The Offers/Contributions UI is rendered differently based on the\n * ProductType. The ProductType parameter is passed to the Payments flow, and\n * then passed back to the Payments confirmation page to render messages/text\n * based on the ProductType.\n * @enum {string}\n */\nexport const ProductType = {\n  SUBSCRIPTION: 'SUBSCRIPTION',\n  UI_CONTRIBUTION: 'UI_CONTRIBUTION',\n};\n\n/**\n * @return {!Config}\n */\nexport function defaultConfig() {\n  return {\n    windowOpenMode: WindowOpenMode.AUTO,\n    analyticsMode: AnalyticsMode.DEFAULT,\n    enableSwgAnalytics: false,\n    enablePropensity: false,\n  };\n}\n\n/**\n * Properties:\n * - skus - a list of SKUs to return from the defined or default list. The\n *   order is preserved.\n * - list - a predefined list of SKUs. Use of this property is uncommon.\n *   Possible values are \"default\" and \"amp\". Default is \"default\".\n * - isClosable - a boolean value to determine whether the view is closable.\n *\n * @typedef {{\n *   skus: (!Array<string>|undefined),\n *   list: (string|undefined),\n *   isClosable: (boolean|undefined),\n * }}\n */\nexport let OffersRequest;\n\n\n/**\n * @typedef {{\n *   linkRequested: boolean,\n * }}\n */\nexport let LoginRequest;\n\n\n/**\n * Properties:\n * - one and only one of \"token\" or \"authCode\"\n * AuthCode reference: https://developers.google.com/actions/identity/oauth2-code-flow\n * Token reference: https://developers.google.com/actions/identity/oauth2-implicit-flow\n * @typedef {{\n *   token: (string|undefined),\n *   authCode: (string|undefined),\n * }}\n */\nexport let SaveSubscriptionRequest;\n\n/**\n * Callback for retrieving subscription request\n *\n * @callback SaveSubscriptionRequestCallback\n * @return {!Promise<SaveSubscriptionRequest> | !SaveSubscriptionRequest} request\n */\nexport let SaveSubscriptionRequestCallback;\n\n/**\n * Properties:\n * - lang: Sets the button SVG and title. Default is \"en\".\n * - theme: \"light\" or \"dark\". Default is \"light\".\n *\n * @typedef {{\n *   theme: (string|undefined),\n *   lang: (string|undefined),\n * }}\n */\nexport let ButtonOptions;\n\n/**\n * Properties:\n * - lang: Sets the button SVG and title. Default is \"en\".\n * - theme: \"light\" or \"dark\". Default is \"light\".\n * - messageTextColor: Overrides theme color for message text. (ex: \"#09f\")\n *\n * @typedef {{\n *   theme: (string|undefined),\n *   lang: (string|undefined),\n *   messageTextColor: (string|undefined),\n * }}\n */\nexport let SmartButtonOptions;\n\n/**\n * Properties:\n * - sku: Required. Sku to add to the user's subscriptions.\n * - oldSku: Optional. This is if you want to replace one sku with another. For\n *  example, if a user wants to upgrade or downgrade their current subscription.\n * - prorationMode: Optional. When replacing a subscription you can decide on a\n *  specific proration mode to charge the user.\n *  The default is IMMEDIATE_WITH_TIME_PRORATION.\n *\n *  @typedef {{\n *    skuId: string,\n *    oldSku: (string|undefined),\n *    replaceSkuProrationMode: (ReplaceSkuProrationMode|undefined),\n * }}\n */\nexport let SubscriptionRequest;\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nexport class UserData {\n\n  /**\n   * @param {string} idToken\n   * @param {!Object} data\n   */\n  constructor(idToken, data) {\n    /** @const {string} */\n    this.idToken = idToken;\n    /** @const {!Object} */\n    this.data = data;\n\n    /** @const {string} */\n    this.id = data['sub'];\n    /** @const {string} */\n    this.email = data['email'];\n    /** @const {boolean} */\n    this.emailVerified = data['email_verified'];\n    /** @const {string} */\n    this.name = data['name'];\n    /** @const {string} */\n    this.givenName = data['given_name'];\n    /** @const {string} */\n    this.familyName = data['family_name'];\n    /** @const {string} */\n    this.pictureUrl = data['picture'];\n  }\n\n  /**\n   * @return {!UserData}\n   */\n  clone() {\n    return new UserData(this.idToken, this.data);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'id': this.id,\n      'email': this.email,\n      'emailVerified': this.emailVerified,\n      'name': this.name,\n      'givenName': this.givenName,\n      'familyName': this.familyName,\n      'pictureUrl': this.pictureUrl,\n    };\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {deserialize, getLabel} from '../proto/api_messages';\nimport {\n  ActivityPorts as WebActivityPorts,\n  ActivityIframePort as WebActivityIframePort,\n} from 'web-activities/activity-ports';\nimport {debugLog} from '../utils/log';\n\n/**\n * @interface\n */\nexport class ActivityPortDef {\n  /**\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {}\n}\n/**\n * @interface\n */\nexport class ActivityPort extends ActivityPortDef {\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!web-activities/activity-ports.ActivityMode}\n   */\n  getMode() {}\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   * @override\n   */\n  acceptResult() {}\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {}\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {}\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {}\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} unusedCallback\n   */\n  onResizeRequest(unusedCallback) {}\n\n  /**\n   * Sends a message to the host.\n   * @param {!Object} unusedPayload\n   */\n  messageDeprecated(unusedPayload) {}\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * @param {function(!Object)} unusedCallback\n   */\n  onMessageDeprecated(unusedCallback) {}\n\n  /**\n   * @param {!../proto/api_messages.Message} unusedRequest\n   */\n  execute(unusedRequest) {}\n\n  /**\n   * @param {!function(new: T)} unusedMessage\n   * @param {function(Object)} unusedCallback\n   * @template T\n   */\n  on(unusedMessage, unusedCallback) {}\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {}\n}\n/**\n * @implements {ActivityPortDef}\n */\nclass ActivityPortDeprecated {\n  /**\n   * @param {!web-activities/activity-ports.ActivityPort} port\n   */\n  constructor(port) {\n    /** @private @const {!web-activities/activity-ports.ActivityPort} */\n    this.port_ = port;\n  }\n\n  /**\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {\n    return this.port_.acceptResult();\n  }\n}\n\n/**\n * @implements {ActivityPortDef}\n */\nexport class ActivityIframePort {\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   */\n  constructor(iframe, url, opt_args) {\n    /** @private @const {!web-activities/activity-ports.ActivityIframePort} */\n    this.iframePort_ = new WebActivityIframePort(iframe, url, opt_args);\n    /** @private @const {!Object<string, function(!Object)>} */\n    this.callbackMap_ = {};\n    /** @private {?function(!../proto/api_messages.Message)} */\n    this.callbackOriginal_ = null;\n  }\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.iframePort_.whenReady();\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {\n    return this.iframePort_.connect().then(() => {\n      // Attach a callback to receive messages after connection complete\n      this.iframePort_.onMessage(data => {\n        if (this.callbackOriginal_) {\n          this.callbackOriginal_(data);\n        }\n        const response = data && data['RESPONSE'];\n        if (!response) {\n          return;\n        }\n        const cb = this.callbackMap_[response[0]];\n        if (cb) {\n          cb(deserialize(response));\n        }\n      });\n    });\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    this.iframePort_.disconnect();\n  }\n\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!web-activities/activity-ports.ActivityMode}\n   */\n  getMode() {\n    return this.iframePort_.getMode();\n  }\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   * @override\n   */\n  acceptResult() {\n    return this.iframePort_.acceptResult();\n  }\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} callback\n   */\n  onResizeRequest(callback) {\n    return this.iframePort_.onResizeRequest(callback);\n  }\n\n  /**\n   * Sends a message to the host.\n   * @param {!Object} payload\n   */\n  messageDeprecated(payload) {\n    this.iframePort_.message(payload);\n    debugLog('WARNING: messageDeprecated() is deprecated');\n  }\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * @param {function(!Object)} callback\n   */\n  onMessageDeprecated(callback) {\n    this.callbackOriginal_ = callback;\n    debugLog('WARNING: use of deprecated API onMessageDeprecated()');\n  }\n\n  /**\n   * @param {!../proto/api_messages.Message} request\n   */\n  execute(request) {\n    this.iframePort_.message({'REQUEST': request.toArray()});\n  }\n\n  /**\n   * @param {!function(new: T)} message\n   * @param {function(!../proto/api_messages.Message)} callback\n   * @template T\n   */\n  on(message, callback) {\n    const label = getLabel(message);\n    if (!label) {\n      throw new Error('Invalid data type');\n    } else if (this.callbackMap_[label]) {\n      throw new Error('Invalid type or duplicate callback for ', label);\n    }\n    this.callbackMap_[label] = callback;\n  }\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {\n    this.iframePort_.resized();\n  }\n}\n\nexport class ActivityPorts {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = new WebActivityPorts(win);\n  }\n\n  /**\n   * Start an activity within the specified iframe.\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   * @return {!Promise<!ActivityIframePort>}\n   */\n  openIframe(iframe, url, opt_args) {\n    const activityPort = new ActivityIframePort(iframe, url, opt_args);\n    return activityPort.connect().then(() => activityPort);\n  }\n\n  /**\n   * Start an activity in a separate window. The result will be delivered\n   * to the `onResult` callback.\n   *\n   * The activity can be opened in two modes: \"popup\" and \"redirect\". This\n   * depends on the `target` value, but also on the browser/environment.\n   *\n   * The allowed `target` values are `_blank`, `_top` and name targets. The\n   * `_self`, `_parent` and similar targets are not allowed.\n   *\n   * The `_top` target indicates that the activity should be opened as a\n   * \"redirect\", while other targets indicate that the activity should be\n   * opened as a popup. The activity client will try to honor the requested\n   * target. However, it's not always possible. Some environments do not\n   * allow popups and they either force redirect or fail the window open\n   * request. In this case, the activity will try to fallback to the \"redirect\"\n   * mode.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?web-activities/activity-ports.ActivityOpenOptions=} opt_options\n   * @return {{targetWin: ?Window}}\n   */\n  open(requestId, url, target, opt_args, opt_options) {\n    return this.activityPorts_.open(\n      requestId,\n      url,\n      target,\n      opt_args,\n      opt_options\n    );\n  }\n\n  /**\n   * Registers the callback for the result of the activity opened with the\n   * specified `requestId` (see the `open()` method). The callback is a\n   * function that takes a single `ActivityPort` argument. The client\n   * can use this object to verify the port using it's origin, verified and\n   * secure channel flags. Then the client can call\n   * `ActivityPort.acceptResult()` method to accept the result.\n   *\n   * The activity result is handled via a separate callback because of a\n   * possible redirect. So use of direct callbacks and/or promises is not\n   * possible in that case.\n   *\n   * A typical implementation would look like:\n   * ```\n   * ports.onResult('request1', function(port) {\n   *   port.acceptResult().then(function(result) {\n   *     // Only verified origins are allowed.\n   *     if (result.origin == expectedOrigin &&\n   *         result.originVerified &&\n   *         result.secureChannel) {\n   *       handleResultForRequest1(result);\n   *     }\n   *   });\n   * })\n   *\n   * ports.open('request1', request1Url, '_blank');\n   * ```\n   *\n   * @param {string} requestId\n   * @param {function(!ActivityPortDef)} callback\n   */\n  onResult(requestId, callback) {\n    this.activityPorts_.onResult(requestId, port => {\n      callback(new ActivityPortDeprecated(port));\n    });\n  }\n\n  /**\n   * @param {function(!Error)} handler\n   */\n  onRedirectError(handler) {\n    this.activityPorts_.onRedirectError(handler);\n  }\n\n  /**\n   * @return {!web-activities/activity-ports.ActivityPorts}\n   */\n  getOriginalWebActivityPorts() {\n    return this.activityPorts_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Dialog} from './dialog';\nimport {Graypane} from './graypane';\nimport {isCancelError} from '../utils/errors';\n\nconst POPUP_Z_INDEX = 2147483647;\n\n/**\n * The class for the top level dialog.\n * @final\n */\nexport class DialogManager {\n  /**\n   * @param {!../model/doc.Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private {?Dialog} */\n    this.dialog_ = null;\n\n    /** @private {?Promise<!Dialog>} */\n    this.openPromise_ = null;\n\n    /** @private @const {!Graypane} */\n    this.popupGraypane_ = new Graypane(doc, POPUP_Z_INDEX);\n\n    /** @private {?Window} */\n    this.popupWin_ = null;\n\n    this.popupGraypane_.getElement().addEventListener('click', () => {\n      if (this.popupWin_) {\n        try {\n          this.popupWin_.focus();\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n    });\n  }\n\n  /**\n   * @param {boolean=} hidden\n   * @return {!Promise<!Dialog>}\n   */\n  openDialog(hidden = false) {\n    if (!this.openPromise_) {\n      this.dialog_ = new Dialog(this.doc_);\n      this.openPromise_ = this.dialog_.open(hidden);\n    }\n    return this.openPromise_;\n  }\n\n  /**\n   * @param {!./view.View} view\n   * @param {boolean=} hidden\n   * @return {!Promise}\n   */\n  openView(view, hidden = false) {\n    view.whenComplete().catch(reason => {\n      if (isCancelError(reason)) {\n        this.completeView(view);\n      }\n      throw reason;\n    });\n    return this.openDialog(hidden).then(dialog => {\n      return dialog.openView(view);\n    });\n  }\n\n  /**\n   * @param {?./view.View} view\n   */\n  completeView(view) {\n    // Give a small amount of time for another view to take over the dialog.\n    setTimeout(() => {\n      if (this.dialog_ && this.dialog_.getCurrentView() == view) {\n        this.close_();\n      }\n    }, 100);\n  }\n\n  /**\n   */\n  completeAll() {\n    if (this.dialog_) {\n      this.close_();\n    }\n    if (this.popupGraypane_.isAttached()) {\n      this.popupGraypane_.destroy();\n    }\n  }\n\n  /** @private */\n  close_() {\n    this.dialog_.close();\n    this.dialog_ = null;\n    this.openPromise_ = null;\n  }\n\n  /**\n   * @param {?Window|undefined} targetWin\n   */\n  popupOpened(targetWin) {\n    this.popupWin_ = targetWin || null;\n    if (!this.popupGraypane_.isAttached()) {\n      this.popupGraypane_.attach();\n    }\n    this.popupGraypane_.show();\n  }\n\n  /**\n   */\n  popupClosed() {\n    this.popupWin_ = null;\n    try {\n      this.popupGraypane_.hide();\n    } catch (e) {\n      // Ignore.\n    }\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {CSS as DIALOG_CSS} from '../../build/css/ui/ui.css';\nimport {resolveDoc} from '../model/doc';\nimport {Graypane} from './graypane';\nimport {LoadingView} from '../ui/loading-view';\nimport {\n  createElement,\n  injectStyleSheet,\n  removeChildren,\n  removeElement,\n} from '../utils/dom';\nimport {setStyles, setImportantStyles} from '../utils/style';\nimport {transition} from '../utils/animation';\nimport {FriendlyIframe} from './friendly-iframe';\n\nconst Z_INDEX = 2147483647;\n\n/**\n * Default iframe important styles.\n * Note: The iframe responsiveness media query style is injected in the\n * publisher's page since style attribute can not include media query.\n * @const {!Object<string, string|number>}\n */\nconst rootElementImportantStyles = {\n  'min-height': '50px',\n  'border': 'none',\n  'display': 'block',\n  'position': 'fixed',\n  'z-index': Z_INDEX,\n  'box-sizing': 'border-box',\n};\n\n/**\n * Reset view styles.\n * @const {!Object<string, string|number>}\n */\nconst resetViewStyles = {\n  'position': 'absolute',\n  'top': '0',\n  'left': '0',\n  'right': '0',\n  'bottom': '0',\n  'opacity': 0,\n  /* These lines are a work around to this issue in iOS:     */\n  /* https://bugs.webkit.org/show_bug.cgi?id=155198          */\n  'height': 0,\n  'max-height': '100%',\n  'max-width': '100%',\n  'min-height': '100%',\n  'min-width': '100%',\n  'width': 0,\n};\n\n/**\n * Position of the dialog.\n * @const @enum {string}\n */\nconst PositionAt = {\n  BOTTOM: 'BOTTOM',\n  TOP: 'TOP',\n  FLOAT: 'FLOAT',\n  FULL: 'FULL',\n};\n\n/**\n * The class for the top level dialog.\n * @final\n */\nexport class Dialog {\n  /**\n   * Create a dialog for the provided doc.\n   * @param {!../model/doc.Doc} doc\n   * @param {!Object<string, string|number>=} importantStyles\n   * @param {!Object<string, string|number>=} styles\n   */\n  constructor(doc, importantStyles = {}, styles = {}) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!FriendlyIframe} */\n    this.iframe_ = new FriendlyIframe(doc.getWin().document, {\n      'class': 'swg-dialog',\n    });\n\n    /** @private @const {!Graypane} */\n    this.graypane_ = new Graypane(doc, Z_INDEX - 1);\n\n    const modifiedImportantStyles = Object.assign(\n      {},\n      rootElementImportantStyles,\n      importantStyles\n    );\n    setImportantStyles(this.iframe_.getElement(), modifiedImportantStyles);\n\n    setStyles(this.iframe_.getElement(), styles);\n\n    /** @private {LoadingView} */\n    this.loadingView_ = null;\n\n    /** @private {?Element} */\n    this.container_ = null; // Depends on constructed document inside iframe.\n\n    /** @private {?./view.View} */\n    this.view_ = null;\n\n    /** @private {?Promise} */\n    this.animating_ = null;\n\n    /** @private {boolean} */\n    this.hidden_ = false;\n\n    /** @private {?./view.View} */\n    this.previousProgressView_ = null;\n\n    /** @private {boolean} */\n    this.useFixedLayer_ = false;\n  }\n\n  /**\n   * Opens the dialog and builds the iframe container.\n   * @param {boolean=} hidden\n   * @return {!Promise<!Dialog>}\n   */\n  open(hidden = false) {\n    const iframe = this.iframe_;\n    if (iframe.isConnected()) {\n      throw new Error('already opened');\n    }\n\n    // Attach.\n    this.doc_.getBody().appendChild(iframe.getElement()); // Fires onload.\n\n    this.graypane_.attach();\n\n    if (hidden) {\n      setImportantStyles(iframe.getElement(), {\n        'visibility': 'hidden',\n        'opacity': 0,\n      });\n      this.hidden_ = hidden;\n    } else {\n      this.show_();\n    }\n\n    if (this.useFixedLayer_) {\n      return this.doc_\n        .addToFixedLayer(iframe.getElement())\n        .then(() => iframe.whenReady())\n        .then(() => {\n          this.buildIframe_();\n          return this;\n        });\n    } else {\n      return iframe.whenReady().then(() => {\n        this.buildIframe_();\n        return this;\n      });\n    }\n  }\n\n  /**\n   * Build the iframe with the styling after iframe is loaded.\n   * @private\n   */\n  buildIframe_() {\n    const iframe = this.iframe_;\n    const iframeBody = iframe.getBody();\n    const iframeDoc = /** @type {!HTMLDocument} */ (this.iframe_.getDocument());\n\n    // Inject Google fonts in <HEAD> section of the iframe.\n    injectStyleSheet(resolveDoc(iframeDoc), DIALOG_CSS);\n\n    // Add Loading indicator.\n    this.loadingView_ = new LoadingView(iframeDoc);\n    iframeBody.appendChild(this.loadingView_.getElement());\n\n    // Container for all dynamic content, including 3P iframe.\n    this.container_ = createElement(iframeDoc, 'swg-container', {});\n    iframeBody.appendChild(this.container_);\n    this.setPosition_();\n  }\n\n  /**\n   * Closes the dialog.\n   * @param {boolean=} animated\n   * @return {!Promise}\n   */\n  close(animated = true) {\n    let animating;\n    if (animated) {\n      animating = this.animate_(() => {\n        this.graypane_.hide(/* animate */ true);\n        return transition(\n          this.getElement(),\n          {\n            'transform': 'translateY(100%)',\n          },\n          300,\n          'ease-out'\n        );\n      });\n    } else {\n      animating = Promise.resolve();\n    }\n    return animating.then(() => {\n      const iframeEl = this.iframe_.getElement();\n      iframeEl.parentNode.removeChild(iframeEl);\n\n      this.removePaddingToHtml_();\n      this.graypane_.destroy();\n    });\n  }\n\n  /**\n   * Gets the container within the dialog.\n   * @return {!Element}\n   */\n  getContainer() {\n    if (!this.container_) {\n      throw new Error('not opened yet');\n    }\n    return this.container_;\n  }\n\n  /**\n   * Gets the attached iframe instance.\n   * @return {!FriendlyIframe}\n   */\n  getIframe() {\n    return this.iframe_;\n  }\n\n  /**\n   * Gets the Iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_.getElement();\n  }\n\n  /**\n   * Transitions to the next view.\n   * @private\n   */\n  entryTransitionToNextView_() {\n    if (this.view_ && this.view_.hasLoadingIndicator()) {\n      // Temporarily cache the old view.\n      this.previousProgressView_ = this.view_;\n    } else {\n      // Since loading indicator will be shown, remove contents of old view.\n      removeChildren(this.getContainer());\n      // When loading indicator was not displayed in the previous view,\n      // loading indicator must be displayed while transitioning to new view.\n      this.loadingView_.show();\n    }\n  }\n\n  /**\n   * Transition out of an old view.\n   * @private\n   */\n  exitTransitionFromOldView_() {\n    // If previous view is still around, remove it.\n    if (this.previousProgressView_) {\n      removeElement(this.previousProgressView_.getElement());\n      this.previousProgressView_ = null;\n    } else {\n      this.loadingView_.hide();\n    }\n  }\n\n  /** @return {?./view.View} */\n  getCurrentView() {\n    return this.view_;\n  }\n\n  /**\n   * Opens the given view and removes existing view from the DOM if any.\n   * @param {!./view.View} view\n   * @return {!Promise}\n   */\n  openView(view) {\n    setImportantStyles(view.getElement(), resetViewStyles);\n    this.entryTransitionToNextView_();\n\n    this.view_ = view;\n    this.getContainer().appendChild(view.getElement());\n\n    // If the current view should fade the parent document.\n    if (view.shouldFadeBody() && !this.hidden_) {\n      this.graypane_.show(/* animate */ true);\n    }\n\n    return view.init(this).then(() => {\n      setImportantStyles(view.getElement(), {\n        'opacity': 1,\n      });\n      if (this.hidden_) {\n        if (view.shouldFadeBody()) {\n          this.graypane_.show(/* animated */ true);\n        }\n        this.show_();\n      }\n      this.exitTransitionFromOldView_();\n    });\n  }\n\n  /**\n   * Show the iframe.\n   * @private\n   */\n  show_() {\n    this.animate_(() => {\n      setImportantStyles(this.getElement(), {\n        'transform': 'translateY(100%)',\n        'opactiy': 1,\n        'visibility': 'visible',\n      });\n      return transition(\n        this.getElement(),\n        {\n          'transform': 'translateY(0)',\n          'opacity': 1,\n          'visibility': 'visible',\n        },\n        300,\n        'ease-out'\n      );\n    });\n    this.hidden_ = false;\n  }\n\n  /**\n   * Resizes the dialog container.\n   * @param {!./view.View} view\n   * @param {number} height\n   * @param {boolean=} animated\n   * @return {?Promise}\n   */\n  resizeView(view, height, animated = true) {\n    if (this.view_ != view) {\n      return null;\n    }\n    const newHeight = this.getMaxAllowedHeight_(height);\n\n    let animating;\n    if (animated) {\n      const oldHeight = this.getElement().offsetHeight;\n      if (newHeight >= oldHeight) {\n        // Expand.\n        animating = this.animate_(() => {\n          setImportantStyles(this.getElement(), {\n            'height': `${newHeight}px`,\n            'transform': `translateY(${newHeight - oldHeight}px)`,\n          });\n          return transition(\n            this.getElement(),\n            {\n              'transform': 'translateY(0)',\n            },\n            300,\n            'ease-out'\n          );\n        });\n      } else {\n        // Collapse.\n        animating = this.animate_(() => {\n          return transition(\n            this.getElement(),\n            {\n              'transform': `translateY(${oldHeight - newHeight}px)`,\n            },\n            300,\n            'ease-out'\n          ).then(() => {\n            setImportantStyles(this.getElement(), {\n              'height': `${newHeight}px`,\n              'transform': 'translateY(0)',\n            });\n          });\n        });\n      }\n    } else {\n      setImportantStyles(this.getElement(), {\n        'height': `${newHeight}px`,\n      });\n      animating = Promise.resolve();\n    }\n    return animating.then(() => {\n      this.updatePaddingToHtml_(height);\n      view.resized();\n    });\n  }\n\n  /**\n   * @param {function():!Promise} callback\n   * @return {!Promise}\n   * @private\n   */\n  animate_(callback) {\n    const wait = this.animating_ || Promise.resolve();\n    return (this.animating_ = wait\n      .then(\n        () => {\n          return callback();\n        },\n        () => {\n          // Ignore errors to make sure animations don't get stuck.\n        }\n      )\n      .then(() => {\n        this.animating_ = null;\n      }));\n  }\n\n  /**\n   * Returns maximum allowed height for current viewport.\n   * @param {number} height\n   * @return {number}\n   * @private\n   */\n  getMaxAllowedHeight_(height) {\n    return Math.min(height, this.doc_.getWin()./*OK*/ innerHeight * 0.9);\n  }\n\n  /**\n   * Gets the element's height.\n   * @return {number}\n   * @private\n   */\n  getHeight_() {\n    return this.getElement().offsetHeight;\n  }\n\n  /**\n   * Sets the position of the dialog. Currently 'BOTTOM' is set by default.\n   */\n  setPosition_() {\n    setImportantStyles(this.getElement(), this.getPositionStyle_());\n  }\n\n  /**\n   * Add the padding to the containing page so as to not hide the content\n   * behind the popup, if rendered at the bottom.\n   * @param {number} newHeight\n   * @private\n   */\n  updatePaddingToHtml_(newHeight) {\n    if (this.inferPosition_() == PositionAt.BOTTOM) {\n      const bottomPadding = newHeight + 20; // Add some extra padding.\n      const htmlElement = this.doc_.getRootElement();\n      setImportantStyles(htmlElement, {\n        'padding-bottom': `${bottomPadding}px`,\n      });\n    }\n  }\n\n  /**\n   * Removes previouly added bottom padding from the document.\n   * @private\n   */\n  removePaddingToHtml_() {\n    this.doc_.getRootElement().style.removeProperty('padding-bottom');\n  }\n\n  /**\n   * Calculates the position of the dialog. Currently dialog is positioned at\n   * the bottom only. This could change in future to adjust the dialog position\n   * based on the screen size.\n   * @return {string}\n   * @private\n   */\n  inferPosition_() {\n    return PositionAt.BOTTOM;\n  }\n\n  /**\n   * Returns the styles required to postion the dialog.\n   * @return {!Object<string, string|number>}\n   * @private\n   */\n  getPositionStyle_() {\n    const dialogPosition = this.inferPosition_();\n    switch (dialogPosition) {\n      case PositionAt.BOTTOM:\n        return {'bottom': 0};\n      case PositionAt.TOP:\n        return {'top': 0};\n      case PositionAt.FLOAT:\n        return {\n          'position': 'fixed',\n          'top': '50%',\n          'left': '50%',\n          'transform': 'translate(-50%, -50%)',\n        };\n      case PositionAt.FULL:\n        return {\n          'position': 'fixed',\n          'height': '100%',\n          'top': 0,\n          'bottom': 0,\n        };\n      default:\n        return {'bottom': 0};\n    }\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement, isConnected} from '../utils/dom';\nimport {resetAllStyles} from '../utils/style';\n\n/** @const {!Object<string|number>} */\nconst friendlyIframeAttributes = {\n  'frameborder': 0,\n  'scrolling': 'no',\n  'src': 'about:blank',\n};\n\n/**\n * The class for building friendly iframe.\n */\nexport class FriendlyIframe {\n  /**\n   * @param {!Document} doc\n   * @param {!Object<string, string|number>=} attrs\n   */\n  constructor(doc, attrs = {}) {\n    const mergedAttrs = Object.assign({}, friendlyIframeAttributes, attrs);\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      doc,\n      'iframe',\n      mergedAttrs\n    ));\n\n    // Ensure that the new iframe does not inherit any CSS styles.\n    resetAllStyles(this.iframe_);\n\n    /** @private @const {!Promise} */\n    this.ready_ = new Promise(resolve => {\n      this.iframe_.onload = resolve;\n    });\n  }\n\n  /**\n   * When promise is resolved.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.ready_;\n  }\n\n  /**\n   * Gets the iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * Gets the document object of the iframe element.\n   * @return {!Document}\n   */\n  getDocument() {\n    const doc =\n      this.getElement().contentDocument ||\n      (this.getElement().contentWindow &&\n        this.getElement().contentWindow.document);\n\n    if (!doc) {\n      throw new Error('not loaded');\n    }\n    return doc;\n  }\n\n  /**\n   * Gets the body of the iframe.\n   * @return {!Element}\n   */\n  getBody() {\n    return /** @type {!Element} */ (this.getDocument().body);\n  }\n\n  /**\n   * Whether the iframe is connected.\n   * @return {boolean}\n   */\n  isConnected() {\n    return isConnected(this.getElement());\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {setImportantStyles} from '../utils/style';\nimport {transition} from '../utils/animation';\n\nexport class Graypane {\n  /**\n   * @param {!../model/doc.Doc} doc\n   * @param {number} zIndex\n   */\n  constructor(doc, zIndex) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.fadeBackground_ = this.doc_\n      .getWin()\n      .document.createElement('swg-popup-background');\n    setImportantStyles(this.fadeBackground_, {\n      'z-index': zIndex,\n      'display': 'none',\n      'position': 'fixed',\n      'top': 0,\n      'right': 0,\n      'bottom': 0,\n      'left': 0,\n      'background-color': 'rgba(32, 33, 36, .6)',\n    });\n  }\n\n  /**\n   * @return {!Element}\n   */\n  getElement() {\n    return this.fadeBackground_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isAttached() {\n    return !!this.fadeBackground_.parentNode;\n  }\n\n  /**\n   * Attaches the graypane to the document.\n   */\n  attach() {\n    this.doc_.getBody().appendChild(this.fadeBackground_);\n  }\n\n  /**\n   * Detaches the graypane to the document.\n   */\n  destroy() {\n    this.doc_.getBody().removeChild(this.fadeBackground_);\n  }\n\n  /**\n   * Shows the graypane.\n   * @param {boolean=} animated\n   * @return {!Promise|undefined}\n   */\n  show(animated = true) {\n    setImportantStyles(this.fadeBackground_, {\n      'display': 'block',\n      'opacity': animated ? 0 : 1,\n    });\n    if (animated) {\n      return transition(\n        this.fadeBackground_,\n        {\n          'opacity': 1,\n        },\n        300,\n        'ease-out'\n      );\n    }\n  }\n\n  /**\n   * Hides the graypane.\n   * @param {boolean=} animated\n   * @return {!Promise|undefined}\n   */\n  hide(animated = true) {\n    if (animated) {\n      return transition(\n        this.fadeBackground_,\n        {\n          'opacity': 0,\n        },\n        300,\n        'ease-out'\n      ).then(() => {\n        setImportantStyles(this.fadeBackground_, {'display': 'none'});\n      });\n    }\n    setImportantStyles(this.fadeBackground_, {'display': 'none'});\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * abstract View Class. Used to render the content within the Dialog. The\n * extended class has actual content.\n * @abstract\n */\nexport class View {\n  /**\n   * Empty constructor.\n   */\n  constructor() {}\n\n  /**\n   * Gets the iframe element.\n   * @return {!Element}\n   * @abstract\n   */\n  getElement() {}\n\n  /**\n   * @param {!./dialog.Dialog} unusedDialog\n   * @return {!Promise}\n   * @abstract\n   */\n  init(unusedDialog) {}\n\n  /**\n   * Resizes the content.\n   */\n  resized() {\n    // Do nothing by default. Override if needed.\n  }\n\n  /**\n   * Accept the result.\n   * @return {!Promise}\n   * @abstract\n   */\n  whenComplete() {}\n\n  /**\n   * @return {boolean}\n   * @abstract\n   */\n  shouldFadeBody() {}\n\n  /**\n   * @return {boolean}\n   * @abstract\n   */\n  hasLoadingIndicator() {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Entry point into library for compilation with babel. Just loads main.js\n// and Babel's helpers.\n\nimport '../third_party/babel/custom-babel-helpers';\nimport './main';\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * The entry point for runtime (swg.js).\n */\n\nimport './polyfills';\nimport {installRuntime} from './runtime/runtime';\nimport {log} from './utils/log';\n\nlog('Subscriptions Runtime: $internalRuntimeVersion$');\n\ninstallRuntime(self);\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isDocumentReady, whenDocumentReady} from '../utils/document-ready';\n\n/**\n * @interface\n */\nexport class Doc {\n  /**\n   * @return {!Window}\n   */\n  getWin() {}\n\n  /**\n   * The `Document` node or analog.\n   * @return {!Node}\n   */\n  getRootNode() {}\n\n  /**\n   * The `Document.documentElement` element or analog.\n   * @return {!Element}\n   */\n  getRootElement() {}\n\n  /**\n   * The `Document.head` element or analog. Returns `null` if not available\n   * yet.\n   * @return {!Element}\n   */\n  getHead() {}\n\n  /**\n   * The `Document.body` element or analog. Returns `null` if not available\n   * yet.\n   * @return {?Element}\n   */\n  getBody() {}\n\n  /**\n   * Whether the document has been fully constructed.\n   * @return {boolean}\n   */\n  isReady() {}\n\n  /**\n   * Resolved when document has been fully constructed.\n   * @return {!Promise}\n   */\n  whenReady() {}\n\n  /**\n   * Adds the element to the fixed layer.\n   * @param {!Element} unusedElement\n   * @return {!Promise}\n   *\n   * This is a no-op for except in AMP on iOS < 13.0.\n   */\n  addToFixedLayer(unusedElement) {}\n}\n\n/** @implements {Doc} */\nexport class GlobalDoc {\n  /**\n   * @param {!Window|!Document} winOrDoc\n   */\n  constructor(winOrDoc) {\n    const isWin = !!winOrDoc.document;\n    /** @private @const {!Window} */\n    this.win_ = /** @type {!Window} */ (isWin\n      ? /** @type {!Window} */ (winOrDoc)\n      : /** @type {!Document} */ (winOrDoc).defaultView);\n    /** @private @const {!Document} */\n    this.doc_ = isWin\n      ? /** @type {!Window} */ (winOrDoc).document\n      : /** @type {!Document} */ (winOrDoc);\n  }\n\n  /** @override */\n  getWin() {\n    return this.win_;\n  }\n\n  /** @override */\n  getRootNode() {\n    return this.doc_;\n  }\n\n  /** @override */\n  getRootElement() {\n    return this.doc_.documentElement;\n  }\n\n  /** @override */\n  getHead() {\n    // `document.head` always has a chance to be parsed, at least partially.\n    return /** @type {!Element} */ (this.doc_.head);\n  }\n\n  /** @override */\n  getBody() {\n    return this.doc_.body;\n  }\n\n  /** @override */\n  isReady() {\n    return isDocumentReady(this.doc_);\n  }\n\n  /** @override */\n  whenReady() {\n    return whenDocumentReady(this.doc_);\n  }\n\n  /** @override */\n  addToFixedLayer(unusedElement) {\n    return Promise.resolve();\n  }\n}\n\n/**\n * @param {!Document|!Window|!Doc} input\n * @return {!Doc}\n */\nexport function resolveDoc(input) {\n  // Is it a `Document`\n  if (/** @type {!Document} */ (input).nodeType === /* DOCUMENT */ 9) {\n    return new GlobalDoc(/** @type {!Document} */ (input));\n  }\n  // Is it a `Window`?\n  if (/** @type {!Window} */ (input).document) {\n    return new GlobalDoc(/** @type {!Window} */ (input));\n  }\n  return /** @type {!Doc} */ (input);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Doc, resolveDoc} from './doc';\nimport {PageConfig} from './page-config';\nimport {debugLog} from '../utils/log';\nimport {hasNextNodeInDocumentOrder} from '../utils/dom';\nimport {isArray} from '../utils/types';\nimport {tryParseJson} from '../utils/json';\n\nconst ALREADY_SEEN = '__SWG-SEEN__';\nconst CONTROL_FLAG = 'subscriptions-control';\n\nconst ALLOWED_TYPES = [\n  'CreativeWork',\n  'Article',\n  'NewsArticle',\n  'Blog',\n  'Comment',\n  'Course',\n  'HowTo',\n  'Message',\n  'Review',\n  'WebPage',\n];\n\n// RegExp for quickly scanning LD+JSON for allowed types\nconst RE_ALLOWED_TYPES = new RegExp(ALLOWED_TYPES.join('|'));\n\n/**\n */\nexport class PageConfigResolver {\n  /**\n   * @param {!Window|!Document|!Doc} winOrDoc\n   */\n  constructor(winOrDoc) {\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(winOrDoc);\n\n    /** @private {?function((!PageConfig|!Promise))} */\n    this.configResolver_ = null;\n\n    /** @private @const {!Promise<!PageConfig>} */\n    this.configPromise_ = new Promise(resolve => {\n      this.configResolver_ = resolve;\n    });\n\n    /** @private @const {!MetaParser} */\n    this.metaParser_ = new MetaParser(this.doc_);\n    /** @private @const {!JsonLdParser} */\n    this.ldParser_ = new JsonLdParser(this.doc_);\n    /** @private @const {!MicrodataParser} */\n    this.microdataParser_ = new MicrodataParser(this.doc_);\n  }\n\n  /**\n   * @return {!Promise<!PageConfig>}\n   */\n  resolveConfig() {\n    // Try resolve the config at different times.\n    Promise.resolve().then(this.check.bind(this));\n    this.doc_.whenReady().then(this.check.bind(this));\n    return this.configPromise_;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    // Already resolved.\n    if (!this.configResolver_) {\n      return null;\n    }\n    let config = this.metaParser_.check();\n    if (!config) {\n      config = this.ldParser_.check();\n    }\n    if (!config) {\n      config = this.microdataParser_.check();\n    }\n    if (config) {\n      // Product ID has been found: initialize the rest of the config.\n      this.configResolver_(config);\n      this.configResolver_ = null;\n    } else if (this.doc_.isReady()) {\n      this.configResolver_(\n        Promise.reject(new Error('No config could be discovered in the page'))\n      );\n      this.configResolver_ = null;\n    }\n    debugLog(config);\n    return config;\n  }\n}\n\nclass TypeChecker {\n  constructor() {}\n\n  /**\n   * Check value from json\n   * @param {?Array|string} value\n   * @param {Array<string>} expectedTypes\n   * @return {boolean}\n   */\n  checkValue(value, expectedTypes) {\n    if (!value) {\n      return false;\n    }\n    return this.checkArray(this.toArray_(value), expectedTypes);\n  }\n\n  /**\n   * Checks space delimited list of types\n   * @param {?string} itemtype\n   * @param {Array<string>} expectedTypes\n   * @return {boolean}\n   */\n  checkString(itemtype, expectedTypes) {\n    if (!itemtype) {\n      return false;\n    }\n    return this.checkArray(itemtype.split(/\\s+/), expectedTypes);\n  }\n\n  /**\n   * @param {Array<?string>} typeArray\n   * @param {Array<string>} expectedTypes\n   * @return {boolean}\n   */\n  checkArray(typeArray, expectedTypes) {\n    let found = false;\n    typeArray.forEach(candidateType => {\n      found =\n        found ||\n        expectedTypes.includes(\n          candidateType.replace(/^http:\\/\\/schema.org\\//i, '')\n        );\n    });\n    return found;\n  }\n\n  /*\n   * @param {?Array|string} value\n   * @return {Array}\n   * @private\n   */\n  toArray_(value) {\n    return isArray(value) ? value : [value];\n  }\n}\n\nclass MetaParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n\n    // Try to find product id.\n    const productId = getMetaTag(\n      this.doc_.getRootNode(),\n      'subscriptions-product-id'\n    );\n    if (!productId) {\n      return null;\n    }\n\n    // Is locked?\n    const accessibleForFree = getMetaTag(\n      this.doc_.getRootNode(),\n      'subscriptions-accessible-for-free'\n    );\n    const locked =\n      (accessibleForFree && accessibleForFree.toLowerCase() == 'false') ||\n      false;\n\n    return new PageConfig(productId, locked);\n  }\n}\n\nclass JsonLdParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n    /** @private @const @function */\n    this.checkType_ = new TypeChecker();\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n\n    const domReady = this.doc_.isReady();\n\n    // type: 'application/ld+json'\n    const elements = this.doc_\n      .getRootNode()\n      .querySelectorAll('script[type=\"application/ld+json\"]');\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (\n        element[ALREADY_SEEN] ||\n        !element.textContent ||\n        (!domReady && !hasNextNodeInDocumentOrder(element))\n      ) {\n        continue;\n      }\n      element[ALREADY_SEEN] = true;\n      if (!RE_ALLOWED_TYPES.test(element.textContent)) {\n        continue;\n      }\n      const possibleConfig = this.tryExtractConfig_(element);\n      if (possibleConfig) {\n        return possibleConfig;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {!Element} element\n   * @return {?PageConfig}\n   */\n  tryExtractConfig_(element) {\n    const json = tryParseJson(element.textContent);\n    if (!json) {\n      return null;\n    }\n\n    // Must be an ALLOWED_TYPE\n    if (!this.checkType_.checkValue(json['@type'], ALLOWED_TYPES)) {\n      return null;\n    }\n\n    // Must have a isPartOf[@type=Product].\n    let productId = null;\n    const partOfArray = this.valueArray_(json, 'isPartOf');\n    if (partOfArray) {\n      for (let i = 0; i < partOfArray.length; i++) {\n        productId = this.discoverProductId_(partOfArray[i]);\n        if (productId) {\n          break;\n        }\n      }\n    }\n    if (!productId) {\n      return null;\n    }\n\n    // Found product id, just check for the access flag.\n    const isAccessibleForFree = this.bool_(\n      this.singleValue_(json, 'isAccessibleForFree'),\n      /* default */ true\n    );\n\n    return new PageConfig(productId, !isAccessibleForFree);\n  }\n\n  /**\n   * @param {*} value\n   * @param {boolean} def\n   * @return {boolean}\n   */\n  bool_(value, def) {\n    if (value == null || value === '') {\n      return def;\n    }\n    if (typeof value == 'boolean') {\n      return value;\n    }\n    if (typeof value == 'string') {\n      const lowercase = value.toLowerCase();\n      if (lowercase == 'false') {\n        return false;\n      }\n      if (lowercase == 'true') {\n        return true;\n      }\n    }\n    return def;\n  }\n\n  /**\n   * @param {!Object} json\n   * @return {?string}\n   */\n  discoverProductId_(json) {\n    // Must have type `Product`.\n    if (!this.checkType_.checkValue(json['@type'], ['Product'])) {\n      return null;\n    }\n    return /** @type {?string} */ (this.singleValue_(json, 'productID'));\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} name\n   * @return {?Array}\n   */\n  valueArray_(json, name) {\n    const value = json[name];\n    if (value == null || value === '') {\n      return null;\n    }\n    return isArray(value) ? value : [value];\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} name\n   * @return {*}\n   */\n  singleValue_(json, name) {\n    const valueArray = this.valueArray_(json, name);\n    const value = valueArray && valueArray[0];\n    return value == null || value === '' ? null : value;\n  }\n}\n\nclass MicrodataParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n    /** @private {?boolean} */\n    this.access_ = null;\n    /** @private {?string} */\n    this.productId_ = null;\n    /** @private @const @function */\n    this.checkType_ = new TypeChecker();\n  }\n\n  /**\n   * Returns false if access is restricted, otherwise true\n   * @param {!Element} root An element that is an item of type in ALLOWED_TYPES list\n   * @return {?boolean} locked access\n   * @private\n   */\n  discoverAccess_(root) {\n    const ALREADY_SEEN = 'alreadySeenForAccessInfo';\n    const nodeList = root.querySelectorAll(\"[itemprop='isAccessibleForFree']\");\n    for (let i = 0; nodeList[i]; i++) {\n      const element = nodeList[i];\n      const content = element.getAttribute('content') || element.textContent;\n      if (!content) {\n        continue;\n      }\n      if (this.isValidElement_(element, root, ALREADY_SEEN)) {\n        let accessForFree = null;\n        if (content.toLowerCase() == 'true') {\n          accessForFree = true;\n        } else if (content.toLowerCase() == 'false') {\n          accessForFree = false;\n        }\n        return accessForFree;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Verifies if an element is valid based on the following\n   * - child of an item of one the the ALLOWED_TYPES\n   * - not a child of an item of any other type\n   * - not seen before, marked using the alreadySeen tag\n   * @param {?Element} current the element to be verified\n   * @param {!Element} root the parent to track up to\n   * @param {!string} alreadySeen used to tag already visited nodes\n   * @return {!boolean} valid node\n   * @private\n   */\n  isValidElement_(current, root, alreadySeen) {\n    for (\n      let node = current;\n      node && !node[alreadySeen];\n      node = node.parentNode\n    ) {\n      node[alreadySeen] = true;\n      // document nodes don't have hasAttribute\n      if (node.hasAttribute && node.hasAttribute('itemscope')) {\n        /**{?string} */\n        const type = node.getAttribute('itemtype');\n        return this.checkType_.checkString(type, ALLOWED_TYPES);\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Obtains the product ID that meets the requirements\n   * - child of an item of one of ALLOWED_TYPES\n   * - Not a child of an item of type 'Section'\n   * - child of an item of type 'productID'\n   * @param {!Element} root An element that is an item of an ALLOWED_TYPES\n   * @return {?string} product ID, if found\n   * @private\n   */\n  discoverProductId_(root) {\n    const ALREADY_SEEN = 'alreadySeenForProductInfo';\n    const nodeList = root.querySelectorAll('[itemprop=\"productID\"]');\n    for (let i = 0; nodeList[i]; i++) {\n      const element = nodeList[i];\n      const content = element.getAttribute('content') || element.textContent;\n      const item = element.closest('[itemtype][itemscope]');\n      const type = item.getAttribute('itemtype');\n      if (type.indexOf('http://schema.org/Product') <= -1) {\n        continue;\n      }\n      if (this.isValidElement_(item.parentElement, root, ALREADY_SEEN)) {\n        return content;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns PageConfig if available\n   * @return {?PageConfig} PageConfig found so far\n   */\n  getPageConfig_() {\n    let locked = null;\n    if (this.access_ != null) {\n      locked = !this.access_;\n    } else if (this.doc_.isReady()) {\n      // Default to unlocked\n      locked = false;\n    }\n    if (this.productId_ != null && locked != null) {\n      return new PageConfig(this.productId_, locked);\n    }\n    return null;\n  }\n\n  /**\n   * Extracts page config from Microdata in the DOM\n   * @return {?PageConfig} PageConfig found\n   */\n  tryExtractConfig_() {\n    let config = this.getPageConfig_();\n    if (config) {\n      return config;\n    }\n\n    // Grab all the nodes with an itemtype and filter for our allowed types\n    const nodeList = Array.prototype.slice\n      .call(this.doc_.getRootNode().querySelectorAll('[itemscope][itemtype]'))\n      .filter(node =>\n        this.checkType_.checkString(\n          node.getAttribute('itemtype'),\n          ALLOWED_TYPES\n        )\n      );\n\n    for (let i = 0; nodeList[i] && config == null; i++) {\n      const element = nodeList[i];\n      if (this.access_ == null) {\n        this.access_ = this.discoverAccess_(element);\n      }\n      if (!this.productId_) {\n        this.productId_ = this.discoverProductId_(element);\n      }\n      config = this.getPageConfig_();\n    }\n    return config;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n    return this.tryExtractConfig_();\n  }\n}\n\n/**\n * @param {!Node} rootNode\n * @return {?string}\n */\nexport function getControlFlag(rootNode) {\n  // Look for the flag in `meta`.\n  const flag = getMetaTag(rootNode, CONTROL_FLAG);\n  if (flag) {\n    return flag;\n  }\n  // Look for the flag in `script`.\n  const el = rootNode.querySelector(`script[${CONTROL_FLAG}]`);\n  if (el) {\n    return el.getAttribute(CONTROL_FLAG);\n  }\n  return null;\n}\n\n/**\n * Returns the value from content attribute of a meta tag with given name.\n *\n * If multiple tags are found, the first value is returned.\n *\n * @param {!Node} rootNode\n * @param {string} name The tag name to look for.\n * @return {?string} attribute value or empty string.\n * @private\n */\nfunction getMetaTag(rootNode, name) {\n  const el = rootNode.querySelector(`meta[name=\"${name}\"]`);\n  if (el) {\n    return el.getAttribute('content');\n  }\n  return null;\n}\n\n/** @package Visible for testing only. */\nexport function getDocClassForTesting() {\n  return Doc;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n */\nexport class PageConfig {\n  /**\n   * @param {string} productOrPublicationId\n   * @param {boolean} locked\n   */\n  constructor(productOrPublicationId, locked) {\n    let publicationId, productId, label;\n    const div = productOrPublicationId.indexOf(':');\n    if (div != -1) {\n      // The argument is a product id.\n      productId = productOrPublicationId;\n      publicationId = productId.substring(0, div);\n      label = productId.substring(div + 1);\n      if (label == '*') {\n        throw new Error('wildcard disallowed');\n      }\n    } else {\n      // The argument is a publication id.\n      publicationId = productOrPublicationId;\n      productId = null;\n      label = null;\n    }\n\n    /** @private @const {string} */\n    this.publicationId_ = publicationId;\n    /** @private @const {?string} */\n    this.productId_ = productId;\n    /** @private @const {?string} */\n    this.label_ = label;\n    /** @private @const {boolean} */\n    this.locked_ = locked;\n  }\n\n  /**\n   * @return {string}\n   */\n  getPublicationId() {\n    return this.publicationId_;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getProductId() {\n    return this.productId_;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getLabel() {\n    return this.label_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isLocked() {\n    return this.locked_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Loads all polyfills needed by the project.\n * This list should not get longer without a very good reason.\n */\nimport {install as installDOMTokenListToggle} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installObjectValues} from './polyfills/object-values';\nimport {install as installPromise} from './polyfills/promise';\nimport {install as installArrayIncludes} from './polyfills/array-includes';\n\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallObjectValues(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} opt_fromIndex\n * @return {boolean}\n * @this {Array}\n */\nfunction includes(value, opt_fromIndex) {\n  const fromIndex = opt_fromIndex || 0;\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Sets the Array.contains polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nfunction documentContainsPolyfill(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.HTMLDocument.prototype.contains) {\n    win.Object.defineProperty(win.HTMLDocument.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: documentContainsPolyfill,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, opt_force)` method.\n * This is specially important because IE does not support `opt_force` attribute.\n * See https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} opt_force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nfunction domTokenListTogglePolyfill(token, opt_force) {\n  const remove = opt_force === undefined ? this.contains(token) : !opt_force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: domTokenListTogglePolyfill,\n    });\n  }\n}\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @returns {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @returns {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Implements `Object.values` API.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values.\n *\n * @param {!Object} target\n * @returns {!Array<*>}\n */\nexport function values(target) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = [];\n  for (const key in target) {\n    if (hasOwnProperty.call(target, key)) {\n      output.push(target[key]);\n    }\n  }\n  return output;\n}\n\n/**\n * Sets the Object.values polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.values) {\n    win.Object.defineProperty(win.Object, 'values', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: values,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @interface\n */\nclass Message {\n  /**\n   * @return {string}\n   */\n  label() {}\n\n  /**\n   * @return {!Array}\n   */\n  toArray() {}\n}\n\n/** @enum {number} */\nconst AnalyticsEvent = {\n  UNKNOWN: 0,\n  IMPRESSION_PAYWALL: 1,\n  IMPRESSION_AD: 2,\n  IMPRESSION_OFFERS: 3,\n  IMPRESSION_SUBSCRIBE_BUTTON: 4,\n  IMPRESSION_SMARTBOX: 5,\n  IMPRESSION_SWG_BUTTON: 6,\n  IMPRESSION_CLICK_TO_SHOW_OFFERS: 7,\n  IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED: 8,\n  IMPRESSION_SUBSCRIPTION_COMPLETE: 9,\n  IMPRESSION_ACCOUNT_CHANGED: 10,\n  ACTION_SUBSCRIBE: 1000,\n  ACTION_PAYMENT_COMPLETE: 1001,\n  ACTION_ACCOUNT_CREATED: 1002,\n  ACTION_ACCOUNT_ACKNOWLEDGED: 1003,\n  ACTION_SUBSCRIPTIONS_LANDING_PAGE: 1004,\n  ACTION_PAYMENT_FLOW_STARTED: 1005,\n  ACTION_OFFER_SELECTED: 1006,\n  ACTION_SWG_BUTTON_CLICK: 1007,\n  ACTION_VIEW_OFFERS: 1008,\n  ACTION_ALREADY_SUBSCRIBED: 1009,\n  ACTION_NEW_DEFERRED_ACCOUNT: 1010,\n  EVENT_PAYMENT_FAILED: 2000,\n  EVENT_CUSTOM: 3000,\n  EVENT_CONFIRM_TX_ID: 3001,\n  EVENT_CHANGED_TX_ID: 3002,\n  EVENT_GPAY_NO_TX_ID: 3003,\n  EVENT_GPAY_CANNOT_CONFIRM_TX_ID: 3004,\n  EVENT_SUBSCRIPTION_STATE: 4000,\n};\n/** @enum {number} */\nconst EventOriginator = {\n  UNKNOWN_CLIENT: 0,\n  SWG_CLIENT: 1,\n  AMP_CLIENT: 2,\n  PROPENSITY_CLIENT: 3,\n  SWG_SERVER: 4,\n  PUBLISHER_CLIENT: 5,\n};\n\n/**\n * @implements {Message}\n */\nclass AccountCreationRequest {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?boolean} */\n    this.complete_ = (data[1] == null) ? null : data[1];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getComplete() {\n    return this.complete_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setComplete(value) {\n    this.complete_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.complete_,  // field 1 - complete\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AccountCreationRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AlreadySubscribedResponse {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?boolean} */\n    this.subscriberOrMember_ = (data[1] == null) ? null : data[1];\n\n    /** @private {?boolean} */\n    this.linkRequested_ = (data[2] == null) ? null : data[2];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getSubscriberOrMember() {\n    return this.subscriberOrMember_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setSubscriberOrMember(value) {\n    this.subscriberOrMember_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getLinkRequested() {\n    return this.linkRequested_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setLinkRequested(value) {\n    this.linkRequested_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.subscriberOrMember_,  // field 1 - subscriber_or_member\n      this.linkRequested_,  // field 2 - link_requested\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AlreadySubscribedResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AnalyticsContext {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?string} */\n    this.embedderOrigin_ = (data[1] == null) ? null : data[1];\n\n    /** @private {?string} */\n    this.transactionId_ = (data[2] == null) ? null : data[2];\n\n    /** @private {?string} */\n    this.referringOrigin_ = (data[3] == null) ? null : data[3];\n\n    /** @private {?string} */\n    this.utmSource_ = (data[4] == null) ? null : data[4];\n\n    /** @private {?string} */\n    this.utmCampaign_ = (data[5] == null) ? null : data[5];\n\n    /** @private {?string} */\n    this.utmMedium_ = (data[6] == null) ? null : data[6];\n\n    /** @private {?string} */\n    this.sku_ = (data[7] == null) ? null : data[7];\n\n    /** @private {?boolean} */\n    this.readyToPay_ = (data[8] == null) ? null : data[8];\n\n    /** @private {!Array<string>} */\n    this.label_ = data[9] || [];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getEmbedderOrigin() {\n    return this.embedderOrigin_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setEmbedderOrigin(value) {\n    this.embedderOrigin_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getTransactionId() {\n    return this.transactionId_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setTransactionId(value) {\n    this.transactionId_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getReferringOrigin() {\n    return this.referringOrigin_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setReferringOrigin(value) {\n    this.referringOrigin_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUtmSource() {\n    return this.utmSource_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUtmSource(value) {\n    this.utmSource_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUtmCampaign() {\n    return this.utmCampaign_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUtmCampaign(value) {\n    this.utmCampaign_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUtmMedium() {\n    return this.utmMedium_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUtmMedium(value) {\n    this.utmMedium_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.sku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSku(value) {\n    this.sku_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getReadyToPay() {\n    return this.readyToPay_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setReadyToPay(value) {\n    this.readyToPay_ = value;\n  }\n\n  /**\n   * @return {!Array<string>}\n   */\n  getLabelList() {\n    return this.label_;\n  }\n\n  /**\n   * @param {!Array<string>} value\n   */\n  setLabelList(value) {\n    this.label_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.embedderOrigin_,  // field 1 - embedder_origin\n      this.transactionId_,  // field 2 - transaction_id\n      this.referringOrigin_,  // field 3 - referring_origin\n      this.utmSource_,  // field 4 - utm_source\n      this.utmCampaign_,  // field 5 - utm_campaign\n      this.utmMedium_,  // field 6 - utm_medium\n      this.sku_,  // field 7 - sku\n      this.readyToPay_,  // field 8 - ready_to_pay\n      this.label_,  // field 9 - label\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AnalyticsContext';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AnalyticsEventMeta {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?EventOriginator} */\n    this.eventOriginator_ = (data[1] == null) ? null : data[1];\n\n    /** @private {?boolean} */\n    this.isFromUserAction_ = (data[2] == null) ? null : data[2];\n  }\n\n  /**\n   * @return {?EventOriginator}\n   */\n  getEventOriginator() {\n    return this.eventOriginator_;\n  }\n\n  /**\n   * @param {!EventOriginator} value\n   */\n  setEventOriginator(value) {\n    this.eventOriginator_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getIsFromUserAction() {\n    return this.isFromUserAction_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setIsFromUserAction(value) {\n    this.isFromUserAction_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.eventOriginator_,  // field 1 - event_originator\n      this.isFromUserAction_,  // field 2 - is_from_user_action\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AnalyticsEventMeta';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AnalyticsRequest {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?AnalyticsContext} */\n    this.context_ = (data[1] == null || data[1] == undefined) ? null : new\n        AnalyticsContext(data[1]);\n\n    /** @private {?AnalyticsEvent} */\n    this.event_ = (data[2] == null) ? null : data[2];\n\n    /** @private {?AnalyticsEventMeta} */\n    this.meta_ = (data[3] == null || data[3] == undefined) ? null : new\n        AnalyticsEventMeta(data[3]);\n\n    /** @private {?EventParams} */\n    this.params_ = (data[4] == null || data[4] == undefined) ? null : new\n        EventParams(data[4]);\n  }\n\n  /**\n   * @return {?AnalyticsContext}\n   */\n  getContext() {\n    return this.context_;\n  }\n\n  /**\n   * @param {!AnalyticsContext} value\n   */\n  setContext(value) {\n    this.context_ = value;\n  }\n\n  /**\n   * @return {?AnalyticsEvent}\n   */\n  getEvent() {\n    return this.event_;\n  }\n\n  /**\n   * @param {!AnalyticsEvent} value\n   */\n  setEvent(value) {\n    this.event_ = value;\n  }\n\n  /**\n   * @return {?AnalyticsEventMeta}\n   */\n  getMeta() {\n    return this.meta_;\n  }\n\n  /**\n   * @param {!AnalyticsEventMeta} value\n   */\n  setMeta(value) {\n    this.meta_ = value;\n  }\n\n  /**\n   * @return {?EventParams}\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {!EventParams} value\n   */\n  setParams(value) {\n    this.params_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.context_ ? this.context_.toArray() : [], // field 1 - context\n      this.event_,  // field 2 - event\n      this.meta_ ? this.meta_.toArray() : [], // field 3 - meta\n      this.params_ ? this.params_.toArray() : [], // field 4 - params\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AnalyticsRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass EntitlementsResponse {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?string} */\n    this.jwt_ = (data[1] == null) ? null : data[1];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getJwt() {\n    return this.jwt_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setJwt(value) {\n    this.jwt_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.jwt_,  // field 1 - jwt\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'EntitlementsResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass EventParams {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?string} */\n    this.smartboxMessage_ = (data[1] == null) ? null : data[1];\n\n    /** @private {?string} */\n    this.gpayTransactionId_ = (data[2] == null) ? null : data[2];\n\n    /** @private {?boolean} */\n    this.hadLogged_ = (data[3] == null) ? null : data[3];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSmartboxMessage() {\n    return this.smartboxMessage_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSmartboxMessage(value) {\n    this.smartboxMessage_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getGpayTransactionId() {\n    return this.gpayTransactionId_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setGpayTransactionId(value) {\n    this.gpayTransactionId_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getHadLogged() {\n    return this.hadLogged_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setHadLogged(value) {\n    this.hadLogged_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.smartboxMessage_,  // field 1 - smartbox_message\n      this.gpayTransactionId_,  // field 2 - gpay_transaction_id\n      this.hadLogged_,  // field 3 - had_logged\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'EventParams';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass LinkSaveTokenRequest {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?string} */\n    this.authCode_ = (data[1] == null) ? null : data[1];\n\n    /** @private {?string} */\n    this.token_ = (data[2] == null) ? null : data[2];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getAuthCode() {\n    return this.authCode_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setAuthCode(value) {\n    this.authCode_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getToken() {\n    return this.token_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setToken(value) {\n    this.token_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.authCode_,  // field 1 - auth_code\n      this.token_,  // field 2 - token\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'LinkSaveTokenRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass LinkingInfoResponse {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?boolean} */\n    this.requested_ = (data[1] == null) ? null : data[1];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getRequested() {\n    return this.requested_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setRequested(value) {\n    this.requested_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.requested_,  // field 1 - requested\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'LinkingInfoResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass SkuSelectedResponse {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?string} */\n    this.sku_ = (data[1] == null) ? null : data[1];\n\n    /** @private {?string} */\n    this.oldSku_ = (data[2] == null) ? null : data[2];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.sku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSku(value) {\n    this.sku_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getOldSku() {\n    return this.oldSku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setOldSku(value) {\n    this.oldSku_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.sku_,  // field 1 - sku\n      this.oldSku_,  // field 2 - old_sku\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'SkuSelectedResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass SmartBoxMessage {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?boolean} */\n    this.isClicked_ = (data[1] == null) ? null : data[1];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getIsClicked() {\n    return this.isClicked_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setIsClicked(value) {\n    this.isClicked_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.isClicked_,  // field 1 - is_clicked\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'SmartBoxMessage';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass SubscribeResponse {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?boolean} */\n    this.subscribe_ = (data[1] == null) ? null : data[1];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getSubscribe() {\n    return this.subscribe_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setSubscribe(value) {\n    this.subscribe_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.subscribe_,  // field 1 - subscribe\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'SubscribeResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass ViewSubscriptionsResponse {\n /**\n  * @param {!Array=} data\n  */\n  constructor(data = []) {\n\n    /** @private {?boolean} */\n    this.native_ = (data[1] == null) ? null : data[1];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getNative() {\n    return this.native_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setNative(value) {\n    this.native_ = value;\n  }\n\n  /**\n   * @return {!Array}\n   * @override\n   */\n  toArray() {\n    return [\n      this.label(),  // message label\n      this.native_,  // field 1 - native\n    ];\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'ViewSubscriptionsResponse';\n  }\n}\n\nconst PROTO_MAP = {\n  'AccountCreationRequest': AccountCreationRequest,\n  'AlreadySubscribedResponse': AlreadySubscribedResponse,\n  'AnalyticsContext': AnalyticsContext,\n  'AnalyticsEventMeta': AnalyticsEventMeta,\n  'AnalyticsRequest': AnalyticsRequest,\n  'EntitlementsResponse': EntitlementsResponse,\n  'EventParams': EventParams,\n  'LinkSaveTokenRequest': LinkSaveTokenRequest,\n  'LinkingInfoResponse': LinkingInfoResponse,\n  'SkuSelectedResponse': SkuSelectedResponse,\n  'SmartBoxMessage': SmartBoxMessage,\n  'SubscribeResponse': SubscribeResponse,\n  'ViewSubscriptionsResponse': ViewSubscriptionsResponse,\n};\n\n/**\n * Utility to deserialize a buffer\n * @param {!Array} data\n * @return {!Message}\n */\nfunction deserialize(data) {\n  /** {?string} */\n  const key = data ? data[0] : null;\n  if (key) {\n    const ctor = PROTO_MAP[key];\n    if (ctor) {\n      return new ctor(data);\n    }\n  }\n  throw new Error('Deserialization failed for ' + data);\n}\n\n/**\n * @param {function(new: T)} messageType\n * @return {string}\n * @template T\n */\nfunction getLabel(messageType) {\n  const message = /** @type {!Message} */ (new messageType());\n  return message.label();\n}\n\nexport {\n  AccountCreationRequest,\n  AlreadySubscribedResponse,\n  AnalyticsContext,\n  AnalyticsEvent,\n  AnalyticsEventMeta,\n  AnalyticsRequest,\n  EntitlementsResponse,\n  EventOriginator,\n  EventParams,\n  LinkSaveTokenRequest,\n  LinkingInfoResponse,\n  Message,\n  SkuSelectedResponse,\n  SmartBoxMessage,\n  SubscribeResponse,\n  ViewSubscriptionsResponse,\n  deserialize,\n  getLabel,\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnalyticsRequest,\n  AnalyticsContext,\n  AnalyticsEventMeta,\n  AnalyticsEvent,\n  EventParams,\n} from '../proto/api_messages';\nimport {createElement} from '../utils/dom';\nimport {feArgs, feUrl} from './services';\nimport {getOnExperiments} from './experiments';\nimport {parseQueryString, parseUrl} from '../utils/url';\nimport {setImportantStyles} from '../utils/style';\nimport {getUuid} from '../utils/string';\nimport {ClientEventManager} from './client-event-manager';\n\n/** @const {!Object<string, string>} */\nconst iframeStyles = {\n  display: 'none',\n};\n\nexport class AnalyticsService {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = deps.doc();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_.getWin().document,\n      'iframe',\n      {}\n    ));\n\n    setImportantStyles(this.iframe_, iframeStyles);\n\n    /** @private @const {string} */\n    this.src_ = feUrl('/serviceiframe');\n\n    /** @private @const {string} */\n    this.publicationId_ = deps.pageConfig().getPublicationId();\n\n    this.args_ = feArgs({\n      publicationId: this.publicationId_,\n    });\n\n    /** @private @type {!boolean} */\n    this.everLogged_ = false;\n\n    /**\n     * @private @const {!AnalyticsContext}\n     */\n    this.context_ = new AnalyticsContext();\n\n    this.context_.setTransactionId(getUuid());\n\n    /** @private {?Promise<!web-activities/activity-ports.ActivityIframePort>} */\n    this.serviceReady_ = null;\n\n    /** @private {?Promise} */\n    this.lastAction_ = null;\n\n    /** @private @const {!ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n    this.eventManager_.registerEventListener(\n      this.handleClientEvent_.bind(this)\n    );\n  }\n\n  /**\n   * @param {string} transactionId\n   */\n  setTransactionId(transactionId) {\n    this.context_.setTransactionId(transactionId);\n  }\n\n  /**\n   * @return {string}\n   */\n  getTransactionId() {\n    return /** @type {string} */ (this.context_.getTransactionId());\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.context_.getSku();\n  }\n\n  /**\n   * @param {string} sku\n   */\n  setSku(sku) {\n    this.context_.setSku(sku);\n  }\n\n  /**\n   * @param {!Array<string>} labels\n   */\n  addLabels(labels) {\n    if (labels && labels.length > 0) {\n      const newLabels = [].concat(this.context_.getLabelList());\n      labels.forEach(label => {\n        if (newLabels.indexOf(label) == -1) {\n          newLabels.push(label);\n        }\n      });\n      this.context_.setLabelList(newLabels);\n    }\n  }\n\n  /**\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  getQueryString_() {\n    return this.doc_.getWin().location.search;\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  getReferrer_() {\n    return this.doc_.getWin().document.referrer;\n  }\n\n  /**\n   * @private\n   */\n  setContext_() {\n    const utmParams = parseQueryString(this.getQueryString_());\n    this.context_.setReferringOrigin(parseUrl(this.getReferrer_()).origin);\n    const campaign = utmParams['utm_campaign'];\n    const medium = utmParams['utm_medium'];\n    const source = utmParams['utm_source'];\n    if (campaign) {\n      this.context_.setUtmCampaign(campaign);\n    }\n    if (medium) {\n      this.context_.setUtmMedium(medium);\n    }\n    if (source) {\n      this.context_.setUtmSource(source);\n    }\n    this.addLabels(getOnExperiments(this.doc_.getWin()));\n  }\n\n  /**\n   * @return {!Promise<!../components/activities.ActivityIframePort>}\n   * @private\n   */\n  start_() {\n    if (!this.serviceReady_) {\n      // TODO(sohanirao): Potentially do this even earlier\n      this.doc_.getBody().appendChild(this.getElement());\n      this.serviceReady_ = this.activityPorts_\n        .openIframe(this.iframe_, this.src_, this.args_)\n        .then(port => {\n          this.setContext_();\n          return port.whenReady().then(() => port);\n        });\n    }\n    return this.serviceReady_;\n  }\n\n  /**\n   * @param {boolean} isReadyToPay\n   */\n  setReadyToPay(isReadyToPay) {\n    this.context_.setReadyToPay(isReadyToPay);\n  }\n\n  /**\n   */\n  close() {\n    this.doc_.getBody().removeChild(this.getElement());\n  }\n\n  /**\n   * @return {!AnalyticsContext}\n   */\n  getContext() {\n    return this.context_;\n  }\n\n  /**\n   * Returns true if any logs have already be sent to the analytics server.\n   * @return {boolean}\n   */\n  getHasLogged() {\n    return this.everLogged_;\n  }\n\n  /**\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   * @return {!AnalyticsRequest}\n   */\n  createLogRequest_(event) {\n    const meta = new AnalyticsEventMeta();\n    meta.setEventOriginator(event.eventOriginator);\n    meta.setIsFromUserAction(event.isFromUserAction);\n\n    const request = new AnalyticsRequest();\n    request.setEvent(event.eventType);\n    request.setContext(this.context_);\n    request.setMeta(meta);\n    if (event.additionalParameters instanceof EventParams) {\n      request.setParams(event.additionalParameters);\n    } // Ignore event.additionalParameters.  It may have data we shouldn't log.\n    return request;\n  }\n\n  /**\n   * Handles the message received by the port.\n   * @param {function(!Object<string, string|boolean>)} callback\n   */\n  onMessage(callback) {\n    this.lastAction_ = this.start_().then(port => {\n      port.onMessageDeprecated(callback);\n    });\n  }\n\n  /**\n   * @return {boolean}\n   */\n  shouldLogPublisherEvents_() {\n    return this.deps_.config().enableSwgAnalytics === true;\n  }\n\n  /**\n   *  Listens for new events from the events manager and handles logging\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   */\n  handleClientEvent_(event) {\n    //this event is just used to communicate information internally.  It should\n    //not be reported to the SwG analytics service.\n    if (event.eventType === AnalyticsEvent.EVENT_SUBSCRIPTION_STATE) {\n      return;\n    }\n\n    if (\n      ClientEventManager.isPublisherEvent(event) &&\n      !this.shouldLogPublisherEvents_()\n    ) {\n      return;\n    }\n    this.lastAction_ = this.start_().then(port => {\n      const request = this.createLogRequest_(event);\n      this.everLogged_ = true;\n      port.execute(request);\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AnalyticsEvent} from '../proto/api_messages';\nimport {createElement} from '../utils/dom';\nimport {msg} from '../utils/i18n';\nimport {SmartSubscriptionButtonApi, Theme} from './smart-button-api';\n\n/**\n * The button title should match that of button's SVG.\n */\n/** @type {!Object<string, string>} */\nconst TITLE_LANG_MAP = {\n  'en': 'Subscribe with Google',\n  'ar': 'Google ',\n  'de': 'Abonnieren mit Google',\n  'es': 'Suscrbete con Google',\n  'es-latam': 'Suscrbete con Google',\n  'es-latn': 'Suscrbete con Google',\n  'fr': \"S'abonner avec Google\",\n  'hi': 'Google   ',\n  'id': 'Berlangganan dengan Google',\n  'it': 'Abbonati con Google',\n  'jp': 'Google ',\n  'ko': 'Google  ',\n  'ms': 'Langgan dengan Google',\n  'nl': 'Abonneren via Google',\n  'no': 'Abonner med Google',\n  'pl': 'Subskrybuj z Google',\n  'pt': 'Subscrever com o Google',\n  'pt-br': 'Assine com o Google',\n  'ru': 'cka  Google',\n  'se': 'Prenumerera med Google',\n  'th': ' Google',\n  'tr': 'Google ile Abone Ol',\n  'uk': '  Google',\n  'zh-tw': ' Google ',\n};\n\n/**\n * The button stylesheet can be found in the `/assets/swg-button.css`.\n * It's produced by the `gulp assets` task and deployed to\n * `https://news.google.com/swg/js/v1/swg-button.css`.\n */\nexport class ButtonApi {\n  /**\n   * @param {!../model/doc.Doc} doc\n   * @param {!Promise<!./runtime.ConfiguredRuntime>} configuredRuntimePromise\n   */\n  constructor(doc, configuredRuntimePromise) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Promise<!./runtime.ConfiguredRuntime>} */\n    this.configuredRuntimePromise_ = configuredRuntimePromise;\n  }\n\n  /**\n   */\n  init() {\n    const head = this.doc_.getHead();\n    if (!head) {\n      return;\n    }\n\n    const url = '$assets$/swg-button.css';\n    const existing = head.querySelector(`link[href=\"${url}\"]`);\n    if (existing) {\n      return;\n    }\n\n    // <link rel=\"stylesheet\" href=\"...\" type=\"text/css\">\n    head.appendChild(\n      createElement(this.doc_.getWin().document, 'link', {\n        'rel': 'stylesheet',\n        'type': 'text/css',\n        'href': url,\n      })\n    );\n  }\n\n  /**\n   * @param {!../api/subscriptions.ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {!Element}\n   */\n  create(optionsOrCallback, opt_callback) {\n    const button = createElement(this.doc_.getWin().document, 'button', {});\n    return this.attach(button, optionsOrCallback, opt_callback);\n  }\n\n  /**\n   * @param {!Element} button\n   * @param {../api/subscriptions.ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {!Element}\n   */\n  attach(button, optionsOrCallback, opt_callback) {\n    const options = /** @type {!../api/subscriptions.ButtonOptions} */ (this.getOptions_(\n      optionsOrCallback\n    ));\n    const callback = this.getCallback_(optionsOrCallback, opt_callback);\n\n    const theme = options['theme'];\n    button.classList.add(`swg-button-${theme}`);\n    button.setAttribute('role', 'button');\n    if (options['lang']) {\n      button.setAttribute('lang', options['lang']);\n    }\n    button.setAttribute('title', msg(TITLE_LANG_MAP, button) || '');\n    button.addEventListener('click', callback);\n    button.addEventListener('click', () => {\n      this.configuredRuntimePromise_.then(configuredRuntime => {\n        configuredRuntime\n          .eventManager()\n          .logSwgEvent(\n            AnalyticsEvent.ACTION_SWG_BUTTON_CLICK,\n            /* isFromUserAction */ true\n          );\n      });\n    });\n    this.configuredRuntimePromise_.then(configuredRuntime => {\n      configuredRuntime\n        .eventManager()\n        .logSwgEvent(AnalyticsEvent.IMPRESSION_SWG_BUTTON);\n    });\n    return button;\n  }\n\n  /**\n   *\n   * @param {../api/subscriptions.ButtonOptions|../api/subscriptions.SmartButtonOptions|function()} optionsOrCallback\n   * @return {!../api/subscriptions.ButtonOptions|!../api/subscriptions.SmartButtonOptions}\n   * @private\n   */\n  getOptions_(optionsOrCallback) {\n    const options =\n      /** @type {!../api/subscriptions.ButtonOptions|!../api/subscriptions.SmartButtonOptions} */ (optionsOrCallback &&\n      typeof optionsOrCallback != 'function'\n        ? optionsOrCallback\n        : {'theme': Theme.LIGHT});\n\n    const theme = options['theme'];\n    if (theme !== Theme.LIGHT && theme !== Theme.DARK) {\n      options['theme'] = Theme.LIGHT;\n    }\n    return options;\n  }\n\n  /**\n   *\n   * @param {?../api/subscriptions.ButtonOptions|?../api/subscriptions.SmartButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {function()|function(Event):boolean}\n   * @private\n   */\n  getCallback_(optionsOrCallback, opt_callback) {\n    const callback =\n      /** @type {function()|function(Event):boolean} */ ((typeof optionsOrCallback ==\n      'function'\n        ? optionsOrCallback\n        : null) || opt_callback);\n    return callback;\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!Element} button\n   * @param {../api/subscriptions.SmartButtonOptions|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {!Element}\n   */\n  attachSmartButton(deps, button, optionsOrCallback, opt_callback) {\n    const options = /** @type {!../api/subscriptions.SmartButtonOptions} */ (this.getOptions_(\n      optionsOrCallback\n    ));\n    const callback = /** @type {function()} */ (this.getCallback_(\n      optionsOrCallback,\n      opt_callback\n    ));\n\n    // Add required CSS class, if missing.\n    button.classList.add('swg-smart-button');\n    button.addEventListener('click', () =>\n      this.configuredRuntimePromise_.then(configuredRuntime =>\n        configuredRuntime\n          .eventManager()\n          .logSwgEvent(\n            AnalyticsEvent.ACTION_SWG_BUTTON_CLICK,\n            /* isFromUserAction */ true\n          )\n      )\n    );\n\n    return new SmartSubscriptionButtonApi(\n      deps,\n      button,\n      options,\n      callback\n    ).start();\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @enum {number} */\nconst CallbackId = {\n  ENTITLEMENTS: 1,\n  SUBSCRIBE_REQUEST: 2,\n  SUBSCRIBE_RESPONSE: 3,\n  LOGIN_REQUEST: 4,\n  LINK_PROGRESS: 5,\n  LINK_COMPLETE: 6,\n  FLOW_STARTED: 7,\n  FLOW_CANCELED: 8,\n  CONTRIBUTION_RESPONSE: 9,\n};\n\n/**\n */\nexport class Callbacks {\n  /**\n   */\n  constructor() {\n    /** @private @const {!Object<CallbackId, function(*)>} */\n    this.callbacks_ = {};\n    /** @private @const {!Object<CallbackId, *>} */\n    this.resultBuffer_ = {};\n  }\n\n  /**\n   * @param {function(!Promise<!../api/entitlements.Entitlements>)} callback\n   */\n  setOnEntitlementsResponse(callback) {\n    this.setCallback_(CallbackId.ENTITLEMENTS, callback);\n  }\n\n  /**\n   * @param {!Promise<!../api/entitlements.Entitlements>} promise\n   */\n  triggerEntitlementsResponse(promise) {\n    return this.trigger_(\n      CallbackId.ENTITLEMENTS,\n      promise.then(res => res.clone())\n    );\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEntitlementsResponsePending() {\n    return !!this.resultBuffer_[CallbackId.ENTITLEMENTS];\n  }\n\n  /**\n   * @param {function(!../api/subscriptions.LoginRequest)} callback\n   */\n  setOnLoginRequest(callback) {\n    this.setCallback_(CallbackId.LOGIN_REQUEST, callback);\n  }\n\n  /**\n   * @param {!../api/subscriptions.LoginRequest} request\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLoginRequest(request) {\n    return this.trigger_(CallbackId.LOGIN_REQUEST, request);\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkProgress(callback) {\n    this.setCallback_(CallbackId.LINK_PROGRESS, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLinkProgress() {\n    return this.trigger_(CallbackId.LINK_PROGRESS, true);\n  }\n\n  /**\n   */\n  resetLinkProgress() {\n    this.resetCallback_(CallbackId.LINK_PROGRESS);\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkComplete(callback) {\n    this.setCallback_(CallbackId.LINK_COMPLETE, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLinkComplete() {\n    return this.trigger_(CallbackId.LINK_COMPLETE, true);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLinkCompletePending() {\n    return !!this.resultBuffer_[CallbackId.LINK_COMPLETE];\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnSubscribeRequest(callback) {\n    this.setCallback_(CallbackId.SUBSCRIBE_REQUEST, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerSubscribeRequest() {\n    return this.trigger_(CallbackId.SUBSCRIBE_REQUEST, true);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasSubscribeRequestCallback() {\n    return !!this.callbacks_[CallbackId.SUBSCRIBE_REQUEST];\n  }\n\n  /**\n   * @param {function(!Promise<!../api/subscribe-response.SubscribeResponse>)} callback\n   */\n  setOnSubscribeResponse(callback) {\n    this.setCallback_(CallbackId.SUBSCRIBE_RESPONSE, callback);\n  }\n\n  /**\n   * @param {function(!Promise<!../api/subscribe-response.SubscribeResponse>)} callback\n   */\n  setOnContributionResponse(callback) {\n    this.setCallback_(CallbackId.CONTRIBUTION_RESPONSE, callback);\n  }\n\n  /**\n   * @param {!Promise<!../api/subscribe-response.SubscribeResponse>} responsePromise\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerSubscribeResponse(responsePromise) {\n    return this.trigger_(\n      CallbackId.SUBSCRIBE_RESPONSE,\n      responsePromise.then(res => res.clone())\n    );\n  }\n\n  /**\n   * @param {!Promise<!../api/subscribe-response.SubscribeResponse>} responsePromise\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerContributionResponse(responsePromise) {\n    return this.trigger_(\n      CallbackId.CONTRIBUTION_RESPONSE,\n      responsePromise.then(res => res.clone())\n    );\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasSubscribeResponsePending() {\n    return !!this.resultBuffer_[CallbackId.SUBSCRIBE_RESPONSE];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasContributionResponsePending() {\n    return !!this.resultBuffer_[CallbackId.CONTRIBUTION_RESPONSE];\n  }\n\n  /**\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowStarted(callback) {\n    this.setCallback_(CallbackId.FLOW_STARTED, callback);\n  }\n\n  /**\n   * @param {string} flow\n   * @param {!Object=} opt_data\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerFlowStarted(flow, opt_data) {\n    return this.trigger_(CallbackId.FLOW_STARTED, {\n      flow,\n      data: opt_data || {},\n    });\n  }\n\n  /**\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowCanceled(callback) {\n    this.setCallback_(CallbackId.FLOW_CANCELED, callback);\n  }\n\n  /**\n   * @param {string} flow\n   * @param {!Object=} opt_data\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerFlowCanceled(flow, opt_data) {\n    return this.trigger_(CallbackId.FLOW_CANCELED, {\n      flow,\n      data: opt_data || {},\n    });\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {function(?)} callback\n   * @private\n   */\n  setCallback_(id, callback) {\n    this.callbacks_[id] = callback;\n    // If result already exist, execute the callback right away.\n    if (id in this.resultBuffer_) {\n      this.executeCallback_(id, callback, this.resultBuffer_[id]);\n    }\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {*} data\n   * @return {boolean}\n   * @private\n   */\n  trigger_(id, data) {\n    this.resultBuffer_[id] = data;\n    const callback = this.callbacks_[id];\n    if (callback) {\n      this.executeCallback_(id, callback, data);\n    }\n    return !!callback;\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @private\n   */\n  resetCallback_(id) {\n    if (id in this.resultBuffer_) {\n      delete this.resultBuffer_[id];\n    }\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {function(*)} callback\n   * @param {*} data\n   * @private\n   */\n  executeCallback_(id, callback, data) {\n    // Always execute callbacks in a microtask.\n    Promise.resolve().then(() => {\n      callback(data);\n      this.resetCallback_(id);\n    });\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {FilterResult} from '../api/client-event-manager-api';\nimport {AnalyticsEvent, EventOriginator} from '../proto/api_messages';\nimport {isObject, isFunction, isEnumValue, isBoolean} from '../utils/types';\nimport {log} from '../utils/log';\n\n/**\n * Helper function to describe an issue with an event object\n * @param {!string} valueName\n * @param {?*} value\n * @returns {!string}\n */\nfunction createEventErrorMessage(valueName, value) {\n  return 'Event has an invalid ' + valueName + '(' + value + ')';\n}\n\n/**\n * Throws an error if the event is invalid.\n * @param {!../api/client-event-manager-api.ClientEvent} event\n */\nfunction validateEvent(event) {\n  if (!isObject(event)) {\n    throw new Error('Event must be a valid object');\n  }\n\n  if (!isEnumValue(AnalyticsEvent, event.eventType)) {\n    throw new Error(createEventErrorMessage('eventType', event.eventType));\n  }\n\n  if (!isEnumValue(EventOriginator, event.eventOriginator)) {\n    throw new Error(\n      createEventErrorMessage('eventOriginator', event.eventOriginator)\n    );\n  }\n\n  if (\n    !isObject(event.additionalParameters) &&\n    event.additionalParameters != null\n  ) {\n    throw new Error(\n      createEventErrorMessage(\n        'additionalParameters',\n        event.additionalParameters\n      )\n    );\n  }\n\n  if (event.isFromUserAction != null && !isBoolean(event.isFromUserAction)) {\n    throw new Error(\n      createEventErrorMessage('isFromUserAction', event.isFromUserAction)\n    );\n  }\n}\n\n/** @implements {../api/client-event-manager-api.ClientEventManagerApi} */\nexport class ClientEventManager {\n  /**\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   * @return {boolean}\n   */\n  static isPublisherEvent(event) {\n    return (\n      event.eventOriginator === EventOriginator.PROPENSITY_CLIENT ||\n      event.eventOriginator === EventOriginator.PUBLISHER_CLIENT ||\n      event.eventOriginator === EventOriginator.AMP_CLIENT\n    );\n  }\n\n  /**\n   *\n   * @param {!Promise} configuredPromise\n   */\n  constructor(configuredPromise) {\n    /** @private {!Array<function(!../api/client-event-manager-api.ClientEvent)>} */\n    this.listeners_ = [];\n\n    /** @private {!Array<function(!../api/client-event-manager-api.ClientEvent):!FilterResult>} */\n    this.filterers_ = [];\n\n    /** @private {?Promise} */\n    this.lastAction_ = null;\n\n    /** @private @const {!Promise} */\n    this.isReadyPromise_ = configuredPromise;\n  }\n\n  /**\n   * @overrides\n   */\n  registerEventListener(listener) {\n    if (!isFunction(listener)) {\n      throw new Error('Event manager listeners must be a function');\n    }\n    this.listeners_.push(listener);\n  }\n\n  /**\n   * @overrides\n   */\n  registerEventFilterer(filterer) {\n    if (!isFunction(filterer)) {\n      throw new Error('Event manager filterers must be a function');\n    }\n    this.filterers_.push(filterer);\n  }\n\n  /**\n   * @overrides\n   */\n  logEvent(event) {\n    validateEvent(event);\n    this.lastAction_ = this.isReadyPromise_.then(() => {\n      for (let filterer = 0; filterer < this.filterers_.length; filterer++) {\n        try {\n          if (this.filterers_[filterer](event) === FilterResult.CANCEL_EVENT) {\n            return Promise.resolve();\n          }\n        } catch (e) {\n          log(e);\n        }\n      }\n      for (let listener = 0; listener < this.listeners_.length; listener++) {\n        try {\n          this.listeners_[listener](event);\n        } catch (e) {\n          log(e);\n        }\n      }\n      return Promise.resolve();\n    });\n  }\n\n  /**\n   * Creates an event with the arguments provided and calls logEvent.\n   * @param {!AnalyticsEvent} eventType\n   * @param {?boolean=} isFromUserAction\n   * @param {../proto/api_messages.EventParams=} eventParams\n   */\n  logSwgEvent(eventType, isFromUserAction = false, eventParams = null) {\n    this.logEvent({\n      eventType,\n      eventOriginator: EventOriginator.SWG_CLIENT,\n      isFromUserAction,\n      additionalParameters: eventParams,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {PayStartFlow} from './pay-flow';\nimport {SubscriptionFlows, ProductType} from '../api/subscriptions';\nimport {feArgs, feUrl} from './services';\nimport {\n  SkuSelectedResponse,\n  AlreadySubscribedResponse,\n} from '../proto/api_messages';\n\n/**\n * The class for Contributions flow.\n */\nexport class ContributionsFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    const isClosable = (options && options.isClosable) || true;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/contributionsiframe'),\n      feArgs({\n        'productId': deps.pageConfig().getProductId(),\n        'publicationId': deps.pageConfig().getPublicationId(),\n        'productType': ProductType.UI_CONTRIBUTION,\n        'list': (options && options.list) || 'default',\n        'skus': (options && options.skus) || null,\n        'isClosable': isClosable,\n      }),\n      /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * @param {AlreadySubscribedResponse} response\n   */\n  handleLinkRequest_(response) {\n    if (response.getSubscriberOrMember()) {\n      this.deps_.callbacks().triggerLoginRequest({\n        linkRequested: !!response.getLinkRequested(),\n      });\n    }\n  }\n\n  /**\n   * @param {SkuSelectedResponse} response\n   */\n  startPayFlow_(response) {\n    const sku = response.getSku();\n    if (sku) {\n      new PayStartFlow(this.deps_, sku, ProductType.UI_CONTRIBUTION).start();\n    }\n  }\n\n  /**\n   * Starts the contributions flow or alreadyMember flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_CONTRIBUTION_OPTIONS);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_\n        .callbacks()\n        .triggerFlowCanceled(SubscriptionFlows.SHOW_CONTRIBUTION_OPTIONS);\n    });\n    this.activityIframeView_.on(\n      AlreadySubscribedResponse,\n      this.handleLinkRequest_.bind(this)\n    );\n    this.activityIframeView_.on(\n      SkuSelectedResponse,\n      this.startPayFlow_.bind(this)\n    );\n\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {DeferredAccountCreationResponse} from '../api/deferred-account-creation';\nimport {JwtHelper} from '../utils/jwt';\nimport {PayCompleteFlow} from './pay-flow';\nimport {PurchaseData, SubscribeResponse} from '../api/subscribe-response';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {UserData} from '../api/user-data';\nimport {feArgs, feUrl} from './services';\nimport {isCancelError} from '../utils/errors';\nimport {AnalyticsEvent} from '../proto/api_messages';\n\n/**\n * The flow to initiate deferred account process.\n * See `Subscriptions.completeDeferredAccountCreation` API.\n */\nexport class DeferredAccountFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?../api/deferred-account-creation.DeferredAccountCreationRequest} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n\n    /** @private {?Promise} */\n    this.openPromise_ = null;\n\n    /** @type {!../api/deferred-account-creation.DeferredAccountCreationRequest} */\n    const defaultOptions = {\n      entitlements: null,\n      consent: true,\n    };\n    /** @private @const {!../api/deferred-account-creation.DeferredAccountCreationRequest} */\n    this.options_ = Object.assign(defaultOptions, options || {});\n  }\n\n  /**\n   * Starts the deferred account flow.\n   * @return {!Promise<!DeferredAccountCreationResponse>}\n   */\n  start() {\n    const entitlements = this.options_.entitlements;\n\n    // For now, entitlements are required to be present and have the Google\n    // token. This is strictly not required for the implementation. But it's\n    // preferrable API-wise at this time.\n    if (!entitlements || !entitlements.getEntitlementForSource('google')) {\n      throw new Error('No entitlements with \"google\" source');\n    }\n\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.COMPLETE_DEFERRED_ACCOUNT_CREATION);\n\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/recoveriframe'),\n      feArgs({\n        'publicationId': this.deps_.pageConfig().getPublicationId(),\n        'productId': this.deps_.pageConfig().getProductId(),\n        'entitlements': (entitlements && entitlements.raw) || null,\n        'consent': this.options_.consent,\n      }),\n      /* shouldFadeBody */ true\n    );\n\n    this.openPromise_ = this.dialogManager_.openView(this.activityIframeView_);\n    return this.activityIframeView_.acceptResult().then(\n      result => {\n        // The consent part is complete.\n        return this.handleConsentResponse_(\n          /** @type {!Object} */ (result.data)\n        );\n      },\n      reason => {\n        if (isCancelError(reason)) {\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(\n              SubscriptionFlows.COMPLETE_DEFERRED_ACCOUNT_CREATION\n            );\n        } else {\n          this.dialogManager_.completeView(this.activityIframeView_);\n        }\n        throw reason;\n      }\n    );\n  }\n\n  /**\n   * @param {!Object} data\n   * @return {!DeferredAccountCreationResponse}\n   * @private\n   */\n  handleConsentResponse_(data) {\n    this.deps_.entitlementsManager().blockNextNotification();\n\n    // Parse the response.\n    const entitlementsJwt = data['entitlements'];\n    const idToken = data['idToken'];\n    const productType = data['productType'];\n    const entitlements = this.deps_\n      .entitlementsManager()\n      .parseEntitlements({'signedEntitlements': entitlementsJwt});\n    const userData = new UserData(\n      idToken,\n      /** @type {!Object} */ (new JwtHelper().decode(idToken))\n    );\n    const purchaseDataList = data['purchaseDataList']\n      ? data['purchaseDataList'].map(\n          pd => new PurchaseData(pd['data'], pd['signature'])\n        )\n      : [\n          // TODO(dvoytenko): cleanup/deprecate.\n          new PurchaseData(\n            data['purchaseData']['data'],\n            data['purchaseData']['signature']\n          ),\n        ];\n\n    // For now, we'll use the `PayCompleteFlow` as a \"creating account\" flow.\n    // But this can be eventually implemented by the same iframe.\n    const creatingFlow = new PayCompleteFlow(this.deps_);\n    const completeHandler = creatingFlow.complete.bind(creatingFlow);\n\n    const response = new DeferredAccountCreationResponse(\n      entitlements,\n      userData,\n      purchaseDataList,\n      completeHandler\n    );\n\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.ACTION_NEW_DEFERRED_ACCOUNT, true);\n\n    // Start the \"sync\" flow.\n    creatingFlow.start(\n      new SubscribeResponse(\n        '', // raw field doesn't matter in this case\n        purchaseDataList[0],\n        userData,\n        entitlements,\n        productType,\n        () => Promise.resolve() // completeHandler doesn't matter in this case\n      )\n    );\n    return response;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @interface */\nexport class DepsDef {\n  /**\n   * @return {!../model/doc.Doc}\n   */\n  doc() {}\n\n  /**\n   * @return {!Window}\n   */\n  win() {}\n\n  /**\n   * @return {!../api/subscriptions.Config}\n   */\n  config() {}\n\n  /**\n   * @return {!../model/page-config.PageConfig}\n   */\n  pageConfig() {}\n\n  /**\n   * @return {!../components/activities.ActivityPorts}\n   */\n  activities() {}\n\n  /**\n   * @return {!./pay-client.PayClient}\n   */\n  payClient() {}\n\n  /**\n   * @return {!../components/dialog-manager.DialogManager}\n   */\n  dialogManager() {}\n\n  /**\n   * @return {!./entitlements-manager.EntitlementsManager}\n   */\n  entitlementsManager() {}\n\n  /**\n   * @return {!./callbacks.Callbacks}\n   */\n  callbacks() {}\n\n  /**\n   * @return {!../runtime/storage.Storage}\n   */\n  storage() {}\n\n  /**\n   * @return {!../runtime/analytics-service.AnalyticsService}\n   */\n  analytics() {}\n\n  /**\n   * @return {!../runtime/jserror.JsError}\n   */\n  jserror() {}\n\n  /**\n   * @return {!../runtime/client-event-manager.ClientEventManager}\n   */\n  eventManager() {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlement, Entitlements} from '../api/entitlements';\nimport {JwtHelper} from '../utils/jwt';\nimport {Toast} from '../ui/toast';\nimport {serviceUrl} from './services';\nimport {feArgs, feUrl} from '../runtime/services';\n\nconst SERVICE_ID = 'subscribe.google.com';\nconst TOAST_STORAGE_KEY = 'toast';\nconst ENTS_STORAGE_KEY = 'ents';\nconst IS_READY_TO_PAY_STORAGE_KEY = 'isreadytopay';\n\n/**\n */\nexport class EntitlementsManager {\n  /**\n   * @param {!Window} win\n   * @param {!../model/page-config.PageConfig} pageConfig\n   * @param {!./fetcher.Fetcher} fetcher\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(win, pageConfig, fetcher, deps) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = pageConfig;\n\n    /** @private @const {string} */\n    this.publicationId_ = this.pageConfig_.getPublicationId();\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!JwtHelper} */\n    this.jwtHelper_ = new JwtHelper();\n\n    /** @private {?Promise<!Entitlements>} */\n    this.responsePromise_ = null;\n\n    /** @private {number} */\n    this.positiveRetries_ = 0;\n\n    /** @private {boolean} */\n    this.blockNextNotification_ = false;\n\n    /** @private @const {!./storage.Storage} */\n    this.storage_ = deps.storage();\n\n    /** @private @const {!../runtime/analytics-service.AnalyticsService} */\n    this.analyticsService_ = deps.analytics();\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = deps.config();\n  }\n\n  /**\n   * @param {boolean=} opt_expectPositive\n   */\n  reset(opt_expectPositive) {\n    this.responsePromise_ = null;\n    this.positiveRetries_ = Math.max(\n      this.positiveRetries_,\n      opt_expectPositive ? 3 : 0\n    );\n    if (opt_expectPositive) {\n      this.storage_.remove(ENTS_STORAGE_KEY);\n      this.storage_.remove(IS_READY_TO_PAY_STORAGE_KEY);\n    }\n  }\n\n  /**\n   * Clears all of the entitlements state and cache.\n   */\n  clear() {\n    this.responsePromise_ = null;\n    this.positiveRetries_ = 0;\n    this.unblockNextNotification();\n    this.storage_.remove(ENTS_STORAGE_KEY);\n    this.storage_.remove(TOAST_STORAGE_KEY);\n    this.storage_.remove(IS_READY_TO_PAY_STORAGE_KEY);\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  getQueryString_() {\n    return this.win_.location.search;\n  }\n\n  /**\n   * @param {?string=} opt_encryptedDocumentKey\n   * @return {!Promise<!Entitlements>}\n   */\n  getEntitlements(opt_encryptedDocumentKey) {\n    if (!this.responsePromise_) {\n      this.responsePromise_ = this.getEntitlementsFlow_(\n        opt_encryptedDocumentKey\n      );\n    }\n    return this.responsePromise_.then(response => {\n      if (response.isReadyToPay != null) {\n        this.analyticsService_.setReadyToPay(response.isReadyToPay);\n      }\n      return response;\n    });\n  }\n\n  /**\n   * @param {string} raw\n   * @param {boolean=} opt_isReadyToPay\n   * @return {boolean}\n   */\n  pushNextEntitlements(raw, opt_isReadyToPay) {\n    const entitlements = this.getValidJwtEntitlements_(\n      raw,\n      /* requireNonExpired */ true,\n      opt_isReadyToPay\n    );\n    if (entitlements && entitlements.enablesThis()) {\n      this.storage_.set(ENTS_STORAGE_KEY, raw);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {?string=} opt_encryptedDocumentKey\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  getEntitlementsFlow_(opt_encryptedDocumentKey) {\n    return this.fetchEntitlementsWithCaching_(opt_encryptedDocumentKey).then(\n      entitlements => {\n        this.onEntitlementsFetched_(entitlements);\n        return entitlements;\n      }\n    );\n  }\n\n  /**\n   * @param {?string=} opt_encryptedDocumentKey\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetchEntitlementsWithCaching_(opt_encryptedDocumentKey) {\n    return Promise.all([\n      this.storage_.get(ENTS_STORAGE_KEY),\n      this.storage_.get(IS_READY_TO_PAY_STORAGE_KEY),\n    ]).then(cachedValues => {\n      const raw = cachedValues[0];\n      const irtp = cachedValues[1];\n      // Try cache first.\n      if (raw && !opt_encryptedDocumentKey) {\n        const cached = this.getValidJwtEntitlements_(\n          raw,\n          /* requireNonExpired */ true,\n          irtpStringToBoolean(irtp)\n        );\n        if (cached && cached.enablesThis()) {\n          // Already have a positive response.\n          this.positiveRetries_ = 0;\n          return cached;\n        }\n      }\n      // If cache didn't match, perform fetch.\n      return this.fetchEntitlements_(opt_encryptedDocumentKey).then(ents => {\n        // If entitlements match the product, store them in cache.\n        if (ents && ents.enablesThis() && ents.raw) {\n          this.storage_.set(ENTS_STORAGE_KEY, ents.raw);\n        }\n        return ents;\n      });\n    });\n  }\n\n  /**\n   * @param {?string=} opt_encryptedDocumentKey\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetchEntitlements_(opt_encryptedDocumentKey) {\n    // TODO(dvoytenko): Replace retries with consistent fetch.\n    let positiveRetries = this.positiveRetries_;\n    this.positiveRetries_ = 0;\n    const attempt = () => {\n      positiveRetries--;\n      return this.fetch_(opt_encryptedDocumentKey).then(entitlements => {\n        if (entitlements.enablesThis() || positiveRetries <= 0) {\n          return entitlements;\n        }\n        return new Promise(resolve => {\n          this.win_.setTimeout(() => {\n            resolve(attempt());\n          }, 550);\n        });\n      });\n    };\n    return attempt();\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setToastShown(value) {\n    this.storage_.set(TOAST_STORAGE_KEY, value ? '1' : '0');\n  }\n\n  /**\n   */\n  blockNextNotification() {\n    this.blockNextNotification_ = true;\n  }\n\n  /**\n   */\n  unblockNextNotification() {\n    this.blockNextNotification_ = false;\n  }\n\n  /**\n   * The JSON must either contain a \"signedEntitlements\" with JWT, or\n   * \"entitlements\" field with plain JSON object.\n   * @param {!Object} json\n   * @return {!Entitlements}\n   */\n  parseEntitlements(json) {\n    const isReadyToPay = json['isReadyToPay'];\n    if (isReadyToPay == null) {\n      this.storage_.remove(IS_READY_TO_PAY_STORAGE_KEY);\n    } else {\n      this.storage_.set(IS_READY_TO_PAY_STORAGE_KEY, String(isReadyToPay));\n    }\n    const signedData = json['signedEntitlements'];\n    if (signedData) {\n      const entitlements = this.getValidJwtEntitlements_(\n        signedData,\n        /* requireNonExpired */ false,\n        isReadyToPay\n      );\n      if (entitlements) {\n        return entitlements;\n      }\n    } else {\n      const plainEntitlements = json['entitlements'];\n      if (plainEntitlements) {\n        return this.createEntitlements_('', plainEntitlements, isReadyToPay);\n      }\n    }\n    // Empty response.\n    return this.createEntitlements_('', [], isReadyToPay);\n  }\n\n  /**\n   * @param {string} raw\n   * @param {boolean} requireNonExpired\n   * @param {boolean=} opt_isReadyToPay\n   * @param {?string=} opt_decryptedDocumentKey\n   * @return {?Entitlements}\n   * @private\n   */\n  getValidJwtEntitlements_(\n    raw,\n    requireNonExpired,\n    opt_isReadyToPay,\n    opt_decryptedDocumentKey\n  ) {\n    try {\n      const jwt = this.jwtHelper_.decode(raw);\n      if (requireNonExpired) {\n        const now = Date.now();\n        const exp = jwt['exp'];\n        if (parseFloat(exp) * 1000 < now) {\n          return null;\n        }\n      }\n      const entitlementsClaim = jwt['entitlements'];\n      return (\n        (entitlementsClaim &&\n          this.createEntitlements_(\n            raw,\n            entitlementsClaim,\n            opt_isReadyToPay,\n            opt_decryptedDocumentKey\n          )) ||\n        null\n      );\n    } catch (e) {\n      // Ignore the error.\n      this.win_.setTimeout(() => {\n        throw e;\n      });\n    }\n    return null;\n  }\n\n  /**\n   * @param {string} raw\n   * @param {!Object|!Array<!Object>} json\n   * @param {boolean=} opt_isReadyToPay\n   * @param {?string=} opt_decryptedDocumentKey\n   * @return {!Entitlements}\n   * @private\n   */\n  createEntitlements_(raw, json, opt_isReadyToPay, opt_decryptedDocumentKey) {\n    return new Entitlements(\n      SERVICE_ID,\n      raw,\n      Entitlement.parseListFromJson(json),\n      this.pageConfig_.getProductId(),\n      this.ack_.bind(this),\n      opt_isReadyToPay,\n      opt_decryptedDocumentKey\n    );\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @private\n   */\n  onEntitlementsFetched_(entitlements) {\n    // Skip any notifications and toast if other flows are ongoing.\n    // TODO(dvoytenko): what's the right action when pay flow was canceled?\n    const blockNotification = this.blockNextNotification_;\n    this.blockNextNotification_ = false;\n    if (blockNotification) {\n      return;\n    }\n\n    // Notify on the received entitlements.\n    this.deps_\n      .callbacks()\n      .triggerEntitlementsResponse(Promise.resolve(entitlements));\n\n    // Show a toast if needed.\n    this.maybeShowToast_(entitlements);\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @return {!Promise}\n   * @private\n   */\n  maybeShowToast_(entitlements) {\n    const entitlement = entitlements.getEntitlementForThis();\n    if (!entitlement) {\n      return Promise.resolve();\n    }\n    // Check if storage bit is set. It's only set by the `Entitlements.ack`\n    // method.\n    return this.storage_.get(TOAST_STORAGE_KEY).then(value => {\n      if (value == '1') {\n        // Already shown;\n        return;\n      }\n      if (entitlement) {\n        this.showToast_(entitlement);\n      }\n    });\n  }\n\n  /**\n   * @param {!Entitlement} entitlement\n   * @private\n   */\n  showToast_(entitlement) {\n    const source = entitlement.source || 'google';\n    return new Toast(\n      this.deps_,\n      feUrl('/toastiframe'),\n      feArgs({\n        'publicationId': this.publicationId_,\n        'source': source,\n      })\n    ).open();\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @private\n   */\n  ack_(entitlements) {\n    if (entitlements.getEntitlementForThis()) {\n      this.setToastShown(true);\n    }\n  }\n\n  /**\n   * @param {?string=} opt_encryptedDocumentKey\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetch_(opt_encryptedDocumentKey) {\n    let url =\n      '/publication/' +\n      encodeURIComponent(this.publicationId_) +\n      '/entitlements';\n    if (opt_encryptedDocumentKey) {\n      //TODO(chenshay): Make this a 'Post'.\n      url += '?crypt=' + encodeURIComponent(opt_encryptedDocumentKey);\n    }\n    return this.fetcher_\n      .fetchCredentialedJson(serviceUrl(url))\n      .then(json => this.parseEntitlements(json));\n  }\n}\n\n/**\n * Convert String value of isReadyToPay\n * (from JSON or Cache) to a boolean value.\n * @param {string} value\n * @return {boolean|undefined}\n * @private\n */\nfunction irtpStringToBoolean(value) {\n  switch (value) {\n    case 'true':\n      return true;\n    case 'false':\n      return false;\n    default:\n      return undefined;\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Event} from '../api/logger-api';\nimport {AnalyticsEvent} from '../proto/api_messages';\n\n/** @const {!Object<string,AnalyticsEvent>} */\nconst PublisherEventToAnalyticsEvent = {\n  [Event.IMPRESSION_PAYWALL]: AnalyticsEvent.IMPRESSION_PAYWALL,\n  [Event.IMPRESSION_AD]: AnalyticsEvent.IMPRESSION_AD,\n  [Event.IMPRESSION_OFFERS]: AnalyticsEvent.IMPRESSION_OFFERS,\n  [Event.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:\n    AnalyticsEvent.ACTION_SUBSCRIPTIONS_LANDING_PAGE,\n  [Event.ACTION_OFFER_SELECTED]: AnalyticsEvent.ACTION_OFFER_SELECTED,\n  [Event.ACTION_PAYMENT_FLOW_STARTED]:\n    AnalyticsEvent.ACTION_PAYMENT_FLOW_STARTED,\n  [Event.ACTION_PAYMENT_COMPLETED]: AnalyticsEvent.ACTION_PAYMENT_COMPLETE,\n  [Event.EVENT_CUSTOM]: AnalyticsEvent.EVENT_CUSTOM,\n};\n\n/** @const {!Object<number,?Event>} */\nconst AnalyticsEventToPublisherEvent = {\n  [AnalyticsEvent.UNKNOWN]: null,\n  [AnalyticsEvent.IMPRESSION_PAYWALL]: Event.IMPRESSION_PAYWALL,\n  [AnalyticsEvent.IMPRESSION_AD]: Event.IMPRESSION_AD,\n  [AnalyticsEvent.IMPRESSION_OFFERS]: Event.IMPRESSION_OFFERS,\n  [AnalyticsEvent.IMPRESSION_SUBSCRIBE_BUTTON]: null,\n  [AnalyticsEvent.IMPRESSION_SMARTBOX]: null,\n  [AnalyticsEvent.ACTION_SUBSCRIBE]: null,\n  [AnalyticsEvent.ACTION_PAYMENT_COMPLETE]: Event.ACTION_PAYMENT_COMPLETED,\n  [AnalyticsEvent.ACTION_ACCOUNT_CREATED]: null,\n  [AnalyticsEvent.ACTION_ACCOUNT_ACKNOWLEDGED]: null,\n  [AnalyticsEvent.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:\n    Event.ACTION_SUBSCRIPTIONS_LANDING_PAGE,\n  [AnalyticsEvent.ACTION_PAYMENT_FLOW_STARTED]:\n    Event.ACTION_PAYMENT_FLOW_STARTED,\n  [AnalyticsEvent.ACTION_OFFER_SELECTED]: Event.ACTION_OFFER_SELECTED,\n  [AnalyticsEvent.EVENT_PAYMENT_FAILED]: null,\n  [AnalyticsEvent.EVENT_CUSTOM]: Event.EVENT_CUSTOM,\n};\n\n/**\n * Converts a propensity event enum into an analytics event enum.\n * @param {!Event|string} propensityEvent\n * @returns {!AnalyticsEvent}\n */\nexport function publisherEventToAnalyticsEvent(propensityEvent) {\n  return PublisherEventToAnalyticsEvent[propensityEvent];\n}\n\n/**\n * Converts an analytics event enum into a propensity event enum.\n * @param {!AnalyticsEvent} analyticsEvent\n * @returns {?Event}\n */\nexport function analyticsEventToPublisherEvent(analyticsEvent) {\n  return AnalyticsEventToPublisherEvent[analyticsEvent];\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @enum {string}\n */\nexport const ExperimentFlags = {\n  /**\n   * Enables GPay API in SwG.\n   * Cleanup issue: #406.\n   */\n  GPAY_API: 'gpay-api',\n\n  /**\n   * Enables GPay native support.\n   * Cleanup issue: #441.\n   */\n  GPAY_NATIVE: 'gpay-native',\n\n  /**\n   * Enables the feature that allows you to replace one subscription\n   * for another in the subscribe() API.\n   */\n  REPLACE_SUBSCRIPTION: 'replace-subscription',\n\n  /**\n   * Enables the contributions feature.\n   */\n  CONTRIBUTIONS: 'contributions',\n\n  /**\n   * Enables the Propensity feature\n   */\n  PROPENSITY: 'propensity',\n\n  /**\n   * Enables the Smartbox feature.\n   */\n  SMARTBOX: 'smartbox',\n\n  /**\n   * Enables using new Activities APIs\n   */\n  HEJIRA: 'hejira',\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ErrorUtils} from '../utils/errors';\nimport {parseQueryString} from '../utils/url';\n\n/**\n * @fileoverview\n *\n * Client-side experiments in SwG.\n *\n * The experiments can be set in a few different ways:\n *  1. By gulp build rules using `--experiments=${experimentsString}` argument.\n *  2. By `#swg.experiments=${experimentsString}` parameter in the URL's\n *     fragment.\n *  3. By `swg.configure({experiments: [array]})` call.\n *\n * The `${experimentsString}` is defined as following:\n *  - experimentString = (experimentSpec,)*\n *  - experimentSpec = experimentId | experimentId '=' num100 ('c')?\n *\n * Some examples:\n *  - `A,B` - defines two experiments \"A\" and \"B\" that will be turned on.\n *  - `A:100,B:100` - the same: \"A\" and \"B\" will be turned on.\n *  - `A:0` - the experiment \"A\" will be disabled.\n *  - `A:1` - enable the experiment \"A\" in 1% of impressions.\n *  - `A:10c` - enable the experiment \"A\" in 10% of impressions with 10%\n *    control. In this case, 20% of the impressions will be split into two\n *    categories: experiment and control. Notice, a control can be requested\n *    only for the fraction under 20%.\n */\n\n/**\n * @enum {string}\n */\nconst Selection = {\n  EXPERIMENT: 'e',\n  CONTROL: 'c',\n};\n\n/**\n * A comma-separated set of experiments.\n * @type {string}\n */\nlet experimentsString = '$experiments$';\n\n/**\n * A parsed map of experiments.\n * @type {?Object<string, boolean>}\n */\nlet experimentMap = null;\n\n/**\n * @param {string} s\n * @package Visible for testing only.\n */\nexport function setExperimentsStringForTesting(s) {\n  experimentsString = s;\n  experimentMap = null;\n}\n\n/**\n * Ensures that the experiments have been initialized and returns them.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperiments(win) {\n  if (!experimentMap) {\n    experimentMap = {};\n    let combinedExperimentString = experimentsString;\n    try {\n      const query = parseQueryString(win.location.hash);\n      const experimentStringFromHash = query['swg.experiments'];\n      if (experimentStringFromHash) {\n        combinedExperimentString += ',' + experimentStringFromHash;\n      }\n    } catch (e) {\n      // Ignore: experiment parsing cannot block runtime.\n      ErrorUtils.throwAsync(e);\n    }\n\n    // Format:\n    // - experimentString = (experimentSpec,)*\n    combinedExperimentString.split(',').forEach(s => {\n      s = s.trim();\n      if (!s) {\n        return;\n      }\n      try {\n        parseSetExperiment(win, experimentMap, s);\n      } catch (e) {\n        // Ignore: experiment parsing cannot block runtime.\n        ErrorUtils.throwAsync(e);\n      }\n    });\n  }\n  return experimentMap;\n}\n\n/**\n * @param {!Window} win\n * @param {?Object<string, boolean>} experimentMap\n * @param {string} spec\n */\nfunction parseSetExperiment(win, experimentMap, spec) {\n  // Format:\n  // - experimentSpec = experimentId | experimentId '=' num100 ('c')?\n  let experimentId;\n  let fraction;\n  let control = false;\n  const eq = spec.indexOf(':');\n  if (eq == -1) {\n    experimentId = spec;\n    fraction = 100;\n    control = false;\n  } else {\n    experimentId = spec.substring(0, eq).trim();\n    spec = spec.substring(eq + 1);\n    if (spec.substring(spec.length - 1) == Selection.CONTROL) {\n      control = true;\n      spec = spec.substring(0, spec.length - 1);\n    }\n    fraction = parseInt(spec, 10);\n  }\n  if (isNaN(fraction)) {\n    throw new Error('invalid fraction');\n  }\n\n  // Calculate \"on\"/\"off\".\n  let on;\n  if (fraction > 99) {\n    // Explicitly \"on\".\n    on = true;\n  } else if (fraction < 1) {\n    // Explicitly \"off\".\n    on = false;\n  } else if (win.sessionStorage) {\n    // Fractional and possibly with the control.\n    // Note that:\n    // a. We can't do persistent experiments if storage is not available.\n    // b. We can't run control on more than 20%.\n    control = control && fraction <= 20;\n    try {\n      // Set fraction in the experiment to make it unlaunchable.\n      const storageKey =\n        'subscribe.google.com:e:' +\n        experimentId +\n        ':' +\n        fraction +\n        (control ? 'c' : '');\n      let selection = parseSelection(win.sessionStorage.getItem(storageKey));\n      if (!selection) {\n        // Is experiment/control range?\n        if (win.Math.random() * 100 <= fraction * (control ? 2 : 1)) {\n          const inExperiment = control ? win.Math.random() <= 0.5 : true;\n          selection = inExperiment ? Selection.EXPERIMENT : Selection.CONTROL;\n          win.sessionStorage.setItem(storageKey, selection);\n        }\n      }\n      on = !!selection;\n      if (selection == Selection.CONTROL) {\n        experimentId = 'c-' + experimentId;\n      }\n    } catch (e) {\n      // Ignore: experiment parsing cannot block runtime.\n      on = false;\n      ErrorUtils.throwAsync(e);\n    }\n  } else {\n    on = false;\n  }\n\n  experimentMap[experimentId] = on;\n}\n\n/**\n * @param {?string} s\n * @return {?Selection}\n */\nfunction parseSelection(s) {\n  // Do a simple if-then to inline the whole Selection enum.\n  return s == Selection.EXPERIMENT\n    ? Selection.EXPERIMENT\n    : s == Selection.CONTROL\n    ? Selection.CONTROL\n    : null;\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  return getExperiments(win)[experimentId] || false;\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean} on\n */\nexport function setExperiment(win, experimentId, on) {\n  getExperiments(win)[experimentId] = on;\n}\n\n/**\n * @return {!Array<string>}\n */\nexport function getOnExperiments(win) {\n  const experimentMap = getExperiments(win);\n  const experiments = [];\n  for (const experiment in experimentMap) {\n    if (experimentMap[experiment]) {\n      experiments.push(experiment);\n    }\n  }\n  return experiments;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Xhr} from '../utils/xhr';\n\n/**\n * @interface\n */\nexport class Fetcher {\n  /**\n   * @param {string} unusedUrl\n   * @return {!Promise<!Object>}\n   */\n  fetchCredentialedJson(unusedUrl) {}\n\n  /**\n   * @param {string} unusedUrl\n   * @param {!../utils/xhr.FetchInitDef} unusedInit\n   * @return {!Promise<!../utils/xhr.FetchResponse>}\n   */\n  fetch(unusedUrl, unusedInit) {}\n}\n\n/**\n * @implements {Fetcher}\n */\nexport class XhrFetcher {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Xhr} */\n    this.xhr_ = new Xhr(win);\n  }\n\n  /** @override */\n  fetchCredentialedJson(url) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      headers: {'Accept': 'text/plain, application/json'},\n      credentials: 'include',\n    });\n    return this.xhr_.fetch(url, init).then(response => response.json());\n  }\n\n  /** @override */\n  fetch(url, init) {\n    return this.xhr_.fetch(url, init);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n */\nexport class JsError {\n  /**\n   * @param {!../model/doc.Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Promise} */\n    this.microTask_ = Promise.resolve();\n  }\n\n  /**\n   * @param {...*} var_args\n   * @return {!Promise}\n   */\n  error(var_args) {\n    const args = Array.prototype.slice.call(arguments, 0);\n    return this.microTask_.then(() => {\n      const error = createErrorVargs.apply(null, args);\n      if (error.reported) {\n        return;\n      }\n      const img = this.doc_.getWin().document.createElement('img');\n      img.src =\n        '$frontend$/_/SubscribewithgoogleClientUi/jserror' +\n        '?error=' +\n        encodeURIComponent(String(error)) +\n        '&script=' +\n        encodeURIComponent('$frontend$/swg/js/v1/swg.js') +\n        '&line=' +\n        (error.lineNumber || 1) +\n        '&trace=' +\n        encodeURIComponent(error.stack);\n      // Appending this image to DOM is not necessary.\n      error.reported = true;\n    });\n  }\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n */\nfunction createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error}\n */\nfunction duplicateErrorIfNecessary(error) {\n  const messageProperty = Object.getOwnPropertyDescriptor(error, 'message');\n  if (messageProperty && messageProperty.writable) {\n    return error;\n  }\n\n  const {message, stack} = error;\n  const e = new Error(message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = stack;\n  return e;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {SubscriptionFlows, WindowOpenMode} from '../api/subscriptions';\nimport {acceptPortResultData} from '../utils/activity-utils';\nimport {feArgs, feOrigin, feUrl} from './services';\nimport {isCancelError, createCancelError} from '../utils/errors';\nimport {LinkingInfoResponse, LinkSaveTokenRequest} from '../proto/api_messages';\n\nconst LINK_REQUEST_ID = 'swg-link';\n\n/**\n * The flow to initiate linkback flow.\n */\nexport class LinkbackFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = deps.pageConfig();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n  }\n\n  /**\n   * Starts the Link account flow.\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.LINK_ACCOUNT);\n    const forceRedirect =\n      this.deps_.config().windowOpenMode == WindowOpenMode.REDIRECT;\n    const opener = this.activityPorts_.open(\n      LINK_REQUEST_ID,\n      feUrl('/linkbackstart'),\n      forceRedirect ? '_top' : '_blank',\n      feArgs({\n        'publicationId': this.pageConfig_.getPublicationId(),\n      }),\n      {}\n    );\n    this.dialogManager_.popupOpened(opener && opener.targetWin);\n    return Promise.resolve();\n  }\n}\n\n/**\n * The class for Link accounts flow.\n */\nexport class LinkCompleteFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  static configurePending(deps) {\n    /**\n     * Handler function.\n     * @param {!../components/activities.ActivityPortDef} port\n     */\n    function handler(port) {\n      deps.entitlementsManager().blockNextNotification();\n      deps.callbacks().triggerLinkProgress();\n      deps.dialogManager().popupClosed();\n      const promise = acceptPortResultData(\n        port,\n        feOrigin(),\n        /* requireOriginVerified */ false,\n        /* requireSecureChannel */ false\n      );\n      return promise.then(\n        response => {\n          const flow = new LinkCompleteFlow(deps, response);\n          flow.start();\n        },\n        reason => {\n          if (isCancelError(reason)) {\n            deps\n              .callbacks()\n              .triggerFlowCanceled(SubscriptionFlows.LINK_ACCOUNT);\n          }\n        }\n      );\n    }\n    deps.activities().onResult(LINK_REQUEST_ID, handler);\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?Object} response\n   */\n  constructor(deps, response) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!./entitlements-manager.EntitlementsManager} */\n    this.entitlementsManager_ = deps.entitlementsManager();\n\n    /** @private @const {!./callbacks.Callbacks} */\n    this.callbacks_ = deps.callbacks();\n\n    const index = (response && response['index']) || '0';\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/linkconfirmiframe', '/u/' + index),\n      feArgs({\n        'productId': deps.pageConfig().getProductId(),\n        'publicationId': deps.pageConfig().getPublicationId(),\n      }),\n      /* shouldFadeBody */ true\n    );\n\n    /** @private {?function()} */\n    this.completeResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.completePromise_ = new Promise(resolve => {\n      this.completeResolver_ = resolve;\n    });\n  }\n\n  /**\n   * Starts the Link account flow.\n   * @return {!Promise}\n   */\n  start() {\n    const promise = this.activityIframeView_.acceptResultAndVerify(\n      feOrigin(),\n      /* requireOriginVerified */ true,\n      /* requireSecureChannel */ true\n    );\n    promise\n      .then(response => {\n        this.complete_(response);\n      })\n      .catch(reason => {\n        // Rethrow async.\n        setTimeout(() => {\n          throw reason;\n        });\n      })\n      .then(() => {\n        // The flow is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n      });\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {?Object} response\n   * @private\n   */\n  complete_(response) {\n    this.callbacks_.triggerLinkComplete();\n    this.callbacks_.resetLinkProgress();\n    this.entitlementsManager_.setToastShown(true);\n    this.entitlementsManager_.unblockNextNotification();\n    this.entitlementsManager_.reset((response && response['success']) || false);\n    if (response && response['entitlements']) {\n      this.entitlementsManager_.pushNextEntitlements(response['entitlements']);\n    }\n    this.completeResolver_();\n  }\n\n  /** @return {!Promise} */\n  whenComplete() {\n    return this.completePromise_;\n  }\n}\n\n/**\n * The flow to save subscription information.\n */\nexport class LinkSaveFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.SaveSubscriptionRequestCallback} callback\n   */\n  constructor(deps, callback) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {!../api/subscriptions.SaveSubscriptionRequestCallback} */\n    this.callback_ = callback;\n\n    /** @private {?Promise<!../api/subscriptions.SaveSubscriptionRequest>} */\n    this.requestPromise_ = null;\n\n    /** @private {?Promise} */\n    this.openPromise_ = null;\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n  }\n\n  /**\n   * @return {?Promise<!../api/subscriptions.SaveSubscriptionRequest>}\n   * @package Visible for testing.\n   */\n  getRequestPromise() {\n    return this.requestPromise_;\n  }\n\n  /**\n   * @private\n   */\n  complete_() {\n    this.dialogManager_.completeView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {!Object} result\n   * @return {!Promise<boolean>}\n   * @private\n   */\n  handleLinkSaveResponse_(result) {\n    // This flow is complete\n    this.complete_();\n    let startPromise;\n    let linkConfirm = null;\n    if (result['linked']) {\n      // When linking succeeds, start link confirmation flow\n      this.dialogManager_.popupClosed();\n      this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.LINK_ACCOUNT);\n      linkConfirm = new LinkCompleteFlow(this.deps_, result);\n      startPromise = linkConfirm.start();\n    } else {\n      startPromise = Promise.reject(createCancelError(this.win_, 'not linked'));\n    }\n    const completePromise = startPromise.then(() => {\n      this.deps_.callbacks().triggerLinkProgress();\n      return linkConfirm.whenComplete();\n    });\n\n    return completePromise.then(() => {\n      return true;\n    });\n  }\n\n  /**\n   * @param {LinkingInfoResponse} response\n   * @private\n   */\n  sendLinkSaveToken_(response) {\n    if (!response || !response.getRequested()) {\n      return;\n    }\n    this.requestPromise_ = new Promise(resolve => {\n      resolve(this.callback_());\n    })\n      .then(request => {\n        const saveRequest = new LinkSaveTokenRequest();\n        if (request && request.token) {\n          if (request.authCode) {\n            throw new Error('Both authCode and token are available');\n          } else {\n            saveRequest.setToken(request.token);\n          }\n        } else if (request && request.authCode) {\n          saveRequest.setAuthCode(request.authCode);\n        } else {\n          throw new Error('Neither token or authCode is available');\n        }\n        this.activityIframeView_.execute(saveRequest);\n      })\n      .catch(reason => {\n        // The flow is complete.\n        this.complete_();\n        throw reason;\n      });\n  }\n\n  /**\n   * @return {?Promise}\n   */\n  /**\n   * Starts the save subscription\n   * @return {!Promise}\n   */\n  start() {\n    const iframeArgs = {\n      'publicationId': this.deps_.pageConfig().getPublicationId(),\n      'isClosable': true,\n    };\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/linksaveiframe'),\n      feArgs(iframeArgs),\n      /* shouldFadeBody */ false,\n      /* hasLoadingIndicator */ true\n    );\n    this.activityIframeView_.on(\n      LinkingInfoResponse,\n      this.sendLinkSaveToken_.bind(this)\n    );\n\n    this.openPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_,\n      /* hidden */ true\n    );\n    /** {!Promise<boolean>} */\n    return this.activityIframeView_\n      .acceptResultAndVerify(\n        feOrigin(),\n        /* requireOriginVerified */ true,\n        /* requireSecureChannel */ true\n      )\n      .then(result => {\n        return this.handleLinkSaveResponse_(result);\n      })\n      .catch(reason => {\n        // In case this flow wasn't complete, complete it here\n        this.complete_();\n        // Handle cancellation from user, link confirm start or completion here\n        if (isCancelError(reason)) {\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(SubscriptionFlows.LINK_ACCOUNT);\n          return false;\n        }\n        throw reason;\n      });\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Event, SubscriptionState} from '../api/logger-api';\nimport {isObject, isEnumValue, isBoolean} from '../utils/types';\nimport {AnalyticsEvent, EventOriginator} from '../proto/api_messages';\nimport {publisherEventToAnalyticsEvent} from './event-type-mapping';\n\n/**\n * @implements {../api/logger-api.LoggerApi}\n */\nexport class Logger {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!../api/client-event-manager-api.ClientEventManagerApi} */\n    this.eventManager_ = deps.eventManager();\n  }\n\n  /** @override */\n  sendSubscriptionState(state, jsonProducts) {\n    if (!isEnumValue(SubscriptionState, state)) {\n      throw new Error('Invalid subscription state provided');\n    }\n    if (\n      (SubscriptionState.SUBSCRIBER == state ||\n        SubscriptionState.PAST_SUBSCRIBER == state) &&\n      !jsonProducts\n    ) {\n      throw new Error(\n        'Entitlements must be provided for users with' +\n          ' active or expired subscriptions'\n      );\n    }\n    if (jsonProducts && !isObject(jsonProducts)) {\n      throw new Error('Entitlements must be an Object');\n    }\n    let productsOrSkus = null;\n    if (jsonProducts) {\n      productsOrSkus = JSON.stringify(jsonProducts);\n    }\n    this.eventManager_.logEvent({\n      eventType: AnalyticsEvent.EVENT_SUBSCRIPTION_STATE,\n      eventOriginator: EventOriginator.PUBLISHER_CLIENT,\n      isFromUserAction: null,\n      additionalParameters: {\n        state,\n        productsOrSkus,\n      },\n    });\n  }\n\n  /** @override */\n  sendEvent(userEvent) {\n    let data = null;\n    if (\n      !isEnumValue(Event, userEvent.name) ||\n      !publisherEventToAnalyticsEvent(userEvent.name)\n    ) {\n      throw new Error('Invalid user event provided(' + userEvent.name + ')');\n    }\n\n    if (userEvent.data) {\n      if (!isObject(userEvent.data)) {\n        throw new Error('Event data must be an Object(' + userEvent.data + ')');\n      } else {\n        data = {};\n        Object.assign(data, userEvent.data);\n      }\n    }\n\n    if (isBoolean(userEvent.active)) {\n      if (!data) {\n        data = {};\n      }\n      Object.assign(data, {'is_active': userEvent.active});\n    } else if (userEvent.active != null) {\n      throw new Error('Event active must be a boolean');\n    }\n    this.eventManager_.logEvent({\n      eventType: publisherEventToAnalyticsEvent(userEvent.name),\n      eventOriginator: EventOriginator.PUBLISHER_CLIENT,\n      isFromUserAction: userEvent.active,\n      additionalParameters: data,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {feArgs, feUrl} from './services';\n\nexport class LoginNotificationApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/loginiframe'),\n      feArgs({\n        publicationId: deps.pageConfig().getPublicationId(),\n        productId: deps.pageConfig().getProductId(),\n        // No need to ask the user. Just tell them you're logging them in.\n        userConsent: false,\n        // TODO(chenshay): Pass entitlements value here.\n      }),\n      /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Continues the Login flow (after waiting).\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_LOGIN_NOTIFICATION);\n\n    this.openViewPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_\n    );\n\n    return this.activityIframeView_.acceptResult().then(\n      () => {\n        // The consent part is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n      },\n      reason => {\n        this.dialogManager_.completeView(this.activityIframeView_);\n        throw reason;\n      }\n    );\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {feArgs, feUrl} from './services';\nimport {isCancelError} from '../utils/errors';\n\nexport class LoginPromptApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/loginiframe'),\n      feArgs({\n        publicationId: deps.pageConfig().getPublicationId(),\n        productId: deps.pageConfig().getProductId(),\n        // First ask the user if they want us to log them in.\n        userConsent: true,\n        // TODO(chenshay): Pass entitlements value here.\n      }),\n      /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Prompts the user to login.\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_LOGIN_PROMPT);\n\n    this.openViewPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_\n    );\n\n    return this.activityIframeView_.acceptResult().then(\n      () => {\n        // The consent part is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n      },\n      reason => {\n        if (isCancelError(reason)) {\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(SubscriptionFlows.SHOW_LOGIN_PROMPT);\n        } else {\n          this.dialogManager_.completeView(this.activityIframeView_);\n        }\n        throw reason;\n      }\n    );\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {serviceUrl} from './services';\n\nexport class OffersApi {\n  /**\n   * @param {!../model/page-config.PageConfig} config\n   * @param {!./fetcher.Fetcher} fetcher\n   */\n  constructor(config, fetcher) {\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.config_ = config;\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n  }\n\n  /**\n   * @param {string=} opt_productId\n   * @return {!Promise<!Array<!../api/offer.Offer>>}\n   */\n  getOffers(opt_productId) {\n    const productId = opt_productId || this.config_.getProductId();\n    if (!productId) {\n      throw new Error('getOffers requires productId in config or arguments');\n    }\n    return this.fetch_(productId);\n  }\n\n  /**\n   * @param {string} productId\n   * @return {!Promise<!Array<!../api/offer.Offer>>}\n   * @private\n   */\n  fetch_(productId) {\n    const url = serviceUrl(\n      '/publication/' +\n        encodeURIComponent(this.config_.getPublicationId()) +\n        '/offers' +\n        '?label=' +\n        encodeURIComponent(productId)\n    );\n    // TODO(dvoytenko): switch to a non-credentialed request after launch.\n    return this.fetcher_.fetchCredentialedJson(url).then(json => {\n      return json['offers'] || [];\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {PayStartFlow} from './pay-flow';\nimport {SubscriptionFlows, ProductType} from '../api/subscriptions';\nimport {AnalyticsEvent} from '../proto/api_messages';\nimport {feArgs, feUrl} from './services';\nimport {assert} from '../utils/log';\nimport {\n  SkuSelectedResponse,\n  AlreadySubscribedResponse,\n  ViewSubscriptionsResponse,\n  SubscribeResponse,\n} from '../proto/api_messages';\n\n/**\n * Offers view is closable when request was originated from 'AbbrvOfferFlow'\n * or from 'SubscribeOptionFlow'.\n */\nconst OFFERS_VIEW_CLOSABLE = true;\n\n/**\n * The class for Offers flow.\n */\nexport class OffersFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    let isClosable = options && options.isClosable;\n    if (isClosable == undefined) {\n      isClosable = false; // Default is to hide Close button.\n    }\n\n    const feArgsObj = {\n      'productId': deps.pageConfig().getProductId(),\n      'publicationId': deps.pageConfig().getPublicationId(),\n      'showNative': deps.callbacks().hasSubscribeRequestCallback(),\n      'productType': ProductType.SUBSCRIPTION,\n      'list': (options && options.list) || 'default',\n      'skus': (options && options.skus) || null,\n      'isClosable': isClosable,\n    };\n\n    this.prorationMode = feArgsObj['replaceSkuProrationMode'] || undefined;\n\n    if (options && options.oldSku) {\n      feArgsObj['oldSku'] = options.oldSku;\n    }\n\n    if (feArgsObj['oldSku']) {\n      assert(feArgsObj['skus'], 'Need a sku list if old sku is provided!');\n\n      // Remove old sku from offers if in list.\n      let skuList = feArgsObj['skus'];\n      const /** @type {string} */ oldSku = feArgsObj['oldSku'];\n      skuList = skuList.filter(sku => sku !== oldSku);\n\n      assert(\n        skuList.length > 0,\n        'Sku list only contained offer user already has'\n      );\n      feArgsObj['skus'] = skuList;\n    }\n\n    // Redirect to payments if only one upgrade option is passed.\n    if (feArgsObj['skus'] && feArgsObj['skus'].length === 1) {\n      const sku = feArgsObj['skus'][0];\n      const /** @type {string|undefined} */ oldSku = feArgsObj['oldSku'];\n      // Update subscription triggers experimental flag if oldSku is passed,\n      // so we need to check for oldSku to decide if it needs to be sent.\n      // Otherwise we might accidentally block a regular subscription request.\n      if (oldSku) {\n        new PayStartFlow(this.deps_, {\n          skuId: sku,\n          oldSku,\n          replaceSkuProrationMode: this.prorationMode,\n        }).start();\n        return;\n      }\n    }\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/offersiframe'),\n      feArgs(feArgsObj),\n      /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * @param {SkuSelectedResponse} response\n   * @private\n   */\n  startPayFlow_(response) {\n    const sku = response.getSku();\n    const oldSku = response.getOldSku();\n    if (sku) {\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.ACTION_OFFER_SELECTED,\n        true\n      );\n      let skuOrSubscriptionRequest;\n      if (oldSku) {\n        skuOrSubscriptionRequest = {};\n        skuOrSubscriptionRequest['skuId'] = sku;\n        skuOrSubscriptionRequest['oldSku'] = oldSku;\n      } else {\n        skuOrSubscriptionRequest = sku;\n      }\n      new PayStartFlow(this.deps_, skuOrSubscriptionRequest).start();\n    }\n  }\n\n  /**\n   * @param {AlreadySubscribedResponse} response\n   * @private\n   */\n  handleLinkRequest_(response) {\n    if (response.getSubscriberOrMember()) {\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.ACTION_ALREADY_SUBSCRIBED,\n        true\n      );\n      this.deps_.callbacks().triggerLoginRequest({\n        linkRequested: !!response.getLinkRequested(),\n      });\n    }\n  }\n\n  /**\n   * @param {ViewSubscriptionsResponse} response\n   * @private\n   */\n  startNativeFlow_(response) {\n    if (response.getNative()) {\n      this.deps_.callbacks().triggerSubscribeRequest();\n    }\n  }\n\n  /**\n   * Starts the offers flow or alreadySubscribed flow.\n   * @return {!Promise}\n   */\n  start() {\n    if (this.activityIframeView_) {\n      // So no error if skipped to payment screen.\n      // Start/cancel events.\n      this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.SHOW_OFFERS);\n      this.activityIframeView_.onCancel(() => {\n        this.deps_\n          .callbacks()\n          .triggerFlowCanceled(SubscriptionFlows.SHOW_OFFERS);\n      });\n      this.activityIframeView_.on(\n        SkuSelectedResponse,\n        this.startPayFlow_.bind(this)\n      );\n      this.activityIframeView_.on(\n        AlreadySubscribedResponse,\n        this.handleLinkRequest_.bind(this)\n      );\n      this.activityIframeView_.on(\n        ViewSubscriptionsResponse,\n        this.startNativeFlow_.bind(this)\n      );\n\n      this.eventManager_.logSwgEvent(AnalyticsEvent.IMPRESSION_OFFERS);\n\n      return this.dialogManager_.openView(this.activityIframeView_);\n    }\n    return Promise.resolve();\n  }\n}\n\n/**\n * The class for subscribe option flow.\n */\nexport class SubscribeOptionFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      deps.win(),\n      this.activityPorts_,\n      feUrl('/optionsiframe'),\n      feArgs({\n        'publicationId': deps.pageConfig().getPublicationId(),\n        'productId': deps.pageConfig().getProductId(),\n        'list': (options && options.list) || 'default',\n        'skus': (options && options.skus) || null,\n        'isClosable': true,\n      }),\n      /* shouldFadeBody */ false\n    );\n  }\n\n  /**\n   * Starts the offers flow or alreadySubscribed flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_SUBSCRIBE_OPTION);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_\n        .callbacks()\n        .triggerFlowCanceled(SubscriptionFlows.SHOW_SUBSCRIBE_OPTION);\n    });\n    this.activityIframeView_.on(\n      SubscribeResponse,\n      this.maybeOpenOffersFlow_.bind(this)\n    );\n\n    this.activityIframeView_.acceptResult().then(\n      result => {\n        const data = result.data;\n        const response = new SubscribeResponse();\n        if (data['subscribe']) {\n          response.setSubscribe(true);\n        }\n        this.maybeOpenOffersFlow_(response);\n      },\n      reason => {\n        this.dialogManager_.completeView(this.activityIframeView_);\n        throw reason;\n      }\n    );\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.IMPRESSION_CLICK_TO_SHOW_OFFERS\n    );\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {SubscribeResponse} response\n   * @private\n   */\n  maybeOpenOffersFlow_(response) {\n    if (response.getSubscribe()) {\n      const options = this.options_ || {};\n      if (options.isClosable == undefined) {\n        options.isClosable = OFFERS_VIEW_CLOSABLE;\n      }\n      this.eventManager_.logSwgEvent(AnalyticsEvent.ACTION_VIEW_OFFERS, true);\n      new OffersFlow(this.deps_, options).start();\n    }\n  }\n}\n\n/**\n * The class for Abbreviated Offer flow.\n *\n */\nexport class AbbrvOfferFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest=} options\n   */\n  constructor(deps, options = {}) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/abbrvofferiframe'),\n      feArgs({\n        'publicationId': deps.pageConfig().getPublicationId(),\n        'productId': deps.pageConfig().getProductId(),\n        'showNative': deps.callbacks().hasSubscribeRequestCallback(),\n        'list': (options && options.list) || 'default',\n        'skus': (options && options.skus) || null,\n        'isClosable': true,\n      }),\n      /* shouldFadeBody */ false\n    );\n  }\n\n  /**\n   * @param {AlreadySubscribedResponse} response\n   * @private\n   */\n  handleLinkRequest_(response) {\n    if (response.getSubscriberOrMember()) {\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.ACTION_ALREADY_SUBSCRIBED,\n        true\n      );\n      this.deps_.callbacks().triggerLoginRequest({\n        linkRequested: !!response.getLinkRequested(),\n      });\n    }\n  }\n\n  /**\n   * Starts the offers flow\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_ABBRV_OFFER);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_\n        .callbacks()\n        .triggerFlowCanceled(SubscriptionFlows.SHOW_ABBRV_OFFER);\n    });\n\n    // If the user is already subscribed, trigger login flow\n    this.activityIframeView_.on(\n      AlreadySubscribedResponse,\n      this.handleLinkRequest_.bind(this)\n    );\n\n    // If result is due to requesting offers, redirect to offers flow\n    this.activityIframeView_.acceptResult().then(result => {\n      if (result.data['viewOffers']) {\n        const options = this.options_ || {};\n        if (options.isClosable == undefined) {\n          options.isClosable = OFFERS_VIEW_CLOSABLE;\n        }\n        this.eventManager_.logSwgEvent(AnalyticsEvent.ACTION_VIEW_OFFERS, true);\n        new OffersFlow(this.deps_, options).start();\n        return;\n      }\n      if (result.data['native']) {\n        this.deps_.callbacks().triggerSubscribeRequest();\n        // The flow is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n        return;\n      }\n    });\n\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED\n    );\n\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ExperimentFlags} from './experiment-flags';\nimport {PaymentsAsyncClient} from '../../third_party/gpay/src/payjs_async';\nimport {Xhr} from '../utils/xhr';\nimport {bytesToString, stringToBytes} from '../utils/bytes';\nimport {createCancelError} from '../utils/errors';\nimport {feArgs, feCached} from './services';\nimport {isExperimentOn} from './experiments';\n\nconst PAY_REQUEST_ID = 'swg-pay';\nconst GPAY_ACTIVITY_REQUEST = 'GPAY';\n\nconst REDIRECT_STORAGE_KEY = 'subscribe.google.com:rk';\n\n/**\n * @typedef {{\n *   forceRedirect: (boolean|undefined),\n * }}\n */\nexport let PayOptionsDef;\n\n/**\n * @const {!Object<string, string>}\n * @package Visible for testing only.\n */\nexport const PAY_ORIGIN = {\n  'PRODUCTION': 'https://pay.google.com',\n  'SANDBOX': 'https://pay.sandbox.google.com',\n};\n\n/** @return {string} */\nfunction payOrigin() {\n  return PAY_ORIGIN['$payEnvironment$'];\n}\n\n/** @return {string} */\nfunction payUrl() {\n  return feCached(PAY_ORIGIN['$payEnvironment$'] + '/gp/p/ui/pay');\n}\n\n/** @return {string} */\nfunction payDecryptUrl() {\n  return PAY_ORIGIN['$payEnvironment$'] + '/gp/p/apis/buyflow/process';\n}\n\n/**\n */\nexport class PayClient {\n  /**\n   * @param {!Window} win\n   * @param {!../components/activities.ActivityPorts} activityPorts\n   * @param {!../components/dialog-manager.DialogManager} dialogManager\n   */\n  constructor(win, activityPorts, dialogManager) {\n    /** @const @private {!PayClientBindingDef} */\n    this.binding_ = isExperimentOn(win, ExperimentFlags.GPAY_API)\n      ? new PayClientBindingPayjs(win, activityPorts)\n      : new PayClientBindingSwg(win, activityPorts, dialogManager);\n  }\n\n  /**\n   * @param {!../utils/preconnect.Preconnect} pre\n   */\n  preconnect(pre) {\n    pre.prefetch(payUrl());\n    pre.prefetch(\n      'https://payments.google.com/payments/v4/js/integrator.js?ss=md'\n    );\n    pre.prefetch('https://clients2.google.com/gr/gr_full_2.0.6.js');\n    pre.preconnect('https://www.gstatic.com/');\n    pre.preconnect('https://fonts.googleapis.com/');\n    pre.preconnect('https://www.google.com/');\n  }\n\n  /**\n   * @return {string}\n   */\n  getType() {\n    // TODO(dvoytenko, #406): remove once GPay API is launched.\n    return this.binding_.getType();\n  }\n\n  /**\n   * @param {!Object} paymentRequest\n   * @param {!PayOptionsDef=} options\n   */\n  start(paymentRequest, options = {}) {\n    this.binding_.start(paymentRequest, options);\n  }\n\n  /**\n   * @param {function(!Promise<!Object>)} callback\n   */\n  onResponse(callback) {\n    this.binding_.onResponse(callback);\n  }\n}\n\n/**\n * TODO(dvoytenko, #406): remove delegated class once GPay launches.\n * @interface\n */\nclass PayClientBindingDef {\n  /**\n   * @return {string}\n   */\n  getType() {}\n\n  /**\n   * @param {!Object} unusedPaymentRequest\n   * @param {!PayOptionsDef} unusedOptions\n   */\n  start(unusedPaymentRequest, unusedOptions) {}\n\n  /**\n   * @param {function(!Promise<!Object>)} unusedCallback\n   */\n  onResponse(unusedCallback) {}\n}\n\n/**\n * @implements {PayClientBindingDef}\n */\nclass PayClientBindingSwg {\n  /**\n   * @param {!Window} win\n   * @param {!../components/activities.ActivityPorts} activityPorts\n   * @param {!../components/dialog-manager.DialogManager} dialogManager\n   */\n  constructor(win, activityPorts, dialogManager) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = activityPorts;\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = dialogManager;\n  }\n\n  /** @override */\n  getType() {\n    return 'SWG';\n  }\n\n  /** @override */\n  start(paymentRequest, options) {\n    const opener = this.activityPorts_.open(\n      GPAY_ACTIVITY_REQUEST,\n      payUrl(),\n      options.forceRedirect ? '_top' : '_blank',\n      feArgs(paymentRequest),\n      {}\n    );\n    this.dialogManager_.popupOpened((opener && opener.targetWin) || null);\n  }\n\n  /** @override */\n  onResponse(callback) {\n    const responseCallback = port => {\n      this.dialogManager_.popupClosed();\n      callback(this.validatePayResponse_(port));\n    };\n    this.activityPorts_.onResult(GPAY_ACTIVITY_REQUEST, responseCallback);\n    this.activityPorts_.onResult(PAY_REQUEST_ID, responseCallback);\n  }\n\n  /**\n   * @param {!../components/activities.ActivityPortDef} port\n   * @return {!Promise<!Object>}\n   * @private\n   */\n  validatePayResponse_(port) {\n    // Do not require security immediately: it will be checked below.\n    return port.acceptResult().then(result => {\n      if (result.origin != payOrigin()) {\n        throw new Error('channel mismatch');\n      }\n      const data = /** @type {!Object} */ (result.data);\n      if (data['redirectEncryptedCallbackData']) {\n        // Data is supplied as an encrypted blob.\n        const xhr = new Xhr(this.win_);\n        const url = payDecryptUrl();\n        const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n          method: 'post',\n          headers: {'Accept': 'text/plain, application/json'},\n          credentials: 'include',\n          body: data['redirectEncryptedCallbackData'],\n          mode: 'cors',\n        });\n        return xhr\n          .fetch(url, init)\n          .then(response => response.json())\n          .then(response => {\n            const dataClone = Object.assign({}, data);\n            delete dataClone['redirectEncryptedCallbackData'];\n            return Object.assign(dataClone, response);\n          });\n      }\n      // Data is supplied directly: must be a verified and secure channel.\n      if (result.originVerified && result.secureChannel) {\n        return data;\n      }\n      throw new Error('channel mismatch');\n    });\n  }\n}\n\n/**\n * Binding based on the https://github.com/google/payjs.\n * @implements {PayClientBindingDef}\n * @package Visible for testing only.\n */\nexport class PayClientBindingPayjs {\n  /**\n   * @param {!Window} win\n   * @param {!../components/activities.ActivityPorts} activityPorts\n   */\n  constructor(win, activityPorts) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = activityPorts;\n\n    /** @private {?function(!Promise<!Object>)} */\n    this.responseCallback_ = null;\n\n    /** @private {?Promise<!Object>} */\n    this.response_ = null;\n\n    /** @private @const {!RedirectVerifierHelper} */\n    this.redirectVerifierHelper_ = new RedirectVerifierHelper(this.win_);\n\n    /** @private @const {!PaymentsAsyncClient} */\n    this.client_ = this.createClient_(\n      {\n        environment: '$payEnvironment$',\n        'i': {\n          'redirectKey': this.redirectVerifierHelper_.restoreKey(),\n        },\n      },\n      this.handleResponse_.bind(this)\n    );\n\n    // Prepare new verifier pair.\n    this.redirectVerifierHelper_.prepare();\n  }\n\n  /**\n   * @param {!Object} options\n   * @param {function(!Promise<!Object>)} handler\n   * @return {!PaymentsAsyncClient}\n   * @private\n   */\n  createClient_(options, handler) {\n    return new PaymentsAsyncClient(\n      options,\n      handler,\n      /* useIframe */ false,\n      this.activityPorts_.getOriginalWebActivityPorts()\n    );\n  }\n\n  /** @override */\n  getType() {\n    return 'PAYJS';\n  }\n\n  /** @override */\n  start(paymentRequest, options) {\n    if (options.forceRedirect) {\n      paymentRequest = Object.assign(paymentRequest, {\n        'forceRedirect': options.forceRedirect || false,\n      });\n    }\n    setInternalParam(\n      paymentRequest,\n      'disableNative',\n      // The page cannot be iframed at this time. May be relaxed later\n      // for AMP and similar contexts.\n      this.win_ != this.top_() ||\n        // Experiment must be enabled.\n        !isExperimentOn(this.win_, ExperimentFlags.GPAY_NATIVE)\n    );\n    // Notice that the callback for verifier may execute asynchronously.\n    this.redirectVerifierHelper_.useVerifier(verifier => {\n      if (verifier) {\n        setInternalParam(paymentRequest, 'redirectVerifier', verifier);\n      }\n      this.client_.loadPaymentData(paymentRequest);\n    });\n  }\n\n  /** @override */\n  onResponse(callback) {\n    this.responseCallback_ = callback;\n    const response = this.response_;\n    if (response) {\n      Promise.resolve().then(() => {\n        if (response) {\n          callback(this.convertResponse_(response));\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {!Promise<!Object>} responsePromise\n   * @private\n   */\n  handleResponse_(responsePromise) {\n    this.response_ = responsePromise;\n    if (this.responseCallback_) {\n      this.responseCallback_(this.convertResponse_(this.response_));\n    }\n  }\n\n  /**\n   * @param {!Promise<!Object>} response\n   * @return {!Promise<!Object>}\n   * @private\n   */\n  convertResponse_(response) {\n    return response.catch(reason => {\n      if (typeof reason == 'object' && reason['statusCode'] == 'CANCELED') {\n        return Promise.reject(createCancelError(this.win_));\n      }\n      return Promise.reject(reason);\n    });\n  }\n\n  /**\n   * @return {!Window}\n   * @private\n   */\n  top_() {\n    // Only exists for testing since it's not possible to override `window.top`.\n    return this.win_.top;\n  }\n}\n\n/**\n * @typedef {{\n *   key: string,\n *   verifier: string,\n * }}\n */\nlet RedirectVerifierPairDef;\n\n/**\n * This helper generates key/verifier pair for the redirect mode. When the\n * redirect mode is used, the encrypted payload is returned via nivigation URL.\n * This payload need to be decrypted and to avoid session fixation attacks, a\n * verifier has to be used. This redirect verifier is not the only session\n * verifier in use: we also use GAIA. However, we have to fallback to this\n * verifier when GAIA is not available.\n *\n * @package Visible for testing only.\n */\nexport class RedirectVerifierHelper {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {boolean} */\n    this.pairCreated_ = false;\n\n    /** @private {?RedirectVerifierPairDef} */\n    this.pair_ = null;\n\n    /** @private {?Promise<?RedirectVerifierPairDef>} */\n    this.pairPromise_ = null;\n  }\n\n  /**\n   * To avoid popup blockers, the key/verifier pair is created as soon as\n   * possible.\n   * @return {?Promise}\n   */\n  prepare() {\n    return this.getOrCreatePair_(() => {});\n  }\n\n  /**\n   * Calls the provided callback with the generated redirect verifier. This\n   * API is sync/async, which is a big anti-pattern. However, it's necessary\n   * to reduce the risk of popup blockers. If the verifier is already available\n   * (see `prepare` method), the callback will be called immediately and thus\n   * in the same event loop as the user action.\n   *\n   * The return verifier could be `null`. This could mean either that its\n   * generation failed, or if the platform doesn't support necessary APIs, such\n   * as Web Crypto. The redirect can still proceed and try to fallback on GAIA\n   * as a redirect verifier. The set of platforms where GAIA is not available\n   * and the redirect verifier cannot be created is negligible.\n   *\n   * The key corresponding to the returned verifier is stored in the session\n   * storage and can be later restored using `restoreKey` method.\n   *\n   * @param {function(?string)} callback\n   */\n  useVerifier(callback) {\n    this.getOrCreatePair_(pair => {\n      if (pair) {\n        try {\n          this.win_.localStorage.setItem(REDIRECT_STORAGE_KEY, pair.key);\n        } catch (e) {\n          // If storage has failed, there's no point in using the verifer.\n          // However, there are other ways to recover the redirect, so it's\n          // not necessarily a fatal condition.\n          pair = null;\n        }\n      }\n      callback((pair && pair.verifier) || null);\n    });\n  }\n\n  /**\n   * Restores the redirect key from the session storage. The key may be null.\n   * @return {?string}\n   */\n  restoreKey() {\n    try {\n      return (\n        (this.win_.localStorage &&\n          this.win_.localStorage.getItem(REDIRECT_STORAGE_KEY)) ||\n        null\n      );\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * @param {function(?RedirectVerifierPairDef)} callback\n   * @return {?Promise}\n   * @private\n   */\n  getOrCreatePair_(callback) {\n    this.createPair_();\n    if (this.pairCreated_) {\n      // Already created.\n      callback(this.pair_);\n    } else if (this.pairPromise_) {\n      // Otherwise wait for it to be created.\n      this.pairPromise_.then(pair => callback(pair));\n    }\n    return this.pairPromise_;\n  }\n\n  /**\n   * @private\n   */\n  createPair_() {\n    // Either already created or already started.\n    if (this.pairCreated_ || this.pairPromise_) {\n      return;\n    }\n\n    // Check that the platform can fully support verification. That means\n    // that it's expected to implement the following APIs:\n    // a. Local storage (localStorage);\n    // b. WebCrypto (crypto.subtle);\n    // c. Crypto random (crypto.getRandomValues);\n    // d. SHA284 (crypto.subtle.digest).\n    const crypto = this.win_.crypto;\n    if (\n      this.win_.localStorage &&\n      crypto &&\n      crypto.getRandomValues &&\n      crypto.subtle &&\n      crypto.subtle.digest\n    ) {\n      this.pairPromise_ = new Promise((resolve, reject) => {\n        // 1. Use crypto random to create a 128-bit (16 byte) redirect key.\n        const keyBytes = new Uint8Array(16);\n        crypto.getRandomValues(keyBytes);\n\n        // 2. Encode key as base64.\n        const key = btoa(bytesToString(keyBytes));\n\n        // 3. Create a hash.\n        crypto.subtle.digest({name: 'SHA-384'}, stringToBytes(key)).then(\n          buffer => {\n            const verifier = btoa(\n              bytesToString(\n                new Uint8Array(/** @type {!ArrayBuffer} */ (buffer))\n              )\n            );\n            resolve({key, verifier});\n          },\n          reason => {\n            reject(reason);\n          }\n        );\n      })\n        .catch(() => {\n          // Ignore failures. A failure to create a redirect verifier is often\n          // recoverable.\n          return null;\n        })\n        .then(pair => {\n          this.pairCreated_ = true;\n          this.pair_ = pair;\n          return pair;\n        });\n    } else {\n      // Not supported.\n      this.pairCreated_ = true;\n      this.pair_ = null;\n    }\n  }\n}\n\n/**\n * @param {!Object} paymentRequest\n * @param {string} param\n * @param {*} value\n */\nfunction setInternalParam(paymentRequest, param, value) {\n  paymentRequest['i'] = Object.assign(paymentRequest['i'] || {}, {\n    [param]: value,\n  });\n}\n\n// TODO(dvoytenko, #406): Remove once GPay API is supported.\nexport function getPayjsBindingForTesting() {\n  return PayClientBindingPayjs;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * The Flow goes like this:\n * a. Start Payments\n * b. Complete Payments\n * c. Create Account\n * d. Acknowledge Account\n *\n * In other words, Flow = Payments + Account Creation.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {AnalyticsEvent, EventParams} from '../proto/api_messages';\nimport {JwtHelper} from '../utils/jwt';\nimport {PurchaseData, SubscribeResponse} from '../api/subscribe-response';\nimport {\n  ProductType,\n  SubscriptionFlows,\n  WindowOpenMode,\n} from '../api/subscriptions';\nimport {UserData} from '../api/user-data';\nimport {feArgs, feUrl} from './services';\nimport {isCancelError} from '../utils/errors';\nimport {parseJson, tryParseJson} from '../utils/json';\nimport {\n  EntitlementsResponse,\n  AccountCreationRequest,\n} from '../proto/api_messages';\n/**\n * String values input by the publisher are mapped to the number values.\n * @type {!Object<string, number>}\n */\nexport const ReplaceSkuProrationModeMapping = {\n  // The replacement takes effect immediately, and the remaining time will\n  // be prorated and credited to the user. This is the current default\n  // behavior.\n  'IMMEDIATE_WITH_TIME_PRORATION': 1,\n};\n\n/**\n * The flow to initiate payment process.\n */\nexport class PayStartFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.SubscriptionRequest|string} skuOrSubscriptionRequest\n   * @param {!../api/subscriptions.ProductType} productType\n   */\n  constructor(\n    deps,\n    skuOrSubscriptionRequest,\n    productType = ProductType.SUBSCRIPTION\n  ) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!./pay-client.PayClient} */\n    this.payClient_ = deps.payClient();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = deps.pageConfig();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../api/subscriptions.SubscriptionRequest} */\n    this.subscriptionRequest_ =\n      typeof skuOrSubscriptionRequest == 'string'\n        ? {'skuId': skuOrSubscriptionRequest}\n        : skuOrSubscriptionRequest;\n\n    /**@private @const {!ProductType} */\n    this.productType_ = productType;\n\n    /** @private @const {!../runtime/analytics-service.AnalyticsService} */\n    this.analyticsService_ = deps.analytics();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    // Map the proration mode to the enum value (if proration exists).\n    this.prorationMode = this.subscriptionRequest_.replaceSkuProrationMode;\n    this.prorationEnum = 0;\n    if (this.prorationMode) {\n      this.prorationEnum = ReplaceSkuProrationModeMapping[this.prorationMode];\n    } else if (this.subscriptionRequest_.oldSku) {\n      this.prorationEnum =\n        ReplaceSkuProrationModeMapping['IMMEDIATE_WITH_TIME_PRORATION'];\n    }\n  }\n\n  /**\n   * Starts the payments flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Add the 'publicationId' key to the subscriptionRequest_ object.\n    const swgPaymentRequest = Object.assign({}, this.subscriptionRequest_, {\n      'publicationId': this.pageConfig_.getPublicationId(),\n    });\n\n    if (this.prorationEnum) {\n      swgPaymentRequest.replaceSkuProrationMode = this.prorationEnum;\n    }\n\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(\n        SubscriptionFlows.SUBSCRIBE,\n        this.subscriptionRequest_\n      );\n    // TODO(chenshay): Create analytics for 'replace subscription'.\n    this.analyticsService_.setSku(this.subscriptionRequest_.skuId);\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.ACTION_PAYMENT_FLOW_STARTED,\n      true\n    );\n    this.payClient_.start(\n      {\n        'apiVersion': 1,\n        'allowedPaymentMethods': ['CARD'],\n        'environment': '$payEnvironment$',\n        'playEnvironment': '$playEnvironment$',\n        'swg': swgPaymentRequest,\n        'i': {\n          'startTimeMs': Date.now(),\n          'googleTransactionId': this.analyticsService_.getTransactionId(),\n          'productType': this.productType_,\n        },\n      },\n      {\n        forceRedirect:\n          this.deps_.config().windowOpenMode == WindowOpenMode.REDIRECT,\n      }\n    );\n    return Promise.resolve();\n  }\n}\n\n/**\n * The flow for successful payments completion.\n */\nexport class PayCompleteFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  static configurePending(deps) {\n    /** @const @type {./client-event-manager.ClientEventManager} */\n    const eventManager = deps.eventManager();\n\n    deps.payClient().onResponse(payPromise => {\n      deps.entitlementsManager().blockNextNotification();\n      const flow = new PayCompleteFlow(deps);\n      const promise = validatePayResponse(\n        deps,\n        payPromise,\n        flow.complete.bind(flow)\n      );\n      deps.callbacks().triggerSubscribeResponse(promise);\n      return promise.then(\n        response => {\n          eventManager.logSwgEvent(\n            AnalyticsEvent.ACTION_PAYMENT_COMPLETE,\n            true\n          );\n          flow.start(response);\n        },\n        reason => {\n          if (isCancelError(reason)) {\n            deps.callbacks().triggerFlowCanceled(SubscriptionFlows.SUBSCRIBE);\n          } else {\n            deps\n              .eventManager()\n              .logSwgEvent(AnalyticsEvent.EVENT_PAYMENT_FAILED, false);\n            deps.jserror().error('Pay failed', reason);\n          }\n          throw reason;\n        }\n      );\n    });\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n\n    /** @private {?SubscribeResponse} */\n    this.response_ = null;\n\n    /** @private {?Promise} */\n    this.readyPromise_ = null;\n\n    /** @private @const {!../runtime/analytics-service.AnalyticsService} */\n    this.analyticsService_ = deps.analytics();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n  }\n\n  /**\n   * Starts the payments completion flow.\n   * @param {!SubscribeResponse} response\n   * @return {!Promise}\n   */\n  start(response) {\n    if (!this.analyticsService_.getSku()) {\n      // This is a redirect response. Extract the SKU if possible.\n      this.analyticsService_.addLabels(['redirect']);\n      const sku = parseSkuFromPurchaseDataSafe(response.purchaseData);\n      if (sku) {\n        this.analyticsService_.setSku(sku);\n      }\n    }\n\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.IMPRESSION_ACCOUNT_CHANGED,\n      true\n    );\n    this.deps_.entitlementsManager().reset(true);\n    this.response_ = response;\n    // TODO(dianajing): find a way to specify whether response is a subscription update\n    const args = {\n      'publicationId': this.deps_.pageConfig().getPublicationId(),\n      'productType': this.response_['productType'],\n      // 'isSubscriptionUpdate': !!response.oldSku,\n    };\n    // TODO(dvoytenko, #400): cleanup once entitlements is launched everywhere.\n    if (response.userData && response.entitlements) {\n      args['idToken'] = response.userData.idToken;\n      this.deps_\n        .entitlementsManager()\n        .pushNextEntitlements(response.entitlements.raw);\n    } else {\n      args['loginHint'] = response.userData && response.userData.email;\n    }\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/payconfirmiframe'),\n      feArgs(args),\n      /* shouldFadeBody */ true\n    );\n\n    this.activityIframeView_.on(\n      EntitlementsResponse,\n      this.handleEntitlementsResponse_.bind(this)\n    );\n\n    this.activityIframeView_.acceptResult().then(() => {\n      // The flow is complete.\n      this.dialogManager_.completeView(this.activityIframeView_);\n    });\n    this.readyPromise_ = this.dialogManager_.openView(this.activityIframeView_);\n    return this.readyPromise_;\n  }\n\n  /**\n   * @param {!EntitlementsResponse} response\n   * @private\n   */\n  handleEntitlementsResponse_(response) {\n    const jwt = response.getJwt();\n    if (jwt) {\n      this.deps_.entitlementsManager().pushNextEntitlements(jwt);\n    }\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  complete() {\n    this.eventManager_.logSwgEvent(AnalyticsEvent.ACTION_ACCOUNT_CREATED, true);\n    this.deps_.entitlementsManager().unblockNextNotification();\n    this.readyPromise_.then(() => {\n      const accountCompletionRequest = new AccountCreationRequest();\n      accountCompletionRequest.setComplete(true);\n      this.activityIframeView_.execute(accountCompletionRequest);\n    });\n    return this.activityIframeView_\n      .acceptResult()\n      .catch(() => {\n        // Ignore errors.\n      })\n      .then(() => {\n        this.eventManager_.logSwgEvent(\n          AnalyticsEvent.ACTION_ACCOUNT_ACKNOWLEDGED,\n          true\n        );\n        this.deps_.entitlementsManager().setToastShown(true);\n      });\n  }\n}\n\n/**\n * @param {!./deps.DepsDef} deps\n * @param {!Promise<!Object>} payPromise\n * @param {function():!Promise} completeHandler\n * @return {!Promise<!SubscribeResponse>}\n */\nfunction validatePayResponse(deps, payPromise, completeHandler) {\n  return payPromise.then(data => {\n    // 1) We log against a random TX ID which is how we track a specific user\n    //    anonymously.\n    // 2) If there was a redirect to gPay, we may have lost our stored TX ID.\n    // 3) Pay service is supposed to give us the TX ID it logged against.\n\n    const hasLogged = deps.analytics().getHasLogged();\n    let eventType = AnalyticsEvent.UNKNOWN;\n    let eventParams = undefined;\n    if (typeof data !== 'object' || !data['googleTransactionId']) {\n      // If gPay doesn't give us a TX ID it means that something may\n      // be wrong.  If we previously logged then we are at least continuing to\n      // log against the same TX ID.  If we didn't previously log then we have\n      // lost all connection to the events that preceded the payment event and\n      // we at least want to know why that data was lost.\n      eventParams = new EventParams();\n      eventParams.setHadLogged(hasLogged);\n      eventType = AnalyticsEvent.EVENT_GPAY_NO_TX_ID;\n    } else {\n      const oldTxId = deps.analytics().getTransactionId();\n      const newTxId = data['googleTransactionId'];\n\n      if (!hasLogged) {\n        // This is the expected case for full redirects.  It may be happening\n        // unexpectedly at other times too though and we want to be aware of it\n        // if it does.\n        deps.analytics().setTransactionId(newTxId);\n        eventType = AnalyticsEvent.EVENT_GPAY_CANNOT_CONFIRM_TX_ID;\n      } else {\n        if (oldTxId === newTxId) {\n          // This is the expected case for non-redirect pay events\n          eventType = AnalyticsEvent.EVENT_CONFIRM_TX_ID;\n        } else {\n          // This is an unexpected case: gPay rejected our TX ID and created\n          // its own.  Log the gPay TX ID but keep our logging consistent.\n          eventParams = new EventParams();\n          eventParams.setGpayTransactionId(newTxId);\n          eventType = AnalyticsEvent.EVENT_CHANGED_TX_ID;\n        }\n      }\n    }\n    deps.eventManager().logSwgEvent(eventType, true, eventParams);\n    return parseSubscriptionResponse(deps, data, completeHandler);\n  });\n}\n\n/**\n * @param {!./deps.DepsDef} deps\n * @param {*} data\n * @param {function():!Promise} completeHandler\n * @return {!SubscribeResponse}\n */\nexport function parseSubscriptionResponse(deps, data, completeHandler) {\n  let swgData = null;\n  let raw = null;\n  let productType = null;\n  if (data) {\n    if (typeof data == 'string') {\n      raw = /** @type {string} */ (data);\n    } else {\n      // Assume it's a json object in the format:\n      // `{integratorClientCallbackData: \"...\"}` or `{swgCallbackData: \"...\"}`.\n      const json = /** @type {!Object} */ (data);\n      if ('productType' in data) {\n        productType = data['productType'];\n      }\n      if ('swgCallbackData' in json) {\n        swgData = /** @type {!Object} */ (json['swgCallbackData']);\n      } else if ('integratorClientCallbackData' in json) {\n        raw = json['integratorClientCallbackData'];\n      }\n    }\n  }\n  if (!productType) {\n    productType = ProductType.SUBSCRIPTION;\n  }\n  if (raw && !swgData) {\n    raw = atob(raw);\n    if (raw) {\n      const parsed = parseJson(raw);\n      swgData = parsed['swgCallbackData'];\n    }\n  }\n  if (!swgData) {\n    throw new Error('unexpected payment response');\n  }\n  raw = JSON.stringify(/** @type {!JsonObject} */ (swgData));\n  return new SubscribeResponse(\n    raw,\n    parsePurchaseData(swgData),\n    parseUserData(swgData),\n    parseEntitlements(deps, swgData),\n    productType,\n    completeHandler\n  );\n}\n\n/**\n * @param {!Object} swgData\n * @return {!PurchaseData}\n */\nfunction parsePurchaseData(swgData) {\n  const raw = swgData['purchaseData'];\n  const signature = swgData['purchaseDataSignature'];\n  return new PurchaseData(raw, signature);\n}\n\n/**\n * @param {!Object} swgData\n * @return {?UserData}\n * @package Visible for testing.\n */\nexport function parseUserData(swgData) {\n  const idToken = swgData['idToken'];\n  if (!idToken) {\n    return null;\n  }\n  const jwt = /** @type {!Object} */ (new JwtHelper().decode(idToken));\n  return new UserData(idToken, jwt);\n}\n\n/**\n * @param {!./deps.DepsDef} deps\n * @param {!Object} swgData\n * @return {?../api/entitlements.Entitlements}\n * @package Visible for testing.\n */\nexport function parseEntitlements(deps, swgData) {\n  if (swgData['signedEntitlements']) {\n    return deps.entitlementsManager().parseEntitlements(swgData);\n  }\n  return null;\n}\n\n/**\n * @param {!PurchaseData} purchaseData\n * @return {?string}\n */\nfunction parseSkuFromPurchaseDataSafe(purchaseData) {\n  const json = tryParseJson(purchaseData.raw);\n  return (json && json['productId']) || null;\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {adsUrl} from './services';\nimport {\n  AnalyticsEvent,\n  EventOriginator,\n  EventParams,\n} from '../proto/api_messages';\nimport {isObject, isBoolean} from '../utils/types';\nimport {analyticsEventToPublisherEvent} from './event-type-mapping';\n\n/**\n * Implements interface to Propensity server\n */\nexport class PropensityServer {\n  /**\n   * Page configuration is known when Propensity API\n   * is available, publication ID is therefore used\n   * in constructor for the server interface.\n   * @param {!Window} win\n   * @param {!./deps.DepsDef} deps\n   * @param {!./fetcher.Fetcher} fetcher\n   */\n  constructor(win, deps, fetcher) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n    /** @private @const {string} */\n    this.publicationId_ = this.deps_.pageConfig().getPublicationId();\n    /** @private {?string} */\n    this.clientId_ = null;\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n    /** @private @const {number} */\n    this.version_ = 1;\n\n    this.deps_\n      .eventManager()\n      .registerEventListener(this.handleClientEvent_.bind(this));\n  }\n\n  /**\n   * @private\n   * @return {string}\n   */\n  getDocumentCookie_() {\n    return this.win_.document.cookie;\n  }\n\n  /**\n   * Returns the client ID to be used.\n   * @return {?string}\n   * @private\n   */\n  getClientId_() {\n    if (!this.clientId_) {\n      // Match '__gads' (name of the cookie) dropped by Ads Tag.\n      const gadsmatch = this.getDocumentCookie_().match(\n        '(^|;)\\\\s*__gads\\\\s*=\\\\s*([^;]+)'\n      );\n      // Since the cookie will be consumed using decodeURIComponent(),\n      // use encodeURIComponent() here to match.\n      this.clientId_ = gadsmatch && encodeURIComponent(gadsmatch.pop());\n    }\n    return this.clientId_;\n  }\n\n  /**\n   * @private\n   * @param {string} url\n   * @return {string}\n   */\n  propensityUrl_(url) {\n    url = url + '&u_tz=240&v=' + this.version_;\n    const clientId = this.getClientId_();\n    if (clientId) {\n      url = url + '&cookie=' + clientId;\n    }\n    url = url + '&cdm=' + this.win_.location.hostname;\n    return url;\n  }\n\n  /**\n   * @param {string} state\n   * @param {?string} productsOrSkus\n   */\n  sendSubscriptionState(state, productsOrSkus) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      credentials: 'include',\n    });\n    let userState = this.publicationId_ + ':' + state;\n    if (productsOrSkus) {\n      userState = userState + ':' + encodeURIComponent(productsOrSkus);\n    }\n    const url = adsUrl('/subopt/data?states=') + encodeURIComponent(userState);\n    return this.fetcher_.fetch(this.propensityUrl_(url), init);\n  }\n\n  /**\n   * @param {string} event\n   * @param {?string} context\n   * @private\n   */\n  sendEvent_(event, context) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      credentials: 'include',\n    });\n    let eventInfo = this.publicationId_ + ':' + event;\n    if (context) {\n      eventInfo = eventInfo + ':' + encodeURIComponent(context);\n    }\n    const url = adsUrl('/subopt/data?events=') + encodeURIComponent(eventInfo);\n    return this.fetcher_.fetch(this.propensityUrl_(url), init);\n  }\n\n  /**\n   *\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   */\n  handleClientEvent_(event) {\n    /**\n     * Does a live check of the config because we don't know when publisher\n     * called to enable (it may be after a consent dialog).\n     */\n    if (\n      !this.deps_.config().enablePropensity &&\n      event.eventOriginator !== EventOriginator.PROPENSITY_CLIENT\n    ) {\n      return;\n    }\n\n    if (event.eventType === AnalyticsEvent.EVENT_SUBSCRIPTION_STATE) {\n      this.sendSubscriptionState(\n        event.additionalParameters['state'],\n        event.additionalParameters['productsOrSkus']\n      );\n      return;\n    }\n    const propEvent = analyticsEventToPublisherEvent(event.eventType);\n    if (propEvent == null) {\n      return;\n    }\n    let additionalParameters = event.additionalParameters;\n    // The EventParams object is private to SwG analytics.  Do not send.\n    if (additionalParameters instanceof EventParams) {\n      additionalParameters = undefined;\n    }\n    if (isBoolean(event.isFromUserAction)) {\n      if (!isObject(additionalParameters)) {\n        additionalParameters = {};\n      }\n      additionalParameters['is_active'] = event.isFromUserAction;\n    }\n    this.sendEvent_(\n      propEvent,\n      JSON.stringify(/** @type {?JsonObject} */ (additionalParameters))\n    );\n  }\n\n  /**\n   * @param {JsonObject} response\n   * @return {!../api/propensity-api.PropensityScore}\n   */\n  parsePropensityResponse_(response) {\n    let defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({});\n    if (!response['header']) {\n      defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({\n        header: {ok: false},\n        body: {error: 'No valid response'},\n      });\n      return defaultScore;\n    }\n    const status = response['header'];\n    let scoreDetails = undefined;\n    if (status['ok']) {\n      const scores = response['scores'];\n      scoreDetails = [];\n      for (let i = 0; i < scores.length; i++) {\n        const result = scores[i];\n        const scoreStatus = !!result['score'];\n        let scoreDetail;\n        if (scoreStatus) {\n          const value = /** @type {!../api/propensity-api.Score} */ ({\n            value: result['score'],\n            bucketed: result['score_type'] == 2,\n          });\n          scoreDetail = /** @type {!../api/propensity-api.Body} */ ({\n            product: result['product'],\n            score: value,\n          });\n        } else {\n          scoreDetail = /** @type {!../api/propensity-api.Body} */ ({\n            product: result['product'],\n            error: result['error_message'],\n          });\n        }\n        scoreDetails.push(scoreDetail);\n      }\n      if (scoreDetails) {\n        defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({\n          header: {ok: true},\n          body: {scores: scoreDetails},\n        });\n      }\n      return defaultScore;\n    }\n    defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({\n      header: {ok: false},\n      body: {error: response['error']},\n    });\n    return defaultScore;\n  }\n  /**\n   * @param {string} referrer\n   * @param {string} type\n   * @return {?Promise<../api/propensity-api.PropensityScore>}\n   */\n  getPropensity(referrer, type) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      credentials: 'include',\n    });\n    const url =\n      adsUrl('/subopt/pts?products=') +\n      this.publicationId_ +\n      '&type=' +\n      type +\n      '&ref=' +\n      referrer;\n    return this.fetcher_\n      .fetch(this.propensityUrl_(url), init)\n      .then(result => result.json())\n      .then(response => {\n        return this.parsePropensityResponse_(response);\n      });\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as PropensityApi from '../api/propensity-api';\nimport {Event, SubscriptionState} from '../api/logger-api';\nimport {PropensityServer} from './propensity-server';\nimport {isObject, isEnumValue} from '../utils/types';\nimport {EventOriginator} from '../proto/api_messages';\nimport {publisherEventToAnalyticsEvent} from './event-type-mapping';\nimport {isBoolean} from '../utils/types';\n\n/**\n * @implements {PropensityApi.PropensityApi}\n */\nexport class Propensity {\n  /**\n   * @param {!Window} win\n   * @param {!./deps.DepsDef} deps\n   * @param {!./fetcher.Fetcher} fetcher\n   *\n   * IMPORTANT: deps may not be full initialized config and pageConfig are\n   * available immediately, other function should be gated on a ready promise.\n   * #TODO(jpettitt) switch refactor to take out the win and use deps to get win\n   */\n  constructor(win, deps, fetcher) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private {PropensityServer} */\n    this.propensityServer_ = new PropensityServer(win, deps, fetcher);\n\n    /** @private @const {!../api/client-event-manager-api.ClientEventManagerApi} */\n    this.eventManager_ = deps.eventManager();\n  }\n\n  /** @override */\n  sendSubscriptionState(state, jsonProducts) {\n    if (!Object.values(SubscriptionState).includes(state)) {\n      throw new Error('Invalid subscription state provided');\n    }\n    if (\n      (SubscriptionState.SUBSCRIBER == state ||\n        SubscriptionState.PAST_SUBSCRIBER == state) &&\n      !jsonProducts\n    ) {\n      throw new Error(\n        'Entitlements must be provided for users with' +\n          ' active or expired subscriptions'\n      );\n    }\n    if (jsonProducts && !isObject(jsonProducts)) {\n      throw new Error('Entitlements must be an Object');\n    }\n    let productsOrSkus = null;\n    if (jsonProducts) {\n      productsOrSkus = JSON.stringify(jsonProducts);\n    }\n    this.propensityServer_.sendSubscriptionState(state, productsOrSkus);\n  }\n\n  /** @override */\n  getPropensity(type) {\n    if (type && !Object.values(PropensityApi.PropensityType).includes(type)) {\n      throw new Error('Invalid propensity type requested');\n    }\n    if (!type) {\n      type = PropensityApi.PropensityType.GENERAL;\n    }\n    return this.propensityServer_.getPropensity(\n      this.win_.document.referrer,\n      type\n    );\n  }\n\n  /** @override */\n  sendEvent(userEvent) {\n    const analyticsEvent = publisherEventToAnalyticsEvent(userEvent.name);\n    let data = null;\n    if (!isEnumValue(Event, userEvent.name) || !analyticsEvent) {\n      throw new Error('Invalid user event provided(' + userEvent.name + ')');\n    }\n\n    if (userEvent.data) {\n      if (!isObject(userEvent.data)) {\n        throw new Error('Event data must be an Object(' + userEvent.data + ')');\n      } else {\n        data = {};\n        Object.assign(data, userEvent.data);\n      }\n    }\n\n    if (isBoolean(userEvent.active)) {\n      if (!data) {\n        data = {};\n      }\n      Object.assign(data, {'is_active': userEvent.active});\n    } else if (userEvent.active != null) {\n      throw new Error('Event active must be a boolean');\n    }\n\n    this.eventManager_.logEvent({\n      eventType: analyticsEvent,\n      eventOriginator: EventOriginator.PROPENSITY_CLIENT,\n      isFromUserAction: userEvent.active,\n      additionalParameters: data,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityPorts} from '../components/activities';\nimport {AnalyticsEvent} from '../proto/api_messages';\nimport {ButtonApi} from './button-api';\nimport {CSS as SWG_DIALOG} from '../../build/css/components/dialog.css';\nimport {Callbacks} from './callbacks';\nimport {ContributionsFlow} from './contributions-flow';\nimport {DeferredAccountFlow} from './deferred-account-flow';\nimport {DepsDef} from './deps';\nimport {DialogManager} from '../components/dialog-manager';\nimport {Doc, resolveDoc} from '../model/doc';\nimport {EntitlementsManager} from './entitlements-manager';\nimport {ExperimentFlags} from './experiment-flags';\nimport {Fetcher, XhrFetcher} from './fetcher';\nimport {JsError} from './jserror';\nimport {\n  LinkCompleteFlow,\n  LinkbackFlow,\n  LinkSaveFlow,\n} from './link-accounts-flow';\nimport {LoginPromptApi} from './login-prompt-api';\nimport {LoginNotificationApi} from './login-notification-api';\nimport {PayClient} from './pay-client';\nimport {WaitForSubscriptionLookupApi} from './wait-for-subscription-lookup-api';\nimport {OffersApi} from './offers-api';\nimport {OffersFlow, SubscribeOptionFlow, AbbrvOfferFlow} from './offers-flow';\nimport {PageConfig} from '../model/page-config';\nimport {\n  PageConfigResolver,\n  getControlFlag,\n} from '../model/page-config-resolver';\nimport {PayStartFlow, PayCompleteFlow} from './pay-flow';\nimport {Preconnect} from '../utils/preconnect';\nimport {Storage} from './storage';\nimport {\n  Subscriptions,\n  WindowOpenMode,\n  defaultConfig,\n  ProductType,\n} from '../api/subscriptions';\nimport {debugLog} from '../utils/log';\nimport {injectStyleSheet, isEdgeBrowser} from '../utils/dom';\nimport {isArray} from '../utils/types';\nimport {isExperimentOn} from './experiments';\nimport {setExperiment} from './experiments';\nimport {AnalyticsService} from './analytics-service';\nimport {AnalyticsMode} from '../api/subscriptions';\nimport {Propensity} from './propensity';\nimport {ClientEventManager} from './client-event-manager';\nimport {Logger} from './logger';\nimport {assert} from '../utils/log';\nimport {isBoolean} from '../utils/types';\n\nconst RUNTIME_PROP = 'SWG';\nconst RUNTIME_LEGACY_PROP = 'SUBSCRIPTIONS'; // MIGRATE\n\n/** @private {!Runtime} */\nlet runtimeInstance_;\n\n/**\n * Returns runtime for testing if available. Throws if the runtime is not\n * initialized yet.\n * @visibleForTesting\n * @return {!Runtime}\n */\nexport function getRuntime() {\n  assert(runtimeInstance_, 'not initialized yet');\n  return runtimeInstance_;\n}\n\n/**\n * @param {!Window} win\n */\nexport function installRuntime(win) {\n  if (win[RUNTIME_PROP] && !isArray(win[RUNTIME_PROP])) {\n    return;\n  }\n\n  const runtime = new Runtime(win);\n\n  const waitingArray = [].concat(win[RUNTIME_PROP], win[RUNTIME_LEGACY_PROP]);\n\n  // Public runtime.\n  const publicRuntime = createPublicRuntime(runtime);\n\n  const dependencyInstaller = {};\n\n  /**\n   * @param {function(!Subscriptions)} callback\n   */\n  function pushDependency(callback) {\n    if (!callback) {\n      return;\n    }\n    runtime.whenReady().then(() => {\n      callback(publicRuntime);\n    });\n  }\n  Object.defineProperty(dependencyInstaller, 'push', {\n    get: () => pushDependency,\n    configurable: false,\n  });\n  win[RUNTIME_PROP] = dependencyInstaller;\n  win[RUNTIME_LEGACY_PROP] = dependencyInstaller;\n  if (waitingArray) {\n    waitingArray.forEach(pushDependency);\n  }\n  runtimeInstance_ = runtime;\n  runtime.startSubscriptionsFlowIfNeeded();\n}\n\n/**\n * @implements {Subscriptions}\n */\nexport class Runtime {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(win);\n\n    /** @private @const {!Promise} */\n    this.ready_ = Promise.resolve();\n\n    /** @private {?string} */\n    this.productOrPublicationId_ = null;\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = {};\n\n    /** @private {boolean} */\n    this.committed_ = false;\n\n    /** @private {?function((!ConfiguredRuntime|!Promise))} */\n    this.configuredResolver_ = null;\n\n    /** @private @const {!Promise<!ConfiguredRuntime>} */\n    this.configuredPromise_ = new Promise(resolve => {\n      this.configuredResolver_ = resolve;\n    });\n\n    /** @private {?PageConfigResolver} */\n    this.pageConfigResolver_ = null;\n\n    /** @private @const {!ButtonApi} */\n    this.buttonApi_ = new ButtonApi(this.doc_, this.configuredPromise_);\n    this.buttonApi_.init(); // Injects swg-button stylesheet.\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.ready_;\n  }\n\n  /**\n   * @param {boolean} commit\n   * @return {!Promise<!ConfiguredRuntime>}\n   * @private\n   */\n  configured_(commit) {\n    if (!this.committed_ && commit) {\n      this.committed_ = true;\n      /** @type {!Promise<!PageConfig>} */\n      let pageConfigPromise;\n      if (this.productOrPublicationId_) {\n        pageConfigPromise = Promise.resolve(\n          new PageConfig(this.productOrPublicationId_, /* locked */ false)\n        );\n      } else {\n        this.pageConfigResolver_ = new PageConfigResolver(this.doc_);\n        pageConfigPromise = this.pageConfigResolver_\n          .resolveConfig()\n          .then(config => {\n            this.pageConfigResolver_ = null;\n            return config;\n          });\n      }\n      pageConfigPromise.then(\n        pageConfig => {\n          this.configuredResolver_(\n            new ConfiguredRuntime(\n              this.doc_,\n              pageConfig,\n              /* opt_integr */ {configPromise: this.configuredPromise_},\n              this.config_\n            )\n          );\n          this.configuredResolver_ = null;\n        },\n        reason => {\n          this.configuredResolver_(Promise.reject(reason));\n          this.configuredResolver_ = null;\n        }\n      );\n    } else if (commit && this.pageConfigResolver_) {\n      this.pageConfigResolver_.check();\n    }\n    return this.configuredPromise_;\n  }\n\n  /**\n   * Starts the subscription flow if it hasn't been started and the page is\n   * configured to start it automatically.\n   *\n   * @return {?Promise}\n   * @package\n   */\n  startSubscriptionsFlowIfNeeded() {\n    const control = getControlFlag(this.win_.document);\n    debugLog(control, 'mode');\n    if (control == 'manual') {\n      // \"Skipping automatic start because control flag is set to \"manual\".\n      return null;\n    }\n    return this.start();\n  }\n\n  /** @override */\n  init(productOrPublicationId) {\n    assert(!this.committed_, 'already configured');\n    this.productOrPublicationId_ = productOrPublicationId;\n  }\n\n  /** @override */\n  configure(config) {\n    // Accumulate config for startup.\n    Object.assign(this.config_, config);\n    return this.configured_(false).then(runtime => runtime.configure(config));\n  }\n\n  /** @override */\n  start() {\n    return this.configured_(true).then(runtime => runtime.start());\n  }\n\n  /** @override */\n  reset() {\n    return this.configured_(true).then(runtime => runtime.reset());\n  }\n\n  /** @override */\n  clear() {\n    return this.configured_(true).then(runtime => runtime.clear());\n  }\n\n  /** @override */\n  getEntitlements(opt_encryptedDocumentKey) {\n    return this.configured_(true).then(runtime =>\n      runtime.getEntitlements(opt_encryptedDocumentKey)\n    );\n  }\n\n  /** @override */\n  setOnEntitlementsResponse(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnEntitlementsResponse(callback)\n    );\n  }\n\n  /** @override */\n  getOffers(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.getOffers(opt_options)\n    );\n  }\n\n  /** @override */\n  showOffers(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.showOffers(opt_options)\n    );\n  }\n\n  /** @override */\n  showUpdateOffers(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.showUpdateOffers(opt_options)\n    );\n  }\n\n  /** @override */\n  showSubscribeOption(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.showSubscribeOption(opt_options)\n    );\n  }\n\n  /** @override */\n  showAbbrvOffer(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.showAbbrvOffer(opt_options)\n    );\n  }\n\n  /** @override */\n  showContributionOptions(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.showContributionOptions(opt_options)\n    );\n  }\n\n  /** @override */\n  waitForSubscriptionLookup(accountPromise) {\n    return this.configured_(true).then(runtime =>\n      runtime.waitForSubscriptionLookup(accountPromise)\n    );\n  }\n\n  /** @override */\n  setOnNativeSubscribeRequest(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnNativeSubscribeRequest(callback)\n    );\n  }\n\n  /** @override */\n  setOnSubscribeResponse(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnSubscribeResponse(callback)\n    );\n  }\n\n  /** @override */\n  subscribe(sku) {\n    return this.configured_(true).then(runtime => runtime.subscribe(sku));\n  }\n\n  /** @override */\n  updateSubscription(subscriptionRequest) {\n    return this.configured_(true).then(runtime =>\n      runtime.updateSubscription(subscriptionRequest)\n    );\n  }\n\n  /** @override */\n  setOnContributionResponse(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnContributionResponse(callback)\n    );\n  }\n\n  /** @override */\n  contribute(skuOrSubscriptionRequest) {\n    return this.configured_(true).then(runtime =>\n      runtime.contribute(skuOrSubscriptionRequest)\n    );\n  }\n\n  /** @override */\n  completeDeferredAccountCreation(opt_options) {\n    return this.configured_(true).then(runtime =>\n      runtime.completeDeferredAccountCreation(opt_options)\n    );\n  }\n\n  /** @override */\n  setOnLoginRequest(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnLoginRequest(callback)\n    );\n  }\n\n  /** @override */\n  setOnLinkComplete(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnLinkComplete(callback)\n    );\n  }\n\n  /** @override */\n  linkAccount() {\n    return this.configured_(true).then(runtime => runtime.linkAccount());\n  }\n\n  /** @override */\n  setOnFlowStarted(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnFlowStarted(callback)\n    );\n  }\n\n  /** @override */\n  setOnFlowCanceled(callback) {\n    return this.configured_(false).then(runtime =>\n      runtime.setOnFlowCanceled(callback)\n    );\n  }\n\n  /** @override */\n  saveSubscription(saveSubscriptionRequestCallback) {\n    return this.configured_(true).then(runtime => {\n      return runtime.saveSubscription(saveSubscriptionRequestCallback);\n    });\n  }\n\n  /** @override */\n  showLoginPrompt() {\n    return this.configured_(true).then(runtime => {\n      return runtime.showLoginPrompt();\n    });\n  }\n\n  /** @override */\n  showLoginNotification() {\n    return this.configured_(true).then(runtime => {\n      return runtime.showLoginNotification();\n    });\n  }\n\n  /** @override */\n  createButton(optionsOrCallback, opt_callback) {\n    return this.buttonApi_.create(optionsOrCallback, opt_callback);\n  }\n\n  /** @override */\n  attachSmartButton(button, optionsOrCallback, opt_callback) {\n    return this.configured_(true).then(runtime =>\n      runtime.attachSmartButton(button, optionsOrCallback, opt_callback)\n    );\n  }\n\n  /** @override */\n  attachButton(button, optionsOrCallback, opt_callback) {\n    return this.buttonApi_.attach(button, optionsOrCallback, opt_callback);\n  }\n\n  /** @override */\n  getPropensityModule() {\n    return this.configured_(true).then(runtime => {\n      return runtime.getPropensityModule();\n    });\n  }\n\n  /** @override */\n  getLogger() {\n    return this.configured_(true).then(runtime => runtime.getLogger());\n  }\n}\n\n/**\n * @implements {DepsDef}\n * @implements {Subscriptions}\n */\nexport class ConfiguredRuntime {\n  /**\n   * @param {!Window|!Document|!Doc} winOrDoc\n   * @param {!../model/page-config.PageConfig} pageConfig\n   * @param {{\n   *     fetcher: (!Fetcher|undefined),\n   *     configPromise: (!Promise|undefined),\n   *   }=} opt_integr\n   * @param {!../api/subscriptions.Config=} opt_config\n   */\n  constructor(winOrDoc, pageConfig, opt_integr, opt_config) {\n    opt_integr = opt_integr || {};\n    opt_integr.configPromise = opt_integr.configPromise || Promise.resolve();\n\n    /** @private @const {!ClientEventManager} */\n    this.eventManager_ = new ClientEventManager(opt_integr.configPromise);\n\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(winOrDoc);\n\n    /** @private @const {!Window} */\n    this.win_ = this.doc_.getWin();\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = defaultConfig();\n\n    if (isEdgeBrowser(this.win_)) {\n      // TODO(dvoytenko, b/120607343): Find a way to remove this restriction\n      // or move it to Web Activities.\n      this.config_.windowOpenMode = WindowOpenMode.REDIRECT;\n    }\n    if (opt_config) {\n      this.configure_(opt_config);\n    }\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = pageConfig;\n\n    /** @private @const {!Promise} */\n    this.documentParsed_ = this.doc_.whenReady();\n\n    /** @private @const {!JsError} */\n    this.jserror_ = new JsError(this.doc_);\n\n    /** @private @const {!Fetcher} */\n    this.fetcher_ = opt_integr.fetcher || new XhrFetcher(this.win_);\n\n    /** @private @const {!Storage} */\n    this.storage_ = new Storage(this.win_);\n\n    /** @private @const {!DialogManager} */\n    this.dialogManager_ = new DialogManager(this.doc_);\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = new ActivityPorts(this.win_);\n\n    /** @private @const {!PayClient} */\n    this.payClient_ = new PayClient(\n      this.win_,\n      this.activityPorts_,\n      this.dialogManager_\n    );\n\n    /** @private @const {!Callbacks} */\n    this.callbacks_ = new Callbacks();\n\n    //NOTE: 'this' is passed in as a DepsDef.  Do not pass in 'this' before\n    //analytics service and entitlements manager are constructed unless\n    //you are certain they do not rely on them because they are part of that\n    //definition.\n    /** @private @const {!Logger} */\n    this.logger_ = new Logger(this);\n\n    /** @private @const {!AnalyticsService} */\n    this.analyticsService_ = new AnalyticsService(this);\n\n    /** @private @const {!EntitlementsManager} */\n    this.entitlementsManager_ = new EntitlementsManager(\n      this.win_,\n      this.pageConfig_,\n      this.fetcher_,\n      this // See note about 'this' above\n    );\n\n    /** @private @const {!Propensity} */\n    this.propensityModule_ = new Propensity(\n      this.win_,\n      this, // See note about 'this' above\n      this.fetcher_\n    );\n\n    /** @private @const {!OffersApi} */\n    this.offersApi_ = new OffersApi(this.pageConfig_, this.fetcher_);\n\n    /** @private @const {!ButtonApi} */\n    this.buttonApi_ = new ButtonApi(this.doc_, Promise.resolve(this));\n\n    const preconnect = new Preconnect(this.win_.document);\n\n    preconnect.prefetch('$assets$/loader.svg');\n    LinkCompleteFlow.configurePending(this);\n    PayCompleteFlow.configurePending(this);\n    this.payClient_.preconnect(preconnect);\n\n    injectStyleSheet(this.doc_, SWG_DIALOG);\n\n    // Report redirect errors if any.\n    this.activityPorts_.onRedirectError(error => {\n      this.analyticsService_.addLabels(['redirect']);\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.EVENT_PAYMENT_FAILED,\n        false\n      );\n      this.jserror_.error('Redirect error', error);\n    });\n  }\n\n  /** @override */\n  doc() {\n    return this.doc_;\n  }\n\n  /** @override */\n  win() {\n    return this.win_;\n  }\n\n  /** @override */\n  pageConfig() {\n    return this.pageConfig_;\n  }\n\n  /** @override */\n  jserror() {\n    return this.jserror_;\n  }\n\n  /** @override */\n  activities() {\n    return this.activityPorts_;\n  }\n\n  /** @override */\n  payClient() {\n    return this.payClient_;\n  }\n\n  /** @override */\n  dialogManager() {\n    return this.dialogManager_;\n  }\n\n  /** @override */\n  entitlementsManager() {\n    return this.entitlementsManager_;\n  }\n\n  /** @override */\n  callbacks() {\n    return this.callbacks_;\n  }\n\n  /** @override */\n  storage() {\n    return this.storage_;\n  }\n\n  /** @override */\n  analytics() {\n    return this.analyticsService_;\n  }\n\n  /** @override */\n  init() {\n    // Implemented by the `Runtime` class.\n  }\n\n  /** @override */\n  configure(config) {\n    // Indirected for constructor testing.\n    this.configure_(config);\n  }\n\n  /**\n   * @param {!../api/subscriptions.Config} config\n   * @private\n   */\n  configure_(config) {\n    // Validate first.\n    let error = '';\n    for (const k in config) {\n      const v = config[k];\n      switch (k) {\n        case 'windowOpenMode':\n          if (v != WindowOpenMode.AUTO && v != WindowOpenMode.REDIRECT) {\n            error = 'Unknown windowOpenMode: ' + v;\n          }\n          break;\n        case 'experiments':\n          v.forEach(experiment => setExperiment(this.win_, experiment, true));\n          break;\n        case 'analyticsMode':\n          if (v != AnalyticsMode.DEFAULT && v != AnalyticsMode.IMPRESSIONS) {\n            error = 'Unknown analytics mode: ' + v;\n          }\n          break;\n        case 'enableSwgAnalytics':\n          if (!isBoolean(v)) {\n            error = 'Unknown enableSwgAnalytics value: ' + v;\n          }\n          break;\n        case 'enablePropensity':\n          if (!isBoolean(v)) {\n            error = 'Unknown enablePropensity value: ' + v;\n          }\n          break;\n        default:\n          error = 'Unknown config property: ' + k;\n      }\n    }\n    // Throw error string if it's not null\n    assert(!error, error || undefined);\n    // Assign.\n    Object.assign(this.config_, config);\n  }\n\n  /** @override */\n  config() {\n    return this.config_;\n  }\n\n  /** @override */\n  reset() {\n    this.entitlementsManager_.reset();\n    this.dialogManager_.completeAll();\n  }\n\n  /** @override */\n  clear() {\n    this.entitlementsManager_.clear();\n    this.dialogManager_.completeAll();\n  }\n\n  /** @override */\n  start() {\n    // No need to run entitlements without a product or for an unlocked page.\n    if (!this.pageConfig_.getProductId() || !this.pageConfig_.isLocked()) {\n      return Promise.resolve();\n    }\n    this.getEntitlements();\n  }\n\n  /** @override */\n  getEntitlements(opt_encryptedDocumentKey) {\n    return this.entitlementsManager_\n      .getEntitlements(opt_encryptedDocumentKey)\n      .then(entitlements => entitlements.clone());\n  }\n\n  /** @override */\n  setOnEntitlementsResponse(callback) {\n    this.callbacks_.setOnEntitlementsResponse(callback);\n  }\n\n  /** @override */\n  getOffers(opt_options) {\n    return this.offersApi_.getOffers(opt_options && opt_options.productId);\n  }\n\n  /** @override */\n  showOffers(opt_options) {\n    return this.documentParsed_.then(() => {\n      const errorMessage =\n        'The showOffers() method cannot be used to update a subscription. ' +\n        'Use the showUpdateOffers() method instead.';\n      assert(opt_options ? !opt_options['oldSku'] : true, errorMessage);\n      const flow = new OffersFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showUpdateOffers(opt_options) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.REPLACE_SUBSCRIPTION),\n      'Not yet launched!'\n    );\n    return this.documentParsed_.then(() => {\n      const errorMessage =\n        'The showUpdateOffers() method cannot be used for new subscribers. ' +\n        'Use the showOffers() method instead.';\n      assert(opt_options ? !!opt_options['oldSku'] : false, errorMessage);\n      const flow = new OffersFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showSubscribeOption(opt_options) {\n    return this.documentParsed_.then(() => {\n      const flow = new SubscribeOptionFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showAbbrvOffer(opt_options) {\n    return this.documentParsed_.then(() => {\n      const flow = new AbbrvOfferFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showContributionOptions(opt_options) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.CONTRIBUTIONS),\n      'Not yet launched!'\n    );\n    return this.documentParsed_.then(() => {\n      const flow = new ContributionsFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  waitForSubscriptionLookup(accountPromise) {\n    return this.documentParsed_.then(() => {\n      const wait = new WaitForSubscriptionLookupApi(this, accountPromise);\n      return wait.start();\n    });\n  }\n\n  /** @override */\n  setOnLoginRequest(callback) {\n    this.callbacks_.setOnLoginRequest(callback);\n  }\n\n  /** @override */\n  setOnLinkComplete(callback) {\n    this.callbacks_.setOnLinkComplete(callback);\n  }\n\n  /** @override */\n  linkAccount() {\n    return this.documentParsed_.then(() => {\n      return new LinkbackFlow(this).start();\n    });\n  }\n\n  /** @override */\n  saveSubscription(saveSubscriptionRequestCallback) {\n    return this.documentParsed_.then(() => {\n      return new LinkSaveFlow(this, saveSubscriptionRequestCallback).start();\n    });\n  }\n\n  /** @override */\n  showLoginPrompt() {\n    return this.documentParsed_.then(() => {\n      return new LoginPromptApi(this).start();\n    });\n  }\n\n  /** @override */\n  showLoginNotification() {\n    return this.documentParsed_.then(() => {\n      return new LoginNotificationApi(this).start();\n    });\n  }\n\n  /** @override */\n  setOnNativeSubscribeRequest(callback) {\n    this.callbacks_.setOnSubscribeRequest(callback);\n  }\n\n  /** @override */\n  setOnSubscribeResponse(callback) {\n    this.callbacks_.setOnSubscribeResponse(callback);\n  }\n\n  /** @override */\n  subscribe(sku) {\n    const errorMessage =\n      'The subscribe() method can only take a sku as its parameter; ' +\n      'for subscription updates please use the updateSubscription() method';\n    assert(typeof sku === 'string', errorMessage);\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(this, sku).start();\n    });\n  }\n\n  /** @override */\n  updateSubscription(subscriptionRequest) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.REPLACE_SUBSCRIPTION),\n      'Not yet launched!'\n    );\n    const errorMessage =\n      'The updateSubscription() method should be used for subscription ' +\n      'updates; for new subscriptions please use the subscribe() method';\n    assert(\n      subscriptionRequest ? subscriptionRequest['oldSku'] : false,\n      errorMessage\n    );\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(this, subscriptionRequest).start();\n    });\n  }\n\n  /** @override */\n  setOnContributionResponse(callback) {\n    this.callbacks_.setOnContributionResponse(callback);\n  }\n\n  /** @override */\n  contribute(skuOrSubscriptionRequest) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.CONTRIBUTIONS),\n      'Not yet launched!'\n    );\n\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(\n        this,\n        skuOrSubscriptionRequest,\n        ProductType.UI_CONTRIBUTION\n      ).start();\n    });\n  }\n\n  /** @override */\n  completeDeferredAccountCreation(opt_options) {\n    return this.documentParsed_.then(() => {\n      return new DeferredAccountFlow(this, opt_options || null).start();\n    });\n  }\n\n  /** @override */\n  setOnFlowStarted(callback) {\n    this.callbacks_.setOnFlowStarted(callback);\n  }\n\n  /** @override */\n  setOnFlowCanceled(callback) {\n    this.callbacks_.setOnFlowCanceled(callback);\n  }\n\n  /** @override */\n  createButton(optionsOrCallback, opt_callback) {\n    // This is a minor duplication to allow this code to be sync.\n    return this.buttonApi_.create(optionsOrCallback, opt_callback);\n  }\n\n  /** @override */\n  attachButton(button, optionsOrCallback, opt_callback) {\n    // This is a minor duplication to allow this code to be sync.\n    this.buttonApi_.attach(button, optionsOrCallback, opt_callback);\n  }\n\n  /** @override */\n  attachSmartButton(button, optionsOrCallback, opt_callback) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.SMARTBOX),\n      'Not yet launched!'\n    );\n    this.buttonApi_.attachSmartButton(\n      this,\n      button,\n      optionsOrCallback,\n      opt_callback\n    );\n  }\n\n  /** @override */\n  getPropensityModule() {\n    return Promise.resolve(this.propensityModule_);\n  }\n\n  /** @override\n   * @return {!ClientEventManager}\n   */\n  eventManager() {\n    return this.eventManager_;\n  }\n\n  /** @override */\n  getLogger() {\n    return Promise.resolve(this.logger_);\n  }\n}\n\n/**\n * @param {!Runtime} runtime\n * @return {!Subscriptions}\n */\nfunction createPublicRuntime(runtime) {\n  return /** @type {!Subscriptions} */ ({\n    init: runtime.init.bind(runtime),\n    configure: runtime.configure.bind(runtime),\n    start: runtime.start.bind(runtime),\n    reset: runtime.reset.bind(runtime),\n    clear: runtime.clear.bind(runtime),\n    getEntitlements: runtime.getEntitlements.bind(runtime),\n    linkAccount: runtime.linkAccount.bind(runtime),\n    showLoginPrompt: runtime.showLoginPrompt.bind(runtime),\n    showLoginNotification: runtime.showLoginNotification.bind(runtime),\n    getOffers: runtime.getOffers.bind(runtime),\n    showOffers: runtime.showOffers.bind(runtime),\n    showUpdateOffers: runtime.showUpdateOffers.bind(runtime),\n    showAbbrvOffer: runtime.showAbbrvOffer.bind(runtime),\n    showSubscribeOption: runtime.showSubscribeOption.bind(runtime),\n    showContributionOptions: runtime.showContributionOptions.bind(runtime),\n    waitForSubscriptionLookup: runtime.waitForSubscriptionLookup.bind(runtime),\n    subscribe: runtime.subscribe.bind(runtime),\n    updateSubscription: runtime.updateSubscription.bind(runtime),\n    contribute: runtime.contribute.bind(runtime),\n    completeDeferredAccountCreation: runtime.completeDeferredAccountCreation.bind(\n      runtime\n    ),\n    setOnEntitlementsResponse: runtime.setOnEntitlementsResponse.bind(runtime),\n    setOnLoginRequest: runtime.setOnLoginRequest.bind(runtime),\n    setOnLinkComplete: runtime.setOnLinkComplete.bind(runtime),\n    setOnNativeSubscribeRequest: runtime.setOnNativeSubscribeRequest.bind(\n      runtime\n    ),\n    setOnSubscribeResponse: runtime.setOnSubscribeResponse.bind(runtime),\n    setOnContributionResponse: runtime.setOnContributionResponse.bind(runtime),\n    setOnFlowStarted: runtime.setOnFlowStarted.bind(runtime),\n    setOnFlowCanceled: runtime.setOnFlowCanceled.bind(runtime),\n    saveSubscription: runtime.saveSubscription.bind(runtime),\n    createButton: runtime.createButton.bind(runtime),\n    attachButton: runtime.attachButton.bind(runtime),\n    attachSmartButton: runtime.attachSmartButton.bind(runtime),\n    getPropensityModule: runtime.getPropensityModule.bind(runtime),\n    getLogger: runtime.getLogger.bind(runtime),\n  });\n}\n\n/**\n * @return {!Function}\n * @protected\n */\nexport function getSubscriptionsClassForTesting() {\n  return Subscriptions;\n}\n\n/**\n * @return {!Function}\n * @protected\n */\nexport function getFetcherClassForTesting() {\n  return Fetcher;\n}\n\n/** @package Visible for testing only. */\nexport function getDocClassForTesting() {\n  return Doc;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {addQueryParam, parseQueryString, parseUrl} from '../utils/url';\n\n/**\n * Have to put these in the map to avoid compiler optimization. Due to\n * optimization issues, this map only allows property-style keys. E.g. \"hr1\",\n * as opposed to \"1hr\".\n * @type {!Object<string, number>}\n * @package Visible for testing only.\n */\nexport const CACHE_KEYS = {\n  'nocache': 1,\n  'hr1': 3600000, // 1hr = 1000 * 60 * 60\n  'hr12': 43200000, // 12hr = 1000 * 60 * 60 * 12\n};\n\n/**\n * @return {string}\n */\nexport function feOrigin() {\n  return parseUrl('$frontend$').origin;\n}\n\n/**\n * @param {string} url Relative URL, e.g. \"/service1\".\n * @return {string} The complete URL.\n */\nexport function serviceUrl(url) {\n  return '$frontend$/swg/_/api/v1' + url;\n}\n\n/**\n * @param {string} url  Relative URL, e.g. \"/service1\".\n * @return {string} The complete URL.\n */\nexport function adsUrl(url) {\n  return '$adsServer$' + url;\n}\n\n/**\n * @param {string} url Relative URL, e.g. \"/offersiframe\".\n * @param {string=} prefix\n * @return {string} The complete URL.\n */\nexport function feUrl(url, prefix = '') {\n  // Add cache param.\n  url = feCached('$frontend$' + prefix + '/swg/_/ui/v1' + url);\n\n  // Optionally add jsmode param. This allows us to test against \"aggressively\" compiled Boq JS.\n  const query = parseQueryString(self.location.hash);\n  const boqJsMode = query['swg.boqjsmode'];\n  if (boqJsMode !== undefined) {\n    url = addQueryParam(url, 'jsmode', boqJsMode);\n  }\n\n  return url;\n}\n\n/**\n * @param {string} url FE URL.\n * @return {string} The complete URL including cache param.\n */\nexport function feCached(url) {\n  return addQueryParam(url, '_', cacheParam('$frontendCache$'));\n}\n\n/**\n * @param {!Object<string, ?>} args\n * @return {!Object<string, ?>}\n */\nexport function feArgs(args) {\n  return Object.assign(args, {\n    '_client': 'SwG $internalRuntimeVersion$',\n  });\n}\n\n/**\n * @param {string} cacheKey\n * @return {string}\n * @package Visible for testing only.\n */\nexport function cacheParam(cacheKey) {\n  let period = CACHE_KEYS[cacheKey];\n  if (period == null) {\n    period = 1;\n  }\n  if (period === 0) {\n    return '_';\n  }\n  const now = Date.now();\n  return String(period <= 1 ? now : Math.floor(now / period));\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from '../utils/dom';\nimport {setImportantStyles} from '../utils/style';\nimport {feArgs, feUrl} from './services';\nimport {SmartBoxMessage} from '../proto/api_messages';\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n};\n\n/**\n * @enum {string}\n */\nexport const Theme = {\n  LIGHT: 'light',\n  DARK: 'dark',\n};\n\n/**\n * The class for Smart button Api.\n */\nexport class SmartSubscriptionButtonApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!Element} button\n   * @param {!../api/subscriptions.SmartButtonOptions} options\n   * @param {function()=} callback\n   */\n  constructor(deps, button, options, callback) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!Document} */\n    this.doc_ = this.win_.document;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_,\n      'iframe',\n      iframeAttributes\n    ));\n\n    /** @private @const {!Element} */\n    this.button_ = button;\n\n    /** @private {!../api/subscriptions.SmartButtonOptions} */\n    this.options_ = options;\n\n    /** @private const {function()=} */\n    this.callback_ = callback;\n\n    /** @private @const {string} */\n    this.src_ = feUrl('/smartboxiframe');\n\n    const frontendArguments = {\n      'productId': this.deps_.pageConfig().getProductId(),\n      'publicationId': this.deps_.pageConfig().getPublicationId(),\n      'theme': (this.options_ && this.options_.theme) || 'light',\n      'lang': (this.options_ && this.options_.lang) || 'en',\n    };\n    const messageTextColor = this.options_ && this.options_.messageTextColor;\n    if (messageTextColor) {\n      frontendArguments['messageTextColor'] = messageTextColor;\n    }\n\n    /** @private @const {!Object} */\n    this.args_ = feArgs(frontendArguments);\n  }\n\n  /**\n   * @param {SmartBoxMessage} smartBoxMessage\n   */\n  handleSmartBoxClick_(smartBoxMessage) {\n    if (smartBoxMessage && smartBoxMessage.getIsClicked()) {\n      if (!this.callback_) {\n        throw new Error('No callback!');\n      }\n      this.callback_();\n      return;\n    }\n  }\n\n  /**\n   * Make a call to build button content and listens for the 'click' message.\n   * @return {!Element}\n   */\n  start() {\n    /**\n     * Add a callback to the button itself to fire the iframe's button click\n     * action when user tabs to the container button and hits enter.\n     */\n    this.button_.addEventListener('click', () => {\n      this.callback_();\n    });\n\n    setImportantStyles(this.iframe_, {\n      'opacity': 1,\n      'position': 'absolute',\n      'top': 0,\n      'bottom': 0,\n      'left': 0,\n      'height': '100%',\n      'right': 0,\n      'width': '100%',\n    });\n    this.button_.appendChild(this.iframe_);\n    const analyticsContext = this.deps_\n      .analytics()\n      .getContext()\n      .toArray();\n    this.args_['analyticsContext'] = analyticsContext;\n    this.activityPorts_\n      .openIframe(this.iframe_, this.src_, this.args_)\n      .then(port => {\n        port.on(SmartBoxMessage, this.handleSmartBoxClick_.bind(this));\n      });\n    return this.iframe_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst PREFIX = 'subscribe.google.com';\n\nexport class Storage {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Object<string, !Promise<?string>>} */\n    this.values_ = {};\n  }\n\n  /**\n   * @param {string} key\n   * @return {!Promise<?string>}\n   */\n  get(key) {\n    if (!this.values_[key]) {\n      this.values_[key] = new Promise(resolve => {\n        if (this.win_.sessionStorage) {\n          try {\n            resolve(this.win_.sessionStorage.getItem(storageKey(key)));\n          } catch (e) {\n            // Ignore error.\n            resolve(null);\n          }\n        } else {\n          resolve(null);\n        }\n      });\n    }\n    return this.values_[key];\n  }\n\n  /**\n   * @param {string} key\n   * @param {string} value\n   * @return {!Promise}\n   */\n  set(key, value) {\n    this.values_[key] = Promise.resolve(value);\n    return new Promise(resolve => {\n      if (this.win_.sessionStorage) {\n        try {\n          this.win_.sessionStorage.setItem(storageKey(key), value);\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n      resolve();\n    });\n  }\n\n  /**\n   * @param {string} key\n   * @return {!Promise}\n   */\n  remove(key) {\n    delete this.values_[key];\n    return new Promise(resolve => {\n      if (this.win_.sessionStorage) {\n        try {\n          this.win_.sessionStorage.removeItem(storageKey(key));\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n      resolve();\n    });\n  }\n}\n\n/**\n * @param {string} key\n * @return {string}\n */\nfunction storageKey(key) {\n  return PREFIX + ':' + key;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {DeferredAccountCreationResponse} from '../api/deferred-account-creation';\nimport {feArgs, feUrl} from './services';\n\nexport class WaitForSubscriptionLookupApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?Promise} accountPromise\n   */\n  constructor(deps, accountPromise) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private {?Promise} */\n    this.accountPromise_ = accountPromise || null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/waitforsubscriptionlookupiframe'),\n      feArgs({\n        publicationId: deps.pageConfig().getPublicationId(),\n        productId: deps.pageConfig().getProductId(),\n      }),\n      /* shouldFadeBody */ true,\n      /* hasLoadingIndicator */ true\n    );\n  }\n\n  /**\n   * Starts the Login Flow.\n   * @return {!Promise}\n   */\n  start() {\n    this.openViewPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_\n    );\n\n    return this.accountPromise_.then(\n      account => {\n        // Account was found.\n        this.dialogManager_.completeView(this.activityIframeView_);\n        return account;\n      },\n      reason => {\n        this.dialogManager_.completeView(this.activityIframeView_);\n        throw reason;\n      }\n    );\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {View} from '../components/view';\nimport {createElement} from '../utils/dom';\nimport {isCancelError} from '../utils/errors';\nimport {acceptPortResultData} from '../utils/activity-utils';\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n};\n\n/**\n * Class to build and render Activity iframe view.\n */\nexport class ActivityIframeView extends View {\n  /**\n   * @param {!Window} win\n   * @param {!../components/activities.ActivityPorts} activityPorts\n   * @param {string} src\n   * @param {!Object<string, ?>=} args\n   * @param {boolean=} shouldFadeBody\n   * @param {boolean=} hasLoadingIndicator\n   */\n  constructor(\n    win,\n    activityPorts,\n    src,\n    args,\n    shouldFadeBody = false,\n    hasLoadingIndicator = false\n  ) {\n    super();\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Document} */\n    this.doc_ = this.win_.document;\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_,\n      'iframe',\n      iframeAttributes\n    ));\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = activityPorts;\n\n    /** @private @const {string} */\n    this.src_ = src;\n\n    /** @private @const {!Object<string, ?>} */\n    this.args_ = args || {};\n\n    /** @private @const {boolean} */\n    this.shouldFadeBody_ = shouldFadeBody;\n\n    /** @private @const {boolean} */\n    this.hasLoadingIndicator_ = hasLoadingIndicator;\n\n    /** @private {?../components/activities.ActivityIframePort} */\n    this.port_ = null;\n\n    /**\n     * @private\n     * {?function<!web-activities/activity-ports.ActivityIframePort|!Promise>}\n     */\n    this.portResolver_ = null;\n\n    /**\n     * @private @const\n     * {!Promise<!web-activities/activity-ports.ActivityIframePort>}\n     */\n    this.portPromise_ = new Promise(resolve => {\n      this.portResolver_ = resolve;\n    });\n  }\n\n  /** @override */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /** @override */\n  init(dialog) {\n    return this.activityPorts_\n      .openIframe(this.iframe_, this.src_, this.args_)\n      .then(port => this.onOpenIframeResponse_(port, dialog));\n  }\n\n  /**\n   * Returns if document should fade for this view.\n   * @return {boolean}\n   */\n  shouldFadeBody() {\n    return this.shouldFadeBody_;\n  }\n\n  /**\n   * Returns if the view shows loading indicator.\n   * @return {boolean}\n   */\n  hasLoadingIndicator() {\n    return this.hasLoadingIndicator_;\n  }\n\n  /**\n   * @param {!../components/activities.ActivityIframePort} port\n   * @param {!../components/dialog.Dialog} dialog\n   * @return {!Promise}\n   */\n  onOpenIframeResponse_(port, dialog) {\n    this.port_ = port;\n    this.portResolver_(port);\n\n    this.port_.onResizeRequest(height => {\n      dialog.resizeView(this, height);\n    });\n\n    return this.port_.whenReady();\n  }\n\n  /**\n   * @return {!Promise<!../components/activities.ActivityIframePort>}\n   * @private\n   */\n  getPortPromise_() {\n    return this.portPromise_;\n  }\n\n  /**\n   * @param {!Object} data\n   */\n  messageDeprecated(data) {\n    this.getPortPromise_().then(port => {\n      port.messageDeprecated(data);\n    });\n  }\n\n  /**\n   * Handles the message received by the port.\n   * @param {function(!Object<string, string|boolean>)} callback\n   */\n  onMessageDeprecated(callback) {\n    this.getPortPromise_().then(port => {\n      port.onMessageDeprecated(callback);\n    });\n  }\n  /**\n   * @param {!function(new: T)}  message\n   * @param {function(../proto/api_messages.Message)} callback\n   * @template T\n   */\n  on(message, callback) {\n    this.getPortPromise_().then(port => {\n      port.on(message, callback);\n    });\n  }\n\n  /**\n   * @param {!../proto/api_messages.Message} request\n   */\n  execute(request) {\n    this.getPortPromise_().then(port => {\n      port.execute(request);\n    });\n  }\n\n  /**\n   * Accepts results from the caller.\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {\n    return this.getPortPromise_().then(port => port.acceptResult());\n  }\n\n  /**\n   * Accepts results from the caller and verifies origin.\n   * @param {string} requireOrigin\n   * @param {boolean} requireOriginVerified\n   * @param {boolean} requireSecureChannel\n   * @return {!Promise<!Object>}\n   */\n  acceptResultAndVerify(\n    requireOrigin,\n    requireOriginVerified,\n    requireSecureChannel\n  ) {\n    return this.getPortPromise_().then(port => {\n      return acceptPortResultData(\n        port,\n        requireOrigin,\n        requireOriginVerified,\n        requireSecureChannel\n      );\n    });\n  }\n\n  /**\n   * Completes the flow.\n   * @return {!Promise}\n   */\n  whenComplete() {\n    return this.acceptResult();\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  onCancel(callback) {\n    this.acceptResult().catch(reason => {\n      if (isCancelError(reason)) {\n        callback();\n      }\n      throw reason;\n    });\n  }\n\n  /** @override */\n  resized() {\n    if (this.port_) {\n      this.port_.resized();\n    }\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from '../utils/dom';\n\n/**\n * Loading indicator class. Builds the loading indicator view to be injected in\n * parent element <iframe class=\"swg-dialog\"> element. Provides methods to\n * show/hide loading indicator.\n */\nexport class LoadingView {\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.loadingContainer_ = createElement(\n      this.doc_,\n      'swg-loading-container',\n      {}\n    );\n\n    /** @private @const {!Element} */\n    this.loading_ = createElement(this.doc_, 'swg-loading', {});\n    this.loadingContainer_.appendChild(this.loading_);\n\n    this.loadingContainer_.style.setProperty('display', 'none', 'important');\n\n    // Build the animated loading indicator.\n    this.buildLoadingIndicator_();\n  }\n\n  /**\n   * Gets the populated loading container.\n   * @return {!Element}\n   */\n  getElement() {\n    return this.loadingContainer_;\n  }\n\n  /**\n   * Shows the loading indicator within the container element.\n   */\n  show() {\n    this.loadingContainer_.style.removeProperty('display');\n  }\n\n  /**\n   * Hides the loading indicator within the container element.\n   */\n  hide() {\n    this.loadingContainer_.style.setProperty('display', 'none', 'important');\n  }\n\n  /**\n   * Populates the loading indivicator. The populated element\n   * can be added in any view, when required.\n   * @private\n   */\n  buildLoadingIndicator_() {\n    const loadingContainer = this.loading_;\n\n    const loadingIndicatorTopContainer = createElement(\n      this.doc_,\n      'swg-loading-animate',\n      {}\n    );\n    loadingContainer.appendChild(loadingIndicatorTopContainer);\n\n    const loadingIndicatorChildContainer = createElement(\n      this.doc_,\n      'swg-loading-image',\n      {}\n    );\n    loadingIndicatorTopContainer.appendChild(loadingIndicatorChildContainer);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from '../utils/dom';\nimport {resetStyles, setImportantStyles} from '../utils/style';\nimport {transition} from '../utils/animation';\n\n/** @const {!Object<string, string|number>} */\nexport const toastImportantStyles = {\n  'height': 0,\n};\n\n/** @typedef {{\n *    text: string,\n *    action: ({label: string, handler: function()}|undefined)\n *  }}\n */\nexport let ToastSpecDef;\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n  'class': 'swg-toast',\n};\n\n/**\n * The class Notification toast.\n */\nexport class Toast {\n  /**\n   * @param {!../runtime/deps.DepsDef} deps\n   * @param {string} src\n   * @param {!Object<string, ?>} args\n   */\n  constructor(deps, src, args) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = deps.doc();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {string} */\n    this.src_ = src;\n\n    /** @private @const {!Object<string, ?>} */\n    this.args_ = args;\n\n    /** @private {?Promise} */\n    this.animating_ = null;\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_.getWin().document,\n      'iframe',\n      iframeAttributes\n    ));\n\n    setImportantStyles(this.iframe_, toastImportantStyles);\n\n    /** @private @const {!Promise} */\n    this.ready_ = new Promise(resolve => {\n      this.iframe_.onload = resolve;\n    });\n  }\n\n  /**\n   * Returns the iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * Opens the notification toast.\n   * @return {!Promise}\n   */\n  open() {\n    this.doc_.getBody().appendChild(this.iframe_); // Fires onload.\n    return this.buildToast_();\n  }\n\n  /**\n   * Builds the content of the iframe. On load, animates the toast.\n   */\n  buildToast_() {\n    const toastDurationSeconds = 7;\n    return this.activityPorts_\n      .openIframe(this.iframe_, this.src_, this.args_)\n      .then(port => {\n        return port.whenReady();\n      })\n      .then(() => {\n        resetStyles(this.iframe_, ['height']);\n\n        this.animate_(() => {\n          setImportantStyles(this.iframe_, {\n            'transform': 'translateY(100%)',\n            'opactiy': 1,\n            'visibility': 'visible',\n          });\n          return transition(\n            this.iframe_,\n            {\n              'transform': 'translateY(0)',\n              'opacity': 1,\n              'visibility': 'visible',\n            },\n            400,\n            'ease-out'\n          );\n        });\n\n        // Close the Toast after the specified duration.\n        this.doc_.getWin().setTimeout(() => {\n          this.close();\n        }, (toastDurationSeconds + 1) * 1000);\n      });\n  }\n\n  /**\n   * @param {function():!Promise} callback\n   * @return {!Promise}\n   * @private\n   */\n  animate_(callback) {\n    const wait = this.animating_ || Promise.resolve();\n    return (this.animating_ = wait\n      .then(\n        () => {\n          return callback();\n        },\n        () => {\n          // Ignore errors to make sure animations don't get stuck.\n        }\n      )\n      .then(() => {\n        this.animating_ = null;\n      }));\n  }\n\n  /**\n   * Closes the toast.\n   * @return {!Promise}\n   */\n  close() {\n    return this.animate_(() => {\n      // Remove the toast from the DOM after animation is complete.\n      this.doc_.getWin().setTimeout(() => {\n        this.doc_.getBody().removeChild(this.iframe_);\n        return Promise.resolve();\n      }, 500);\n\n      return transition(\n        this.iframe_,\n        {\n          'transform': 'translateY(100%)',\n          'opacity': 1,\n          'visibility': 'visible',\n        },\n        400,\n        'ease-out'\n      );\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {!../components/activities.ActivityPortDef} port\n * @param {string} requireOrigin\n * @param {boolean} requireOriginVerified\n * @param {boolean} requireSecureChannel\n * @return {!Promise<!Object>}\n */\nexport function acceptPortResultData(\n  port,\n  requireOrigin,\n  requireOriginVerified,\n  requireSecureChannel\n) {\n  return port.acceptResult().then(result => {\n    if (\n      result.origin != requireOrigin ||\n      (requireOriginVerified && !result.originVerified) ||\n      (requireSecureChannel && !result.secureChannel)\n    ) {\n      throw new Error('channel mismatch');\n    }\n    return result.data;\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {setImportantStyles} from './style';\n\n/**\n * Returns a promise which is resolved after the given duration of animation\n * @param {!Element} el - Element to be observed.\n * @param {!Object<string, string|number>} props - properties to be animated.\n * @param {number} durationMillis - duration of animation.\n * @param {string} curve - transition function for the animation.\n * @return {!Promise} Promise which resolves once the animation is done playing.\n */\nexport function transition(el, props, durationMillis, curve) {\n  const win = el.ownerDocument.defaultView;\n  const previousTransitionValue = el.style.transition || '';\n  return new Promise(resolve => {\n    win.setTimeout(() => {\n      win.setTimeout(resolve, durationMillis);\n      const tr = `${durationMillis}ms ${curve}`;\n      setImportantStyles(\n        el,\n        Object.assign(\n          {\n            'transition': `transform ${tr}, opacity ${tr}`,\n          },\n          props\n        )\n      );\n    });\n  }).then(() => {\n    setImportantStyles(el, {\n      'transition': previousTransitionValue,\n    });\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './log';\n\n/**\n * Character mapping from base64url to base64.\n * @const {!Object<string, string>}\n */\nconst base64UrlDecodeSubs = {'-': '+', '_': '/', '.': '='};\n\n/**\n * Character mapping from base64 to base64url.\n * @const {!Object<string, string>}\n */\nconst base64UrlEncodeSubs = {'+': '-', '/': '_'};\n\n/**\n * Converts a string which holds 8-bit code points, such as the result of atob,\n * into a Uint8Array with the corresponding bytes.\n * If you have a string of characters, you probably want to be using utf8Encode.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function stringToBytes(str) {\n  const bytes = new Uint8Array(str.length);\n  for (let i = 0; i < str.length; i++) {\n    const charCode = str.charCodeAt(i);\n    assert(charCode <= 255, 'Characters must be in range [0,255]');\n    bytes[i] = charCode;\n  }\n  return bytes;\n}\n\n/**\n * Converts a 8-bit bytes array into a string\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function bytesToString(bytes) {\n  // Intentionally avoids String.fromCharCode.apply so we don't suffer a\n  // stack overflow. #10495, https://jsperf.com/bytesToString-2\n  const array = new Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = String.fromCharCode(bytes[i]);\n  }\n  return array.join('');\n}\n\n/**\n * Interpret a byte array as a UTF-8 string.\n * @param {!BufferSource} bytes\n * @return {string}\n */\nexport function utf8DecodeSync(bytes) {\n  if (typeof TextDecoder !== 'undefined') {\n    return new TextDecoder('utf-8').decode(bytes);\n  }\n  const asciiString = bytesToString(new Uint8Array(bytes.buffer || bytes));\n  return decodeURIComponent(escape(asciiString));\n}\n\n/**\n * Turn a string into UTF-8 bytes.\n * @param {string} string\n * @return {!Uint8Array}\n */\nexport function utf8EncodeSync(string) {\n  if (typeof TextEncoder !== 'undefined') {\n    return new TextEncoder('utf-8').encode(string);\n  }\n  return stringToBytes(unescape(encodeURIComponent(string)));\n}\n\n/**\n * Converts a string which is in base64url encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function base64UrlDecodeToBytes(str) {\n  const encoded = atob(str.replace(/[-_.]/g, ch => base64UrlDecodeSubs[ch]));\n  return stringToBytes(encoded);\n}\n\n/**\n * Converts a bytes array into base64url encoded string.\n * base64url is defined in RFC 4648. It is sometimes referred to as \"web safe\".\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function base64UrlEncodeFromBytes(bytes) {\n  const str = bytesToString(bytes);\n  return btoa(str).replace(/[+/]/g, ch => base64UrlEncodeSubs[ch]);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {!Document} doc\n * @return {string}\n */\nfunction getReadyState(doc) {\n  return /** @type {string} */ (doc['readyState']);\n}\n\n/**\n * Whether the document is ready.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isDocumentReady(doc) {\n  const readyState = getReadyState(doc);\n  return readyState != 'loading' && readyState != 'uninitialized';\n}\n\n/**\n * Whether the document has loaded all the css and sub-resources.\n * @param {!Document} doc\n * @return {boolean}\n */\nfunction isDocumentComplete(doc) {\n  return getReadyState(doc) == 'complete';\n}\n\n/**\n * Calls the callback when document is ready.\n * @param {!Document} doc\n * @param {function(!Document)} callback\n */\nexport function onDocumentReady(doc, callback) {\n  onDocumentState(doc, isDocumentReady, callback);\n}\n\n/**\n * Calls the callback when document's state satisfies the stateFn.\n * @param {!Document} doc\n * @param {function(!Document):boolean} stateFn\n * @param {function(!Document)} callback\n */\nfunction onDocumentState(doc, stateFn, callback) {\n  let ready = stateFn(doc);\n  if (ready) {\n    callback(doc);\n  } else {\n    const readyListener = () => {\n      if (stateFn(doc)) {\n        if (!ready) {\n          ready = true;\n          callback(doc);\n        }\n        doc.removeEventListener('readystatechange', readyListener);\n      }\n    };\n    doc.addEventListener('readystatechange', readyListener);\n  }\n}\n\n/**\n * Returns a promise that is resolved when document is ready.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nexport function whenDocumentReady(doc) {\n  return new Promise(resolve => {\n    onDocumentReady(doc, resolve);\n  });\n}\n\n/**\n * Returns a promise that is resolved when document is complete.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nexport function whenDocumentComplete(doc) {\n  return new Promise(resolve => {\n    onDocumentState(doc, isDocumentComplete, resolve);\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './log';\nimport {setStyles} from './style';\n\n/** @const @enum{string} */\nexport const styleLinkAttrs = {\n  'rel': 'stylesheet',\n  'type': 'text/css',\n};\n\n/** @const {string} */\nexport const styleType = 'text/css';\n\n/** @const {string} */\nexport const styleExistsQuerySelector = 'link[rel=stylesheet][href]';\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!Object<string, string|number|boolean|!Object<string, string|number|boolean>>} attributes\n * @return {!Element} updated element.\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    if (attr == 'style') {\n      setStyles(\n        element,\n        /** @type {!Object<string, string|boolean|number>} */\n        (attributes[attr])\n      );\n    } else {\n      element.setAttribute(\n        attr,\n        /** @type {string|boolean|number} */ (attributes[attr])\n      );\n    }\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!Object<string, string>} attributes\n * @param {?(string|!Node|!ArrayLike<!Node>|!Array<!Node>)=} opt_content\n * @return {!Element} created element.\n */\nexport function createElement(doc, tagName, attributes, opt_content) {\n  const element = doc.createElement(tagName);\n  addAttributesToElement(element, attributes);\n  if (opt_content != null) {\n    if (typeof opt_content == 'string') {\n      element.textContent = opt_content;\n    } else if (opt_content.nodeType) {\n      element.appendChild(opt_content);\n    } else if ('length' in opt_content) {\n      for (let i = 0; i < opt_content.length; i++) {\n        element.appendChild(opt_content[i]);\n      }\n    } else {\n      assert(false, 'Unsupported content: %s', opt_content);\n    }\n  }\n  return element;\n}\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n/**\n * Removes all children from the parent element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  parent.textContent = '';\n}\n\n/**\n * Injects the provided styles in the HEAD section of the document.\n * @param {!../model/doc.Doc} doc The document object.\n * @param {string} styleText The style string.\n * @return {!Element}\n */\nexport function injectStyleSheet(doc, styleText) {\n  const styleElement = createElement(doc.getWin().document, 'style', {\n    'type': styleType,\n  });\n  styleElement.textContent = styleText;\n  doc.getHead().appendChild(styleElement);\n  return styleElement;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node=} opt_stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while (\n    (currentElement = currentElement.parentNode) &&\n    currentElement != opt_stopNode\n  );\n  return false;\n}\n\n/**\n * Polyfill of the `Node.isConnected` API. See\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected.\n * @param {!Node} node\n * @return {boolean}\n */\nexport function isConnected(node) {\n  // Ensure that node is attached if specified. This check uses a new and\n  // fast `isConnected` API and thus only checked on platforms that have it.\n  // See https://www.chromestatus.com/feature/5676110549352448.\n  if ('isConnected' in node) {\n    return node['isConnected'];\n  }\n  // Polyfill.\n  const root = node.ownerDocument && node.ownerDocument.documentElement;\n  return (root && root.contains(node)) || false;\n}\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isEdgeBrowser(win) {\n  const nav = win.navigator;\n  return /Edge/i.test(nav && nav.userAgent);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createAbortError, isAbortError} from 'web-activities/activity-ports';\n\n/**\n * Whether the specified error is an AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {*} error\n * @return {boolean}\n */\nexport function isCancelError(error) {\n  return isAbortError(error);\n}\n\n/**\n * Creates or emulates a DOMException of AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {!Window} win\n * @param {string=} opt_message\n * @return {!DOMException}\n */\nexport function createCancelError(win, opt_message) {\n  return createAbortError(win, opt_message);\n}\n\n/**\n * A set of error utilities combined in a class to allow easy stubbing in tests.\n */\nexport class ErrorUtils {\n  /**\n   * @param {!Error} error\n   */\n  static throwAsync(error) {\n    setTimeout(() => {\n      throw error;\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {!Object<string, string>} map\n * @param {?string|?Element} langOrElement\n * @return {?string}\n */\nexport function msg(map, langOrElement) {\n  const lang = !langOrElement\n    ? ''\n    : typeof langOrElement == 'string'\n    ? langOrElement\n    : langOrElement.lang ||\n      (langOrElement.ownerDocument &&\n        langOrElement.ownerDocument.documentElement.lang);\n  let search = ((lang && lang.toLowerCase()) || 'en').replace(/_/g, '-');\n  while (search) {\n    if (search in map) {\n      return map[search];\n    }\n    const dash = search.lastIndexOf('-');\n    search = dash != -1 ? search.substring(0, dash) : '';\n  }\n  // \"en\" is always default.\n  return map['en'];\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\nimport {isObject} from './types';\n\n/**\n * Recreates objects with prototype-less copies.\n * @param {!JsonObject} obj\n * @return {!JsonObject}\n */\nexport function recreateNonProtoObject(obj) {\n  const copy = Object.create(null);\n  for (const k in obj) {\n    if (!hasOwnProperty(obj, k)) {\n      continue;\n    }\n    const v = obj[k];\n    copy[k] = isObject(v) ? recreateNonProtoObject(v) : v;\n  }\n  return /** @type {!JsonObject} */ (copy);\n}\n\n/**\n * Returns a value from an object for a field-based expression. The expression\n * is a simple nested dot-notation of fields, such as `field1.field2`. If any\n * field in a chain does not exist or is not an object, the returned value will\n * be `undefined`.\n *\n * @param {!JsonObject} obj\n * @param {string} expr\n * @return {*}\n */\nexport function getValueForExpr(obj, expr) {\n  // The `.` indicates \"the object itself\".\n  if (expr == '.') {\n    return obj;\n  }\n  // Otherwise, navigate via properties.\n  const parts = expr.split('.');\n  let value = obj;\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    if (!part) {\n      value = undefined;\n      break;\n    }\n    if (\n      !isObject(value) ||\n      value[part] === undefined ||\n      !hasOwnProperty(value, part)\n    ) {\n      value = undefined;\n      break;\n    }\n    value = value[part];\n  }\n  return value;\n}\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */ (JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * @param {*} obj\n * @param {string} key\n * @return {boolean}\n */\nfunction hasOwnProperty(obj, key) {\n  if (obj == null || typeof obj != 'object') {\n    return false;\n  }\n  return Object.prototype.hasOwnProperty.call(\n    /** @type {!Object} */ (obj),\n    key\n  );\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {base64UrlDecodeToBytes, utf8DecodeSync} from './bytes';\nimport {tryParseJson} from './json';\n\n/**\n * @typedef {{\n *   header: (?JsonObject|undefined),\n *   payload: (?JsonObject|undefined),\n *   verifiable: string,\n *   sig: string,\n * }}\n */\nlet JwtTokenInternalDef;\n\n/**\n * Provides helper methods to decode and verify JWT tokens.\n */\nexport class JwtHelper {\n  constructor() {}\n\n  /**\n   * Decodes JWT token and returns its payload.\n   * @param {string} encodedToken\n   * @return {?JsonObject|undefined}\n   */\n  decode(encodedToken) {\n    return this.decodeInternal_(encodedToken).payload;\n  }\n\n  /**\n   * @param {string} encodedToken\n   * @return {!JwtTokenInternalDef}\n   * @private\n   */\n  decodeInternal_(encodedToken) {\n    // See https://jwt.io/introduction/\n    /**\n     * Throws error about invalid token.\n     */\n    function invalidToken() {\n      throw new Error(`Invalid token: \"${encodedToken}\"`);\n    }\n\n    // Encoded token has three parts: header.payload.sig\n    // Note! The padding is not allowed by JWT spec:\n    // http://self-issued.info/docs/draft-goland-json-web-token-00.html#rfc.section.5\n    const parts = encodedToken.split('.');\n    if (parts.length != 3) {\n      invalidToken();\n    }\n    const headerUtf8Bytes = base64UrlDecodeToBytes(parts[0]);\n    const payloadUtf8Bytes = base64UrlDecodeToBytes(parts[1]);\n    return {\n      header: tryParseJson(utf8DecodeSync(headerUtf8Bytes), invalidToken),\n      payload: tryParseJson(utf8DecodeSync(payloadUtf8Bytes), invalidToken),\n      verifiable: `${parts[0]}.${parts[1]}`,\n      sig: parts[2],\n    };\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Debug logger, only log message if #swg.log=1\n * @param {...*} var_args [decription]\n */\n\n/* eslint-disable */\n\nfunction debugLog(var_args) {\n  if (/swg.debug=1/.test(self.location.hash)) {\n    const logArgs = Array.prototype.slice.call(arguments, 0);\n    logArgs.unshift('[Subscriptions]');\n    log.apply(log, logArgs);\n  }\n}\n\n/**\n * @param  {...*} var_args [description]\n */\nfunction log(var_args) {\n  console.log.apply(console, arguments);\n}\n\n/**\n * Throws an error if the first argument isn't trueish.\n *\n * Supports argument substitution into the message via %s placeholders.\n *\n * Throws an error object that has two extra properties:\n * - associatedElement: This is the first element provided in the var args.\n *   It can be used for improved display of error messages.\n * - messageArray: The elements of the substituted message as non-stringified\n *   elements in an array. When e.g. passed to console.error this yields\n *   native displays of things like HTML elements.\n *\n * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n *     not evaluate to true.\n * @param {string=} opt_message The assertion message\n * @param {...*} var_args Arguments substituted into %s in the message.\n * @return {T} The value of shouldBeTrueish.\n * @template T\n */\nfunction assert(shouldBeTrueish, opt_message, var_args) {\n  let firstElement;\n  if (!shouldBeTrueish) {\n    const message = opt_message || 'Assertion failed';\n    const splitMessage = message.split('%s');\n    const first = splitMessage.shift();\n    let formatted = first;\n    const messageArray = [];\n    pushIfNonEmpty(messageArray, first);\n    for (let i = 2; i < arguments.length; i++) {\n      const val = arguments[i];\n      if (val && val.tagName) {\n        firstElement = val;\n      }\n      const nextConstant = splitMessage.shift();\n      messageArray.push(val);\n      pushIfNonEmpty(messageArray, nextConstant.trim());\n      formatted += toString(val) + nextConstant;\n    }\n    const e = new Error(formatted);\n    e.fromAssert = true;\n    e.associatedElement = firstElement;\n    e.messageArray = messageArray;\n    throw e;\n  }\n  return shouldBeTrueish;\n}\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\nmodule.exports = {\n  assert,\n  debugLog,\n  log\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {Object=} opt_initial This should typically be an object literal.\n * @return {!Object}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Implements `Array.find()` method that's not yet available in all browsers.\n *\n * @param {?Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} predicate\n * @return {?T}\n * @template T\n */\nexport function findInArray(array, predicate) {\n  if (!array) {\n    return null;\n  }\n  const len = array.length || 0;\n  if (len > 0) {\n    for (let i = 0; i < len; i++) {\n      const other = array[i];\n      if (predicate(other, i, array)) {\n        return other;\n      }\n    }\n  }\n  return null;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from './dom';\n\nexport class Preconnect {\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @param {string} url\n   */\n  preconnect(url) {\n    this.pre_(url, 'preconnect');\n  }\n\n  /**\n   * @param {string} url\n   */\n  dnsPrefetch(url) {\n    this.pre_(url, 'dns-prefetch');\n  }\n\n  /**\n   * @param {string} url\n   */\n  prefetch(url) {\n    this.pre_(url, 'preconnect prefetch');\n  }\n\n  /**\n   * @param {string} url\n   * @param {string} as\n   */\n  preload(url, as) {\n    this.pre_(url, 'preconnect preload', as);\n  }\n\n  /**\n   * @param {string} url\n   * @param {string} rel\n   * @param {?string=} opt_as\n   * @private\n   */\n  pre_(url, rel, opt_as) {\n    // <link rel=\"prefetch\" href=\"...\" as=\"\">\n    const linkEl = createElement(this.doc_, 'link', {\n      'rel': rel,\n      'href': url,\n    });\n    if (opt_as) {\n      linkEl.setAttribute('as', opt_as);\n    }\n    this.doc_.head.appendChild(linkEl);\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns an array of random values.  The length of the array is numInts.  Each\n * int will be >= 0 and < maxVal.\n * @param {!number} numInts\n * @param {!number} maxVal\n */\nexport function getRandomInts(numInts, maxVal) {\n  // Ensure array type is appropriate for the max value (performance)\n  const arr =\n    maxVal < 256\n      ? new Uint8Array(numInts)\n      : maxVal < 32768\n      ? new Uint16Array(numInts)\n      : new Uint32Array(numInts);\n\n  if (crypto && crypto.getRandomValues) {\n    crypto.getRandomValues(arr);\n    for (let i = arr.length - 1; i > -1; i--) {\n      arr[i] = arr[i] % maxVal;\n    }\n  } else {\n    // For older browsers\n    for (let i = arr.length - 1; i > -1; i--) {\n      arr[i] = Math.floor(Math.random() * maxVal);\n    }\n  }\n\n  return arr;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getRandomInts} from './random';\n\nconst CHARS = '0123456789ABCDEF';\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes removed and character after to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {!function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const length = str.length;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = (hash * 33) ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n\n/**\n * Ensures the passed value is safe to use for character 19 per rfc4122,\n * sec. 4.1.5.  \"Sets the high bits of clock sequence\".\n * @param {!number} v\n */\nfunction getChar19(v) {\n  return CHARS[(v & 0x3) | 0x8];\n}\n\n/**\n * The returned identifier will always be an 8 digit valid hexidecimal number\n * and will be unique for each MS within a given month.\n * @return {string}\n */\nfunction getMonthlyTimeIdentifier() {\n  const hexTime = Date.now().toString(16);\n  return hexTime.substring(hexTime.length - 8).toUpperCase();\n}\n\n/**\n * Generates a RFC 4122 V4 UUID. Ex: \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\n * The first 8 digits are unique for the millisecond of the month.  The rest\n * are randomly generated.\n */\nexport function getUuid() {\n  let uuid = getMonthlyTimeIdentifier() + '-';\n  let rIndex = 0;\n  const rands = getRandomInts(23, 16);\n  for (let i = 9; i < 36; i++) {\n    switch (i) {\n      case 13:\n      case 18:\n      case 23:\n        uuid += '-';\n        break;\n      case 14:\n        uuid += '4';\n        break;\n      case 19:\n        uuid += getChar19(rands[rIndex++]);\n        break;\n      default:\n        uuid += CHARS[rands[rIndex++]];\n        break;\n    }\n  }\n  return uuid;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './object.js';\nimport {startsWith} from './string';\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n/**\n * Default styles to be set for top level friendly iframe.\n * Some attributes are not included such as height, left, margin-left; since\n * these attributes are updated by @media queries and having these values\n * defined here as !important does not work on IE/edge browsers.\n * @const {!Object<string, string|number>}\n */\nexport const defaultStyles = {\n  'align-content': 'normal',\n  'animation': 'none',\n  'align-items': 'normal',\n  'align-self': 'auto',\n  'alignment-baseline': 'auto',\n  'backface-visibility': 'hidden',\n  'background-clip': 'border-box',\n  'background-image': 'none',\n  'baseline-shift': '0',\n  'block-size': 'auto',\n  'border': 'none',\n  'border-collapse': 'separate',\n  'bottom': '0',\n  'box-sizing': 'border-box',\n  'break-after': 'auto',\n  'break-before': 'auto',\n  'break-inside': 'auto',\n  'buffered-rendering': 'auto',\n  'caption-side': 'top',\n  'caret-color': 'rgb(51, 51, 51)',\n  'clear': 'none',\n  'color': 'rgb(51, 51, 51)',\n  'color-rendering': 'auto',\n  'column-count': 'auto',\n  'column-fill': 'balance',\n  'column-gap': 'normal',\n  'column-rule-color': 'rgb(51, 51, 51)',\n  'column-rule-style': 'none',\n  'column-rule-width': '0',\n  'column-span': 'none',\n  'column-width': 'auto',\n  'contain': 'none',\n  'counter-increment': 'none',\n  'counter-reset': 'none',\n  'cursor': 'auto',\n  'direction': 'inherit',\n  'display': 'block',\n  'empty-cells': 'show',\n  'filter': 'none',\n  'flex': 'none', // flex-grow, flex-shrink, and flex-basis.\n  'flex-flow': 'row nowrap', // flex-direction, flex-wrap.\n  'float': 'none',\n  'flood-color': 'rgb(0, 0, 0)',\n  'flood-opacity': '1',\n  'font': 'none',\n  'font-size': 'medium',\n  'font-family': '',\n  'height': 'auto',\n  'hyphens': 'manual',\n  'image-rendering': 'auto',\n  'inline-size': '', // Setting to 'auto' will not allow override.\n  'isolation': 'auto',\n  'justify-content': 'normal',\n  'justify-items': 'normal',\n  'justify-self': 'auto',\n  'letter-spacing': 'normal',\n  'lighting-color': 'rgb(255, 255, 255)',\n  'line-break': 'auto',\n  'line-height': 'normal',\n  'mask': 'none',\n  'max-block-size': 'none',\n  'max-height': 'none',\n  'max-inline-size': 'none',\n  'max-width': 'none',\n  'min-block-size': 'none',\n  'min-height': '0',\n  'min-inline-size': '0',\n  'min-width': '0',\n  'mix-blend-mode': 'normal',\n  'object-fit': 'fill', // Important for Safari browser.\n  'offset-distance': 'none', // Chrome only (Experimental).\n  'offset-path': 'none', // Chrome only (Experimental).\n  'offset-rotate': 'auto 0deg', // Chrome only (Experimental).\n  'opacity': '1',\n  'order': '0',\n  'orphans': '2',\n  'outline': 'none',\n  'overflow-anchor': 'auto',\n  'overflow-wrap': 'normal',\n  'overflow': 'visible',\n  'padding': '0',\n  'page': '',\n  'perspective': 'none',\n  'pointer-events': 'auto',\n  'position': 'static',\n  'quotes': '',\n  'resize': 'none',\n  'right': '0',\n  'scroll-behavior': 'auto',\n  'tab-size': '8', // Only Chrome, Safari (Experimental).\n  'table-layout': 'auto',\n  'text-align': 'start',\n  'text-align-last': 'auto',\n  'text-anchor': 'start',\n  'text-combine-upright': 'none',\n  'text-decoration': 'none',\n  'text-indent': '0',\n  'text-orientation': 'mixed',\n  'text-overflow': 'clip',\n  'text-rendering': 'auto',\n  'text-shadow': 'none',\n  'text-size-adjust': 'auto',\n  'text-transform': 'none',\n  'text-underline-position': 'auto',\n  'top': 'auto',\n  'touch-action': 'auto',\n  'transform': 'none',\n  'transition': 'none 0s ease 0s',\n  'unicode-bidi': 'normal',\n  'user-select': 'auto',\n  'vector-effect': 'none',\n  'vertical-align': 'baseline',\n  'visibility': 'visible',\n  'white-space': 'normal',\n  'widows': '2',\n  'word-break': 'normal',\n  'word-spacing': '0',\n  'word-wrap': 'normal',\n  'writing-mode': 'horizontal-tb',\n  'zoom': '1',\n  'z-index': 'auto',\n};\n\n/** @const {string} */\nexport const googleFontsUrl =\n  'https://fonts.googleapis.com/css?family=Google+Sans';\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, string|number>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n      getVendorJsPropertyName(styles, k),\n      styles[k].toString(),\n      'important'\n    );\n  }\n}\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {Element} element\n * @param {string} property\n * @param {?string|number|boolean} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(\n    element.style,\n    property,\n    opt_bypassCache\n  );\n  if (propertyName) {\n    element.style[propertyName] = /** @type {string} */ (opt_units\n      ? value + opt_units\n      : value);\n  }\n}\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(\n    element.style,\n    property,\n    opt_bypassCache\n  );\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, ?string|number|boolean>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return value + 'px';\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x}, ${opt_y})`;\n}\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n    /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g,\n    '($1,$2,$3, 1)'\n  );\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */ (win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */ (style) || map();\n}\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n\n/**\n * Resets all the styles of an element to a given value. Defaults to null.\n * The valid values are 'inherit', 'initial', 'unset' or null.\n * @param {!Element} element\n */\nexport function resetAllStyles(element) {\n  setImportantStyles(element, defaultStyles);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return typeof value === 'number' && isFinite(value);\n}\n\n/**\n * Determines if value is of FormData type.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFormData(value) {\n  return toString(value) === '[object FormData]';\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * True if the value is a function.\n * @param {*} value\n */\nexport function isFunction(value) {\n  return value !== null && typeof value === 'function';\n}\n\n/**\n * True if the value is either true or false.\n * @param {?*} value\n */\nexport function isBoolean(value) {\n  return value === true || value === false;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isArray} from './types';\n\n/**\n  @typedef {{\n    href: string,\n    protocol: string,\n    host: string,\n    hostname: string,\n    port: string,\n    pathname: string,\n    search: string,\n    hash: string,\n    origin: string,\n  }}\n  */\nlet LocationDef;\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {Object<string, !LocationDef>}\n */\nlet cache;\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!LocationDef}\n */\nexport function parseUrl(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = Object.create(null));\n  }\n\n  const fromCache = cache[url];\n  if (fromCache) {\n    return fromCache;\n  }\n\n  const info = parseUrlWithA(a, url);\n\n  return (cache[url] = info);\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @return {!LocationDef}\n */\nfunction parseUrlWithA(a, url) {\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  /** @type {!LocationDef} */\n  const info = {\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: '', // Set below.\n  };\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if (\n    (info.protocol == 'http:' && info.port == 80) ||\n    (info.protocol == 'https:' && info.port == 443)\n  ) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n  return info;\n}\n\n/**\n * Parses and builds Object of URL query string.\n * @param {string} query The URL query string.\n * @return {!Object<string, string>}\n */\nexport function parseQueryString(query) {\n  if (!query) {\n    return {};\n  }\n  return (/^[?#]/.test(query) ? query.slice(1) : query)\n    .split('&')\n    .reduce((params, param) => {\n      const item = param.split('=');\n      const key = decodeURIComponent(item[0] || '');\n      const value = decodeURIComponent(item[1] || '');\n      if (key) {\n        params[key] = value;\n      }\n      return params;\n    }, {});\n}\n\n/**\n * Adds a parameter to a query string.\n * @param {string} url\n * @param {string} param\n * @param {string} value\n * @return {string}\n */\nexport function addQueryParam(url, param, value) {\n  const queryIndex = url.indexOf('?');\n  const fragmentIndex = url.indexOf('#');\n  let fragment = '';\n  if (fragmentIndex != -1) {\n    fragment = url.substring(fragmentIndex);\n    url = url.substring(0, fragmentIndex);\n  }\n  if (queryIndex == -1) {\n    url += '?';\n  } else if (queryIndex < url.length - 1) {\n    url += '&';\n  }\n  url += encodeURIComponent(param) + '=' + encodeURIComponent(value);\n  return url + fragment;\n}\n\n/**\n * Returns the Url including the path and search, without fregment.\n * @param {string} url\n * @return {string}\n */\nexport function getHostUrl(url) {\n  const locationHref = parseUrl(url);\n  return locationHref.origin + locationHref.pathname + locationHref.search;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './log';\nimport {parseJson} from './json';\nimport {parseUrl} from './url';\nimport {utf8EncodeSync} from './bytes';\n\n/**\n * The \"init\" argument of the Fetch API. Currently, only \"credentials: include\"\n * is implemented.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * @typedef {{\n *   body: (!FormData|string|undefined),\n *   credentials: (string|undefined),\n *   headers: (!Object|undefined),\n *   method: (string|undefined),\n *   responseType: (string)\n * }}\n */\nexport let FetchInitDef;\n\n/** @private @const {!Array<string>} */\nconst allowedMethods_ = ['GET', 'POST'];\n\n/** @private @enum {number} Allowed fetch responses. */\nconst allowedFetchTypes_ = {\n  document: 1,\n  text: 2,\n};\n\n/**\n * A class that polyfills Fetch API.\n */\nexport class Xhr {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Window} */\n    this.win = win;\n  }\n\n  /**\n   * We want to call `fetch_` unbound from any context since it could\n   * be either the native fetch or our polyfill.\n   *\n   * @param {string} input\n   * @param {!FetchInitDef} init\n   * @return {!Promise<!FetchResponse>|!Promise<!Response>}\n   * @private\n   */\n  fetch_(input, init) {\n    // TODO(avimehta): Should the requests go through when page is not visible?\n    assert(typeof input == 'string', 'Only URL supported: %s', input);\n    // In particular, Firefox does not tolerate `null` values for\n    // `credentials`.\n    const creds = init.credentials;\n    assert(\n      creds === undefined || creds == 'include' || creds == 'omit',\n      'Only credentials=include|omit support: %s',\n      creds\n    );\n    // Fallback to xhr polyfill since `fetch` api does not support\n    // responseType = 'document'. We do this so we don't have to do any parsing\n    // and document construction on the UI thread which would be expensive.\n    if (init.responseType == 'document') {\n      return fetchPolyfill(input, init);\n    }\n    return (this.win.fetch || fetchPolyfill).apply(null, arguments);\n  }\n\n  /**\n   * @param {string} input URL\n   * @param {?FetchInitDef} opt_init Fetch options object.\n   * @return {!Promise<!FetchResponse>}\n   */\n  fetch(input, opt_init) {\n    // TODO (avimehta): Figure out if CORS needs be handled the way AMP does it.\n    const init = setupInit(opt_init);\n    return this.fetch_(input, init)\n      .then(\n        response => response,\n        reason => {\n          const targetOrigin = parseUrl(input).origin;\n          throw new Error(\n            `XHR Failed fetching (${targetOrigin}/...):`,\n            reason && reason.message\n          );\n        }\n      )\n      .then(response => assertSuccess(response));\n  }\n}\n\n/**\n * Normalized method name by uppercasing.\n * @param {string|undefined} method\n * @return {string}\n * @private\n */\nfunction normalizeMethod_(method) {\n  if (method === undefined) {\n    return 'GET';\n  }\n  method = method.toUpperCase();\n\n  assert(\n    allowedMethods_.includes(method),\n    'Only one of %s is currently allowed. Got %s',\n    allowedMethods_.join(', '),\n    method\n  );\n\n  return method;\n}\n\n/**\n * Sets up and normalizes the FetchInitDef\n *\n * @param {?FetchInitDef=} opt_init Fetch options object.\n * @param {string=} opt_accept The HTTP Accept header value.\n * @return {!FetchInitDef}\n */\nfunction setupInit(opt_init, opt_accept) {\n  const init = opt_init || /** @type {FetchInitDef} */ ({});\n  init.method = normalizeMethod_(init.method);\n  init.headers = init.headers || {};\n  if (opt_accept) {\n    init.headers['Accept'] = opt_accept;\n  }\n  return init;\n}\n\n/**\n * A minimal polyfill of Fetch API. It only polyfills what we currently use.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * Notice that the \"fetch\" method itself is not exported as that would require\n * us to immediately support a much wide API.\n *\n * @param {string} input\n * @param {!FetchInitDef} init\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function fetchPolyfill(input, init) {\n  return new Promise(function(resolve, reject) {\n    const xhr = createXhrRequest(init.method || 'GET', input);\n\n    if (init.credentials == 'include') {\n      xhr.withCredentials = true;\n    }\n\n    if (init.responseType in allowedFetchTypes_) {\n      xhr.responseType = init.responseType;\n    }\n\n    if (init.headers) {\n      Object.keys(init.headers).forEach(function(header) {\n        xhr.setRequestHeader(header, init.headers[header]);\n      });\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n        return;\n      }\n      if (xhr.status < 100 || xhr.status > 599) {\n        xhr.onreadystatechange = null;\n        reject(new Error(`Unknown HTTP status ${xhr.status}`));\n        return;\n      }\n\n      // TODO(dvoytenko): This is currently simplified: we will wait for the\n      // whole document loading to complete. This is fine for the use cases\n      // we have now, but may need to be reimplemented later.\n      if (xhr.readyState == /* COMPLETE */ 4) {\n        resolve(new FetchResponse(xhr));\n      }\n    };\n    xhr.onerror = () => {\n      reject(new Error('Network failure'));\n    };\n    xhr.onabort = () => {\n      reject(new Error('Request aborted'));\n    };\n\n    if (init.method == 'POST') {\n      xhr.send(init.body);\n    } else {\n      xhr.send();\n    }\n  });\n}\n\n/**\n * @param {string} method\n * @param {string} url\n * @return {!XMLHttpRequest}\n * @private\n */\nfunction createXhrRequest(method, url) {\n  const xhr = new XMLHttpRequest();\n  if ('withCredentials' in xhr) {\n    xhr.open(method, url, true);\n  } else {\n    throw new Error('CORS is not supported');\n  }\n  return xhr;\n}\n\n/**\n * If 415 or in the 5xx range.\n * @param {number} status\n */\nfunction isRetriable(status) {\n  return status == 415 || (status >= 500 && status < 600);\n}\n\n/**\n * Returns the response if successful or otherwise throws an error.\n * @param {!FetchResponse} response\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function assertSuccess(response) {\n  return new Promise(resolve => {\n    if (response.ok) {\n      return resolve(response);\n    }\n\n    const {status} = response;\n    const err = new Error(`HTTP error ${status}`);\n    err.retriable = isRetriable(status);\n    // TODO(@jridgewell, #9448): Callers who need the response should\n    // skip processing.\n    err.response = response;\n    throw err;\n  });\n}\n\n/**\n * Response object in the Fetch API.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n */\nexport class FetchResponse {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n\n    /** @const {number} */\n    this.status = this.xhr_.status;\n\n    /** @const {boolean} */\n    this.ok = this.status >= 200 && this.status < 300;\n\n    /** @const {!FetchResponseHeaders} */\n    this.headers = new FetchResponseHeaders(xhr);\n\n    /** @type {boolean} */\n    this.bodyUsed = false;\n\n    /** @type {?ReadableStream} */\n    this.body = null;\n  }\n\n  /**\n   * Create a copy of the response and return it.\n   * @return {!FetchResponse}\n   */\n  clone() {\n    assert(!this.bodyUsed, 'Body already used');\n    return new FetchResponse(this.xhr_);\n  }\n\n  /**\n   * Drains the response and returns the text.\n   * @return {!Promise<string>}\n   * @private\n   */\n  drainText_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    return Promise.resolve(this.xhr_.responseText);\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * text.\n   * @return {!Promise<string>}\n   */\n  text() {\n    return this.drainText_();\n  }\n\n  /**\n   * Drains the response and returns the JSON object.\n   * @return {!Promise<!JsonObject>}\n   */\n  json() {\n    return /** @type {!Promise<!JsonObject>} */ (this.drainText_().then(\n      parseJson\n    ));\n  }\n\n  /**\n   * Reads the xhr responseXML.\n   * @return {!Promise<!Document>}\n   * @private\n   */\n  document_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    assert(\n      this.xhr_.responseXML,\n      'responseXML should exist. Make sure to return ' +\n        'Content-Type: text/html header.'\n    );\n    return /** @type {!Promise<!Document>} */ (Promise.resolve(\n      assert(this.xhr_.responseXML)\n    ));\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * ArrayBuffer.\n   * @return {!Promise<!ArrayBuffer>}\n   */\n  arrayBuffer() {\n    return /** @type {!Promise<!ArrayBuffer>} */ (this.drainText_().then(\n      utf8EncodeSync\n    ));\n  }\n}\n\n/**\n * Provides access to the response headers as defined in the Fetch API.\n * @private Visible for testing.\n */\nexport class FetchResponseHeaders {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n  }\n\n  /**\n   * @param {string} name\n   * @return {string}\n   */\n  get(name) {\n    return this.xhr_.getResponseHeader(name);\n  }\n\n  /**\n   * @param {string} name\n   * @return {boolean}\n   */\n  has(name) {\n    return this.xhr_.getResponseHeader(name) != null;\n  }\n}\n","(function (global) {\n  var babelHelpers = global.babelHelpers = {};\n\n  babelHelpers.inherits = function (subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  };\n\n  babelHelpers.createClass = (function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  })();\n\n  babelHelpers.slice = Array.prototype.slice;\n  babelHelpers.bind = Function.prototype.bind;\n\n  babelHelpers.interopRequireWildcard = function (obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n        }\n      }\n\n      newObj[\"default\"] = obj;\n      return newObj;\n    }\n  };\n\n  babelHelpers.interopRequireDefault = function (obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n  };\n\n  babelHelpers.get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        return get(parent, property, receiver);\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  };\n\n  babelHelpers.classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  babelHelpers.defineProperty = function(obj, key, value) {\n      obj[key] = value;\n      return obj;\n  };\n})(typeof global === \"undefined\" ? self : global);\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MAX_Z_INDEX = 2147483647;\n\nconst Constants = {};\n\n/**\n * Supported environments.\n *\n * @enum {string}\n */\nConstants.Environment = {\n  LOCAL: 'LOCAL',\n  PREPROD: 'PREPROD',\n  PRODUCTION: 'PRODUCTION',\n  SANDBOX: 'SANDBOX',\n  TEST: 'TEST',\n  TIN: 'TIN',\n};\n\n/**\n * Supported payment methods.\n *\n * @enum {string}\n */\nConstants.PaymentMethod = {\n  CARD: 'CARD',\n  TOKENIZED_CARD: 'TOKENIZED_CARD',\n  UPI: 'UPI',\n};\n\n/**\n * Auth methods.\n *\n * @enum {string}\n */\nConstants.AuthMethod = {\n  CRYPTOGRAM_3DS: 'CRYPTOGRAM_3DS',\n  PAN_ONLY: 'PAN_ONLY',\n};\n\n/**\n * Returned result status.\n *\n * @enum {string}\n */\nConstants.ResponseStatus = {\n  CANCELED: 'CANCELED',\n  DEVELOPER_ERROR: 'DEVELOPER_ERROR',\n};\n\n/**\n * Supported total price status.\n *\n * @enum {string}\n */\nConstants.TotalPriceStatus = {\n  ESTIMATED: 'ESTIMATED',\n  FINAL: 'FINAL',\n  NOT_CURRENTLY_KNOWN: 'NOT_CURRENTLY_KNOWN',\n};\n\n/**\n * Supported Google Pay payment button type.\n *\n * @enum {string}\n */\nConstants.ButtonType = {\n  SHORT: 'short',\n  LONG: 'long',\n};\n\n/**\n * Supported button colors.\n *\n * @enum {string}\n */\nConstants.ButtonColor = {\n  DEFAULT: 'default',  // Currently defaults to black.\n  BLACK: 'black',\n  WHITE: 'white',\n};\n\n/**\n * Id attributes.\n *\n * @enum {string}\n */\nConstants.Id = {\n  POPUP_WINDOW_CONTAINER: 'popup-window-container',\n};\n\n/** @const {string} */\nConstants.STORAGE_KEY_PREFIX = 'google.payments.api.storage';\n\n/** @const {string} */\nConstants.IS_READY_TO_PAY_RESULT_KEY =\n    Constants.STORAGE_KEY_PREFIX + '.isreadytopay.result';\n\n/** @const {string} */\nConstants.UPI_CAN_MAKE_PAYMENT_CACHE_KEY =\n    Constants.STORAGE_KEY_PREFIX + '.upi.canMakePaymentCache';\n\n\nConstants.CLASS_PREFIX = 'google-payments-';\nConstants.IFRAME_ACTIVE_CONTAINER_CLASS =\n    `${Constants.CLASS_PREFIX}activeContainer`;\nConstants.IFRAME_CONTAINER_CLASS = `${Constants.CLASS_PREFIX}dialogContainer`;\nConstants.IFRAME_STYLE_CENTER_CLASS = `${Constants.CLASS_PREFIX}dialogCenter`;\nConstants.IFRAME_STYLE_CLASS = `${Constants.CLASS_PREFIX}dialog`;\n\nConstants.IFRAME_STYLE = `\n.${Constants.IFRAME_STYLE_CLASS} {\n    animation: none 0s ease 0s 1 normal none running;\n    background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n    background-blend-mode: normal;\n    border: 0 none #333;\n    border-radius: 8px 8px 0 0;\n    border-collapse: separate;\n    bottom: 0;\n    box-shadow: #808080 0 3px 0 0, #808080 0 0 22px;\n    box-sizing: border-box;\n    letter-spacing: normal;\n    max-height: 100%;\n    overflow: visible;\n    position: fixed;\n    width: 100%;\n    z-index: ${MAX_Z_INDEX};\n    -webkit-appearance: none;\n    left: 0;\n}\n@media (min-width: 480px) {\n  .${Constants.IFRAME_STYLE_CLASS} {\n    width: 480px !important;\n    left: -240px !important;\n    margin-left: calc(100vw - 100vw / 2) !important;\n  }\n}\n.${Constants.IFRAME_CONTAINER_CLASS} {\n  background-color: rgba(0,0,0,0.26);\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n}\n.iframeContainer {\n  -webkit-overflow-scrolling: touch;\n}\n`;\n\nConstants.IFRAME_STYLE_CENTER = `\n.${Constants.IFRAME_STYLE_CENTER_CLASS} {\n  animation: none 0s ease 0s 1 normal none running;\n  background-blend-mode: normal;\n  background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n  border-collapse: separate;\n  border-radius: 8px;\n  border: 0px none #333;\n  bottom: auto;\n  box-shadow: #808080 0 0 22px;\n  box-sizing: border-box;\n  left: -240px;\n  letter-spacing: normal;\n  margin-left: calc(100vw - 100vw / 2) !important;\n  max-height: 90%;\n  overflow: visible;\n  position: absolute;\n  top: 100%;\n  transform: scale(0.8);\n  width: 480px;\n  z-index: ${MAX_Z_INDEX};\n  -webkit-appearance: none;\n}\n@media (min-height: 667px) {\n  .${Constants.IFRAME_STYLE_CENTER_CLASS} {\n    max-height: 600px;\n  }\n}\n.${Constants.IFRAME_ACTIVE_CONTAINER_CLASS} {\n  top: 50%;\n  transform: scale(1.0) translateY(-50%);\n}\n`;\n\nConstants.GPAY_BUTTON_WITH_CARD_INFO_IMAGE =\n    'background-image: url(https://pay.google.com/gp/p/generate_gpay_btn_img);';\n\nConstants.BUTTON_LOCALE_TO_MIN_WIDTH = {\n  'en': 152,\n  'bg': 163,\n  'cs': 192,\n  'de': 183,\n  'es': 183,\n  'fr': 183,\n  'hr': 157,\n  'id': 186,\n  'ja': 148,\n  'ko': 137,\n  'ms': 186,\n  'nl': 167,\n  'pl': 182,\n  'pt': 193,\n  'ru': 206,\n  'sk': 157,\n  'sl': 211,\n  'sr': 146,\n  'tr': 161,\n  'uk': 207,\n  'zh': 156,\n};\n\n/**\n * Name of the graypane.\n *\n * @const {string}\n */\nConstants.GPAY_GRAYPANE = 'gpay-graypane';\n\n/**\n * Class used for the gpay button.\n *\n * @const {string}\n */\nConstants.GPAY_BUTTON_CLASS = 'gpay-button';\n\nConstants.BUTTON_STYLE = `\n.${Constants.GPAY_BUTTON_CLASS} {\n  background-origin: content-box;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border: 0px;\n  border-radius: 4px;\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n  cursor: pointer;\n  height: 40px;\n  min-height: 40px;\n  padding: 11px 24px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black {\n  background-color: #000;\n  box-shadow: none;\n  padding: 12px 24px 10px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white {\n  background-color: #fff;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg);\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/light_gpay.svg);\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black.active {\n  background-color: #5f6368;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black.hover {\n  background-color: #3c4043;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.active {\n  background-color: #fff;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.focus {\n  box-shadow: #e8e8e8 0 1px 1px 0, #e8e8e8 0 1px 3px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.hover {\n  background-color: #f8f8f8;\n}\n`;\n\nConstants.GPAY_BUTTON_WITH_OFFER_ICON_ADDITIONAL_STYLE = 'position: relative;';\n\nConstants.GPAY_OFFER_ICON_CLASS = 'gpay-offer-icon';\n\nConstants.GPAY_OFFER_ICON_SVG =\n    \"<svg width=\\\"20px\\\" height=\\\"20px\\\" viewBox=\\\"0 0 20 20\\\" \" +\n    \"version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\" +\n    \"\\\"http://www.w3.org/1999/xlink\\\" class=\\\"gpay-offer-icon\\\"><defs><path d=\\\"M19.41,9.58 L10.41,0.58 \" +\n    \"C10.05,0.22 9.55,0 9,0 L2,0 C0.9,0 0,0.9 0,2 L0,9 C0,9.55 0.22,10.05 \" +\n    \"0.59,10.42 L9.59,19.42 C9.95,19.78 10.45,20 11,20 C11.55,20 12.05,19.78 \" +\n    \"12.41,19.41 L19.41,12.41 C19.78,12.05 20,11.55 20,11 C20,10.45 19.77,\" +\n    \"9.94 19.41,9.58 Z\\\" id=\\\"path-1\\\"></path></defs><g id=\\\"buttons_10.05\\\"\" +\n    \" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\" +\n    \"<g id=\\\"Artboard\\\" transform=\\\"translate(-40.000000, -43.000000)\\\">\" +\n    \"<g id=\\\"Group-3\\\" transform=\\\"translate(40.000000, 43.000000)\\\">\" +\n    \"<g id=\\\"Group-2-Copy-2\\\"><g id=\\\"Group-Copy\\\"><g id=\\\"ic_loyalty_24px\\\">\" +\n    \"<mask id=\\\"mask-2\\\" fill=\\\"white\\\"><use xlink:href=\\\"#path-1\\\"></use>\" +\n    \"</mask><use id=\\\"gpay-Shape\\\" fill=\\\"#FF6100\\\" fill-rule=\\\"nonzero\\\" \" +\n    \"xlink:href=\\\"#path-1\\\"></use><path d=\\\"M3.5,5 C2.67,5 2,4.33 2,3.5 C2,\" +\n    \"2.67 2.67,2 3.5,2 C4.33,2 5,2.67 5,3.5 C5,4.33 4.33,5 3.5,5 Z\\\" \" +\n    \"id=\\\"Path\\\" fill=\\\"#FFFFFF\\\" fill-rule=\\\"nonzero\\\" mask=\\\"url(#mask-2)\\\">\" +\n    \"</path></g></g></g><g id=\\\"Group-13-Copy-7\\\" transform=\\\"translate\" +\n    \"(6.000000, 6.000000)\\\" fill=\\\"#FFFFFF\\\" fill-rule=\\\"nonzero\\\">\" +\n    \"<g id=\\\"Group-13-Copy-2\\\"><path d=\\\"M2.15217391,4.55172414 C0.963561082,\" +\n    \"4.55172414 1.99840144e-14,3.53278598 1.99840144e-14,2.27586207 \" +\n    \"C1.99840144e-14,1.01893816 0.963561082,6.30606678e-14 2.15217391,6.\" +\n    \"30606678e-14 C3.34078674,6.30606678e-14 4.30434783,1.01893816 4.30434783,\" +\n    \"2.27586207 C4.30434783,3.53278598 3.34078674,4.55172414 2.15217391,\" +\n    \"4.55172414 Z M2.15217391,3.31034483 C2.69245247,3.31034483 3.13043478,2.\" +\n    \"84719112 3.13043478,2.27586207 C3.13043478,1.70453302 2.69245247,\" +\n    \"1.24137931 2.15217391,1.24137931 C1.61189535,1.24137931 1.17391304,1\" +\n    \".70453302 1.17391304,2.27586207 C1.17391304,2.84719112 1.61189535,3.\" +\n    \"31034483 2.15217391,3.31034483 Z\\\" id=\\\"Combined-Shape\\\"></path>\" +\n    \"<path d=\\\"M6.84782609,9 C5.65921326,9 4.69565217,7.98106184 4.69565217,\" +\n    \"6.72413793 C4.69565217,5.46721402 5.65921326,4.44827586 6.84782609,\" +\n    \"4.44827586 C8.03643892,4.44827586 9,5.46721402 9,6.72413793 C9,7.98106184\" +\n    \" 8.03643892,9 6.84782609,9 Z M6.84782609,7.75862069 C7.38810465,\" +\n    \"7.75862069 7.82608696,7.29546698 7.82608696,6.72413793 C7.82608696\" +\n    \",6.15280888 7.38810465,5.68965517 6.84782609,5.68965517 C6.30754753,\" +\n    \"5.68965517 5.86956522,6.15280888 5.86956522,6.72413793 C5.86956522,\" +\n    \"7.29546698 6.30754753,7.75862069 6.84782609,7.75862069 Z\\\" \" +\n    \"id=\\\"Combined-Shape\\\"></path><polygon id=\\\"Rectangle\\\" \" +\n    \"transform=\\\"translate(4.497720, 4.541938) rotate(34.000000) \" +\n    \"translate(-4.497720, -4.541938) \\\" points=\\\"3.77901778 -0.202295978 \" +\n    \"4.9740273 -0.171019161 5.21642263 9.28617278 4.02141311 9.25489596\\\">\" +\n    \"</polygon></g></g></g></g></g></svg>\";\n\nConstants.GPAY_OFFER_ICON_STYLE = `\n.${Constants.GPAY_OFFER_ICON_CLASS} {\n  position: absolute;\n  right: -5px;\n  top: -5px;\n}\n\n#ic_loyalty_24px use.hover {\n  fill: #FC853B;\n}\n`;\n\nConstants.GPAY_OFFER_DESCRIPTION_CLASS = 'gpay-offer-description';\n\nConstants.GPAY_OFFER_DESCRIPTION_STYLE = `\n@import url(//fonts.googleapis.com/css?family=Google+Sans:500);\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS} {\n  text-align: center;\n  font: 10px 'Google Sans';\n  margin-top: 2px;\n  margin-bottom: 0px;\n}\n\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS}.gpay-btn-clicked {\n  color: #3C4043;\n}\n\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS}.long {\n  min-width: 152px;\n  width: 240px;\n}\n`;\n\n/**\n * Class used for the new gpay button with card info (last 4 digits, card net).\n *\n * @const {string}\n */\nConstants.GPAY_BUTTON_CARD_INFO_CLASS = 'gpay-card-info-btn';\n\nConstants.GPAY_BUTTON_CARD_INFO_BUTTON_STYLE = `\n  .${Constants.GPAY_BUTTON_CARD_INFO_CLASS} {\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border: 0px;\n    border-radius: 4px;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor: pointer;\n    height: 40px;\n    min-height: 40px;\n    padding: 11px 24px;\n    background-color: #000;\n    box-shadow: none;\n    padding: 9px 24px 10px;\n    min-width: 190px;\n    width: 240px;\n  }\n\n  .${Constants.GPAY_BUTTON_CARD_INFO_CLASS}.active {\n    background-color: #5f6368;\n  }\n\n  .${Constants.GPAY_BUTTON_CARD_INFO_CLASS}.hover {\n    background-color: #3c4043;\n  }\n  `;\n\n\n/**\n * Trusted domain for secure context validation\n *\n * @const {string}\n */\nConstants.TRUSTED_DOMAIN = '.google.com';\n\nexport {Constants};\n\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\n\n/**\n * Injects the provided style sheet to the document head.\n * @param {string} styleText The stylesheet to be injected.\n * @return {!Element}\n */\nfunction injectStyleSheet(styleText) {\n  const styleElement = document.createElement('style');\n  styleElement.type = 'text/css';\n  styleElement.textContent = styleText;\n  document.head.appendChild(styleElement);\n  return styleElement;\n}\n\n/**\n * Injects the pay with google iframe.\n * @param {string} iframeClassName The classname of the iFrame wrapper.\n * @return {!{container: !Element, iframe:!HTMLIFrameElement}}\n */\nfunction injectIframe(iframeClassName) {\n  const container = document.createElement('div');\n  container.classList.add(Constants.IFRAME_CONTAINER_CLASS);\n  const iframeContainer = document.createElement('div');\n  iframeContainer.classList.add('iframeContainer');\n  /** @private @const {!HTMLIFrameElement} */\n  const iframe =\n      /** @type {!HTMLIFrameElement} */ (document.createElement('iframe'));\n  iframe.classList.add(iframeClassName);\n  iframe.setAttribute('frameborder', '0');\n  iframe.setAttribute('scrolling', 'no');\n  iframeContainer.appendChild(iframe);\n  container.appendChild(iframeContainer);\n  document.body.appendChild(container);\n  return {'container': container, 'iframe': iframe};\n}\n\nexport {\n  injectStyleSheet,\n  injectIframe,\n};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\n\nconst MAX_Z_INDEX = 2147483647;\n\n\nclass Graypane {\n\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.element_ = doc.createElement(Constants.GPAY_GRAYPANE);\n    setImportantStyles(this.element_, {\n      'z-index': MAX_Z_INDEX,\n      'display': 'none',\n      'position': 'fixed',\n      'top': 0,\n      'right': 0,\n      'bottom': 0,\n      'left': 0,\n      'background-color': 'rgba(32, 33, 36, .6)',\n    });\n\n    /** @private {?Window} */\n    this.popupWindow_ = null;\n\n    this.element_.addEventListener('click', () => {\n      if (this.popupWindow_) {\n        try {\n          this.popupWindow_.focus();\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n    });\n  }\n\n  /**\n   * Shows the graypane.\n   * @param {?Window|undefined} popupWindow\n   * @return {!Promise}\n   */\n  show(popupWindow) {\n    this.popupWindow_ = popupWindow || null;\n    this.doc_.body.appendChild(this.element_);\n    setImportantStyles(this.element_, {\n      'display': 'block',\n      'opacity': 0,\n    });\n    return transition(this.element_, {\n      'opacity': 1,\n    }, 300, 'ease-out');\n  }\n\n  /**\n   * Hides the graypane.\n   * @return {!Promise|undefined}\n   */\n  hide() {\n    this.popupWindow_ = null;\n    if (!this.element_.parentElement) {\n      // Has already been removed or haven't been even added to DOM.\n      // This could be possible after redirect.\n      return;\n    }\n    return transition(this.element_, {\n      'opacity': 0,\n    }, 300, 'ease-out').then(() => {\n      setImportantStyles(this.element_, {'display': 'none'});\n      this.doc_.body.removeChild(this.element_);\n    });\n  }\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n *\n * The `!important` styles are used to avoid accidental specificity overrides\n * from the 3p page's stylesheet.\n *\n * @param {!Element} element\n * @param {!Object<string, string|number>} styles\n */\nfunction setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(k, styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Returns a promise which is resolved after the given duration of animation\n * @param {!Element} el - Element to be observed.\n * @param {!Object<string, string|number>} props - properties to be animated.\n * @param {number} durationMillis - duration of animation.\n * @param {string} curve - transition function for the animation.\n * @return {!Promise} Promise which resolves once the animation is done playing.\n */\nfunction transition(el, props, durationMillis, curve) {\n  const win = el.ownerDocument.defaultView;\n  const previousTransitionValue = el.style.transition || '';\n  return new Promise(resolve => {\n    win.setTimeout(() => {\n      win.setTimeout(resolve, durationMillis);\n      const tr = `${durationMillis}ms ${curve}`;\n      setImportantStyles(el, Object.assign({\n        'transition': `transform ${tr}, opacity ${tr}`,\n      }, props));\n    });\n  }).then(() => {\n    // Stop transition and make sure that the final properties get set.\n    setImportantStyles(el, Object.assign({\n      'transition': previousTransitionValue,\n    }, props));\n  });\n}\n\n\nexport {Graypane};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\nimport {PostMessageService} from './post_message_service.js';\n\n/**\n * Supported interactions between iframe and merchant page.\n *\n * @enum {number}\n */\n// Next Id: 10\nconst PostMessageEventType = {\n  IS_READY_TO_PAY: 6,\n  LOG_BUTTON_CLICK: 5,\n  LOG_IS_READY_TO_PAY_API: 0,\n  LOG_LOAD_PAYMENT_DATA_API: 1,\n  LOG_RENDER_BUTTON: 2,\n  LOG_INITIALIZE_PAYMENTS_CLIENT: 9,\n  LOG_PAY_FRAME_REQUESTED: 15,\n  LOG_PAY_FRAME_LOADED: 16,\n  LOG_PAY_FRAME_LOADED_WITH_ALL_JS: 17,\n  LOG_INLINE_PAYMENT_WIDGET_INITIALIZE: 4,\n  LOG_INLINE_PAYMENT_WIDGET_SUBMIT: 3,\n  LOG_INLINE_PAYMENT_WIDGET_DISPLAYED: 7,\n  LOG_INLINE_PAYMENT_WIDGET_HIDDEN: 8,\n};\n\n/**\n * Types of buy flow activity modes.\n *\n * @enum {number}\n */\nconst BuyFlowActivityMode = {\n  UNKNOWN_MODE: 0,\n  IFRAME: 1,\n  POPUP: 2,\n  REDIRECT: 3,\n  ANDROID_NATIVE: 4,\n  PAYMENT_HANDLER: 5,\n};\n\n/**\n * Types of buy flow activity modes.\n *\n * @enum {number}\n */\nconst PublicErrorCode = {\n  UNKNOWN_ERROR_TYPE: 0,\n  INTERNAL_ERROR: 1,\n  DEVELOPER_ERROR: 2,\n  BUYER_ACCOUNT_ERROR: 3,\n  MERCHANT_ACCOUNT_ERROR: 4,\n  UNSUPPORTED_API_VERSION: 5,\n  BUYER_CANCEL: 6,\n};\n\n/**\n * The presentation mode of the buy flow\n *\n * @enum {number}\n */\nconst BuyFlowMode = {\n  PAY_WITH_GOOGLE: 5,\n  SUBSCRIBE_WITH_GOOGLE: 6,\n};\n\n/**\n * Iframe used for logging and prefetching.\n *\n * @type {?Element}\n */\nlet iframe = null;\n\n/** @type {?PostMessageService} */\nlet postMessageService = null;\n\n/** @type {?string} */\nlet environment = null;\n\n/** @type {?string} */\nlet googleTransactionId = null;\n\n/** @type {number} */\nlet originTimeMs = Date.now();\n\n/** @type {?BuyFlowActivityMode} */\nlet buyFlowActivityMode = null;\n\n/** @type {boolean} */\nlet iframeLoaded = false;\n\n/** @type {!Array<!Object>} */\nlet buffer = [];\n\nclass PayFrameHelper {\n  /**\n   * Creates a hidden iframe for logging and appends it to the top level\n   * document.\n   */\n  static load() {\n    if (iframe) {\n      return;\n    }\n    const initOptions =\n        /** @type {!PaymentOptions} */ (window['gpayInitParams']) || {};\n    environment = initOptions.environment || Constants.Environment.PRODUCTION;\n    iframe = document.createElement('iframe');\n    // Pass in origin because document.referrer inside iframe is empty in\n    // certain cases\n    // Can be replaced by iframe.src=... in non Google context.\n    iframe.src = PayFrameHelper.getIframeUrl_(\n            window.location.origin,\n            initOptions.merchantInfo && initOptions.merchantInfo.merchantId);\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_PAY_FRAME_REQUESTED,\n      'clientLatencyStartMs': Date.now(),\n    });\n    iframe.height = '0';\n    iframe.width = '0';\n    iframe.style.display = 'none';\n    iframe.style.visibility = 'hidden';\n    iframe.onload = function() {\n      PayFrameHelper.postMessage({\n        'eventType': PostMessageEventType.LOG_PAY_FRAME_LOADED_WITH_ALL_JS,\n        'clientLatencyStartMs': Date.now(),\n      });\n      PayFrameHelper.iframeLoaded();\n    };\n    // If the body is already loaded, just append the iframe. Otherwise, we wait\n    // until the DOM has loaded to append the iframe, otherwise document.body is\n    // null.\n    if (document.body) {\n      PayFrameHelper.initialize_();\n    } else {\n      document.addEventListener(\n          'DOMContentLoaded', () => PayFrameHelper.initialize_());\n    }\n  }\n\n  /**\n   * Appends the iframe to the DOM and updates the post message service.\n   * @private\n   */\n  static initialize_() {\n    document.body.appendChild(iframe);\n    postMessageService = new PostMessageService(iframe.contentWindow);\n  }\n\n  /**\n   * Sends a message to the iframe and wait for a response.\n   * Uses the responseHandler specified only if the responseType is a match.\n   *\n   * @param {!Object} data\n   * @param {!PostMessageEventType} eventType\n   * @param {string} responseType\n   * @param {function(!Event)} responseHandler\n   */\n  static sendAndWaitForResponse(\n      data, eventType, responseType, responseHandler) {\n    function callback(event) {\n      if (event.data[responseType]) {\n        responseHandler(event);\n        // We only want to process the response from the payframe once.\n        // so stop listening to the event once processed.\n        PayFrameHelper.removeMessageEventListener_(callback);\n      }\n    }\n\n    PayFrameHelper.addMessageEventListener_(callback);\n\n    const postMessageData = Object.assign({'eventType': eventType}, data);\n    PayFrameHelper.postMessage(postMessageData);\n  }\n\n  /**\n   * Add an event listener for listening to messages received.\n   *\n   * @param {function(!Event)} callback\n   * @private\n   */\n  static addMessageEventListener_(callback) {\n    window.addEventListener('message', callback);\n  }\n\n  /**\n   * Remove the event listener for listening to messages.\n   *\n   * @param {function(!Event)} callback\n   * @private\n   */\n  static removeMessageEventListener_(callback) {\n    window.removeEventListener('message', callback);\n  }\n\n  /**\n   * Posts a message to the iframe with the given data.\n   *\n   * @param {!Object} data\n   */\n  static postMessage(data) {\n    if (!iframeLoaded) {\n      buffer.push(data);\n      return;\n    }\n    const postMessageData = Object.assign(\n        {\n          'buyFlowActivityMode': buyFlowActivityMode,\n          'googleTransactionId': googleTransactionId,\n          'originTimeMs': originTimeMs,\n        },\n        data);\n    postMessageService.postMessage(\n        postMessageData, PayFrameHelper.getIframeOrigin_());\n  }\n\n  /**\n   * Sets the activity mode.\n   *\n   * @param {!BuyFlowActivityMode} mode\n   */\n  static setBuyFlowActivityMode(mode) {\n    buyFlowActivityMode = mode;\n  }\n\n  /**\n   * Sets the google transaction id.\n   *\n   * @param {string} txnId\n   */\n  static setGoogleTransactionId(txnId) {\n    googleTransactionId = txnId;\n  }\n\n  /**\n   * Sets the originTimeMs. To be used only for tests.\n   *\n   * @param {number} originTimeMsTemp\n   */\n  static setOriginTimeMs(originTimeMsTemp) {\n    originTimeMs = originTimeMsTemp;\n  }\n\n  /**\n   * Override postMessageService for testing.\n   *\n   * @param {!PostMessageService} messageService\n   */\n  static setPostMessageService(messageService) {\n    postMessageService = messageService;\n  }\n\n  /**\n   * Clears the singleton variables.\n   */\n  static reset() {\n    iframe = null;\n    buffer.length = 0;\n    iframeLoaded = false;\n    buyFlowActivityMode = null;\n  }\n\n  /**\n   * Sets whether the iframe has been loaded or not.\n   *\n   * @param {boolean} loaded\n   */\n  static setIframeLoaded(loaded) {\n    iframeLoaded = loaded;\n  }\n\n  /**\n   * Called whenever the iframe is loaded.\n   */\n  static iframeLoaded() {\n    iframeLoaded = true;\n    buffer.forEach(function(data) {\n      PayFrameHelper.postMessage(data);\n    });\n    buffer.length = 0;\n  }\n\n  /**\n   * Returns the events that have been buffered.\n   *\n   * @return {!Array<!Object>}\n   */\n  static getBuffer() {\n    return buffer;\n  }\n\n  /**\n   * Mocks the iframe as an arbitrary html element instead of actually injecting\n   * it for testing.\n   */\n  static injectIframeForTesting() {\n    PayFrameHelper.reset();\n    iframe = document.createElement('p');\n    PayFrameHelper.iframeLoaded();\n  }\n\n  /**\n   * Returns the payframe origin based on the environment.\n   *\n   * @return {string}\n   * @private\n   */\n  static getIframeOrigin_() {\n    let iframeUrl = 'https://pay';\n    if (environment == Constants.Environment.SANDBOX) {\n      iframeUrl += '.sandbox';\n    } else if (environment == Constants.Environment.PREPROD) {\n      iframeUrl += '-preprod.sandbox';\n    }\n    return iframeUrl + '.google.com';\n  }\n\n  /**\n   * Returns the payframe URL based on the environment.\n   *\n   * @param {string} origin The origin that is opening the payframe.\n   * @param {string|null=} merchantId The merchant id.\n   * @return {string}\n   * @private\n   */\n  static getIframeUrl_(origin, merchantId) {\n    // TrustedResourceUrl header needs to start with https or '//'.\n    const iframeUrl = `https://pay${environment == Constants.Environment.PREPROD ?\n             '-preprod.sandbox' :\n             environment == Constants.Environment.SANDBOX ? '.sandbox' : ''}.google.com/gp/p/ui/payframe?origin=${origin}&mid=%{merchantId}`;\n    return iframeUrl;\n  }\n}\n\n// Start loading pay frame early\nPayFrameHelper.load();\n\nexport {\n  BuyFlowActivityMode,\n  BuyFlowMode,\n  PayFrameHelper,\n  PostMessageEventType,\n  PublicErrorCode,\n};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\nimport {PaymentsClientDelegateInterface} from './payments_client_delegate_interface.js';\nimport {PaymentsRequestDelegate} from './payments_request_delegate.js';\nimport {PaymentsWebActivityDelegate} from './payments_web_activity_delegate.js';\nimport {UpiHandler} from './upi_handler.js';\nimport {ActivityPorts} from 'web-activities/activity-ports';\nimport {BuyFlowActivityMode, BuyFlowMode, PayFrameHelper, PostMessageEventType, PublicErrorCode} from './pay_frame_helper.js';\nimport {apiV2DoesMerchantSupportSpecifiedCardType, chromeSupportsPaymentHandler, chromeSupportsPaymentRequest, doesMerchantSupportOnlyTokenizedCards, getUpiPaymentMethod, validatePaymentOptions, validateIsReadyToPayRequest, validatePaymentDataRequest, validateSecureContext} from './validator.js';\n\nimport {createGoogleTransactionId} from './utils.js';\n\nconst TRUSTED_DOMAINS = [\n  'actions.google.com',\n  'amp-actions.sandbox.google.com',\n  'amp-actions-staging.sandbox.google.com',\n  'amp-actions-autopush.sandbox.google.com',\n  'payments.developers.google.com',\n  'payments.google.com',\n];\n\n/**\n * The client for interacting with the Google Payment APIs.\n * <p>\n * The async refers to the fact that this client supports redirects\n * when using webactivties.\n * <p>\n * If you are using this be sure that this is what you want.\n * <p>\n * In almost all cases PaymentsClient is the better client to use because\n * it exposes a promises based api which is easier to deal with.\n * @final\n */\nclass PaymentsAsyncClient {\n  /**\n   * @param {!PaymentOptions} paymentOptions\n   * @param {function(!Promise<!PaymentData>)} onPaymentResponse\n   * @param {boolean=} opt_useIframe\n   * @param {!ActivityPorts=} opt_activities Can be used to provide a shared\n   *   activities manager. By default, the new manager is created.\n   */\n  constructor(paymentOptions, onPaymentResponse, opt_useIframe,\n             opt_activities) {\n    this.onPaymentResponse_ = onPaymentResponse;\n\n    validatePaymentOptions(paymentOptions);\n\n    /** @private {?number} */\n    this.loadPaymentDataApiStartTimeMs_ = null;\n\n    /** @private @const {string} */\n    this.environment_ =\n        paymentOptions.environment || Constants.Environment.TEST;\n    if (!PaymentsAsyncClient.googleTransactionId_) {\n      PaymentsAsyncClient.googleTransactionId_ =\n          /** @type {string} */ (\n              (this.isInTrustedDomain_() && paymentOptions['i'] &&\n               paymentOptions['i']['googleTransactionId']) ?\n                  paymentOptions['i']['googleTransactionId'] :\n                  createGoogleTransactionId(this.environment_));\n    }\n\n    /** @private @const {!PaymentOptions} */\n    this.paymentOptions_ = paymentOptions;\n\n    /** @private @const {!PaymentsClientDelegateInterface} */\n    this.webActivityDelegate_ = new PaymentsWebActivityDelegate(\n        this.environment_, PaymentsAsyncClient.googleTransactionId_,\n        opt_useIframe, opt_activities,\n        paymentOptions['i'] && paymentOptions['i']['redirectKey']);\n\n    /** @private {number} */\n    this.buyFlowMode_ = BuyFlowMode.PAY_WITH_GOOGLE;\n\n    const paymentRequestSupported = chromeSupportsPaymentRequest();\n    // TODO: Remove the temporary hack that disable payments\n    // request for inline flow.\n    /** @private @const {?PaymentsClientDelegateInterface} */\n    this.delegate_ = paymentRequestSupported && !opt_useIframe ?\n        new PaymentsRequestDelegate(this.environment_) :\n        this.webActivityDelegate_;\n\n    this.upiHandler_ = new UpiHandler();\n\n    this.webActivityDelegate_.onResult(this.onResult_.bind(this));\n    this.delegate_.onResult(this.onResult_.bind(this));\n\n    // If web delegate is used anyway then this is overridden in the web\n    // activity delegate when load payment data is called.\n    if (chromeSupportsPaymentHandler()) {\n      PayFrameHelper.setBuyFlowActivityMode(\n          BuyFlowActivityMode.PAYMENT_HANDLER);\n    } else if (paymentRequestSupported) {\n      PayFrameHelper.setBuyFlowActivityMode(BuyFlowActivityMode.ANDROID_NATIVE);\n    }\n\n    PayFrameHelper.setGoogleTransactionId(\n        PaymentsAsyncClient.googleTransactionId_);\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_INITIALIZE_PAYMENTS_CLIENT,\n      'clientLatencyStartMs': Date.now(),\n    });\n\n    window.addEventListener(\n        'message', event => this.handleMessageEvent_(event));\n  }\n\n  /**\n   * Check whether the user can make payments using the Payment API.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   * @export\n   */\n  isReadyToPay(isReadyToPayRequest) {\n    // Merge with paymentOptions, preferring values from isReadyToPayRequest\n    if (isReadyToPayRequest) {\n      isReadyToPayRequest =\n          Object.assign({}, this.paymentOptions_, isReadyToPayRequest);\n    }\n    const startTimeMs = Date.now();\n    /** @type {?string} */\n    const errorMessage = validateSecureContext() ||\n        validateIsReadyToPayRequest(isReadyToPayRequest);\n    if (errorMessage) {\n      return new Promise((resolve, reject) => {\n        PaymentsAsyncClient.logDevErrorToConsole_('isReadyToPay', errorMessage);\n        PayFrameHelper.postMessage({\n          'eventType': PostMessageEventType.LOG_IS_READY_TO_PAY_API,\n          'error': PublicErrorCode.DEVELOPER_ERROR,\n        });\n        reject({\n          'statusCode': Constants.ResponseStatus.DEVELOPER_ERROR,\n          'statusMessage': errorMessage\n        });\n      });\n    }\n\n    const isReadyToPayPromise = this.isReadyToPay_(isReadyToPayRequest);\n\n    isReadyToPayPromise.then(response => {\n      PayFrameHelper.postMessage({\n        'eventType': PostMessageEventType.LOG_IS_READY_TO_PAY_API,\n        'clientLatencyStartMs': startTimeMs,\n        'isReadyToPayApiResponse': response,\n      });\n      return response;\n    });\n    return isReadyToPayPromise;\n  }\n\n  /**\n   * Actual implementation of isReadyToPay in a private method so that\n   * we can add callbacks to the promise to measure latencies.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   * @private\n   */\n  isReadyToPay_(isReadyToPayRequest) {\n    if (this.upiHandler_.isUpiRequest(isReadyToPayRequest)) {\n      return this.upiHandler_.isReadyToPay(isReadyToPayRequest);\n    }\n    if (chromeSupportsPaymentRequest() &&\n       !isNativeDisabledInRequest(isReadyToPayRequest)) {\n      if (isReadyToPayRequest.apiVersion >= 2) {\n        return this.isReadyToPayApiV2ForChromePaymentRequest_(\n            isReadyToPayRequest);\n      } else {\n        // This is the apiVersion 1 branch.\n        // If the merchant supports only Tokenized cards then just rely on\n        // delegate to give us the result.\n        // This will need to change once b/78519188 is fixed.\n        const webPromise =\n            this.webActivityDelegate_.isReadyToPay(isReadyToPayRequest);\n        const nativePromise = this.delegate_.isReadyToPay(isReadyToPayRequest);\n        if (doesMerchantSupportOnlyTokenizedCards(isReadyToPayRequest) &&\n            !chromeSupportsPaymentHandler()) {\n          return nativePromise;\n        }\n        // Return webIsReadyToPay only if delegateIsReadyToPay has been\n        // executed.\n        return nativePromise.then(() => webPromise);\n      }\n    }\n    const webPromise =\n        this.webActivityDelegate_.isReadyToPay(isReadyToPayRequest);\n    return webPromise;\n  }\n\n  /**\n   * Handle is ready to pay for api v2.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   * @private\n   */\n  isReadyToPayApiV2ForChromePaymentRequest_(isReadyToPayRequest) {\n    let defaultPromise = Promise.resolve({'result': false});\n    if (isReadyToPayRequest.existingPaymentMethodRequired) {\n      defaultPromise =\n          Promise.resolve({'result': false, 'paymentMethodPresent': false});\n    }\n\n    let nativePromise = defaultPromise;\n    if (apiV2DoesMerchantSupportSpecifiedCardType(\n            isReadyToPayRequest, Constants.AuthMethod.CRYPTOGRAM_3DS)) {\n      // If the merchant supports tokenized cards.\n      // Make a separate call to gms core to check if the user isReadyToPay\n      // with just tokenized cards. We can't pass in PAN_ONLY here\n      // because gms core always returns true for PAN_ONLY.\n      // Leave other payment methods as is.\n      const nativeRtpRequest = /** @type {!IsReadyToPayRequest} */\n          (JSON.parse(JSON.stringify(isReadyToPayRequest)));\n      for (var i = 0; i < nativeRtpRequest.allowedPaymentMethods.length; i++) {\n        if (nativeRtpRequest.allowedPaymentMethods[i].type ==\n            Constants.PaymentMethod.CARD) {\n          nativeRtpRequest.allowedPaymentMethods[i]\n              .parameters['allowedAuthMethods'] =\n              [Constants.AuthMethod.CRYPTOGRAM_3DS];\n        }\n      }\n\n      nativePromise = this.delegate_.isReadyToPay(nativeRtpRequest);\n    }\n\n    let webPromise = defaultPromise;\n    if (apiV2DoesMerchantSupportSpecifiedCardType(\n            isReadyToPayRequest, Constants.AuthMethod.PAN_ONLY)) {\n      webPromise = this.webActivityDelegate_.isReadyToPay(isReadyToPayRequest);\n    }\n\n    // Update session storage with payment handler canMakePayment result but\n    // rely on web delegate for actual response\n    if (chromeSupportsPaymentHandler()) {\n      return nativePromise.then(() => webPromise);\n    }\n\n    return nativePromise.then(nativeResult => {\n      if ((nativeResult && nativeResult['result']) == true) {\n        return nativeResult;\n      }\n      return webPromise;\n    });\n  }\n\n  /**\n   * Prefetch paymentData to speed up loadPaymentData call. Note the provided\n   * paymentDataRequest should exactly be the same as provided in\n   * loadPaymentData to make the loadPaymentData call fast since current\n   * web flow prefetching is based on the full request parameters.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   * @export\n   */\n  prefetchPaymentData(paymentDataRequest) {\n    /** @type {?string} */\n    const errorMessage = validateSecureContext() ||\n        validatePaymentDataRequest(paymentDataRequest);\n    if (errorMessage) {\n      PaymentsAsyncClient.logDevErrorToConsole_(\n          'prefetchPaymentData', errorMessage);\n      return;\n    }\n    this.assignInternalParams_(paymentDataRequest);\n    if (chromeSupportsPaymentRequest()\n       && !isNativeDisabledInRequest(paymentDataRequest)) {\n      this.delegate_.prefetchPaymentData(paymentDataRequest);\n    } else {\n      // For non chrome supports always use the hosting page.\n      this.webActivityDelegate_.prefetchPaymentData(paymentDataRequest);\n    }\n  }\n\n  /**\n   * Request PaymentData, which contains necessary infomartion to complete a\n   * payment.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   * @export\n   */\n  loadPaymentData(paymentDataRequest) {\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_BUTTON_CLICK,\n    });\n    const errorMessage = validateSecureContext() ||\n        validatePaymentDataRequest(paymentDataRequest);\n    this.buyFlowMode_ = paymentDataRequest && paymentDataRequest.swg ?\n        BuyFlowMode.SUBSCRIBE_WITH_GOOGLE :\n        BuyFlowMode.PAY_WITH_GOOGLE;\n    if (errorMessage) {\n      this.onPaymentResponse_(new Promise((resolve, reject) => {\n        PayFrameHelper.postMessage({\n          'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n          'error': PublicErrorCode.DEVELOPER_ERROR,\n          'buyFlowMode': this.buyFlowMode_,\n        });\n        PaymentsAsyncClient.logDevErrorToConsole_(\n            'loadPaymentData', errorMessage);\n        reject({\n          'statusCode': Constants.ResponseStatus.DEVELOPER_ERROR,\n          'statusMessage': errorMessage\n        });\n      }));\n      return;\n    }\n\n    // Handler for UPI PaymentMethod\n    // Currently we don't support UPI along with other payment methods, if\n    // UPI is in payment methods then we assume it is UPI only.\n    const upiPaymentMethod = getUpiPaymentMethod(paymentDataRequest);\n    if (upiPaymentMethod) {\n      this.upiHandler_.loadPaymentData(\n          paymentDataRequest, upiPaymentMethod, this.onResult_.bind(this));\n      return;\n    }\n\n    const isReadyToPayResult =\n        window.sessionStorage.getItem(Constants.IS_READY_TO_PAY_RESULT_KEY);\n    this.loadPaymentDataApiStartTimeMs_ = Date.now();\n    this.assignInternalParams_(paymentDataRequest);\n    // We want to fall back to the web delegate if payment handler is supported\n    // and isReadyToPay bit is not explicitly set to true (fallback to web if\n    // isReadyToPay wasn't called for PH)\n    if ((chromeSupportsPaymentHandler() && isReadyToPayResult !== 'true')\n       || isNativeDisabledInRequest(paymentDataRequest)) {\n      this.webActivityDelegate_.loadPaymentData(paymentDataRequest);\n    } else {\n      this.delegate_.loadPaymentData(paymentDataRequest);\n    }\n  }\n\n  /**\n   * Log developer error to console.\n   *\n   * @param {string} apiName\n   * @param {?string} errorMessage\n   * @private\n   */\n  static logDevErrorToConsole_(apiName, errorMessage) {\n    console.error('DEVELOPER_ERROR in ' + apiName + ' : ' + errorMessage);\n  }\n\n  /**\n   * Return a <div> element containing a Google Pay payment button.\n   *\n   * @param {!ButtonOptions=} options\n   * @return {!Element}\n   * @export\n   */\n  createButton(options = {}) {\n    let button = null;\n    // Only log if button was created successfully\n    const startTimeMs = Date.now();\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_RENDER_BUTTON,\n      'clientLatencyStartMs': startTimeMs,\n    });\n    return button;\n  }\n\n  /**\n   * @param {!Event} e postMessage event from the AMP page.\n   * @private\n   */\n  handleMessageEvent_(e) {\n    if (this.isInTrustedDomain_()) {\n      // Only handles the event right now if loaded in trusted domain.\n      if (e.data['name'] === 'logPaymentData') {\n        PayFrameHelper.postMessage(e.data['data']);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @return {boolean}\n   */\n  isInTrustedDomain_() {\n    return TRUSTED_DOMAINS.indexOf(window.location.hostname) != -1;\n  }\n\n  /**\n   * Called when load payment data result is returned. This triggers the payment\n   * response callback passed to the client.\n   *\n   * @private\n   */\n  onResult_(response) {\n    response\n        .then(result => {\n          PayFrameHelper.postMessage({\n            'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n            'clientLatencyStartMs': this.loadPaymentDataApiStartTimeMs_,\n          });\n        })\n        .catch(result => {\n          if (result['errorCode']) {\n            PayFrameHelper.postMessage({\n              'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n              'error': /** @type {!PublicErrorCode} */ (result['errorCode']),\n              'buyFlowMode': this.buyFlowMode_,\n            });\n          } else {\n            // If user closes window we don't get a error code\n            PayFrameHelper.postMessage({\n              'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n              'error': PublicErrorCode.BUYER_CANCEL,\n              'buyFlowMode': this.buyFlowMode_,\n            });\n          }\n        });\n    this.onPaymentResponse_(response);\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {!PaymentDataRequest}\n   * @private\n   */\n  assignInternalParams_(paymentDataRequest) {\n    const internalParam = {\n      'startTimeMs': Date.now(),\n      'googleTransactionId': PaymentsAsyncClient.googleTransactionId_,\n    };\n    paymentDataRequest['i'] = paymentDataRequest['i'] ?\n        Object.assign(internalParam, paymentDataRequest['i']) :\n        internalParam;\n    return paymentDataRequest;\n  }\n}\n\n/** @const {?string} */\nPaymentsAsyncClient.googleTransactionId_;\n\n\n/**\n * Whether the request specifies that the native support has to be disabled.\n *\n * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n * @return {boolean}\n */\nfunction isNativeDisabledInRequest(request) {\n  return (request['i'] && request['i']['disableNative']) === true;\n}\n\n\nexport {PaymentsAsyncClient};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * An interface which captures what we need to start up buyflow across surfaces.\n * @interface\n */\nclass PaymentsClientDelegateInterface {\n  /**\n   * Check whether the user can make payments using the Payment API.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   */\n  isReadyToPay(isReadyToPayRequest) {}\n\n  /**\n   * Prefetch paymentData to speed up loadPaymentData call. Note the provided\n   * paymentDataRequest should exactly be the same as provided in\n   * loadPaymentData to make the loadPaymentData call fast.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   */\n  prefetchPaymentData(paymentDataRequest) {}\n\n  /**\n   * Request PaymentData, which contains necessary infomartion to complete a\n   * payment.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   */\n  loadPaymentData(paymentDataRequest) {}\n\n  /**\n   * @param {function(!Promise<!PaymentData>)} callback\n   */\n  onResult(callback) {}\n}\n\nexport {PaymentsClientDelegateInterface};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Description of this file.\n */\nimport {Constants} from './constants.js';\nimport {PaymentsClientDelegateInterface} from './payments_client_delegate_interface.js';\n\n/**\n * An implementation of PaymentsClientDelegateInterface that leverages payment\n * request.\n * @implements {PaymentsClientDelegateInterface}\n */\nclass PaymentsRequestDelegate {\n  /**\n   * @param {string} environment\n   */\n  constructor(environment) {\n    this.environment_ = environment;\n\n    /** @private {?function(!Promise<!PaymentData>)} */\n    this.callback_ = null;\n  }\n\n  /** @override */\n  onResult(callback) {\n    this.callback_ = callback;\n  }\n\n  /** @override */\n  isReadyToPay(isReadyToPayRequest) {\n    /** @type{!PaymentRequest} */\n    const paymentRequest = this.createPaymentRequest_(isReadyToPayRequest);\n    return new Promise((resolve, reject) => {\n      paymentRequest.canMakePayment()\n          .then(result => {\n            window.sessionStorage.setItem(\n                Constants.IS_READY_TO_PAY_RESULT_KEY, result.toString());\n            const response = {'result': result};\n            if (isReadyToPayRequest.apiVersion >= 2 &&\n                isReadyToPayRequest.existingPaymentMethodRequired) {\n              // For apiVersion 2, we always use native to only check for\n              // tokenized cards.\n              // For tokenized cards native always does a presence check so\n              // we can say that if canMakePayment is true for native for\n              // tokenizedCards then the user has a payment method which is\n              // present.\n              response['paymentMethodPresent'] = result;\n            }\n            resolve(response);\n          })\n          .catch(function(err) {\n            if (window.sessionStorage.getItem(\n                    Constants.IS_READY_TO_PAY_RESULT_KEY)) {\n              resolve({\n                'result': window.sessionStorage.getItem(\n                              Constants.IS_READY_TO_PAY_RESULT_KEY) == 'true'\n              });\n            } else {\n              resolve({'result': false});\n            }\n          });\n    });\n  }\n\n  /** @override */\n  prefetchPaymentData(paymentDataRequest) {\n    // Creating PaymentRequest instance will call\n    // Gcore isReadyToPay internally which will prefetch tempaltes.\n    this.createPaymentRequest_(\n        paymentDataRequest, this.environment_,\n        paymentDataRequest.transactionInfo.currencyCode,\n        paymentDataRequest.transactionInfo.totalPrice);\n  }\n\n  /** @override */\n  loadPaymentData(paymentDataRequest) {\n    this.loadPaymentDataThroughPaymentRequest_(paymentDataRequest);\n  }\n\n  /**\n   * Create PaymentRequest instance.\n   *\n   * @param {!IsReadyToPayRequest|!PaymentDataRequest} request The necessary information to check if user is\n   *     ready to pay or to support a payment from merchants.\n   * @param {?string=} environment (optional)\n   * @param {?string=} currencyCode (optional)\n   * @param {?string=} totalPrice (optional)\n   * @return {!PaymentRequest} PaymentRequest instance.\n   * @private\n   */\n  createPaymentRequest_(request, environment, currencyCode, totalPrice) {\n    let data = {};\n    if (request) {\n      data = JSON.parse(JSON.stringify(request));\n    }\n\n    // Only set the apiVersion if the merchant doesn't set it.\n    if (!data['apiVersion']) {\n      data['apiVersion'] = 1;\n    }\n\n    // Add allowedPaymentMethods for swg to get through gms core validation.\n    if (data['swg']) {\n      data['allowedPaymentMethods'] = [Constants.PaymentMethod.CARD];\n    }\n\n    if (environment && environment == Constants.Environment.TEST) {\n      data['environment'] = environment;\n    }\n\n    const supportedInstruments = [{\n      'supportedMethods': ['https://google.com/pay'],\n      'data': data,\n    }];\n\n    const details = {\n      'total': {\n        'label': 'Estimated Total Price',\n        'amount': {\n          // currency and value are required fields in PaymentRequest, but these\n          // fields will never be used since PaymentRequest UI is skipped when\n          // we're the only payment method, so default to some value to by pass\n          // this requirement.\n          'currency': currencyCode || 'USD',\n          'value': totalPrice || '0',\n        }\n      }\n    };\n\n    return new PaymentRequest(supportedInstruments, details);\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   * @private\n   */\n  loadPaymentDataThroughPaymentRequest_(paymentDataRequest) {\n    const currencyCode = (paymentDataRequest.transactionInfo &&\n                          paymentDataRequest.transactionInfo.currencyCode) ||\n        undefined;\n    const totalPrice = (paymentDataRequest.transactionInfo &&\n                        paymentDataRequest.transactionInfo.totalPrice) ||\n        undefined;\n    const paymentRequest = this.createPaymentRequest_(\n        paymentDataRequest, this.environment_, currencyCode, totalPrice);\n    this.callback_(\n        /** @type{!Promise<!PaymentData>} */\n        (paymentRequest.show()\n             .then(\n                 /**\n                  * @param {!PaymentResponse} paymentResponse\n                  * @return {!PaymentData}\n                  */\n                 (paymentResponse) => {\n                   // Should be called to dismiss any remaining UI\n                   paymentResponse.complete('success');\n                   return paymentResponse.details;\n                 })\n             .catch(function(err) {\n               err['statusCode'] = Constants.ResponseStatus.CANCELED;\n               throw err;\n             })));\n  }\n}\n\nexport {PaymentsRequestDelegate};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\nimport {Graypane} from './graypane.js';\nimport {PaymentsClientDelegateInterface} from './payments_client_delegate_interface.js';\nimport {ActivityPort, ActivityPorts, ActivityIframePort} from 'web-activities/activity-ports';\nimport {BuyFlowActivityMode, PayFrameHelper, PostMessageEventType} from './pay_frame_helper.js';\nimport {doesMerchantSupportOnlyTokenizedCards} from './validator.js';\nimport {injectStyleSheet, injectIframe} from './element_injector.js';\n\nconst GPAY_ACTIVITY_REQUEST = 'GPAY';\nconst IFRAME_CLOSE_DURATION_IN_MS = 250;\nconst IFRAME_SHOW_UP_DURATION_IN_MS = 250;\nconst IFRAME_SMOOTH_HEIGHT_TRANSITION =\n    `height ${IFRAME_SHOW_UP_DURATION_IN_MS}ms`;\nconst ERROR_PREFIX = 'Error: ';\n\n/**\n * Supported browser user agent keys.\n *\n * @enum {string}\n */\nconst BrowserUserAgent = {\n  CHROME: 'Chrome',\n  FIREFOX: 'Firefox',\n  SAFARI: 'Safari',\n};\n\n\n/**\n * Resizing payload including resize height and transition style.\n *\n * @typedef {{\n *   height: string,\n *   transition: string,\n * }}\n */\nlet ResizePayload;\n\n\n/**\n * An implementation of PaymentsClientDelegateInterface that uses the custom\n * hosting page along with web activities to actually get to the hosting page.\n * @implements {PaymentsClientDelegateInterface}\n */\nclass PaymentsWebActivityDelegate {\n  /**\n   * @param {string} environment\n   * @param {string} googleTransactionId\n   * @param {boolean=} opt_useIframe\n   * @param {!ActivityPorts=} opt_activities Can be used to provide a shared\n   *   activities manager. By default, the new manager is created.\n   * @param {?string=} opt_redirectKey The redirect key used for redirect mode.\n   */\n  constructor(environment, googleTransactionId, opt_useIframe,\n             opt_activities, opt_redirectKey) {\n    this.environment_ = environment;\n    /** @private @const {boolean} */\n    \n    /** @const {!ActivityPorts} */\n    this.activities = opt_activities || new ActivityPorts(window);\n    /** @const @private {!Graypane} */\n    this.graypane_ = new Graypane(window.document);\n    /** @private {?function(!Promise<!PaymentData>)} */\n    this.callback_ = null;\n    /**\n     * @private {?{\n     *             container: !Element,\n     *             iframe:!HTMLIFrameElement,\n     *             request:!PaymentDataRequest,\n     *             dataPromise:?Promise<!PaymentData>}}\n     */\n    this.prefetchedObjects_ = null;\n    /** @private {boolean} */\n    this.shouldHandleResizing_ = false;\n    /** @private {?ActivityIframePort} */\n    this.port_ = null;\n    /** @private {?function(!Promise<void>)} */\n    this.dismissPromiseResolver_ = null;\n    /** @const @private {string} */\n    this.googleTransactionId_ = googleTransactionId;\n    /** @const @private {?string} */\n    this.redirectKey_ = opt_redirectKey || null;\n\n    /**\n     * @private {?ResizePayload}\n     */\n    this.savedResizePayload_ = null;\n\n    // Only install dialog styles when iframing is allowed.\n    if (null) {\n      injectStyleSheet(Constants.IFRAME_STYLE);\n      if (null) {\n        injectStyleSheet(Constants.IFRAME_STYLE_CENTER);\n      }\n    }\n  }\n\n  /** @override */\n  onResult(callback) {\n    if (this.callback_) {\n      return;\n    }\n    this.callback_ = callback;\n    this.activities.onResult(GPAY_ACTIVITY_REQUEST,\n                             this.onActivityResult_.bind(this));\n  }\n\n  /**\n   * @param {!ActivityPort} port\n   * @private\n   */\n  onActivityResult_(port) {\n    // Hide the graypane.\n    this.graypane_.hide();\n    // Only verified origins are allowed.\n    this.callback_(port.acceptResult().then(\n        (result) => {\n          // Origin must always match: popup, iframe or redirect.\n          if (result.origin != this.getOrigin_()) {\n            throw new Error('channel mismatch');\n          }\n          const data = /** @type {!PaymentData} */ (result.data);\n          if (data['redirectEncryptedCallbackData']) {\n            PayFrameHelper.setBuyFlowActivityMode(\n                BuyFlowActivityMode.REDIRECT);\n            return this.fetchRedirectResponse_(\n                data['redirectEncryptedCallbackData'])\n                .then((decrypedJson) => {\n                  // Merge other non-encrypted fields into the final response.\n                  const clone = Object.assign({}, data);\n                  delete clone['redirectEncryptedCallbackData'];\n                  return Object.assign(clone, decrypedJson);\n                });\n          }\n          // Unencrypted data supplied: must be a verified and secure channel.\n          if (!result.originVerified || !result.secureChannel) {\n            throw new Error('channel mismatch');\n          }\n          return data;\n        },\n        (error) => {\n          // TODO: Log the original and the inferred error to eye3.\n          let originalError = error['message'];\n          let inferredError = error['message'];\n          try {\n            // Try to parse the error message to a structured error, if it's\n            // not possible, fallback to use the error message string.\n            inferredError =\n                JSON.parse(originalError.substring(ERROR_PREFIX.length));\n          } catch (e) {\n          }\n          if (inferredError['statusCode'] && [\n                'DEVELOPER_ERROR', 'MERCHANT_ACCOUNT_ERROR'\n              ].indexOf(inferredError['statusCode']) == -1) {\n            inferredError = {\n              'statusCode': 'CANCELED',\n            };\n          }\n          if (inferredError == 'AbortError') {\n            inferredError = {\n              'statusCode': 'CANCELED',\n            };\n          }\n          return Promise.reject(inferredError);\n        }));\n  }\n\n  /**\n   * @param {string} redirectEncryptedCallbackData\n   * @return {!PaymentData}\n   * @private\n   */\n  fetchRedirectResponse_(redirectEncryptedCallbackData) {\n    // This method has to rely on the legacy XHR API because the redirect\n    // functionality is, in part, aimed at older browsers.\n    return new Promise((resolve, reject) => {\n      const url = this.getDecryptionUrl_();\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', url, true);\n      if ('withCredentials' in xhr) {\n        // It's fine to proceed in a non-redirect mode because redirectVerifier\n        // plays the part of CORS propagation.\n        xhr.withCredentials = true;\n      }\n\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n          return;\n        }\n        if (xhr.status < 100 || xhr.status > 599) {\n          xhr.onreadystatechange = null;\n          reject(new Error(`Unknown HTTP status ${xhr.status}`));\n          return;\n        }\n        if (xhr.readyState == /* COMPLETE */ 4) {\n          try {\n            resolve(JSON.parse(xhr.responseText));\n          } catch (e) {\n            // JSON parsing error is expected here.\n            reject(e);\n          }\n        }\n      };\n      xhr.onerror = () => {\n        reject(new Error('Network failure'));\n      };\n      xhr.onabort = () => {\n        reject(new Error('Request aborted'));\n      };\n\n      // Send POST.\n      xhr.send(redirectEncryptedCallbackData);\n    });\n  }\n\n  /** @override */\n  isReadyToPay(isReadyToPayRequest) {\n    return new Promise((resolve, reject) => {\n      if (doesMerchantSupportOnlyTokenizedCards(isReadyToPayRequest)) {\n        resolve({'result': false});\n        return;\n      }\n      const userAgent = window.navigator.userAgent;\n      const isIosGsa = userAgent.indexOf('GSA/') > 0 &&\n          userAgent.indexOf(BrowserUserAgent.SAFARI) > 0;\n      // pop up in IGSA doesn't work.\n      if (isIosGsa && !null) {\n        resolve({'result': false});\n        return;\n      }\n      const isFirefoxIos = userAgent.indexOf('FxiOS') > 0;\n      if (isFirefoxIos) {\n        resolve({'result': false});\n        return;\n      }\n      const isSupported = userAgent.indexOf(BrowserUserAgent.CHROME) > 0 ||\n          userAgent.indexOf(BrowserUserAgent.FIREFOX) > 0 ||\n          userAgent.indexOf(BrowserUserAgent.SAFARI) > 0;\n      if (isSupported && isReadyToPayRequest.apiVersion >= 2 &&\n          isReadyToPayRequest.existingPaymentMethodRequired) {\n        isReadyToPayRequest.environment = this.environment_;\n        PayFrameHelper.sendAndWaitForResponse(\n            isReadyToPayRequest, PostMessageEventType.IS_READY_TO_PAY,\n            'isReadyToPayResponse', function(event) {\n              const response = {\n                'result': isSupported,\n              };\n              if (isReadyToPayRequest.existingPaymentMethodRequired) {\n                response['paymentMethodPresent'] =\n                    event.data['isReadyToPayResponse'] == 'READY_TO_PAY';\n              }\n              resolve(response);\n            });\n      } else {\n        resolve({'result': isSupported});\n      }\n    });\n  }\n\n  /** @override */\n  prefetchPaymentData(paymentDataRequest) {\n    // Only handles prefetch for iframe for now.\n    if (!null) {\n      return;\n    }\n    const containerAndFrame = this.injectIframe_(paymentDataRequest);\n    const paymentDataPromise = this.openIframe_(\n        containerAndFrame['container'], containerAndFrame['iframe'],\n        paymentDataRequest);\n    this.prefetchedObjects_ = {\n      'container': containerAndFrame['container'],\n      'iframe': containerAndFrame['iframe'],\n      'request': paymentDataRequest,\n      'dataPromise': paymentDataPromise,\n    };\n  }\n\n  /** @override */\n  loadPaymentData(paymentDataRequest) {\n    if (!paymentDataRequest.swg) {\n      // Only set the apiVersion if the merchant is not setting it.\n      if (!paymentDataRequest.apiVersion) {\n        paymentDataRequest.apiVersion = 1;\n      }\n    }\n    paymentDataRequest.environment = this.environment_;\n    if (null) {\n      PayFrameHelper.setBuyFlowActivityMode(BuyFlowActivityMode.IFRAME);\n      // TODO: Compare the request with prefetched request.\n      let containerAndFrame;\n      let paymentDataPromise;\n      if (this.prefetchedObjects_) {\n        // Rendering prefetched frame and container.\n        containerAndFrame = this.prefetchedObjects_;\n        paymentDataPromise = this.prefetchedObjects_['dataPromise'];\n        this.prefetchedObjects_ = null;\n      } else {\n        containerAndFrame = this.injectIframe_(paymentDataRequest);\n        paymentDataPromise = this.openIframe_(\n            containerAndFrame['container'], containerAndFrame['iframe'],\n            paymentDataRequest);\n      }\n      this.showContainerAndIframeWithAnimation_(\n          containerAndFrame['container'], containerAndFrame['iframe'],\n          paymentDataRequest);\n      history.pushState({}, '', '');\n      const onPopState = (e) => {\n        e.preventDefault();\n        this.backButtonHandler_(containerAndFrame);\n        window.removeEventListener('popstate', onPopState);\n      };\n      window.addEventListener('popstate', onPopState);\n      const dismissPromise = new Promise(resolve => {\n        this.dismissPromiseResolver_ = resolve;\n      });\n      this.callback_(Promise.race([paymentDataPromise, dismissPromise]));\n      return;\n    }\n    PayFrameHelper.setBuyFlowActivityMode(\n        paymentDataRequest['forceRedirect'] ? BuyFlowActivityMode.REDIRECT :\n                                              BuyFlowActivityMode.POPUP);\n    const opener = this.activities.open(\n        GPAY_ACTIVITY_REQUEST, this.getHostingPageUrl_(),\n        this.getRenderMode_(paymentDataRequest), paymentDataRequest,\n        {'width': 600, 'height': 600});\n    this.graypane_.show(opener && opener.targetWin);\n  }\n\n  /**\n   * Returns the render mode whether need to force redirect.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {string}\n   * @private\n   */\n  getRenderMode_(paymentDataRequest) {\n    return paymentDataRequest['forceRedirect'] ?\n        '_top' :\n        'gp-js-popup';\n  }\n\n  /**\n   * Returns the server origin based on the environment.\n   *\n   * @private\n   * @return {string}\n   */\n  getOrigin_() {\n    if (this.environment_ == Constants.Environment.LOCAL) {\n      return '';\n    }\n\n    var baseDomain;\n    if (this.environment_ == Constants.Environment.PREPROD) {\n      baseDomain = 'pay-preprod.sandbox';\n    } else if (this.environment_ == Constants.Environment.SANDBOX) {\n      baseDomain = 'pay.sandbox';\n    } else {\n      baseDomain = 'pay';\n    }\n    return 'https://' + baseDomain + '.google.com';\n  }\n\n  /**\n   * Returns the base path based on the environment.\n   *\n   * @private\n   * @return {string} The base path\n   */\n  getBasePath_() {\n    return this.getOrigin_() + '/gp/p';\n  }\n\n  /**\n   * Returns the decryption url to be used to decrypt the encrypted payload.\n   *\n   * @private\n   * @return {string} The decryption url\n   */\n  getDecryptionUrl_() {\n    let url = this.getBasePath_() + '/apis/buyflow/process';\n    if (this.redirectKey_) {\n      url += '?rk=' + encodeURIComponent(this.redirectKey_);\n    }\n    return url;\n  }\n\n  /**\n   * Returns the hosting page url.\n   *\n   * @private\n   * @return {string} The hosting page url\n   */\n  getHostingPageUrl_() {\n    // In Tin tests, the hosting page is requested from\n    // /testing/buyflow/merchantdemo.html and is accessed relatively since the\n    // base path is unknown ahead of time.\n    if (this.environment_ == Constants.Environment.TIN) {\n      // There is no /gp/p prefix since multilogin prefixes is broken in Tin:\n      // http://yaqs/4912322941550592\n      return '/ui/pay';\n    }\n    return this.getBasePath_() + '/ui/pay';\n  }\n\n  /**\n   * Returns the iframe pwg url to be used to be used for amp.\n   *\n   * @param {string} environment\n   * @param {string} origin\n   * @return {string} The iframe url\n   */\n  getIframeUrl(environment, origin) {\n    // TODO: These should be compile time constants and not dependent\n    // on the environment.\n    let iframeUrl = `https://pay.google.com/gp/p/ui/pay?origin=${origin}`;\n    if (environment == Constants.Environment.SANDBOX ||\n        environment == Constants.Environment.PREPROD) {\n      iframeUrl =   `https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=${origin}`;\n    }\n    return iframeUrl;\n  }\n\n  /**\n   * Close iframe with animation.\n   *\n   * @param {!Element} container\n   * @param {!HTMLIFrameElement} iframe\n   * @private\n   */\n  removeIframeAndContainer_(container, iframe) {\n    const transitionStyle = 'all ' + IFRAME_CLOSE_DURATION_IN_MS + 'ms ease 0s';\n    this.setTransition_(iframe, transitionStyle);\n    iframe.height = '0px';\n    // TODO: This should be replaced by listening to TransitionEnd event\n    setTimeout(() => {\n      if (container.parentNode) {\n        container.parentNode.removeChild(container);\n      }\n    }, IFRAME_CLOSE_DURATION_IN_MS);\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {{container: !Element, iframe:!HTMLIFrameElement}}\n   * @private\n   */\n  injectIframe_(paymentDataRequest) {\n    const containerAndFrame = injectIframe(\n        this.isVerticalCenterExperimentEnabled_(paymentDataRequest) ?\n            Constants.IFRAME_STYLE_CENTER_CLASS :\n            Constants.IFRAME_STYLE_CLASS);\n    const iframe = containerAndFrame['iframe'];\n    const container = containerAndFrame['container'];\n    container.addEventListener(\n        'click', this.closeActionHandler_.bind(this, containerAndFrame));\n    // Hide iframe and disable resize at initialize.\n    container.style.display = 'none';\n    iframe.style.display = 'none';\n    iframe.height = '0px';\n    const transitionStyle =\n        'all ' + IFRAME_SHOW_UP_DURATION_IN_MS + 'ms ease 0s';\n    this.setTransition_(iframe, transitionStyle);\n    this.shouldHandleResizing_ = false;\n    return containerAndFrame;\n  }\n\n  /**\n   * Handler when back button is triggered, should dismiss iframe if present.\n   * @param {{container: !Element, iframe:!HTMLIFrameElement}} containerAndFrame\n   * @private\n   */\n  backButtonHandler_(containerAndFrame) {\n    this.dismissIframe_(containerAndFrame);\n  }\n\n  /**\n   * Handler when close action is triggered, will pop history state to close\n   * the iframe.\n   * @param {{container: !Element, iframe:!HTMLIFrameElement}} containerAndFrame\n   * @private\n   */\n  closeActionHandler_(containerAndFrame) {\n    if (containerAndFrame['container'].parentNode) {\n      // Close action only when container is still attached to the page.\n      history.back();\n    }\n  }\n\n  /**\n   * @param {{container: !Element, iframe:!HTMLIFrameElement}} containerAndFrame\n   * @private\n   */\n  dismissIframe_(containerAndFrame) {\n    // Dismiss iframe only when container is still attached in the page.\n    if (containerAndFrame['container'].parentNode) {\n      // TODO: Think about whether this could be just hide instead of\n      // disconnect and remove, the tricky part is how to handle the case where\n      // payment data request is not the same.\n      this.dismissPromiseResolver_(Promise.reject({'errorCode': 'CANCELED'}));\n      this.removeIframeAndContainer_(\n          containerAndFrame['container'], containerAndFrame['iframe']);\n      this.port_ && this.port_.disconnect();\n    }\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {boolean}\n   * @private\n   */\n  isVerticalCenterExperimentEnabled_(paymentDataRequest) {\n    return null\n        && paymentDataRequest['i']\n        && paymentDataRequest['i'].renderContainerCenter;\n  }\n\n  /**\n   * @param {!Element} container\n   * @param {!HTMLIFrameElement} iframe\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @private\n   */\n  showContainerAndIframeWithAnimation_(container, iframe, paymentDataRequest) {\n    container.style.display = 'block';\n    iframe.style.display = 'block';\n    setTimeout(() => {\n      // Hard code the apprx height here, it will be resize to expected height\n      // later.\n      iframe.height = '280px';\n      if (this.isVerticalCenterExperimentEnabled_(paymentDataRequest)) {\n        iframe.classList.add(Constants.IFRAME_ACTIVE_CONTAINER_CLASS);\n      }\n      // TODO: This should be handles properly by listening to\n      // TransitionEnd event.\n      setTimeout(() => {\n        this.shouldHandleResizing_ = true;\n        // TODO: Add browser test that catches this.\n        if (this.savedResizePayload_) {\n          this.setTransition_(iframe, this.savedResizePayload_['transition']);\n          iframe.height = this.savedResizePayload_['height'];\n          this.savedResizePayload_ = null;\n        }\n      }, IFRAME_SHOW_UP_DURATION_IN_MS);\n    }, 1);\n  }\n\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} transitionStyle\n   * @private\n   */\n  setTransition_(iframe, transitionStyle) {\n    iframe.style.setProperty('transition', transitionStyle);\n    // For safari.\n    iframe.style.setProperty('-webkit-transition', transitionStyle);\n  }\n\n  /**\n   * Use WebActivitiy to open iframe that's in given container.\n   *\n   * @param {!Element} container\n   * @param {!HTMLIFrameElement} iframe\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {!Promise<!PaymentData>}\n   * @private\n   */\n  openIframe_(container, iframe, paymentDataRequest) {\n    if (!paymentDataRequest.swg) {\n      if (!paymentDataRequest.apiVersion) {\n        paymentDataRequest.apiVersion = 1;\n      }\n    }\n    paymentDataRequest.environment = this.environment_;\n    let iframeLoadStartTime;\n    const trustedUrl =\n        this.getIframeUrl(this.environment_, window.location.origin);\n    return this.activities.openIframe(iframe, trustedUrl, paymentDataRequest)\n        .then(port => {\n          // Handle custom resize message.\n          this.port_ = port;\n          port.onMessage(payload => {\n            if (payload['type'] !== 'resize' || !this.shouldHandleResizing_) {\n              // Save the resize event later after initial animation is finished\n              this.savedResizePayload_ = {\n                'height': payload['height'],\n                'transition': payload['transition']\n              };\n              return;\n            }\n            // b/111310899: Smooth out initial iFrame loading\n            if (!iframeLoadStartTime) {\n              iframeLoadStartTime = Date.now();\n            }\n            if (Date.now() <\n                iframeLoadStartTime + IFRAME_SHOW_UP_DURATION_IN_MS) {\n              this.setTransition_(iframe, payload['transition'] + ', '\n                  + IFRAME_SMOOTH_HEIGHT_TRANSITION);\n            } else {\n              this.setTransition_(iframe, payload['transition']);\n            }\n            iframe.height = payload['height'];\n          });\n          return /** @type {!Promise<!Object>} */ (port.acceptResult());\n        })\n        .then(\n            /**\n             * @param {!Object} result\n             * @return {!PaymentData}\n             */\n            result => {\n              this.removeIframeAndContainer_(container, iframe);\n              // This is only for popping the state we pushed earlier.\n              history.back();\n              const data = /** @type {!PaymentData} */ (result['data']);\n              return data;\n            },\n            error => {\n              this.removeIframeAndContainer_(container, iframe);\n              // This is only for popping the state we pushed earlier.\n              history.back();\n              return Promise.reject(error);\n            });\n  }\n}\n\nexport {PaymentsWebActivityDelegate};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Service wrapping window.parent.postMessage. This enables\n * window.postMessage to be swapped out in unit tests.\n */\nclass PostMessageService {\n  constructor(window) {\n    /** @private @const {!Window} */\n    this.window_ = window;\n  }\n\n  /**\n   * Passthrough to Window#postMessage. See Window#postMessage DOM API\n   * documentation for more information about arguments.\n   *\n   * @param {!Object} message\n   * @param {string} targetOrigin\n   */\n  postMessage(message, targetOrigin) {\n    this.window_.postMessage(message, targetOrigin);\n  }\n}\n\nexport {PostMessageService};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\nimport {PublicErrorCode} from './pay_frame_helper.js';\nimport {getUpiPaymentMethod} from './validator.js';\n\nclass UpiHandler {\n  constructor() {}\n\n  /**\n   * Returns upi payment method object if it exists in allowed payment methods\n   * or null if it doesn't\n   *\n   * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n   * @return {boolean}\n   */\n  isUpiRequest(request) {\n    return !!getUpiPaymentMethod(request);\n  }\n\n  /**\n   * Returns upi payment method object if it exists in allowed payment methods\n   * or null if it doesn't\n   *\n   * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   */\n  isReadyToPay(request) {\n    // Always return true for UPI if api version is 2 and chrome supports\n    // payment request\n    if (getUpiPaymentMethod(request)) {\n      if (request.existingPaymentMethodRequired) {\n        return Promise.resolve({'result': true, 'paymentMethodPresent': true});\n      } else {\n        return Promise.resolve({'result': true});\n      }\n    }\n    throw new Error('No Upi payment method found in handler');\n  }\n\n  /**\n   * Request payment data when payment method is UPI\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   * @param {!Object} upiPaymentMethod UPI paymentmethod in\n   *     allowedPaymentMethods array.\n   * @param {!Function} onResultCallback Function to call when everything is\n   *     done.\n   */\n  loadPaymentData(paymentDataRequest, upiPaymentMethod, onResultCallback) {\n    const parameters = upiPaymentMethod['parameters'];\n    const transactionInfo = paymentDataRequest['transactionInfo'];\n    const supportedInstruments = null ?\n        [{\n          // This is the url for Tez teamfood release.\n          'supportedMethods': ['https://pwp-server.appspot.com/pay-teamfood'],\n          'data': {\n            'pa': 'redbus@axisbank',\n            'pn': parameters['payeeName'],\n            'tr': parameters['transactionReferenceId'],\n            'url': parameters['referenceUrl'],\n            'mc': '4131',\n            'tn': 'Purchase in Merchant',\n          },\n        }] :\n        [{\n          'supportedMethods': ['https://tez.google.com/pay'],\n          'data': {\n            'pa': parameters['payeeVpa'],\n            'pn': parameters['payeeName'],\n            'tr': parameters['transactionReferenceId'],\n            'url': parameters['referenceUrl'],\n            'mc': parameters['mcc'],\n            'tn': transactionInfo['transactionNote'],\n          },\n        }];\n\n    if (parameters['transactionId']) {\n      supportedInstruments[0]['data']['tid'] = parameters['transactionId'];\n    }\n\n    const details = {\n      'total': {\n        'label': 'Total',\n        'amount': {\n          'currency': transactionInfo['currencyCode'],\n          'value': transactionInfo['totalPrice'],\n        },\n      },\n      'displayItems': [{\n        'label': 'Original Amount',\n        'amount': {\n          'currency': transactionInfo['currencyCode'],\n          'value': transactionInfo['totalPrice'],\n        },\n      }],\n    };\n\n    let request = new PaymentRequest(supportedInstruments, details);\n\n    onResultCallback(\n        this.checkCanMakePayment_(request)\n            .then(result => {\n              if (result) {\n                return this.showUi_(request);\n              } else {\n                return this.redirectToGooglePlay_();\n              }\n            })\n            .then(paymentData => {\n              return this.processData_(\n                  paymentData, paymentDataRequest, upiPaymentMethod);\n            })\n            .catch(error => {\n              error['statusCode'] = Constants.ResponseStatus.CANCELED;\n              return Promise.reject(error);\n            }));\n  }\n\n  /**\n   * Show the Tez payment request UI.\n   *\n   * @private\n   * @param {!PaymentRequest} request The payment request object.\n   * @return {!Promise<!PaymentData>} A promise containing payment response.\n   */\n  showUi_(request) {\n    return request.show().then(paymentResponse => {\n      paymentResponse.complete('success');\n      return paymentResponse.details;\n    });\n  }\n\n  /**\n   * Checks whether can make a payment with Tez on this device.\n   *\n   * @private\n   * @param {!PaymentRequest} request The payment request object.\n   * @return {!Promise<boolean>} a promise containing the result of whether can\n   *     make payment.\n   */\n  checkCanMakePayment_(request) {\n    // Checks canMakePayment cache, and use the cache result if it exists.\n    const cacheResult =\n        window.sessionStorage.getItem(Constants.UPI_CAN_MAKE_PAYMENT_CACHE_KEY);\n    if (cacheResult) {\n      return Promise.resolve(cacheResult === 'true');\n    }\n\n    // Feature detect canMakePayment().\n    if (!request.canMakePayment) {\n      return Promise.resolve(true);\n    }\n\n    let canMakePaymentPromise = request.canMakePayment();\n\n    return canMakePaymentPromise.then(result => {\n      // Store the result in cache if the result is true to avoid quota error\n      // caused by querying multiple times with different data.\n      // Doesn't store false because if we do so, user will be redirected to\n      // Google Play again after installing Google Pay if Chrome is not closed.\n      if (result) {\n        window.sessionStorage.setItem(\n            Constants.UPI_CAN_MAKE_PAYMENT_CACHE_KEY, result.toString());\n      }\n      return result;\n    });\n  }\n\n  /**\n   * Redirect user to Google Pay app in Google Play store\n   *\n   * @private\n   * @returns {!Promise<!Object>} Rejected promise with error message\n   */\n  redirectToGooglePlay_() {\n    window.location.replace(\n        null ?\n            'https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user.teamfood ' :  // NOLINT\n            'https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user');  // NOLINT\n    return Promise.reject(\n        {'errorMessage': 'Cannot redirect to Tez page in Google Play.'});\n  }\n\n  /**\n   * Convert Tez payment data to GPay payment data if payment succeeded, or\n   * reject if payment failed\n   *\n   * @private\n   * @param {!PaymentData} tezPaymentData The payment data object from Tez.\n   * @param {!PaymentDataRequest} paymentDataRequest The payment data request.\n   * @param {!Object} upiPaymentMethod UPI paymentmethod in\n   * allowedPaymentMethods array\n   * @returns {!Promise<PaymentData>} A promise containing payment data or\n   *     error message.\n   */\n  processData_(tezPaymentData, paymentDataRequest, upiPaymentMethod) {\n    const tezResponse = JSON.parse(tezPaymentData['tezResponse']);\n    if (tezResponse['Status'] === 'FAILURE') {\n      let error;\n      switch (tezResponse['responseCode']) {\n        case 'ZM':\n          // payment failure due to invalid MPIN\n          error = {\n            'errorCode': PublicErrorCode.BUYER_ACCOUNT_ERROR,\n            'errorMessage': 'Payment failure due to invalid MPIN.'\n          };\n          break;\n        case 'Z9':\n          // payment failure due to insufficient funds\n          error = {\n            'errorCode': PublicErrorCode.BUYER_ACCOUNT_ERROR,\n            'errorMessage': 'Payment failure due to insufficient funds.'\n          };\n          break;\n        case '91':\n          // payment failure due to transaction timeout or connection issue\n          error = {\n            'errorCode': PublicErrorCode.INTERNAL_ERROR,\n            'errorMessage':\n                'Payment failure due to transaction timeout or connection' +\n                ' issue.'\n          };\n          break;\n        default:\n          // payment failure due to user cancel or other issues\n          error = {'errorMessage': 'Payment cancelled.'};\n      }\n      return Promise.reject(error);\n    }\n\n    const signedMessage = {\n      'paymentMethodType': 'UPI',\n      'payeeVpa': upiPaymentMethod['parameters']['payeeVpa'],\n      'status': tezResponse['Status'],\n      'transactionReferenceId':\n          upiPaymentMethod['parameters']['transactionReferenceId'],\n      'transactionId': upiPaymentMethod['parameters']['transactionId'] ?\n          upiPaymentMethod['parameters']['transactionId'] :\n          tezResponse['txnId'],\n      'transactionInfo': paymentDataRequest['transactionInfo'],\n    };\n\n    let paymentData = {\n      'apiVersion': paymentDataRequest['apiVersion'],\n      'apiVersionMinor': paymentDataRequest['apiVersionMinor'],\n      'paymentMethodData': {\n        'type': upiPaymentMethod['type'],\n        'tokenizationData': {\n          'type': 'DIRECT',\n          'token': {\n            'protocolVersion': 'ECv1',\n            // TODO: Verify that response comes from tez and\n            // add signature and encrypt signed message here\n            'signature': '',\n            'signedMessage': signedMessage\n          }\n        }\n      }\n    };\n    return Promise.resolve(paymentData);\n  }\n}\n\nexport {UpiHandler};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport uuid from '../third_party/random_uuid/Random.uuid.js';\n\n/**\n * Returns a google transaction id.\n *\n * @param {string} environment\n * @return {string}\n */\nfunction createGoogleTransactionId(environment) {\n  return uuid.uuidFast() + '.' + environment;\n}\n\nexport {createGoogleTransactionId};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\n\n/**\n * @return {boolean} true if this version of Chrome supports PaymentHandler.\n */\nfunction chromeSupportsPaymentHandler() {\n  // Check if feature is enabled for user\n  if (typeof google == 'undefined' ||\n      !null) {\n    return false;\n  }\n\n  // Payment handler isn't supported on mobile\n  const mobilePlatform = window.navigator.userAgent.match(\n      /Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i);\n  if (mobilePlatform != null) {\n    return false;\n  }\n\n  const chromeVersion = window.navigator.userAgent.match(/Chrome\\/([0-9]+)\\./i);\n  return 'PaymentRequest' in window && chromeVersion != null &&\n      Number(chromeVersion[1]) >= 68 &&\n      window.navigator.vendor == 'Google Inc.';\n}\n\n/**\n * @return {boolean} true if this version of Chrome supports PaymentRequest.\n */\nfunction chromeSupportsPaymentRequest() {\n  // Opera uses chrome as rendering engine and sends almost the exact same\n  // user agent as chrome thereby fooling us on android.\n  const isOpera = window.navigator.userAgent.indexOf('OPR/') != -1;\n  if (isOpera) {\n    return false;\n  }\n  if (chromeSupportsPaymentHandler()) {\n    return true;\n  }\n\n  const androidPlatform = window.navigator.userAgent.match(/Android/i);\n  const chromeVersion = window.navigator.userAgent.match(/Chrome\\/([0-9]+)\\./i);\n  return androidPlatform != null && 'PaymentRequest' in window &&\n      // Make sure skipping PaymentRequest UI when only one PaymentMethod is\n      // supported (starts on Google Chrome 59).\n      window.navigator.vendor == 'Google Inc.' && chromeVersion != null &&\n      Number(chromeVersion[1]) >= 59;\n}\n\n/**\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n *\n * @return {boolean} true if the merchant only supports tokenized cards.\n */\nfunction doesMerchantSupportOnlyTokenizedCards(isReadyToPayRequest) {\n  if (isReadyToPayRequest.apiVersion >= 2) {\n    const allowedAuthMethods =\n        extractAllowedAuthMethodsForCards_(isReadyToPayRequest);\n    if (allowedAuthMethods && allowedAuthMethods.length == 1 &&\n        allowedAuthMethods[0] == Constants.AuthMethod.CRYPTOGRAM_3DS) {\n      return true;\n    }\n  }\n  return isReadyToPayRequest.allowedPaymentMethods.length == 1 &&\n      isReadyToPayRequest.allowedPaymentMethods[0] ==\n      Constants.PaymentMethod.TOKENIZED_CARD;\n}\n\n/**\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @param {Constants.AuthMethod} apiV2AuthMethod\n *\n * @return {boolean} true if the merchant supports pan cards.\n */\nfunction apiV2DoesMerchantSupportSpecifiedCardType(\n    isReadyToPayRequest, apiV2AuthMethod) {\n  if (isReadyToPayRequest.apiVersion >= 2) {\n    const allowedAuthMethods =\n        extractAllowedAuthMethodsForCards_(isReadyToPayRequest);\n    if (allowedAuthMethods && allowedAuthMethods.includes(apiV2AuthMethod)) {\n      return true;\n    }\n    return false;\n  }\n  return false;\n}\n\n/**\n * Validate if is secure context. Returns null if context is secure, otherwise\n * return error message.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\n *\n * @return {?string} null if current context is secure, otherwise return error\n * message.\n */\nfunction validateSecureContext() {\n  if (window.location.hostname.endsWith(Constants.TRUSTED_DOMAIN)) {\n    // This is for local development.\n    return null;\n  }\n  if (window.isSecureContext === undefined) {\n    // Browser not support isSecureContext, figure out a way to validate this\n    // for the unsupported browser.\n    return null;\n  }\n  return window.isSecureContext ?\n      null :\n      'Google Pay APIs should be called in secure context!';\n}\n\n/**\n * Validate PaymentOptions.\n *\n * @param {!PaymentOptions} paymentOptions\n */\nfunction validatePaymentOptions(paymentOptions) {\n  if (paymentOptions.environment &&\n      !Object.values(Constants.Environment)\n           .includes(paymentOptions.environment)) {\n    throw new Error(\n        'Parameter environment in PaymentOptions can optionally be set to ' +\n        'PRODUCTION, otherwise it defaults to TEST.');\n  }\n}\n\n/**\n * Validate IsReadyToPayRequest.\n *\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @return {?string} errorMessage if the request is invalid.\n */\nfunction validateIsReadyToPayRequest(isReadyToPayRequest) {\n  if (!isReadyToPayRequest) {\n    return 'isReadyToPayRequest must be set!';\n  } else if (isReadyToPayRequest.apiVersion >= 2) {\n    if (!('apiVersionMinor' in isReadyToPayRequest)) {\n      return 'apiVersionMinor must be set!';\n    }\n    if (!isReadyToPayRequest.allowedPaymentMethods ||\n        !Array.isArray(isReadyToPayRequest.allowedPaymentMethods) ||\n        isReadyToPayRequest.allowedPaymentMethods.length == 0) {\n      return 'for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods';\n    }\n    for (var i = 0; i < isReadyToPayRequest.allowedPaymentMethods.length; i++) {\n      let allowedPaymentMethod = isReadyToPayRequest.allowedPaymentMethods[i];\n      if (allowedPaymentMethod['type'] == Constants.PaymentMethod.CARD) {\n        if (!allowedPaymentMethod['parameters']) {\n          return 'Field parameters must be setup in each allowedPaymentMethod';\n        }\n        var allowedCardNetworks =\n            allowedPaymentMethod['parameters']['allowedCardNetworks'];\n        if (!allowedCardNetworks || !Array.isArray(allowedCardNetworks) ||\n            allowedCardNetworks.length == 0) {\n          return 'allowedCardNetworks must be setup in parameters for type CARD';\n        }\n        var allowedAuthMethods =\n            allowedPaymentMethod['parameters']['allowedAuthMethods'];\n        if (!allowedAuthMethods || !Array.isArray(allowedAuthMethods) ||\n            allowedAuthMethods.length == 0 ||\n            !allowedAuthMethods.every(isAuthMethodValid)) {\n          return 'allowedAuthMethods must be setup in parameters for type \\'CARD\\' ' +\n              ' and must contain \\'CRYPTOGRAM_3DS\\' and/or \\'PAN_ONLY\\'';\n        }\n      }\n    }\n    return null;\n  } else if (\n      !isReadyToPayRequest.allowedPaymentMethods ||\n      !Array.isArray(isReadyToPayRequest.allowedPaymentMethods) ||\n      isReadyToPayRequest.allowedPaymentMethods.length == 0 ||\n      !isReadyToPayRequest.allowedPaymentMethods.every(isPaymentMethodValid)) {\n    return 'allowedPaymentMethods must be set to an array containing \\'CARD\\' ' +\n        'and/or \\'TOKENIZED_CARD\\'!';\n  }\n  return null;\n}\n\n/**\n * Validate the payment method.\n *\n * @param {string} paymentMethod\n * @return {boolean} if the current payment method is valid.\n */\nfunction isPaymentMethodValid(paymentMethod) {\n  return Object.values(Constants.PaymentMethod).includes(paymentMethod);\n}\n\n/**\n * Validate the auth method.\n *\n * @param {string} authMethod\n * @return {boolean} if the current auth method is valid.\n */\nfunction isAuthMethodValid(authMethod) {\n  return Object.values(Constants.AuthMethod).includes(authMethod);\n}\n\n/**\n * Validate PaymentDataRequest.\n *\n * @param {!PaymentDataRequest} paymentDataRequest\n * @return {?string} errorMessage if the request is invalid.\n */\nfunction validatePaymentDataRequest(paymentDataRequest) {\n  if (!paymentDataRequest) {\n    return 'paymentDataRequest must be set!';\n  }\n  if (paymentDataRequest.swg) {\n    return validatePaymentDataRequestForSwg(paymentDataRequest.swg);\n  } else if (!paymentDataRequest.transactionInfo) {\n    return 'transactionInfo must be set!';\n  } else if (!paymentDataRequest.transactionInfo.currencyCode) {\n    return 'currencyCode in transactionInfo must be set!';\n  } else if (\n      !paymentDataRequest.transactionInfo.totalPriceStatus ||\n      !Object.values(Constants.TotalPriceStatus)\n           .includes(paymentDataRequest.transactionInfo.totalPriceStatus)) {\n    return 'totalPriceStatus in transactionInfo must be set to one of' +\n        ' NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!';\n  } else if (\n      paymentDataRequest.transactionInfo.totalPriceStatus !==\n          'NOT_CURRENTLY_KNOWN' &&\n      !paymentDataRequest.transactionInfo.totalPrice) {\n    return 'totalPrice in transactionInfo must be set when' +\n        ' totalPriceStatus is ESTIMATED or FINAL!';\n  }\n\n  // Validate payment data request for UPI payment method\n  const allowedPaymentMethod = getUpiPaymentMethod(paymentDataRequest);\n  if (allowedPaymentMethod) {\n    if (!allowedPaymentMethod['parameters']) {\n      return 'parameters must be set in allowedPaymentMethod!';\n    }\n\n    var parameters = allowedPaymentMethod['parameters'];\n    if (!parameters['payeeVpa']) {\n      return 'payeeVpa in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['payeeName']) {\n      return 'payeeName in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['referenceUrl']) {\n      return 'referenceUrl in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['mcc']) {\n      return 'mcc in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['transactionReferenceId']) {\n      return 'transactionReferenceId in allowedPaymentMethod parameters' +\n          ' must be set!';\n    }\n\n    if (paymentDataRequest['transactionInfo']['currencyCode'] !== 'INR') {\n      return 'currencyCode in transactionInfo must be set to INR!';\n    } else if (\n        paymentDataRequest['transactionInfo']['totalPriceStatus'] !== 'FINAL') {\n      return 'totalPriceStatus in transactionInfo must be set to FINAL!';\n    } else if (!paymentDataRequest['transactionInfo']['transactionNote']) {\n      return 'transactionNote in transactionInfo must be set!';\n    }\n  }\n  return null;\n}\n\n/**\n * Returns upi payment method object if it exists in allowed payment methods\n * or null if it doesn't\n *\n * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n * @return {?Object}\n */\nfunction getUpiPaymentMethod(request) {\n  if (!chromeSupportsPaymentRequest() || request.apiVersion < 2 ||\n      !request.allowedPaymentMethods) {\n    return null;\n  }\n  return getAllowedPaymentMethodForType_(request, Constants.PaymentMethod.UPI);\n}\n\n/**\n * Validate parameters for swg.\n *\n * @param {?SwgParameters} swgParameters\n * @return {?string} errorMessage if the request is invalid.\n */\nfunction validatePaymentDataRequestForSwg(swgParameters) {\n  if (!swgParameters) {\n    return 'Swg parameters must be provided';\n  }\n  if (!swgParameters.skuId || !swgParameters.publicationId) {\n    return 'Both skuId and publicationId must be provided';\n  }\n  return null;\n}\n\n/**\n * Returns the allowedAuthMethods for a card from the request.\n *\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @return {?Array<string>}\n * @private\n */\nfunction extractAllowedAuthMethodsForCards_(isReadyToPayRequest) {\n  if (isReadyToPayRequest.allowedPaymentMethods) {\n    const allowedPaymentMethod = getAllowedPaymentMethodForType_(\n        isReadyToPayRequest, Constants.PaymentMethod.CARD);\n    if (allowedPaymentMethod && allowedPaymentMethod.parameters) {\n      return allowedPaymentMethod.parameters['allowedAuthMethods'];\n    }\n  }\n  return null;\n}\n\n/**\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @param {string} paymentMethodType\n * @return {?PaymentMethod} Return first payment method for the given type,\n *     return null if not found.\n * @private\n */\nfunction getAllowedPaymentMethodForType_(\n    isReadyToPayRequest, paymentMethodType) {\n  for (var i = 0; i < isReadyToPayRequest.allowedPaymentMethods.length; i++) {\n    const allowedPaymentMethod = isReadyToPayRequest.allowedPaymentMethods[i];\n    if (allowedPaymentMethod.type == paymentMethodType) {\n      return allowedPaymentMethod;\n    }\n  }\n  return null;\n}\n\nexport {\n  apiV2DoesMerchantSupportSpecifiedCardType,\n  chromeSupportsPaymentHandler,\n  chromeSupportsPaymentRequest,\n  doesMerchantSupportOnlyTokenizedCards,\n  getUpiPaymentMethod,\n  isPaymentMethodValid,\n  validateIsReadyToPayRequest,\n  validatePaymentOptions,\n  validatePaymentDataRequest,\n  validateSecureContext\n};\n","/** @license\nMath.uuid.js (v1.4)\nhttp://www.broofa.com\nmailto:robert@broofa.com\nCopyright (c) 2010 Robert Kieffer\nDual licensed under the MIT and GPL licenses.\n*/\n\n/*\n * Generate a random uuid.\n *\n * USAGE: Math.uuid(length, radix)\n *   length - the desired number of characters\n *   radix  - the number of allowable values for each character.\n *\n * EXAMPLES:\n *   // No arguments  - returns RFC4122, version 4 ID\n *   >>> Math.uuid()\n *   \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\n *\n *   // One argument - returns ID of the specified length\n *   >>> Math.uuid(15)     // 15 character ID (default base=62)\n *   \"VcydxgltxrVZSTV\"\n *\n *   // Two arguments - returns ID of the specified length, and radix. (Radix must be <= 62)\n *   >>> Math.uuid(8, 2)  // 8 character ID (base=2)\n *   \"01001010\"\n *   >>> Math.uuid(8, 10) // 8 character ID (base=10)\n *   \"47473046\"\n *   >>> Math.uuid(8, 16) // 8 character ID (base=16)\n *   \"098F4D35\"\n */\n\nexport default class Random_uuid {};\n  // Private array of chars to use\n  var CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n\n  Random_uuid.uuid = function (len, radix) {\n    var chars = CHARS, uuid = [], i;\n    radix = radix || chars.length;\n\n    if (len) {\n      // Compact form\n      for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random()*radix];\n    } else {\n      // rfc4122, version 4 form\n      var r;\n\n      // rfc4122 requires these characters\n      uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n      uuid[14] = '4';\n\n      // Fill in random data.  At i==19 set the high bits of clock sequence as\n      // per rfc4122, sec. 4.1.5\n      for (i = 0; i < 36; i++) {\n        if (!uuid[i]) {\n          r = 0 | Math.random()*16;\n          uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\n        }\n      }\n    }\n\n    return uuid.join('');\n  };\n\n  // A more performant, but slightly bulkier, RFC4122v4 solution.  We boost performance\n  // by minimizing calls to random()\n  Random_uuid.uuidFast = function() {\n    var chars = CHARS, uuid = new Array(36), rnd=0, r;\n    for (var i = 0; i < 36; i++) {\n      if (i==8 || i==13 ||  i==18 || i==23) {\n        uuid[i] = '-';\n      } else if (i==14) {\n        uuid[i] = '4';\n      } else {\n        if (rnd <= 0x02) rnd = 0x2000000 + (Math.random()*0x1000000)|0;\n        r = rnd & 0xf;\n        rnd = rnd >> 4;\n        uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\n      }\n    }\n    return uuid.join('');\n  };\n\n  // A more compact, but less performant, RFC4122v4 solution:\n  Random_uuid.uuidCompact = function() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  };\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvYnVpbGQvY3NzL2NvbXBvbmVudHMvZGlhbG9nLmNzcy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9idWlsZC9jc3MvdWkvdWkuY3NzLmpzIiwibm9kZV9tb2R1bGVzL3Byb21pc2UtcGpzL3Byb21pc2UuanMiLCJub2RlX21vZHVsZXMvd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9hcGkvZW50aXRsZW1lbnRzLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9hcGkvbG9nZ2VyLWFwaS5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvYXBpL29mZmVyLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9hcGkvcHJvcGVuc2l0eS1hcGkuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL2FwaS9zdWJzY3JpcHRpb25zLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9hcGkvdXNlci1kYXRhLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9jb21wb25lbnRzL2FjdGl2aXRpZXMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL2NvbXBvbmVudHMvZGlhbG9nLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9jb21wb25lbnRzL2ZyaWVuZGx5LWlmcmFtZS5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvY29tcG9uZW50cy9ncmF5cGFuZS5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvY29tcG9uZW50cy92aWV3LmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9tYWluLWJhYmVsLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9tYWluLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9tb2RlbC9kb2MuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL21vZGVsL3BhZ2UtY29uZmlnLXJlc29sdmVyLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9tb2RlbC9wYWdlLWNvbmZpZy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcG9seWZpbGxzLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9wb2x5ZmlsbHMvYXJyYXktaW5jbHVkZXMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3BvbHlmaWxscy9kb2N1bWVudC1jb250YWlucy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcG9seWZpbGxzL2RvbXRva2VubGlzdC10b2dnbGUuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3BvbHlmaWxscy9tYXRoLXNpZ24uanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3BvbHlmaWxscy9vYmplY3QtYXNzaWduLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9wb2x5ZmlsbHMvb2JqZWN0LXZhbHVlcy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcG9seWZpbGxzL3Byb21pc2UuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3Byb3RvL2FwaV9tZXNzYWdlcy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9hbmFseXRpY3Mtc2VydmljZS5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9idXR0b24tYXBpLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL2NhbGxiYWNrcy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9jbGllbnQtZXZlbnQtbWFuYWdlci5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9jb250cmlidXRpb25zLWZsb3cuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvZGVmZXJyZWQtYWNjb3VudC1mbG93LmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL2RlcHMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvZW50aXRsZW1lbnRzLW1hbmFnZXIuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvZXZlbnQtdHlwZS1tYXBwaW5nLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL2V4cGVyaW1lbnQtZmxhZ3MuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvZXhwZXJpbWVudHMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvZmV0Y2hlci5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9qc2Vycm9yLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL2xpbmstYWNjb3VudHMtZmxvdy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9sb2dnZXIuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvbG9naW4tbm90aWZpY2F0aW9uLWFwaS5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9sb2dpbi1wcm9tcHQtYXBpLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL29mZmVycy1hcGkuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvb2ZmZXJzLWZsb3cuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvcGF5LWNsaWVudC5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9wYXktZmxvdy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9wcm9wZW5zaXR5LXNlcnZlci5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9wcm9wZW5zaXR5LmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL3J1bnRpbWUuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvc2VydmljZXMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3J1bnRpbWUvc21hcnQtYnV0dG9uLWFwaS5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvcnVudGltZS9zdG9yYWdlLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy9ydW50aW1lL3dhaXQtZm9yLXN1YnNjcmlwdGlvbi1sb29rdXAtYXBpLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91aS9hY3Rpdml0eS1pZnJhbWUtdmlldy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdWkvbG9hZGluZy12aWV3LmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91aS90b2FzdC5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvYWN0aXZpdHktdXRpbHMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3V0aWxzL2FuaW1hdGlvbi5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvYnl0ZXMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3V0aWxzL2RvY3VtZW50LXJlYWR5LmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91dGlscy9kb20uanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3V0aWxzL2Vycm9ycy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvaTE4bi5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvanNvbi5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvand0LmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91dGlscy9sb2cuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3V0aWxzL29iamVjdC5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvcHJlY29ubmVjdC5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvcmFuZG9tLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91dGlscy9zdHJpbmcuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvc3JjL3V0aWxzL3N0eWxlLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91dGlscy90eXBlcy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy9zcmMvdXRpbHMvdXJsLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3NyYy91dGlscy94aHIuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvdGhpcmRfcGFydHkvYmFiZWwvY3VzdG9tLWJhYmVsLWhlbHBlcnMuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvdGhpcmRfcGFydHkvZ3BheS9zcmMvY29uc3RhbnRzLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3RoaXJkX3BhcnR5L2dwYXkvc3JjL2VsZW1lbnRfaW5qZWN0b3IuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvdGhpcmRfcGFydHkvZ3BheS9zcmMvZ3JheXBhbmUuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvdGhpcmRfcGFydHkvZ3BheS9zcmMvcGF5X2ZyYW1lX2hlbHBlci5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy90aGlyZF9wYXJ0eS9ncGF5L3NyYy9wYXlqc19hc3luYy5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy90aGlyZF9wYXJ0eS9ncGF5L3NyYy9wYXltZW50c19jbGllbnRfZGVsZWdhdGVfaW50ZXJmYWNlLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3RoaXJkX3BhcnR5L2dwYXkvc3JjL3BheW1lbnRzX3JlcXVlc3RfZGVsZWdhdGUuanMiLCIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL3lkdWFuL1N3Ry9zd2ctanMvdGhpcmRfcGFydHkvZ3BheS9zcmMvcGF5bWVudHNfd2ViX2FjdGl2aXR5X2RlbGVnYXRlLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3RoaXJkX3BhcnR5L2dwYXkvc3JjL3Bvc3RfbWVzc2FnZV9zZXJ2aWNlLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3RoaXJkX3BhcnR5L2dwYXkvc3JjL3VwaV9oYW5kbGVyLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3RoaXJkX3BhcnR5L2dwYXkvc3JjL3V0aWxzLmpzIiwiL3Vzci9sb2NhbC9nb29nbGUvaG9tZS95ZHVhbi9Td0cvc3dnLWpzL3RoaXJkX3BhcnR5L2dwYXkvc3JjL3ZhbGlkYXRvci5qcyIsIi91c3IvbG9jYWwvZ29vZ2xlL2hvbWUveWR1YW4vU3dHL3N3Zy1qcy90aGlyZF9wYXJ0eS9ncGF5L3RoaXJkX3BhcnR5L3JhbmRvbV91dWlkL1JhbmRvbS51dWlkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FPLElBQU0sR0FBRyxHQUFHLHc0QkFBdzRCLENBQUM7Ozs7O0FDQXI1QixJQUFNLEdBQUcsR0FBRyxnM0NBQWczQyxDQUFDOzs7O0FDQXA0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbmdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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LENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0tBQ2YsTUFBTTtBQUNMLFVBQUksR0FBRyxJQUFJLElBQUksRUFBRSxHQUFHLEdBQUcsU0FBUyxHQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBQyxTQUFTLEFBQUMsR0FBQyxDQUFDLENBQUM7QUFDL0QsT0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDZCxTQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUNmLFVBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQUFBQyxDQUFDLElBQUksRUFBRSxHQUFJLEFBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDbEQ7R0FDRjtBQUNELFNBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUN0QixDQUFDOzs7QUFHRixXQUFXLENBQUMsV0FBVyxHQUFHLFlBQVc7QUFDbkMsU0FBTyxzQ0FBc0MsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFVBQVMsQ0FBQyxFQUFFO0FBQ3pFLFFBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBQyxFQUFFLEdBQUMsQ0FBQztRQUFFLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsR0FBSSxDQUFDLEdBQUMsR0FBRyxHQUFDLEdBQUcsQUFBQyxDQUFDO0FBQzNELFdBQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztHQUN2QixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGNvbnN0IENTUyA9IFwiLnN3Zy1kaWFsb2csLnN3Zy10b2FzdHtib3gtc2l6aW5nOmJvcmRlci1ib3g7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudH0uc3dnLXRvYXN0e3Bvc2l0aW9uOmZpeGVkIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7bWF4LWhlaWdodDo0NnB4IWltcG9ydGFudDt6LWluZGV4OjIxNDc0ODM2NDchaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudH1AbWVkaWEgKG1heC1oZWlnaHQ6NjQwcHgpLCAobWF4LXdpZHRoOjY0MHB4KXsuc3dnLWRpYWxvZywuc3dnLXRvYXN0e3dpZHRoOjQ4MHB4IWltcG9ydGFudDtsZWZ0Oi0yNDBweCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6NTB2dyFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czo4cHghaW1wb3J0YW50O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDFweCAxcHggcmdiYSg2MCw2NCw2NywuMyksMCAxcHggNHB4IDFweCByZ2JhKDYwLDY0LDY3LC4xNSkhaW1wb3J0YW50fX1AbWVkaWEgKG1pbi13aWR0aDo2NDBweCkgYW5kIChtaW4taGVpZ2h0OjY0MHB4KXsuc3dnLWRpYWxvZ3t3aWR0aDo2MzBweCFpbXBvcnRhbnQ7bGVmdDotMzE1cHghaW1wb3J0YW50O21hcmdpbi1sZWZ0OjUwdnchaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudH0uc3dnLXRvYXN0e2xlZnQ6MCFpbXBvcnRhbnR9fUBtZWRpYSAobWF4LXdpZHRoOjQ4MHB4KXsuc3dnLWRpYWxvZywuc3dnLXRvYXN0e3dpZHRoOjEwMCUhaW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MCFpbXBvcnRhbnR9fVxcbi8qIyBzb3VyY2VVUkw9Ly4vc3JjL2NvbXBvbmVudHMvZGlhbG9nLmNzcyovXCI7IiwiZXhwb3J0IGNvbnN0IENTUyA9IFwiYm9keXtwYWRkaW5nOjA7bWFyZ2luOjB9c3dnLWNvbnRhaW5lcixzd2ctbG9hZGluZyxzd2ctbG9hZGluZy1hbmltYXRlLHN3Zy1sb2FkaW5nLWltYWdle2Rpc3BsYXk6YmxvY2t9c3dnLWxvYWRpbmctY29udGFpbmVye3dpZHRoOjEwMCUhaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7LW1zLWZsZXgtYWxpZ246Y2VudGVyIWltcG9ydGFudDthbGlnbi1pdGVtczpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LXBhY2s6Y2VudGVyIWltcG9ydGFudDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudDttaW4taGVpZ2h0OjE0OHB4IWltcG9ydGFudDtoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7Ym90dG9tOjAhaW1wb3J0YW50O21hcmdpbi10b3A6NXB4IWltcG9ydGFudDt6LWluZGV4OjIxNDc0ODM2NDchaW1wb3J0YW50fUBtZWRpYSAobWluLWhlaWdodDo2MzBweCksIChtaW4td2lkdGg6NjMwcHgpe3N3Zy1sb2FkaW5nLWNvbnRhaW5lcnt3aWR0aDo1NjBweCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MzVweCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czo4cHghaW1wb3J0YW50O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDtib3gtc2hhZG93OjAgMXB4IDFweCByZ2JhKDYwLDY0LDY3LC4zKSwwIDFweCA0cHggMXB4IHJnYmEoNjAsNjQsNjcsLjE1KSFpbXBvcnRhbnR9fXN3Zy1sb2FkaW5ne3otaW5kZXg6MjE0NzQ4MzY0NyFpbXBvcnRhbnQ7d2lkdGg6MzZweDtoZWlnaHQ6MzZweDtvdmVyZmxvdzpoaWRkZW47YW5pbWF0aW9uOm1zcGluLXJvdGF0ZSAxNTY4LjYzbXMgbGluZWFyIGluZmluaXRlfXN3Zy1sb2FkaW5nLWFuaW1hdGV7YW5pbWF0aW9uOm1zcGluLXJldnJvdCA1MzMybXMgc3RlcHMoNCkgaW5maW5pdGV9c3dnLWxvYWRpbmctaW1hZ2V7YmFja2dyb3VuZC1pbWFnZTp1cmwoJGFzc2V0cyQvbG9hZGVyLnN2Zyk7YmFja2dyb3VuZC1zaXplOjEwMCU7d2lkdGg6MTE2NjRweDtoZWlnaHQ6MzZweDthbmltYXRpb246c3dnLWxvYWRpbmctZmlsbSA1MzMybXMgc3RlcHMoMzI0KSBpbmZpbml0ZX1Aa2V5ZnJhbWVzIHN3Zy1sb2FkaW5nLWZpbG17MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCl9dG97dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTExNjY0cHgpfX1Aa2V5ZnJhbWVzIG1zcGluLXJvdGF0ZXswJXt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfXRve3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pfX1Aa2V5ZnJhbWVzIG1zcGluLXJldnJvdHswJXt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfXRve3RyYW5zZm9ybTpyb3RhdGUoLTF0dXJuKX19XFxuLyojIHNvdXJjZVVSTD0vLi9zcmMvdWkvdWkuY3NzKi9cIjsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIEVTNi9Qcm9taXNlcyBBKyBQcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbigqPSksIGZ1bmN0aW9uICgqPSkpfSByZXNvbHZlclxuICovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnN0cnVjdG9yIFByb21pc2UgcmVxdWlyZXMgYG5ld2AnKTtcbiAgfVxuICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwYXNzIHJlc29sdmVyIGZ1bmN0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX3N0YXRlID0gUGVuZGluZ1Byb21pc2U7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fdmFsdWUgPSBbXTtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9pc0NoYWluRW5kID0gdHJ1ZTtcblxuICBkb1Jlc29sdmUoXG4gICAgdGhpcyxcbiAgICBhZG9wdGVyKHRoaXMsIEZ1bGZpbGxlZFByb21pc2UpLFxuICAgIGFkb3B0ZXIodGhpcywgUmVqZWN0ZWRQcm9taXNlKSxcbiAgICB7IHRoZW46IHJlc29sdmVyIH1cbiAgKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHVibGljIEluc3RhbmNlIE1ldGhvZHNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcHJvbWlzZSBpbnN0YW5jZSB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IG9mIHRoaXMgcHJvbWlzZVxuICogYXMgaW5wdXRzIHRvIHRoZSBvbkZ1bGZpbGxlZCBvciBvblJlamVjdGVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvbkZ1bGZpbGxlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25SZWplY3RlZFxuICovXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgb25GdWxmaWxsZWQgPSBpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKSA/IG9uRnVsZmlsbGVkIDogdm9pZCAwO1xuICBvblJlamVjdGVkID0gaXNGdW5jdGlvbihvblJlamVjdGVkKSA/IG9uUmVqZWN0ZWQgOiB2b2lkIDA7XG5cbiAgaWYgKG9uRnVsZmlsbGVkIHx8IG9uUmVqZWN0ZWQpIHtcbiAgICB0aGlzLl9pc0NoYWluRW5kID0gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdGhpcy5fc3RhdGUoXG4gICAgdGhpcy5fdmFsdWUsXG4gICAgb25GdWxmaWxsZWQsXG4gICAgb25SZWplY3RlZFxuICApO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHByb21pc2UgdGhhdCB3aWxsIGhhbmRsZSB0aGUgcmVqZWN0ZWQgc3RhdGUgb2YgdGhpcyBwcm9taXNlLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uUmVqZWN0ZWRcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbihvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCBvblJlamVjdGVkKTtcbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFB1YmxpYyBTdGF0aWMgTWV0aG9kc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGZpbGxlZCBQcm9taXNlIG9mIHZhbHVlLiBJZiB2YWx1ZSBpcyBpdHNlbGYgYSB0aGVuLWFibGUsXG4gKiByZXNvbHZlcyB3aXRoIHRoZSB0aGVuLWFibGUncyB2YWx1ZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZTtcblxuICBpZiAoaXNPYmplY3QodmFsdWUpICYmIHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHByb21pc2UgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBvZiByZWFzb24uXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHsqPX0gcmVhc29uXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKF8sIHJlamVjdCkge1xuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdpdGggYW4gYXJyYXkgb2YgdGhlIHZhbHVlcyBvZiB0aGVcbiAqIHBhc3NlZCBpbiBwcm9taXNlcy4gSWYgYW55IHByb21pc2UgcmVqZWN0cywgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbFxuICogcmVqZWN0LlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7IUFycmF5PFByb21pc2V8Kj59IHByb21pc2VzXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UuYWxsID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGVhY2gocHJvbWlzZXMsIGZ1bmN0aW9uKHByb21pc2UsIGluZGV4KSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAoLS1sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlamVjdCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IGJhc2VkIG9uIHRoZSBmaXJzdFxuICogcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyFBcnJheTxQcm9taXNlfCo+fSBwcm9taXNlc1xuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbihwcm9taXNlcykge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG52YXIgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uKHJlYXNvbiwgcHJvbWlzZSkge1xuICB0aHJvdyByZWFzb247XG59O1xuXG4vKipcbiAqIEFuIGludGVybmFsIHVzZSBzdGF0aWMgZnVuY3Rpb24uXG4gKi9cblByb21pc2UuX292ZXJyaWRlVW5oYW5kbGVkRXhjZXB0aW9uSGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGhhbmRsZXI7XG59O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQcml2YXRlIGZ1bmN0aW9uc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogVGhlIEZ1bGZpbGxlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvbkZ1bGZpbGxlZCB3aXRoIHRoZSByZXNvbHZlZCB2YWx1ZSBvZlxuICogdGhpcyBwcm9taXNlLCBjcmVhdGluZyBhIG5ldyBwcm9taXNlLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG8gYXZvaWQgYW4gcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgRnVsZmlsbGVkIHN0YXRlIGZyb20gdGhlXG4gKiAgICAgUGVuZGluZyBzdGF0ZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gRnVsZmlsbGVkUHJvbWlzZSh2YWx1ZSwgb25GdWxmaWxsZWQsIHVudXNlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvbkZ1bGZpbGxlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIEZ1bGZpbGxlZFByb21pc2UsIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25GdWxmaWxsZWQsIHZhbHVlKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBSZWplY3RlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvblJlamVjdGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvIGF2b2lkIGFuIHByb21pc2VcbiAqIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcmVhc29uIFRoZSBjdXJyZW50IHByb21pc2UncyByZWplY3Rpb24gcmVhc29uLlxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSB1bnVzZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25SZWplY3RlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgUmVqZWN0ZWQgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBSZWplY3RlZFByb21pc2UocmVhc29uLCB1bnVzZWQsIG9uUmVqZWN0ZWQsIGRlZmVycmVkKSB7XG4gIGlmICghb25SZWplY3RlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIFJlamVjdGVkUHJvbWlzZSwgcmVhc29uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25SZWplY3RlZCwgcmVhc29uKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBQZW5kaW5nIFByb21pc2Ugc3RhdGUuIEV2ZW50dWFsbHkgY2FsbHMgb25GdWxmaWxsZWQgb25jZSB0aGUgcHJvbWlzZSBoYXNcbiAqIHJlc29sdmVkLCBvciBvblJlamVjdGVkIG9uY2UgdGhlIHByb21pc2UgcmVqZWN0cy5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvbkZ1bGZpbGxlZCBhbmQgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvXG4gKiBhdm9pZCBhbiBwcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcXVldWUgVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHBlbmRpbmcgcHJvbWlzZXMgcXVldWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uUmVqZWN0ZWRcbiAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkIEEgZGVmZXJyZWQgb2JqZWN0IHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHNcbiAqICAgICByZXNvbHZlIGFuZCByZWplY3QgZnVuY3Rpb25zLiBJdCBJUyBOT1QgcGFzc2VkIHdoZW4gY2FsbGVkIGZyb21cbiAqICAgICBQcm9taXNlI3RoZW4gdG8gc2F2ZSBhbiBvYmplY3QgaW5zdGFuY2UgKHNpbmNlIHdlIG1heSByZXR1cm4gdGhlIGN1cnJlbnRcbiAqICAgICBwcm9taXNlKS4gSXQgSVMgcGFzc2VkIGluIHdoZW4gYWRvcHRpbmcgdGhlIFBlbmRpbmcgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gUGVuZGluZ1Byb21pc2UocXVldWUsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBkZWZlcnJlZCkge1xuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgaWYgKCFvbkZ1bGZpbGxlZCAmJiAhb25SZWplY3RlZCkgeyByZXR1cm4gdGhpczsgfVxuICAgIGRlZmVycmVkID0gbmV3IERlZmVycmVkKHRoaXMuY29uc3RydWN0b3IpO1xuICB9XG4gIHF1ZXVlLnB1c2goe1xuICAgIGRlZmVycmVkOiBkZWZlcnJlZCxcbiAgICBvbkZ1bGZpbGxlZDogb25GdWxmaWxsZWQgfHwgZGVmZXJyZWQucmVzb2x2ZSxcbiAgICBvblJlamVjdGVkOiBvblJlamVjdGVkIHx8IGRlZmVycmVkLnJlamVjdFxuICB9KTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIGRlZmVycmVkIGluc3RhbmNlIHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHMgcmVzb2x2ZSBhbmRcbiAqIHJlamVjdCBmdW5jdGlvbnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlZmVycmVkKFByb21pc2UpIHtcbiAgdmFyIGRlZmVycmVkID0gdGhpcztcbiAgLyoqIEB0eXBlIHshUHJvbWlzZX0gKi9cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbigqPSl9ICovXG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG5cbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKCo9KX0gKi9cbiAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xuICByZXR1cm4gZGVmZXJyZWQ7XG59XG5cbi8qKlxuICogVHJhbnNpdGlvbnMgdGhlIHN0YXRlIG9mIHByb21pc2UgdG8gYW5vdGhlciBzdGF0ZS4gVGhpcyBpcyBvbmx5IGV2ZXIgY2FsbGVkXG4gKiBvbiB3aXRoIGEgcHJvbWlzZSB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgUGVuZGluZyBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGFkb3B0KHByb21pc2UsIHN0YXRlLCB2YWx1ZSwgYWRvcHRlZSkge1xuICB2YXIgcXVldWUgPSBwcm9taXNlLl92YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBzdGF0ZTtcbiAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcblxuICBpZiAoYWRvcHRlZSAmJiBzdGF0ZSA9PT0gUGVuZGluZ1Byb21pc2UpIHtcbiAgICBhZG9wdGVlLl9zdGF0ZSh2YWx1ZSwgdm9pZCAwLCB2b2lkIDAsIHtcbiAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICByZXNvbHZlOiB2b2lkIDAsXG4gICAgICByZWplY3Q6IHZvaWQgMFxuICAgIH0pO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuZXh0ID0gcXVldWVbaV07XG4gICAgcHJvbWlzZS5fc3RhdGUoXG4gICAgICB2YWx1ZSxcbiAgICAgIG5leHQub25GdWxmaWxsZWQsXG4gICAgICBuZXh0Lm9uUmVqZWN0ZWQsXG4gICAgICBuZXh0LmRlZmVycmVkXG4gICAgKTtcbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xuXG4gIC8vIERldGVybWluZSBpZiB0aGlzIHJlamVjdGVkIHByb21pc2Ugd2lsbCBiZSBcImhhbmRsZWRcIi5cbiAgaWYgKHN0YXRlID09PSBSZWplY3RlZFByb21pc2UgJiYgcHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgICAgICBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxufVxuXG4vKipcbiAqIEEgcGFydGlhbCBhcHBsaWNhdGlvbiBvZiBhZG9wdC5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigqPSl9XG4gKi9cbmZ1bmN0aW9uIGFkb3B0ZXIocHJvbWlzZSwgc3RhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgYWRvcHQocHJvbWlzZSwgc3RhdGUsIHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgZGVmZXJyZWQgcHJvbWlzZXMgc3RhdGUuIE5lY2Vzc2FyeSBmb3IgdXBkYXRpbmcgYW4gYWRvcHRpbmdcbiAqIHByb21pc2UncyBzdGF0ZSB3aGVuIHRoZSBhZG9wdGVlIHJlc29sdmVzLlxuICpcbiAqIEBwYXJhbSB7P0RlZmVycmVkfSBkZWZlcnJlZFxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9IHN0YXRlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICovXG5mdW5jdGlvbiBkZWZlcnJlZEFkb3B0KGRlZmVycmVkLCBzdGF0ZSwgdmFsdWUpIHtcbiAgaWYgKGRlZmVycmVkKSB7XG4gICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICAgIHByb21pc2UuX3N0YXRlID0gc3RhdGU7XG4gICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgbm8tb3AgZnVuY3Rpb24gdG8gcHJldmVudCBkb3VibGUgcmVzb2x2aW5nLlxuICovXG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHsqfSBmblxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheSwgY2FsbGluZyB0aGUgaXRlcmF0b3Igd2l0aCB0aGVcbiAqIGVsZW1lbnQgYW5kIGl0cyBpbmRleC5cbiAqXG4gKiBAcGFyYW0geyFBcnJheX0gY29sbGVjdGlvblxuICogQHBhcmFtIHtmdW5jdGlvbigqPSxudW1iZXIpfSBpdGVyYXRvclxuICovXG5mdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yKGNvbGxlY3Rpb25baV0sIGkpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBhdHRlbXB0IHRvIHJlc29sdmUgdGhlIGRlZmVycmVkIHdpdGggdGhlIHJldHVyblxuICogb2YgZm4uIElmIGFueSBlcnJvciBpcyByYWlzZWQsIHJlamVjdHMgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0geyFEZWZlcnJlZH0gZGVmZXJyZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSBmblxuICogQHBhcmFtIHsqfSBhcmdcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfVxuICovXG5mdW5jdGlvbiB0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBmbiwgYXJnKSB7XG4gIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgdmFyIHJlc29sdmUgPSBkZWZlcnJlZC5yZXNvbHZlO1xuICB2YXIgcmVqZWN0ID0gZGVmZXJyZWQucmVqZWN0O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByZXN1bHQgPSBmbihhcmcpO1xuICAgICAgZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgcmVzdWx0LCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUXVldWVzIGFuZCBleGVjdXRlcyBtdWx0aXBsZSBkZWZlcnJlZCBmdW5jdGlvbnMgb24gYW5vdGhlciBydW4gbG9vcC5cbiAqL1xudmFyIGRlZmVyID0gKGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogRGVmZXJzIGZuIHRvIGFub3RoZXIgcnVuIGxvb3AuXG4gICAqL1xuICB2YXIgc2NoZWR1bGVGbHVzaDtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wb3N0TWVzc2FnZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZmx1c2gpO1xuICAgIHNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgnbWFjcm8tdGFzaycsICcqJyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBzY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIHF1ZXVlID0gbmV3IEFycmF5KDE2KTtcbiAgdmFyIGxlbmd0aCA9IDA7XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZuID0gcXVldWVbaV07XG4gICAgICBxdWV1ZVtpXSA9IG51bGw7XG4gICAgICBmbigpO1xuICAgIH1cbiAgICBsZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm5cbiAgICovXG4gIGZ1bmN0aW9uIGRlZmVyKGZuKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gMCkgeyBzY2hlZHVsZUZsdXNoKCk7IH1cbiAgICBxdWV1ZVtsZW5ndGgrK10gPSBmbjtcbiAgfVxuXG4gIHJldHVybiBkZWZlcjtcbn0pKCk7XG5cbi8qKlxuICogVGhlIFByb21pc2UgcmVzb2x1dGlvbiBwcm9jZWR1cmUuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSByZXNvbHZlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KX0gcmVqZWN0XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0geyo9fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHZhbHVlLCBjb250ZXh0KSB7XG4gIHZhciBfcmVqZWN0ID0gcmVqZWN0O1xuICB2YXIgdGhlbjtcbiAgdmFyIF9yZXNvbHZlO1xuICB0cnkge1xuICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGZ1bGZpbGwgcHJvbWlzZSB3aXRoIGl0c2VsZicpO1xuICAgIH1cbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgaWYgKGlzT2JqICYmIHZhbHVlIGluc3RhbmNlb2YgcHJvbWlzZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgYWRvcHQocHJvbWlzZSwgdmFsdWUuX3N0YXRlLCB2YWx1ZS5fdmFsdWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqICYmICh0aGVuID0gdmFsdWUudGhlbikgJiYgaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZSA9IF9yZWplY3QgPSBub29wO1xuICAgICAgICBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCB2YWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIF9yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgX3Jlc29sdmUgPSBfcmVqZWN0ID0gbm9vcDtcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9O1xuICAgICAgdGhlbi5jYWxsKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBmdW5jdGlvbih2YWx1ZSkgeyBfcmVzb2x2ZSh2YWx1ZSk7IH0sXG4gICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyBfcmVqZWN0KHJlYXNvbik7IH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QoZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgVGhlIFdlYiBBY3Rpdml0aWVzIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuIC8qKiBWZXJzaW9uOiAxLjI0ICovXG4ndXNlIHN0cmljdCc7XG5cbi8qZXNsaW50IG5vLXVudXNlZC12YXJzOiAwKi9cblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmNvbnN0IEFjdGl2aXR5TW9kZSA9IHtcbiAgSUZSQU1FOiAnaWZyYW1lJyxcbiAgUE9QVVA6ICdwb3B1cCcsXG4gIFJFRElSRUNUOiAncmVkaXJlY3QnLFxufTtcblxuXG4vKipcbiAqIFRoZSByZXN1bHQgY29kZSB1c2VkIGZvciBgQWN0aXZpdHlSZXN1bHRgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgQWN0aXZpdHlSZXN1bHRDb2RlID0ge1xuICBPSzogJ29rJyxcbiAgQ0FOQ0VMRUQ6ICdjYW5jZWxlZCcsXG4gIEZBSUxFRDogJ2ZhaWxlZCcsXG59O1xuXG5cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhY3Rpdml0eS4gVGhlIGFjdGl2aXR5IGltcGxlbWVudGF0aW9uIHJldHVybnMgdGhpcyBvYmplY3RcbiAqIGZvciBhIHN1Y2Nlc3NmdWwgcmVzdWx0LCBhIGNhbmNlbGF0aW9uIG9yIGEgZmFpbHVyZS5cbiAqIEBzdHJ1Y3RcbiAqL1xuY2xhc3MgQWN0aXZpdHlSZXN1bHQge1xuICAvKipcbiAgICogQHBhcmFtIHshQWN0aXZpdHlSZXN1bHRDb2RlfSBjb2RlXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0geyFBY3Rpdml0eU1vZGV9IG1vZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpblxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9yaWdpblZlcmlmaWVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2VjdXJlQ2hhbm5lbFxuICAgKi9cbiAgY29uc3RydWN0b3IoY29kZSwgZGF0YSwgbW9kZSwgb3JpZ2luLCBvcmlnaW5WZXJpZmllZCwgc2VjdXJlQ2hhbm5lbCkge1xuICAgIC8qKiBAY29uc3QgeyFBY3Rpdml0eVJlc3VsdENvZGV9ICovXG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAvKiogQGNvbnN0IHsqfSAqL1xuICAgIHRoaXMuZGF0YSA9IGNvZGUgPT0gQWN0aXZpdHlSZXN1bHRDb2RlLk9LID8gZGF0YSA6IG51bGw7XG4gICAgLyoqIEBjb25zdCB7IUFjdGl2aXR5TW9kZX0gKi9cbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAvKiogQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMub3JpZ2luVmVyaWZpZWQgPSBvcmlnaW5WZXJpZmllZDtcbiAgICAvKiogQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuc2VjdXJlQ2hhbm5lbCA9IHNlY3VyZUNoYW5uZWw7XG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLm9rID0gY29kZSA9PSBBY3Rpdml0eVJlc3VsdENvZGUuT0s7XG4gICAgLyoqIEBjb25zdCB7P0Vycm9yfSAqL1xuICAgIHRoaXMuZXJyb3IgPSBjb2RlID09IEFjdGl2aXR5UmVzdWx0Q29kZS5GQUlMRUQgP1xuICAgICAgICBuZXcgRXJyb3IoU3RyaW5nKGRhdGEpIHx8ICcnKSA6XG4gICAgICAgIG51bGw7XG4gIH1cbn1cblxuXG4vKipcbiAqIFRoZSBhY3Rpdml0eSByZXF1ZXN0IHRoYXQgZGlmZmVyZW50IHR5cGVzIG9mIGhvc3RzIGNhbiBiZSBzdGFydGVkIHdpdGguXG4gKiBAdHlwZWRlZiB7e1xuICogICByZXF1ZXN0SWQ6IHN0cmluZyxcbiAqICAgcmV0dXJuVXJsOiBzdHJpbmcsXG4gKiAgIGFyZ3M6ID9PYmplY3QsXG4gKiAgIG9yaWdpbjogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBvcmlnaW5WZXJpZmllZDogKGJvb2xlYW58dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmxldCBBY3Rpdml0eVJlcXVlc3Q7XG5cblxuLyoqXG4gKiBUaGUgYWN0aXZpdHkgXCJvcGVuXCIgb3B0aW9ucyB1c2VkIGZvciBwb3B1cHMgYW5kIHJlZGlyZWN0cy5cbiAqXG4gKiAtIHJldHVyblVybDogb3ZlcnJpZGUgdGhlIHJldHVybiBVUkwuIEJ5IGRlZmF1bHQsIHRoZSBjdXJyZW50IFVSTCB3aWxsIGJlXG4gKiAgIHVzZWQuXG4gKiAtIHNraXBSZXF1ZXN0SW5Vcmw6IHJlbW92ZXMgdGhlIGFjdGl2aXR5IHJlcXVlc3QgZnJvbSB0aGUgVVJMLCBpbiBjYXNlXG4gKiAgIHJlZGlyZWN0IGlzIHVzZWQuIEJ5IGRlZmF1bHQsIHRoZSBhY3Rpdml0eSByZXF1ZXN0IGlzIGFwcGVuZGVkIHRvIHRoZVxuICogICBhY3Rpdml0eSBVUkwuIFRoaXMgb3B0aW9uIGNhbiBiZSB1c2VkIGlmIHRoZSBhY3Rpdml0eSByZXF1ZXN0IGlzIHBhc3NlZFxuICogICB0byB0aGUgYWN0aXZpdHkgYnkgc29tZSBhbHRlcm5hdGl2ZSBtZWFucy5cbiAqIC0gZGlzYWJsZVJlZGlyZWN0RmFsbGJhY2s6IGRpc2FsbG93cyBwb3B1cCBmYWxsYmFjayB0byByZWRpcmVjdC4gQnkgZGVmYXVsdFxuICogICB0aGUgcmVkaXJlY3QgZmFsbGJhY2sgaXMgYWxsb3dlZC4gVGhpcyBvcHRpb24gaGFzIHRvIGJlIHVzZWQgdmVyeSBjYXJlZnVsbHlcbiAqICAgYmVjYXVzZSB0aGVyZSBhcmUgbWFueSB1c2VyIGFnZW50cyB0aGF0IG1heSBmYWlsIHRvIG9wZW4gYSBwb3B1cCBhbmQgaXRcbiAqICAgd29uJ3QgYmUgYWx3YXlzIHBvc3NpYmxlIGZvciB0aGUgb3BlbmVyIHdpbmRvdyB0byBldmVuIGJlIGF3YXJlIG9mIHN1Y2hcbiAqICAgZmFpbHVyZXMuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgcmV0dXJuVXJsOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIHNraXBSZXF1ZXN0SW5Vcmw6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGRpc2FibGVSZWRpcmVjdEZhbGxiYWNrOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogICB3aWR0aDogKG51bWJlcnx1bmRlZmluZWQpLFxuICogICBoZWlnaHQ6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmxldCBBY3Rpdml0eU9wZW5PcHRpb25zO1xuXG5cbi8qKlxuICogQWN0aXZpdHkgY2xpZW50LXNpZGUgYmluZGluZy4gVGhlIHBvcnQgcHJvdmlkZXMgbGltaXRlZCB3YXlzIHRvIGNvbW11bmljYXRlXG4gKiB3aXRoIHRoZSBhY3Rpdml0eSBhbmQgcmVjZWl2ZSBzaWduYWxzIGFuZCByZXN1bHRzIGZyb20gaXQuIE5vdCBldmVyeSB0eXBlXG4gKiBvZiBhY3Rpdml0eSBleHBvc2VzIGEgcG9ydC5cbiAqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmNsYXNzIEFjdGl2aXR5UG9ydCB7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1vZGUgb2YgdGhlIGFjdGl2aXR5OiBpZnJhbWUsIHBvcHVwIG9yIHJlZGlyZWN0LlxuICAgKiBAcmV0dXJuIHshQWN0aXZpdHlNb2RlfVxuICAgKi9cbiAgZ2V0TW9kZSgpIHt9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgdGhlIHJlc3VsdCB3aGVuIHJlYWR5LiBUaGUgY2xpZW50IHNob3VsZCB2ZXJpZnkgdGhlIGFjdGl2aXR5J3NcbiAgICogbW9kZSwgb3JpZ2luLCB2ZXJpZmljYXRpb24gYW5kIHNlY3VyZSBjaGFubmVsIGZsYWdzIGJlZm9yZSBkZWNpZGluZ1xuICAgKiB3aGV0aGVyIG9yIG5vdCB0byB0cnVzdCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgeWllbGRzIHdoZW4gdGhlIGFjdGl2aXR5IGhhcyBiZWVuIGNvbXBsZXRlZCBhbmRcbiAgICogZWl0aGVyIGEgcmVzdWx0LCBhIGNhbmNlbGF0aW9uIG9yIGEgZmFpbHVyZSBoYXMgYmVlbiByZXR1cm5lZC5cbiAgICpcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5UmVzdWx0Pn1cbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHt9XG59XG5cblxuLyoqXG4gKiBBY3Rpdml0eSBjbGllbnQtc2lkZSBiaW5kaW5nIGZvciBtZXNzYWdpbmcuXG4gKlxuICogV2hldGhlciB0aGUgaG9zdCBjYW4gb3IgY2Fubm90IHJlY2VpdmUgYSBtZXNzYWdlIGRlcGVuZHMgb24gdGhlIHR5cGUgb2ZcbiAqIGhvc3QgYW5kIGl0cyBzdGF0ZS4gRW5zdXJlIHRoYXQgdGhlIGNvZGUgaGFzIGFuIGFsdGVybmF0aXZlIHBhdGggaWZcbiAqIG1lc3NhZ2luZyBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEBpbnRlcmZhY2VcbiAqL1xuY2xhc3MgQWN0aXZpdHlNZXNzYWdpbmdQb3J0IHtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdGFyZ2V0IHdpbmRvdyB3aGVyZSBob3N0IGlzIGxvYWRlZC4gTWF5IGJlIHVuYXZhaWxhYmxlLlxuICAgKiBAcmV0dXJuIHs/V2luZG93fVxuICAgKi9cbiAgZ2V0VGFyZ2V0V2luKCkge31cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBob3N0LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IHBheWxvYWRcbiAgICovXG4gIG1lc3NhZ2UocGF5bG9hZCkge31cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gcmVjZWl2ZSBtZXNzYWdlcyBmcm9tIHRoZSBob3N0LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFPYmplY3QpfSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGNvbW11bmljYXRpb24gY2hhbm5lbCBvciByZXR1cm5zIGFuIGV4aXN0aW5nIG9uZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbmFtZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhTWVzc2FnZVBvcnQ+fVxuICAgKi9cbiAgbWVzc2FnZUNoYW5uZWwob3B0X25hbWUpIHt9XG59XG5cblxuXG4vKiogRE9NRXhjZXB0aW9uLkFCT1JUX0VSUiBuYW1lICovXG5jb25zdCBBQk9SVF9FUlJfTkFNRSA9ICdBYm9ydEVycm9yJztcblxuLyoqIERPTUV4Y2VwdGlvbi5BQk9SVF9FUlIgPSAyMCAqL1xuY29uc3QgQUJPUlRfRVJSX0NPREUgPSAyMDtcblxuLyoqIEB0eXBlIHs/SFRNTEFuY2hvckVsZW1lbnR9ICovXG5sZXQgYVJlc29sdmVyO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybiB7IUhUTUxBbmNob3JFbGVtZW50fVxuICovXG5mdW5jdGlvbiBwYXJzZVVybCh1cmxTdHJpbmcpIHtcbiAgaWYgKCFhUmVzb2x2ZXIpIHtcbiAgICBhUmVzb2x2ZXIgPSAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG4gIH1cbiAgYVJlc29sdmVyLmhyZWYgPSB1cmxTdHJpbmc7XG4gIHJldHVybiAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKGFSZXNvbHZlcik7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFMb2NhdGlvbnwhVVJMfCFIVE1MQW5jaG9yRWxlbWVudH0gbG9jXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldE9yaWdpbihsb2MpIHtcbiAgaWYgKGxvYy5vcmlnaW4pIHtcbiAgICByZXR1cm4gbG9jLm9yaWdpbjtcbiAgfVxuICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgb3JpZ2luIGlzIG5vcm1hbGl6ZWQuIFNwZWNpZmljYWxseSBvbiBJRSwgaG9zdCBzb21ldGltZXNcbiAgLy8gaW5jbHVkZXMgdGhlIGRlZmF1bHQgcG9ydCwgd2hpY2ggaXMgbm90IHBlciBzdGFuZGFyZC5cbiAgY29uc3QgcHJvdG9jb2wgPSBsb2MucHJvdG9jb2w7XG4gIGxldCBob3N0ID0gbG9jLmhvc3Q7XG4gIGlmIChwcm90b2NvbCA9PSAnaHR0cHM6JyAmJiBob3N0LmluZGV4T2YoJzo0NDMnKSA9PSBob3N0Lmxlbmd0aCAtIDQpIHtcbiAgICBob3N0ID0gaG9zdC5yZXBsYWNlKCc6NDQzJywgJycpO1xuICB9IGVsc2UgaWYgKHByb3RvY29sID09ICdodHRwOicgJiYgaG9zdC5pbmRleE9mKCc6ODAnKSA9PSBob3N0Lmxlbmd0aCAtIDMpIHtcbiAgICBob3N0ID0gaG9zdC5yZXBsYWNlKCc6ODAnLCAnJyk7XG4gIH1cbiAgcmV0dXJuIHByb3RvY29sICsgJy8vJyArIGhvc3Q7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldE9yaWdpbkZyb21VcmwodXJsU3RyaW5nKSB7XG4gIHJldHVybiBnZXRPcmlnaW4ocGFyc2VVcmwodXJsU3RyaW5nKSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUZyYWdtZW50KHVybFN0cmluZykge1xuICBjb25zdCBpbmRleCA9IHVybFN0cmluZy5pbmRleE9mKCcjJyk7XG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIHJldHVybiB1cmxTdHJpbmc7XG4gIH1cbiAgcmV0dXJuIHVybFN0cmluZy5zdWJzdHJpbmcoMCwgaW5kZXgpO1xufVxuXG5cbi8qKlxuICogUGFyc2VzIGFuZCBidWlsZHMgT2JqZWN0IG9mIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeSkge1xuICBpZiAoIXF1ZXJ5KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHJldHVybiAoL15bPyNdLy50ZXN0KHF1ZXJ5KSA/IHF1ZXJ5LnNsaWNlKDEpIDogcXVlcnkpXG4gICAgICAuc3BsaXQoJyYnKVxuICAgICAgLnJlZHVjZSgocGFyYW1zLCBwYXJhbSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgICAgY29uc3Qga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMF0gfHwgJycpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzFdIHx8ICcnKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgIH0sIHt9KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZyAgQSBxdWVyeSBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgXCJhPWImYz1kXCIuIENvdWxkXG4gKiAgIGJlIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBcIj9cIiBvciBcIiNcIi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbSBUaGUgcGFyYW0gdG8gZ2V0IGZyb20gdGhlIHF1ZXJ5IHN0cmluZy5cbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW0ocXVlcnlTdHJpbmcsIHBhcmFtKSB7XG4gIHJldHVybiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKVtwYXJhbV07XG59XG5cblxuLyoqXG4gKiBBZGQgYSBxdWVyeS1saWtlIHBhcmFtZXRlciB0byB0aGUgZnJhZ21lbnQgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYWRkRnJhZ21lbnRQYXJhbSh1cmwsIHBhcmFtLCB2YWx1ZSkge1xuICByZXR1cm4gdXJsICtcbiAgICAgICh1cmwuaW5kZXhPZignIycpID09IC0xID8gJyMnIDogJyYnKSArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQocGFyYW0pICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZyAgQSBxdWVyeSBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgXCJhPWImYz1kXCIuIENvdWxkXG4gKiAgIGJlIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBcIj9cIiBvciBcIiNcIi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbSBUaGUgcGFyYW0gdG8gcmVtb3ZlIGZyb20gdGhlIHF1ZXJ5IHN0cmluZy5cbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZVF1ZXJ5UGFyYW0ocXVlcnlTdHJpbmcsIHBhcmFtKSB7XG4gIGlmICghcXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gcXVlcnlTdHJpbmc7XG4gIH1cbiAgY29uc3Qgc2VhcmNoID0gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtKSArICc9JztcbiAgbGV0IGluZGV4ID0gLTE7XG4gIGRvIHtcbiAgICBpbmRleCA9IHF1ZXJ5U3RyaW5nLmluZGV4T2Yoc2VhcmNoLCBpbmRleCk7XG4gICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICBjb25zdCBwcmV2ID0gaW5kZXggPiAwID8gcXVlcnlTdHJpbmcuc3Vic3RyaW5nKGluZGV4IC0gMSwgaW5kZXgpIDogJyc7XG4gICAgICBpZiAocHJldiA9PSAnJyB8fCBwcmV2ID09ICc/JyB8fCBwcmV2ID09ICcjJyB8fCBwcmV2ID09ICcmJykge1xuICAgICAgICBsZXQgZW5kID0gcXVlcnlTdHJpbmcuaW5kZXhPZignJicsIGluZGV4ICsgMSk7XG4gICAgICAgIGlmIChlbmQgPT0gLTEpIHtcbiAgICAgICAgICBlbmQgPSBxdWVyeVN0cmluZy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcXVlcnlTdHJpbmcgPVxuICAgICAgICAgICAgcXVlcnlTdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4KSArXG4gICAgICAgICAgICBxdWVyeVN0cmluZy5zdWJzdHJpbmcoZW5kICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgfSB3aGlsZSAoaW5kZXggIT0gLTEgJiYgaW5kZXggPCBxdWVyeVN0cmluZy5sZW5ndGgpO1xuICByZXR1cm4gcXVlcnlTdHJpbmc7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFBY3Rpdml0eVJlcXVlc3R9IHJlcXVlc3RcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc2VyaWFsaXplUmVxdWVzdChyZXF1ZXN0KSB7XG4gIGNvbnN0IG1hcCA9IHtcbiAgICAncmVxdWVzdElkJzogcmVxdWVzdC5yZXF1ZXN0SWQsXG4gICAgJ3JldHVyblVybCc6IHJlcXVlc3QucmV0dXJuVXJsLFxuICAgICdhcmdzJzogcmVxdWVzdC5hcmdzLFxuICB9O1xuICBpZiAocmVxdWVzdC5vcmlnaW4gIT09IHVuZGVmaW5lZCkge1xuICAgIG1hcFsnb3JpZ2luJ10gPSByZXF1ZXN0Lm9yaWdpbjtcbiAgfVxuICBpZiAocmVxdWVzdC5vcmlnaW5WZXJpZmllZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgbWFwWydvcmlnaW5WZXJpZmllZCddID0gcmVxdWVzdC5vcmlnaW5WZXJpZmllZDtcbiAgfVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobWFwKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gZXJyb3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzQWJvcnRFcnJvcihlcnJvcikge1xuICBpZiAoIWVycm9yIHx8IHR5cGVvZiBlcnJvciAhPSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKGVycm9yWyduYW1lJ10gPT09IEFCT1JUX0VSUl9OQU1FKTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgb3IgZW11bGF0ZXMgYSBET01FeGNlcHRpb24gb2YgQWJvcnRFcnJvciB0eXBlLlxuICogU2VlIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI2Fib3J0ZXJyb3IuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZVxuICogQHJldHVybiB7IURPTUV4Y2VwdGlvbn1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQWJvcnRFcnJvcih3aW4sIG9wdF9tZXNzYWdlKSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSAnQWJvcnRFcnJvcicgKyAob3B0X21lc3NhZ2UgPyAnOiAnICsgb3B0X21lc3NhZ2UgOiAnJyk7XG4gIGxldCBlcnJvciA9IG51bGw7XG4gIGlmICh0eXBlb2Ygd2luWydET01FeGNlcHRpb24nXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiByZW1vdmUgdHlwZWNhc3Qgb25jZSBleHRlcm5zIGFyZSBmaXhlZC5cbiAgICBjb25zdCBjb25zdHIgPSAvKiogQHR5cGUge2Z1bmN0aW9uKG5ldzpET01FeGNlcHRpb24sIHN0cmluZywgc3RyaW5nKX0gKi8gKFxuICAgICAgICB3aW5bJ0RPTUV4Y2VwdGlvbiddKTtcbiAgICB0cnkge1xuICAgICAgZXJyb3IgPSBuZXcgY29uc3RyKG1lc3NhZ2UsIEFCT1JUX0VSUl9OQU1FKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUuIEluIHBhcnRpY3VsYXIsIGBuZXcgRE9NRXhjZXB0aW9uKClgIGZhaWxzIGluIEVkZ2UuXG4gICAgfVxuICB9XG4gIGlmICghZXJyb3IpIHtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IHJlbW92ZSB0eXBlY2FzdCBvbmNlIGV4dGVybnMgYXJlIGZpeGVkLlxuICAgIGNvbnN0IGNvbnN0ciA9IC8qKiBAdHlwZSB7ZnVuY3Rpb24obmV3OkRPTUV4Y2VwdGlvbiwgc3RyaW5nKX0gKi8gKFxuICAgICAgICBFcnJvcik7XG4gICAgZXJyb3IgPSBuZXcgY29uc3RyKG1lc3NhZ2UpO1xuICAgIGVycm9yLm5hbWUgPSBBQk9SVF9FUlJfTkFNRTtcbiAgICBlcnJvci5jb2RlID0gQUJPUlRfRVJSX0NPREU7XG4gIH1cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5cbi8qKlxuICogUmVzb2x2ZXMgdGhlIGFjdGl2aXR5IHJlc3VsdCBhcyBhIHByb21pc2U6XG4gKiAgLSBgT0tgIHJlc3VsdCBpcyB5aWVsZGVkIGFzIHRoZSBwcm9taXNlJ3MgcGF5bG9hZDtcbiAqICAtIGBDQU5DRUxgIHJlc3VsdCBpcyByZWplY3RlZCB3aXRoIHRoZSBgQWJvcnRFcnJvcmA7XG4gKiAgLSBgRkFJTEVEYCByZXN1bHQgaXMgcmVqZWN0ZWQgd2l0aCB0aGUgZW1iZWRkZWQgZXJyb3IuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUFjdGl2aXR5UmVzdWx0fSByZXN1bHRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKCFBY3Rpdml0eVJlc3VsdHwhUHJvbWlzZSkpfSByZXNvbHZlclxuICovXG5mdW5jdGlvbiByZXNvbHZlUmVzdWx0KHdpbiwgcmVzdWx0LCByZXNvbHZlcikge1xuICBpZiAocmVzdWx0Lm9rKSB7XG4gICAgcmVzb2x2ZXIocmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlcnJvciA9IHJlc3VsdC5lcnJvciB8fCBjcmVhdGVBYm9ydEVycm9yKHdpbik7XG4gICAgZXJyb3IuYWN0aXZpdHlSZXN1bHQgPSByZXN1bHQ7XG4gICAgcmVzb2x2ZXIoUHJvbWlzZS5yZWplY3QoZXJyb3IpKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzSWVCcm93c2VyKHdpbikge1xuICAvLyBNU0lFIGFuZCBUcmlkZW50IGFyZSB0eXBpY2FsIHVzZXIgYWdlbnRzIGZvciBJRSBicm93c2Vycy5cbiAgY29uc3QgbmF2ID0gd2luLm5hdmlnYXRvcjtcbiAgcmV0dXJuIC9UcmlkZW50fE1TSUV8SUVNb2JpbGUvaS50ZXN0KG5hdiAmJiBuYXYudXNlckFnZW50KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VkZ2VCcm93c2VyKHdpbikge1xuICBjb25zdCBuYXYgPSB3aW4ubmF2aWdhdG9yO1xuICByZXR1cm4gL0VkZ2UvaS50ZXN0KG5hdiAmJiBuYXYudXNlckFnZW50KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVycm9yfSBlXG4gKi9cbmZ1bmN0aW9uIHRocm93QXN5bmMoZSkge1xuICBzZXRUaW1lb3V0KCgpID0+IHt0aHJvdyBlO30pO1xufVxuXG5cbi8qKlxuICogUG9seWZpbGwgb2YgdGhlIGBOb2RlLmlzQ29ubmVjdGVkYCBBUEkuIFNlZVxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vZGUvaXNDb25uZWN0ZWQuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc05vZGVDb25uZWN0ZWQobm9kZSkge1xuICAvLyBFbnN1cmUgdGhhdCBub2RlIGlzIGF0dGFjaGVkIGlmIHNwZWNpZmllZC4gVGhpcyBjaGVjayB1c2VzIGEgbmV3IGFuZFxuICAvLyBmYXN0IGBpc0Nvbm5lY3RlZGAgQVBJIGFuZCB0aHVzIG9ubHkgY2hlY2tlZCBvbiBwbGF0Zm9ybXMgdGhhdCBoYXZlIGl0LlxuICAvLyBTZWUgaHR0cHM6Ly93d3cuY2hyb21lc3RhdHVzLmNvbS9mZWF0dXJlLzU2NzYxMTA1NDkzNTI0NDguXG4gIGlmICgnaXNDb25uZWN0ZWQnIGluIG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZVsnaXNDb25uZWN0ZWQnXTtcbiAgfVxuICAvLyBQb2x5ZmlsbC5cbiAgY29uc3Qgcm9vdCA9IG5vZGUub3duZXJEb2N1bWVudCAmJiBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICByZXR1cm4gKHJvb3QgJiYgcm9vdC5jb250YWlucyhub2RlKSkgfHwgZmFsc2U7XG59XG5cblxuXG5jb25zdCBTRU5USU5FTCA9ICdfX0FDVElWSVRJRVNfXyc7XG5cblxuLyoqXG4gKiBUaGUgbWVzc2VuZ2VyIGhlbHBlciBmb3IgYWN0aXZpdHkncyBwb3J0IGFuZCBob3N0LlxuICovXG5jbGFzcyBNZXNzZW5nZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyFXaW5kb3d8ZnVuY3Rpb24oKTo/V2luZG93fSB0YXJnZXRPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gdGFyZ2V0T3JpZ2luXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZVRhcmdldFxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCB0YXJnZXRPckNhbGxiYWNrLCB0YXJnZXRPcmlnaW4sIHJlcXVpcmVUYXJnZXQpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d8ZnVuY3Rpb24oKTo/V2luZG93fSAqL1xuICAgIHRoaXMudGFyZ2V0T3JDYWxsYmFja18gPSB0YXJnZXRPckNhbGxiYWNrO1xuXG4gICAgLyoqXG4gICAgICogTWF5IHN0YXJ0IGFzIHVua25vd24gKGBudWxsYCkgdW50aWwgcmVjZWl2ZWQgaW4gdGhlIGZpcnN0IG1lc3NhZ2UuXG4gICAgICogQHByaXZhdGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRPcmlnaW5fID0gdGFyZ2V0T3JpZ2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnJlcXVpcmVUYXJnZXRfID0gcmVxdWlyZVRhcmdldDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1dpbmRvd30gKi9cbiAgICB0aGlzLnRhcmdldF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuYWNjZXB0c0NoYW5uZWxfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9NZXNzYWdlUG9ydH0gKi9cbiAgICB0aGlzLnBvcnRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKHN0cmluZywgP09iamVjdCl9ICovXG4gICAgdGhpcy5vbkNvbW1hbmRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCFPYmplY3QpfSAqL1xuICAgIHRoaXMub25DdXN0b21NZXNzYWdlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7P09iamVjdDxzdHJpbmcsICFDaGFubmVsSG9sZGVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmNoYW5uZWxzXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5ib3VuZEhhbmRsZUV2ZW50XyA9IHRoaXMuaGFuZGxlRXZlbnRfLmJpbmQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29ubmVjdCB0aGUgcG9ydCB0byB0aGUgaG9zdCBvciB2aWNlIHZlcnNhLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgP09iamVjdCl9IG9uQ29tbWFuZFxuICAgKi9cbiAgY29ubmVjdChvbkNvbW1hbmQpIHtcbiAgICBpZiAodGhpcy5vbkNvbW1hbmRfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FscmVhZHkgY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIHRoaXMub25Db21tYW5kXyA9IG9uQ29tbWFuZDtcbiAgICB0aGlzLndpbl8uYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRIYW5kbGVFdmVudF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3QgbWVzc2VuZ2VyLlxuICAgKi9cbiAgZGlzY29ubmVjdCgpIHtcbiAgICBpZiAodGhpcy5vbkNvbW1hbmRfKSB7XG4gICAgICB0aGlzLm9uQ29tbWFuZF8gPSBudWxsO1xuICAgICAgaWYgKHRoaXMucG9ydF8pIHtcbiAgICAgICAgY2xvc2VQb3J0KHRoaXMucG9ydF8pO1xuICAgICAgICB0aGlzLnBvcnRfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRoaXMud2luXy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5ib3VuZEhhbmRsZUV2ZW50Xyk7XG4gICAgICBpZiAodGhpcy5jaGFubmVsc18pIHtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIHRoaXMuY2hhbm5lbHNfKSB7XG4gICAgICAgICAgY29uc3QgY2hhbm5lbE9iaiA9IHRoaXMuY2hhbm5lbHNfW2tdO1xuICAgICAgICAgIGlmIChjaGFubmVsT2JqLnBvcnQxKSB7XG4gICAgICAgICAgICBjbG9zZVBvcnQoY2hhbm5lbE9iai5wb3J0MSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGFubmVsT2JqLnBvcnQyKSB7XG4gICAgICAgICAgICBjbG9zZVBvcnQoY2hhbm5lbE9iai5wb3J0Mik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbm5lbHNfID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBtZXNzZW5nZXIgaGFzIGJlZW4gY29ubmVjdGVkIGFscmVhZHkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0Nvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRPcmlnaW5fICE9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbWVzc2FnaW5nIHRhcmdldC4gT25seSBhdmFpbGFibGUgd2hlbiBjb25uZWN0aW9uIGhhcyBiZWVuXG4gICAqIGVzdGFibGloc2VkLlxuICAgKiBAcmV0dXJuIHshV2luZG93fVxuICAgKi9cbiAgZ2V0VGFyZ2V0KCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0T3B0aW9uYWxUYXJnZXRfKCk7XG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9XaW5kb3d9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRPcHRpb25hbFRhcmdldF8oKSB7XG4gICAgaWYgKHRoaXMub25Db21tYW5kXyAmJiAhdGhpcy50YXJnZXRfKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMudGFyZ2V0T3JDYWxsYmFja18gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnRhcmdldF8gPSB0aGlzLnRhcmdldE9yQ2FsbGJhY2tfKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRhcmdldF8gPSAvKiogQHR5cGUgeyFXaW5kb3d9ICovICh0aGlzLnRhcmdldE9yQ2FsbGJhY2tfKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0XztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtZXNzYWdpbmcgb3JpZ2luLiBPbmx5IGF2YWlsYWJsZSB3aGVuIGNvbm5lY3Rpb24gaGFzIGJlZW5cbiAgICogZXN0YWJsaWhzZWQuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFRhcmdldE9yaWdpbigpIHtcbiAgICBpZiAodGhpcy50YXJnZXRPcmlnaW5fID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50YXJnZXRPcmlnaW5fO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBob3N0IHNlbmRzIHRoaXMgbWVzc2FnZSB0byB0aGUgY2xpZW50IHRvIGluZGljYXRlIHRoYXQgaXQncyByZWFkeSB0b1xuICAgKiBzdGFydCBjb21tdW5pY2F0aW5nLiBUaGUgY2xpZW50IGlzIGV4cGVjdGVkIHRvIHJlc3BvbmQgYmFjayB3aXRoIHRoZVxuICAgKiBcInN0YXJ0XCIgY29tbWFuZC4gU2VlIGBzZW5kU3RhcnRDb21tYW5kYCBtZXRob2QuXG4gICAqL1xuICBzZW5kQ29ubmVjdENvbW1hbmQoKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBNZXNzYWdlQ2hhbm5lbCBpcyBjcml0aWNhbGx5IG5lY2Vzc2FyeSBmb3IgSUUvRWRnZSxcbiAgICAvLyBzaW5jZSB3aW5kb3cgbWVzc2FnaW5nIGRvZXNuJ3QgYWx3YXlzIHdvcmsuIEl0J3MgYWxzbyBwcmVmZXJyZWQgYXMgYW4gQVBJXG4gICAgLy8gZm9yIG90aGVyIGJyb3dzZXJzOiBpdCdzIG5ld2VyLCBjbGVhbmVyIGFuZCBhcmd1YWJseSBtb3JlIHNlY3VyZS5cbiAgICAvLyBVbmZvcnR1bmF0ZWx5LCBicm93c2VycyBjdXJyZW50bHkgZG8gbm90IHByb3BhZ2F0ZSB1c2VyIGdlc3R1cmVzIHZpYVxuICAgIC8vIE1lc3NhZ2VDaGFubmVsLCBvbmx5IHZpYSB3aW5kb3cgbWVzc2FnaW5nLiBUaGlzIHNob3VsZCBiZSByZS1lbmFibGVkXG4gICAgLy8gb25jZSBicm93c2VycyBmaXggdXNlciBnZXN0dXJlIHByb3BhZ2F0aW9uLlxuICAgIC8vIFNlZTpcbiAgICAvLyBTYWZhcmk6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xODY1OTNcbiAgICAvLyBDaHJvbWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTg1MTQ5M1xuICAgIC8vIEZpcmVmb3g6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0Njk0MjJcbiAgICBjb25zdCBhY2NlcHRzQ2hhbm5lbCA9IGlzSWVCcm93c2VyKHRoaXMud2luXykgfHwgaXNFZGdlQnJvd3Nlcih0aGlzLndpbl8pO1xuICAgIHRoaXMuc2VuZENvbW1hbmQoJ2Nvbm5lY3QnLCB7J2FjY2VwdHNDaGFubmVsJzogYWNjZXB0c0NoYW5uZWx9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xpZW50IHNlbmRzIHRoaXMgbWVzc2FnZSB0byB0aGUgaG9zdCB1cG9uIHJlY2VpdmluZyB0aGUgXCJjb25uZWN0XCJcbiAgICogbWVzc2FnZSB0byBzdGFydCB0aGUgbWFpbiBjb21tdW5pY2F0aW9uIGNoYW5uZWwuIEFzIGEgcGF5bG9hZCwgdGhlIG1lc3NhZ2VcbiAgICogd2lsbCBjb250YWluIHRoZSBwcm92aWRlZCBzdGFydCBhcmd1bWVudHMuXG4gICAqIEBwYXJhbSB7P09iamVjdH0gYXJnc1xuICAgKi9cbiAgc2VuZFN0YXJ0Q29tbWFuZChhcmdzKSB7XG4gICAgbGV0IGNoYW5uZWwgPSBudWxsO1xuICAgIGlmICh0aGlzLmFjY2VwdHNDaGFubmVsXyAmJiB0eXBlb2YgdGhpcy53aW5fLk1lc3NhZ2VDaGFubmVsID09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNoYW5uZWwgPSBuZXcgdGhpcy53aW5fLk1lc3NhZ2VDaGFubmVsKCk7XG4gICAgfVxuICAgIGlmIChjaGFubmVsKSB7XG4gICAgICB0aGlzLnNlbmRDb21tYW5kKCdzdGFydCcsIGFyZ3MsIFtjaGFubmVsLnBvcnQyXSk7XG4gICAgICAvLyBJdCdzIGNyaXRpY2FsIHRvIHN3aXRjaCB0byBwb3J0IG1lc3NhZ2luZyBvbmx5IGFmdGVyIFwic3RhcnRcIiBoYXMgYmVlblxuICAgICAgLy8gc2VudC4gT3RoZXJ3aXNlLCBpdCB3b24ndCBiZSBkZWxpdmVyZWQuXG4gICAgICB0aGlzLnN3aXRjaFRvQ2hhbm5lbF8oY2hhbm5lbC5wb3J0MSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZENvbW1hbmQoJ3N0YXJ0JywgYXJncyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIHRoZSBzcGVjaWZpZWQgY29tbWFuZCBmcm9tIHRoZSBwb3J0IHRvIHRoZSBob3N0IG9yIHZpY2UgdmVyc2EuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbWRcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X3BheWxvYWRcbiAgICogQHBhcmFtIHs/QXJyYXk9fSBvcHRfdHJhbnNmZXJcbiAgICovXG4gIHNlbmRDb21tYW5kKGNtZCwgb3B0X3BheWxvYWQsIG9wdF90cmFuc2Zlcikge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAnc2VudGluZWwnOiBTRU5USU5FTCxcbiAgICAgICdjbWQnOiBjbWQsXG4gICAgICAncGF5bG9hZCc6IG9wdF9wYXlsb2FkIHx8IG51bGwsXG4gICAgfTtcbiAgICBpZiAodGhpcy5wb3J0Xykge1xuICAgICAgdGhpcy5wb3J0Xy5wb3N0TWVzc2FnZShkYXRhLCBvcHRfdHJhbnNmZXIgfHwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoKTtcbiAgICAgIC8vIE9ubHkgXCJjb25uZWN0XCIgY29tbWFuZCBpcyBhbGxvd2VkIHRvIHVzZSBgdGFyZ2V0T3JpZ2luID09ICcqJ2BcbiAgICAgIGNvbnN0IHRhcmdldE9yaWdpbiA9XG4gICAgICAgICAgY21kID09ICdjb25uZWN0JyA/XG4gICAgICAgICAgKHRoaXMudGFyZ2V0T3JpZ2luXyAhPSBudWxsID8gdGhpcy50YXJnZXRPcmlnaW5fIDogJyonKSA6XG4gICAgICAgICAgdGhpcy5nZXRUYXJnZXRPcmlnaW4oKTtcbiAgICAgIHRhcmdldC5wb3N0TWVzc2FnZShkYXRhLCB0YXJnZXRPcmlnaW4sIG9wdF90cmFuc2ZlciB8fCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIGNsaWVudC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSBwYXlsb2FkXG4gICAqL1xuICBjdXN0b21NZXNzYWdlKHBheWxvYWQpIHtcbiAgICB0aGlzLnNlbmRDb21tYW5kKCdtc2cnLCBwYXlsb2FkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byByZWNlaXZlIG1lc3NhZ2VzIGZyb20gdGhlIGNsaWVudC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ3VzdG9tTWVzc2FnZShjYWxsYmFjaykge1xuICAgIHRoaXMub25DdXN0b21NZXNzYWdlXyA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X25hbWVcbiAgICogQHJldHVybiB7IVByb21pc2U8IU1lc3NhZ2VQb3J0Pn1cbiAgICovXG4gIHN0YXJ0Q2hhbm5lbChvcHRfbmFtZSkge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRfbmFtZSB8fCAnJztcbiAgICBjb25zdCBjaGFubmVsT2JqID0gdGhpcy5nZXRDaGFubmVsT2JqXyhuYW1lKTtcbiAgICBpZiAoIWNoYW5uZWxPYmoucG9ydDEpIHtcbiAgICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgdGhpcy53aW5fLk1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICBjaGFubmVsT2JqLnBvcnQxID0gY2hhbm5lbC5wb3J0MTtcbiAgICAgIGNoYW5uZWxPYmoucG9ydDIgPSBjaGFubmVsLnBvcnQyO1xuICAgICAgY2hhbm5lbE9iai5yZXNvbHZlcihjaGFubmVsT2JqLnBvcnQxKTtcbiAgICB9XG4gICAgaWYgKGNoYW5uZWxPYmoucG9ydDIpIHtcbiAgICAgIC8vIE5vdCB5ZXQgc2VudC5cbiAgICAgIHRoaXMuc2VuZENvbW1hbmQoJ2Nuc2V0JywgeyduYW1lJzogbmFtZX0sIFtjaGFubmVsT2JqLnBvcnQyXSk7XG4gICAgICBjaGFubmVsT2JqLnBvcnQyID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5uZWxPYmoucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9uYW1lXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFNZXNzYWdlUG9ydD59XG4gICAqL1xuICBhc2tDaGFubmVsKG9wdF9uYW1lKSB7XG4gICAgY29uc3QgbmFtZSA9IG9wdF9uYW1lIHx8ICcnO1xuICAgIGNvbnN0IGNoYW5uZWxPYmogPSB0aGlzLmdldENoYW5uZWxPYmpfKG5hbWUpO1xuICAgIGlmICghY2hhbm5lbE9iai5wb3J0MSkge1xuICAgICAgdGhpcy5zZW5kQ29tbWFuZCgnY25nZXQnLCB7J25hbWUnOiBuYW1lfSk7XG4gICAgfVxuICAgIHJldHVybiBjaGFubmVsT2JqLnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHshTWVzc2FnZVBvcnR9IHBvcnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlY2VpdmVDaGFubmVsXyhuYW1lLCBwb3J0KSB7XG4gICAgY29uc3QgY2hhbm5lbE9iaiA9IHRoaXMuZ2V0Q2hhbm5lbE9ial8obmFtZSk7XG4gICAgY2hhbm5lbE9iai5wb3J0MSA9IHBvcnQ7XG4gICAgY2hhbm5lbE9iai5yZXNvbHZlcihwb3J0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHshQ2hhbm5lbEhvbGRlcn1cbiAgICovXG4gIGdldENoYW5uZWxPYmpfKG5hbWUpIHtcbiAgICBpZiAoIXRoaXMuY2hhbm5lbHNfKSB7XG4gICAgICB0aGlzLmNoYW5uZWxzXyA9IHt9O1xuICAgIH1cbiAgICBsZXQgY2hhbm5lbE9iaiA9IHRoaXMuY2hhbm5lbHNfW25hbWVdO1xuICAgIGlmICghY2hhbm5lbE9iaikge1xuICAgICAgbGV0IHJlc29sdmVyO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICByZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICB9KTtcbiAgICAgIGNoYW5uZWxPYmogPSB7XG4gICAgICAgIHBvcnQxOiBudWxsLFxuICAgICAgICBwb3J0MjogbnVsbCxcbiAgICAgICAgcmVzb2x2ZXIsXG4gICAgICAgIHByb21pc2UsXG4gICAgICB9O1xuICAgICAgdGhpcy5jaGFubmVsc19bbmFtZV0gPSBjaGFubmVsT2JqO1xuICAgIH1cbiAgICByZXR1cm4gY2hhbm5lbE9iajtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFNZXNzYWdlUG9ydH0gcG9ydFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3dpdGNoVG9DaGFubmVsXyhwb3J0KSB7XG4gICAgaWYgKHRoaXMucG9ydF8pIHtcbiAgICAgIGNsb3NlUG9ydCh0aGlzLnBvcnRfKTtcbiAgICB9XG4gICAgdGhpcy5wb3J0XyA9IHBvcnQ7XG4gICAgdGhpcy5wb3J0Xy5vbm1lc3NhZ2UgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgICAgIGNvbnN0IGNtZCA9IGRhdGEgJiYgZGF0YVsnY21kJ107XG4gICAgICBjb25zdCBwYXlsb2FkID0gZGF0YSAmJiBkYXRhWydwYXlsb2FkJ10gfHwgbnVsbDtcbiAgICAgIGlmIChjbWQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVDb21tYW5kXyhjbWQsIHBheWxvYWQsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIEV2ZW4gdGhvdWdoIGFsbCBtZXNzYWdpbmcgd2lsbCBzd2l0Y2ggdG8gcG9ydHMsIHRoZSB3aW5kb3ctYmFzZWQgbWVzc2FnZVxuICAgIC8vIGxpc3RlbmVyIHdpbGwgYmUgcHJlc2VydmVkIGp1c3QgaW4gY2FzZSB0aGUgaG9zdCBpcyByZWZyZXNoZWQgYW5kIG5lZWRzXG4gICAgLy8gYW5vdGhlciBjb25uZWN0aW9uLlxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU1lc3NhZ2VFdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUV2ZW50XyhldmVudCkge1xuICAgIGlmICh0aGlzLnJlcXVpcmVUYXJnZXRfICYmIHRoaXMuZ2V0T3B0aW9uYWxUYXJnZXRfKCkgIT0gZXZlbnQuc291cmNlKSB7XG4gICAgICAvLyBXaGVuIHRhcmdldCBpcyByZXF1aXJlZCwgY29uZmlybSBpdCBhZ2FpbnN0IHRoZSBldmVudC5zb3VyY2UuIFRoaXNcbiAgICAgIC8vIGlzIG5vcm1hbGx5IG9ubHkgbmVlZGVkIGZvciBwb3J0cyB3aGVyZSBhIHNpbmdsZSB3aW5kb3cgY2FuIGluY2x1ZGVcbiAgICAgIC8vIG11bHRpcGxlIGlmcmFtZXMgdG8gbWF0Y2ggdGhlIGV2ZW50IHRvIGEgc3BlY2lmaWMgaWZyYW1lLiBPdGhlcndpc2UsXG4gICAgICAvLyB0aGUgb3JpZ2luIGNoZWNrcyBiZWxvdyBhcmUgc3VmZmljaWVudC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgaWYgKCFkYXRhIHx8IGRhdGFbJ3NlbnRpbmVsJ10gIT0gU0VOVElORUwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY21kID0gZGF0YVsnY21kJ107XG4gICAgaWYgKHRoaXMucG9ydF8gJiYgY21kICE9ICdjb25uZWN0JyAmJiBjbWQgIT0gJ3N0YXJ0Jykge1xuICAgICAgLy8gTWVzc2FnaW5nIGNoYW5uZWwgaGFzIGFscmVhZHkgdGFrZW4gb3Zlci4gSG93ZXZlciwgdGhlIFwiY29ubmVjdFwiIGFuZFxuICAgICAgLy8gXCJzdGFydFwiIGNvbW1hbmRzIGFyZSBhbGxvd2VkIHRvIHByb2NlZWQgaW4gY2FzZSByZS1jb25uZWN0aW9uIGlzXG4gICAgICAvLyByZXF1ZXN0ZWQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbiA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoZXZlbnQub3JpZ2luKTtcbiAgICBjb25zdCBwYXlsb2FkID0gZGF0YVsncGF5bG9hZCddIHx8IG51bGw7XG4gICAgaWYgKHRoaXMudGFyZ2V0T3JpZ2luXyA9PSBudWxsICYmIGNtZCA9PSAnc3RhcnQnKSB7XG4gICAgICB0aGlzLnRhcmdldE9yaWdpbl8gPSBvcmlnaW47XG4gICAgfVxuICAgIGlmICh0aGlzLnRhcmdldE9yaWdpbl8gPT0gbnVsbCAmJiBldmVudC5zb3VyY2UpIHtcbiAgICAgIGlmICh0aGlzLmdldE9wdGlvbmFsVGFyZ2V0XygpID09IGV2ZW50LnNvdXJjZSkge1xuICAgICAgICB0aGlzLnRhcmdldE9yaWdpbl8gPSBvcmlnaW47XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE5vdGljZSB0aGF0IGV2ZW50LnNvdXJjZSBtYXkgZGlmZmVyIGZyb20gdGhlIHRhcmdldCBiZWNhdXNlIG9mXG4gICAgLy8gZnJpZW5kbHktaWZyYW1lIGludGVybWVkaWFyaWVzLlxuICAgIGlmIChvcmlnaW4gIT0gdGhpcy50YXJnZXRPcmlnaW5fKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlQ29tbWFuZF8oY21kLCBwYXlsb2FkLCBldmVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3R9IHBheWxvYWRcbiAgICogQHBhcmFtIHshTWVzc2FnZUV2ZW50fSBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlQ29tbWFuZF8oY21kLCBwYXlsb2FkLCBldmVudCkge1xuICAgIGlmIChjbWQgPT0gJ2Nvbm5lY3QnKSB7XG4gICAgICBpZiAodGhpcy5wb3J0Xykge1xuICAgICAgICAvLyBJbiBjYXNlIHRoZSBwb3J0IGhhcyBhbHJlYWR5IGJlZW4gb3BlbiAtIGNsb3NlIGl0IHRvIHJlb3BlbiBpdFxuICAgICAgICAvLyBhZ2FpbiBsYXRlci5cbiAgICAgICAgY2xvc2VQb3J0KHRoaXMucG9ydF8pO1xuICAgICAgICB0aGlzLnBvcnRfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWNjZXB0c0NoYW5uZWxfID0gcGF5bG9hZCAmJiBwYXlsb2FkWydhY2NlcHRzQ2hhbm5lbCddIHx8IGZhbHNlO1xuICAgICAgdGhpcy5vbkNvbW1hbmRfKGNtZCwgcGF5bG9hZCk7XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ3N0YXJ0Jykge1xuICAgICAgY29uc3QgcG9ydCA9IGV2ZW50LnBvcnRzICYmIGV2ZW50LnBvcnRzWzBdO1xuICAgICAgaWYgKHBvcnQpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hUb0NoYW5uZWxfKHBvcnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5vbkNvbW1hbmRfKGNtZCwgcGF5bG9hZCk7XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ21zZycpIHtcbiAgICAgIGlmICh0aGlzLm9uQ3VzdG9tTWVzc2FnZV8gIT0gbnVsbCAmJiBwYXlsb2FkICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5vbkN1c3RvbU1lc3NhZ2VfKHBheWxvYWQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY21kID09ICdjbmdldCcpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBwYXlsb2FkWyduYW1lJ107XG4gICAgICB0aGlzLnN0YXJ0Q2hhbm5lbChuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAnY25zZXQnKSB7XG4gICAgICBjb25zdCBuYW1lID0gcGF5bG9hZFsnbmFtZSddO1xuICAgICAgY29uc3QgcG9ydCA9IGV2ZW50LnBvcnRzWzBdO1xuICAgICAgdGhpcy5yZWNlaXZlQ2hhbm5lbF8obmFtZSwgLyoqIEB0eXBlIHshTWVzc2FnZVBvcnR9ICovIChwb3J0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25Db21tYW5kXyhjbWQsIHBheWxvYWQpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHshTWVzc2FnZVBvcnR9IHBvcnRcbiAqL1xuZnVuY3Rpb24gY2xvc2VQb3J0KHBvcnQpIHtcbiAgdHJ5IHtcbiAgICBwb3J0LmNsb3NlKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZ25vcmUuXG4gIH1cbn1cblxuXG5cblxuLyoqXG4gKiBUaGUgYEFjdGl2aXR5UG9ydGAgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBpZnJhbWUgY2FzZS4gVW5saWtlIG90aGVyIHR5cGVzXG4gKiBvZiBhY3Rpdml0aWVzLCBpZnJhbWUtYmFzZWQgYWN0aXZpdGllcyBhcmUgYWx3YXlzIGNvbm5lY3RlZCBhbmQgY2FuIHJlYWN0XG4gKiB0byBzaXplIHJlcXVlc3RzLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtBY3Rpdml0eVBvcnR9XG4gKiBAaW1wbGVtZW50cyB7QWN0aXZpdHlNZXNzYWdpbmdQb3J0fVxuICovXG5jbGFzcyBBY3Rpdml0eUlmcmFtZVBvcnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGlmcmFtZSwgdXJsLCBvcHRfYXJncykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSBpZnJhbWU7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudXJsXyA9IHVybDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHs/T2JqZWN0fSAqL1xuICAgIHRoaXMuYXJnc18gPSBvcHRfYXJncyB8fCBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSAvKiogQHR5cGUgeyFXaW5kb3d9ICovICh0aGlzLmlmcmFtZV8ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy50YXJnZXRPcmlnaW5fID0gZ2V0T3JpZ2luRnJvbVVybCh1cmwpO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuY29ubmVjdGVkXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbm5lY3RlZFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigpfSAqL1xuICAgIHRoaXMucmVhZHlSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeVByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnJlYWR5UmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCghQWN0aXZpdHlSZXN1bHR8IVByb21pc2UpKX0gKi9cbiAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZTwhQWN0aXZpdHlSZXN1bHQ+fSAqL1xuICAgIHRoaXMucmVzdWx0UHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMucmVzdWx0UmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKG51bWJlcil9ICovXG4gICAgdGhpcy5vblJlc2l6ZVJlcXVlc3RfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLnJlcXVlc3RlZEhlaWdodF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU1lc3Nlbmdlcn0gKi9cbiAgICB0aGlzLm1lc3Nlbmdlcl8gPSBuZXcgTWVzc2VuZ2VyKFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgICgpID0+IHRoaXMuaWZyYW1lXy5jb250ZW50V2luZG93LFxuICAgICAgICB0aGlzLnRhcmdldE9yaWdpbl8sXG4gICAgICAgIC8qIHJlcXVpcmVUYXJnZXQgKi8gdHJ1ZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldE1vZGUoKSB7XG4gICAgcmV0dXJuIEFjdGl2aXR5TW9kZS5JRlJBTUU7XG4gIH1cblxuICAvKipcbiAgICogV2FpdHMgdW50aWwgdGhlIGFjdGl2aXR5IHBvcnQgaXMgY29ubmVjdGVkIHRvIHRoZSBob3N0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGNvbm5lY3QoKSB7XG4gICAgaWYgKCFpc05vZGVDb25uZWN0ZWQodGhpcy5pZnJhbWVfKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpZnJhbWUgbXVzdCBiZSBpbiBET00nKTtcbiAgICB9XG4gICAgdGhpcy5tZXNzZW5nZXJfLmNvbm5lY3QodGhpcy5oYW5kbGVDb21tYW5kXy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmlmcmFtZV8uc3JjID0gdGhpcy51cmxfO1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3RlZFByb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3QgdGhlIGFjdGl2aXR5IGJpbmRpbmcgYW5kIGNsZWFudXAgbGlzdGVuZXJzLlxuICAgKi9cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgICB0aGlzLm1lc3Nlbmdlcl8uZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0UHJvbWlzZV87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFRhcmdldFdpbigpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfLmNvbnRlbnRXaW5kb3cgfHwgbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbWVzc2FnZShwYXlsb2FkKSB7XG4gICAgdGhpcy5tZXNzZW5nZXJfLmN1c3RvbU1lc3NhZ2UocGF5bG9hZCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgIHRoaXMubWVzc2VuZ2VyXy5vbkN1c3RvbU1lc3NhZ2UoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBtZXNzYWdlQ2hhbm5lbChvcHRfbmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1lc3Nlbmdlcl8uYXNrQ2hhbm5lbChvcHRfbmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB5aWVsZHMgd2hlbiB0aGUgaWZyYW1lIGlzIHJlYWR5IHRvIGJlIGludGVyYWN0ZWRcbiAgICogd2l0aC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZHlQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRvIGhhbmRsZSByZXNpemUgcmVxdWVzdHMuIE9uY2Ugc3VjY2Vzc2Z1bGx5IHJlc2l6ZWQsXG4gICAqIGVuc3VyZSB0byBjYWxsIGByZXNpemVkKClgIG1ldGhvZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIpfSBjYWxsYmFja1xuICAgKi9cbiAgb25SZXNpemVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5vblJlc2l6ZVJlcXVlc3RfID0gY2FsbGJhY2s7XG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5yZXF1ZXN0ZWRIZWlnaHRfICE9IG51bGwpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5yZXF1ZXN0ZWRIZWlnaHRfKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaWduYWxzIGJhY2sgdG8gdGhlIGFjdGl2aXR5IGltcGxlbWVudGF0aW9uIHRoYXQgdGhlIGNsaWVudCBoYXMgdXBkYXRlZFxuICAgKiB0aGUgYWN0aXZpdHkncyBzaXplLlxuICAgKi9cbiAgcmVzaXplZCgpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmlmcmFtZV8ub2Zmc2V0SGVpZ2h0O1xuICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kQ29tbWFuZCgncmVzaXplZCcsIHsnaGVpZ2h0JzogaGVpZ2h0fSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3R9IHBheWxvYWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbW1hbmRfKGNtZCwgcGF5bG9hZCkge1xuICAgIGlmIChjbWQgPT0gJ2Nvbm5lY3QnKSB7XG4gICAgICAvLyBGaXJzdCBldmVyIG1lc3NhZ2UuIEluZGljYXRlcyB0aGF0IHRoZSByZWNlaXZlciBpcyBsaXN0ZW5pbmcuXG4gICAgICB0aGlzLmNvbm5lY3RlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5tZXNzZW5nZXJfLnNlbmRTdGFydENvbW1hbmQodGhpcy5hcmdzXyk7XG4gICAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXygpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdyZXN1bHQnKSB7XG4gICAgICAvLyBUaGUgbGFzdCBtZXNzYWdlLiBJbmRpY2F0ZXMgdGhhdCB0aGUgcmVzdWx0IGhhcyBiZWVuIHJlY2VpdmVkLlxuICAgICAgaWYgKHRoaXMucmVzdWx0UmVzb2x2ZXJfKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSAvKiogQHR5cGUgeyFBY3Rpdml0eVJlc3VsdENvZGV9ICovIChwYXlsb2FkWydjb2RlJ10pO1xuICAgICAgICBjb25zdCBkYXRhID1cbiAgICAgICAgICAgIGNvZGUgPT0gQWN0aXZpdHlSZXN1bHRDb2RlLkZBSUxFRCA/XG4gICAgICAgICAgICBuZXcgRXJyb3IocGF5bG9hZFsnZGF0YSddIHx8ICcnKSA6XG4gICAgICAgICAgICBwYXlsb2FkWydkYXRhJ107XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBY3Rpdml0eVJlc3VsdChcbiAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgQWN0aXZpdHlNb2RlLklGUkFNRSxcbiAgICAgICAgICAgIHRoaXMubWVzc2VuZ2VyXy5nZXRUYXJnZXRPcmlnaW4oKSxcbiAgICAgICAgICAgIC8qIG9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAgICAgICAvKiBzZWN1cmVDaGFubmVsICovIHRydWUpO1xuICAgICAgICByZXNvbHZlUmVzdWx0KHRoaXMud2luXywgcmVzdWx0LCB0aGlzLnJlc3VsdFJlc29sdmVyXyk7XG4gICAgICAgIHRoaXMucmVzdWx0UmVzb2x2ZXJfID0gbnVsbDtcbiAgICAgICAgdGhpcy5tZXNzZW5nZXJfLnNlbmRDb21tYW5kKCdjbG9zZScpO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAncmVhZHknKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVJlc29sdmVyXykge1xuICAgICAgICB0aGlzLnJlYWR5UmVzb2x2ZXJfKCk7XG4gICAgICAgIHRoaXMucmVhZHlSZXNvbHZlcl8gPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY21kID09ICdyZXNpemUnKSB7XG4gICAgICB0aGlzLnJlcXVlc3RlZEhlaWdodF8gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHBheWxvYWRbJ2hlaWdodCddKTtcbiAgICAgIGlmICh0aGlzLm9uUmVzaXplUmVxdWVzdF8pIHtcbiAgICAgICAgdGhpcy5vblJlc2l6ZVJlcXVlc3RfKHRoaXMucmVxdWVzdGVkSGVpZ2h0Xyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuXG5cbi8qKlxuICogVGhlIGBBY3Rpdml0eVBvcnRgIGltcGxlbWVudGF0aW9uIGZvciB0aGUgc3RhbmRhbG9uZSB3aW5kb3cgYWN0aXZpdHlcbiAqIGNsaWVudCBleGVjdXRlZCBhcyBhIHBvcHVwLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtBY3Rpdml0eVBvcnR9XG4gKiBAaW1wbGVtZW50cyB7QWN0aXZpdHlNZXNzYWdpbmdQb3J0fVxuICovXG5jbGFzcyBBY3Rpdml0eVdpbmRvd1BvcnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBvcHRfYXJnc1xuICAgKiBAcGFyYW0gez9BY3Rpdml0eU9wZW5PcHRpb25zPX0gb3B0X29wdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgcmVxdWVzdElkLCB1cmwsIHRhcmdldCwgb3B0X2FyZ3MsIG9wdF9vcHRpb25zKSB7XG4gICAgY29uc3QgaXNWYWxpZFRhcmdldCA9XG4gICAgICAgIHRhcmdldCAmJlxuICAgICAgICAodGFyZ2V0ID09ICdfYmxhbmsnIHx8IHRhcmdldCA9PSAnX3RvcCcgfHwgdGFyZ2V0WzBdICE9ICdfJyk7XG4gICAgaWYgKCFpc1ZhbGlkVGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvbmx5IGFsbG93ZWQgdGFyZ2V0cyBhcmUgXCJfYmxhbmtcIiwgXCJfdG9wXCInICtcbiAgICAgICAgICAnIGFuZCBuYW1lIHRhcmdldHMnKTtcbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5yZXF1ZXN0SWRfID0gcmVxdWVzdElkO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnVybF8gPSB1cmw7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMub3BlblRhcmdldF8gPSB0YXJnZXQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P09iamVjdH0gKi9cbiAgICB0aGlzLmFyZ3NfID0gb3B0X2FyZ3MgfHwgbnVsbDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlPcGVuT3B0aW9uc30gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gb3B0X29wdGlvbnMgfHwge307XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuY29ubmVjdGVkUmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMuY29ubmVjdGVkUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuY29ubmVjdGVkUmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCghQWN0aXZpdHlSZXN1bHR8IVByb21pc2UpKX0gKi9cbiAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZTwhQWN0aXZpdHlSZXN1bHQ+fSAqL1xuICAgIHRoaXMucmVzdWx0UHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMucmVzdWx0UmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1dpbmRvd30gKi9cbiAgICB0aGlzLnRhcmdldFdpbl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/bnVtYmVyfSAqL1xuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P01lc3Nlbmdlcn0gKi9cbiAgICB0aGlzLm1lc3Nlbmdlcl8gPSBudWxsO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLm9wZW5UYXJnZXRfID09ICdfdG9wJyA/XG4gICAgICAgIEFjdGl2aXR5TW9kZS5SRURJUkVDVCA6XG4gICAgICAgIEFjdGl2aXR5TW9kZS5QT1BVUDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyB0aGUgYWN0aXZpdHkgaW4gYSB3aW5kb3csIGVpdGhlciBhcyBhIHBvcHVwIG9yIHZpYSByZWRpcmVjdC5cbiAgICpcbiAgICogUmV0dXJucyB0aGUgcHJvbWlzZSB0aGF0IHdpbGwgeWllbGQgd2hlbiB0aGUgd2luZG93IHJldHVybnMgb3IgY2xvc2VkLlxuICAgKiBOb3RpY2UsIHRoYXQgdGhpcyBwcm9taXNlIG1heSBuZXZlciBjb21wbGV0ZSBpZiBcInJlZGlyZWN0XCIgbW9kZSB3YXMgdXNlZC5cbiAgICpcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvcGVuKCkge1xuICAgIHJldHVybiB0aGlzLm9wZW5JbnRlcm5hbF8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0cyB1bnRpbCB0aGUgYWN0aXZpdHkgcG9ydCBpcyBjb25uZWN0ZWQgdG8gdGhlIGhvc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2hlbkNvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0ZWRQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0IHRoZSBhY3Rpdml0eSBiaW5kaW5nIGFuZCBjbGVhbnVwIGxpc3RlbmVycy5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxfKSB7XG4gICAgICB0aGlzLndpbl8uY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsXyk7XG4gICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLm1lc3Nlbmdlcl8pIHtcbiAgICAgIHRoaXMubWVzc2VuZ2VyXy5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm1lc3Nlbmdlcl8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy50YXJnZXRXaW5fKSB7XG4gICAgICAvLyBUcnkgdG8gY2xvc2UgdGhlIHBvcHVwIHdpbmRvdy4gVGhlIGhvc3Qgd2lsbCBhbHNvIHRyeSB0byBkbyB0aGUgc2FtZS5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMudGFyZ2V0V2luXy5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUuXG4gICAgICB9XG4gICAgICB0aGlzLnRhcmdldFdpbl8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFRhcmdldFdpbigpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRXaW5fO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBob3N0LlxuICAgKiBXaGV0aGVyIHRoZSBob3N0IGNhbiBvciBjYW5ub3QgcmVjZWl2ZSBhIG1lc3NhZ2UgZGVwZW5kcyBvbiB0aGUgdHlwZSBvZlxuICAgKiBob3N0IGFuZCBpdHMgc3RhdGUuIEVuc3VyZSB0aGF0IHRoZSBjb2RlIGhhcyBhbiBhbHRlcm5hdGl2ZSBwYXRoIGlmXG4gICAqIG1lc3NhZ2luZyBpcyBub3QgYXZhaWxhYmxlLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIG1lc3NhZ2UocGF5bG9hZCkge1xuICAgIHRoaXMubWVzc2VuZ2VyXy5jdXN0b21NZXNzYWdlKHBheWxvYWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSB0aGUgaG9zdC5cbiAgICogV2hldGhlciB0aGUgaG9zdCBjYW4gb3IgY2Fubm90IHJlY2VpdmUgYSBtZXNzYWdlIGRlcGVuZHMgb24gdGhlIHR5cGUgb2ZcbiAgICogaG9zdCBhbmQgaXRzIHN0YXRlLiBFbnN1cmUgdGhhdCB0aGUgY29kZSBoYXMgYW4gYWx0ZXJuYXRpdmUgcGF0aCBpZlxuICAgKiBtZXNzYWdpbmcgaXMgbm90IGF2YWlsYWJsZS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLm1lc3Nlbmdlcl8ub25DdXN0b21NZXNzYWdlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGNvbW11bmljYXRpb24gY2hhbm5lbCBvciByZXR1cm5zIGFuIGV4aXN0aW5nIG9uZS5cbiAgICogV2hldGhlciB0aGUgaG9zdCBjYW4gb3IgY2Fubm90IHJlY2VpdmUgYSBtZXNzYWdlIGRlcGVuZHMgb24gdGhlIHR5cGUgb2ZcbiAgICogaG9zdCBhbmQgaXRzIHN0YXRlLiBFbnN1cmUgdGhhdCB0aGUgY29kZSBoYXMgYW4gYWx0ZXJuYXRpdmUgcGF0aCBpZlxuICAgKiBtZXNzYWdpbmcgaXMgbm90IGF2YWlsYWJsZS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBtZXNzYWdlQ2hhbm5lbChvcHRfbmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1lc3Nlbmdlcl8uYXNrQ2hhbm5lbChvcHRfbmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgd3JhcHMgYXJvdW5kIHdpbmRvdydzIG9wZW4gbWV0aG9kLiBJdCBmaXJzdCB0cmllcyB0byBleGVjdXRlXG4gICAqIGBvcGVuYCBjYWxsIHdpdGggdGhlIHByb3ZpZGVkIHRhcmdldCBhbmQgaWYgaXQgZmFpbHMsIGl0IHJldHJpZXMgdGhlIGNhbGxcbiAgICogd2l0aCB0aGUgYF90b3BgIHRhcmdldC4gVGhpcyBpcyBuZWNlc3NhcnkgZ2l2ZW4gdGhhdCBpbiBzb21lIGVtYmVkZGluZ1xuICAgKiBzY2VuYXJpb3MsIHN1Y2ggYXMgaU9TJyBXS1dlYlZpZXcsIG5hdmlnYXRpb24gdG8gYF9ibGFua2AgYW5kIG90aGVyIHRhcmdldHNcbiAgICogaXMgYmxvY2tlZCBieSBkZWZhdWx0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9wZW5JbnRlcm5hbF8oKSB7XG4gICAgY29uc3QgZmVhdHVyZXNTdHIgPSB0aGlzLmJ1aWxkRmVhdHVyZXNfKCk7XG5cbiAgICAvLyBQcm90ZWN0aXZlbHksIHRoZSBVUkwgd2lsbCBjb250YWluIHRoZSByZXF1ZXN0IHBheWxvYWQsIHVubGVzcyBleHBsaWNpdGx5XG4gICAgLy8gZGlyZWN0ZWQgbm90IHRvIHZpYSBgc2tpcFJlcXVlc3RJblVybGAgb3B0aW9uLlxuICAgIGxldCB1cmwgPSB0aGlzLnVybF87XG4gICAgaWYgKCF0aGlzLm9wdGlvbnNfLnNraXBSZXF1ZXN0SW5VcmwpIHtcbiAgICAgIGNvbnN0IHJldHVyblVybCA9XG4gICAgICAgICAgdGhpcy5vcHRpb25zXy5yZXR1cm5VcmwgfHxcbiAgICAgICAgICByZW1vdmVGcmFnbWVudCh0aGlzLndpbl8ubG9jYXRpb24uaHJlZik7XG4gICAgICBjb25zdCByZXF1ZXN0U3RyaW5nID0gc2VyaWFsaXplUmVxdWVzdCh7XG4gICAgICAgIHJlcXVlc3RJZDogdGhpcy5yZXF1ZXN0SWRfLFxuICAgICAgICByZXR1cm5VcmwsXG4gICAgICAgIGFyZ3M6IHRoaXMuYXJnc18sXG4gICAgICB9KTtcbiAgICAgIHVybCA9IGFkZEZyYWdtZW50UGFyYW0odXJsLCAnX19XQV9fJywgcmVxdWVzdFN0cmluZyk7XG4gICAgfVxuXG4gICAgLy8gT3BlbiB0aGUgd2luZG93LlxuICAgIGxldCB0YXJnZXRXaW47XG4gICAgbGV0IG9wZW5UYXJnZXQgPSB0aGlzLm9wZW5UYXJnZXRfO1xuICAgIC8vIElFIGRvZXMgbm90IHN1cHBvcnQgQ09SUyBwb3B1cHMgLSB0aGUgcG9wdXAgaGFzIHRvIGZhbGxiYWNrIHRvIHJlZGlyZWN0XG4gICAgLy8gbW9kZS5cbiAgICBpZiAob3BlblRhcmdldCAhPSAnX3RvcCcpIHtcbiAgICAgIGlmIChpc0llQnJvd3Nlcih0aGlzLndpbl8pKSB7XG4gICAgICAgIG9wZW5UYXJnZXQgPSAnX3RvcCc7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFRyeSBmaXJzdCB3aXRoIHRoZSBzcGVjaWZpZWQgdGFyZ2V0LiBJZiB3ZSdyZSBpbnNpZGUgdGhlIFdLV2ViVmlldyBvclxuICAgIC8vIGEgc2ltaWxhciBlbnZpcm9ubWVudHMsIHRoaXMgbWV0aG9kIGlzIGV4cGVjdGVkIHRvIGZhaWwgYnkgZGVmYXVsdCBmb3JcbiAgICAvLyBhbGwgdGFyZ2V0cyBleGNlcHQgYF90b3BgLlxuICAgIHRyeSB7XG4gICAgICB0YXJnZXRXaW4gPSB0aGlzLndpbl8ub3Blbih1cmwsIG9wZW5UYXJnZXQsIGZlYXR1cmVzU3RyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUuXG4gICAgfVxuICAgIC8vIFRoZW4gdHJ5IHdpdGggYF90b3BgIHRhcmdldC5cbiAgICBpZiAoIXRhcmdldFdpbiAmJlxuICAgICAgICBvcGVuVGFyZ2V0ICE9ICdfdG9wJyAmJlxuICAgICAgICAhdGhpcy5vcHRpb25zXy5kaXNhYmxlUmVkaXJlY3RGYWxsYmFjaykge1xuICAgICAgb3BlblRhcmdldCA9ICdfdG9wJztcbiAgICAgIHRyeSB7XG4gICAgICAgIHRhcmdldFdpbiA9IHRoaXMud2luXy5vcGVuKHVybCwgb3BlblRhcmdldCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElnbm9yZS5cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgdGFyZ2V0IHdpbmRvdy5cbiAgICBpZiAodGFyZ2V0V2luKSB7XG4gICAgICB0aGlzLnRhcmdldFdpbl8gPSB0YXJnZXRXaW47XG4gICAgICBpZiAob3BlblRhcmdldCAhPSAnX3RvcCcpIHtcbiAgICAgICAgdGhpcy5zZXR1cFBvcHVwXygpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3RXaXRoRXJyb3JfKG5ldyBFcnJvcignZmFpbGVkIHRvIG9wZW4gd2luZG93JykpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiByZXN1bHQgcHJvbWlzZSwgZXZlbiB0aG91Z2ggaXQgbWF5IG5ldmVyIGNvbXBsZXRlLlxuICAgIHJldHVybiB0aGlzLnJlc3VsdFByb21pc2VfLmNhdGNoKCgpID0+IHtcbiAgICAgIC8vIElnbm9yZS4gQ2FsbCB0byB0aGUgYGFjY2VwdFJlc3VsdCgpYCBzaG91bGQgZmFpbCBpZiBuZWVkZWQuXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYnVpbGRGZWF0dXJlc18oKSB7XG4gICAgLy8gVGhlIG1heCB3aWR0aCBhbmQgaGVpZ2h0cyBhcmUgY2FsY3VsYXRlZCBhcyBmb2xsb3dpbmc6XG4gICAgLy8gTWF4U2l6ZSA9IEF2YWlsU2l6ZSAtIENvbnRyb2xzU2l6ZVxuICAgIC8vIENvbnRyb2xzU2l6ZSA9IE91dGVyU2l6ZSAtIElubmVyU2l6ZVxuICAgIGNvbnN0IHNjcmVlbiA9IHRoaXMud2luXy5zY3JlZW47XG4gICAgY29uc3QgYXZhaWxXaWR0aCA9IHNjcmVlbi5hdmFpbFdpZHRoIHx8IHNjcmVlbi53aWR0aDtcbiAgICBjb25zdCBhdmFpbEhlaWdodCA9IHNjcmVlbi5hdmFpbEhlaWdodCB8fCBzY3JlZW4uaGVpZ2h0O1xuICAgIGNvbnN0IGlzVG9wID0gdGhpcy5pc1RvcFdpbmRvd18oKTtcbiAgICBjb25zdCBpc0VkZ2UgPSBpc0VkZ2VCcm93c2VyKHRoaXMud2luXyk7XG4gICAgLy8gTGltaXQgY29udHJvbHMgdG8gMTAwcHggd2lkdGggYW5kIGhlaWdodC4gTm90aWNlIHRoYXQgaXQncyBvbmx5XG4gICAgLy8gcG9zc2libGUgdG8gY2FsY3VsYXRlIGNvbnRyb2xzIHNpemUgaW4gdGhlIHRvcCB3aW5kb3csIG5vdCBpbiBpZnJhbWVzLlxuICAgIC8vIE5vdGljZSB0aGF0IHRoZSBFZGdlIGJlaGF2aW9yIGlzIHNvbWV3aGF0IHVuaXF1ZS4gSWYgd2UgY2FuJ3QgZmluZCB0aGVcbiAgICAvLyByaWdodCB3aWR0aC9oZWlnaHQsIGl0IHdpbGwgbGF1bmNoIGluIHRoZSBmdWxsLXNjcmVlbi4gT3RoZXIgYnJvd3NlcnNcbiAgICAvLyBkZWFsIHdpdGggc3VjaCBjYXNlcyBtb3JlIGdyYWNlZnVsbHkuXG4gICAgY29uc3QgY29udHJvbHNXaWR0aCA9XG4gICAgICAgIGlzVG9wICYmIHRoaXMud2luXy5vdXRlcldpZHRoID4gdGhpcy53aW5fLmlubmVyV2lkdGggP1xuICAgICAgICBNYXRoLm1pbigxMDAsIHRoaXMud2luXy5vdXRlcldpZHRoIC0gdGhpcy53aW5fLmlubmVyV2lkdGgpIDpcbiAgICAgICAgKGlzRWRnZSA/IDEwMCA6IDApO1xuICAgIGNvbnN0IGNvbnRyb2xzSGVpZ2h0ID1cbiAgICAgICAgaXNUb3AgJiYgdGhpcy53aW5fLm91dGVySGVpZ2h0ID4gdGhpcy53aW5fLmlubmVySGVpZ2h0ID9cbiAgICAgICAgTWF0aC5taW4oMTAwLCB0aGlzLndpbl8ub3V0ZXJIZWlnaHQgLSB0aGlzLndpbl8uaW5uZXJIZWlnaHQpIDpcbiAgICAgICAgKGlzRWRnZSA/IDEwMCA6IDApO1xuICAgIC8vIFdpdGggYWxsIHRoZSBhZGp1c3RtZW50cywgYXQgbGVhc3QgNTAlIG9mIHRoZSBhdmFpbGFibGUgd2lkdGgvaGVpZ2h0XG4gICAgLy8gc2hvdWxkIGJlIG1hZGUgYXZhaWxhYmxlIHRvIGEgcG9wdXAuXG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heChhdmFpbFdpZHRoIC0gY29udHJvbHNXaWR0aCwgYXZhaWxXaWR0aCAqIDAuNSk7XG4gICAgY29uc3QgbWF4SGVpZ2h0ID0gTWF0aC5tYXgoYXZhaWxIZWlnaHQgLSBjb250cm9sc0hlaWdodCwgYXZhaWxIZWlnaHQgKiAwLjUpO1xuICAgIGxldCB3ID0gTWF0aC5mbG9vcihNYXRoLm1pbig2MDAsIG1heFdpZHRoICogMC45KSk7XG4gICAgbGV0IGggPSBNYXRoLmZsb29yKE1hdGgubWluKDYwMCwgbWF4SGVpZ2h0ICogMC45KSk7XG4gICAgaWYgKHRoaXMub3B0aW9uc18ud2lkdGgpIHtcbiAgICAgIHcgPSBNYXRoLm1pbih0aGlzLm9wdGlvbnNfLndpZHRoLCBtYXhXaWR0aCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnNfLmhlaWdodCkge1xuICAgICAgaCA9IE1hdGgubWluKHRoaXMub3B0aW9uc18uaGVpZ2h0LCBtYXhIZWlnaHQpO1xuICAgIH1cbiAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoc2NyZWVuLndpZHRoIC0gdykgLyAyKTtcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcigoc2NyZWVuLmhlaWdodCAtIGgpIC8gMik7XG4gICAgY29uc3QgZmVhdHVyZXMgPSB7XG4gICAgICAnaGVpZ2h0JzogaCxcbiAgICAgICd3aWR0aCc6IHcsXG4gICAgICAncmVzaXphYmxlJzogJ3llcycsXG4gICAgICAnc2Nyb2xsYmFycyc6ICd5ZXMnLFxuICAgIH07XG4gICAgLy8gRG8gbm90IHNldCBsZWZ0L3RvcCBpbiBFZGdlOiBpdCBmYWlscy5cbiAgICBpZiAoIWlzRWRnZSkge1xuICAgICAgZmVhdHVyZXNbJ2xlZnQnXSA9IHg7XG4gICAgICBmZWF0dXJlc1sndG9wJ10gPSB5O1xuICAgIH1cbiAgICBsZXQgZmVhdHVyZXNTdHIgPSAnJztcbiAgICBmb3IgKGNvbnN0IGYgaW4gZmVhdHVyZXMpIHtcbiAgICAgIGlmIChmZWF0dXJlc1N0cikge1xuICAgICAgICBmZWF0dXJlc1N0ciArPSAnLCc7XG4gICAgICB9XG4gICAgICBmZWF0dXJlc1N0ciArPSBgJHtmfT0ke2ZlYXR1cmVzW2ZdfWA7XG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlc1N0cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBvbmx5IGV4aXN0cyB0byBtYWtlIGlmcmFtZS90b3AgZW11bGF0aW9uIHBvc3NpYmxlIGluIHRlc3RzLlxuICAgKiBPdGhlcndpc2UgYHdpbmRvdy50b3BgIGNhbm5vdCBiZSBvdmVycmlkZGVuLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNUb3BXaW5kb3dfKCkge1xuICAgIHJldHVybiB0aGlzLndpbl8gPT0gdGhpcy53aW5fLnRvcDtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBzZXR1cFBvcHVwXygpIHtcbiAgICAvLyBLZWVwIGFsaXZlIHRvIGNhdGNoIHRoZSB3aW5kb3cgY2xvc2luZywgd2hpY2ggd291bGQgaW5kaWNhdGVcbiAgICAvLyBcImNhbmNlbFwiIHNpZ25hbC5cbiAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IHRoaXMud2luXy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrXygvKiBkZWxheUNhbmNlbCAqLyB0cnVlKTtcbiAgICB9LCA1MDApO1xuXG4gICAgLy8gU3RhcnQgdXAgbWVzc2FnaW5nLiBUaGUgbWVzc2FnaW5nIGlzIGV4cGxpY2l0bHkgYWxsb3dlZCB0byBwcm9jZWVkXG4gICAgLy8gd2l0aG91dCBvcmlnaW4gY2hlY2sgYi9jIGFsbCBhcmd1bWVudHMgaGF2ZSBhbHJlYWR5IGJlZW4gcGFzc2VkIGluXG4gICAgLy8gdGhlIFVSTCBhbmQgc3BlY2lhbCBoYW5kbGluZyBpcyBlbmZvcmNlZCB3aGVuIHJlc3VsdCBpcyBkZWxpdmVyZWQuXG4gICAgdGhpcy5tZXNzZW5nZXJfID0gbmV3IE1lc3NlbmdlcihcbiAgICAgICAgdGhpcy53aW5fLFxuICAgICAgICAvKiogQHR5cGUgeyFXaW5kb3d9ICovICh0aGlzLnRhcmdldFdpbl8pLFxuICAgICAgICAvKiB0YXJnZXRPcmlnaW4gKi8gbnVsbCxcbiAgICAgICAgLyogcmVxdWlyZVRhcmdldCAqLyB0cnVlKTtcbiAgICB0aGlzLm1lc3Nlbmdlcl8uY29ubmVjdCh0aGlzLmhhbmRsZUNvbW1hbmRfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9kZWxheUNhbmNlbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hlY2tfKG9wdF9kZWxheUNhbmNlbCkge1xuICAgIGlmICghdGhpcy50YXJnZXRXaW5fIHx8IHRoaXMudGFyZ2V0V2luXy5jbG9zZWQpIHtcbiAgICAgIGlmICh0aGlzLmhlYXJ0YmVhdEludGVydmFsXykge1xuICAgICAgICB0aGlzLndpbl8uY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsXyk7XG4gICAgICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIC8vIEdpdmUgYSBjaGFuY2UgZm9yIHRoZSByZXN1bHQgdG8gYXJyaXZlLCBidXQgb3RoZXJ3aXNlIGNvbnNpZGVyIHRoZVxuICAgICAgLy8gcmVzcG9uY2UgdG8gYmUgZW1wdHkuXG4gICAgICB0aGlzLndpbl8uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5yZXN1bHRfKEFjdGl2aXR5UmVzdWx0Q29kZS5DQU5DRUxFRCwgLyogZGF0YSAqLyBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFdpdGhFcnJvcl8oZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIG9wdF9kZWxheUNhbmNlbCA/IDMwMDAgOiAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXJyb3J9IHJlYXNvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzY29ubmVjdFdpdGhFcnJvcl8ocmVhc29uKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0UmVzb2x2ZXJfKSB7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyhQcm9taXNlLnJlamVjdChyZWFzb24pKTtcbiAgICB9XG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQWN0aXZpdHlSZXN1bHRDb2RlfSBjb2RlXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzdWx0Xyhjb2RlLCBkYXRhKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0UmVzb2x2ZXJfKSB7XG4gICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IHRoaXMubWVzc2VuZ2VyXy5pc0Nvbm5lY3RlZCgpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFjdGl2aXR5UmVzdWx0KFxuICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBBY3Rpdml0eU1vZGUuUE9QVVAsXG4gICAgICAgICAgaXNDb25uZWN0ZWQgP1xuICAgICAgICAgICAgICB0aGlzLm1lc3Nlbmdlcl8uZ2V0VGFyZ2V0T3JpZ2luKCkgOlxuICAgICAgICAgICAgICBnZXRPcmlnaW5Gcm9tVXJsKHRoaXMudXJsXyksXG4gICAgICAgICAgLyogb3JpZ2luVmVyaWZpZWQgKi8gaXNDb25uZWN0ZWQsXG4gICAgICAgICAgLyogc2VjdXJlQ2hhbm5lbCAqLyBpc0Nvbm5lY3RlZCk7XG4gICAgICByZXNvbHZlUmVzdWx0KHRoaXMud2luXywgcmVzdWx0LCB0aGlzLnJlc3VsdFJlc29sdmVyXyk7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLm1lc3Nlbmdlcl8pIHtcbiAgICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kQ29tbWFuZCgnY2xvc2UnKTtcbiAgICB9XG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3R9IHBheWxvYWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbW1hbmRfKGNtZCwgcGF5bG9hZCkge1xuICAgIGlmIChjbWQgPT0gJ2Nvbm5lY3QnKSB7XG4gICAgICAvLyBGaXJzdCBldmVyIG1lc3NhZ2UuIEluZGljYXRlcyB0aGF0IHRoZSByZWNlaXZlciBpcyBsaXN0ZW5pbmcuXG4gICAgICB0aGlzLm1lc3Nlbmdlcl8uc2VuZFN0YXJ0Q29tbWFuZCh0aGlzLmFyZ3NfKTtcbiAgICAgIHRoaXMuY29ubmVjdGVkUmVzb2x2ZXJfKCk7XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ3Jlc3VsdCcpIHtcbiAgICAgIC8vIFRoZSBsYXN0IG1lc3NhZ2UuIEluZGljYXRlcyB0aGF0IHRoZSByZXN1bHQgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gICAgICBjb25zdCBjb2RlID0gLyoqIEB0eXBlIHshQWN0aXZpdHlSZXN1bHRDb2RlfSAqLyAocGF5bG9hZFsnY29kZSddKTtcbiAgICAgIGNvbnN0IGRhdGEgPVxuICAgICAgICAgIGNvZGUgPT0gQWN0aXZpdHlSZXN1bHRDb2RlLkZBSUxFRCA/XG4gICAgICAgICAgbmV3IEVycm9yKHBheWxvYWRbJ2RhdGEnXSB8fCAnJykgOlxuICAgICAgICAgIHBheWxvYWRbJ2RhdGEnXTtcbiAgICAgIHRoaXMucmVzdWx0Xyhjb2RlLCBkYXRhKTtcbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAnY2hlY2snKSB7XG4gICAgICB0aGlzLndpbl8uc2V0VGltZW91dCgoKSA9PiB0aGlzLmNoZWNrXygpLCAyMDApO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmcmFnbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICogQHJldHVybiB7P0FjdGl2aXR5UG9ydH1cbiAqL1xuZnVuY3Rpb24gZGlzY292ZXJSZWRpcmVjdFBvcnQod2luLCBmcmFnbWVudCwgcmVxdWVzdElkKSB7XG4gIC8vIFRyeSB0byBmaW5kIHRoZSByZXN1bHQgaW4gdGhlIGZyYWdtZW50LlxuICBjb25zdCBwYXJhbU5hbWUgPSAnX19XQV9SRVNfXyc7XG4gIGNvbnN0IGZyYWdtZW50UGFyYW0gPSBnZXRRdWVyeVBhcmFtKGZyYWdtZW50LCBwYXJhbU5hbWUpO1xuICBpZiAoIWZyYWdtZW50UGFyYW0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCByZXNwb25zZSA9IC8qKiBAdHlwZSB7P09iamVjdH0gKi8gKEpTT04ucGFyc2UoZnJhZ21lbnRQYXJhbSkpO1xuICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlWydyZXF1ZXN0SWQnXSAhPSByZXF1ZXN0SWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgZm91bmQgcGFyYW0gZnJvbSB0aGUgZnJhZ21lbnQuXG4gIGNvbnN0IGNsZWFuRnJhZ21lbnQgPSByZW1vdmVRdWVyeVBhcmFtKHdpbi5sb2NhdGlvbi5oYXNoLCBwYXJhbU5hbWUpIHx8ICcnO1xuICBpZiAoY2xlYW5GcmFnbWVudCAhPSB3aW4ubG9jYXRpb24uaGFzaCkge1xuICAgIGlmICh3aW4uaGlzdG9yeSAmJiB3aW4uaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdpbi5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh3aW4uaGlzdG9yeS5zdGF0ZSwgJycsIGNsZWFuRnJhZ21lbnQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29kZSA9IHJlc3BvbnNlWydjb2RlJ107XG4gIGNvbnN0IGRhdGEgPSByZXNwb25zZVsnZGF0YSddO1xuICBjb25zdCBvcmlnaW4gPSByZXNwb25zZVsnb3JpZ2luJ107XG4gIGNvbnN0IHJlZmVycmVyT3JpZ2luID0gd2luLmRvY3VtZW50LnJlZmVycmVyICYmXG4gICAgICBnZXRPcmlnaW5Gcm9tVXJsKHdpbi5kb2N1bWVudC5yZWZlcnJlcik7XG4gIGNvbnN0IG9yaWdpblZlcmlmaWVkID0gb3JpZ2luID09IHJlZmVycmVyT3JpZ2luO1xuICByZXR1cm4gbmV3IEFjdGl2aXR5V2luZG93UmVkaXJlY3RQb3J0KFxuICAgICAgd2luLFxuICAgICAgY29kZSxcbiAgICAgIGRhdGEsXG4gICAgICBvcmlnaW4sXG4gICAgICBvcmlnaW5WZXJpZmllZCk7XG59XG5cblxuLyoqXG4gKiBUaGUgYEFjdGl2aXR5UG9ydGAgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBzdGFuZGFsb25lIHdpbmRvdyBhY3Rpdml0eVxuICogY2xpZW50IGV4ZWN1dGVkIGFzIGEgcG9wdXAuXG4gKlxuICogQGltcGxlbWVudHMge0FjdGl2aXR5UG9ydH1cbiAqL1xuY2xhc3MgQWN0aXZpdHlXaW5kb3dSZWRpcmVjdFBvcnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyFBY3Rpdml0eVJlc3VsdENvZGV9IGNvZGVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRPcmlnaW5cbiAgICogQHBhcmFtIHtib29sZWFufSB0YXJnZXRPcmlnaW5WZXJpZmllZFxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBjb2RlLCBkYXRhLCB0YXJnZXRPcmlnaW4sIHRhcmdldE9yaWdpblZlcmlmaWVkKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFjdGl2aXR5UmVzdWx0Q29kZX0gKi9cbiAgICB0aGlzLmNvZGVfID0gY29kZTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHsqfSAqL1xuICAgIHRoaXMuZGF0YV8gPSBkYXRhO1xuICAgIC8qKiBAcHJpdmF0ZSB7c3RyaW5nfSAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IHRhcmdldE9yaWdpbjtcbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy50YXJnZXRPcmlnaW5WZXJpZmllZF8gPSB0YXJnZXRPcmlnaW5WZXJpZmllZDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0TW9kZSgpIHtcbiAgICByZXR1cm4gQWN0aXZpdHlNb2RlLlJFRElSRUNUO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IEFjdGl2aXR5UmVzdWx0KFxuICAgICAgICB0aGlzLmNvZGVfLFxuICAgICAgICB0aGlzLmRhdGFfLFxuICAgICAgICBBY3Rpdml0eU1vZGUuUkVESVJFQ1QsXG4gICAgICAgIHRoaXMudGFyZ2V0T3JpZ2luXyxcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5WZXJpZmllZF8sXG4gICAgICAgIC8qIHNlY3VyZUNoYW5uZWwgKi8gZmFsc2UpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHJlc29sdmVSZXN1bHQodGhpcy53aW5fLCByZXN1bHQsIHJlc29sdmUpO1xuICAgIH0pO1xuICB9XG59XG5cblxuXG5cbi8qKlxuICogVGhlIHBhZ2UtbGV2ZWwgYWN0aXZpdGllcyBtYW5hZ2VyIHBvcnRzLiBUaGlzIGNsYXNzIGlzIGludGVuZGVkIHRvIGJlIHVzZWRcbiAqIGFzIGEgc2luZ2xldG9uLiBJdCBjYW4gc3RhcnQgYWN0aXZpdGllcyBvZiBhbGwgbW9kZXM6IGlmcmFtZSwgcG9wdXAsIGFuZFxuICogcmVkaXJlY3QuXG4gKi9cbmNsYXNzIEFjdGl2aXR5UG9ydHMge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudmVyc2lvbiA9ICcxLjI0JztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZnJhZ21lbnRfID0gd2luLmxvY2F0aW9uLmhhc2g7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhQXJyYXk8ZnVuY3Rpb24oIUFjdGl2aXR5UG9ydCk+Pn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcXVlc3RIYW5kbGVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHQgYnVmZmVyIGlzIGluZGV4ZWQgYnkgYHJlcXVlc3RJZGAuXG4gICAgICogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIUFjdGl2aXR5UG9ydD59XG4gICAgICovXG4gICAgdGhpcy5yZXN1bHRCdWZmZXJfID0ge307XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbighRXJyb3IpfSAqL1xuICAgIHRoaXMucmVkaXJlY3RFcnJvclJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgeyFQcm9taXNlPCFFcnJvcj59ICovXG4gICAgdGhpcy5yZWRpcmVjdEVycm9yUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMucmVkaXJlY3RFcnJvclJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gYWN0aXZpdHkgd2l0aGluIHRoZSBzcGVjaWZpZWQgaWZyYW1lLlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5SWZyYW1lUG9ydD59XG4gICAqL1xuICBvcGVuSWZyYW1lKGlmcmFtZSwgdXJsLCBvcHRfYXJncykge1xuICAgIGNvbnN0IHBvcnQgPSBuZXcgQWN0aXZpdHlJZnJhbWVQb3J0KGlmcmFtZSwgdXJsLCBvcHRfYXJncyk7XG4gICAgcmV0dXJuIHBvcnQuY29ubmVjdCgpLnRoZW4oKCkgPT4gcG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gYWN0aXZpdHkgaW4gYSBzZXBhcmF0ZSB3aW5kb3cuIFRoZSByZXN1bHQgd2lsbCBiZSBkZWxpdmVyZWRcbiAgICogdG8gdGhlIGBvblJlc3VsdGAgY2FsbGJhY2suXG4gICAqXG4gICAqIFRoZSBhY3Rpdml0eSBjYW4gYmUgb3BlbmVkIGluIHR3byBtb2RlczogXCJwb3B1cFwiIGFuZCBcInJlZGlyZWN0XCIuIFRoaXNcbiAgICogZGVwZW5kcyBvbiB0aGUgYHRhcmdldGAgdmFsdWUsIGJ1dCBhbHNvIG9uIHRoZSBicm93c2VyL2Vudmlyb25tZW50LlxuICAgKlxuICAgKiBUaGUgYWxsb3dlZCBgdGFyZ2V0YCB2YWx1ZXMgYXJlIGBfYmxhbmtgLCBgX3RvcGAgYW5kIG5hbWUgdGFyZ2V0cy4gVGhlXG4gICAqIGBfc2VsZmAsIGBfcGFyZW50YCBhbmQgc2ltaWxhciB0YXJnZXRzIGFyZSBub3QgYWxsb3dlZC5cbiAgICpcbiAgICogVGhlIGBfdG9wYCB0YXJnZXQgaW5kaWNhdGVzIHRoYXQgdGhlIGFjdGl2aXR5IHNob3VsZCBiZSBvcGVuZWQgYXMgYVxuICAgKiBcInJlZGlyZWN0XCIsIHdoaWxlIG90aGVyIHRhcmdldHMgaW5kaWNhdGUgdGhhdCB0aGUgYWN0aXZpdHkgc2hvdWxkIGJlXG4gICAqIG9wZW5lZCBhcyBhIHBvcHVwLiBUaGUgYWN0aXZpdHkgY2xpZW50IHdpbGwgdHJ5IHRvIGhvbm9yIHRoZSByZXF1ZXN0ZWRcbiAgICogdGFyZ2V0LiBIb3dldmVyLCBpdCdzIG5vdCBhbHdheXMgcG9zc2libGUuIFNvbWUgZW52aXJvbm1lbnRzIGRvIG5vdFxuICAgKiBhbGxvdyBwb3B1cHMgYW5kIHRoZXkgZWl0aGVyIGZvcmNlIHJlZGlyZWN0IG9yIGZhaWwgdGhlIHdpbmRvdyBvcGVuXG4gICAqIHJlcXVlc3QuIEluIHRoaXMgY2FzZSwgdGhlIGFjdGl2aXR5IHdpbGwgdHJ5IHRvIGZhbGxiYWNrIHRvIHRoZSBcInJlZGlyZWN0XCJcbiAgICogbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICogQHBhcmFtIHs/QWN0aXZpdHlPcGVuT3B0aW9ucz19IG9wdF9vcHRpb25zXG4gICAqIEByZXR1cm4ge3t0YXJnZXRXaW46ID9XaW5kb3d9fVxuICAgKi9cbiAgb3BlbihyZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpIHtcbiAgICBjb25zdCBwb3J0ID0gdGhpcy5vcGVuV2luXyhyZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpO1xuICAgIHJldHVybiB7dGFyZ2V0V2luOiBwb3J0LmdldFRhcmdldFdpbigpfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhbiBhY3Rpdml0eSBpbiBhIHNlcGFyYXRlIHdpbmRvdyBhbmQgdHJpZXMgdG8gc2V0dXAgbWVzc2FnaW5nIHdpdGhcbiAgICogdGhpcyB3aW5kb3cuXG4gICAqXG4gICAqIFNlZSBgb3BlbigpYCBtZXRob2QgZm9yIG1vcmUgZGV0YWlscywgaW5jbHVkaW5nIGBvblJlc3VsdGAgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0XG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEBwYXJhbSB7P0FjdGl2aXR5T3Blbk9wdGlvbnM9fSBvcHRfb3B0aW9uc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhQWN0aXZpdHlNZXNzYWdpbmdQb3J0Pn1cbiAgICovXG4gIG9wZW5XaXRoTWVzc2FnaW5nKHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIG9wdF9hcmdzLCBvcHRfb3B0aW9ucykge1xuICAgIGNvbnN0IHBvcnQgPSB0aGlzLm9wZW5XaW5fKHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIG9wdF9hcmdzLCBvcHRfb3B0aW9ucyk7XG4gICAgcmV0dXJuIHBvcnQud2hlbkNvbm5lY3RlZCgpLnRoZW4oKCkgPT4gcG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBjYWxsYmFjayBmb3IgdGhlIHJlc3VsdCBvZiB0aGUgYWN0aXZpdHkgb3BlbmVkIHdpdGggdGhlXG4gICAqIHNwZWNpZmllZCBgcmVxdWVzdElkYCAoc2VlIHRoZSBgb3BlbigpYCBtZXRob2QpLiBUaGUgY2FsbGJhY2sgaXMgYVxuICAgKiBmdW5jdGlvbiB0aGF0IHRha2VzIGEgc2luZ2xlIGBBY3Rpdml0eVBvcnRgIGFyZ3VtZW50LiBUaGUgY2xpZW50XG4gICAqIGNhbiB1c2UgdGhpcyBvYmplY3QgdG8gdmVyaWZ5IHRoZSBwb3J0IHVzaW5nIGl0J3Mgb3JpZ2luLCB2ZXJpZmllZCBhbmRcbiAgICogc2VjdXJlIGNoYW5uZWwgZmxhZ3MuIFRoZW4gdGhlIGNsaWVudCBjYW4gY2FsbFxuICAgKiBgQWN0aXZpdHlQb3J0LmFjY2VwdFJlc3VsdCgpYCBtZXRob2QgdG8gYWNjZXB0IHRoZSByZXN1bHQuXG4gICAqXG4gICAqIFRoZSBhY3Rpdml0eSByZXN1bHQgaXMgaGFuZGxlZCB2aWEgYSBzZXBhcmF0ZSBjYWxsYmFjayBiZWNhdXNlIG9mIGFcbiAgICogcG9zc2libGUgcmVkaXJlY3QuIFNvIHVzZSBvZiBkaXJlY3QgY2FsbGJhY2tzIGFuZC9vciBwcm9taXNlcyBpcyBub3RcbiAgICogcG9zc2libGUgaW4gdGhhdCBjYXNlLlxuICAgKlxuICAgKiBBIHR5cGljYWwgaW1wbGVtZW50YXRpb24gd291bGQgbG9vayBsaWtlOlxuICAgKiBgYGBcbiAgICogcG9ydHMub25SZXN1bHQoJ3JlcXVlc3QxJywgZnVuY3Rpb24ocG9ydCkge1xuICAgKiAgIHBvcnQuYWNjZXB0UmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICogICAgIC8vIE9ubHkgdmVyaWZpZWQgb3JpZ2lucyBhcmUgYWxsb3dlZC5cbiAgICogICAgIGlmIChyZXN1bHQub3JpZ2luID09IGV4cGVjdGVkT3JpZ2luICYmXG4gICAqICAgICAgICAgcmVzdWx0Lm9yaWdpblZlcmlmaWVkICYmXG4gICAqICAgICAgICAgcmVzdWx0LnNlY3VyZUNoYW5uZWwpIHtcbiAgICogICAgICAgaGFuZGxlUmVzdWx0Rm9yUmVxdWVzdDEocmVzdWx0KTtcbiAgICogICAgIH1cbiAgICogICB9KTtcbiAgICogfSlcbiAgICpcbiAgICogcG9ydHMub3BlbigncmVxdWVzdDEnLCByZXF1ZXN0MVVybCwgJ19ibGFuaycpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFBY3Rpdml0eVBvcnQpfSBjYWxsYmFja1xuICAgKi9cbiAgb25SZXN1bHQocmVxdWVzdElkLCBjYWxsYmFjaykge1xuICAgIGxldCBoYW5kbGVycyA9IHRoaXMucmVxdWVzdEhhbmRsZXJzX1tyZXF1ZXN0SWRdO1xuICAgIGlmICghaGFuZGxlcnMpIHtcbiAgICAgIGhhbmRsZXJzID0gW107XG4gICAgICB0aGlzLnJlcXVlc3RIYW5kbGVyc19bcmVxdWVzdElkXSA9IGhhbmRsZXJzO1xuICAgIH1cbiAgICBoYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcblxuICAgIC8vIENvbnN1bWUgYXZhaWxhYmxlIHJlc3VsdC5cbiAgICBjb25zdCBhdmFpbGFibGVSZXN1bHQgPSB0aGlzLmRpc2NvdmVyUmVzdWx0XyhyZXF1ZXN0SWQpO1xuICAgIGlmIChhdmFpbGFibGVSZXN1bHQpIHtcbiAgICAgIHRoaXMuY29uc3VtZVJlc3VsdF8oYXZhaWxhYmxlUmVzdWx0LCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVycm9yKX0gaGFuZGxlclxuICAgKi9cbiAgb25SZWRpcmVjdEVycm9yKGhhbmRsZXIpIHtcbiAgICB0aGlzLnJlZGlyZWN0RXJyb3JQcm9taXNlXy50aGVuKGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0XG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEBwYXJhbSB7P0FjdGl2aXR5T3Blbk9wdGlvbnM9fSBvcHRfb3B0aW9uc1xuICAgKiBAcmV0dXJuIHshQWN0aXZpdHlXaW5kb3dQb3J0fVxuICAgKi9cbiAgb3Blbldpbl8ocmVxdWVzdElkLCB1cmwsIHRhcmdldCwgb3B0X2FyZ3MsIG9wdF9vcHRpb25zKSB7XG4gICAgY29uc3QgcG9ydCA9IG5ldyBBY3Rpdml0eVdpbmRvd1BvcnQoXG4gICAgICAgIHRoaXMud2luXywgcmVxdWVzdElkLCB1cmwsIHRhcmdldCwgb3B0X2FyZ3MsIG9wdF9vcHRpb25zKTtcbiAgICBwb3J0Lm9wZW4oKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIEF3YWl0IHJlc3VsdCBpZiBwb3NzaWJsZS4gTm90aWNlIHRoYXQgd2hlbiBmYWxsaW5nIGJhY2sgdG8gXCJyZWRpcmVjdFwiLFxuICAgICAgLy8gdGhlIHJlc3VsdCB3aWxsIG5ldmVyIGFycml2ZSB0aHJvdWdoIHRoaXMgcG9ydC5cbiAgICAgIHRoaXMuY29uc3VtZVJlc3VsdEFsbF8ocmVxdWVzdElkLCBwb3J0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gICAqIEByZXR1cm4gez9BY3Rpdml0eVBvcnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNjb3ZlclJlc3VsdF8ocmVxdWVzdElkKSB7XG4gICAgbGV0IHBvcnQgPSB0aGlzLnJlc3VsdEJ1ZmZlcl9bcmVxdWVzdElkXTtcbiAgICBpZiAoIXBvcnQgJiYgdGhpcy5mcmFnbWVudF8pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBvcnQgPSBkaXNjb3ZlclJlZGlyZWN0UG9ydChcbiAgICAgICAgICAgIHRoaXMud2luXywgdGhpcy5mcmFnbWVudF8sIHJlcXVlc3RJZCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93QXN5bmMoZSk7XG4gICAgICAgIHRoaXMucmVkaXJlY3RFcnJvclJlc29sdmVyXyhlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwb3J0KSB7XG4gICAgICAgIHRoaXMucmVzdWx0QnVmZmVyX1tyZXF1ZXN0SWRdID0gcG9ydDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvcnQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQWN0aXZpdHlQb3J0fSBwb3J0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUFjdGl2aXR5UG9ydCl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdW1lUmVzdWx0Xyhwb3J0LCBjYWxsYmFjaykge1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FsbGJhY2socG9ydCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcGFyYW0geyFBY3Rpdml0eVBvcnR9IHBvcnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN1bWVSZXN1bHRBbGxfKHJlcXVlc3RJZCwgcG9ydCkge1xuICAgIC8vIEZpbmQgYW5kIGV4ZWN1dGUgaGFuZGxlcnMuXG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLnJlcXVlc3RIYW5kbGVyc19bcmVxdWVzdElkXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XG4gICAgICAgIHRoaXMuY29uc3VtZVJlc3VsdF8ocG9ydCwgaGFuZGxlcik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gQnVmZmVyIHRoZSByZXN1bHQgZm9yIGNhbGxiYWNrcyB0aGF0IG1heSBhcnJpdmUgaW4gdGhlIGZ1dHVyZS5cbiAgICB0aGlzLnJlc3VsdEJ1ZmZlcl9bcmVxdWVzdElkXSA9IHBvcnQ7XG4gIH1cbn1cblxuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBBY3Rpdml0eVBvcnRzLFxuICBBY3Rpdml0eUlmcmFtZVBvcnQsXG4gIEFjdGl2aXR5TWVzc2FnaW5nUG9ydCxcbiAgQWN0aXZpdHlNb2RlLFxuICBBY3Rpdml0eU9wZW5PcHRpb25zLFxuICBBY3Rpdml0eVBvcnQsXG4gIEFjdGl2aXR5UmVxdWVzdCxcbiAgQWN0aXZpdHlSZXN1bHQsXG4gIEFjdGl2aXR5UmVzdWx0Q29kZSxcbiAgQWN0aXZpdHlXaW5kb3dQb3J0LFxuICBjcmVhdGVBYm9ydEVycm9yLFxuICBpc0Fib3J0RXJyb3IsXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FuYWx5dGljc0V2ZW50LEV2ZW50T3JpZ2luYXRvcn0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcblxuLyoqIEBlbnVtIHtudW1iZXJ9ICAqL1xuZXhwb3J0IGNvbnN0IEZpbHRlclJlc3VsdCA9IHtcbiAgLyoqIFRoZSBldmVudCBpcyBhbGxvd2VkIHRvIHByb2NlZWQgdG8gdGhlIGxpc3RlbmVycy4gKi9cbiAgUFJPQ0VTU19FVkVOVDogMCxcbiAgLyoqIFRoZSBldmVudCBpcyBjYW5jZWxlZCBhbmQgdGhlIGxpc3RlbmVycyBhcmUgbm90IGluZm9ybWVkIGFib3V0IGl0LiAqL1xuICBDQU5DRUxfRVZFTlQ6IDEsXG59O1xuXG4vKipcbiAqIERlZmluZXMgYSBjbGllbnQgZXZlbnQgaW4gU3dHXG4gKiBQcm9wZXJ0aWVzOlxuICogLSBldmVudFR5cGU6IFJlcXVpcmVkLiBUaGUgQW5hbHl0aWNzRXZlbnQgdHlwZSB0aGF0IG9jY3VycmVkLlxuICogLSBldmVudE9yaWdpbmF0b3I6IFJlcXVpcmVkLiAgVGhlIGNvZGViYXNlIHRoYXQgaW5pdGlhdGVkIHRoZSBldmVudC5cbiAqIC0gaXNGcm9tVXNlckFjdGlvbjogT3B0aW9uYWwuICBUcnVlIGlmIHRoZSB1c2VyIHRvb2sgYW4gYWN0aW9uIHRvIGdlbmVyYXRlXG4gKiAgIHRoZSBldmVudC5cbiAqIC0gYWRkaXRpb25hbFBhcmFtZXRlcnM6IE9wdGlvbmFsLiAgQSBKU09OIG9iamVjdCB0byBzdG9yZSBnZW5lcmljIGRhdGEuXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gKiAgICBldmVudFR5cGU6ICFBbmFseXRpY3NFdmVudCxcbiAqICAgIGV2ZW50T3JpZ2luYXRvcjogIUV2ZW50T3JpZ2luYXRvcixcbiAqICAgIGlzRnJvbVVzZXJBY3Rpb246ID9ib29sZWFuLFxuICogICAgYWRkaXRpb25hbFBhcmFtZXRlcnM6ID9PYmplY3QsXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IENsaWVudEV2ZW50O1xuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIENsaWVudEV2ZW50TWFuYWdlckFwaSB7XG4gIC8qKlxuICAgKiBDYWxsIHRoaXMgZnVuY3Rpb24gdG8gbG9nIGFuIGV2ZW50LiBUaGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgd2lsbCBiZVxuICAgKiBpbnZva2VkIHVubGVzcyB0aGUgZXZlbnQgaXMgZmlsdGVyZWQuXG4gICAqIEBwYXJhbSB7IWZ1bmN0aW9uKCFDbGllbnRFdmVudCl9IGxpc3RlbmVyXG4gICAqL1xuICByZWdpc3RlckV2ZW50TGlzdGVuZXIobGlzdGVuZXIpIHsgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZpbHRlcmVyIGZvciBldmVudHMgaWYgeW91IG5lZWQgdG8gcG90ZW50aWFsbHkgcHJldmVudCB0aGVcbiAgICogbGlzdGVuZXJzIGZyb20gaGVhcmluZyBhYm91dCBpdC4gIEEgZmlsdGVyZXIgc2hvdWxkIHJldHVyblxuICAgKiBGaWx0ZXJSZXN1bHQuQ0FOQ0VMX0VWRU5UIHRvIHByZXZlbnQgbGlzdGVuZXJzIGZyb20gaGVhcmluZyBhYm91dCB0aGVcbiAgICogZXZlbnQuXG4gICAqIEBwYXJhbSB7IWZ1bmN0aW9uKCFDbGllbnRFdmVudCk6RmlsdGVyUmVzdWx0fSBmaWx0ZXJlclxuICAgKi9cbiAgcmVnaXN0ZXJFdmVudEZpbHRlcmVyKGZpbHRlcmVyKSB7IH1cblxuICAvKipcbiAgICogQ2FsbCB0aGlzIGZ1bmN0aW9uIHRvIGxvZyBhbiBldmVudC4gIEl0IHdpbGwgaW1tZWRpYXRlbHkgdGhyb3cgYW4gZXJyb3IgaWZcbiAgICogdGhlIGV2ZW50IGlzIGludmFsaWQuICBJdCB3aWxsIHRoZW4gYXN5bmNocm9ub3VzbHkgY2FsbCB0aGUgZmlsdGVyZXJzIGFuZFxuICAgKiBzdG9wIHRoZSBldmVudCBpZiBhIGZpbHRlcmVyIGNhbmNlbHMgaXQuICBBZnRlciB0aGF0LCBpdCB3aWxsIGNhbGwgZWFjaFxuICAgKiBsaXN0ZW5lciBhc3luY2hyb25vdXNseS5cbiAgICogQHBhcmFtIHshQ2xpZW50RXZlbnR9IGV2ZW50XG4gICAqL1xuICBsb2dFdmVudChldmVudCkgeyB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RW50aXRsZW1lbnRzfSBmcm9tICcuL2VudGl0bGVtZW50cyc7XG5pbXBvcnQge1B1cmNoYXNlRGF0YX0gZnJvbSAnLi9zdWJzY3JpYmUtcmVzcG9uc2UnO1xuaW1wb3J0IHtVc2VyRGF0YX0gZnJvbSAnLi91c2VyLWRhdGEnO1xuXG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gZW50aXRsZW1lbnRzIC0gdGhlIGN1cnJlbnQgZW50aXRsZW1lbnRzLlxuICogLSBjb25zZW50IC0gd2hldGhlciB0byBhc2sgdGhlIHVzZXIgZm9yIGFjY291bnQgY3JlYXRpb24gY29uc2VudC5cbiAqICAgRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgZW50aXRsZW1lbnRzOiAoP0VudGl0bGVtZW50c3x1bmRlZmluZWQpLFxuICogICBjb25zZW50OiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3Q7XG5cblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzfSBlbnRpdGxlbWVudHNcbiAgICogQHBhcmFtIHshVXNlckRhdGF9IHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7IUFycmF5PCFQdXJjaGFzZURhdGE+fSBwdXJjaGFzZURhdGFMaXN0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY29tcGxldGVIYW5kbGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbnRpdGxlbWVudHMsIHVzZXJEYXRhLCBwdXJjaGFzZURhdGFMaXN0LCBjb21wbGV0ZUhhbmRsZXIpIHtcbiAgICAvKiogQGNvbnN0IHshRW50aXRsZW1lbnRzfSAqL1xuICAgIHRoaXMuZW50aXRsZW1lbnRzID0gZW50aXRsZW1lbnRzO1xuICAgIC8qKiBAY29uc3QgeyFVc2VyRGF0YX0gKi9cbiAgICB0aGlzLnVzZXJEYXRhID0gdXNlckRhdGE7XG4gICAgLyoqIEBjb25zdCB7IUFycmF5PCFQdXJjaGFzZURhdGE+fSAqL1xuICAgIHRoaXMucHVyY2hhc2VEYXRhTGlzdCA9IHB1cmNoYXNlRGF0YUxpc3Q7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBkZXByZWNhdGUuXG4gICAgLyoqIEBjb25zdCB7IVB1cmNoYXNlRGF0YX0gKi9cbiAgICB0aGlzLnB1cmNoYXNlRGF0YSA9IHB1cmNoYXNlRGF0YUxpc3RbMF07XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbXBsZXRlSGFuZGxlcl8gPSBjb21wbGV0ZUhhbmRsZXI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IURlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2V9XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IERlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2UoXG4gICAgICAgIHRoaXMuZW50aXRsZW1lbnRzLFxuICAgICAgICB0aGlzLnVzZXJEYXRhLFxuICAgICAgICB0aGlzLnB1cmNoYXNlRGF0YUxpc3QsXG4gICAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyXyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdlbnRpdGxlbWVudHMnOiB0aGlzLmVudGl0bGVtZW50cy5qc29uKCksXG4gICAgICAndXNlckRhdGEnOiB0aGlzLnVzZXJEYXRhLmpzb24oKSxcbiAgICAgICdwdXJjaGFzZURhdGFMaXN0JzogdGhpcy5wdXJjaGFzZURhdGFMaXN0Lm1hcChwZCA9PiBwZC5qc29uKCkpLFxuICAgICAgLy8gVE9ETyhkdm95dGVua28pOiBkZXByZWNhdGUuXG4gICAgICAncHVyY2hhc2VEYXRhJzogdGhpcy5wdXJjaGFzZURhdGEuanNvbigpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQWxsb3dzIHRoZSByZWNlaXZpbmcgc2l0ZSB0byBjb21wbGV0ZS9hY2tub3dsZWRnZSB0aGF0IGl0IHJlZ2lzdGVyZWRcbiAgICogdGhlIHN1YnNjcmlwdGlvbiBpbmZvLiBUaGUgdHlwaWNhbCBhY3Rpb24gd291bGQgYmUgdG8gY3JlYXRlIGFuXG4gICAqIGFjY291bnQgKG9yIG1hdGNoIGFuIGV4aXN0aW5nIG9uZSkgYW5kIGFzc29jaWF0ZWQgdGhlIHN1YnNjcmlwdGlvbiB3aXRoXG4gICAqIHRoYXQgYWNjb3VudC5cbiAgICpcbiAgICogU3dHIHdpbGwgZGlzcGxheSBwcm9ncmVzcyBpbmRpY2F0b3IgdW50aWwgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGFuZFxuICAgKiB1cG9uIHJlY2VpdmluZyB0aGlzIGNhbGwgd2lsbCBzaG93IHRoZSBjb25maXJtYXRpb24gdG8gdGhlIHVzZXIuXG4gICAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIHdpbGwgeWllbGQgb25jZSB0aGUgdXNlciBjbG9zZXNcbiAgICogdGhlIGNvbmZpcm1hdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wbGV0ZUhhbmRsZXJfKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFRoZSBob2xkZXIgb2YgdGhlIGVudGl0bGVtZW50cyBmb3IgYSBzZXJ2aWNlLlxuICovXG5leHBvcnQgY2xhc3MgRW50aXRsZW1lbnRzIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0geyFBcnJheTwhRW50aXRsZW1lbnQ+fSBlbnRpdGxlbWVudHNcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBjdXJyZW50UHJvZHVjdFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbnRpdGxlbWVudHMpfSBhY2tIYW5kbGVyXG4gICAqIEBwYXJhbSB7P2Jvb2xlYW58dW5kZWZpbmVkfSBpc1JlYWR5VG9QYXlcbiAgICogQHBhcmFtIHs/c3RyaW5nfHVuZGVmaW5lZH0gZGVjcnlwdGVkRG9jdW1lbnRLZXlcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHJhdywgZW50aXRsZW1lbnRzLCBjdXJyZW50UHJvZHVjdCwgYWNrSGFuZGxlcixcbiAgICBpc1JlYWR5VG9QYXksIGRlY3J5cHRlZERvY3VtZW50S2V5KSB7XG5cbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5yYXcgPSByYXc7XG4gICAgLyoqIEBjb25zdCB7IUFycmF5PCFFbnRpdGxlbWVudD59ICovXG4gICAgdGhpcy5lbnRpdGxlbWVudHMgPSBlbnRpdGxlbWVudHM7XG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzUmVhZHlUb1BheSA9IGlzUmVhZHlUb1BheSB8fCBmYWxzZTtcbiAgICAvKiogQGNvbnN0IHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuZGVjcnlwdGVkRG9jdW1lbnRLZXkgPSBkZWNyeXB0ZWREb2N1bWVudEtleSB8fCBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnByb2R1Y3RfID0gY3VycmVudFByb2R1Y3Q7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oIUVudGl0bGVtZW50cyl9ICovXG4gICAgdGhpcy5hY2tIYW5kbGVyXyA9IGFja0hhbmRsZXI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50c31cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgRW50aXRsZW1lbnRzKFxuICAgICAgICB0aGlzLnNlcnZpY2UsXG4gICAgICAgIHRoaXMucmF3LFxuICAgICAgICB0aGlzLmVudGl0bGVtZW50cy5tYXAoZW50ID0+IGVudC5jbG9uZSgpKSxcbiAgICAgICAgdGhpcy5wcm9kdWN0XyxcbiAgICAgICAgdGhpcy5hY2tIYW5kbGVyXyxcbiAgICAgICAgdGhpcy5pc1JlYWR5VG9QYXksXG4gICAgICAgIHRoaXMuZGVjcnlwdGVkRG9jdW1lbnRLZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnc2VydmljZSc6IHRoaXMuc2VydmljZSxcbiAgICAgICdlbnRpdGxlbWVudHMnOiB0aGlzLmVudGl0bGVtZW50cy5tYXAoaXRlbSA9PiBpdGVtLmpzb24oKSksXG4gICAgICAnaXNSZWFkeVRvUGF5JzogdGhpcy5pc1JlYWR5VG9QYXksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9zb3VyY2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuYWJsZXNUaGlzKG9wdF9zb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5lbmFibGVzKHRoaXMucHJvZHVjdF8sIG9wdF9zb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3NvdXJjZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZW5hYmxlc0FueShvcHRfc291cmNlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0bGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuZW50aXRsZW1lbnRzW2ldLnByb2R1Y3RzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAoIW9wdF9zb3VyY2UgfHwgb3B0X3NvdXJjZSA9PSB0aGlzLmVudGl0bGVtZW50c1tpXS5zb3VyY2UpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGVzZSBlbnRpdGxlbWVudHMgZW5hYmxlIHRoZSBzcGVjaWZpZWQgcHJvZHVjdCwgb3B0aW9uYWxseSBhbHNvXG4gICAqIHJlc3RyaWN0aW5nIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gcHJvZHVjdFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9zb3VyY2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuYWJsZXMocHJvZHVjdCwgb3B0X3NvdXJjZSkge1xuICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gISF0aGlzLmdldEVudGl0bGVtZW50Rm9yKHByb2R1Y3QsIG9wdF9zb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGVudGl0bGVtZW50IGZvciB0aGUgY3VycmVudCBwcm9kdWN0LFxuICAgKiBvcHRpb25hbGx5IGFsc28gbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBzb3VyY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3NvdXJjZVxuICAgKiBAcmV0dXJuIHs/RW50aXRsZW1lbnR9XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudEZvclRoaXMob3B0X3NvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLmdldEVudGl0bGVtZW50Rm9yKHRoaXMucHJvZHVjdF8sIG9wdF9zb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGVudGl0bGVtZW50IGZvciB0aGUgc3BlY2lmaWVkIHByb2R1Y3QsXG4gICAqIG9wdGlvbmFsbHkgYWxzbyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHNvdXJjZS5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBwcm9kdWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3NvdXJjZVxuICAgKiBAcmV0dXJuIHs/RW50aXRsZW1lbnR9XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudEZvcihwcm9kdWN0LCBvcHRfc291cmNlKSB7XG4gICAgaWYgKHByb2R1Y3QgJiYgdGhpcy5lbnRpdGxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0bGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5lbnRpdGxlbWVudHNbaV0uZW5hYmxlcyhwcm9kdWN0KSAmJlxuICAgICAgICAgICAgKCFvcHRfc291cmNlIHx8IG9wdF9zb3VyY2UgPT0gdGhpcy5lbnRpdGxlbWVudHNbaV0uc291cmNlKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmVudGl0bGVtZW50c1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZyBlbnRpdGxlbWVudCBmb3IgdGhlIHNwZWNpZmllZCBzb3VyY2Ugdy9vXG4gICAqIG1hdGNoaW5nIGFueSBzcGVjaWZpYyBwcm9kdWN0cy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVxuICAgKiBAcmV0dXJuIHs/RW50aXRsZW1lbnR9XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudEZvclNvdXJjZShzb3VyY2UpIHtcbiAgICBpZiAodGhpcy5lbnRpdGxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0bGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5lbnRpdGxlbWVudHNbaV0uc3Vic2NyaXB0aW9uVG9rZW4gJiZcbiAgICAgICAgICAgIChzb3VyY2UgPT0gdGhpcy5lbnRpdGxlbWVudHNbaV0uc291cmNlKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmVudGl0bGVtZW50c1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIDNwIHNpdGUgc2hvdWxkIGNhbGwgdGhpcyBtZXRob2QgdG8gYWNrbm93bGVkZ2UgdGhhdCBpdCBcInNhd1wiIGFuZFxuICAgKiBcInVuZGVyc3Rvb2RcIiBlbnRpdGxlbWVudHMuXG4gICAqL1xuICBhY2soKSB7XG4gICAgdGhpcy5hY2tIYW5kbGVyXyh0aGlzKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIHNpbmdsZSBlbnRpdGxlbWVudCBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBFbnRpdGxlbWVudCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gcHJvZHVjdHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvblRva2VuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UsIHByb2R1Y3RzLCBzdWJzY3JpcHRpb25Ub2tlbikge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvKiogQGNvbnN0IHshQXJyYXk8c3RyaW5nPn0gKi9cbiAgICB0aGlzLnByb2R1Y3RzID0gcHJvZHVjdHM7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uVG9rZW4gPSBzdWJzY3JpcHRpb25Ub2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnR9XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50KFxuICAgICAgICB0aGlzLnNvdXJjZSxcbiAgICAgICAgdGhpcy5wcm9kdWN0cy5zbGljZSgwKSxcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25Ub2tlbik7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdzb3VyY2UnOiB0aGlzLnNvdXJjZSxcbiAgICAgICdwcm9kdWN0cyc6IHRoaXMucHJvZHVjdHMsXG4gICAgICAnc3Vic2NyaXB0aW9uVG9rZW4nOiB0aGlzLnN1YnNjcmlwdGlvblRva2VuLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBwcm9kdWN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlbmFibGVzKHByb2R1Y3QpIHtcbiAgICBpZiAoIXByb2R1Y3QpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gV2lsZGNhcmQgYWxsb3dzIHRoaXMgcHJvZHVjdC5cbiAgICBjb25zdCBlcSA9IHByb2R1Y3QuaW5kZXhPZignOicpO1xuICAgIGlmIChlcSAhPSAtMSAmJlxuICAgICAgICB0aGlzLnByb2R1Y3RzLmluY2x1ZGVzKHByb2R1Y3Quc3Vic3RyaW5nKDAsIGVxICsgMSkgKyAnKicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvZHVjdHMuaW5jbHVkZXMocHJvZHVjdCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBqc29uXG4gICAqIEByZXR1cm4geyFFbnRpdGxlbWVudH1cbiAgICovXG4gIHN0YXRpYyBwYXJzZUZyb21Kc29uKGpzb24pIHtcbiAgICBpZiAoIWpzb24pIHtcbiAgICAgIGpzb24gPSB7fTtcbiAgICB9XG4gICAgY29uc3Qgc291cmNlID0ganNvblsnc291cmNlJ10gfHwgJyc7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBqc29uWydwcm9kdWN0cyddIHx8IFtdO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvblRva2VuID0ganNvblsnc3Vic2NyaXB0aW9uVG9rZW4nXTtcbiAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50KHNvdXJjZSwgcHJvZHVjdHMsIHN1YnNjcmlwdGlvblRva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgSlNPTiBpcyBleHBlY3RlZCBpbiBvbmUgb2YgdGhlIGZvcm1zOlxuICAgKiAtIFNpbmdsZSBlbnRpdGxlbWVudDogYHtwcm9kdWN0czogW10sIC4uLn1gLlxuICAgKiAtIEEgbGlzdCBvZiBlbnRpdGxlbWVudHM6IGBbe3Byb2R1Y3RzOiBbXSwgLi4ufSwgey4uLn1dYC5cbiAgICogQHBhcmFtIHshT2JqZWN0fCFBcnJheTwhT2JqZWN0Pn0ganNvblxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUVudGl0bGVtZW50Pn1cbiAgICovXG4gIHN0YXRpYyBwYXJzZUxpc3RGcm9tSnNvbihqc29uKSB7XG4gICAgY29uc3QganNvbkxpc3QgPSBBcnJheS5pc0FycmF5KGpzb24pID9cbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXk8T2JqZWN0Pn0gKi8gKGpzb24pIDogW2pzb25dO1xuICAgIHJldHVybiBqc29uTGlzdC5tYXAoanNvbiA9PiBFbnRpdGxlbWVudC5wYXJzZUZyb21Kc29uKGpzb24pKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBTdWJzY3JpcHRpb25TdGF0ZSA9IHtcbiAgLy8gdXNlcidzIHN1YnNjcmlwdGlvbiBzdGF0ZSBub3Qga25vd24uXG4gIFVOS05PV046ICd1bmtub3duJyxcbiAgLy8gdXNlciBpcyBub3QgYSBzdWJzY3JpYmVyLlxuICBOT05fU1VCU0NSSUJFUjogJ25vbl9zdWJzY3JpYmVyJyxcbiAgLy8gdXNlciBpcyBhIHN1YnNjcmliZXIuXG4gIFNVQlNDUklCRVI6ICdzdWJzY3JpYmVyJyxcbiAgLy8gdXNlcidzIHN1YnNjcmlwdGlvbiBoYXMgZXhwaXJlZC5cbiAgUEFTVF9TVUJTQ1JJQkVSOiAncGFzdF9zdWJzY3JpYmVyJyxcbn07XG5cbi8qKlxuICogU3Vic2NyaXB0aW9uIHJlbGF0ZWQgZXZlbnRzLiBMaXN0ZWQgYmVsb3cgYXJlIGVudW0gc3RyaW5ncyB0aGF0XG4gKiByZXByZXNlbnQgZXZlbnRzIHJlbGF0ZWQgdG8gU3Vic2NyaXB0aW9uIGZsb3cuIEV2ZW50IHBhcmFtZXRlcnNcbiAqIHRoYXQgcHJvdmlkZSBtb3JlIGNvbnRleHQgYWJvdXQgdGhlIGV2ZW50IGFyZSBzZW50IGFzIGEgSlNPTlxuICogYmxvY2sgb2YgZGVwdGggMSBpbiB0aGUgc2VuZEV2ZW50KCkgQVBJIGNhbGwuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgRXZlbnQgPSB7XG4gIC8qKlxuICAgKiBJTVBSRVNTSU9OX1BBWVdBTEwgZXZlbnQuXG4gICAqIFVzZXIgaGl0cyBhIHBheXdhbGwuXG4gICAqIEV2ZXJ5IGltcHJlc3Npb24gc2hvdWxkIGJlIHF1YWxpZmllZCBhcyBhY3RpdmUgb3IgcGFzc2l2ZS5cbiAgICogVGhlIGZpZWxkICdhY3RpdmUnIG9mIFByb3BlbnNpdHlFdmVudCwgd2hpY2ggY2FycmllcyB0aGlzXG4gICAqIGV2ZW50LCBtdXN0IGJlIHNldCB0byB0cnVlIG9yIGZhbHNlIHRvIGluZGljYXRlIHRoaXMuXG4gICAqIElmIHRoZSB1c2VyIGhhcyBydW4gb3V0IG9mIG1ldGVyaW5nLCBhbmQgdGhhdOKAmXMgd2h5IHdhcyBzaG93blxuICAgKiBhIHBheXdhbGwsIHRoYXQgd291bGQgYmUgYSBwYXNzaXZlIGltcHJlc3Npb24gb2YgdGhlIHBheXdhbGwuXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiBjb25zdCBwcm9wZW5zaXR5RXZlbnQgPSB7XG4gICAqICBuYW1lOiAncGF5d2FsbCcsXG4gICAqICBhY3RpdmU6IGZhbHNlLFxuICAgKiB9XG4gICAqL1xuICBJTVBSRVNTSU9OX1BBWVdBTEw6ICdwYXl3YWxsJyxcbiAgLyoqXG4gICAqIElNUFJFU1NJT05fQUQgZXZlbnQuXG4gICAqIFVzZXIgaGFzIGJlZW4gc2hvd24gYSBzdWJzY3JpcHRpb24gYWQuXG4gICAqIEV2ZXJ5IGltcHJlc3Npb24gc2hvdWxkIGJlIHF1YWxpZmllZCBhcyBhY3RpdmUgb3IgcGFzc2l2ZS5cbiAgICogVGhlIGZpZWxkICdhY3RpdmUnIG9mIFByb3BlbnNpdHlFdmVudCwgd2hpY2ggY2FycmllcyB0aGlzXG4gICAqIGV2ZW50LCBtdXN0IGJlIHNldCB0byB0cnVlIG9yIGZhbHNlIHRvIGluZGljYXRlIHRoaXMuXG4gICAqIFRoZSBKU09OIGJsb2NrIGNhbiBwcm92aWRlIHRoZSBuYW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gYWRcbiAgICogY3JlYXRpdmUgb3IgY2FtcGFpZ24uIEFkIGltcHJlc3Npb25zIGFyZSB1c3VhbGx5IHBhc3NpdmUuXG4gICAqIGNvbnN0IHByb3BlbnNpdHlFdmVudCA9IHtcbiAgICogICBuYW1lOiAnYWRfc2hvd24nLFxuICAgKiAgIGFjdGl2ZTogZmFsc2UsXG4gICAqICAgZGF0YTogeydhZF9uYW1lJzogJ2ZhbGxfYWQnfVxuICAgKiB9XG4gICAqL1xuICBJTVBSRVNTSU9OX0FEOiAnYWRfc2hvd24nLFxuICAvKipcbiAgICogSU1QUkVTU0lPTl9PRkZFUlMgZXZlbnQuXG4gICAqIFVzZXIgaGFzIGJlZW4gc2hvd24gYSBsaXN0IG9mIGF2YWlsYWJsZSBvZmZlcnMgZm9yIHN1YnNjcmlwdGlvbi5cbiAgICogRXZlcnkgaW1wcmVzc2lvbiBzaG91bGQgYmUgcXVhbGlmaWVkIGFzIGFjdGl2ZSBvciBwYXNzaXZlLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgb3IgZmFsc2UgdG8gaW5kaWNhdGUgdGhpcy5cbiAgICogVGhlIEpTT04gYmxvY2sgY2FuIHByb3ZpZGUgYSBsaXN0IG9mIHByb2R1Y3RzIGRpc3BsYXllZCxcbiAgICogYW5kIHRoZSBzb3VyY2UgdG8gaW5kaWNhdGUgd2h5IHRoZSB1c2VyIHdhcyBzaG93biB0aGUgb2ZmZXIuXG4gICAqIE5vdGU6IHNvdXJjZSBpcyBub3QgdGhlIHNhbWUgYXMgcmVmZXJyZXIuXG4gICAqIEluIHRoZSBjYXNlcyBiZWxvdywgdGhlIHVzZXIgdG9vayBhY3Rpb24gYmVmb3JlIHNlZWluZyB0aGUgb2ZmZXJzLFxuICAgKiBhbmQgdGhlcmVmb3JlIGNvbnNpZGVyZWQgYWN0aXZlIGltcHJlc3Npb24uXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiBjb25zdCBwcm9wZW5zaXR5RXZlbnQgPSB7XG4gICAqICAgbmFtZTogJ29mZmVyc19zaG93bicsXG4gICAqICAgYWN0aXZlOiB0cnVlLFxuICAgKiAgIGRhdGE6IHsnb2ZmZXJzJzogWydiYXNpYy1tb250aGx5JywgJ3ByZW1pdW0td2Vla2x5J10sXG4gICAqICAgICAgICAgICAnc291cmNlJzogJ2FkLWNsaWNrJ31cbiAgICogfVxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdvZmZlcnNfc2hvd24nLFxuICAgKiAgIGFjdGl2ZTogdHJ1ZSxcbiAgICogICBkYXRhOiB7J29mZmVycyc6IFsnYmFzaWMtbW9udGhseScsICdwcmVtaXVtLXdlZWtseSddLFxuICAgKiAgICAgICAgICAgJ3NvdXJjZSc6IOKAmG5hdmlnYXRlLXRvLW9mZmVycy1wYWdl4oCZfVxuICAgKiB9XG4gICAqIElmIHRoZSB1c2VyIHdhcyBzaG93biB0aGUgb2ZmZXJzIGFzIGEgcmVzdWx0IG9mIHBheXdhbGwgbWV0ZXJpbmdcbiAgICogZXhwaXJhdGlvbiwgaXQgaXMgY29uc2lkZXJlZCBhIHBhc3NpdmUgaW1wcmVzc2lvbi5cbiAgICogRm9yIGV4YW1wbGU6XG4gICAqIGNvbnN0IHByb3BlbnNpdHlFdmVudCA9IHtcbiAgICogICBuYW1lOiAnb2ZmZXJzX3Nob3duJyxcbiAgICogICBhY3RpdmU6IGZhbHNlLFxuICAgKiAgIGRhdGE6IHsnb2ZmZXJzJzogWydiYXNpYy1tb250aGx5JywgJ3ByZW1pdW0td2Vla2x5J10sXG4gICAqICAgICAgICAgICAnc291cmNlJzog4oCYcGF5d2FsbC1tZXRlcmluZy1leHBpcmVk4oCZfVxuICAgKiB9XG4gICAqL1xuICBJTVBSRVNTSU9OX09GRkVSUzogJ29mZmVyc19zaG93bicsXG4gIC8qKlxuICAgKiBBQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0UgZXZlbnQuXG4gICAqIFVzZXIgaGFzIHRha2VuIHRoZSBhY3Rpb24gdG8gYXJyaXZlIGF0IGEgbGFuZGluZyBwYWdlIG9mIHRoZVxuICAgKiBzdWJzY3JpcHRpb24gd29ya2Zsb3cuIFRoZSBsYW5kaW5nIHBhZ2Ugc2hvdWxkIHNhdGlzZnkgb25lIG9mXG4gICAqIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhbmQgaGVuY2UgYmUgYSBwYXJ0IG9mIHRoZSBmdW5uZWwgdG9cbiAgICogZ2V0IHRoZSB1c2VyIHRvIHN1YnNjcmliZTpcbiAgICogLSBoYXZlIGEgYnV0dG9uIHRvIG5hdmlnYXRlIHRoZSB1c2VyIHRvIGFuIG9mZmVycyBwYWdlLCAoaW5cbiAgICogICB0aGlzIGNhc2UsIHRoZSBuZXh0IGV2ZW50IHdpbGwgYmUgSU1QUkVTU0lPTl9PRkZFUlMsIHdpdGhcbiAgICogICBwYXJhbWV0ZXIgJ3NvdXJjZScgYXMgc3Vic2NyaXB0aW9ucy1sYW5kaW5nLXBhZ2UgYW5kXG4gICAqICAgJ2lzX2FjdGl2ZScgc2V0IHRvIHRydWUpLFxuICAgKiAtIHNob3cgb2ZmZXJzIHRoZSB1c2VyIGNhbiBzZWxlY3QsIChpbiB0aGlzIGNhc2UsIHRoZSBuZXh0XG4gICAqICAgZXZlbnQgd2lsbCBiZSBJTVBSRVNTSU9OX09GRkVSUywgd2l0aCBhIHBhcmFtZXRlciAnc291cmNlJ1xuICAgKiAgIGFzIG5hdmlnYXRlLXRvLW9mZmVycy1wYWdlIGFuZCAnaXNfYWN0aXZlJyBzZXQgdG8gdHJ1ZSksXG4gICAqIC0gcHJvdmlkZSBhIHdheSB0byBzdGFydCB0aGUgcGF5bWVudCBmbG93IGZvciBhIHNwZWNpZmljIG9mZmVyLlxuICAgKiAgIChpbiB0aGlzIGNhc2UsIHRoZSBuZXh0IGV2ZW50IHdpbGwgYmUgQUNUSU9OX09GRkVSX1NFTEVDVEVEXG4gICAqICAgb3IgQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVEIGRlcGVuZGluZyBvbiBpZiB0aGF0IGJ1dHRvblxuICAgKiAgIHRvb2sgdGhlIHVzZXIgdG8gYSBjaGVja291dCBwYWdlIG9uIHRoZSBwdWJsaXNoZXJzIHNpdGUgb3JcbiAgICogICBkaXJlY3RseSBzdGFydGVkIHRoZSBwYXltZW50IGZsb3cpLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgc2luY2UgdGhpcyBpcyBhIHVzZXIgYWN0aW9uLlxuICAgKiBUaGUgSlNPTiBibG9jayB3aXRoIHRoaXMgZXZlbnQgY2FuIHByb3ZpZGUgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICAgKiBzdWNoIGFzIHRoZSBzb3VyY2UsIGluZGljYXRpbmcgd2hhdCBjYXVzZWQgdGhlIHVzZXIgdG8gbmF2aWdhdGVcbiAgICogdG8gdGhpcyBwYWdlLlxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdzdWJzY3JpcHRpb25zX2xhbmRpbmdfcGFnZScsXG4gICAqICAgYWN0aXZlOiB0cnVlLFxuICAgKiAgIGRhdGE6IHsnc291cmNlJzogJ21hcmtldGluZ192aWFfZW1haWwnfVxuICAgKiB9XG4gICAqL1xuICBBQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0U6ICdzdWJzY3JpcHRpb25zX2xhbmRpbmdfcGFnZScsXG4gIC8qKlxuICAgKiBBQ1RJT05fT0ZGRVJfU0VMRUNURUQgZXZlbnQuXG4gICAqIFVzZXIgaGFzIHNlbGVjdGVkIGFuIG9mZmVyLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgc2luY2UgdGhpcyBpcyBhIHVzZXIgYWN0aW9uLlxuICAgKiBUaGUgSlNPTiBibG9jayBjYW4gcHJvdmlkZSB0aGUgcHJvZHVjdCBzZWxlY3RlZC5cbiAgICogRm9yIGV4YW1wbGU6IHtcbiAgICogICBuYW1lOiAnb2ZmZXJfc2VsZWN0ZWQnLFxuICAgKiAgIGFjdGl2ZTogdHJ1ZSxcbiAgICogICBkYXRhOiB7cHJvZHVjdCc6ICdiYXNpYy1tb250aGx5J31cbiAgICogfVxuICAgKiBXaGVuIG9mZmVyIHNlbGVjdGlvbiBzdGFydHMgdGhlIHBheW1lbnQgZmxvdyBkaXJlY3RseSxcbiAgICogdXNlIHRoZSBuZXh0IGV2ZW50IEFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRCBpbnN0ZWFkLlxuICAgKi9cbiAgQUNUSU9OX09GRkVSX1NFTEVDVEVEOiAnb2ZmZXJfc2VsZWN0ZWQnLFxuICAvKipcbiAgICogQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVEIGV2ZW50LlxuICAgKiBVc2VyIGhhcyBzdGFydGVkIHBheW1lbnQgZmxvdy5cbiAgICogVGhlIGZpZWxkICdhY3RpdmUnIG9mIFByb3BlbnNpdHlFdmVudCwgd2hpY2ggY2FycmllcyB0aGlzXG4gICAqIGV2ZW50LCBtdXN0IGJlIHNldCB0byB0cnVlIHNpbmNlIHRoaXMgaXMgYSB1c2VyIGFjdGlvbi5cbiAgICogVGhlIEpTT04gYmxvY2sgY2FuIHByb3ZpZGUgdGhlIHByb2R1Y3Qgc2VsZWN0ZWQuXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiBjb25zdCBwcm9wZW5zaXR5RXZlbnQgPSB7XG4gICAqICAgbmFtZTogJ3BheW1lbnRfZmxvd19zdGFydGVkJyxcbiAgICogICBhY3RpdmU6IHRydWUsXG4gICAqICAgZGF0YToge3Byb2R1Y3QnOiAnYmFzaWMtbW9udGhseSd9XG4gICAqIH1cbiAgICovXG4gIEFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRDogJ3BheW1lbnRfZmxvd19zdGFydCcsXG4gIC8qKlxuICAgKiBBQ1RJT05fUEFZTUVOVF9DT01QTEVURUQuXG4gICAqIFVzZXIgaGFzIG1hZGUgdGhlIHBheW1lbnQgZm9yIGEgc3Vic2NyaXB0aW9uLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgc2luY2UgdGhpcyBpcyBhIHVzZXIgYWN0aW9uLlxuICAgKiBUaGUgSlNPTiBibG9jayBjYW4gcHJvdmlkZSB0aGUgcHJvZHVjdCB1c2VyIHBhaWQgZm9yLlxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdwYXltZW50X2NvbXBsZXRlJyxcbiAgICogICBhY3RpdmU6IHRydWUsXG4gICAqICAgZGF0YToge3Byb2R1Y3QnOiAnYmFzaWMtbW9udGhseSd9XG4gICAqIH1cbiAgICovXG4gIEFDVElPTl9QQVlNRU5UX0NPTVBMRVRFRDogJ3BheW1lbnRfY29tcGxldGUnLFxuICAvKipcbiAgICogRVZFTlRfQ1VTVE9NOiBjdXN0b20gcHVibGlzaGVyIGV2ZW50LlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgb3IgZmFsc2UgZGVwZW5kaW5nIG9uIGlmIHRoZSBldmVudFxuICAgKiB3YXMgZ2VuZXJhdGVkIGFzIGEgcmVzdWx0IG9mIGEgdXNlciBhY3Rpb24uXG4gICAqIFRoZSBKU09OIGJsb2NrIGNhbiBwcm92aWRlIHRoZSBldmVudCBuYW1lIGZvciB0aGUgY3VzdG9tIGV2ZW50LlxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdjdXN0b20nLFxuICAgKiAgIGFjdGl2ZTogdHJ1ZSxcbiAgICogICBkYXRhOiB7XG4gICAqICAgICAnZXZlbnRfbmFtZSc6ICdzb2NpYWxfc2hhcmUnLFxuICAgKiAgICAgJ3BsYXRmb3JtX3VzZWQnOiAnd2hhdHNhcHAnXG4gICAqICAgfVxuICAgKiAgfVxuICAgKi9cbiAgRVZFTlRfQ1VTVE9NOiAnY3VzdG9tJyxcbn07XG5cbi8qKlxuICogUHJvcGVuc2l0eSBFdmVudFxuICogUHJvcGVydGllczpcbiAqIC0gbmFtZTogUmVxdWlyZWQuIE5hbWUgc2hvdWxkIGJlIHZhbGlkIHN0cmluZyBpbiB0aGUgRXZlbnRcbiAqICAgICAgICAgZW51bSB3aXRoaW4gc3JjL2FwaS9sb2dnZXItYXBpLmpzLlxuICogLSBhY3RpdmU6IFJlcXVpcmVkLiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlciB0aGVcbiAqICAgICAgICAgdXNlciB0b29rIHNvbWUgYWN0aW9uIHRvIHBhcnRpY2lwYXRlIGluIHRoZSBmbG93XG4gKiAgICAgICAgIHRoYXQgZ2VuZXJhdGVkIHRoaXMgZXZlbnQuIEZvciBpbXByZXNzaW9uIGV2ZW50LFxuICogICAgICAgICB0aGlzIGlzIHNldCB0byB0cnVlIGlmIGlzX2FjdGl2ZSBmaWVsZCB3b3VsZCBiZVxuICogICAgICAgICBzZXQgdG8gdHJ1ZSwgYXMgZGVzY3JpYmVkIGluIGRvY3VtZW50YXRpb24gZm9yXG4gKiAgICAgICAgIGVudW0gRXZlbnQuIE90aGVyd2lzZSwgc2V0IHRoaXMgZmllbGQgdG8gZmFsc2UuXG4gKiAgICAgICAgIEZvciBhY3Rpb24gZXZlbnRzLCB0aGlzIGZpZWxkIG11c3QgYWx3YXlzIGJlIHNldFxuICogICAgICAgICB0byB0cnVlLiBUaGUgY2FsbGVyIG11c3QgYWx3YXlzIHNldCB0aGlzIGZpZWxkLlxuICogLSBkYXRhOiBPcHRpb25hbC4gSlNPTiBibG9jayBvZiBkZXB0aCAnMScgcHJvdmlkZXMgZXZlbnRcbiAqICAgICAgICAgcGFyYW1ldGVycy4gVGhlIGd1aWRlbGluZSB0byBjcmVhdGUgdGhpcyBKU09OIGJsb2NrXG4gKiAgICAgICAgIHRoYXQgZGVzY3JpYmVzIHRoZSBldmVudCBpcyBwcm92aWRlZCBhZ2FpbnN0IGVhY2hcbiAqICAgICAgICAgZW51bSBsaXN0ZWQgaW4gdGhlIEV2ZW50IGVudW0gYWJvdmUuXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gICogICAgbmFtZTogc3RyaW5nLFxuICAqICAgIGFjdGl2ZTogYm9vbGVhbixcbiAgKiAgICBkYXRhOiA/SnNvbk9iamVjdCxcbiAgKiB9fVxuICAqL1xuZXhwb3J0IGxldCBQdWJsaXNoZXJFdmVudDtcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXJBcGkge1xuICAvKipcbiAgICogU2VuZCBhIGJ1eS1mbG93IGV2ZW50IHRoYXQgb2NjdXJyZWQgb24gdGhlIHB1Ymxpc2hlcidzIHNpdGUgdG8gR29vZ2xlLiAgVGhlXG4gICAqIHVsdGltYXRlIGRlc3RpbmF0aW9uIGlzIGNvbnRyb2xsZWQgYnkgY29uZmlndXJhdGlvbiBzZXR0aW5ncy4gIERhdGEgaXNcbiAgICogc2VudCB0byBQcm9wZW5zaXR5IGlmIHRoZSBQcm9wZW5zaXR5IG1vZHVsZSBpcyBmZXRjaGVkIGZyb20gcnVudGltZSBhbmQgdG9cbiAgICogR29vZ2xlJ3MgYW5hbHl0aWNzIHNlcnZpY2UgaWYgeW91IGFjdGl2YXRlIGJ1eS1mbG93IGNvbXBhcmF0aXZlIGFuYWx5c2lzLlxuICAgKiBAcGFyYW0geyFQdWJsaXNoZXJFdmVudH0gdXNlckV2ZW50XG4gICAqL1xuICBzZW5kRXZlbnQodXNlckV2ZW50KSB7IH1cblxuICAvKipcbiAgICogU2VuZCB1c2VyIHN1YnNjcmlwdGlvbiBzdGF0ZSB1cG9uIGluaXRpYWwgZGlzY292ZXJ5LlxuICAgKiBBIHVzZXIgbWF5IGhhdmUgYWN0aXZlIHN1YnNjcmlwdGlvbnMgdG8gc29tZSBwcm9kdWN0c1xuICAgKiBhbmQgZXhwaXJlZCBzdWJzY3JpcHRpb25zIHRvIG90aGVycy4gTWFrZSBvbmUgQVBJIGNhbGxcbiAgICogcGVyIHN1YnNjcmlwdGlvbiBzdGF0ZSBhbmQgcHJvdmlkZSBhIGNvcnJlc3BvbmRpbmdcbiAgICogbGlzdCBvZiBwcm9kdWN0cyB3aXRoIGEganNvbiBvYmplY3Qgb2YgZGVwdGggMS5cbiAgICogRm9yIGV4YW1wbGU6XG4gICAqICAgICB7J3Byb2R1Y3QnOiBbJ3Byb2R1Y3QxJywgJ3Byb2R1Y3QyJ119XG4gICAqIEVhY2ggY2FsbCB0byB0aGlzIEFQSSBzaG91bGQgaGF2ZSB0aGUgZmlyc3QgYXJndW1lbnRcbiAgICogYXMgYSB2YWxpZCBzdHJpbmcgZnJvbSB0aGUgZW51bSBTdWJzY3JpcHRpb25TdGF0ZS5cbiAgICogQHBhcmFtIHtTdWJzY3JpcHRpb25TdGF0ZX0gc3RhdGVcbiAgICogQHBhcmFtIHs/SnNvbk9iamVjdH0ganNvblByb2R1Y3RzXG4gICAqL1xuICBzZW5kU3Vic2NyaXB0aW9uU3RhdGUoc3RhdGUsIGpzb25Qcm9kdWN0cykge31cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIE9mZmVyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNrdUlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHByaWNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihza3VJZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmljZSkge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNrdUlkID0gc2t1SWQ7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCAqIGFzIExvZ2dlckFwaSBmcm9tICcuL2xvZ2dlci1hcGknO1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZW5zaXR5VHlwZSA9IHtcbiAgLy8gUHJvcGVuc2l0eSBzY29yZSBmb3IgYSB1c2VyIHRvIHN1YnNjcmliZSB0byBhIHB1YmxpY2F0aW9uLlxuICBHRU5FUkFMOiAnZ2VuZXJhbCcsXG4gIC8vIFByb3BlbnNpdHkgc2NvcmUgd2hlbiBibG9ja2VkIGFjY2VzcyB0byBjb250ZW50IGJ5IHBheXdhbGwuXG4gIFBBWVdBTEw6ICdwYXl3YWxsJyxcbn07XG5cbi8qKlxuICogVGhlIFByb3BlbnNpdHkgU2NvcmVcbiAqIC0gdmFsdWU6IFJlcXVpcmVkLiBBIG51bWJlciB0aGF0IGluZGljYXRlcyB0aGUgcHJvcGVuc2l0eSB0byBzdWJzY3JpYmUuXG4gKiAtIGJ1Y2tldGVkOiBSZXF1aXJlZC4gSW5kaWNhdGVzIGlmIHRoZSBzY29yZSBpcyBhIHJhdyBzY29yZSBbMS0xMDBdIG9yIGJ1Y2tldGVkWzEtMjBdLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHZhbHVlOiBudW1iZXIsXG4gKiAgIGJ1Y2tldGVkOiBib29sZWFuLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBTY29yZTtcblxuLyoqXG4gKiBQcm9wZW5zaXR5IFNjb3JlIERldGFpbFxuICogUHJvcGVydGllczpcbiAqIC0gcHJvZHVjdDogUmVxdWlyZWQuIEluZGljYXRlcyB0aGUgcHVibGljYXRpb25faWQ6cHJvZHVjdF9pZCBmb3Igd2hpY2ggdGhlIHNjb3JlIGlzIHByb3ZpZGVkLlxuICogLSBzY29yZTogT3B0aW9uYWwuIFdoZW4gc2NvcmUgaXMgYXZhaWxhYmxlLCB0aGlzIGZpZWxkIGNvbnRhaW5zIHRoZSBwcm9wZW5zaXR5IHNjb3JlIGZvciB0aGlzIHByb2R1Y3QuXG4gKiAtIGVycm9yOiBPcHRpb25hbC4gV2hlbiBubyBzY29yZSBpcyBhdmFpYWxibGUsIGEgc3RyaW5nIHByb3ZpZGVzIHRoZSBlcnJvciBtZXNzYWdlLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHByb2R1Y3Q6IHN0cmluZyxcbiAqICAgc2NvcmU6ID9TY29yZSxcbiAqICAgZXJyb3I6ID9zdHJpbmcsXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFNjb3JlRGV0YWlsO1xuXG4vKipcbiAqIFRoZSBCb2R5IGZpZWxkIG9mIHRoZSBQcm9wZW5zaXR5IFNjb3JlLlxuICogUHJvcGVydGllczpcbiAqIC0gc2NvcmVzOiBPcHRpb25hbCwgYW4gYXJyYXkgb2Ygc2NvcmVzLiBXaGVuIGhlYWRlciBpbmRpY2F0ZXMgc28sIGF0bGVhc3Qgb25lIHNjb3JlIGlzIGF2YWlsYWJsZS5cbiAqIC0gZXJyb3I6IE9wdGlvbmFsLCBzdHJpbmcgZGVzY3JpYmluZyB3aHksIGlmIG5vIHNjb3JlcyB3ZXJlIHByb3ZpZGVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gKiAgICBzY29yZXM6ID9BcnJheTxTY29yZURldGFpbD4sXG4gKiAgICBlcnJvcjogP3N0cmluZyxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgQm9keTtcblxuLyoqXG4gKiBUaGUgSGVhZGVyIG9mIHRoZSBQcm9wZW5zaXR5IFNjb3JlLlxuICogUHJvcGVydGllczpcbiAqIC0gb2s6IFJlcXVpcmVkLiB0cnVlLCBpZiBwcm9wZW5zaXR5IHNjb3JlIGlzIGF2YWlsYWJsZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICpcbiAqICBAdHlwZWRlZiB7e1xuICogICAgb2s6IGJvb2xlYW4sXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEhlYWRlcjtcblxuLyoqXG4gKiBUaGUgUHJvcGVuc2l0eSBTY29yZS5cbiAqIFByb3BlcnRpZXM6XG4gKiAtIGhlYWRlcjogUmVxdWlyZWQuIFByb3ZpZGVzIHRoZSBoZWFkZXIgb2YgdGhlIFNjb3JlIHJlc3BvbnNlLlxuICogLSBib2R5OiBSZXF1aXJlZC4gUHJvdmlkZXMgdGhlIGJvZHkgb2YgdGhlIFNjb3JlIHJlc3BvbnNlLlxuICpcbiAqICBAdHlwZWRlZiB7e1xuICogICAgaGVhZGVyOiBIZWFkZXIsXG4gKiAgICBib2R5OiBCb2R5LFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBQcm9wZW5zaXR5U2NvcmU7XG5cbi8qKlxuICogUHJvcGVuc2l0eSBFdmVudFxuICogICBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBwcmltYXJ5IGRlZml0aW9uIG9mIHRoaXMgb2JqZWN0IGhhcyBjaGFuZ2VkIHRvXG4gKiAgIFB1Ymxpc2hlckV2ZW50IGFuZCBpcyBkZWZpbmVkIGluIGxvZ2dlci1hcGkuanMuICBUaGVzZSB0d28gb2JqZWN0XG4gKiAgIGRlZmluaXRpb25zIGFyZSBpZGVudGljYWwuXG4gKiBQcm9wZXJ0aWVzOlxuICogLSBuYW1lOiBSZXF1aXJlZC4gTmFtZSBzaG91bGQgYmUgdmFsaWQgc3RyaW5nIGluIHRoZSBFdmVudFxuICogICAgICAgICBlbnVtIHdpdGhpbiBzcmMvYXBpL2xvZ2dlci1hcGkuanMuXG4gKiAtIGFjdGl2ZTogUmVxdWlyZWQuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHRoZVxuICogICAgICAgICB1c2VyIHRvb2sgc29tZSBhY3Rpb24gdG8gcGFydGljaXBhdGUgaW4gdGhlIGZsb3dcbiAqICAgICAgICAgdGhhdCBnZW5lcmF0ZWQgdGhpcyBldmVudC4gRm9yIGltcHJlc3Npb24gZXZlbnQsXG4gKiAgICAgICAgIHRoaXMgaXMgc2V0IHRvIHRydWUgaWYgaXNfYWN0aXZlIGZpZWxkIHdvdWxkIGJlXG4gKiAgICAgICAgIHNldCB0byB0cnVlLCBhcyBkZXNjcmliZWQgaW4gZG9jdW1lbnRhdGlvbiBmb3JcbiAqICAgICAgICAgZW51bSBFdmVudC4gT3RoZXJ3aXNlLCBzZXQgdGhpcyBmaWVsZCB0byBmYWxzZS5cbiAqICAgICAgICAgRm9yIGFjdGlvbiBldmVudHMsIHRoaXMgZmllbGQgbXVzdCBhbHdheXMgYmUgc2V0XG4gKiAgICAgICAgIHRvIHRydWUuIFRoZSBjYWxsZXIgbXVzdCBhbHdheXMgc2V0IHRoaXMgZmllbGQuXG4gKiAtIGRhdGE6IE9wdGlvbmFsLiBKU09OIGJsb2NrIG9mIGRlcHRoICcxJyBwcm92aWRlcyBldmVudFxuICogICAgICAgICBwYXJhbWV0ZXJzLiBUaGUgZ3VpZGVsaW5lIHRvIGNyZWF0ZSB0aGlzIEpTT04gYmxvY2tcbiAqICAgICAgICAgdGhhdCBkZXNjcmliZXMgdGhlIGV2ZW50IGlzIHByb3ZpZGVkIGFnYWluc3QgZWFjaFxuICogICAgICAgICBlbnVtIGxpc3RlZCBpbiB0aGUgRXZlbnQgZW51bSBhYm92ZS5cbiAqXG4gKiAgQHR5cGVkZWYge3tcbiAqICAgIG5hbWU6IHN0cmluZyxcbiAqICAgIGFjdGl2ZTogYm9vbGVhbixcbiAqICAgIGRhdGE6ID9Kc29uT2JqZWN0LFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBQcm9wZW5zaXR5RXZlbnQ7XG5cbi8qXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBkZWZpbml0aW9ucyBvZiBFdmVudCBhbmQgU3Vic2NyaXB0aW9uU3RhdGUgaGF2ZSBtb3ZlZFxuICogdG8gbG9nZ2VyLWFwaS5qcy4gIFRoaXMgaXMgbm93IHRoZSBwcmVmZXJyZWQgaW50ZXJmYWNlIHRvIHVzZSBmb3IgbG9nZ2luZ1xuICogcHVibGlzaGVyIGV2ZW50cyBhbmQgc2V0dGluZyB0aGUgdXNlcidzIGN1cnJlbnQgc3Vic2NyaXB0aW9uIHN0YXRlLlxuICogUHJvcGVuc2l0eSB3aWxsIGNvbnRpbnVlIHRvIGZ1bmN0aW9uIGFzIGFuIGV2ZW50IGxvZ2dlciB1bnRpbCB3ZSBhcmUgY2VydGFpblxuICogbm8gcHVibGlzaGVycyBhcmUgYWN0aXZlbHkgdXNpbmcgaXQgdG8gbG9nIGV2ZW50cy5cbiAqL1xuZXhwb3J0IGNvbnN0IEV2ZW50ID0gTG9nZ2VyQXBpLkV2ZW50O1xuZXhwb3J0IGNvbnN0IFN1YnNjcmlwdGlvblN0YXRlID0gTG9nZ2VyQXBpLlN1YnNjcmlwdGlvblN0YXRlO1xuXG4vKipcbiAqIEBleHRlbmRzIHtMb2dnZXJBcGkuTG9nZ2VyQXBpfVxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgUHJvcGVuc2l0eUFwaSBleHRlbmRzIExvZ2dlckFwaS5Mb2dnZXJBcGkge1xuICAvKipcbiAgICogR2V0IHRoZSBwcm9wZW5zaXR5IG9mIGEgdXNlciB0byBzdWJzY3JpYmUgYmFzZWQgb24gdGhlIHR5cGUuXG4gICAqIFRoZSBhcmd1bWVudCBzaG91bGQgYmUgYSB2YWxpZCBzdHJpbmcgZnJvbSBQcm9wZW5zaXR5VHlwZS5cbiAgICogSWYgbm8gdHlwZSBpcyBwcm92aWRlZCwgR0VORVJBTCBzY29yZSBpcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtQcm9wZW5zaXR5VHlwZT19IHR5cGVcbiAgICogQHJldHVybiB7P1Byb21pc2U8IVByb3BlbnNpdHlTY29yZT59XG4gICAqL1xuICBnZXRQcm9wZW5zaXR5KHR5cGUpIHt9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RW50aXRsZW1lbnRzfSBmcm9tICcuL2VudGl0bGVtZW50cyc7XG5pbXBvcnQge1VzZXJEYXRhfSBmcm9tICcuL3VzZXItZGF0YSc7XG5cblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJzY3JpYmVSZXNwb25zZSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshUHVyY2hhc2VEYXRhfSBwdXJjaGFzZURhdGFcbiAgICogQHBhcmFtIHs/VXNlckRhdGF9IHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7P0VudGl0bGVtZW50c30gZW50aXRsZW1lbnRzXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gcHJvZHVjdFR5cGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjb21wbGV0ZUhhbmRsZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHJhdywgcHVyY2hhc2VEYXRhLCB1c2VyRGF0YSwgZW50aXRsZW1lbnRzLCBwcm9kdWN0VHlwZSxcbiAgICAgIGNvbXBsZXRlSGFuZGxlcikge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAvKiogQGNvbnN0IHshUHVyY2hhc2VEYXRhfSAqL1xuICAgIHRoaXMucHVyY2hhc2VEYXRhID0gcHVyY2hhc2VEYXRhO1xuICAgIC8qKiBAY29uc3Qgez9Vc2VyRGF0YX0gKi9cbiAgICB0aGlzLnVzZXJEYXRhID0gdXNlckRhdGE7XG4gICAgLyoqIEBjb25zdCB7P0VudGl0bGVtZW50c30gKi9cbiAgICB0aGlzLmVudGl0bGVtZW50cyA9IGVudGl0bGVtZW50cztcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5wcm9kdWN0VHlwZSA9IHByb2R1Y3RUeXBlO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCk6IVByb21pc2V9ICovXG4gICAgdGhpcy5jb21wbGV0ZUhhbmRsZXJfID0gY29tcGxldGVIYW5kbGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFTdWJzY3JpYmVSZXNwb25zZX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgU3Vic2NyaWJlUmVzcG9uc2UoXG4gICAgICAgIHRoaXMucmF3LFxuICAgICAgICB0aGlzLnB1cmNoYXNlRGF0YSxcbiAgICAgICAgdGhpcy51c2VyRGF0YSxcbiAgICAgICAgdGhpcy5lbnRpdGxlbWVudHMsXG4gICAgICAgIHRoaXMucHJvZHVjdFR5cGUsXG4gICAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyXyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdwdXJjaGFzZURhdGEnOiB0aGlzLnB1cmNoYXNlRGF0YS5qc29uKCksXG4gICAgICAndXNlckRhdGEnOiB0aGlzLnVzZXJEYXRhID8gdGhpcy51c2VyRGF0YS5qc29uKCkgOiBudWxsLFxuICAgICAgJ2VudGl0bGVtZW50cyc6IHRoaXMuZW50aXRsZW1lbnRzID8gdGhpcy5lbnRpdGxlbWVudHMuanNvbigpIDogbnVsbCxcbiAgICAgICdwcm9kdWN0VHlwZSc6IHRoaXMucHJvZHVjdFR5cGUsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3MgdGhlIHJlY2VpdmluZyBzaXRlIHRvIGNvbXBsZXRlL2Fja25vd2xlZGdlIHRoYXQgaXQgcmVnaXN0ZXJlZFxuICAgKiB0aGUgc3Vic2NyaXB0aW9uIHB1cmNoYXNlLiBUaGUgdHlwaWNhbCBhY3Rpb24gd291bGQgYmUgdG8gY3JlYXRlIGFuXG4gICAqIGFjY291bnQgKG9yIG1hdGNoIGFuIGV4aXN0aW5nIG9uZSkgYW5kIGFzc29jaWF0ZWQgdGhlIHB1cmNoYXNlIHdpdGhcbiAgICogdGhhdCBhY2NvdW50LlxuICAgKlxuICAgKiBTd0cgd2lsbCBkaXNwbGF5IHByb2dyZXNzIGluZGljYXRvciB1bnRpbCB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYW5kXG4gICAqIHVwb24gcmVjZWl2aW5nIHRoaXMgY2FsbCB3aWxsIHNob3cgdGhlIGNvbmZpcm1hdGlvbiB0byB0aGUgdXNlci5cbiAgICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2Qgd2lsbCB5aWVsZCBvbmNlIHRoZSB1c2VyIGNsb3Nlc1xuICAgKiB0aGUgY29uZmlybWF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGNvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBsZXRlSGFuZGxlcl8oKTtcbiAgfVxufVxuXG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgUHVyY2hhc2VEYXRhIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc2lnbmF0dXJlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyYXcsIHNpZ25hdHVyZSkge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5kYXRhID0gcmF3O1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNpZ25hdHVyZSA9IHNpZ25hdHVyZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHVyY2hhc2VEYXRhfVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBQdXJjaGFzZURhdGEodGhpcy5yYXcsIHRoaXMuc2lnbmF0dXJlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2RhdGEnOiB0aGlzLnJhdyxcbiAgICAgICdzaWduYXR1cmUnOiB0aGlzLnNpZ25hdHVyZSxcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RW50aXRsZW1lbnRzfSBmcm9tICcuL2VudGl0bGVtZW50cyc7XG5pbXBvcnQge09mZmVyfSBmcm9tICcuL29mZmVyJztcbmltcG9ydCB7XG4gIERlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdCxcbiAgRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZSxcbn0gZnJvbSAnLi9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uJztcbmltcG9ydCB7U3Vic2NyaWJlUmVzcG9uc2V9IGZyb20gJy4vc3Vic2NyaWJlLXJlc3BvbnNlJztcbmltcG9ydCB7UHJvcGVuc2l0eUFwaX0gZnJvbSAnLi9wcm9wZW5zaXR5LWFwaSc7XG5pbXBvcnQge0xvZ2dlckFwaX0gZnJvbSAnLi9sb2dnZXItYXBpJztcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25zIHtcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbml0aWFsaXplcyB0aGUgc3Vic2NyaXB0aW9ucyBydW50aW1lIHdpdGggcHVibGljYXRpb24gb3JcbiAgICogcHJvZHVjdCBJRC4gSWYgbm90IGNhbGxlZCwgdGhlIHJ1bnRpbWUgd2lsbCBsb29rIGZvciB0aGUgaW5pdGlhbGl6YXRpb25cbiAgICogcGFyYW1ldGVycyBpbiB0aGUgcGFnZSdzIG1hcmt1cC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWRcbiAgICovXG4gIGluaXQocHJvZHVjdE9yUHVibGljYXRpb25JZCkge31cblxuICAvKipcbiAgICogT3B0aW9uYWxseSBjb25maWd1cmVzIHRoZSBydW50aW1lIHdpdGggbm9uLWRlZmF1bHQgcHJvcGVydGllcy4gU2VlXG4gICAqIGBDb25maWdgIGRlZmluaXRpb24gZm9yIGRldGFpbHMuXG4gICAqIEBwYXJhbSB7IUNvbmZpZ30gY29uZmlnXG4gICAqL1xuICBjb25maWd1cmUoY29uZmlnKSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIGVudGl0bGVtZW50IGZsb3cuXG4gICAqL1xuICBzdGFydCgpIHt9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgZW50aXRsZW1lbnRzIHRoYXQgY2FuIGJlIGZldGNoZWQgYWdhaW4uXG4gICAqL1xuICByZXNldCgpIHt9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgZW50aXRsZW1lbnRzIGFuZCBjbGVhcnMgYWxsIG9mIHRoZSBjYWNoZXMuXG4gICAqL1xuICBjbGVhcigpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICovXG4gIGdldEVudGl0bGVtZW50cyhvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHt9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3Vic2NyaWJlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCFFbnRpdGxlbWVudHM+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzZXQgb2Ygb2ZmZXJzLlxuICAgKiBAcGFyYW0ge3tcbiAgICogICBwcm9kdWN0SWQ6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAgICogfT19IG9wdF9vcHRpb25zXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBcnJheTwhT2ZmZXI+Pn1cbiAgICovXG4gIGdldE9mZmVycyhvcHRfb3B0aW9ucykge31cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBPZmZlcnMgZmxvdy5cbiAgICogQHBhcmFtIHshT2ZmZXJzUmVxdWVzdD19IG9wdF9vcHRpb25zXG4gICAqL1xuICBzaG93T2ZmZXJzKG9wdF9vcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIE9mZmVycyBmbG93IGZvciBhIHN1YnNjcmlwdGlvbiB1cGRhdGUuXG4gICAqIEBwYXJhbSB7IU9mZmVyc1JlcXVlc3Q9fSBvcHRfb3B0aW9uc1xuICAgKi9cbiAgc2hvd1VwZGF0ZU9mZmVycyhvcHRfb3B0aW9ucykge31cblxuICAvKipcbiAgICogU2hvdyBzdWJzY3JpcHRpb24gb3B0aW9uLlxuICAgKiBAcGFyYW0geyFPZmZlcnNSZXF1ZXN0PX0gb3B0X29wdGlvbnNcbiAgICovXG4gIHNob3dTdWJzY3JpYmVPcHRpb24ob3B0X29wdGlvbnMpIHt9XG5cbiAgLyoqXG4gICAqIFNob3cgYWJicmV2aWF0ZWQgb2ZmZXJzLlxuICAgKiBAcGFyYW0geyFPZmZlcnNSZXF1ZXN0PX0gb3B0X29wdGlvbnNcbiAgICovXG4gIHNob3dBYmJydk9mZmVyKG9wdF9vcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBTaG93IGNvbnRyaWJ1dGlvbiBvcHRpb25zIGZvciB0aGUgdXNlcnMgdG8gc2VsZWN0IGZyb20uXG4gICAqIFRoZSBvcHRpb25zIGFyZSBncm91cGVkIHRvZ2V0aGVyIGJ5IHBlcmlvZHMgKFdlZWtseSwgTW9udGhseSwgZXRjLikuXG4gICAqIFVzZXIgY2FuIHNlbGVjdCB0aGUgYW1vdW50IHRvIGNvbnRyaWJ1dGUgdG8gZnJvbSBhdmFpbGFibGUgb3B0aW9uc1xuICAgKiB0byB0aGUgcHVibGlzaGVyLiBUaGVzZSBvcHRpb25zIGFyZSBiYXNlZCBvbiB0aGUgU0tVcyBkZWZpbmVkIGluIHRoZSBQbGF5XG4gICAqIGNvbnNvbGUgZm9yIGEgZ2l2ZW4gcHVibGljYXRpb24uXG4gICAqIEVhY2ggU0tVIGhhcyBBbW91bnQsIFBlcmlvZCwgU0tVSWQgYW5kIG90aGVyIGF0dHJpYnV0ZXMuXG4gICAqIEBwYXJhbSB7IU9mZmVyc1JlcXVlc3Q9fSBvcHRfb3B0aW9uc1xuICAgKi9cbiAgc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMob3B0X29wdGlvbnMpIHt9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHRoZSBuYXRpdmUgc3Vic2NyaWJlIHJlcXVlc3QuIFNldHRpbmcgdGhpcyBjYWxsYmFja1xuICAgKiB0cmlnZ2VycyB0aGUgXCJuYXRpdmVcIiBvcHRpb24gaW4gdGhlIG9mZmVycyBmbG93LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3QoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3Vic2NyaWJlIGNvbXBsZXRlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCFTdWJzY3JpYmVSZXNwb25zZT4pfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25TdWJzY3JpYmVSZXNwb25zZShjYWxsYmFjaykge31cblxuICAvKipcbiAgICogU3RhcnRzIHN1YnNjcmlwdGlvbiBwdXJjaGFzZSBmbG93LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2t1XG4gICAqL1xuICBzdWJzY3JpYmUoc2t1KSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgc3Vic2NyaXB0aW9uIHB1cmNoYXNlIGZsb3cuXG4gICAqIEBwYXJhbSB7U3Vic2NyaXB0aW9uUmVxdWVzdH0gc3Vic2NyaXB0aW9uUmVxdWVzdFxuICAgKi9cbiAgdXBkYXRlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvblJlcXVlc3QpIHt9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29udHJpYnV0aW9uIGNvbXBsZXRlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCFTdWJzY3JpYmVSZXNwb25zZT4pfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25Db250cmlidXRpb25SZXNwb25zZShjYWxsYmFjaykge31cblxuICAgLyoqXG4gICAqIFN0YXJ0cyBjb250cmlidXRpb25zIHB1cmNoYXNlIGZsb3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFN1YnNjcmlwdGlvblJlcXVlc3R9IHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdFxuICAgKi9cbiAgY29udHJpYnV0ZShza3VPclN1YnNjcmlwdGlvblJlcXVlc3QpIHt9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgZGVmZXJyZWQgYWNjb3VudCBjcmVhdGlvbiBmbG93LlxuICAgKiBTZWUgYERlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdGAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICogQHBhcmFtIHs/RGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXF1ZXN0PX0gb3B0X29wdGlvbnNcbiAgICogQHJldHVybiB7IVByb21pc2U8IURlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2U+fVxuICAgKi9cbiAgY29tcGxldGVEZWZlcnJlZEFjY291bnRDcmVhdGlvbihvcHRfb3B0aW9ucykge31cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighTG9naW5SZXF1ZXN0KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uTG9naW5SZXF1ZXN0KGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIGxvZ2luIHByb21wdCBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHNob3dMb2dpblByb21wdCgpIHt9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgbG9naW4gbm90aWZpY2F0aW9uIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc2hvd0xvZ2luTm90aWZpY2F0aW9uKCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25MaW5rQ29tcGxldGUoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2V9IGFjY291bnRQcm9taXNlIFB1Ymxpc2hlcidzIHByb21pc2UgdG8gbG9va3VwIGFjY291bnQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cChhY2NvdW50UHJvbWlzZSkge31cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBBY2NvdW50IGxpbmtpbmcgZmxvdy5cbiAgICogVE9ETyhkcGFyaWtoKTogZGVjaWRlIGlmIGl0J3Mgb25seSBleHBvc2VkIGZvciB0ZXN0aW5nIG9yIFBST0QgcHVycG9zZXMuXG4gICAqL1xuICBsaW5rQWNjb3VudCgpIHt9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIHRoZSBjbGllbnQgdGhhdCBhIGZsb3cgaGFzIGJlZW4gc3RhcnRlZC4gVGhlIG5hbWUgb2YgdGhlIGZsb3dcbiAgICogaXMgcGFzc2VkIGFzIHRoZSBjYWxsYmFjayBhcmd1bWVudC4gVGhlIGZsb3cgbmFtZSBjb3JyZXNwb25kcyB0byB0aGVcbiAgICogbWV0aG9kIG5hbWUgaW4gdGhpcyBpbnRlcmZhY2UsIHN1Y2ggYXMgXCJzaG93T2ZmZXJzXCIsIG9yIFwic3Vic2NyaWJlXCIuXG4gICAqIFNlZSBgU3Vic2NyaXB0aW9uRmxvd3NgIGZvciB0aGUgZnVsbCBsaXN0LlxuICAgKlxuICAgKiBBbHNvIHNlZSBgc2V0T25GbG93Q2FuY2VsZWRgIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbih7Zmxvdzogc3RyaW5nLCBkYXRhOiAhT2JqZWN0fSl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyB0aGUgY2xpZW50IHRoYXQgYSBmbG93IGhhcyBiZWVuIGNhbmNlbGVkLiBUaGUgbmFtZSBvZiB0aGUgZmxvd1xuICAgKiBpcyBwYXNzZWQgYXMgdGhlIGNhbGxiYWNrIGFyZ3VtZW50LiBUaGUgZmxvdyBuYW1lIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgKiBtZXRob2QgbmFtZSBpbiB0aGlzIGludGVyZmFjZSwgc3VjaCBhcyBcInNob3dPZmZlcnNcIiwgb3IgXCJzdWJzY3JpYmVcIi5cbiAgICogU2VlIGBTdWJzY3JpcHRpb25GbG93c2AgZm9yIHRoZSBmdWxsIGxpc3QuXG4gICAqXG4gICAqIE5vdGljZSB0aGF0IHNvbWUgb2YgdGhlIGZsb3dzLCBzdWNoIGFzIFwic3Vic2NyaWJlXCIsIGNvdWxkIGFkZGl0aW9uYWxseVxuICAgKiBoYXZlIHRoZWlyIG93biBcImNhbmNlbFwiIGV2ZW50cy5cbiAgICpcbiAgICogQWxzbyBzZWUgYHNldE9uRmxvd1N0YXJ0ZWRgIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbih7Zmxvdzogc3RyaW5nLCBkYXRhOiAhT2JqZWN0fSl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaykge31cblxuIC8qKlxuICAqIFN0YXJ0cyB0aGUgc2F2ZSBzdWJzY3JpcHRpb25zIGZsb3cuXG4gICogQHBhcmFtIHshU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFja30gcmVxdWVzdENhbGxiYWNrXG4gICogQHJldHVybiB7IVByb21pc2V9IGEgcHJvbWlzZSBpbmRpY2F0aW5nIGZsb3cgaXMgc3RhcnRlZFxuICAqL1xuICBzYXZlU3Vic2NyaXB0aW9uKHJlcXVlc3RDYWxsYmFjaykge31cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIFN3RyBidXR0b24gc3R5bGUgYW5kIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICogVGhlIGRlZmF1bHQgdGhlbWUgaXMgXCJsaWdodFwiLlxuICAgKlxuICAgKiBAcGFyYW0geyFCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdF9jYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGNyZWF0ZUJ1dHRvbihvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgU3dHIGJ1dHRvbiBzdHlsZSBhbmQgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIHRvIGFuIGV4aXN0aW5nXG4gICAqIERPTSBlbGVtZW50LiBUaGUgZGVmYXVsdCB0aGVtZSBpcyBcImxpZ2h0XCIuXG4gICAqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGJ1dHRvblxuICAgKiBAcGFyYW0geyFCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdF9jYWxsYmFja1xuICAgKi9cbiAgYXR0YWNoQnV0dG9uKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIG9wdF9jYWxsYmFjaykge31cblxuICAvKipcbiAgICogQXR0YWNoZXMgc21hcnRCdXR0b24gZWxlbWVudCBhbmQgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgKiBUaGUgZGVmYXVsdCB0aGVtZSBpcyBcImxpZ2h0XCIuXG4gICAqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGJ1dHRvblxuICAgKiBAcGFyYW0geyFTbWFydEJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gb3B0X2NhbGxiYWNrXG4gICAqL1xuICBhdHRhY2hTbWFydEJ1dHRvbihidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgcHJvcGVuc2l0eSBtb2R1bGUgdGhhdCBwcm92aWRlcyBBUElzIHRvXG4gICAqIGdldCBwcm9wZW5zaXR5IHNjb3JlcyBiYXNlZCBvbiB1c2VyIHN0YXRlIGFuZCBldmVudHNcbiAgICogQHJldHVybiB7IVByb21pc2U8UHJvcGVuc2l0eUFwaT59XG4gICAqL1xuICBnZXRQcm9wZW5zaXR5TW9kdWxlKCkge31cblxuICAvKiogQHJldHVybiB7IVByb21pc2U8TG9nZ2VyQXBpPn0gKi9cbiAgZ2V0TG9nZ2VyKCkge31cbn1cblxuLyoqIEBlbnVtIHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgU3Vic2NyaXB0aW9uRmxvd3MgPSB7XG4gIFNIT1dfT0ZGRVJTOiAnc2hvd09mZmVycycsXG4gIFNIT1dfU1VCU0NSSUJFX09QVElPTjogJ3Nob3dTdWJzY3JpYmVPcHRpb24nLFxuICBTSE9XX0FCQlJWX09GRkVSOiAnc2hvd0FiYnJ2T2ZmZXInLFxuICBTSE9XX0NPTlRSSUJVVElPTl9PUFRJT05TOiAnc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMnLFxuICBTVUJTQ1JJQkU6ICdzdWJzY3JpYmUnLFxuICBDT05UUklCVVRFOiAnY29udHJpYnV0ZScsXG4gIENPTVBMRVRFX0RFRkVSUkVEX0FDQ09VTlRfQ1JFQVRJT046ICdjb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uJyxcbiAgTElOS19BQ0NPVU5UOiAnbGlua0FjY291bnQnLFxuICBTSE9XX0xPR0lOX1BST01QVDogJ3Nob3dMb2dpblByb21wdCcsXG4gIFNIT1dfTE9HSU5fTk9USUZJQ0FUSU9OOiAnc2hvd0xvZ2luTm90aWZpY2F0aW9uJyxcbn07XG5cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIHByb3BlcnRpZXM6XG4gKiAtIHdpbmRvd09wZW5Nb2RlIC0gZWl0aGVyIFwiYXV0b1wiIG9yIFwicmVkaXJlY3RcIi4gVGhlIFwicmVkaXJlY3RcIiB2YWx1ZSB3aWxsXG4gKiAgIGZvcmNlIHJlZGlyZWN0IGZsb3cgZm9yIGFueSB3aW5kb3cub3BlbiBvcGVyYXRpb24sIGluY2x1ZGluZyBwYXltZW50cy5cbiAqICAgVGhlIFwiYXV0b1wiIHZhbHVlIGVpdGhlciB1c2VzIGEgcmVkaXJlY3Qgb3IgYSBwb3B1cCBmbG93IGRlcGVuZGluZyBvblxuICogICB3aGF0J3MgcG9zc2libGUgb24gYSBzcGVjaWZpYyBlbnZpcm9ubWVudC4gRGVmYXVsdHMgdG8gXCJhdXRvXCIuXG4gKiAtIGVuYWJsZVN3Z0FuYWx5dGljcyAtIGlmIHNldCB0byB0cnVlIHRoZW4gZXZlbnRzIGxvZ2dlZCBieSB0aGUgcHVibGlzaGVyJ3NcbiAqICAgY2xpZW50IHdpbGwgYmUgc2VudCB0byBHb29nbGUncyBTd0cgYW5hbHl0aWNzIHNlcnZpY2UuICBUaGlzIGluZm9ybWF0aW9uIGlzXG4gKiAgIHVzZWQgdG8gY29tcGFyZSB0aGUgZWZmZWN0aXZlbmVzcyBvZiBHb29nbGUncyBidXktZmxvdyBldmVudHMgdG8gdGhvc2VcbiAqICAgZ2VuZXJhdGVkIGJ5IHRoZSBwdWJsaXNoZXIncyBjbGllbnQgY29kZS4gIFRoaXMgaW5jbHVkZXMgZXZlbnRzIHNlbnQgdG9cbiAqICAgYm90aCBQcm9wZW5zaXR5QXBpIGFuZCBMb2dnZXJBcGkuXG4gKiAtIGVuYWJsZVByb3BlbnNpdHkgLSBJZiB0cnVlIGV2ZW50cyBmcm9tIHRoZSBsb2dnZXIgYXBpIGFyZSBzZW50IHRvIHRoZVxuICogICBwcm9wZW5zaXR5IHNlcnZlci4gIE5vdGUgZXZlbnRzIGZyb20gdGhlIGxlZ2FjeSBwcm9wZW5zaXR5IGVuZHBvaW50IGFyZVxuICogICBhbHdheXMgc2VudC4gXG4gKiBAdHlwZWRlZiB7e1xuICogICBleHBlcmltZW50czogKCFBcnJheTxzdHJpbmc+fHVuZGVmaW5lZCksXG4gKiAgIHdpbmRvd09wZW5Nb2RlOiAoIVdpbmRvd09wZW5Nb2RlfHVuZGVmaW5lZCksXG4gKiAgIGFuYWx5dGljc01vZGU6ICghQW5hbHl0aWNzTW9kZXx1bmRlZmluZWQpLFxuICogICBlbmFibGVTd2dBbmFseXRpY3M6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGVuYWJsZVByb3BlbnNpdHk6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IENvbmZpZztcblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgQW5hbHl0aWNzTW9kZSA9IHtcbiAgREVGQVVMVDogMCxcbiAgSU1QUkVTU0lPTlM6IDEsXG59O1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBXaW5kb3dPcGVuTW9kZSA9IHtcbiAgQVVUTzogJ2F1dG8nLFxuICBSRURJUkVDVDogJ3JlZGlyZWN0Jyxcbn07XG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlID0ge1xuICAvLyBUaGUgcmVwbGFjZW1lbnQgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5LCBhbmQgdGhlIHJlbWFpbmluZyB0aW1lIHdpbGxcbiAgLy8gYmUgcHJvcmF0ZWQgYW5kIGNyZWRpdGVkIHRvIHRoZSB1c2VyLiBUaGlzIGlzIHRoZSBjdXJyZW50IGRlZmF1bHRcbiAgLy8gYmVoYXZpb3IuXG4gIElNTUVESUFURV9XSVRIX1RJTUVfUFJPUkFUSU9OOiAnSU1NRURJQVRFX1dJVEhfVElNRV9QUk9SQVRJT04nLFxufTtcblxuLyoqXG4gKiBUaGUgT2ZmZXJzL0NvbnRyaWJ1dGlvbnMgVUkgaXMgcmVuZGVyZWQgZGlmZmVyZW50bHkgYmFzZWQgb24gdGhlXG4gKiBQcm9kdWN0VHlwZS4gVGhlIFByb2R1Y3RUeXBlIHBhcmFtZXRlciBpcyBwYXNzZWQgdG8gdGhlIFBheW1lbnRzIGZsb3csIGFuZFxuICogdGhlbiBwYXNzZWQgYmFjayB0byB0aGUgUGF5bWVudHMgY29uZmlybWF0aW9uIHBhZ2UgdG8gcmVuZGVyIG1lc3NhZ2VzL3RleHRcbiAqIGJhc2VkIG9uIHRoZSBQcm9kdWN0VHlwZS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBQcm9kdWN0VHlwZSA9IHtcbiAgU1VCU0NSSVBUSU9OOiAnU1VCU0NSSVBUSU9OJyxcbiAgVUlfQ09OVFJJQlVUSU9OOiAnVUlfQ09OVFJJQlVUSU9OJyxcbn07XG5cbi8qKlxuICogQHJldHVybiB7IUNvbmZpZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRDb25maWcoKSB7XG4gIHJldHVybiB7XG4gICAgd2luZG93T3Blbk1vZGU6IFdpbmRvd09wZW5Nb2RlLkFVVE8sXG4gICAgYW5hbHl0aWNzTW9kZTogQW5hbHl0aWNzTW9kZS5ERUZBVUxULFxuICAgIGVuYWJsZVN3Z0FuYWx5dGljczogZmFsc2UsXG4gICAgZW5hYmxlUHJvcGVuc2l0eTogZmFsc2UsXG4gIH07XG59XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gc2t1cyAtIGEgbGlzdCBvZiBTS1VzIHRvIHJldHVybiBmcm9tIHRoZSBkZWZpbmVkIG9yIGRlZmF1bHQgbGlzdC4gVGhlXG4gKiAgIG9yZGVyIGlzIHByZXNlcnZlZC5cbiAqIC0gbGlzdCAtIGEgcHJlZGVmaW5lZCBsaXN0IG9mIFNLVXMuIFVzZSBvZiB0aGlzIHByb3BlcnR5IGlzIHVuY29tbW9uLlxuICogICBQb3NzaWJsZSB2YWx1ZXMgYXJlIFwiZGVmYXVsdFwiIGFuZCBcImFtcFwiLiBEZWZhdWx0IGlzIFwiZGVmYXVsdFwiLlxuICogLSBpc0Nsb3NhYmxlIC0gYSBib29sZWFuIHZhbHVlIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzIGNsb3NhYmxlLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHNrdXM6ICghQXJyYXk8c3RyaW5nPnx1bmRlZmluZWQpLFxuICogICBsaXN0OiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGlzQ2xvc2FibGU6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IE9mZmVyc1JlcXVlc3Q7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBsaW5rUmVxdWVzdGVkOiBib29sZWFuLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBMb2dpblJlcXVlc3Q7XG5cblxuLyoqXG4gKiBQcm9wZXJ0aWVzOlxuICogLSBvbmUgYW5kIG9ubHkgb25lIG9mIFwidG9rZW5cIiBvciBcImF1dGhDb2RlXCJcbiAqIEF1dGhDb2RlIHJlZmVyZW5jZTogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWN0aW9ucy9pZGVudGl0eS9vYXV0aDItY29kZS1mbG93XG4gKiBUb2tlbiByZWZlcmVuY2U6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FjdGlvbnMvaWRlbnRpdHkvb2F1dGgyLWltcGxpY2l0LWZsb3dcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHRva2VuOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGF1dGhDb2RlOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0O1xuXG4vKipcbiAqIENhbGxiYWNrIGZvciByZXRyaWV2aW5nIHN1YnNjcmlwdGlvbiByZXF1ZXN0XG4gKlxuICogQGNhbGxiYWNrIFNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2tcbiAqIEByZXR1cm4geyFQcm9taXNlPFNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0PiB8ICFTYXZlU3Vic2NyaXB0aW9uUmVxdWVzdH0gcmVxdWVzdFxuICovXG5leHBvcnQgbGV0IFNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2s7XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gbGFuZzogU2V0cyB0aGUgYnV0dG9uIFNWRyBhbmQgdGl0bGUuIERlZmF1bHQgaXMgXCJlblwiLlxuICogLSB0aGVtZTogXCJsaWdodFwiIG9yIFwiZGFya1wiLiBEZWZhdWx0IGlzIFwibGlnaHRcIi5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICB0aGVtZTogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBsYW5nOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEJ1dHRvbk9wdGlvbnM7XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gbGFuZzogU2V0cyB0aGUgYnV0dG9uIFNWRyBhbmQgdGl0bGUuIERlZmF1bHQgaXMgXCJlblwiLlxuICogLSB0aGVtZTogXCJsaWdodFwiIG9yIFwiZGFya1wiLiBEZWZhdWx0IGlzIFwibGlnaHRcIi5cbiAqIC0gbWVzc2FnZVRleHRDb2xvcjogT3ZlcnJpZGVzIHRoZW1lIGNvbG9yIGZvciBtZXNzYWdlIHRleHQuIChleDogXCIjMDlmXCIpXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgdGhlbWU6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgbGFuZzogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBtZXNzYWdlVGV4dENvbG9yOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFNtYXJ0QnV0dG9uT3B0aW9ucztcblxuLyoqXG4gKiBQcm9wZXJ0aWVzOlxuICogLSBza3U6IFJlcXVpcmVkLiBTa3UgdG8gYWRkIHRvIHRoZSB1c2VyJ3Mgc3Vic2NyaXB0aW9ucy5cbiAqIC0gb2xkU2t1OiBPcHRpb25hbC4gVGhpcyBpcyBpZiB5b3Ugd2FudCB0byByZXBsYWNlIG9uZSBza3Ugd2l0aCBhbm90aGVyLiBGb3JcbiAqICBleGFtcGxlLCBpZiBhIHVzZXIgd2FudHMgdG8gdXBncmFkZSBvciBkb3duZ3JhZGUgdGhlaXIgY3VycmVudCBzdWJzY3JpcHRpb24uXG4gKiAtIHByb3JhdGlvbk1vZGU6IE9wdGlvbmFsLiBXaGVuIHJlcGxhY2luZyBhIHN1YnNjcmlwdGlvbiB5b3UgY2FuIGRlY2lkZSBvbiBhXG4gKiAgc3BlY2lmaWMgcHJvcmF0aW9uIG1vZGUgdG8gY2hhcmdlIHRoZSB1c2VyLlxuICogIFRoZSBkZWZhdWx0IGlzIElNTUVESUFURV9XSVRIX1RJTUVfUFJPUkFUSU9OLlxuICpcbiAqICBAdHlwZWRlZiB7e1xuICogICAgc2t1SWQ6IHN0cmluZyxcbiAqICAgIG9sZFNrdTogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICAgcmVwbGFjZVNrdVByb3JhdGlvbk1vZGU6IChSZXBsYWNlU2t1UHJvcmF0aW9uTW9kZXx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBTdWJzY3JpcHRpb25SZXF1ZXN0O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgVXNlckRhdGEge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRUb2tlblxuICAgKiBAcGFyYW0geyFPYmplY3R9IGRhdGFcbiAgICovXG4gIGNvbnN0cnVjdG9yKGlkVG9rZW4sIGRhdGEpIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5pZFRva2VuID0gaWRUb2tlbjtcbiAgICAvKiogQGNvbnN0IHshT2JqZWN0fSAqL1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG5cbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5pZCA9IGRhdGFbJ3N1YiddO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmVtYWlsID0gZGF0YVsnZW1haWwnXTtcbiAgICAvKiogQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IGRhdGFbJ2VtYWlsX3ZlcmlmaWVkJ107XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMubmFtZSA9IGRhdGFbJ25hbWUnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5naXZlbk5hbWUgPSBkYXRhWydnaXZlbl9uYW1lJ107XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZmFtaWx5TmFtZSA9IGRhdGFbJ2ZhbWlseV9uYW1lJ107XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucGljdHVyZVVybCA9IGRhdGFbJ3BpY3R1cmUnXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshVXNlckRhdGF9XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhKHRoaXMuaWRUb2tlbiwgdGhpcy5kYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2lkJzogdGhpcy5pZCxcbiAgICAgICdlbWFpbCc6IHRoaXMuZW1haWwsXG4gICAgICAnZW1haWxWZXJpZmllZCc6IHRoaXMuZW1haWxWZXJpZmllZCxcbiAgICAgICduYW1lJzogdGhpcy5uYW1lLFxuICAgICAgJ2dpdmVuTmFtZSc6IHRoaXMuZ2l2ZW5OYW1lLFxuICAgICAgJ2ZhbWlseU5hbWUnOiB0aGlzLmZhbWlseU5hbWUsXG4gICAgICAncGljdHVyZVVybCc6IHRoaXMucGljdHVyZVVybCxcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge2Rlc2VyaWFsaXplLCBnZXRMYWJlbH0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7XG4gIEFjdGl2aXR5UG9ydHMgYXMgV2ViQWN0aXZpdHlQb3J0cyxcbiAgQWN0aXZpdHlJZnJhbWVQb3J0IGFzIFdlYkFjdGl2aXR5SWZyYW1lUG9ydCxcbn0gZnJvbSAnd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMnO1xuaW1wb3J0IHtkZWJ1Z0xvZ30gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpdml0eVBvcnREZWYge1xuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UmVzdWx0Pn1cbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHt9XG59XG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEFjdGl2aXR5UG9ydCBleHRlbmRzIEFjdGl2aXR5UG9ydERlZiB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtb2RlIG9mIHRoZSBhY3Rpdml0eTogaWZyYW1lLCBwb3B1cCBvciByZWRpcmVjdC5cbiAgICogQHJldHVybiB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5TW9kZX1cbiAgICovXG4gIGdldE1vZGUoKSB7fVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIHRoZSByZXN1bHQgd2hlbiByZWFkeS4gVGhlIGNsaWVudCBzaG91bGQgdmVyaWZ5IHRoZSBhY3Rpdml0eSdzXG4gICAqIG1vZGUsIG9yaWdpbiwgdmVyaWZpY2F0aW9uIGFuZCBzZWN1cmUgY2hhbm5lbCBmbGFncyBiZWZvcmUgZGVjaWRpbmdcbiAgICogd2hldGhlciBvciBub3QgdG8gdHJ1c3QgdGhlIHJlc3VsdC5cbiAgICpcbiAgICogUmV0dXJucyB0aGUgcHJvbWlzZSB0aGF0IHlpZWxkcyB3aGVuIHRoZSBhY3Rpdml0eSBoYXMgYmVlbiBjb21wbGV0ZWQgYW5kXG4gICAqIGVpdGhlciBhIHJlc3VsdCwgYSBjYW5jZWxhdGlvbiBvciBhIGZhaWx1cmUgaGFzIGJlZW4gcmV0dXJuZWQuXG4gICAqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVJlc3VsdD59XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgYWNjZXB0UmVzdWx0KCkge31cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB5aWVsZHMgd2hlbiB0aGUgaWZyYW1lIGlzIHJlYWR5IHRvIGJlIGludGVyYWN0ZWRcbiAgICogd2l0aC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7fVxuXG4gIC8qKlxuICAgKiBXYWl0cyB1bnRpbCB0aGUgYWN0aXZpdHkgcG9ydCBpcyBjb25uZWN0ZWQgdG8gdGhlIGhvc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY29ubmVjdCgpIHt9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3QgdGhlIGFjdGl2aXR5IGJpbmRpbmcgYW5kIGNsZWFudXAgbGlzdGVuZXJzLlxuICAgKi9cbiAgZGlzY29ubmVjdCgpIHt9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHJlc2l6ZSByZXF1ZXN0cy4gT25jZSBzdWNjZXNzZnVsbHkgcmVzaXplZCxcbiAgICogZW5zdXJlIHRvIGNhbGwgYHJlc2l6ZWQoKWAgbWV0aG9kLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlcil9IHVudXNlZENhbGxiYWNrXG4gICAqL1xuICBvblJlc2l6ZVJlcXVlc3QodW51c2VkQ2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgaG9zdC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSB1bnVzZWRQYXlsb2FkXG4gICAqL1xuICBtZXNzYWdlRGVwcmVjYXRlZCh1bnVzZWRQYXlsb2FkKSB7fVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byByZWNlaXZlIG1lc3NhZ2VzIGZyb20gdGhlIGhvc3QuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIU9iamVjdCl9IHVudXNlZENhbGxiYWNrXG4gICAqL1xuICBvbk1lc3NhZ2VEZXByZWNhdGVkKHVudXNlZENhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZX0gdW51c2VkUmVxdWVzdFxuICAgKi9cbiAgZXhlY3V0ZSh1bnVzZWRSZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFmdW5jdGlvbihuZXc6IFQpfSB1bnVzZWRNZXNzYWdlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0KX0gdW51c2VkQ2FsbGJhY2tcbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIG9uKHVudXNlZE1lc3NhZ2UsIHVudXNlZENhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBTaWduYWxzIGJhY2sgdG8gdGhlIGFjdGl2aXR5IGltcGxlbWVudGF0aW9uIHRoYXQgdGhlIGNsaWVudCBoYXMgdXBkYXRlZFxuICAgKiB0aGUgYWN0aXZpdHkncyBzaXplLlxuICAgKi9cbiAgcmVzaXplZCgpIHt9XG59XG4vKipcbiAqIEBpbXBsZW1lbnRzIHtBY3Rpdml0eVBvcnREZWZ9XG4gKi9cbmNsYXNzIEFjdGl2aXR5UG9ydERlcHJlY2F0ZWQge1xuICAvKipcbiAgICogQHBhcmFtIHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0fSBwb3J0XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwb3J0KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydH0gKi9cbiAgICB0aGlzLnBvcnRfID0gcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlSZXN1bHQ+fVxuICAgKi9cbiAgYWNjZXB0UmVzdWx0KCkge1xuICAgIHJldHVybiB0aGlzLnBvcnRfLmFjY2VwdFJlc3VsdCgpO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge0FjdGl2aXR5UG9ydERlZn1cbiAqL1xuZXhwb3J0IGNsYXNzIEFjdGl2aXR5SWZyYW1lUG9ydCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGlmcmFtZSwgdXJsLCBvcHRfYXJncykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnR9ICovXG4gICAgdGhpcy5pZnJhbWVQb3J0XyA9IG5ldyBXZWJBY3Rpdml0eUlmcmFtZVBvcnQoaWZyYW1lLCB1cmwsIG9wdF9hcmdzKTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgZnVuY3Rpb24oIU9iamVjdCk+fSAqL1xuICAgIHRoaXMuY2FsbGJhY2tNYXBfID0ge307XG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oIS4uL3Byb3RvL2FwaV9tZXNzYWdlcy5NZXNzYWdlKX0gKi9cbiAgICB0aGlzLmNhbGxiYWNrT3JpZ2luYWxfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHlpZWxkcyB3aGVuIHRoZSBpZnJhbWUgaXMgcmVhZHkgdG8gYmUgaW50ZXJhY3RlZFxuICAgKiB3aXRoLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVQb3J0Xy53aGVuUmVhZHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0cyB1bnRpbCB0aGUgYWN0aXZpdHkgcG9ydCBpcyBjb25uZWN0ZWQgdG8gdGhlIGhvc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVQb3J0Xy5jb25uZWN0KCkudGhlbigoKSA9PiB7XG4gICAgICAvLyBBdHRhY2ggYSBjYWxsYmFjayB0byByZWNlaXZlIG1lc3NhZ2VzIGFmdGVyIGNvbm5lY3Rpb24gY29tcGxldGVcbiAgICAgIHRoaXMuaWZyYW1lUG9ydF8ub25NZXNzYWdlKGRhdGEgPT4ge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja09yaWdpbmFsXykge1xuICAgICAgICAgIHRoaXMuY2FsbGJhY2tPcmlnaW5hbF8oZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBkYXRhICYmIGRhdGFbJ1JFU1BPTlNFJ107XG4gICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNhbGxiYWNrTWFwX1tyZXNwb25zZVswXV07XG4gICAgICAgIGlmIChjYikge1xuICAgICAgICAgIGNiKGRlc2VyaWFsaXplKHJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3QgdGhlIGFjdGl2aXR5IGJpbmRpbmcgYW5kIGNsZWFudXAgbGlzdGVuZXJzLlxuICAgKi9cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLmlmcmFtZVBvcnRfLmRpc2Nvbm5lY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtb2RlIG9mIHRoZSBhY3Rpdml0eTogaWZyYW1lLCBwb3B1cCBvciByZWRpcmVjdC5cbiAgICogQHJldHVybiB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5TW9kZX1cbiAgICovXG4gIGdldE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lUG9ydF8uZ2V0TW9kZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgdGhlIHJlc3VsdCB3aGVuIHJlYWR5LiBUaGUgY2xpZW50IHNob3VsZCB2ZXJpZnkgdGhlIGFjdGl2aXR5J3NcbiAgICogbW9kZSwgb3JpZ2luLCB2ZXJpZmljYXRpb24gYW5kIHNlY3VyZSBjaGFubmVsIGZsYWdzIGJlZm9yZSBkZWNpZGluZ1xuICAgKiB3aGV0aGVyIG9yIG5vdCB0byB0cnVzdCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgeWllbGRzIHdoZW4gdGhlIGFjdGl2aXR5IGhhcyBiZWVuIGNvbXBsZXRlZCBhbmRcbiAgICogZWl0aGVyIGEgcmVzdWx0LCBhIGNhbmNlbGF0aW9uIG9yIGEgZmFpbHVyZSBoYXMgYmVlbiByZXR1cm5lZC5cbiAgICpcbiAgICogQHJldHVybiB7IVByb21pc2U8IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UmVzdWx0Pn1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lUG9ydF8uYWNjZXB0UmVzdWx0KCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayB0byBoYW5kbGUgcmVzaXplIHJlcXVlc3RzLiBPbmNlIHN1Y2Nlc3NmdWxseSByZXNpemVkLFxuICAgKiBlbnN1cmUgdG8gY2FsbCBgcmVzaXplZCgpYCBtZXRob2QuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyKX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzaXplUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZVBvcnRfLm9uUmVzaXplUmVxdWVzdChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBob3N0LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IHBheWxvYWRcbiAgICovXG4gIG1lc3NhZ2VEZXByZWNhdGVkKHBheWxvYWQpIHtcbiAgICB0aGlzLmlmcmFtZVBvcnRfLm1lc3NhZ2UocGF5bG9hZCk7XG4gICAgZGVidWdMb2coJ1dBUk5JTkc6IG1lc3NhZ2VEZXByZWNhdGVkKCkgaXMgZGVwcmVjYXRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSB0aGUgaG9zdC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uTWVzc2FnZURlcHJlY2F0ZWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrT3JpZ2luYWxfID0gY2FsbGJhY2s7XG4gICAgZGVidWdMb2coJ1dBUk5JTkc6IHVzZSBvZiBkZXByZWNhdGVkIEFQSSBvbk1lc3NhZ2VEZXByZWNhdGVkKCknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZX0gcmVxdWVzdFxuICAgKi9cbiAgZXhlY3V0ZShyZXF1ZXN0KSB7XG4gICAgdGhpcy5pZnJhbWVQb3J0Xy5tZXNzYWdlKHsnUkVRVUVTVCc6IHJlcXVlc3QudG9BcnJheSgpfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshZnVuY3Rpb24obmV3OiBUKX0gbWVzc2FnZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCEuLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZSl9IGNhbGxiYWNrXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqL1xuICBvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGxhYmVsID0gZ2V0TGFiZWwobWVzc2FnZSk7XG4gICAgaWYgKCFsYWJlbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGRhdGEgdHlwZScpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jYWxsYmFja01hcF9bbGFiZWxdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdHlwZSBvciBkdXBsaWNhdGUgY2FsbGJhY2sgZm9yICcsIGxhYmVsKTtcbiAgICB9XG4gICAgdGhpcy5jYWxsYmFja01hcF9bbGFiZWxdID0gY2FsbGJhY2s7XG4gIH1cblxuICAvKipcbiAgICogU2lnbmFscyBiYWNrIHRvIHRoZSBhY3Rpdml0eSBpbXBsZW1lbnRhdGlvbiB0aGF0IHRoZSBjbGllbnQgaGFzIHVwZGF0ZWRcbiAgICogdGhlIGFjdGl2aXR5J3Mgc2l6ZS5cbiAgICovXG4gIHJlc2l6ZWQoKSB7XG4gICAgdGhpcy5pZnJhbWVQb3J0Xy5yZXNpemVkKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFjdGl2aXR5UG9ydHMge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBuZXcgV2ViQWN0aXZpdHlQb3J0cyh3aW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGFuIGFjdGl2aXR5IHdpdGhpbiB0aGUgc3BlY2lmaWVkIGlmcmFtZS5cbiAgICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgKi9cbiAgb3BlbklmcmFtZShpZnJhbWUsIHVybCwgb3B0X2FyZ3MpIHtcbiAgICBjb25zdCBhY3Rpdml0eVBvcnQgPSBuZXcgQWN0aXZpdHlJZnJhbWVQb3J0KGlmcmFtZSwgdXJsLCBvcHRfYXJncyk7XG4gICAgcmV0dXJuIGFjdGl2aXR5UG9ydC5jb25uZWN0KCkudGhlbigoKSA9PiBhY3Rpdml0eVBvcnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGFuIGFjdGl2aXR5IGluIGEgc2VwYXJhdGUgd2luZG93LiBUaGUgcmVzdWx0IHdpbGwgYmUgZGVsaXZlcmVkXG4gICAqIHRvIHRoZSBgb25SZXN1bHRgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBUaGUgYWN0aXZpdHkgY2FuIGJlIG9wZW5lZCBpbiB0d28gbW9kZXM6IFwicG9wdXBcIiBhbmQgXCJyZWRpcmVjdFwiLiBUaGlzXG4gICAqIGRlcGVuZHMgb24gdGhlIGB0YXJnZXRgIHZhbHVlLCBidXQgYWxzbyBvbiB0aGUgYnJvd3Nlci9lbnZpcm9ubWVudC5cbiAgICpcbiAgICogVGhlIGFsbG93ZWQgYHRhcmdldGAgdmFsdWVzIGFyZSBgX2JsYW5rYCwgYF90b3BgIGFuZCBuYW1lIHRhcmdldHMuIFRoZVxuICAgKiBgX3NlbGZgLCBgX3BhcmVudGAgYW5kIHNpbWlsYXIgdGFyZ2V0cyBhcmUgbm90IGFsbG93ZWQuXG4gICAqXG4gICAqIFRoZSBgX3RvcGAgdGFyZ2V0IGluZGljYXRlcyB0aGF0IHRoZSBhY3Rpdml0eSBzaG91bGQgYmUgb3BlbmVkIGFzIGFcbiAgICogXCJyZWRpcmVjdFwiLCB3aGlsZSBvdGhlciB0YXJnZXRzIGluZGljYXRlIHRoYXQgdGhlIGFjdGl2aXR5IHNob3VsZCBiZVxuICAgKiBvcGVuZWQgYXMgYSBwb3B1cC4gVGhlIGFjdGl2aXR5IGNsaWVudCB3aWxsIHRyeSB0byBob25vciB0aGUgcmVxdWVzdGVkXG4gICAqIHRhcmdldC4gSG93ZXZlciwgaXQncyBub3QgYWx3YXlzIHBvc3NpYmxlLiBTb21lIGVudmlyb25tZW50cyBkbyBub3RcbiAgICogYWxsb3cgcG9wdXBzIGFuZCB0aGV5IGVpdGhlciBmb3JjZSByZWRpcmVjdCBvciBmYWlsIHRoZSB3aW5kb3cgb3BlblxuICAgKiByZXF1ZXN0LiBJbiB0aGlzIGNhc2UsIHRoZSBhY3Rpdml0eSB3aWxsIHRyeSB0byBmYWxsYmFjayB0byB0aGUgXCJyZWRpcmVjdFwiXG4gICAqIG1vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0XG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEBwYXJhbSB7P3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5T3Blbk9wdGlvbnM9fSBvcHRfb3B0aW9uc1xuICAgKiBAcmV0dXJuIHt7dGFyZ2V0V2luOiA/V2luZG93fX1cbiAgICovXG4gIG9wZW4ocmVxdWVzdElkLCB1cmwsIHRhcmdldCwgb3B0X2FyZ3MsIG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlQb3J0c18ub3BlbihcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHVybCxcbiAgICAgIHRhcmdldCxcbiAgICAgIG9wdF9hcmdzLFxuICAgICAgb3B0X29wdGlvbnNcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgY2FsbGJhY2sgZm9yIHRoZSByZXN1bHQgb2YgdGhlIGFjdGl2aXR5IG9wZW5lZCB3aXRoIHRoZVxuICAgKiBzcGVjaWZpZWQgYHJlcXVlc3RJZGAgKHNlZSB0aGUgYG9wZW4oKWAgbWV0aG9kKS4gVGhlIGNhbGxiYWNrIGlzIGFcbiAgICogZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNpbmdsZSBgQWN0aXZpdHlQb3J0YCBhcmd1bWVudC4gVGhlIGNsaWVudFxuICAgKiBjYW4gdXNlIHRoaXMgb2JqZWN0IHRvIHZlcmlmeSB0aGUgcG9ydCB1c2luZyBpdCdzIG9yaWdpbiwgdmVyaWZpZWQgYW5kXG4gICAqIHNlY3VyZSBjaGFubmVsIGZsYWdzLiBUaGVuIHRoZSBjbGllbnQgY2FuIGNhbGxcbiAgICogYEFjdGl2aXR5UG9ydC5hY2NlcHRSZXN1bHQoKWAgbWV0aG9kIHRvIGFjY2VwdCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBUaGUgYWN0aXZpdHkgcmVzdWx0IGlzIGhhbmRsZWQgdmlhIGEgc2VwYXJhdGUgY2FsbGJhY2sgYmVjYXVzZSBvZiBhXG4gICAqIHBvc3NpYmxlIHJlZGlyZWN0LiBTbyB1c2Ugb2YgZGlyZWN0IGNhbGxiYWNrcyBhbmQvb3IgcHJvbWlzZXMgaXMgbm90XG4gICAqIHBvc3NpYmxlIGluIHRoYXQgY2FzZS5cbiAgICpcbiAgICogQSB0eXBpY2FsIGltcGxlbWVudGF0aW9uIHdvdWxkIGxvb2sgbGlrZTpcbiAgICogYGBgXG4gICAqIHBvcnRzLm9uUmVzdWx0KCdyZXF1ZXN0MScsIGZ1bmN0aW9uKHBvcnQpIHtcbiAgICogICBwb3J0LmFjY2VwdFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAqICAgICAvLyBPbmx5IHZlcmlmaWVkIG9yaWdpbnMgYXJlIGFsbG93ZWQuXG4gICAqICAgICBpZiAocmVzdWx0Lm9yaWdpbiA9PSBleHBlY3RlZE9yaWdpbiAmJlxuICAgKiAgICAgICAgIHJlc3VsdC5vcmlnaW5WZXJpZmllZCAmJlxuICAgKiAgICAgICAgIHJlc3VsdC5zZWN1cmVDaGFubmVsKSB7XG4gICAqICAgICAgIGhhbmRsZVJlc3VsdEZvclJlcXVlc3QxKHJlc3VsdCk7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqIH0pXG4gICAqXG4gICAqIHBvcnRzLm9wZW4oJ3JlcXVlc3QxJywgcmVxdWVzdDFVcmwsICdfYmxhbmsnKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbighQWN0aXZpdHlQb3J0RGVmKX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzdWx0KHJlcXVlc3RJZCwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLm9uUmVzdWx0KHJlcXVlc3RJZCwgcG9ydCA9PiB7XG4gICAgICBjYWxsYmFjayhuZXcgQWN0aXZpdHlQb3J0RGVwcmVjYXRlZChwb3J0KSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpfSBoYW5kbGVyXG4gICAqL1xuICBvblJlZGlyZWN0RXJyb3IoaGFuZGxlcikge1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18ub25SZWRpcmVjdEVycm9yKGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVBvcnRzfVxuICAgKi9cbiAgZ2V0T3JpZ2luYWxXZWJBY3Rpdml0eVBvcnRzKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5UG9ydHNfO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RGlhbG9nfSBmcm9tICcuL2RpYWxvZyc7XG5pbXBvcnQge0dyYXlwYW5lfSBmcm9tICcuL2dyYXlwYW5lJztcbmltcG9ydCB7aXNDYW5jZWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcblxuY29uc3QgUE9QVVBfWl9JTkRFWCA9IDIxNDc0ODM2NDc7XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciB0aGUgdG9wIGxldmVsIGRpYWxvZy5cbiAqIEBmaW5hbFxuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nTWFuYWdlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9kb2MuRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0RpYWxvZ30gKi9cbiAgICB0aGlzLmRpYWxvZ18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZTwhRGlhbG9nPn0gKi9cbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshR3JheXBhbmV9ICovXG4gICAgdGhpcy5wb3B1cEdyYXlwYW5lXyA9IG5ldyBHcmF5cGFuZShkb2MsIFBPUFVQX1pfSU5ERVgpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/V2luZG93fSAqL1xuICAgIHRoaXMucG9wdXBXaW5fID0gbnVsbDtcblxuICAgIHRoaXMucG9wdXBHcmF5cGFuZV8uZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMucG9wdXBXaW5fKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5wb3B1cFdpbl8uZm9jdXMoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvci5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGhpZGRlblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRGlhbG9nPn1cbiAgICovXG4gIG9wZW5EaWFsb2coaGlkZGVuID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMub3BlblByb21pc2VfKSB7XG4gICAgICB0aGlzLmRpYWxvZ18gPSBuZXcgRGlhbG9nKHRoaXMuZG9jXyk7XG4gICAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IHRoaXMuZGlhbG9nXy5vcGVuKGhpZGRlbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wZW5Qcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL3ZpZXcuVmlld30gdmlld1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBoaWRkZW5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvcGVuVmlldyh2aWV3LCBoaWRkZW4gPSBmYWxzZSkge1xuICAgIHZpZXcud2hlbkNvbXBsZXRlKCkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZVZpZXcodmlldyk7XG4gICAgICB9XG4gICAgICB0aHJvdyByZWFzb247XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMub3BlbkRpYWxvZyhoaWRkZW4pLnRoZW4oZGlhbG9nID0+IHtcbiAgICAgIHJldHVybiBkaWFsb2cub3BlblZpZXcodmlldyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/Li92aWV3LlZpZXd9IHZpZXdcbiAgICovXG4gIGNvbXBsZXRlVmlldyh2aWV3KSB7XG4gICAgLy8gR2l2ZSBhIHNtYWxsIGFtb3VudCBvZiB0aW1lIGZvciBhbm90aGVyIHZpZXcgdG8gdGFrZSBvdmVyIHRoZSBkaWFsb2cuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5kaWFsb2dfICYmIHRoaXMuZGlhbG9nXy5nZXRDdXJyZW50VmlldygpID09IHZpZXcpIHtcbiAgICAgICAgdGhpcy5jbG9zZV8oKTtcbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICBjb21wbGV0ZUFsbCgpIHtcbiAgICBpZiAodGhpcy5kaWFsb2dfKSB7XG4gICAgICB0aGlzLmNsb3NlXygpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wb3B1cEdyYXlwYW5lXy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgIHRoaXMucG9wdXBHcmF5cGFuZV8uZGVzdHJveSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBjbG9zZV8oKSB7XG4gICAgdGhpcy5kaWFsb2dfLmNsb3NlKCk7XG4gICAgdGhpcy5kaWFsb2dfID0gbnVsbDtcbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/V2luZG93fHVuZGVmaW5lZH0gdGFyZ2V0V2luXG4gICAqL1xuICBwb3B1cE9wZW5lZCh0YXJnZXRXaW4pIHtcbiAgICB0aGlzLnBvcHVwV2luXyA9IHRhcmdldFdpbiB8fCBudWxsO1xuICAgIGlmICghdGhpcy5wb3B1cEdyYXlwYW5lXy5pc0F0dGFjaGVkKCkpIHtcbiAgICAgIHRoaXMucG9wdXBHcmF5cGFuZV8uYXR0YWNoKCk7XG4gICAgfVxuICAgIHRoaXMucG9wdXBHcmF5cGFuZV8uc2hvdygpO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICBwb3B1cENsb3NlZCgpIHtcbiAgICB0aGlzLnBvcHVwV2luXyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucG9wdXBHcmF5cGFuZV8uaGlkZSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElnbm9yZS5cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtDU1MgYXMgRElBTE9HX0NTU30gZnJvbSAnLi4vLi4vYnVpbGQvY3NzL3VpL3VpLmNzcyc7XG5pbXBvcnQge3Jlc29sdmVEb2N9IGZyb20gJy4uL21vZGVsL2RvYyc7XG5pbXBvcnQge0dyYXlwYW5lfSBmcm9tICcuL2dyYXlwYW5lJztcbmltcG9ydCB7TG9hZGluZ1ZpZXd9IGZyb20gJy4uL3VpL2xvYWRpbmctdmlldyc7XG5pbXBvcnQge1xuICBjcmVhdGVFbGVtZW50LFxuICBpbmplY3RTdHlsZVNoZWV0LFxuICByZW1vdmVDaGlsZHJlbixcbiAgcmVtb3ZlRWxlbWVudCxcbn0gZnJvbSAnLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7c2V0U3R5bGVzLCBzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcbmltcG9ydCB7dHJhbnNpdGlvbn0gZnJvbSAnLi4vdXRpbHMvYW5pbWF0aW9uJztcbmltcG9ydCB7RnJpZW5kbHlJZnJhbWV9IGZyb20gJy4vZnJpZW5kbHktaWZyYW1lJztcblxuY29uc3QgWl9JTkRFWCA9IDIxNDc0ODM2NDc7XG5cbi8qKlxuICogRGVmYXVsdCBpZnJhbWUgaW1wb3J0YW50IHN0eWxlcy5cbiAqIE5vdGU6IFRoZSBpZnJhbWUgcmVzcG9uc2l2ZW5lc3MgbWVkaWEgcXVlcnkgc3R5bGUgaXMgaW5qZWN0ZWQgaW4gdGhlXG4gKiBwdWJsaXNoZXIncyBwYWdlIHNpbmNlIHN0eWxlIGF0dHJpYnV0ZSBjYW4gbm90IGluY2x1ZGUgbWVkaWEgcXVlcnkuXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn1cbiAqL1xuY29uc3Qgcm9vdEVsZW1lbnRJbXBvcnRhbnRTdHlsZXMgPSB7XG4gICdtaW4taGVpZ2h0JzogJzUwcHgnLFxuICAnYm9yZGVyJzogJ25vbmUnLFxuICAnZGlzcGxheSc6ICdibG9jaycsXG4gICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICd6LWluZGV4JzogWl9JTkRFWCxcbiAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG59O1xuXG4vKipcbiAqIFJlc2V0IHZpZXcgc3R5bGVzLlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59XG4gKi9cbmNvbnN0IHJlc2V0Vmlld1N0eWxlcyA9IHtcbiAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcbiAgJ3RvcCc6ICcwJyxcbiAgJ2xlZnQnOiAnMCcsXG4gICdyaWdodCc6ICcwJyxcbiAgJ2JvdHRvbSc6ICcwJyxcbiAgJ29wYWNpdHknOiAwLFxuICAvKiBUaGVzZSBsaW5lcyBhcmUgYSB3b3JrIGFyb3VuZCB0byB0aGlzIGlzc3VlIGluIGlPUzogICAgICovXG4gIC8qIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTUxOTggICAgICAgICAgKi9cbiAgJ2hlaWdodCc6IDAsXG4gICdtYXgtaGVpZ2h0JzogJzEwMCUnLFxuICAnbWF4LXdpZHRoJzogJzEwMCUnLFxuICAnbWluLWhlaWdodCc6ICcxMDAlJyxcbiAgJ21pbi13aWR0aCc6ICcxMDAlJyxcbiAgJ3dpZHRoJzogMCxcbn07XG5cbi8qKlxuICogUG9zaXRpb24gb2YgdGhlIGRpYWxvZy5cbiAqIEBjb25zdCBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBQb3NpdGlvbkF0ID0ge1xuICBCT1RUT006ICdCT1RUT00nLFxuICBUT1A6ICdUT1AnLFxuICBGTE9BVDogJ0ZMT0FUJyxcbiAgRlVMTDogJ0ZVTEwnLFxufTtcblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIHRoZSB0b3AgbGV2ZWwgZGlhbG9nLlxuICogQGZpbmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBEaWFsb2cge1xuICAvKipcbiAgICogQ3JlYXRlIGEgZGlhbG9nIGZvciB0aGUgcHJvdmlkZWQgZG9jLlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9kb2MuRG9jfSBkb2NcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj49fSBpbXBvcnRhbnRTdHlsZXNcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj49fSBzdHlsZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYywgaW1wb3J0YW50U3R5bGVzID0ge30sIHN0eWxlcyA9IHt9KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUZyaWVuZGx5SWZyYW1lfSAqL1xuICAgIHRoaXMuaWZyYW1lXyA9IG5ldyBGcmllbmRseUlmcmFtZShkb2MuZ2V0V2luKCkuZG9jdW1lbnQsIHtcbiAgICAgICdjbGFzcyc6ICdzd2ctZGlhbG9nJyxcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFHcmF5cGFuZX0gKi9cbiAgICB0aGlzLmdyYXlwYW5lXyA9IG5ldyBHcmF5cGFuZShkb2MsIFpfSU5ERVggLSAxKTtcblxuICAgIGNvbnN0IG1vZGlmaWVkSW1wb3J0YW50U3R5bGVzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgcm9vdEVsZW1lbnRJbXBvcnRhbnRTdHlsZXMsXG4gICAgICBpbXBvcnRhbnRTdHlsZXNcbiAgICApO1xuICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmlmcmFtZV8uZ2V0RWxlbWVudCgpLCBtb2RpZmllZEltcG9ydGFudFN0eWxlcyk7XG5cbiAgICBzZXRTdHlsZXModGhpcy5pZnJhbWVfLmdldEVsZW1lbnQoKSwgc3R5bGVzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7TG9hZGluZ1ZpZXd9ICovXG4gICAgdGhpcy5sb2FkaW5nVmlld18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLmNvbnRhaW5lcl8gPSBudWxsOyAvLyBEZXBlbmRzIG9uIGNvbnN0cnVjdGVkIGRvY3VtZW50IGluc2lkZSBpZnJhbWUuXG5cbiAgICAvKiogQHByaXZhdGUgez8uL3ZpZXcuVmlld30gKi9cbiAgICB0aGlzLnZpZXdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5hbmltYXRpbmdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmhpZGRlbl8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4vdmlldy5WaWV3fSAqL1xuICAgIHRoaXMucHJldmlvdXNQcm9ncmVzc1ZpZXdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnVzZUZpeGVkTGF5ZXJfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIGRpYWxvZyBhbmQgYnVpbGRzIHRoZSBpZnJhbWUgY29udGFpbmVyLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBoaWRkZW5cbiAgICogQHJldHVybiB7IVByb21pc2U8IURpYWxvZz59XG4gICAqL1xuICBvcGVuKGhpZGRlbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgaWZyYW1lID0gdGhpcy5pZnJhbWVfO1xuICAgIGlmIChpZnJhbWUuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhbHJlYWR5IG9wZW5lZCcpO1xuICAgIH1cblxuICAgIC8vIEF0dGFjaC5cbiAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLmFwcGVuZENoaWxkKGlmcmFtZS5nZXRFbGVtZW50KCkpOyAvLyBGaXJlcyBvbmxvYWQuXG5cbiAgICB0aGlzLmdyYXlwYW5lXy5hdHRhY2goKTtcblxuICAgIGlmIChoaWRkZW4pIHtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhpZnJhbWUuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICd2aXNpYmlsaXR5JzogJ2hpZGRlbicsXG4gICAgICAgICdvcGFjaXR5JzogMCxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5oaWRkZW5fID0gaGlkZGVuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dfKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlRml4ZWRMYXllcl8pIHtcbiAgICAgIHJldHVybiB0aGlzLmRvY19cbiAgICAgICAgLmFkZFRvRml4ZWRMYXllcihpZnJhbWUuZ2V0RWxlbWVudCgpKVxuICAgICAgICAudGhlbigoKSA9PiBpZnJhbWUud2hlblJlYWR5KCkpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmJ1aWxkSWZyYW1lXygpO1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlmcmFtZS53aGVuUmVhZHkoKS50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5idWlsZElmcmFtZV8oKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgdGhlIGlmcmFtZSB3aXRoIHRoZSBzdHlsaW5nIGFmdGVyIGlmcmFtZSBpcyBsb2FkZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidWlsZElmcmFtZV8oKSB7XG4gICAgY29uc3QgaWZyYW1lID0gdGhpcy5pZnJhbWVfO1xuICAgIGNvbnN0IGlmcmFtZUJvZHkgPSBpZnJhbWUuZ2V0Qm9keSgpO1xuICAgIGNvbnN0IGlmcmFtZURvYyA9IC8qKiBAdHlwZSB7IUhUTUxEb2N1bWVudH0gKi8gKHRoaXMuaWZyYW1lXy5nZXREb2N1bWVudCgpKTtcblxuICAgIC8vIEluamVjdCBHb29nbGUgZm9udHMgaW4gPEhFQUQ+IHNlY3Rpb24gb2YgdGhlIGlmcmFtZS5cbiAgICBpbmplY3RTdHlsZVNoZWV0KHJlc29sdmVEb2MoaWZyYW1lRG9jKSwgRElBTE9HX0NTUyk7XG5cbiAgICAvLyBBZGQgTG9hZGluZyBpbmRpY2F0b3IuXG4gICAgdGhpcy5sb2FkaW5nVmlld18gPSBuZXcgTG9hZGluZ1ZpZXcoaWZyYW1lRG9jKTtcbiAgICBpZnJhbWVCb2R5LmFwcGVuZENoaWxkKHRoaXMubG9hZGluZ1ZpZXdfLmdldEVsZW1lbnQoKSk7XG5cbiAgICAvLyBDb250YWluZXIgZm9yIGFsbCBkeW5hbWljIGNvbnRlbnQsIGluY2x1ZGluZyAzUCBpZnJhbWUuXG4gICAgdGhpcy5jb250YWluZXJfID0gY3JlYXRlRWxlbWVudChpZnJhbWVEb2MsICdzd2ctY29udGFpbmVyJywge30pO1xuICAgIGlmcmFtZUJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXJfKTtcbiAgICB0aGlzLnNldFBvc2l0aW9uXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgZGlhbG9nLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbmltYXRlZFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGNsb3NlKGFuaW1hdGVkID0gdHJ1ZSkge1xuICAgIGxldCBhbmltYXRpbmc7XG4gICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICBhbmltYXRpbmcgPSB0aGlzLmFuaW1hdGVfKCgpID0+IHtcbiAgICAgICAgdGhpcy5ncmF5cGFuZV8uaGlkZSgvKiBhbmltYXRlICovIHRydWUpO1xuICAgICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgICB0aGlzLmdldEVsZW1lbnQoKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgMzAwLFxuICAgICAgICAgICdlYXNlLW91dCdcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbmltYXRpbmcgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuaW1hdGluZy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGlmcmFtZUVsID0gdGhpcy5pZnJhbWVfLmdldEVsZW1lbnQoKTtcbiAgICAgIGlmcmFtZUVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lRWwpO1xuXG4gICAgICB0aGlzLnJlbW92ZVBhZGRpbmdUb0h0bWxfKCk7XG4gICAgICB0aGlzLmdyYXlwYW5lXy5kZXN0cm95KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY29udGFpbmVyIHdpdGhpbiB0aGUgZGlhbG9nLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldENvbnRhaW5lcigpIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgb3BlbmVkIHlldCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXJfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGF0dGFjaGVkIGlmcmFtZSBpbnN0YW5jZS5cbiAgICogQHJldHVybiB7IUZyaWVuZGx5SWZyYW1lfVxuICAgKi9cbiAgZ2V0SWZyYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgSWZyYW1lIGVsZW1lbnQuXG4gICAqIEByZXR1cm4geyFIVE1MSUZyYW1lRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXy5nZXRFbGVtZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNpdGlvbnMgdG8gdGhlIG5leHQgdmlldy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVudHJ5VHJhbnNpdGlvblRvTmV4dFZpZXdfKCkge1xuICAgIGlmICh0aGlzLnZpZXdfICYmIHRoaXMudmlld18uaGFzTG9hZGluZ0luZGljYXRvcigpKSB7XG4gICAgICAvLyBUZW1wb3JhcmlseSBjYWNoZSB0aGUgb2xkIHZpZXcuXG4gICAgICB0aGlzLnByZXZpb3VzUHJvZ3Jlc3NWaWV3XyA9IHRoaXMudmlld187XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpbmNlIGxvYWRpbmcgaW5kaWNhdG9yIHdpbGwgYmUgc2hvd24sIHJlbW92ZSBjb250ZW50cyBvZiBvbGQgdmlldy5cbiAgICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMuZ2V0Q29udGFpbmVyKCkpO1xuICAgICAgLy8gV2hlbiBsb2FkaW5nIGluZGljYXRvciB3YXMgbm90IGRpc3BsYXllZCBpbiB0aGUgcHJldmlvdXMgdmlldyxcbiAgICAgIC8vIGxvYWRpbmcgaW5kaWNhdG9yIG11c3QgYmUgZGlzcGxheWVkIHdoaWxlIHRyYW5zaXRpb25pbmcgdG8gbmV3IHZpZXcuXG4gICAgICB0aGlzLmxvYWRpbmdWaWV3Xy5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zaXRpb24gb3V0IG9mIGFuIG9sZCB2aWV3LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhpdFRyYW5zaXRpb25Gcm9tT2xkVmlld18oKSB7XG4gICAgLy8gSWYgcHJldmlvdXMgdmlldyBpcyBzdGlsbCBhcm91bmQsIHJlbW92ZSBpdC5cbiAgICBpZiAodGhpcy5wcmV2aW91c1Byb2dyZXNzVmlld18pIHtcbiAgICAgIHJlbW92ZUVsZW1lbnQodGhpcy5wcmV2aW91c1Byb2dyZXNzVmlld18uZ2V0RWxlbWVudCgpKTtcbiAgICAgIHRoaXMucHJldmlvdXNQcm9ncmVzc1ZpZXdfID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2FkaW5nVmlld18uaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHs/Li92aWV3LlZpZXd9ICovXG4gIGdldEN1cnJlbnRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBnaXZlbiB2aWV3IGFuZCByZW1vdmVzIGV4aXN0aW5nIHZpZXcgZnJvbSB0aGUgRE9NIGlmIGFueS5cbiAgICogQHBhcmFtIHshLi92aWV3LlZpZXd9IHZpZXdcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvcGVuVmlldyh2aWV3KSB7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHZpZXcuZ2V0RWxlbWVudCgpLCByZXNldFZpZXdTdHlsZXMpO1xuICAgIHRoaXMuZW50cnlUcmFuc2l0aW9uVG9OZXh0Vmlld18oKTtcblxuICAgIHRoaXMudmlld18gPSB2aWV3O1xuICAgIHRoaXMuZ2V0Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodmlldy5nZXRFbGVtZW50KCkpO1xuXG4gICAgLy8gSWYgdGhlIGN1cnJlbnQgdmlldyBzaG91bGQgZmFkZSB0aGUgcGFyZW50IGRvY3VtZW50LlxuICAgIGlmICh2aWV3LnNob3VsZEZhZGVCb2R5KCkgJiYgIXRoaXMuaGlkZGVuXykge1xuICAgICAgdGhpcy5ncmF5cGFuZV8uc2hvdygvKiBhbmltYXRlICovIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3LmluaXQodGhpcykudGhlbigoKSA9PiB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXModmlldy5nZXRFbGVtZW50KCksIHtcbiAgICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5oaWRkZW5fKSB7XG4gICAgICAgIGlmICh2aWV3LnNob3VsZEZhZGVCb2R5KCkpIHtcbiAgICAgICAgICB0aGlzLmdyYXlwYW5lXy5zaG93KC8qIGFuaW1hdGVkICovIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvd18oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhpdFRyYW5zaXRpb25Gcm9tT2xkVmlld18oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBpZnJhbWUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzaG93XygpIHtcbiAgICB0aGlzLmFuaW1hdGVfKCgpID0+IHtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICAnb3BhY3RpeSc6IDEsXG4gICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCksXG4gICAgICAgIHtcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgICAgfSxcbiAgICAgICAgMzAwLFxuICAgICAgICAnZWFzZS1vdXQnXG4gICAgICApO1xuICAgIH0pO1xuICAgIHRoaXMuaGlkZGVuXyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIGRpYWxvZyBjb250YWluZXIuXG4gICAqIEBwYXJhbSB7IS4vdmlldy5WaWV3fSB2aWV3XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7P1Byb21pc2V9XG4gICAqL1xuICByZXNpemVWaWV3KHZpZXcsIGhlaWdodCwgYW5pbWF0ZWQgPSB0cnVlKSB7XG4gICAgaWYgKHRoaXMudmlld18gIT0gdmlldykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5ld0hlaWdodCA9IHRoaXMuZ2V0TWF4QWxsb3dlZEhlaWdodF8oaGVpZ2h0KTtcblxuICAgIGxldCBhbmltYXRpbmc7XG4gICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICBjb25zdCBvbGRIZWlnaHQgPSB0aGlzLmdldEVsZW1lbnQoKS5vZmZzZXRIZWlnaHQ7XG4gICAgICBpZiAobmV3SGVpZ2h0ID49IG9sZEhlaWdodCkge1xuICAgICAgICAvLyBFeHBhbmQuXG4gICAgICAgIGFuaW1hdGluZyA9IHRoaXMuYW5pbWF0ZV8oKCkgPT4ge1xuICAgICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAgICAgJ2hlaWdodCc6IGAke25ld0hlaWdodH1weGAsXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZVkoJHtuZXdIZWlnaHQgLSBvbGRIZWlnaHR9cHgpYCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDMwMCxcbiAgICAgICAgICAgICdlYXNlLW91dCdcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENvbGxhcHNlLlxuICAgICAgICBhbmltYXRpbmcgPSB0aGlzLmFuaW1hdGVfKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZVkoJHtvbGRIZWlnaHQgLSBuZXdIZWlnaHR9cHgpYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzMDAsXG4gICAgICAgICAgICAnZWFzZS1vdXQnXG4gICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAgICAgICAnaGVpZ2h0JzogYCR7bmV3SGVpZ2h0fXB4YCxcbiAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKDApJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICdoZWlnaHQnOiBgJHtuZXdIZWlnaHR9cHhgLFxuICAgICAgfSk7XG4gICAgICBhbmltYXRpbmcgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuaW1hdGluZy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlUGFkZGluZ1RvSHRtbF8oaGVpZ2h0KTtcbiAgICAgIHZpZXcucmVzaXplZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhbmltYXRlXyhjYWxsYmFjaykge1xuICAgIGNvbnN0IHdhaXQgPSB0aGlzLmFuaW1hdGluZ18gfHwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgcmV0dXJuICh0aGlzLmFuaW1hdGluZ18gPSB3YWl0XG4gICAgICAudGhlbihcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9ycyB0byBtYWtlIHN1cmUgYW5pbWF0aW9ucyBkb24ndCBnZXQgc3R1Y2suXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5hbmltYXRpbmdfID0gbnVsbDtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1heGltdW0gYWxsb3dlZCBoZWlnaHQgZm9yIGN1cnJlbnQgdmlld3BvcnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TWF4QWxsb3dlZEhlaWdodF8oaGVpZ2h0KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKGhlaWdodCwgdGhpcy5kb2NfLmdldFdpbigpLi8qT0sqLyBpbm5lckhlaWdodCAqIDAuOSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZWxlbWVudCdzIGhlaWdodC5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0SGVpZ2h0XygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KCkub2Zmc2V0SGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBkaWFsb2cuIEN1cnJlbnRseSAnQk9UVE9NJyBpcyBzZXQgYnkgZGVmYXVsdC5cbiAgICovXG4gIHNldFBvc2l0aW9uXygpIHtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5nZXRFbGVtZW50KCksIHRoaXMuZ2V0UG9zaXRpb25TdHlsZV8oKSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRoZSBwYWRkaW5nIHRvIHRoZSBjb250YWluaW5nIHBhZ2Ugc28gYXMgdG8gbm90IGhpZGUgdGhlIGNvbnRlbnRcbiAgICogYmVoaW5kIHRoZSBwb3B1cCwgaWYgcmVuZGVyZWQgYXQgdGhlIGJvdHRvbS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG5ld0hlaWdodFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlUGFkZGluZ1RvSHRtbF8obmV3SGVpZ2h0KSB7XG4gICAgaWYgKHRoaXMuaW5mZXJQb3NpdGlvbl8oKSA9PSBQb3NpdGlvbkF0LkJPVFRPTSkge1xuICAgICAgY29uc3QgYm90dG9tUGFkZGluZyA9IG5ld0hlaWdodCArIDIwOyAvLyBBZGQgc29tZSBleHRyYSBwYWRkaW5nLlxuICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSB0aGlzLmRvY18uZ2V0Um9vdEVsZW1lbnQoKTtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhodG1sRWxlbWVudCwge1xuICAgICAgICAncGFkZGluZy1ib3R0b20nOiBgJHtib3R0b21QYWRkaW5nfXB4YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHByZXZpb3VseSBhZGRlZCBib3R0b20gcGFkZGluZyBmcm9tIHRoZSBkb2N1bWVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZVBhZGRpbmdUb0h0bWxfKCkge1xuICAgIHRoaXMuZG9jXy5nZXRSb290RWxlbWVudCgpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBkaWFsb2cuIEN1cnJlbnRseSBkaWFsb2cgaXMgcG9zaXRpb25lZCBhdFxuICAgKiB0aGUgYm90dG9tIG9ubHkuIFRoaXMgY291bGQgY2hhbmdlIGluIGZ1dHVyZSB0byBhZGp1c3QgdGhlIGRpYWxvZyBwb3NpdGlvblxuICAgKiBiYXNlZCBvbiB0aGUgc2NyZWVuIHNpemUuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluZmVyUG9zaXRpb25fKCkge1xuICAgIHJldHVybiBQb3NpdGlvbkF0LkJPVFRPTTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdHlsZXMgcmVxdWlyZWQgdG8gcG9zdGlvbiB0aGUgZGlhbG9nLlxuICAgKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRQb3NpdGlvblN0eWxlXygpIHtcbiAgICBjb25zdCBkaWFsb2dQb3NpdGlvbiA9IHRoaXMuaW5mZXJQb3NpdGlvbl8oKTtcbiAgICBzd2l0Y2ggKGRpYWxvZ1Bvc2l0aW9uKSB7XG4gICAgICBjYXNlIFBvc2l0aW9uQXQuQk9UVE9NOlxuICAgICAgICByZXR1cm4geydib3R0b20nOiAwfTtcbiAgICAgIGNhc2UgUG9zaXRpb25BdC5UT1A6XG4gICAgICAgIHJldHVybiB7J3RvcCc6IDB9O1xuICAgICAgY2FzZSBQb3NpdGlvbkF0LkZMT0FUOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgICAgICAgJ3RvcCc6ICc1MCUnLFxuICAgICAgICAgICdsZWZ0JzogJzUwJScsXG4gICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknLFxuICAgICAgICB9O1xuICAgICAgY2FzZSBQb3NpdGlvbkF0LkZVTEw6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnLFxuICAgICAgICAgICd0b3AnOiAwLFxuICAgICAgICAgICdib3R0b20nOiAwLFxuICAgICAgICB9O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHsnYm90dG9tJzogMH07XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRWxlbWVudCwgaXNDb25uZWN0ZWR9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge3Jlc2V0QWxsU3R5bGVzfSBmcm9tICcuLi91dGlscy9zdHlsZSc7XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nfG51bWJlcj59ICovXG5jb25zdCBmcmllbmRseUlmcmFtZUF0dHJpYnV0ZXMgPSB7XG4gICdmcmFtZWJvcmRlcic6IDAsXG4gICdzY3JvbGxpbmcnOiAnbm8nLFxuICAnc3JjJzogJ2Fib3V0OmJsYW5rJyxcbn07XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBidWlsZGluZyBmcmllbmRseSBpZnJhbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBGcmllbmRseUlmcmFtZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gYXR0cnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYywgYXR0cnMgPSB7fSkge1xuICAgIGNvbnN0IG1lcmdlZEF0dHJzID0gT2JqZWN0LmFzc2lnbih7fSwgZnJpZW5kbHlJZnJhbWVBdHRyaWJ1dGVzLCBhdHRycyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gLyoqIEB0eXBlIHshSFRNTElGcmFtZUVsZW1lbnR9ICovIChjcmVhdGVFbGVtZW50KFxuICAgICAgZG9jLFxuICAgICAgJ2lmcmFtZScsXG4gICAgICBtZXJnZWRBdHRyc1xuICAgICkpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIG5ldyBpZnJhbWUgZG9lcyBub3QgaW5oZXJpdCBhbnkgQ1NTIHN0eWxlcy5cbiAgICByZXNldEFsbFN0eWxlcyh0aGlzLmlmcmFtZV8pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuaWZyYW1lXy5vbmxvYWQgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gcHJvbWlzZSBpcyByZXNvbHZlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZHlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGlmcmFtZSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHshSFRNTElGcmFtZUVsZW1lbnR9XG4gICAqL1xuICBnZXRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZG9jdW1lbnQgb2JqZWN0IG9mIHRoZSBpZnJhbWUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IURvY3VtZW50fVxuICAgKi9cbiAgZ2V0RG9jdW1lbnQoKSB7XG4gICAgY29uc3QgZG9jID1cbiAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLmNvbnRlbnREb2N1bWVudCB8fFxuICAgICAgKHRoaXMuZ2V0RWxlbWVudCgpLmNvbnRlbnRXaW5kb3cgJiZcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCkuY29udGVudFdpbmRvdy5kb2N1bWVudCk7XG5cbiAgICBpZiAoIWRvYykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgbG9hZGVkJyk7XG4gICAgfVxuICAgIHJldHVybiBkb2M7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYm9keSBvZiB0aGUgaWZyYW1lLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldEJvZHkoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovICh0aGlzLmdldERvY3VtZW50KCkuYm9keSk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgaWZyYW1lIGlzIGNvbm5lY3RlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiBpc0Nvbm5lY3RlZCh0aGlzLmdldEVsZW1lbnQoKSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcbmltcG9ydCB7dHJhbnNpdGlvbn0gZnJvbSAnLi4vdXRpbHMvYW5pbWF0aW9uJztcblxuZXhwb3J0IGNsYXNzIEdyYXlwYW5lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvY1xuICAgKiBAcGFyYW0ge251bWJlcn0gekluZGV4XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MsIHpJbmRleCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuZmFkZUJhY2tncm91bmRfID0gdGhpcy5kb2NfXG4gICAgICAuZ2V0V2luKClcbiAgICAgIC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzd2ctcG9wdXAtYmFja2dyb3VuZCcpO1xuICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmZhZGVCYWNrZ3JvdW5kXywge1xuICAgICAgJ3otaW5kZXgnOiB6SW5kZXgsXG4gICAgICAnZGlzcGxheSc6ICdub25lJyxcbiAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgICAndG9wJzogMCxcbiAgICAgICdyaWdodCc6IDAsXG4gICAgICAnYm90dG9tJzogMCxcbiAgICAgICdsZWZ0JzogMCxcbiAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMzIsIDMzLCAzNiwgLjYpJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmFkZUJhY2tncm91bmRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0F0dGFjaGVkKCkge1xuICAgIHJldHVybiAhIXRoaXMuZmFkZUJhY2tncm91bmRfLnBhcmVudE5vZGU7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgdGhlIGdyYXlwYW5lIHRvIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGF0dGFjaCgpIHtcbiAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLmFwcGVuZENoaWxkKHRoaXMuZmFkZUJhY2tncm91bmRfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRhY2hlcyB0aGUgZ3JheXBhbmUgdG8gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLnJlbW92ZUNoaWxkKHRoaXMuZmFkZUJhY2tncm91bmRfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgZ3JheXBhbmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGFuaW1hdGVkXG4gICAqIEByZXR1cm4geyFQcm9taXNlfHVuZGVmaW5lZH1cbiAgICovXG4gIHNob3coYW5pbWF0ZWQgPSB0cnVlKSB7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7XG4gICAgICAnZGlzcGxheSc6ICdibG9jaycsXG4gICAgICAnb3BhY2l0eSc6IGFuaW1hdGVkID8gMCA6IDEsXG4gICAgfSk7XG4gICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgdGhpcy5mYWRlQmFja2dyb3VuZF8sXG4gICAgICAgIHtcbiAgICAgICAgICAnb3BhY2l0eSc6IDEsXG4gICAgICAgIH0sXG4gICAgICAgIDMwMCxcbiAgICAgICAgJ2Vhc2Utb3V0J1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGlkZXMgdGhlIGdyYXlwYW5lLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbmltYXRlZFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZXx1bmRlZmluZWR9XG4gICAqL1xuICBoaWRlKGFuaW1hdGVkID0gdHJ1ZSkge1xuICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgcmV0dXJuIHRyYW5zaXRpb24oXG4gICAgICAgIHRoaXMuZmFkZUJhY2tncm91bmRfLFxuICAgICAgICB7XG4gICAgICAgICAgJ29wYWNpdHknOiAwLFxuICAgICAgICB9LFxuICAgICAgICAzMDAsXG4gICAgICAgICdlYXNlLW91dCdcbiAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmZhZGVCYWNrZ3JvdW5kXywgeydkaXNwbGF5JzogJ25vbmUnfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7J2Rpc3BsYXknOiAnbm9uZSd9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIGFic3RyYWN0IFZpZXcgQ2xhc3MuIFVzZWQgdG8gcmVuZGVyIHRoZSBjb250ZW50IHdpdGhpbiB0aGUgRGlhbG9nLiBUaGVcbiAqIGV4dGVuZGVkIGNsYXNzIGhhcyBhY3R1YWwgY29udGVudC5cbiAqIEBhYnN0cmFjdFxuICovXG5leHBvcnQgY2xhc3MgVmlldyB7XG4gIC8qKlxuICAgKiBFbXB0eSBjb25zdHJ1Y3Rvci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICogR2V0cyB0aGUgaWZyYW1lIGVsZW1lbnQuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGdldEVsZW1lbnQoKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RpYWxvZy5EaWFsb2d9IHVudXNlZERpYWxvZ1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBpbml0KHVudXNlZERpYWxvZykge31cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgY29udGVudC5cbiAgICovXG4gIHJlc2l6ZWQoKSB7XG4gICAgLy8gRG8gbm90aGluZyBieSBkZWZhdWx0LiBPdmVycmlkZSBpZiBuZWVkZWQuXG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0IHRoZSByZXN1bHQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIHdoZW5Db21wbGV0ZSgpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgc2hvdWxkRmFkZUJvZHkoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGhhc0xvYWRpbmdJbmRpY2F0b3IoKSB7fVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBFbnRyeSBwb2ludCBpbnRvIGxpYnJhcnkgZm9yIGNvbXBpbGF0aW9uIHdpdGggYmFiZWwuIEp1c3QgbG9hZHMgbWFpbi5qc1xuLy8gYW5kIEJhYmVsJ3MgaGVscGVycy5cblxuaW1wb3J0ICcuLi90aGlyZF9wYXJ0eS9iYWJlbC9jdXN0b20tYmFiZWwtaGVscGVycyc7XG5pbXBvcnQgJy4vbWFpbic7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICogVGhlIGVudHJ5IHBvaW50IGZvciBydW50aW1lIChzd2cuanMpLlxuICovXG5cbmltcG9ydCAnLi9wb2x5ZmlsbHMnO1xuaW1wb3J0IHtpbnN0YWxsUnVudGltZX0gZnJvbSAnLi9ydW50aW1lL3J1bnRpbWUnO1xuaW1wb3J0IHtsb2d9IGZyb20gJy4vdXRpbHMvbG9nJztcblxubG9nKCdTdWJzY3JpcHRpb25zIFJ1bnRpbWU6ICRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCcpO1xuXG5pbnN0YWxsUnVudGltZShzZWxmKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpc0RvY3VtZW50UmVhZHksIHdoZW5Eb2N1bWVudFJlYWR5fSBmcm9tICcuLi91dGlscy9kb2N1bWVudC1yZWFkeSc7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgRG9jIHtcbiAgLyoqXG4gICAqIEByZXR1cm4geyFXaW5kb3d9XG4gICAqL1xuICBnZXRXaW4oKSB7fVxuXG4gIC8qKlxuICAgKiBUaGUgYERvY3VtZW50YCBub2RlIG9yIGFuYWxvZy5cbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqL1xuICBnZXRSb290Tm9kZSgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBgRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50YCBlbGVtZW50IG9yIGFuYWxvZy5cbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBnZXRSb290RWxlbWVudCgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBgRG9jdW1lbnQuaGVhZGAgZWxlbWVudCBvciBhbmFsb2cuIFJldHVybnMgYG51bGxgIGlmIG5vdCBhdmFpbGFibGVcbiAgICogeWV0LlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldEhlYWQoKSB7fVxuXG4gIC8qKlxuICAgKiBUaGUgYERvY3VtZW50LmJvZHlgIGVsZW1lbnQgb3IgYW5hbG9nLiBSZXR1cm5zIGBudWxsYCBpZiBub3QgYXZhaWxhYmxlXG4gICAqIHlldC5cbiAgICogQHJldHVybiB7P0VsZW1lbnR9XG4gICAqL1xuICBnZXRCb2R5KCkge31cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gZnVsbHkgY29uc3RydWN0ZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1JlYWR5KCkge31cblxuICAvKipcbiAgICogUmVzb2x2ZWQgd2hlbiBkb2N1bWVudCBoYXMgYmVlbiBmdWxseSBjb25zdHJ1Y3RlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7fVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBlbGVtZW50IHRvIHRoZSBmaXhlZCBsYXllci5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gdW51c2VkRWxlbWVudFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICpcbiAgICogVGhpcyBpcyBhIG5vLW9wIGZvciBleGNlcHQgaW4gQU1QIG9uIGlPUyA8IDEzLjAuXG4gICAqL1xuICBhZGRUb0ZpeGVkTGF5ZXIodW51c2VkRWxlbWVudCkge31cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtEb2N9ICovXG5leHBvcnQgY2xhc3MgR2xvYmFsRG9jIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd3whRG9jdW1lbnR9IHdpbk9yRG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW5PckRvYykge1xuICAgIGNvbnN0IGlzV2luID0gISF3aW5PckRvYy5kb2N1bWVudDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKGlzV2luXG4gICAgICA/IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHdpbk9yRG9jKVxuICAgICAgOiAvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKHdpbk9yRG9jKS5kZWZhdWx0Vmlldyk7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IGlzV2luXG4gICAgICA/IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHdpbk9yRG9jKS5kb2N1bWVudFxuICAgICAgOiAvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKHdpbk9yRG9jKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0V2luKCkge1xuICAgIHJldHVybiB0aGlzLndpbl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3ROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmRvY187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3RFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRIZWFkKCkge1xuICAgIC8vIGBkb2N1bWVudC5oZWFkYCBhbHdheXMgaGFzIGEgY2hhbmNlIHRvIGJlIHBhcnNlZCwgYXQgbGVhc3QgcGFydGlhbGx5LlxuICAgIHJldHVybiAvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAodGhpcy5kb2NfLmhlYWQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRCb2R5KCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uYm9keTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNSZWFkeSgpIHtcbiAgICByZXR1cm4gaXNEb2N1bWVudFJlYWR5KHRoaXMuZG9jXyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gd2hlbkRvY3VtZW50UmVhZHkodGhpcy5kb2NfKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWRkVG9GaXhlZExheWVyKHVudXNlZEVsZW1lbnQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFEb2N1bWVudHwhV2luZG93fCFEb2N9IGlucHV0XG4gKiBAcmV0dXJuIHshRG9jfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZURvYyhpbnB1dCkge1xuICAvLyBJcyBpdCBhIGBEb2N1bWVudGBcbiAgaWYgKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAoaW5wdXQpLm5vZGVUeXBlID09PSAvKiBET0NVTUVOVCAqLyA5KSB7XG4gICAgcmV0dXJuIG5ldyBHbG9iYWxEb2MoLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChpbnB1dCkpO1xuICB9XG4gIC8vIElzIGl0IGEgYFdpbmRvd2A/XG4gIGlmICgvKiogQHR5cGUgeyFXaW5kb3d9ICovIChpbnB1dCkuZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gbmV3IEdsb2JhbERvYygvKiogQHR5cGUgeyFXaW5kb3d9ICovIChpbnB1dCkpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyFEb2N9ICovIChpbnB1dCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RG9jLCByZXNvbHZlRG9jfSBmcm9tICcuL2RvYyc7XG5pbXBvcnQge1BhZ2VDb25maWd9IGZyb20gJy4vcGFnZS1jb25maWcnO1xuaW1wb3J0IHtkZWJ1Z0xvZ30gZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7aGFzTmV4dE5vZGVJbkRvY3VtZW50T3JkZXJ9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4uL3V0aWxzL3R5cGVzJztcbmltcG9ydCB7dHJ5UGFyc2VKc29ufSBmcm9tICcuLi91dGlscy9qc29uJztcblxuY29uc3QgQUxSRUFEWV9TRUVOID0gJ19fU1dHLVNFRU5fXyc7XG5jb25zdCBDT05UUk9MX0ZMQUcgPSAnc3Vic2NyaXB0aW9ucy1jb250cm9sJztcblxuY29uc3QgQUxMT1dFRF9UWVBFUyA9IFtcbiAgJ0NyZWF0aXZlV29yaycsXG4gICdBcnRpY2xlJyxcbiAgJ05ld3NBcnRpY2xlJyxcbiAgJ0Jsb2cnLFxuICAnQ29tbWVudCcsXG4gICdDb3Vyc2UnLFxuICAnSG93VG8nLFxuICAnTWVzc2FnZScsXG4gICdSZXZpZXcnLFxuICAnV2ViUGFnZScsXG5dO1xuXG4vLyBSZWdFeHAgZm9yIHF1aWNrbHkgc2Nhbm5pbmcgTEQrSlNPTiBmb3IgYWxsb3dlZCB0eXBlc1xuY29uc3QgUkVfQUxMT1dFRF9UWVBFUyA9IG5ldyBSZWdFeHAoQUxMT1dFRF9UWVBFUy5qb2luKCd8JykpO1xuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VDb25maWdSZXNvbHZlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d8IURvY3VtZW50fCFEb2N9IHdpbk9yRG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW5PckRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gcmVzb2x2ZURvYyh3aW5PckRvYyk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigoIVBhZ2VDb25maWd8IVByb21pc2UpKX0gKi9cbiAgICB0aGlzLmNvbmZpZ1Jlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZTwhUGFnZUNvbmZpZz59ICovXG4gICAgdGhpcy5jb25maWdQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU1ldGFQYXJzZXJ9ICovXG4gICAgdGhpcy5tZXRhUGFyc2VyXyA9IG5ldyBNZXRhUGFyc2VyKHRoaXMuZG9jXyk7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUpzb25MZFBhcnNlcn0gKi9cbiAgICB0aGlzLmxkUGFyc2VyXyA9IG5ldyBKc29uTGRQYXJzZXIodGhpcy5kb2NfKTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshTWljcm9kYXRhUGFyc2VyfSAqL1xuICAgIHRoaXMubWljcm9kYXRhUGFyc2VyXyA9IG5ldyBNaWNyb2RhdGFQYXJzZXIodGhpcy5kb2NfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhUGFnZUNvbmZpZz59XG4gICAqL1xuICByZXNvbHZlQ29uZmlnKCkge1xuICAgIC8vIFRyeSByZXNvbHZlIHRoZSBjb25maWcgYXQgZGlmZmVyZW50IHRpbWVzLlxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4odGhpcy5jaGVjay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmRvY18ud2hlblJlYWR5KCkudGhlbih0aGlzLmNoZWNrLmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ1Byb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9QYWdlQ29uZmlnfVxuICAgKi9cbiAgY2hlY2soKSB7XG4gICAgLy8gQWxyZWFkeSByZXNvbHZlZC5cbiAgICBpZiAoIXRoaXMuY29uZmlnUmVzb2x2ZXJfKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGNvbmZpZyA9IHRoaXMubWV0YVBhcnNlcl8uY2hlY2soKTtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgY29uZmlnID0gdGhpcy5sZFBhcnNlcl8uY2hlY2soKTtcbiAgICB9XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IHRoaXMubWljcm9kYXRhUGFyc2VyXy5jaGVjaygpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICAvLyBQcm9kdWN0IElEIGhhcyBiZWVuIGZvdW5kOiBpbml0aWFsaXplIHRoZSByZXN0IG9mIHRoZSBjb25maWcuXG4gICAgICB0aGlzLmNvbmZpZ1Jlc29sdmVyXyhjb25maWcpO1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhpcy5kb2NfLmlzUmVhZHkoKSkge1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8oXG4gICAgICAgIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTm8gY29uZmlnIGNvdWxkIGJlIGRpc2NvdmVyZWQgaW4gdGhlIHBhZ2UnKSlcbiAgICAgICk7XG4gICAgICB0aGlzLmNvbmZpZ1Jlc29sdmVyXyA9IG51bGw7XG4gICAgfVxuICAgIGRlYnVnTG9nKGNvbmZpZyk7XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxufVxuXG5jbGFzcyBUeXBlQ2hlY2tlciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICogQ2hlY2sgdmFsdWUgZnJvbSBqc29uXG4gICAqIEBwYXJhbSB7P0FycmF5fHN0cmluZ30gdmFsdWVcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBleHBlY3RlZFR5cGVzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjaGVja1ZhbHVlKHZhbHVlLCBleHBlY3RlZFR5cGVzKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jaGVja0FycmF5KHRoaXMudG9BcnJheV8odmFsdWUpLCBleHBlY3RlZFR5cGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3Mgc3BhY2UgZGVsaW1pdGVkIGxpc3Qgb2YgdHlwZXNcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBpdGVtdHlwZVxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGV4cGVjdGVkVHlwZXNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGNoZWNrU3RyaW5nKGl0ZW10eXBlLCBleHBlY3RlZFR5cGVzKSB7XG4gICAgaWYgKCFpdGVtdHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jaGVja0FycmF5KGl0ZW10eXBlLnNwbGl0KC9cXHMrLyksIGV4cGVjdGVkVHlwZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8P3N0cmluZz59IHR5cGVBcnJheVxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGV4cGVjdGVkVHlwZXNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGNoZWNrQXJyYXkodHlwZUFycmF5LCBleHBlY3RlZFR5cGVzKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgdHlwZUFycmF5LmZvckVhY2goY2FuZGlkYXRlVHlwZSA9PiB7XG4gICAgICBmb3VuZCA9XG4gICAgICAgIGZvdW5kIHx8XG4gICAgICAgIGV4cGVjdGVkVHlwZXMuaW5jbHVkZXMoXG4gICAgICAgICAgY2FuZGlkYXRlVHlwZS5yZXBsYWNlKC9eaHR0cDpcXC9cXC9zY2hlbWEub3JnXFwvL2ksICcnKVxuICAgICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIC8qXG4gICAqIEBwYXJhbSB7P0FycmF5fHN0cmluZ30gdmFsdWVcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0b0FycmF5Xyh2YWx1ZSkge1xuICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcbiAgfVxufVxuXG5jbGFzcyBNZXRhUGFyc2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IURvY30gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIGNoZWNrKCkge1xuICAgIGlmICghdGhpcy5kb2NfLmdldEJvZHkoKSkge1xuICAgICAgLy8gV2FpdCB1bnRpbCB0aGUgd2hvbGUgYDxoZWFkPmAgaXMgcGFyc2VkLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgcHJvZHVjdCBpZC5cbiAgICBjb25zdCBwcm9kdWN0SWQgPSBnZXRNZXRhVGFnKFxuICAgICAgdGhpcy5kb2NfLmdldFJvb3ROb2RlKCksXG4gICAgICAnc3Vic2NyaXB0aW9ucy1wcm9kdWN0LWlkJ1xuICAgICk7XG4gICAgaWYgKCFwcm9kdWN0SWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIElzIGxvY2tlZD9cbiAgICBjb25zdCBhY2Nlc3NpYmxlRm9yRnJlZSA9IGdldE1ldGFUYWcoXG4gICAgICB0aGlzLmRvY18uZ2V0Um9vdE5vZGUoKSxcbiAgICAgICdzdWJzY3JpcHRpb25zLWFjY2Vzc2libGUtZm9yLWZyZWUnXG4gICAgKTtcbiAgICBjb25zdCBsb2NrZWQgPVxuICAgICAgKGFjY2Vzc2libGVGb3JGcmVlICYmIGFjY2Vzc2libGVGb3JGcmVlLnRvTG93ZXJDYXNlKCkgPT0gJ2ZhbHNlJykgfHxcbiAgICAgIGZhbHNlO1xuXG4gICAgcmV0dXJuIG5ldyBQYWdlQ29uZmlnKHByb2R1Y3RJZCwgbG9ja2VkKTtcbiAgfVxufVxuXG5jbGFzcyBKc29uTGRQYXJzZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgQGZ1bmN0aW9uICovXG4gICAgdGhpcy5jaGVja1R5cGVfID0gbmV3IFR5cGVDaGVja2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9XG4gICAqL1xuICBjaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuZG9jXy5nZXRCb2R5KCkpIHtcbiAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHdob2xlIGA8aGVhZD5gIGlzIHBhcnNlZC5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbVJlYWR5ID0gdGhpcy5kb2NfLmlzUmVhZHkoKTtcblxuICAgIC8vIHR5cGU6ICdhcHBsaWNhdGlvbi9sZCtqc29uJ1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5kb2NfXG4gICAgICAuZ2V0Um9vdE5vZGUoKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdFt0eXBlPVwiYXBwbGljYXRpb24vbGQranNvblwiXScpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgIGlmIChcbiAgICAgICAgZWxlbWVudFtBTFJFQURZX1NFRU5dIHx8XG4gICAgICAgICFlbGVtZW50LnRleHRDb250ZW50IHx8XG4gICAgICAgICghZG9tUmVhZHkgJiYgIWhhc05leHROb2RlSW5Eb2N1bWVudE9yZGVyKGVsZW1lbnQpKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZWxlbWVudFtBTFJFQURZX1NFRU5dID0gdHJ1ZTtcbiAgICAgIGlmICghUkVfQUxMT1dFRF9UWVBFUy50ZXN0KGVsZW1lbnQudGV4dENvbnRlbnQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcG9zc2libGVDb25maWcgPSB0aGlzLnRyeUV4dHJhY3RDb25maWdfKGVsZW1lbnQpO1xuICAgICAgaWYgKHBvc3NpYmxlQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBwb3NzaWJsZUNvbmZpZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIHRyeUV4dHJhY3RDb25maWdfKGVsZW1lbnQpIHtcbiAgICBjb25zdCBqc29uID0gdHJ5UGFyc2VKc29uKGVsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgIGlmICghanNvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gTXVzdCBiZSBhbiBBTExPV0VEX1RZUEVcbiAgICBpZiAoIXRoaXMuY2hlY2tUeXBlXy5jaGVja1ZhbHVlKGpzb25bJ0B0eXBlJ10sIEFMTE9XRURfVFlQRVMpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBNdXN0IGhhdmUgYSBpc1BhcnRPZltAdHlwZT1Qcm9kdWN0XS5cbiAgICBsZXQgcHJvZHVjdElkID0gbnVsbDtcbiAgICBjb25zdCBwYXJ0T2ZBcnJheSA9IHRoaXMudmFsdWVBcnJheV8oanNvbiwgJ2lzUGFydE9mJyk7XG4gICAgaWYgKHBhcnRPZkFycmF5KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRPZkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHByb2R1Y3RJZCA9IHRoaXMuZGlzY292ZXJQcm9kdWN0SWRfKHBhcnRPZkFycmF5W2ldKTtcbiAgICAgICAgaWYgKHByb2R1Y3RJZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcHJvZHVjdElkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBGb3VuZCBwcm9kdWN0IGlkLCBqdXN0IGNoZWNrIGZvciB0aGUgYWNjZXNzIGZsYWcuXG4gICAgY29uc3QgaXNBY2Nlc3NpYmxlRm9yRnJlZSA9IHRoaXMuYm9vbF8oXG4gICAgICB0aGlzLnNpbmdsZVZhbHVlXyhqc29uLCAnaXNBY2Nlc3NpYmxlRm9yRnJlZScpLFxuICAgICAgLyogZGVmYXVsdCAqLyB0cnVlXG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgUGFnZUNvbmZpZyhwcm9kdWN0SWQsICFpc0FjY2Vzc2libGVGb3JGcmVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVmXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBib29sXyh2YWx1ZSwgZGVmKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZGVmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBsb3dlcmNhc2UgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxvd2VyY2FzZSA9PSAnZmFsc2UnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChsb3dlcmNhc2UgPT0gJ3RydWUnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVmO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0ganNvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZGlzY292ZXJQcm9kdWN0SWRfKGpzb24pIHtcbiAgICAvLyBNdXN0IGhhdmUgdHlwZSBgUHJvZHVjdGAuXG4gICAgaWYgKCF0aGlzLmNoZWNrVHlwZV8uY2hlY2tWYWx1ZShqc29uWydAdHlwZSddLCBbJ1Byb2R1Y3QnXSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHs/c3RyaW5nfSAqLyAodGhpcy5zaW5nbGVWYWx1ZV8oanNvbiwgJ3Byb2R1Y3RJRCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGpzb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7P0FycmF5fVxuICAgKi9cbiAgdmFsdWVBcnJheV8oanNvbiwgbmFtZSkge1xuICAgIGNvbnN0IHZhbHVlID0ganNvbltuYW1lXTtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSBqc29uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBzaW5nbGVWYWx1ZV8oanNvbiwgbmFtZSkge1xuICAgIGNvbnN0IHZhbHVlQXJyYXkgPSB0aGlzLnZhbHVlQXJyYXlfKGpzb24sIG5hbWUpO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVBcnJheSAmJiB2YWx1ZUFycmF5WzBdO1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSAnJyA/IG51bGwgOiB2YWx1ZTtcbiAgfVxufVxuXG5jbGFzcyBNaWNyb2RhdGFQYXJzZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5hY2Nlc3NfID0gbnVsbDtcbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5wcm9kdWN0SWRfID0gbnVsbDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IEBmdW5jdGlvbiAqL1xuICAgIHRoaXMuY2hlY2tUeXBlXyA9IG5ldyBUeXBlQ2hlY2tlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZmFsc2UgaWYgYWNjZXNzIGlzIHJlc3RyaWN0ZWQsIG90aGVyd2lzZSB0cnVlXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3QgQW4gZWxlbWVudCB0aGF0IGlzIGFuIGl0ZW0gb2YgdHlwZSBpbiBBTExPV0VEX1RZUEVTIGxpc3RcbiAgICogQHJldHVybiB7P2Jvb2xlYW59IGxvY2tlZCBhY2Nlc3NcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRpc2NvdmVyQWNjZXNzXyhyb290KSB7XG4gICAgY29uc3QgQUxSRUFEWV9TRUVOID0gJ2FscmVhZHlTZWVuRm9yQWNjZXNzSW5mbyc7XG4gICAgY29uc3Qgbm9kZUxpc3QgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaXRlbXByb3A9J2lzQWNjZXNzaWJsZUZvckZyZWUnXVwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgbm9kZUxpc3RbaV07IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGVMaXN0W2ldO1xuICAgICAgY29uc3QgY29udGVudCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHwgZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzVmFsaWRFbGVtZW50XyhlbGVtZW50LCByb290LCBBTFJFQURZX1NFRU4pKSB7XG4gICAgICAgIGxldCBhY2Nlc3NGb3JGcmVlID0gbnVsbDtcbiAgICAgICAgaWYgKGNvbnRlbnQudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZScpIHtcbiAgICAgICAgICBhY2Nlc3NGb3JGcmVlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250ZW50LnRvTG93ZXJDYXNlKCkgPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIGFjY2Vzc0ZvckZyZWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjZXNzRm9yRnJlZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpZXMgaWYgYW4gZWxlbWVudCBpcyB2YWxpZCBiYXNlZCBvbiB0aGUgZm9sbG93aW5nXG4gICAqIC0gY2hpbGQgb2YgYW4gaXRlbSBvZiBvbmUgdGhlIHRoZSBBTExPV0VEX1RZUEVTXG4gICAqIC0gbm90IGEgY2hpbGQgb2YgYW4gaXRlbSBvZiBhbnkgb3RoZXIgdHlwZVxuICAgKiAtIG5vdCBzZWVuIGJlZm9yZSwgbWFya2VkIHVzaW5nIHRoZSBhbHJlYWR5U2VlbiB0YWdcbiAgICogQHBhcmFtIHs/RWxlbWVudH0gY3VycmVudCB0aGUgZWxlbWVudCB0byBiZSB2ZXJpZmllZFxuICAgKiBAcGFyYW0geyFFbGVtZW50fSByb290IHRoZSBwYXJlbnQgdG8gdHJhY2sgdXAgdG9cbiAgICogQHBhcmFtIHshc3RyaW5nfSBhbHJlYWR5U2VlbiB1c2VkIHRvIHRhZyBhbHJlYWR5IHZpc2l0ZWQgbm9kZXNcbiAgICogQHJldHVybiB7IWJvb2xlYW59IHZhbGlkIG5vZGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzVmFsaWRFbGVtZW50XyhjdXJyZW50LCByb290LCBhbHJlYWR5U2Vlbikge1xuICAgIGZvciAoXG4gICAgICBsZXQgbm9kZSA9IGN1cnJlbnQ7XG4gICAgICBub2RlICYmICFub2RlW2FscmVhZHlTZWVuXTtcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgICApIHtcbiAgICAgIG5vZGVbYWxyZWFkeVNlZW5dID0gdHJ1ZTtcbiAgICAgIC8vIGRvY3VtZW50IG5vZGVzIGRvbid0IGhhdmUgaGFzQXR0cmlidXRlXG4gICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUgJiYgbm9kZS5oYXNBdHRyaWJ1dGUoJ2l0ZW1zY29wZScpKSB7XG4gICAgICAgIC8qKns/c3RyaW5nfSAqL1xuICAgICAgICBjb25zdCB0eXBlID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2l0ZW10eXBlJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrVHlwZV8uY2hlY2tTdHJpbmcodHlwZSwgQUxMT1dFRF9UWVBFUyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRhaW5zIHRoZSBwcm9kdWN0IElEIHRoYXQgbWVldHMgdGhlIHJlcXVpcmVtZW50c1xuICAgKiAtIGNoaWxkIG9mIGFuIGl0ZW0gb2Ygb25lIG9mIEFMTE9XRURfVFlQRVNcbiAgICogLSBOb3QgYSBjaGlsZCBvZiBhbiBpdGVtIG9mIHR5cGUgJ1NlY3Rpb24nXG4gICAqIC0gY2hpbGQgb2YgYW4gaXRlbSBvZiB0eXBlICdwcm9kdWN0SUQnXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3QgQW4gZWxlbWVudCB0aGF0IGlzIGFuIGl0ZW0gb2YgYW4gQUxMT1dFRF9UWVBFU1xuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBwcm9kdWN0IElELCBpZiBmb3VuZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzY292ZXJQcm9kdWN0SWRfKHJvb3QpIHtcbiAgICBjb25zdCBBTFJFQURZX1NFRU4gPSAnYWxyZWFkeVNlZW5Gb3JQcm9kdWN0SW5mbyc7XG4gICAgY29uc3Qgbm9kZUxpc3QgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpdGVtcHJvcD1cInByb2R1Y3RJRFwiXScpO1xuICAgIGZvciAobGV0IGkgPSAwOyBub2RlTGlzdFtpXTsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gbm9kZUxpc3RbaV07XG4gICAgICBjb25zdCBjb250ZW50ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fCBlbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgY29uc3QgaXRlbSA9IGVsZW1lbnQuY2xvc2VzdCgnW2l0ZW10eXBlXVtpdGVtc2NvcGVdJyk7XG4gICAgICBjb25zdCB0eXBlID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2l0ZW10eXBlJyk7XG4gICAgICBpZiAodHlwZS5pbmRleE9mKCdodHRwOi8vc2NoZW1hLm9yZy9Qcm9kdWN0JykgPD0gLTEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkRWxlbWVudF8oaXRlbS5wYXJlbnRFbGVtZW50LCByb290LCBBTFJFQURZX1NFRU4pKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIFBhZ2VDb25maWcgaWYgYXZhaWxhYmxlXG4gICAqIEByZXR1cm4gez9QYWdlQ29uZmlnfSBQYWdlQ29uZmlnIGZvdW5kIHNvIGZhclxuICAgKi9cbiAgZ2V0UGFnZUNvbmZpZ18oKSB7XG4gICAgbGV0IGxvY2tlZCA9IG51bGw7XG4gICAgaWYgKHRoaXMuYWNjZXNzXyAhPSBudWxsKSB7XG4gICAgICBsb2NrZWQgPSAhdGhpcy5hY2Nlc3NfO1xuICAgIH0gZWxzZSBpZiAodGhpcy5kb2NfLmlzUmVhZHkoKSkge1xuICAgICAgLy8gRGVmYXVsdCB0byB1bmxvY2tlZFxuICAgICAgbG9ja2VkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb2R1Y3RJZF8gIT0gbnVsbCAmJiBsb2NrZWQgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBQYWdlQ29uZmlnKHRoaXMucHJvZHVjdElkXywgbG9ja2VkKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdHMgcGFnZSBjb25maWcgZnJvbSBNaWNyb2RhdGEgaW4gdGhlIERPTVxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ30gUGFnZUNvbmZpZyBmb3VuZFxuICAgKi9cbiAgdHJ5RXh0cmFjdENvbmZpZ18oKSB7XG4gICAgbGV0IGNvbmZpZyA9IHRoaXMuZ2V0UGFnZUNvbmZpZ18oKTtcbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIC8vIEdyYWIgYWxsIHRoZSBub2RlcyB3aXRoIGFuIGl0ZW10eXBlIGFuZCBmaWx0ZXIgZm9yIG91ciBhbGxvd2VkIHR5cGVzXG4gICAgY29uc3Qgbm9kZUxpc3QgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcbiAgICAgIC5jYWxsKHRoaXMuZG9jXy5nZXRSb290Tm9kZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpdGVtc2NvcGVdW2l0ZW10eXBlXScpKVxuICAgICAgLmZpbHRlcihub2RlID0+XG4gICAgICAgIHRoaXMuY2hlY2tUeXBlXy5jaGVja1N0cmluZyhcbiAgICAgICAgICBub2RlLmdldEF0dHJpYnV0ZSgnaXRlbXR5cGUnKSxcbiAgICAgICAgICBBTExPV0VEX1RZUEVTXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgbm9kZUxpc3RbaV0gJiYgY29uZmlnID09IG51bGw7IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGVMaXN0W2ldO1xuICAgICAgaWYgKHRoaXMuYWNjZXNzXyA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuYWNjZXNzXyA9IHRoaXMuZGlzY292ZXJBY2Nlc3NfKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnByb2R1Y3RJZF8pIHtcbiAgICAgICAgdGhpcy5wcm9kdWN0SWRfID0gdGhpcy5kaXNjb3ZlclByb2R1Y3RJZF8oZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBjb25maWcgPSB0aGlzLmdldFBhZ2VDb25maWdfKCk7XG4gICAgfVxuICAgIHJldHVybiBjb25maWc7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9XG4gICAqL1xuICBjaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuZG9jXy5nZXRCb2R5KCkpIHtcbiAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHdob2xlIGA8aGVhZD5gIGlzIHBhcnNlZC5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50cnlFeHRyYWN0Q29uZmlnXygpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshTm9kZX0gcm9vdE5vZGVcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250cm9sRmxhZyhyb290Tm9kZSkge1xuICAvLyBMb29rIGZvciB0aGUgZmxhZyBpbiBgbWV0YWAuXG4gIGNvbnN0IGZsYWcgPSBnZXRNZXRhVGFnKHJvb3ROb2RlLCBDT05UUk9MX0ZMQUcpO1xuICBpZiAoZmxhZykge1xuICAgIHJldHVybiBmbGFnO1xuICB9XG4gIC8vIExvb2sgZm9yIHRoZSBmbGFnIGluIGBzY3JpcHRgLlxuICBjb25zdCBlbCA9IHJvb3ROb2RlLnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFske0NPTlRST0xfRkxBR31dYCk7XG4gIGlmIChlbCkge1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoQ09OVFJPTF9GTEFHKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBmcm9tIGNvbnRlbnQgYXR0cmlidXRlIG9mIGEgbWV0YSB0YWcgd2l0aCBnaXZlbiBuYW1lLlxuICpcbiAqIElmIG11bHRpcGxlIHRhZ3MgYXJlIGZvdW5kLCB0aGUgZmlyc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHshTm9kZX0gcm9vdE5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSB0YWcgbmFtZSB0byBsb29rIGZvci5cbiAqIEByZXR1cm4gez9zdHJpbmd9IGF0dHJpYnV0ZSB2YWx1ZSBvciBlbXB0eSBzdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRNZXRhVGFnKHJvb3ROb2RlLCBuYW1lKSB7XG4gIGNvbnN0IGVsID0gcm9vdE5vZGUucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPVwiJHtuYW1lfVwiXWApO1xuICBpZiAoZWwpIHtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCdjb250ZW50Jyk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jQ2xhc3NGb3JUZXN0aW5nKCkge1xuICByZXR1cm4gRG9jO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VDb25maWcge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWRcbiAgICogQHBhcmFtIHtib29sZWFufSBsb2NrZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb2R1Y3RPclB1YmxpY2F0aW9uSWQsIGxvY2tlZCkge1xuICAgIGxldCBwdWJsaWNhdGlvbklkLCBwcm9kdWN0SWQsIGxhYmVsO1xuICAgIGNvbnN0IGRpdiA9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWQuaW5kZXhPZignOicpO1xuICAgIGlmIChkaXYgIT0gLTEpIHtcbiAgICAgIC8vIFRoZSBhcmd1bWVudCBpcyBhIHByb2R1Y3QgaWQuXG4gICAgICBwcm9kdWN0SWQgPSBwcm9kdWN0T3JQdWJsaWNhdGlvbklkO1xuICAgICAgcHVibGljYXRpb25JZCA9IHByb2R1Y3RJZC5zdWJzdHJpbmcoMCwgZGl2KTtcbiAgICAgIGxhYmVsID0gcHJvZHVjdElkLnN1YnN0cmluZyhkaXYgKyAxKTtcbiAgICAgIGlmIChsYWJlbCA9PSAnKicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd3aWxkY2FyZCBkaXNhbGxvd2VkJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZSBhcmd1bWVudCBpcyBhIHB1YmxpY2F0aW9uIGlkLlxuICAgICAgcHVibGljYXRpb25JZCA9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWQ7XG4gICAgICBwcm9kdWN0SWQgPSBudWxsO1xuICAgICAgbGFiZWwgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnB1YmxpY2F0aW9uSWRfID0gcHVibGljYXRpb25JZDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucHJvZHVjdElkXyA9IHByb2R1Y3RJZDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHs/c3RyaW5nfSAqL1xuICAgIHRoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmxvY2tlZF8gPSBsb2NrZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0UHVibGljYXRpb25JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wdWJsaWNhdGlvbklkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0UHJvZHVjdElkKCkge1xuICAgIHJldHVybiB0aGlzLnByb2R1Y3RJZF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldExhYmVsKCkge1xuICAgIHJldHVybiB0aGlzLmxhYmVsXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNMb2NrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9ja2VkXztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgTG9hZHMgYWxsIHBvbHlmaWxscyBuZWVkZWQgYnkgdGhlIHByb2plY3QuXG4gKiBUaGlzIGxpc3Qgc2hvdWxkIG5vdCBnZXQgbG9uZ2VyIHdpdGhvdXQgYSB2ZXJ5IGdvb2QgcmVhc29uLlxuICovXG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbERPTVRva2VuTGlzdFRvZ2dsZX0gZnJvbSAnLi9wb2x5ZmlsbHMvZG9tdG9rZW5saXN0LXRvZ2dsZSc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbERvY0NvbnRhaW5zfSBmcm9tICcuL3BvbHlmaWxscy9kb2N1bWVudC1jb250YWlucyc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbE1hdGhTaWdufSBmcm9tICcuL3BvbHlmaWxscy9tYXRoLXNpZ24nO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxPYmplY3RBc3NpZ259IGZyb20gJy4vcG9seWZpbGxzL29iamVjdC1hc3NpZ24nO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxPYmplY3RWYWx1ZXN9IGZyb20gJy4vcG9seWZpbGxzL29iamVjdC12YWx1ZXMnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxQcm9taXNlfSBmcm9tICcuL3BvbHlmaWxscy9wcm9taXNlJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsQXJyYXlJbmNsdWRlc30gZnJvbSAnLi9wb2x5ZmlsbHMvYXJyYXktaW5jbHVkZXMnO1xuXG5pbnN0YWxsRE9NVG9rZW5MaXN0VG9nZ2xlKHNlbGYpO1xuaW5zdGFsbE1hdGhTaWduKHNlbGYpO1xuaW5zdGFsbE9iamVjdEFzc2lnbihzZWxmKTtcbmluc3RhbGxPYmplY3RWYWx1ZXMoc2VsZik7XG5pbnN0YWxsUHJvbWlzZShzZWxmKTtcbmluc3RhbGxEb2NDb250YWlucyhzZWxmKTtcbmluc3RhbGxBcnJheUluY2x1ZGVzKHNlbGYpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZWxlbWVudCBpcyBpbiB0aGUgYXJyYXkgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcm9tSW5kZXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhpcyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIGluY2x1ZGVzKHZhbHVlLCBvcHRfZnJvbUluZGV4KSB7XG4gIGNvbnN0IGZyb21JbmRleCA9IG9wdF9mcm9tSW5kZXggfHwgMDtcbiAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7XG4gIGxldCBpID0gZnJvbUluZGV4ID49IDAgPyBmcm9tSW5kZXggOiBNYXRoLm1heChsZW4gKyBmcm9tSW5kZXgsIDApO1xuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3Qgb3RoZXIgPSB0aGlzW2ldO1xuICAgIC8vIElmIHZhbHVlIGhhcyBiZWVuIGZvdW5kIE9SICh2YWx1ZSBpcyBOYU4gQU5EIG90aGVyIGlzIE5hTilcbiAgICAvKmVzbGludCBcIm5vLXNlbGYtY29tcGFyZVwiOiAwKi9cbiAgICBpZiAob3RoZXIgPT09IHZhbHVlIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBBcnJheS5jb250YWlucyBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5BcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2luY2x1ZGVzJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBpbmNsdWRlcyxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBgZG9jdW1lbnQuY29udGFpbnMoKWAgbWV0aG9kLiBOb3RpY2UgdGhhdCBhY2NvcmRpbmcgdG8gc3BlY1xuICogYGRvY3VtZW50LmNvbnRhaW5zYCBpcyBpbmNsdXNpb25hcnkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vZGUvY29udGFpbnNcbiAqIEBwYXJhbSB7P05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhpcyB7Tm9kZX1cbiAqL1xuZnVuY3Rpb24gZG9jdW1lbnRDb250YWluc1BvbHlmaWxsKG5vZGUpIHtcbiAgLy8gUGVyIHNwZWMsIFwiY29udGFpbnNcIiBtZXRob2QgaXMgaW5jbHVzaW9uYXJ5XG4gIC8vIGkuZS4gYG5vZGUuY29udGFpbnMobm9kZSkgPT0gdHJ1ZWAuIEhvd2V2ZXIsIHdlIHN0aWxsIG5lZWQgdG8gdGVzdFxuICAvLyBlcXVhbGl0eSB0byB0aGUgZG9jdW1lbnQgaXRzZWxmLlxuICByZXR1cm4gbm9kZSA9PSB0aGlzIHx8IHRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKG5vZGUpO1xufVxuXG4vKipcbiAqIFBvbHlmaWxscyBgSFRNTERvY3VtZW50LmNvbnRhaW5zYCBBUEkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uSFRNTERvY3VtZW50LnByb3RvdHlwZS5jb250YWlucykge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLkhUTUxEb2N1bWVudC5wcm90b3R5cGUsICdjb250YWlucycsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZG9jdW1lbnRDb250YWluc1BvbHlmaWxsLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIGBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZSh0b2tlbiwgb3B0X2ZvcmNlKWAgbWV0aG9kLlxuICogVGhpcyBpcyBzcGVjaWFsbHkgaW1wb3J0YW50IGJlY2F1c2UgSUUgZG9lcyBub3Qgc3VwcG9ydCBgb3B0X2ZvcmNlYCBhdHRyaWJ1dGUuXG4gKiBTZWUgaHR0cHM6Ly9nb28uZ2wvaGdLTllZIGZvciBkZXRhaWxzLlxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZm9yY2VcbiAqIEB0aGlzIHtET01Ub2tlbkxpc3R9XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBkb21Ub2tlbkxpc3RUb2dnbGVQb2x5ZmlsbCh0b2tlbiwgb3B0X2ZvcmNlKSB7XG4gIGNvbnN0IHJlbW92ZSA9IG9wdF9mb3JjZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5jb250YWlucyh0b2tlbikgOiAhb3B0X2ZvcmNlO1xuICBpZiAocmVtb3ZlKSB7XG4gICAgdGhpcy5yZW1vdmUodG9rZW4pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmFkZCh0b2tlbik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBQb2x5ZmlsbHMgYERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlYCBBUEkgaW4gSUUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKGlzSWUod2luKSAmJiB3aW4uRE9NVG9rZW5MaXN0KSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uRE9NVG9rZW5MaXN0LnByb3RvdHlwZSwgJ3RvZ2dsZScsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZG9tVG9rZW5MaXN0VG9nZ2xlUG9seWZpbGwsXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgaXMgYSBJRSBicm93c2VyLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzSWUod2luKSB7XG4gIHJldHVybiAvVHJpZGVudHxNU0lFfElFTW9iaWxlL2kudGVzdCh3aW4ubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUGFyc2VzIHRoZSBudW1iZXIgeCBhbmQgcmV0dXJucyBpdHMgc2lnbi4gRm9yIHBvc2l0aXZlIHggcmV0dXJucyAxLCBmb3JcbiAqIG5lZ2F0aXZlLCAtMS4gRm9yIDAgYW5kIC0wLCByZXR1cm5zIDAgYW5kIC0wIHJlc3BlY3RpdmVseS4gRm9yIGFueSBudW1iZXJcbiAqIHRoYXQgcGFyc2VzIHRvIE5hTiwgcmV0dXJucyBOYU4uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduKHgpIHtcbiAgeCA9IE51bWJlcih4KTtcblxuICAvLyBJZiB4IGlzIDAsIC0wLCBvciBOYU4sIHJldHVybiBpdC5cbiAgaWYgKCF4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICByZXR1cm4geCA+IDAgPyAxIDogLTE7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgTWF0aC5zaWduIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLk1hdGguc2lnbikge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLk1hdGgsICdzaWduJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBzaWduLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBDb3BpZXMgdmFsdWVzIG9mIGFsbCBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIGZyb20gb25lIG9yIG1vcmUgc291cmNlXG4gKiBvYmplY3RzIChwcm92aWRlZCBhcyBleHRlbmRlZCBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uKSB0byBhIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSB2YXJfYXJnc1xuICogQHJldHVybnMgeyFPYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCB2YXJfYXJncykge1xuICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgfVxuXG4gIGNvbnN0IG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgT2JqZWN0LmFzc2lnbiBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5PYmplY3QuYXNzaWduKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uT2JqZWN0LCAnYXNzaWduJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBhc3NpZ24sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEltcGxlbWVudHMgYE9iamVjdC52YWx1ZXNgIEFQSS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfb2JqZWN0cy9PYmplY3QvdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0XG4gKiBAcmV0dXJucyB7IUFycmF5PCo+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsdWVzKHRhcmdldCkge1xuICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgfVxuXG4gIGNvbnN0IG91dHB1dCA9IFtdO1xuICBmb3IgKGNvbnN0IGtleSBpbiB0YXJnZXQpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh0YXJnZXQsIGtleSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKHRhcmdldFtrZXldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBPYmplY3QudmFsdWVzIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLk9iamVjdC52YWx1ZXMpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbi5PYmplY3QsICd2YWx1ZXMnLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZhbHVlcyxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgKiBhcyBQcm9taXNlIGZyb20gJ3Byb21pc2UtcGpzL3Byb21pc2UnO1xuXG4vKipcbiAqIFNldHMgdGhlIFByb21pc2UgcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uUHJvbWlzZSkge1xuICAgIHdpbi5Qcm9taXNlID0gLyoqIEB0eXBlIHs/fSAqLyAoUHJvbWlzZSk7XG4gICAgLy8gSW4gYmFiZWwgdGhlICogZXhwb3J0IGlzIGFuIE9iamVjdCB3aXRoIGEgZGVmYXVsdCBwcm9wZXJ0eS5cbiAgICAvLyBJbiBjbG9zdXJlIGNvbXBpbGVyIGl0IGlzIHRoZSBQcm9taXNlIGZ1bmN0aW9uIGl0c2VsZi5cbiAgICBpZiAoUHJvbWlzZS5kZWZhdWx0KSB7XG4gICAgICB3aW4uUHJvbWlzZSA9IFByb21pc2UuZGVmYXVsdDtcbiAgICB9XG4gICAgLy8gV2UgY29weSB0aGUgaW5kaXZpZHVhbCBzdGF0aWMgbWV0aG9kcywgYmVjYXVzZSBjbG9zdXJlXG4gICAgLy8gY29tcGlsZXIgZmxhdHRlbnMgdGhlIHBvbHlmaWxsIG5hbWVzcGFjZS5cbiAgICB3aW4uUHJvbWlzZS5yZXNvbHZlID0gUHJvbWlzZS5yZXNvbHZlO1xuICAgIHdpbi5Qcm9taXNlLnJlamVjdCA9IFByb21pc2UucmVqZWN0O1xuICAgIHdpbi5Qcm9taXNlLmFsbCA9IFByb21pc2UuYWxsO1xuICAgIHdpbi5Qcm9taXNlLnJhY2UgPSBQcm9taXNlLnJhY2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5jbGFzcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGxhYmVsKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5fVxuICAgKi9cbiAgdG9BcnJheSgpIHt9XG59XG5cbi8qKiBAZW51bSB7bnVtYmVyfSAqL1xuY29uc3QgQW5hbHl0aWNzRXZlbnQgPSB7XG4gIFVOS05PV046IDAsXG4gIElNUFJFU1NJT05fUEFZV0FMTDogMSxcbiAgSU1QUkVTU0lPTl9BRDogMixcbiAgSU1QUkVTU0lPTl9PRkZFUlM6IDMsXG4gIElNUFJFU1NJT05fU1VCU0NSSUJFX0JVVFRPTjogNCxcbiAgSU1QUkVTU0lPTl9TTUFSVEJPWDogNSxcbiAgSU1QUkVTU0lPTl9TV0dfQlVUVE9OOiA2LFxuICBJTVBSRVNTSU9OX0NMSUNLX1RPX1NIT1dfT0ZGRVJTOiA3LFxuICBJTVBSRVNTSU9OX0NMSUNLX1RPX1NIT1dfT0ZGRVJTX09SX0FMUkVBRFlfU1VCU0NSSUJFRDogOCxcbiAgSU1QUkVTU0lPTl9TVUJTQ1JJUFRJT05fQ09NUExFVEU6IDksXG4gIElNUFJFU1NJT05fQUNDT1VOVF9DSEFOR0VEOiAxMCxcbiAgQUNUSU9OX1NVQlNDUklCRTogMTAwMCxcbiAgQUNUSU9OX1BBWU1FTlRfQ09NUExFVEU6IDEwMDEsXG4gIEFDVElPTl9BQ0NPVU5UX0NSRUFURUQ6IDEwMDIsXG4gIEFDVElPTl9BQ0NPVU5UX0FDS05PV0xFREdFRDogMTAwMyxcbiAgQUNUSU9OX1NVQlNDUklQVElPTlNfTEFORElOR19QQUdFOiAxMDA0LFxuICBBQ1RJT05fUEFZTUVOVF9GTE9XX1NUQVJURUQ6IDEwMDUsXG4gIEFDVElPTl9PRkZFUl9TRUxFQ1RFRDogMTAwNixcbiAgQUNUSU9OX1NXR19CVVRUT05fQ0xJQ0s6IDEwMDcsXG4gIEFDVElPTl9WSUVXX09GRkVSUzogMTAwOCxcbiAgQUNUSU9OX0FMUkVBRFlfU1VCU0NSSUJFRDogMTAwOSxcbiAgQUNUSU9OX05FV19ERUZFUlJFRF9BQ0NPVU5UOiAxMDEwLFxuICBFVkVOVF9QQVlNRU5UX0ZBSUxFRDogMjAwMCxcbiAgRVZFTlRfQ1VTVE9NOiAzMDAwLFxuICBFVkVOVF9DT05GSVJNX1RYX0lEOiAzMDAxLFxuICBFVkVOVF9DSEFOR0VEX1RYX0lEOiAzMDAyLFxuICBFVkVOVF9HUEFZX05PX1RYX0lEOiAzMDAzLFxuICBFVkVOVF9HUEFZX0NBTk5PVF9DT05GSVJNX1RYX0lEOiAzMDA0LFxuICBFVkVOVF9TVUJTQ1JJUFRJT05fU1RBVEU6IDQwMDAsXG59O1xuLyoqIEBlbnVtIHtudW1iZXJ9ICovXG5jb25zdCBFdmVudE9yaWdpbmF0b3IgPSB7XG4gIFVOS05PV05fQ0xJRU5UOiAwLFxuICBTV0dfQ0xJRU5UOiAxLFxuICBBTVBfQ0xJRU5UOiAyLFxuICBQUk9QRU5TSVRZX0NMSUVOVDogMyxcbiAgU1dHX1NFUlZFUjogNCxcbiAgUFVCTElTSEVSX0NMSUVOVDogNSxcbn07XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIEFjY291bnRDcmVhdGlvblJlcXVlc3Qge1xuIC8qKlxuICAqIEBwYXJhbSB7IUFycmF5PX0gZGF0YVxuICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10pIHtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5jb21wbGV0ZV8gPSAoZGF0YVsxXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgZ2V0Q29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGxldGVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldENvbXBsZXRlKHZhbHVlKSB7XG4gICAgdGhpcy5jb21wbGV0ZV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXl9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5sYWJlbCgpLCAgLy8gbWVzc2FnZSBsYWJlbFxuICAgICAgdGhpcy5jb21wbGV0ZV8sICAvLyBmaWVsZCAxIC0gY29tcGxldGVcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ0FjY291bnRDcmVhdGlvblJlcXVlc3QnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2Uge1xuIC8qKlxuICAqIEBwYXJhbSB7IUFycmF5PX0gZGF0YVxuICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10pIHtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5zdWJzY3JpYmVyT3JNZW1iZXJfID0gKGRhdGFbMV0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVsxXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5saW5rUmVxdWVzdGVkXyA9IChkYXRhWzJdID09IG51bGwpID8gbnVsbCA6IGRhdGFbMl07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRTdWJzY3JpYmVyT3JNZW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlck9yTWVtYmVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAqL1xuICBzZXRTdWJzY3JpYmVyT3JNZW1iZXIodmFsdWUpIHtcbiAgICB0aGlzLnN1YnNjcmliZXJPck1lbWJlcl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldExpbmtSZXF1ZXN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlua1JlcXVlc3RlZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0TGlua1JlcXVlc3RlZCh2YWx1ZSkge1xuICAgIHRoaXMubGlua1JlcXVlc3RlZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXl9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5sYWJlbCgpLCAgLy8gbWVzc2FnZSBsYWJlbFxuICAgICAgdGhpcy5zdWJzY3JpYmVyT3JNZW1iZXJfLCAgLy8gZmllbGQgMSAtIHN1YnNjcmliZXJfb3JfbWVtYmVyXG4gICAgICB0aGlzLmxpbmtSZXF1ZXN0ZWRfLCAgLy8gZmllbGQgMiAtIGxpbmtfcmVxdWVzdGVkXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBBbmFseXRpY3NDb250ZXh0IHtcbiAvKipcbiAgKiBAcGFyYW0geyFBcnJheT19IGRhdGFcbiAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdKSB7XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5lbWJlZGRlck9yaWdpbl8gPSAoZGF0YVsxXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzFdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMudHJhbnNhY3Rpb25JZF8gPSAoZGF0YVsyXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzJdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucmVmZXJyaW5nT3JpZ2luXyA9IChkYXRhWzNdID09IG51bGwpID8gbnVsbCA6IGRhdGFbM107XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy51dG1Tb3VyY2VfID0gKGRhdGFbNF0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVs0XTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnV0bUNhbXBhaWduXyA9IChkYXRhWzVdID09IG51bGwpID8gbnVsbCA6IGRhdGFbNV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy51dG1NZWRpdW1fID0gKGRhdGFbNl0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVs2XTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnNrdV8gPSAoZGF0YVs3XSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzddO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnJlYWR5VG9QYXlfID0gKGRhdGFbOF0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVs4XTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IUFycmF5PHN0cmluZz59ICovXG4gICAgdGhpcy5sYWJlbF8gPSBkYXRhWzldIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRFbWJlZGRlck9yaWdpbigpIHtcbiAgICByZXR1cm4gdGhpcy5lbWJlZGRlck9yaWdpbl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRFbWJlZGRlck9yaWdpbih2YWx1ZSkge1xuICAgIHRoaXMuZW1iZWRkZXJPcmlnaW5fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25JZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRUcmFuc2FjdGlvbklkKHZhbHVlKSB7XG4gICAgdGhpcy50cmFuc2FjdGlvbklkXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRSZWZlcnJpbmdPcmlnaW4oKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmZXJyaW5nT3JpZ2luXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFJlZmVycmluZ09yaWdpbih2YWx1ZSkge1xuICAgIHRoaXMucmVmZXJyaW5nT3JpZ2luXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRVdG1Tb3VyY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMudXRtU291cmNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFV0bVNvdXJjZSh2YWx1ZSkge1xuICAgIHRoaXMudXRtU291cmNlXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRVdG1DYW1wYWlnbigpIHtcbiAgICByZXR1cm4gdGhpcy51dG1DYW1wYWlnbl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRVdG1DYW1wYWlnbih2YWx1ZSkge1xuICAgIHRoaXMudXRtQ2FtcGFpZ25fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFV0bU1lZGl1bSgpIHtcbiAgICByZXR1cm4gdGhpcy51dG1NZWRpdW1fO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0VXRtTWVkaXVtKHZhbHVlKSB7XG4gICAgdGhpcy51dG1NZWRpdW1fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFNrdSgpIHtcbiAgICByZXR1cm4gdGhpcy5za3VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0U2t1KHZhbHVlKSB7XG4gICAgdGhpcy5za3VfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRSZWFkeVRvUGF5KCkge1xuICAgIHJldHVybiB0aGlzLnJlYWR5VG9QYXlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldFJlYWR5VG9QYXkodmFsdWUpIHtcbiAgICB0aGlzLnJlYWR5VG9QYXlfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5PHN0cmluZz59XG4gICAqL1xuICBnZXRMYWJlbExpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHZhbHVlXG4gICAqL1xuICBzZXRMYWJlbExpc3QodmFsdWUpIHtcbiAgICB0aGlzLmxhYmVsXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheX1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KCkge1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmxhYmVsKCksICAvLyBtZXNzYWdlIGxhYmVsXG4gICAgICB0aGlzLmVtYmVkZGVyT3JpZ2luXywgIC8vIGZpZWxkIDEgLSBlbWJlZGRlcl9vcmlnaW5cbiAgICAgIHRoaXMudHJhbnNhY3Rpb25JZF8sICAvLyBmaWVsZCAyIC0gdHJhbnNhY3Rpb25faWRcbiAgICAgIHRoaXMucmVmZXJyaW5nT3JpZ2luXywgIC8vIGZpZWxkIDMgLSByZWZlcnJpbmdfb3JpZ2luXG4gICAgICB0aGlzLnV0bVNvdXJjZV8sICAvLyBmaWVsZCA0IC0gdXRtX3NvdXJjZVxuICAgICAgdGhpcy51dG1DYW1wYWlnbl8sICAvLyBmaWVsZCA1IC0gdXRtX2NhbXBhaWduXG4gICAgICB0aGlzLnV0bU1lZGl1bV8sICAvLyBmaWVsZCA2IC0gdXRtX21lZGl1bVxuICAgICAgdGhpcy5za3VfLCAgLy8gZmllbGQgNyAtIHNrdVxuICAgICAgdGhpcy5yZWFkeVRvUGF5XywgIC8vIGZpZWxkIDggLSByZWFkeV90b19wYXlcbiAgICAgIHRoaXMubGFiZWxfLCAgLy8gZmllbGQgOSAtIGxhYmVsXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbmFseXRpY3NDb250ZXh0JztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBBbmFseXRpY3NFdmVudE1ldGEge1xuIC8qKlxuICAqIEBwYXJhbSB7IUFycmF5PX0gZGF0YVxuICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10pIHtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0V2ZW50T3JpZ2luYXRvcn0gKi9cbiAgICB0aGlzLmV2ZW50T3JpZ2luYXRvcl8gPSAoZGF0YVsxXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzFdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fID0gKGRhdGFbMl0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVsyXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/RXZlbnRPcmlnaW5hdG9yfVxuICAgKi9cbiAgZ2V0RXZlbnRPcmlnaW5hdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50T3JpZ2luYXRvcl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnRPcmlnaW5hdG9yfSB2YWx1ZVxuICAgKi9cbiAgc2V0RXZlbnRPcmlnaW5hdG9yKHZhbHVlKSB7XG4gICAgdGhpcy5ldmVudE9yaWdpbmF0b3JfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRJc0Zyb21Vc2VyQWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldElzRnJvbVVzZXJBY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMubGFiZWwoKSwgIC8vIG1lc3NhZ2UgbGFiZWxcbiAgICAgIHRoaXMuZXZlbnRPcmlnaW5hdG9yXywgIC8vIGZpZWxkIDEgLSBldmVudF9vcmlnaW5hdG9yXG4gICAgICB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fLCAgLy8gZmllbGQgMiAtIGlzX2Zyb21fdXNlcl9hY3Rpb25cbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ0FuYWx5dGljc0V2ZW50TWV0YSc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgQW5hbHl0aWNzUmVxdWVzdCB7XG4gLyoqXG4gICogQHBhcmFtIHshQXJyYXk9fSBkYXRhXG4gICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSkge1xuXG4gICAgLyoqIEBwcml2YXRlIHs/QW5hbHl0aWNzQ29udGV4dH0gKi9cbiAgICB0aGlzLmNvbnRleHRfID0gKGRhdGFbMV0gPT0gbnVsbCB8fCBkYXRhWzFdID09IHVuZGVmaW5lZCkgPyBudWxsIDogbmV3XG4gICAgICAgIEFuYWx5dGljc0NvbnRleHQoZGF0YVsxXSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9BbmFseXRpY3NFdmVudH0gKi9cbiAgICB0aGlzLmV2ZW50XyA9IChkYXRhWzJdID09IG51bGwpID8gbnVsbCA6IGRhdGFbMl07XG5cbiAgICAvKiogQHByaXZhdGUgez9BbmFseXRpY3NFdmVudE1ldGF9ICovXG4gICAgdGhpcy5tZXRhXyA9IChkYXRhWzNdID09IG51bGwgfHwgZGF0YVszXSA9PSB1bmRlZmluZWQpID8gbnVsbCA6IG5ld1xuICAgICAgICBBbmFseXRpY3NFdmVudE1ldGEoZGF0YVszXSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9FdmVudFBhcmFtc30gKi9cbiAgICB0aGlzLnBhcmFtc18gPSAoZGF0YVs0XSA9PSBudWxsIHx8IGRhdGFbNF0gPT0gdW5kZWZpbmVkKSA/IG51bGwgOiBuZXdcbiAgICAgICAgRXZlbnRQYXJhbXMoZGF0YVs0XSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P0FuYWx5dGljc0NvbnRleHR9XG4gICAqL1xuICBnZXRDb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFuYWx5dGljc0NvbnRleHR9IHZhbHVlXG4gICAqL1xuICBzZXRDb250ZXh0KHZhbHVlKSB7XG4gICAgdGhpcy5jb250ZXh0XyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9BbmFseXRpY3NFdmVudH1cbiAgICovXG4gIGdldEV2ZW50KCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBbmFseXRpY3NFdmVudH0gdmFsdWVcbiAgICovXG4gIHNldEV2ZW50KHZhbHVlKSB7XG4gICAgdGhpcy5ldmVudF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/QW5hbHl0aWNzRXZlbnRNZXRhfVxuICAgKi9cbiAgZ2V0TWV0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXRhXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBbmFseXRpY3NFdmVudE1ldGF9IHZhbHVlXG4gICAqL1xuICBzZXRNZXRhKHZhbHVlKSB7XG4gICAgdGhpcy5tZXRhXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9FdmVudFBhcmFtc31cbiAgICovXG4gIGdldFBhcmFtcygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJhbXNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUV2ZW50UGFyYW1zfSB2YWx1ZVxuICAgKi9cbiAgc2V0UGFyYW1zKHZhbHVlKSB7XG4gICAgdGhpcy5wYXJhbXNfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMubGFiZWwoKSwgIC8vIG1lc3NhZ2UgbGFiZWxcbiAgICAgIHRoaXMuY29udGV4dF8gPyB0aGlzLmNvbnRleHRfLnRvQXJyYXkoKSA6IFtdLCAvLyBmaWVsZCAxIC0gY29udGV4dFxuICAgICAgdGhpcy5ldmVudF8sICAvLyBmaWVsZCAyIC0gZXZlbnRcbiAgICAgIHRoaXMubWV0YV8gPyB0aGlzLm1ldGFfLnRvQXJyYXkoKSA6IFtdLCAvLyBmaWVsZCAzIC0gbWV0YVxuICAgICAgdGhpcy5wYXJhbXNfID8gdGhpcy5wYXJhbXNfLnRvQXJyYXkoKSA6IFtdLCAvLyBmaWVsZCA0IC0gcGFyYW1zXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbmFseXRpY3NSZXF1ZXN0JztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBFbnRpdGxlbWVudHNSZXNwb25zZSB7XG4gLyoqXG4gICogQHBhcmFtIHshQXJyYXk9fSBkYXRhXG4gICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSkge1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuand0XyA9IChkYXRhWzFdID09IG51bGwpID8gbnVsbCA6IGRhdGFbMV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldEp3dCgpIHtcbiAgICByZXR1cm4gdGhpcy5qd3RfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0Snd0KHZhbHVlKSB7XG4gICAgdGhpcy5qd3RfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMubGFiZWwoKSwgIC8vIG1lc3NhZ2UgbGFiZWxcbiAgICAgIHRoaXMuand0XywgIC8vIGZpZWxkIDEgLSBqd3RcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ0VudGl0bGVtZW50c1Jlc3BvbnNlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBFdmVudFBhcmFtcyB7XG4gLyoqXG4gICogQHBhcmFtIHshQXJyYXk9fSBkYXRhXG4gICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSkge1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuc21hcnRib3hNZXNzYWdlXyA9IChkYXRhWzFdID09IG51bGwpID8gbnVsbCA6IGRhdGFbMV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5ncGF5VHJhbnNhY3Rpb25JZF8gPSAoZGF0YVsyXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzJdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmhhZExvZ2dlZF8gPSAoZGF0YVszXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzNdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRTbWFydGJveE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc21hcnRib3hNZXNzYWdlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFNtYXJ0Ym94TWVzc2FnZSh2YWx1ZSkge1xuICAgIHRoaXMuc21hcnRib3hNZXNzYWdlXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRHcGF5VHJhbnNhY3Rpb25JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5ncGF5VHJhbnNhY3Rpb25JZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRHcGF5VHJhbnNhY3Rpb25JZCh2YWx1ZSkge1xuICAgIHRoaXMuZ3BheVRyYW5zYWN0aW9uSWRfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRIYWRMb2dnZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFkTG9nZ2VkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAqL1xuICBzZXRIYWRMb2dnZWQodmFsdWUpIHtcbiAgICB0aGlzLmhhZExvZ2dlZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXl9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5sYWJlbCgpLCAgLy8gbWVzc2FnZSBsYWJlbFxuICAgICAgdGhpcy5zbWFydGJveE1lc3NhZ2VfLCAgLy8gZmllbGQgMSAtIHNtYXJ0Ym94X21lc3NhZ2VcbiAgICAgIHRoaXMuZ3BheVRyYW5zYWN0aW9uSWRfLCAgLy8gZmllbGQgMiAtIGdwYXlfdHJhbnNhY3Rpb25faWRcbiAgICAgIHRoaXMuaGFkTG9nZ2VkXywgIC8vIGZpZWxkIDMgLSBoYWRfbG9nZ2VkXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdFdmVudFBhcmFtcyc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgTGlua1NhdmVUb2tlblJlcXVlc3Qge1xuIC8qKlxuICAqIEBwYXJhbSB7IUFycmF5PX0gZGF0YVxuICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10pIHtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLmF1dGhDb2RlXyA9IChkYXRhWzFdID09IG51bGwpID8gbnVsbCA6IGRhdGFbMV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy50b2tlbl8gPSAoZGF0YVsyXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzJdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRBdXRoQ29kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRoQ29kZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRBdXRoQ29kZSh2YWx1ZSkge1xuICAgIHRoaXMuYXV0aENvZGVfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLnRva2VuXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFRva2VuKHZhbHVlKSB7XG4gICAgdGhpcy50b2tlbl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXl9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5sYWJlbCgpLCAgLy8gbWVzc2FnZSBsYWJlbFxuICAgICAgdGhpcy5hdXRoQ29kZV8sICAvLyBmaWVsZCAxIC0gYXV0aF9jb2RlXG4gICAgICB0aGlzLnRva2VuXywgIC8vIGZpZWxkIDIgLSB0b2tlblxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGxhYmVsKCkge1xuICAgIHJldHVybiAnTGlua1NhdmVUb2tlblJlcXVlc3QnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIExpbmtpbmdJbmZvUmVzcG9uc2Uge1xuIC8qKlxuICAqIEBwYXJhbSB7IUFycmF5PX0gZGF0YVxuICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10pIHtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5yZXF1ZXN0ZWRfID0gKGRhdGFbMV0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVsxXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldFJlcXVlc3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0ZWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldFJlcXVlc3RlZCh2YWx1ZSkge1xuICAgIHRoaXMucmVxdWVzdGVkXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheX1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KCkge1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmxhYmVsKCksICAvLyBtZXNzYWdlIGxhYmVsXG4gICAgICB0aGlzLnJlcXVlc3RlZF8sICAvLyBmaWVsZCAxIC0gcmVxdWVzdGVkXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdMaW5raW5nSW5mb1Jlc3BvbnNlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBTa3VTZWxlY3RlZFJlc3BvbnNlIHtcbiAvKipcbiAgKiBAcGFyYW0geyFBcnJheT19IGRhdGFcbiAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdKSB7XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5za3VfID0gKGRhdGFbMV0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVsxXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLm9sZFNrdV8gPSAoZGF0YVsyXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzJdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRTa3UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2t1XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFNrdSh2YWx1ZSkge1xuICAgIHRoaXMuc2t1XyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRPbGRTa3UoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkU2t1XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldE9sZFNrdSh2YWx1ZSkge1xuICAgIHRoaXMub2xkU2t1XyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheX1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KCkge1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmxhYmVsKCksICAvLyBtZXNzYWdlIGxhYmVsXG4gICAgICB0aGlzLnNrdV8sICAvLyBmaWVsZCAxIC0gc2t1XG4gICAgICB0aGlzLm9sZFNrdV8sICAvLyBmaWVsZCAyIC0gb2xkX3NrdVxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGxhYmVsKCkge1xuICAgIHJldHVybiAnU2t1U2VsZWN0ZWRSZXNwb25zZSc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgU21hcnRCb3hNZXNzYWdlIHtcbiAvKipcbiAgKiBAcGFyYW0geyFBcnJheT19IGRhdGFcbiAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdKSB7XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuaXNDbGlja2VkXyA9IChkYXRhWzFdID09IG51bGwpID8gbnVsbCA6IGRhdGFbMV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRJc0NsaWNrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDbGlja2VkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAqL1xuICBzZXRJc0NsaWNrZWQodmFsdWUpIHtcbiAgICB0aGlzLmlzQ2xpY2tlZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXl9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5sYWJlbCgpLCAgLy8gbWVzc2FnZSBsYWJlbFxuICAgICAgdGhpcy5pc0NsaWNrZWRfLCAgLy8gZmllbGQgMSAtIGlzX2NsaWNrZWRcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ1NtYXJ0Qm94TWVzc2FnZSc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgU3Vic2NyaWJlUmVzcG9uc2Uge1xuIC8qKlxuICAqIEBwYXJhbSB7IUFycmF5PX0gZGF0YVxuICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10pIHtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5zdWJzY3JpYmVfID0gKGRhdGFbMV0gPT0gbnVsbCkgPyBudWxsIDogZGF0YVsxXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldFN1YnNjcmliZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldFN1YnNjcmliZSh2YWx1ZSkge1xuICAgIHRoaXMuc3Vic2NyaWJlXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheX1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KCkge1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmxhYmVsKCksICAvLyBtZXNzYWdlIGxhYmVsXG4gICAgICB0aGlzLnN1YnNjcmliZV8sICAvLyBmaWVsZCAxIC0gc3Vic2NyaWJlXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdTdWJzY3JpYmVSZXNwb25zZSc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgVmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZSB7XG4gLyoqXG4gICogQHBhcmFtIHshQXJyYXk9fSBkYXRhXG4gICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSkge1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLm5hdGl2ZV8gPSAoZGF0YVsxXSA9PSBudWxsKSA/IG51bGwgOiBkYXRhWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgZ2V0TmF0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLm5hdGl2ZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0TmF0aXZlKHZhbHVlKSB7XG4gICAgdGhpcy5uYXRpdmVfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMubGFiZWwoKSwgIC8vIG1lc3NhZ2UgbGFiZWxcbiAgICAgIHRoaXMubmF0aXZlXywgIC8vIGZpZWxkIDEgLSBuYXRpdmVcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ1ZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UnO1xuICB9XG59XG5cbmNvbnN0IFBST1RPX01BUCA9IHtcbiAgJ0FjY291bnRDcmVhdGlvblJlcXVlc3QnOiBBY2NvdW50Q3JlYXRpb25SZXF1ZXN0LFxuICAnQWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZSc6IEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG4gICdBbmFseXRpY3NDb250ZXh0JzogQW5hbHl0aWNzQ29udGV4dCxcbiAgJ0FuYWx5dGljc0V2ZW50TWV0YSc6IEFuYWx5dGljc0V2ZW50TWV0YSxcbiAgJ0FuYWx5dGljc1JlcXVlc3QnOiBBbmFseXRpY3NSZXF1ZXN0LFxuICAnRW50aXRsZW1lbnRzUmVzcG9uc2UnOiBFbnRpdGxlbWVudHNSZXNwb25zZSxcbiAgJ0V2ZW50UGFyYW1zJzogRXZlbnRQYXJhbXMsXG4gICdMaW5rU2F2ZVRva2VuUmVxdWVzdCc6IExpbmtTYXZlVG9rZW5SZXF1ZXN0LFxuICAnTGlua2luZ0luZm9SZXNwb25zZSc6IExpbmtpbmdJbmZvUmVzcG9uc2UsXG4gICdTa3VTZWxlY3RlZFJlc3BvbnNlJzogU2t1U2VsZWN0ZWRSZXNwb25zZSxcbiAgJ1NtYXJ0Qm94TWVzc2FnZSc6IFNtYXJ0Qm94TWVzc2FnZSxcbiAgJ1N1YnNjcmliZVJlc3BvbnNlJzogU3Vic2NyaWJlUmVzcG9uc2UsXG4gICdWaWV3U3Vic2NyaXB0aW9uc1Jlc3BvbnNlJzogVmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZSxcbn07XG5cbi8qKlxuICogVXRpbGl0eSB0byBkZXNlcmlhbGl6ZSBhIGJ1ZmZlclxuICogQHBhcmFtIHshQXJyYXl9IGRhdGFcbiAqIEByZXR1cm4geyFNZXNzYWdlfVxuICovXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gIC8qKiB7P3N0cmluZ30gKi9cbiAgY29uc3Qga2V5ID0gZGF0YSA/IGRhdGFbMF0gOiBudWxsO1xuICBpZiAoa2V5KSB7XG4gICAgY29uc3QgY3RvciA9IFBST1RPX01BUFtrZXldO1xuICAgIGlmIChjdG9yKSB7XG4gICAgICByZXR1cm4gbmV3IGN0b3IoZGF0YSk7XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcignRGVzZXJpYWxpemF0aW9uIGZhaWxlZCBmb3IgJyArIGRhdGEpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OiBUKX0gbWVzc2FnZVR5cGVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmZ1bmN0aW9uIGdldExhYmVsKG1lc3NhZ2VUeXBlKSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSAvKiogQHR5cGUgeyFNZXNzYWdlfSAqLyAobmV3IG1lc3NhZ2VUeXBlKCkpO1xuICByZXR1cm4gbWVzc2FnZS5sYWJlbCgpO1xufVxuXG5leHBvcnQge1xuICBBY2NvdW50Q3JlYXRpb25SZXF1ZXN0LFxuICBBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlLFxuICBBbmFseXRpY3NDb250ZXh0LFxuICBBbmFseXRpY3NFdmVudCxcbiAgQW5hbHl0aWNzRXZlbnRNZXRhLFxuICBBbmFseXRpY3NSZXF1ZXN0LFxuICBFbnRpdGxlbWVudHNSZXNwb25zZSxcbiAgRXZlbnRPcmlnaW5hdG9yLFxuICBFdmVudFBhcmFtcyxcbiAgTGlua1NhdmVUb2tlblJlcXVlc3QsXG4gIExpbmtpbmdJbmZvUmVzcG9uc2UsXG4gIE1lc3NhZ2UsXG4gIFNrdVNlbGVjdGVkUmVzcG9uc2UsXG4gIFNtYXJ0Qm94TWVzc2FnZSxcbiAgU3Vic2NyaWJlUmVzcG9uc2UsXG4gIFZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UsXG4gIGRlc2VyaWFsaXplLFxuICBnZXRMYWJlbCxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEFuYWx5dGljc1JlcXVlc3QsXG4gIEFuYWx5dGljc0NvbnRleHQsXG4gIEFuYWx5dGljc0V2ZW50TWV0YSxcbiAgQW5hbHl0aWNzRXZlbnQsXG4gIEV2ZW50UGFyYW1zLFxufSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtjcmVhdGVFbGVtZW50fSBmcm9tICcuLi91dGlscy9kb20nO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7Z2V0T25FeHBlcmltZW50c30gZnJvbSAnLi9leHBlcmltZW50cyc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmcsIHBhcnNlVXJsfSBmcm9tICcuLi91dGlscy91cmwnO1xuaW1wb3J0IHtzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcbmltcG9ydCB7Z2V0VXVpZH0gZnJvbSAnLi4vdXRpbHMvc3RyaW5nJztcbmltcG9ydCB7Q2xpZW50RXZlbnRNYW5hZ2VyfSBmcm9tICcuL2NsaWVudC1ldmVudC1tYW5hZ2VyJztcblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5jb25zdCBpZnJhbWVTdHlsZXMgPSB7XG4gIGRpc3BsYXk6ICdub25lJyxcbn07XG5cbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZGVwcy5kb2MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gLyoqIEB0eXBlIHshSFRNTElGcmFtZUVsZW1lbnR9ICovIChjcmVhdGVFbGVtZW50KFxuICAgICAgdGhpcy5kb2NfLmdldFdpbigpLmRvY3VtZW50LFxuICAgICAgJ2lmcmFtZScsXG4gICAgICB7fVxuICAgICkpO1xuXG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuaWZyYW1lXywgaWZyYW1lU3R5bGVzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNyY18gPSBmZVVybCgnL3NlcnZpY2VpZnJhbWUnKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnB1YmxpY2F0aW9uSWRfID0gZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpO1xuXG4gICAgdGhpcy5hcmdzXyA9IGZlQXJncyh7XG4gICAgICBwdWJsaWNhdGlvbklkOiB0aGlzLnB1YmxpY2F0aW9uSWRfLFxuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIEB0eXBlIHshYm9vbGVhbn0gKi9cbiAgICB0aGlzLmV2ZXJMb2dnZWRfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3QgeyFBbmFseXRpY3NDb250ZXh0fVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dF8gPSBuZXcgQW5hbHl0aWNzQ29udGV4dCgpO1xuXG4gICAgdGhpcy5jb250ZXh0Xy5zZXRUcmFuc2FjdGlvbklkKGdldFV1aWQoKSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnQ+fSAqL1xuICAgIHRoaXMuc2VydmljZVJlYWR5XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMubGFzdEFjdGlvbl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUNsaWVudEV2ZW50TWFuYWdlcn0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5yZWdpc3RlckV2ZW50TGlzdGVuZXIoXG4gICAgICB0aGlzLmhhbmRsZUNsaWVudEV2ZW50Xy5iaW5kKHRoaXMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNhY3Rpb25JZFxuICAgKi9cbiAgc2V0VHJhbnNhY3Rpb25JZCh0cmFuc2FjdGlvbklkKSB7XG4gICAgdGhpcy5jb250ZXh0Xy5zZXRUcmFuc2FjdGlvbklkKHRyYW5zYWN0aW9uSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uSWQoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodGhpcy5jb250ZXh0Xy5nZXRUcmFuc2FjdGlvbklkKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRTa3UoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dF8uZ2V0U2t1KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICAgKi9cbiAgc2V0U2t1KHNrdSkge1xuICAgIHRoaXMuY29udGV4dF8uc2V0U2t1KHNrdSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gbGFiZWxzXG4gICAqL1xuICBhZGRMYWJlbHMobGFiZWxzKSB7XG4gICAgaWYgKGxhYmVscyAmJiBsYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbmV3TGFiZWxzID0gW10uY29uY2F0KHRoaXMuY29udGV4dF8uZ2V0TGFiZWxMaXN0KCkpO1xuICAgICAgbGFiZWxzLmZvckVhY2gobGFiZWwgPT4ge1xuICAgICAgICBpZiAobmV3TGFiZWxzLmluZGV4T2YobGFiZWwpID09IC0xKSB7XG4gICAgICAgICAgbmV3TGFiZWxzLnB1c2gobGFiZWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29udGV4dF8uc2V0TGFiZWxMaXN0KG5ld0xhYmVscyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFIVE1MSUZyYW1lRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRRdWVyeVN0cmluZ18oKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jXy5nZXRXaW4oKS5sb2NhdGlvbi5zZWFyY2g7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UmVmZXJyZXJfKCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uZ2V0V2luKCkuZG9jdW1lbnQucmVmZXJyZXI7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldENvbnRleHRfKCkge1xuICAgIGNvbnN0IHV0bVBhcmFtcyA9IHBhcnNlUXVlcnlTdHJpbmcodGhpcy5nZXRRdWVyeVN0cmluZ18oKSk7XG4gICAgdGhpcy5jb250ZXh0Xy5zZXRSZWZlcnJpbmdPcmlnaW4ocGFyc2VVcmwodGhpcy5nZXRSZWZlcnJlcl8oKSkub3JpZ2luKTtcbiAgICBjb25zdCBjYW1wYWlnbiA9IHV0bVBhcmFtc1sndXRtX2NhbXBhaWduJ107XG4gICAgY29uc3QgbWVkaXVtID0gdXRtUGFyYW1zWyd1dG1fbWVkaXVtJ107XG4gICAgY29uc3Qgc291cmNlID0gdXRtUGFyYW1zWyd1dG1fc291cmNlJ107XG4gICAgaWYgKGNhbXBhaWduKSB7XG4gICAgICB0aGlzLmNvbnRleHRfLnNldFV0bUNhbXBhaWduKGNhbXBhaWduKTtcbiAgICB9XG4gICAgaWYgKG1lZGl1bSkge1xuICAgICAgdGhpcy5jb250ZXh0Xy5zZXRVdG1NZWRpdW0obWVkaXVtKTtcbiAgICB9XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgdGhpcy5jb250ZXh0Xy5zZXRVdG1Tb3VyY2Uoc291cmNlKTtcbiAgICB9XG4gICAgdGhpcy5hZGRMYWJlbHMoZ2V0T25FeHBlcmltZW50cyh0aGlzLmRvY18uZ2V0V2luKCkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5SWZyYW1lUG9ydD59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydF8oKSB7XG4gICAgaWYgKCF0aGlzLnNlcnZpY2VSZWFkeV8pIHtcbiAgICAgIC8vIFRPRE8oc29oYW5pcmFvKTogUG90ZW50aWFsbHkgZG8gdGhpcyBldmVuIGVhcmxpZXJcbiAgICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkuYXBwZW5kQ2hpbGQodGhpcy5nZXRFbGVtZW50KCkpO1xuICAgICAgdGhpcy5zZXJ2aWNlUmVhZHlfID0gdGhpcy5hY3Rpdml0eVBvcnRzX1xuICAgICAgICAub3BlbklmcmFtZSh0aGlzLmlmcmFtZV8sIHRoaXMuc3JjXywgdGhpcy5hcmdzXylcbiAgICAgICAgLnRoZW4ocG9ydCA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRDb250ZXh0XygpO1xuICAgICAgICAgIHJldHVybiBwb3J0LndoZW5SZWFkeSgpLnRoZW4oKCkgPT4gcG9ydCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlUmVhZHlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSZWFkeVRvUGF5XG4gICAqL1xuICBzZXRSZWFkeVRvUGF5KGlzUmVhZHlUb1BheSkge1xuICAgIHRoaXMuY29udGV4dF8uc2V0UmVhZHlUb1BheShpc1JlYWR5VG9QYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLnJlbW92ZUNoaWxkKHRoaXMuZ2V0RWxlbWVudCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQW5hbHl0aWNzQ29udGV4dH1cbiAgICovXG4gIGdldENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGFueSBsb2dzIGhhdmUgYWxyZWFkeSBiZSBzZW50IHRvIHRoZSBhbmFseXRpY3Mgc2VydmVyLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZ2V0SGFzTG9nZ2VkKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZXJMb2dnZWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuQ2xpZW50RXZlbnR9IGV2ZW50XG4gICAqIEByZXR1cm4geyFBbmFseXRpY3NSZXF1ZXN0fVxuICAgKi9cbiAgY3JlYXRlTG9nUmVxdWVzdF8oZXZlbnQpIHtcbiAgICBjb25zdCBtZXRhID0gbmV3IEFuYWx5dGljc0V2ZW50TWV0YSgpO1xuICAgIG1ldGEuc2V0RXZlbnRPcmlnaW5hdG9yKGV2ZW50LmV2ZW50T3JpZ2luYXRvcik7XG4gICAgbWV0YS5zZXRJc0Zyb21Vc2VyQWN0aW9uKGV2ZW50LmlzRnJvbVVzZXJBY3Rpb24pO1xuXG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBBbmFseXRpY3NSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5zZXRFdmVudChldmVudC5ldmVudFR5cGUpO1xuICAgIHJlcXVlc3Quc2V0Q29udGV4dCh0aGlzLmNvbnRleHRfKTtcbiAgICByZXF1ZXN0LnNldE1ldGEobWV0YSk7XG4gICAgaWYgKGV2ZW50LmFkZGl0aW9uYWxQYXJhbWV0ZXJzIGluc3RhbmNlb2YgRXZlbnRQYXJhbXMpIHtcbiAgICAgIHJlcXVlc3Quc2V0UGFyYW1zKGV2ZW50LmFkZGl0aW9uYWxQYXJhbWV0ZXJzKTtcbiAgICB9IC8vIElnbm9yZSBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVycy4gIEl0IG1heSBoYXZlIGRhdGEgd2Ugc2hvdWxkbid0IGxvZy5cbiAgICByZXR1cm4gcmVxdWVzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBtZXNzYWdlIHJlY2VpdmVkIGJ5IHRoZSBwb3J0LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8Ym9vbGVhbj4pfSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5sYXN0QWN0aW9uXyA9IHRoaXMuc3RhcnRfKCkudGhlbihwb3J0ID0+IHtcbiAgICAgIHBvcnQub25NZXNzYWdlRGVwcmVjYXRlZChjYWxsYmFjayk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHNob3VsZExvZ1B1Ymxpc2hlckV2ZW50c18oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVwc18uY29uZmlnKCkuZW5hYmxlU3dnQW5hbHl0aWNzID09PSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqICBMaXN0ZW5zIGZvciBuZXcgZXZlbnRzIGZyb20gdGhlIGV2ZW50cyBtYW5hZ2VyIGFuZCBoYW5kbGVzIGxvZ2dpbmdcbiAgICogQHBhcmFtIHshLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudH0gZXZlbnRcbiAgICovXG4gIGhhbmRsZUNsaWVudEV2ZW50XyhldmVudCkge1xuICAgIC8vdGhpcyBldmVudCBpcyBqdXN0IHVzZWQgdG8gY29tbXVuaWNhdGUgaW5mb3JtYXRpb24gaW50ZXJuYWxseS4gIEl0IHNob3VsZFxuICAgIC8vbm90IGJlIHJlcG9ydGVkIHRvIHRoZSBTd0cgYW5hbHl0aWNzIHNlcnZpY2UuXG4gICAgaWYgKGV2ZW50LmV2ZW50VHlwZSA9PT0gQW5hbHl0aWNzRXZlbnQuRVZFTlRfU1VCU0NSSVBUSU9OX1NUQVRFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgQ2xpZW50RXZlbnRNYW5hZ2VyLmlzUHVibGlzaGVyRXZlbnQoZXZlbnQpICYmXG4gICAgICAhdGhpcy5zaG91bGRMb2dQdWJsaXNoZXJFdmVudHNfKClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sYXN0QWN0aW9uXyA9IHRoaXMuc3RhcnRfKCkudGhlbihwb3J0ID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmNyZWF0ZUxvZ1JlcXVlc3RfKGV2ZW50KTtcbiAgICAgIHRoaXMuZXZlckxvZ2dlZF8gPSB0cnVlO1xuICAgICAgcG9ydC5leGVjdXRlKHJlcXVlc3QpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QW5hbHl0aWNzRXZlbnR9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge2NyZWF0ZUVsZW1lbnR9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge21zZ30gZnJvbSAnLi4vdXRpbHMvaTE4bic7XG5pbXBvcnQge1NtYXJ0U3Vic2NyaXB0aW9uQnV0dG9uQXBpLCBUaGVtZX0gZnJvbSAnLi9zbWFydC1idXR0b24tYXBpJztcblxuLyoqXG4gKiBUaGUgYnV0dG9uIHRpdGxlIHNob3VsZCBtYXRjaCB0aGF0IG9mIGJ1dHRvbidzIFNWRy5cbiAqL1xuLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmNvbnN0IFRJVExFX0xBTkdfTUFQID0ge1xuICAnZW4nOiAnU3Vic2NyaWJlIHdpdGggR29vZ2xlJyxcbiAgJ2FyJzogJ0dvb2dsZSDYp9i02KrYsdmDwqDZhdi5JyxcbiAgJ2RlJzogJ0Fib25uaWVyZW4gbWl0IEdvb2dsZScsXG4gICdlcyc6ICdTdXNjcsOtYmV0ZSBjb24gR29vZ2xlJyxcbiAgJ2VzLWxhdGFtJzogJ1N1c2Nyw61iZXRlIGNvbiBHb29nbGUnLFxuICAnZXMtbGF0bic6ICdTdXNjcsOtYmV0ZSBjb24gR29vZ2xlJyxcbiAgJ2ZyJzogXCJTJ2Fib25uZXIgYXZlYyBHb29nbGVcIixcbiAgJ2hpJzogJ0dvb2dsZSDgpJXgpYcg4KWb4KSw4KS/4KSv4KWHIOCkuOCkpuCkuOCljeCkr+CkpOCkvicsXG4gICdpZCc6ICdCZXJsYW5nZ2FuYW4gZGVuZ2FuIEdvb2dsZScsXG4gICdpdCc6ICdBYmJvbmF0aSBjb24gR29vZ2xlJyxcbiAgJ2pwJzogJ0dvb2dsZSDjgafos7zoqq0nLFxuICAna28nOiAnR29vZ2xlIOydhCDthrXtlZzqtazrj4UnLFxuICAnbXMnOiAnTGFuZ2dhbiBkZW5nYW4gR29vZ2xlJyxcbiAgJ25sJzogJ0Fib25uZXJlbiB2aWEgR29vZ2xlJyxcbiAgJ25vJzogJ0Fib25uZXIgbWVkIEdvb2dsZScsXG4gICdwbCc6ICdTdWJza3J5YnVqIHogR29vZ2xlJyxcbiAgJ3B0JzogJ1N1YnNjcmV2ZXIgY29tIG8gR29vZ2xlJyxcbiAgJ3B0LWJyJzogJ0Fzc2luZSBjb20gbyBHb29nbGUnLFxuICAncnUnOiAn0J/QvtC00L/QuGNrYSDRh9C10YDQtdC3IEdvb2dsZScsXG4gICdzZSc6ICdQcmVudW1lcmVyYSBtZWQgR29vZ2xlJyxcbiAgJ3RoJzogJ+C4quC4oeC4seC4hOC4o+C4n+C4suC4mSBHb29nbGUnLFxuICAndHInOiAnR29vZ2xlIGlsZSBBYm9uZSBPbCcsXG4gICd1ayc6ICfQn9GW0LTQv9C40YHQsNGC0LjRgdGPINGH0LXRgNC10LcgR29vZ2xlJyxcbiAgJ3poLXR3JzogJ+mAj+mBjiBHb29nbGUg6KiC6ZaxJyxcbn07XG5cbi8qKlxuICogVGhlIGJ1dHRvbiBzdHlsZXNoZWV0IGNhbiBiZSBmb3VuZCBpbiB0aGUgYC9hc3NldHMvc3dnLWJ1dHRvbi5jc3NgLlxuICogSXQncyBwcm9kdWNlZCBieSB0aGUgYGd1bHAgYXNzZXRzYCB0YXNrIGFuZCBkZXBsb3llZCB0b1xuICogYGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9zd2ctYnV0dG9uLmNzc2AuXG4gKi9cbmV4cG9ydCBjbGFzcyBCdXR0b25BcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vbW9kZWwvZG9jLkRvY30gZG9jXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4vcnVudGltZS5Db25maWd1cmVkUnVudGltZT59IGNvbmZpZ3VyZWRSdW50aW1lUHJvbWlzZVxuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jLCBjb25maWd1cmVkUnVudGltZVByb21pc2UpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vbW9kZWwvZG9jLkRvY30gKi9cbiAgICB0aGlzLmRvY18gPSBkb2M7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZTwhLi9ydW50aW1lLkNvbmZpZ3VyZWRSdW50aW1lPn0gKi9cbiAgICB0aGlzLmNvbmZpZ3VyZWRSdW50aW1lUHJvbWlzZV8gPSBjb25maWd1cmVkUnVudGltZVByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICovXG4gIGluaXQoKSB7XG4gICAgY29uc3QgaGVhZCA9IHRoaXMuZG9jXy5nZXRIZWFkKCk7XG4gICAgaWYgKCFoZWFkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gJyRhc3NldHMkL3N3Zy1idXR0b24uY3NzJztcbiAgICBjb25zdCBleGlzdGluZyA9IGhlYWQucXVlcnlTZWxlY3RvcihgbGlua1tocmVmPVwiJHt1cmx9XCJdYCk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIuLi5cIiB0eXBlPVwidGV4dC9jc3NcIj5cbiAgICBoZWFkLmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlRWxlbWVudCh0aGlzLmRvY18uZ2V0V2luKCkuZG9jdW1lbnQsICdsaW5rJywge1xuICAgICAgICAncmVsJzogJ3N0eWxlc2hlZXQnLFxuICAgICAgICAndHlwZSc6ICd0ZXh0L2NzcycsXG4gICAgICAgICdocmVmJzogdXJsLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gb3B0X2NhbGxiYWNrXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgY3JlYXRlKG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spIHtcbiAgICBjb25zdCBidXR0b24gPSBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudCwgJ2J1dHRvbicsIHt9KTtcbiAgICByZXR1cm4gdGhpcy5hdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBidXR0b25cbiAgICogQHBhcmFtIHsuLi9hcGkvc3Vic2NyaXB0aW9ucy5CdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdF9jYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGF0dGFjaChidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spIHtcbiAgICBjb25zdCBvcHRpb25zID0gLyoqIEB0eXBlIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc30gKi8gKHRoaXMuZ2V0T3B0aW9uc18oXG4gICAgICBvcHRpb25zT3JDYWxsYmFja1xuICAgICkpO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5nZXRDYWxsYmFja18ob3B0aW9uc09yQ2FsbGJhY2ssIG9wdF9jYWxsYmFjayk7XG5cbiAgICBjb25zdCB0aGVtZSA9IG9wdGlvbnNbJ3RoZW1lJ107XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoYHN3Zy1idXR0b24tJHt0aGVtZX1gKTtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuICAgIGlmIChvcHRpb25zWydsYW5nJ10pIHtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2xhbmcnLCBvcHRpb25zWydsYW5nJ10pO1xuICAgIH1cbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIG1zZyhUSVRMRV9MQU5HX01BUCwgYnV0dG9uKSB8fCAnJyk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsbGJhY2spO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY29uZmlndXJlZFJ1bnRpbWVQcm9taXNlXy50aGVuKGNvbmZpZ3VyZWRSdW50aW1lID0+IHtcbiAgICAgICAgY29uZmlndXJlZFJ1bnRpbWVcbiAgICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgICAubG9nU3dnRXZlbnQoXG4gICAgICAgICAgICBBbmFseXRpY3NFdmVudC5BQ1RJT05fU1dHX0JVVFRPTl9DTElDSyxcbiAgICAgICAgICAgIC8qIGlzRnJvbVVzZXJBY3Rpb24gKi8gdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbmZpZ3VyZWRSdW50aW1lUHJvbWlzZV8udGhlbihjb25maWd1cmVkUnVudGltZSA9PiB7XG4gICAgICBjb25maWd1cmVkUnVudGltZVxuICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fU1dHX0JVVFRPTik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gey4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN8Li4vYXBpL3N1YnNjcmlwdGlvbnMuU21hcnRCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEByZXR1cm4geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5CdXR0b25PcHRpb25zfCEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRPcHRpb25zXyhvcHRpb25zT3JDYWxsYmFjaykge1xuICAgIGNvbnN0IG9wdGlvbnMgPVxuICAgICAgLyoqIEB0eXBlIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc3whLi4vYXBpL3N1YnNjcmlwdGlvbnMuU21hcnRCdXR0b25PcHRpb25zfSAqLyAob3B0aW9uc09yQ2FsbGJhY2sgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayAhPSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICAgICAgOiB7J3RoZW1lJzogVGhlbWUuTElHSFR9KTtcblxuICAgIGNvbnN0IHRoZW1lID0gb3B0aW9uc1sndGhlbWUnXTtcbiAgICBpZiAodGhlbWUgIT09IFRoZW1lLkxJR0hUICYmIHRoZW1lICE9PSBUaGVtZS5EQVJLKSB7XG4gICAgICBvcHRpb25zWyd0aGVtZSddID0gVGhlbWUuTElHSFQ7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Py4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN8Py4uL2FwaS9zdWJzY3JpcHRpb25zLlNtYXJ0QnV0dG9uT3B0aW9uc3xmdW5jdGlvbigpfSBvcHRpb25zT3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk9fSBvcHRfY2FsbGJhY2tcbiAgICogQHJldHVybiB7ZnVuY3Rpb24oKXxmdW5jdGlvbihFdmVudCk6Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldENhbGxiYWNrXyhvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPVxuICAgICAgLyoqIEB0eXBlIHtmdW5jdGlvbigpfGZ1bmN0aW9uKEV2ZW50KTpib29sZWFufSAqLyAoKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PVxuICAgICAgJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnNPckNhbGxiYWNrXG4gICAgICAgIDogbnVsbCkgfHwgb3B0X2NhbGxiYWNrKTtcbiAgICByZXR1cm4gY2FsbGJhY2s7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHshRWxlbWVudH0gYnV0dG9uXG4gICAqIEBwYXJhbSB7Li4vYXBpL3N1YnNjcmlwdGlvbnMuU21hcnRCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdF9jYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGF0dGFjaFNtYXJ0QnV0dG9uKGRlcHMsIGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIG9wdF9jYWxsYmFjaykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSAvKiogQHR5cGUgeyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN9ICovICh0aGlzLmdldE9wdGlvbnNfKFxuICAgICAgb3B0aW9uc09yQ2FsbGJhY2tcbiAgICApKTtcbiAgICBjb25zdCBjYWxsYmFjayA9IC8qKiBAdHlwZSB7ZnVuY3Rpb24oKX0gKi8gKHRoaXMuZ2V0Q2FsbGJhY2tfKFxuICAgICAgb3B0aW9uc09yQ2FsbGJhY2ssXG4gICAgICBvcHRfY2FsbGJhY2tcbiAgICApKTtcblxuICAgIC8vIEFkZCByZXF1aXJlZCBDU1MgY2xhc3MsIGlmIG1pc3NpbmcuXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3N3Zy1zbWFydC1idXR0b24nKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgICAgdGhpcy5jb25maWd1cmVkUnVudGltZVByb21pc2VfLnRoZW4oY29uZmlndXJlZFJ1bnRpbWUgPT5cbiAgICAgICAgY29uZmlndXJlZFJ1bnRpbWVcbiAgICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgICAubG9nU3dnRXZlbnQoXG4gICAgICAgICAgICBBbmFseXRpY3NFdmVudC5BQ1RJT05fU1dHX0JVVFRPTl9DTElDSyxcbiAgICAgICAgICAgIC8qIGlzRnJvbVVzZXJBY3Rpb24gKi8gdHJ1ZVxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBTbWFydFN1YnNjcmlwdGlvbkJ1dHRvbkFwaShcbiAgICAgIGRlcHMsXG4gICAgICBidXR0b24sXG4gICAgICBvcHRpb25zLFxuICAgICAgY2FsbGJhY2tcbiAgICApLnN0YXJ0KCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEBlbnVtIHtudW1iZXJ9ICovXG5jb25zdCBDYWxsYmFja0lkID0ge1xuICBFTlRJVExFTUVOVFM6IDEsXG4gIFNVQlNDUklCRV9SRVFVRVNUOiAyLFxuICBTVUJTQ1JJQkVfUkVTUE9OU0U6IDMsXG4gIExPR0lOX1JFUVVFU1Q6IDQsXG4gIExJTktfUFJPR1JFU1M6IDUsXG4gIExJTktfQ09NUExFVEU6IDYsXG4gIEZMT1dfU1RBUlRFRDogNyxcbiAgRkxPV19DQU5DRUxFRDogOCxcbiAgQ09OVFJJQlVUSU9OX1JFU1BPTlNFOiA5LFxufTtcblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja3Mge1xuICAvKipcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8Q2FsbGJhY2tJZCwgZnVuY3Rpb24oKik+fSAqL1xuICAgIHRoaXMuY2FsbGJhY2tzXyA9IHt9O1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8Q2FsbGJhY2tJZCwgKj59ICovXG4gICAgdGhpcy5yZXN1bHRCdWZmZXJfID0ge307XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhLi4vYXBpL2VudGl0bGVtZW50cy5FbnRpdGxlbWVudHM+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkVOVElUTEVNRU5UUywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4uL2FwaS9lbnRpdGxlbWVudHMuRW50aXRsZW1lbnRzPn0gcHJvbWlzZVxuICAgKi9cbiAgdHJpZ2dlckVudGl0bGVtZW50c1Jlc3BvbnNlKHByb21pc2UpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhcbiAgICAgIENhbGxiYWNrSWQuRU5USVRMRU1FTlRTLFxuICAgICAgcHJvbWlzZS50aGVuKHJlcyA9PiByZXMuY2xvbmUoKSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNFbnRpdGxlbWVudHNSZXNwb25zZVBlbmRpbmcoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5yZXN1bHRCdWZmZXJfW0NhbGxiYWNrSWQuRU5USVRMRU1FTlRTXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Mb2dpblJlcXVlc3QpfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25Mb2dpblJlcXVlc3QoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkxPR0lOX1JFUVVFU1QsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Mb2dpblJlcXVlc3R9IHJlcXVlc3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyTG9naW5SZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLkxPR0lOX1JFUVVFU1QsIHJlcXVlc3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uTGlua1Byb2dyZXNzKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5MSU5LX1BST0dSRVNTLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyTGlua1Byb2dyZXNzKCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKENhbGxiYWNrSWQuTElOS19QUk9HUkVTUywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICovXG4gIHJlc2V0TGlua1Byb2dyZXNzKCkge1xuICAgIHRoaXMucmVzZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5MSU5LX1BST0dSRVNTKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkxpbmtDb21wbGV0ZShjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuTElOS19DT01QTEVURSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlckxpbmtDb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLkxJTktfQ09NUExFVEUsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNMaW5rQ29tcGxldGVQZW5kaW5nKCkge1xuICAgIHJldHVybiAhIXRoaXMucmVzdWx0QnVmZmVyX1tDYWxsYmFja0lkLkxJTktfQ09NUExFVEVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uU3Vic2NyaWJlUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuU1VCU0NSSUJFX1JFUVVFU1QsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjYWxsYmFjayBoYXMgYmVlbiBmb3VuZC5cbiAgICovXG4gIHRyaWdnZXJTdWJzY3JpYmVSZXF1ZXN0KCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKENhbGxiYWNrSWQuU1VCU0NSSUJFX1JFUVVFU1QsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTdWJzY3JpYmVSZXF1ZXN0Q2FsbGJhY2soKSB7XG4gICAgcmV0dXJuICEhdGhpcy5jYWxsYmFja3NfW0NhbGxiYWNrSWQuU1VCU0NSSUJFX1JFUVVFU1RdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIVByb21pc2U8IS4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uU3Vic2NyaWJlUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLlNVQlNDUklCRV9SRVNQT05TRSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIVByb21pc2U8IS4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkNPTlRSSUJVVElPTl9SRVNQT05TRSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuU3Vic2NyaWJlUmVzcG9uc2U+fSByZXNwb25zZVByb21pc2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyU3Vic2NyaWJlUmVzcG9uc2UocmVzcG9uc2VQcm9taXNlKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oXG4gICAgICBDYWxsYmFja0lkLlNVQlNDUklCRV9SRVNQT05TRSxcbiAgICAgIHJlc3BvbnNlUHJvbWlzZS50aGVuKHJlcyA9PiByZXMuY2xvbmUoKSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuU3Vic2NyaWJlUmVzcG9uc2U+fSByZXNwb25zZVByb21pc2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyQ29udHJpYnV0aW9uUmVzcG9uc2UocmVzcG9uc2VQcm9taXNlKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oXG4gICAgICBDYWxsYmFja0lkLkNPTlRSSUJVVElPTl9SRVNQT05TRSxcbiAgICAgIHJlc3BvbnNlUHJvbWlzZS50aGVuKHJlcyA9PiByZXMuY2xvbmUoKSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTdWJzY3JpYmVSZXNwb25zZVBlbmRpbmcoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5yZXN1bHRCdWZmZXJfW0NhbGxiYWNrSWQuU1VCU0NSSUJFX1JFU1BPTlNFXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzQ29udHJpYnV0aW9uUmVzcG9uc2VQZW5kaW5nKCkge1xuICAgIHJldHVybiAhIXRoaXMucmVzdWx0QnVmZmVyX1tDYWxsYmFja0lkLkNPTlRSSUJVVElPTl9SRVNQT05TRV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbih7Zmxvdzogc3RyaW5nLCBkYXRhOiAhT2JqZWN0fSl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5GTE9XX1NUQVJURUQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmxvd1xuICAgKiBAcGFyYW0geyFPYmplY3Q9fSBvcHRfZGF0YVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjYWxsYmFjayBoYXMgYmVlbiBmb3VuZC5cbiAgICovXG4gIHRyaWdnZXJGbG93U3RhcnRlZChmbG93LCBvcHRfZGF0YSkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKENhbGxiYWNrSWQuRkxPV19TVEFSVEVELCB7XG4gICAgICBmbG93LFxuICAgICAgZGF0YTogb3B0X2RhdGEgfHwge30sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbih7Zmxvdzogc3RyaW5nLCBkYXRhOiAhT2JqZWN0fSl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuRkxPV19DQU5DRUxFRCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbG93XG4gICAqIEBwYXJhbSB7IU9iamVjdD19IG9wdF9kYXRhXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlckZsb3dDYW5jZWxlZChmbG93LCBvcHRfZGF0YSkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKENhbGxiYWNrSWQuRkxPV19DQU5DRUxFRCwge1xuICAgICAgZmxvdyxcbiAgICAgIGRhdGE6IG9wdF9kYXRhIHx8IHt9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUNhbGxiYWNrSWR9IGlkXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZXRDYWxsYmFja18oaWQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfW2lkXSA9IGNhbGxiYWNrO1xuICAgIC8vIElmIHJlc3VsdCBhbHJlYWR5IGV4aXN0LCBleGVjdXRlIHRoZSBjYWxsYmFjayByaWdodCBhd2F5LlxuICAgIGlmIChpZCBpbiB0aGlzLnJlc3VsdEJ1ZmZlcl8pIHtcbiAgICAgIHRoaXMuZXhlY3V0ZUNhbGxiYWNrXyhpZCwgY2FsbGJhY2ssIHRoaXMucmVzdWx0QnVmZmVyX1tpZF0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDYWxsYmFja0lkfSBpZFxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXJfKGlkLCBkYXRhKSB7XG4gICAgdGhpcy5yZXN1bHRCdWZmZXJfW2lkXSA9IGRhdGE7XG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrc19baWRdO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy5leGVjdXRlQ2FsbGJhY2tfKGlkLCBjYWxsYmFjaywgZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiAhIWNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUNhbGxiYWNrSWR9IGlkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXNldENhbGxiYWNrXyhpZCkge1xuICAgIGlmIChpZCBpbiB0aGlzLnJlc3VsdEJ1ZmZlcl8pIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnJlc3VsdEJ1ZmZlcl9baWRdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDYWxsYmFja0lkfSBpZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBjYWxsYmFja1xuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV4ZWN1dGVDYWxsYmFja18oaWQsIGNhbGxiYWNrLCBkYXRhKSB7XG4gICAgLy8gQWx3YXlzIGV4ZWN1dGUgY2FsbGJhY2tzIGluIGEgbWljcm90YXNrLlxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICB0aGlzLnJlc2V0Q2FsbGJhY2tfKGlkKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0ZpbHRlclJlc3VsdH0gZnJvbSAnLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaSc7XG5pbXBvcnQge0FuYWx5dGljc0V2ZW50LCBFdmVudE9yaWdpbmF0b3J9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge2lzT2JqZWN0LCBpc0Z1bmN0aW9uLCBpc0VudW1WYWx1ZSwgaXNCb29sZWFufSBmcm9tICcuLi91dGlscy90eXBlcyc7XG5pbXBvcnQge2xvZ30gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGVzY3JpYmUgYW4gaXNzdWUgd2l0aCBhbiBldmVudCBvYmplY3RcbiAqIEBwYXJhbSB7IXN0cmluZ30gdmFsdWVOYW1lXG4gKiBAcGFyYW0gez8qfSB2YWx1ZVxuICogQHJldHVybnMgeyFzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RXJyb3JNZXNzYWdlKHZhbHVlTmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuICdFdmVudCBoYXMgYW4gaW52YWxpZCAnICsgdmFsdWVOYW1lICsgJygnICsgdmFsdWUgKyAnKSc7XG59XG5cbi8qKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBldmVudCBpcyBpbnZhbGlkLlxuICogQHBhcmFtIHshLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudH0gZXZlbnRcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVFdmVudChldmVudCkge1xuICBpZiAoIWlzT2JqZWN0KGV2ZW50KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgbXVzdCBiZSBhIHZhbGlkIG9iamVjdCcpO1xuICB9XG5cbiAgaWYgKCFpc0VudW1WYWx1ZShBbmFseXRpY3NFdmVudCwgZXZlbnQuZXZlbnRUeXBlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihjcmVhdGVFdmVudEVycm9yTWVzc2FnZSgnZXZlbnRUeXBlJywgZXZlbnQuZXZlbnRUeXBlKSk7XG4gIH1cblxuICBpZiAoIWlzRW51bVZhbHVlKEV2ZW50T3JpZ2luYXRvciwgZXZlbnQuZXZlbnRPcmlnaW5hdG9yKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGNyZWF0ZUV2ZW50RXJyb3JNZXNzYWdlKCdldmVudE9yaWdpbmF0b3InLCBldmVudC5ldmVudE9yaWdpbmF0b3IpXG4gICAgKTtcbiAgfVxuXG4gIGlmIChcbiAgICAhaXNPYmplY3QoZXZlbnQuYWRkaXRpb25hbFBhcmFtZXRlcnMpICYmXG4gICAgZXZlbnQuYWRkaXRpb25hbFBhcmFtZXRlcnMgIT0gbnVsbFxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBjcmVhdGVFdmVudEVycm9yTWVzc2FnZShcbiAgICAgICAgJ2FkZGl0aW9uYWxQYXJhbWV0ZXJzJyxcbiAgICAgICAgZXZlbnQuYWRkaXRpb25hbFBhcmFtZXRlcnNcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgaWYgKGV2ZW50LmlzRnJvbVVzZXJBY3Rpb24gIT0gbnVsbCAmJiAhaXNCb29sZWFuKGV2ZW50LmlzRnJvbVVzZXJBY3Rpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgY3JlYXRlRXZlbnRFcnJvck1lc3NhZ2UoJ2lzRnJvbVVzZXJBY3Rpb24nLCBldmVudC5pc0Zyb21Vc2VyQWN0aW9uKVxuICAgICk7XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHsuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50TWFuYWdlckFwaX0gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRFdmVudE1hbmFnZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudH0gZXZlbnRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc1B1Ymxpc2hlckV2ZW50KGV2ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGV2ZW50LmV2ZW50T3JpZ2luYXRvciA9PT0gRXZlbnRPcmlnaW5hdG9yLlBST1BFTlNJVFlfQ0xJRU5UIHx8XG4gICAgICBldmVudC5ldmVudE9yaWdpbmF0b3IgPT09IEV2ZW50T3JpZ2luYXRvci5QVUJMSVNIRVJfQ0xJRU5UIHx8XG4gICAgICBldmVudC5ldmVudE9yaWdpbmF0b3IgPT09IEV2ZW50T3JpZ2luYXRvci5BTVBfQ0xJRU5UXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyFQcm9taXNlfSBjb25maWd1cmVkUHJvbWlzZVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlndXJlZFByb21pc2UpIHtcbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTxmdW5jdGlvbighLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudCk+fSAqL1xuICAgIHRoaXMubGlzdGVuZXJzXyA9IFtdO1xuXG4gICAgLyoqIEBwcml2YXRlIHshQXJyYXk8ZnVuY3Rpb24oIS4uL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuQ2xpZW50RXZlbnQpOiFGaWx0ZXJSZXN1bHQ+fSAqL1xuICAgIHRoaXMuZmlsdGVyZXJzXyA9IFtdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLmxhc3RBY3Rpb25fID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMuaXNSZWFkeVByb21pc2VfID0gY29uZmlndXJlZFByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlc1xuICAgKi9cbiAgcmVnaXN0ZXJFdmVudExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBtYW5hZ2VyIGxpc3RlbmVycyBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnNfLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZXNcbiAgICovXG4gIHJlZ2lzdGVyRXZlbnRGaWx0ZXJlcihmaWx0ZXJlcikge1xuICAgIGlmICghaXNGdW5jdGlvbihmaWx0ZXJlcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgbWFuYWdlciBmaWx0ZXJlcnMgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuZmlsdGVyZXJzXy5wdXNoKGZpbHRlcmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVzXG4gICAqL1xuICBsb2dFdmVudChldmVudCkge1xuICAgIHZhbGlkYXRlRXZlbnQoZXZlbnQpO1xuICAgIHRoaXMubGFzdEFjdGlvbl8gPSB0aGlzLmlzUmVhZHlQcm9taXNlXy50aGVuKCgpID0+IHtcbiAgICAgIGZvciAobGV0IGZpbHRlcmVyID0gMDsgZmlsdGVyZXIgPCB0aGlzLmZpbHRlcmVyc18ubGVuZ3RoOyBmaWx0ZXJlcisrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHRoaXMuZmlsdGVyZXJzX1tmaWx0ZXJlcl0oZXZlbnQpID09PSBGaWx0ZXJSZXN1bHQuQ0FOQ0VMX0VWRU5UKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9nKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBsaXN0ZW5lciA9IDA7IGxpc3RlbmVyIDwgdGhpcy5saXN0ZW5lcnNfLmxlbmd0aDsgbGlzdGVuZXIrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMubGlzdGVuZXJzX1tsaXN0ZW5lcl0oZXZlbnQpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9nKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBldmVudCB3aXRoIHRoZSBhcmd1bWVudHMgcHJvdmlkZWQgYW5kIGNhbGxzIGxvZ0V2ZW50LlxuICAgKiBAcGFyYW0geyFBbmFseXRpY3NFdmVudH0gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7P2Jvb2xlYW49fSBpc0Zyb21Vc2VyQWN0aW9uXG4gICAqIEBwYXJhbSB7Li4vcHJvdG8vYXBpX21lc3NhZ2VzLkV2ZW50UGFyYW1zPX0gZXZlbnRQYXJhbXNcbiAgICovXG4gIGxvZ1N3Z0V2ZW50KGV2ZW50VHlwZSwgaXNGcm9tVXNlckFjdGlvbiA9IGZhbHNlLCBldmVudFBhcmFtcyA9IG51bGwpIHtcbiAgICB0aGlzLmxvZ0V2ZW50KHtcbiAgICAgIGV2ZW50VHlwZSxcbiAgICAgIGV2ZW50T3JpZ2luYXRvcjogRXZlbnRPcmlnaW5hdG9yLlNXR19DTElFTlQsXG4gICAgICBpc0Zyb21Vc2VyQWN0aW9uLFxuICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnM6IGV2ZW50UGFyYW1zLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge1BheVN0YXJ0Rmxvd30gZnJvbSAnLi9wYXktZmxvdyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbkZsb3dzLCBQcm9kdWN0VHlwZX0gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7XG4gIFNrdVNlbGVjdGVkUmVzcG9uc2UsXG4gIEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBDb250cmlidXRpb25zIGZsb3cuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb250cmlidXRpb25zRmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0fHVuZGVmaW5lZH0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgb3B0aW9ucykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0fHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gb3B0aW9ucztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIGNvbnN0IGlzQ2xvc2FibGUgPSAob3B0aW9ucyAmJiBvcHRpb25zLmlzQ2xvc2FibGUpIHx8IHRydWU7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9jb250cmlidXRpb25zaWZyYW1lJyksXG4gICAgICBmZUFyZ3Moe1xuICAgICAgICAncHJvZHVjdElkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICdwdWJsaWNhdGlvbklkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAncHJvZHVjdFR5cGUnOiBQcm9kdWN0VHlwZS5VSV9DT05UUklCVVRJT04sXG4gICAgICAgICdsaXN0JzogKG9wdGlvbnMgJiYgb3B0aW9ucy5saXN0KSB8fCAnZGVmYXVsdCcsXG4gICAgICAgICdza3VzJzogKG9wdGlvbnMgJiYgb3B0aW9ucy5za3VzKSB8fCBudWxsLFxuICAgICAgICAnaXNDbG9zYWJsZSc6IGlzQ2xvc2FibGUsXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZX0gcmVzcG9uc2VcbiAgICovXG4gIGhhbmRsZUxpbmtSZXF1ZXN0XyhyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5nZXRTdWJzY3JpYmVyT3JNZW1iZXIoKSkge1xuICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyTG9naW5SZXF1ZXN0KHtcbiAgICAgICAgbGlua1JlcXVlc3RlZDogISFyZXNwb25zZS5nZXRMaW5rUmVxdWVzdGVkKCksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTa3VTZWxlY3RlZFJlc3BvbnNlfSByZXNwb25zZVxuICAgKi9cbiAgc3RhcnRQYXlGbG93XyhyZXNwb25zZSkge1xuICAgIGNvbnN0IHNrdSA9IHJlc3BvbnNlLmdldFNrdSgpO1xuICAgIGlmIChza3UpIHtcbiAgICAgIG5ldyBQYXlTdGFydEZsb3codGhpcy5kZXBzXywgc2t1LCBQcm9kdWN0VHlwZS5VSV9DT05UUklCVVRJT04pLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgY29udHJpYnV0aW9ucyBmbG93IG9yIGFscmVhZHlNZW1iZXIgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc19cbiAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0NPTlRSSUJVVElPTl9PUFRJT05TKTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ub25DYW5jZWwoKCkgPT4ge1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19DT05UUklCVVRJT05fT1BUSU9OUyk7XG4gICAgfSk7XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uKFxuICAgICAgQWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZSxcbiAgICAgIHRoaXMuaGFuZGxlTGlua1JlcXVlc3RfLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgIFNrdVNlbGVjdGVkUmVzcG9uc2UsXG4gICAgICB0aGlzLnN0YXJ0UGF5Rmxvd18uYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge0RlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2V9IGZyb20gJy4uL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uJztcbmltcG9ydCB7Snd0SGVscGVyfSBmcm9tICcuLi91dGlscy9qd3QnO1xuaW1wb3J0IHtQYXlDb21wbGV0ZUZsb3d9IGZyb20gJy4vcGF5LWZsb3cnO1xuaW1wb3J0IHtQdXJjaGFzZURhdGEsIFN1YnNjcmliZVJlc3BvbnNlfSBmcm9tICcuLi9hcGkvc3Vic2NyaWJlLXJlc3BvbnNlJztcbmltcG9ydCB7U3Vic2NyaXB0aW9uRmxvd3N9IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7VXNlckRhdGF9IGZyb20gJy4uL2FwaS91c2VyLWRhdGEnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7aXNDYW5jZWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcbmltcG9ydCB7QW5hbHl0aWNzRXZlbnR9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5cbi8qKlxuICogVGhlIGZsb3cgdG8gaW5pdGlhdGUgZGVmZXJyZWQgYWNjb3VudCBwcm9jZXNzLlxuICogU2VlIGBTdWJzY3JpcHRpb25zLmNvbXBsZXRlRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25gIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIERlZmVycmVkQWNjb3VudEZsb3cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHs/Li4vYXBpL2RlZmVycmVkLWFjY291bnQtY3JlYXRpb24uRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXF1ZXN0fSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBvcHRpb25zKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/QWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMub3BlblByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAdHlwZSB7IS4uL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uLkRlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdH0gKi9cbiAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgIGVudGl0bGVtZW50czogbnVsbCxcbiAgICAgIGNvbnNlbnQ6IHRydWUsXG4gICAgfTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL2RlZmVycmVkLWFjY291bnQtY3JlYXRpb24uRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXF1ZXN0fSAqL1xuICAgIHRoaXMub3B0aW9uc18gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIGRlZmVycmVkIGFjY291bnQgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2U8IURlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2U+fVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgY29uc3QgZW50aXRsZW1lbnRzID0gdGhpcy5vcHRpb25zXy5lbnRpdGxlbWVudHM7XG5cbiAgICAvLyBGb3Igbm93LCBlbnRpdGxlbWVudHMgYXJlIHJlcXVpcmVkIHRvIGJlIHByZXNlbnQgYW5kIGhhdmUgdGhlIEdvb2dsZVxuICAgIC8vIHRva2VuLiBUaGlzIGlzIHN0cmljdGx5IG5vdCByZXF1aXJlZCBmb3IgdGhlIGltcGxlbWVudGF0aW9uLiBCdXQgaXQnc1xuICAgIC8vIHByZWZlcnJhYmxlIEFQSS13aXNlIGF0IHRoaXMgdGltZS5cbiAgICBpZiAoIWVudGl0bGVtZW50cyB8fCAhZW50aXRsZW1lbnRzLmdldEVudGl0bGVtZW50Rm9yU291cmNlKCdnb29nbGUnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBlbnRpdGxlbWVudHMgd2l0aCBcImdvb2dsZVwiIHNvdXJjZScpO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0L2NhbmNlbCBldmVudHMuXG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLkNPTVBMRVRFX0RFRkVSUkVEX0FDQ09VTlRfQ1JFQVRJT04pO1xuXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL3JlY292ZXJpZnJhbWUnKSxcbiAgICAgIGZlQXJncyh7XG4gICAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5kZXBzXy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAncHJvZHVjdElkJzogdGhpcy5kZXBzXy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICdlbnRpdGxlbWVudHMnOiAoZW50aXRsZW1lbnRzICYmIGVudGl0bGVtZW50cy5yYXcpIHx8IG51bGwsXG4gICAgICAgICdjb25zZW50JzogdGhpcy5vcHRpb25zXy5jb25zZW50LFxuICAgICAgfSksXG4gICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMub3BlblByb21pc2VfID0gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18uYWNjZXB0UmVzdWx0KCkudGhlbihcbiAgICAgIHJlc3VsdCA9PiB7XG4gICAgICAgIC8vIFRoZSBjb25zZW50IHBhcnQgaXMgY29tcGxldGUuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUNvbnNlbnRSZXNwb25zZV8oXG4gICAgICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAocmVzdWx0LmRhdGEpXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgcmVhc29uID0+IHtcbiAgICAgICAgaWYgKGlzQ2FuY2VsRXJyb3IocmVhc29uKSkge1xuICAgICAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgICAgICAgLnRyaWdnZXJGbG93Q2FuY2VsZWQoXG4gICAgICAgICAgICAgIFN1YnNjcmlwdGlvbkZsb3dzLkNPTVBMRVRFX0RFRkVSUkVEX0FDQ09VTlRfQ1JFQVRJT05cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGRhdGFcbiAgICogQHJldHVybiB7IURlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVDb25zZW50UmVzcG9uc2VfKGRhdGEpIHtcbiAgICB0aGlzLmRlcHNfLmVudGl0bGVtZW50c01hbmFnZXIoKS5ibG9ja05leHROb3RpZmljYXRpb24oKTtcblxuICAgIC8vIFBhcnNlIHRoZSByZXNwb25zZS5cbiAgICBjb25zdCBlbnRpdGxlbWVudHNKd3QgPSBkYXRhWydlbnRpdGxlbWVudHMnXTtcbiAgICBjb25zdCBpZFRva2VuID0gZGF0YVsnaWRUb2tlbiddO1xuICAgIGNvbnN0IHByb2R1Y3RUeXBlID0gZGF0YVsncHJvZHVjdFR5cGUnXTtcbiAgICBjb25zdCBlbnRpdGxlbWVudHMgPSB0aGlzLmRlcHNfXG4gICAgICAuZW50aXRsZW1lbnRzTWFuYWdlcigpXG4gICAgICAucGFyc2VFbnRpdGxlbWVudHMoeydzaWduZWRFbnRpdGxlbWVudHMnOiBlbnRpdGxlbWVudHNKd3R9KTtcbiAgICBjb25zdCB1c2VyRGF0YSA9IG5ldyBVc2VyRGF0YShcbiAgICAgIGlkVG9rZW4sXG4gICAgICAvKiogQHR5cGUgeyFPYmplY3R9ICovIChuZXcgSnd0SGVscGVyKCkuZGVjb2RlKGlkVG9rZW4pKVxuICAgICk7XG4gICAgY29uc3QgcHVyY2hhc2VEYXRhTGlzdCA9IGRhdGFbJ3B1cmNoYXNlRGF0YUxpc3QnXVxuICAgICAgPyBkYXRhWydwdXJjaGFzZURhdGFMaXN0J10ubWFwKFxuICAgICAgICAgIHBkID0+IG5ldyBQdXJjaGFzZURhdGEocGRbJ2RhdGEnXSwgcGRbJ3NpZ25hdHVyZSddKVxuICAgICAgICApXG4gICAgICA6IFtcbiAgICAgICAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IGNsZWFudXAvZGVwcmVjYXRlLlxuICAgICAgICAgIG5ldyBQdXJjaGFzZURhdGEoXG4gICAgICAgICAgICBkYXRhWydwdXJjaGFzZURhdGEnXVsnZGF0YSddLFxuICAgICAgICAgICAgZGF0YVsncHVyY2hhc2VEYXRhJ11bJ3NpZ25hdHVyZSddXG4gICAgICAgICAgKSxcbiAgICAgICAgXTtcblxuICAgIC8vIEZvciBub3csIHdlJ2xsIHVzZSB0aGUgYFBheUNvbXBsZXRlRmxvd2AgYXMgYSBcImNyZWF0aW5nIGFjY291bnRcIiBmbG93LlxuICAgIC8vIEJ1dCB0aGlzIGNhbiBiZSBldmVudHVhbGx5IGltcGxlbWVudGVkIGJ5IHRoZSBzYW1lIGlmcmFtZS5cbiAgICBjb25zdCBjcmVhdGluZ0Zsb3cgPSBuZXcgUGF5Q29tcGxldGVGbG93KHRoaXMuZGVwc18pO1xuICAgIGNvbnN0IGNvbXBsZXRlSGFuZGxlciA9IGNyZWF0aW5nRmxvdy5jb21wbGV0ZS5iaW5kKGNyZWF0aW5nRmxvdyk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IG5ldyBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlKFxuICAgICAgZW50aXRsZW1lbnRzLFxuICAgICAgdXNlckRhdGEsXG4gICAgICBwdXJjaGFzZURhdGFMaXN0LFxuICAgICAgY29tcGxldGVIYW5kbGVyXG4gICAgKTtcblxuICAgIHRoaXMuZGVwc19cbiAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9ORVdfREVGRVJSRURfQUNDT1VOVCwgdHJ1ZSk7XG5cbiAgICAvLyBTdGFydCB0aGUgXCJzeW5jXCIgZmxvdy5cbiAgICBjcmVhdGluZ0Zsb3cuc3RhcnQoXG4gICAgICBuZXcgU3Vic2NyaWJlUmVzcG9uc2UoXG4gICAgICAgICcnLCAvLyByYXcgZmllbGQgZG9lc24ndCBtYXR0ZXIgaW4gdGhpcyBjYXNlXG4gICAgICAgIHB1cmNoYXNlRGF0YUxpc3RbMF0sXG4gICAgICAgIHVzZXJEYXRhLFxuICAgICAgICBlbnRpdGxlbWVudHMsXG4gICAgICAgIHByb2R1Y3RUeXBlLFxuICAgICAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSAvLyBjb21wbGV0ZUhhbmRsZXIgZG9lc24ndCBtYXR0ZXIgaW4gdGhpcyBjYXNlXG4gICAgICApXG4gICAgKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEBpbnRlcmZhY2UgKi9cbmV4cG9ydCBjbGFzcyBEZXBzRGVmIHtcbiAgLyoqXG4gICAqIEByZXR1cm4geyEuLi9tb2RlbC9kb2MuRG9jfVxuICAgKi9cbiAgZG9jKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IVdpbmRvd31cbiAgICovXG4gIHdpbigpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Db25maWd9XG4gICAqL1xuICBjb25maWcoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ31cbiAgICovXG4gIHBhZ2VDb25maWcoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9XG4gICAqL1xuICBhY3Rpdml0aWVzKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4vcGF5LWNsaWVudC5QYXlDbGllbnR9XG4gICAqL1xuICBwYXlDbGllbnQoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfVxuICAgKi9cbiAgZGlhbG9nTWFuYWdlcigpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuL2VudGl0bGVtZW50cy1tYW5hZ2VyLkVudGl0bGVtZW50c01hbmFnZXJ9XG4gICAqL1xuICBlbnRpdGxlbWVudHNNYW5hZ2VyKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4vY2FsbGJhY2tzLkNhbGxiYWNrc31cbiAgICovXG4gIGNhbGxiYWNrcygpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuLi9ydW50aW1lL3N0b3JhZ2UuU3RvcmFnZX1cbiAgICovXG4gIHN0b3JhZ2UoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vcnVudGltZS9hbmFseXRpY3Mtc2VydmljZS5BbmFseXRpY3NTZXJ2aWNlfVxuICAgKi9cbiAgYW5hbHl0aWNzKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4uL3J1bnRpbWUvanNlcnJvci5Kc0Vycm9yfVxuICAgKi9cbiAganNlcnJvcigpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuLi9ydW50aW1lL2NsaWVudC1ldmVudC1tYW5hZ2VyLkNsaWVudEV2ZW50TWFuYWdlcn1cbiAgICovXG4gIGV2ZW50TWFuYWdlcigpIHt9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RW50aXRsZW1lbnQsIEVudGl0bGVtZW50c30gZnJvbSAnLi4vYXBpL2VudGl0bGVtZW50cyc7XG5pbXBvcnQge0p3dEhlbHBlcn0gZnJvbSAnLi4vdXRpbHMvand0JztcbmltcG9ydCB7VG9hc3R9IGZyb20gJy4uL3VpL3RvYXN0JztcbmltcG9ydCB7c2VydmljZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4uL3J1bnRpbWUvc2VydmljZXMnO1xuXG5jb25zdCBTRVJWSUNFX0lEID0gJ3N1YnNjcmliZS5nb29nbGUuY29tJztcbmNvbnN0IFRPQVNUX1NUT1JBR0VfS0VZID0gJ3RvYXN0JztcbmNvbnN0IEVOVFNfU1RPUkFHRV9LRVkgPSAnZW50cyc7XG5jb25zdCBJU19SRUFEWV9UT19QQVlfU1RPUkFHRV9LRVkgPSAnaXNyZWFkeXRvcGF5JztcblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBFbnRpdGxlbWVudHNNYW5hZ2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9IHBhZ2VDb25maWdcbiAgICogQHBhcmFtIHshLi9mZXRjaGVyLkZldGNoZXJ9IGZldGNoZXJcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgcGFnZUNvbmZpZywgZmV0Y2hlciwgZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnXyA9IHBhZ2VDb25maWc7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5wdWJsaWNhdGlvbklkXyA9IHRoaXMucGFnZUNvbmZpZ18uZ2V0UHVibGljYXRpb25JZCgpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZmV0Y2hlci5GZXRjaGVyfSAqL1xuICAgIHRoaXMuZmV0Y2hlcl8gPSBmZXRjaGVyO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUp3dEhlbHBlcn0gKi9cbiAgICB0aGlzLmp3dEhlbHBlcl8gPSBuZXcgSnd0SGVscGVyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPCFFbnRpdGxlbWVudHM+fSAqL1xuICAgIHRoaXMucmVzcG9uc2VQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnBvc2l0aXZlUmV0cmllc18gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuYmxvY2tOZXh0Tm90aWZpY2F0aW9uXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vc3RvcmFnZS5TdG9yYWdlfSAqL1xuICAgIHRoaXMuc3RvcmFnZV8gPSBkZXBzLnN0b3JhZ2UoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2FuYWx5dGljcy1zZXJ2aWNlLkFuYWx5dGljc1NlcnZpY2V9ICovXG4gICAgdGhpcy5hbmFseXRpY3NTZXJ2aWNlXyA9IGRlcHMuYW5hbHl0aWNzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGRlcHMuY29uZmlnKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2V4cGVjdFBvc2l0aXZlXG4gICAqL1xuICByZXNldChvcHRfZXhwZWN0UG9zaXRpdmUpIHtcbiAgICB0aGlzLnJlc3BvbnNlUHJvbWlzZV8gPSBudWxsO1xuICAgIHRoaXMucG9zaXRpdmVSZXRyaWVzXyA9IE1hdGgubWF4KFxuICAgICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfLFxuICAgICAgb3B0X2V4cGVjdFBvc2l0aXZlID8gMyA6IDBcbiAgICApO1xuICAgIGlmIChvcHRfZXhwZWN0UG9zaXRpdmUpIHtcbiAgICAgIHRoaXMuc3RvcmFnZV8ucmVtb3ZlKEVOVFNfU1RPUkFHRV9LRVkpO1xuICAgICAgdGhpcy5zdG9yYWdlXy5yZW1vdmUoSVNfUkVBRFlfVE9fUEFZX1NUT1JBR0VfS0VZKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBvZiB0aGUgZW50aXRsZW1lbnRzIHN0YXRlIGFuZCBjYWNoZS5cbiAgICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMucmVzcG9uc2VQcm9taXNlXyA9IG51bGw7XG4gICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfID0gMDtcbiAgICB0aGlzLnVuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgdGhpcy5zdG9yYWdlXy5yZW1vdmUoRU5UU19TVE9SQUdFX0tFWSk7XG4gICAgdGhpcy5zdG9yYWdlXy5yZW1vdmUoVE9BU1RfU1RPUkFHRV9LRVkpO1xuICAgIHRoaXMuc3RvcmFnZV8ucmVtb3ZlKElTX1JFQURZX1RPX1BBWV9TVE9SQUdFX0tFWSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UXVlcnlTdHJpbmdfKCkge1xuICAgIHJldHVybiB0aGlzLndpbl8ubG9jYXRpb24uc2VhcmNoO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICovXG4gIGdldEVudGl0bGVtZW50cyhvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHtcbiAgICBpZiAoIXRoaXMucmVzcG9uc2VQcm9taXNlXykge1xuICAgICAgdGhpcy5yZXNwb25zZVByb21pc2VfID0gdGhpcy5nZXRFbnRpdGxlbWVudHNGbG93XyhcbiAgICAgICAgb3B0X2VuY3J5cHRlZERvY3VtZW50S2V5XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2VfLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLmlzUmVhZHlUb1BheSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYW5hbHl0aWNzU2VydmljZV8uc2V0UmVhZHlUb1BheShyZXNwb25zZS5pc1JlYWR5VG9QYXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzUmVhZHlUb1BheVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgcHVzaE5leHRFbnRpdGxlbWVudHMocmF3LCBvcHRfaXNSZWFkeVRvUGF5KSB7XG4gICAgY29uc3QgZW50aXRsZW1lbnRzID0gdGhpcy5nZXRWYWxpZEp3dEVudGl0bGVtZW50c18oXG4gICAgICByYXcsXG4gICAgICAvKiByZXF1aXJlTm9uRXhwaXJlZCAqLyB0cnVlLFxuICAgICAgb3B0X2lzUmVhZHlUb1BheVxuICAgICk7XG4gICAgaWYgKGVudGl0bGVtZW50cyAmJiBlbnRpdGxlbWVudHMuZW5hYmxlc1RoaXMoKSkge1xuICAgICAgdGhpcy5zdG9yYWdlXy5zZXQoRU5UU19TVE9SQUdFX0tFWSwgcmF3KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gb3B0X2VuY3J5cHRlZERvY3VtZW50S2V5XG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFFbnRpdGxlbWVudHM+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0RW50aXRsZW1lbnRzRmxvd18ob3B0X2VuY3J5cHRlZERvY3VtZW50S2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hFbnRpdGxlbWVudHNXaXRoQ2FjaGluZ18ob3B0X2VuY3J5cHRlZERvY3VtZW50S2V5KS50aGVuKFxuICAgICAgZW50aXRsZW1lbnRzID0+IHtcbiAgICAgICAgdGhpcy5vbkVudGl0bGVtZW50c0ZldGNoZWRfKGVudGl0bGVtZW50cyk7XG4gICAgICAgIHJldHVybiBlbnRpdGxlbWVudHM7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXlcbiAgICogQHJldHVybiB7IVByb21pc2U8IUVudGl0bGVtZW50cz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaEVudGl0bGVtZW50c1dpdGhDYWNoaW5nXyhvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5zdG9yYWdlXy5nZXQoRU5UU19TVE9SQUdFX0tFWSksXG4gICAgICB0aGlzLnN0b3JhZ2VfLmdldChJU19SRUFEWV9UT19QQVlfU1RPUkFHRV9LRVkpLFxuICAgIF0pLnRoZW4oY2FjaGVkVmFsdWVzID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IGNhY2hlZFZhbHVlc1swXTtcbiAgICAgIGNvbnN0IGlydHAgPSBjYWNoZWRWYWx1ZXNbMV07XG4gICAgICAvLyBUcnkgY2FjaGUgZmlyc3QuXG4gICAgICBpZiAocmF3ICYmICFvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRWYWxpZEp3dEVudGl0bGVtZW50c18oXG4gICAgICAgICAgcmF3LFxuICAgICAgICAgIC8qIHJlcXVpcmVOb25FeHBpcmVkICovIHRydWUsXG4gICAgICAgICAgaXJ0cFN0cmluZ1RvQm9vbGVhbihpcnRwKVxuICAgICAgICApO1xuICAgICAgICBpZiAoY2FjaGVkICYmIGNhY2hlZC5lbmFibGVzVGhpcygpKSB7XG4gICAgICAgICAgLy8gQWxyZWFkeSBoYXZlIGEgcG9zaXRpdmUgcmVzcG9uc2UuXG4gICAgICAgICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfID0gMDtcbiAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBJZiBjYWNoZSBkaWRuJ3QgbWF0Y2gsIHBlcmZvcm0gZmV0Y2guXG4gICAgICByZXR1cm4gdGhpcy5mZXRjaEVudGl0bGVtZW50c18ob3B0X2VuY3J5cHRlZERvY3VtZW50S2V5KS50aGVuKGVudHMgPT4ge1xuICAgICAgICAvLyBJZiBlbnRpdGxlbWVudHMgbWF0Y2ggdGhlIHByb2R1Y3QsIHN0b3JlIHRoZW0gaW4gY2FjaGUuXG4gICAgICAgIGlmIChlbnRzICYmIGVudHMuZW5hYmxlc1RoaXMoKSAmJiBlbnRzLnJhdykge1xuICAgICAgICAgIHRoaXMuc3RvcmFnZV8uc2V0KEVOVFNfU1RPUkFHRV9LRVksIGVudHMucmF3KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoRW50aXRsZW1lbnRzXyhvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IFJlcGxhY2UgcmV0cmllcyB3aXRoIGNvbnNpc3RlbnQgZmV0Y2guXG4gICAgbGV0IHBvc2l0aXZlUmV0cmllcyA9IHRoaXMucG9zaXRpdmVSZXRyaWVzXztcbiAgICB0aGlzLnBvc2l0aXZlUmV0cmllc18gPSAwO1xuICAgIGNvbnN0IGF0dGVtcHQgPSAoKSA9PiB7XG4gICAgICBwb3NpdGl2ZVJldHJpZXMtLTtcbiAgICAgIHJldHVybiB0aGlzLmZldGNoXyhvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpLnRoZW4oZW50aXRsZW1lbnRzID0+IHtcbiAgICAgICAgaWYgKGVudGl0bGVtZW50cy5lbmFibGVzVGhpcygpIHx8IHBvc2l0aXZlUmV0cmllcyA8PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGVudGl0bGVtZW50cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgdGhpcy53aW5fLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShhdHRlbXB0KCkpO1xuICAgICAgICAgIH0sIDU1MCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gYXR0ZW1wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldFRvYXN0U2hvd24odmFsdWUpIHtcbiAgICB0aGlzLnN0b3JhZ2VfLnNldChUT0FTVF9TVE9SQUdFX0tFWSwgdmFsdWUgPyAnMScgOiAnMCcpO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICBibG9ja05leHROb3RpZmljYXRpb24oKSB7XG4gICAgdGhpcy5ibG9ja05leHROb3RpZmljYXRpb25fID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgdW5ibG9ja05leHROb3RpZmljYXRpb24oKSB7XG4gICAgdGhpcy5ibG9ja05leHROb3RpZmljYXRpb25fID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEpTT04gbXVzdCBlaXRoZXIgY29udGFpbiBhIFwic2lnbmVkRW50aXRsZW1lbnRzXCIgd2l0aCBKV1QsIG9yXG4gICAqIFwiZW50aXRsZW1lbnRzXCIgZmllbGQgd2l0aCBwbGFpbiBKU09OIG9iamVjdC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSBqc29uXG4gICAqIEByZXR1cm4geyFFbnRpdGxlbWVudHN9XG4gICAqL1xuICBwYXJzZUVudGl0bGVtZW50cyhqc29uKSB7XG4gICAgY29uc3QgaXNSZWFkeVRvUGF5ID0ganNvblsnaXNSZWFkeVRvUGF5J107XG4gICAgaWYgKGlzUmVhZHlUb1BheSA9PSBudWxsKSB7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnJlbW92ZShJU19SRUFEWV9UT19QQVlfU1RPUkFHRV9LRVkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnNldChJU19SRUFEWV9UT19QQVlfU1RPUkFHRV9LRVksIFN0cmluZyhpc1JlYWR5VG9QYXkpKTtcbiAgICB9XG4gICAgY29uc3Qgc2lnbmVkRGF0YSA9IGpzb25bJ3NpZ25lZEVudGl0bGVtZW50cyddO1xuICAgIGlmIChzaWduZWREYXRhKSB7XG4gICAgICBjb25zdCBlbnRpdGxlbWVudHMgPSB0aGlzLmdldFZhbGlkSnd0RW50aXRsZW1lbnRzXyhcbiAgICAgICAgc2lnbmVkRGF0YSxcbiAgICAgICAgLyogcmVxdWlyZU5vbkV4cGlyZWQgKi8gZmFsc2UsXG4gICAgICAgIGlzUmVhZHlUb1BheVxuICAgICAgKTtcbiAgICAgIGlmIChlbnRpdGxlbWVudHMpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0bGVtZW50cztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGxhaW5FbnRpdGxlbWVudHMgPSBqc29uWydlbnRpdGxlbWVudHMnXTtcbiAgICAgIGlmIChwbGFpbkVudGl0bGVtZW50cykge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbnRpdGxlbWVudHNfKCcnLCBwbGFpbkVudGl0bGVtZW50cywgaXNSZWFkeVRvUGF5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRW1wdHkgcmVzcG9uc2UuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlRW50aXRsZW1lbnRzXygnJywgW10sIGlzUmVhZHlUb1BheSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVpcmVOb25FeHBpcmVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc1JlYWR5VG9QYXlcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gb3B0X2RlY3J5cHRlZERvY3VtZW50S2V5XG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudHN9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRWYWxpZEp3dEVudGl0bGVtZW50c18oXG4gICAgcmF3LFxuICAgIHJlcXVpcmVOb25FeHBpcmVkLFxuICAgIG9wdF9pc1JlYWR5VG9QYXksXG4gICAgb3B0X2RlY3J5cHRlZERvY3VtZW50S2V5XG4gICkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqd3QgPSB0aGlzLmp3dEhlbHBlcl8uZGVjb2RlKHJhdyk7XG4gICAgICBpZiAocmVxdWlyZU5vbkV4cGlyZWQpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZXhwID0gand0WydleHAnXTtcbiAgICAgICAgaWYgKHBhcnNlRmxvYXQoZXhwKSAqIDEwMDAgPCBub3cpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgZW50aXRsZW1lbnRzQ2xhaW0gPSBqd3RbJ2VudGl0bGVtZW50cyddO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKGVudGl0bGVtZW50c0NsYWltICYmXG4gICAgICAgICAgdGhpcy5jcmVhdGVFbnRpdGxlbWVudHNfKFxuICAgICAgICAgICAgcmF3LFxuICAgICAgICAgICAgZW50aXRsZW1lbnRzQ2xhaW0sXG4gICAgICAgICAgICBvcHRfaXNSZWFkeVRvUGF5LFxuICAgICAgICAgICAgb3B0X2RlY3J5cHRlZERvY3VtZW50S2V5XG4gICAgICAgICAgKSkgfHxcbiAgICAgICAgbnVsbFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIGVycm9yLlxuICAgICAgdGhpcy53aW5fLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshT2JqZWN0fCFBcnJheTwhT2JqZWN0Pn0ganNvblxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNSZWFkeVRvUGF5XG4gICAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF9kZWNyeXB0ZWREb2N1bWVudEtleVxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnRzfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlRW50aXRsZW1lbnRzXyhyYXcsIGpzb24sIG9wdF9pc1JlYWR5VG9QYXksIG9wdF9kZWNyeXB0ZWREb2N1bWVudEtleSkge1xuICAgIHJldHVybiBuZXcgRW50aXRsZW1lbnRzKFxuICAgICAgU0VSVklDRV9JRCxcbiAgICAgIHJhdyxcbiAgICAgIEVudGl0bGVtZW50LnBhcnNlTGlzdEZyb21Kc29uKGpzb24pLFxuICAgICAgdGhpcy5wYWdlQ29uZmlnXy5nZXRQcm9kdWN0SWQoKSxcbiAgICAgIHRoaXMuYWNrXy5iaW5kKHRoaXMpLFxuICAgICAgb3B0X2lzUmVhZHlUb1BheSxcbiAgICAgIG9wdF9kZWNyeXB0ZWREb2N1bWVudEtleVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzfSBlbnRpdGxlbWVudHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uRW50aXRsZW1lbnRzRmV0Y2hlZF8oZW50aXRsZW1lbnRzKSB7XG4gICAgLy8gU2tpcCBhbnkgbm90aWZpY2F0aW9ucyBhbmQgdG9hc3QgaWYgb3RoZXIgZmxvd3MgYXJlIG9uZ29pbmcuXG4gICAgLy8gVE9ETyhkdm95dGVua28pOiB3aGF0J3MgdGhlIHJpZ2h0IGFjdGlvbiB3aGVuIHBheSBmbG93IHdhcyBjYW5jZWxlZD9cbiAgICBjb25zdCBibG9ja05vdGlmaWNhdGlvbiA9IHRoaXMuYmxvY2tOZXh0Tm90aWZpY2F0aW9uXztcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcbiAgICBpZiAoYmxvY2tOb3RpZmljYXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgb24gdGhlIHJlY2VpdmVkIGVudGl0bGVtZW50cy5cbiAgICB0aGlzLmRlcHNfXG4gICAgICAuY2FsbGJhY2tzKClcbiAgICAgIC50cmlnZ2VyRW50aXRsZW1lbnRzUmVzcG9uc2UoUHJvbWlzZS5yZXNvbHZlKGVudGl0bGVtZW50cykpO1xuXG4gICAgLy8gU2hvdyBhIHRvYXN0IGlmIG5lZWRlZC5cbiAgICB0aGlzLm1heWJlU2hvd1RvYXN0XyhlbnRpdGxlbWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVudGl0bGVtZW50c30gZW50aXRsZW1lbnRzXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF5YmVTaG93VG9hc3RfKGVudGl0bGVtZW50cykge1xuICAgIGNvbnN0IGVudGl0bGVtZW50ID0gZW50aXRsZW1lbnRzLmdldEVudGl0bGVtZW50Rm9yVGhpcygpO1xuICAgIGlmICghZW50aXRsZW1lbnQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgc3RvcmFnZSBiaXQgaXMgc2V0LiBJdCdzIG9ubHkgc2V0IGJ5IHRoZSBgRW50aXRsZW1lbnRzLmFja2BcbiAgICAvLyBtZXRob2QuXG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZV8uZ2V0KFRPQVNUX1NUT1JBR0VfS0VZKS50aGVuKHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PSAnMScpIHtcbiAgICAgICAgLy8gQWxyZWFkeSBzaG93bjtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGVudGl0bGVtZW50KSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0XyhlbnRpdGxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnR9IGVudGl0bGVtZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzaG93VG9hc3RfKGVudGl0bGVtZW50KSB7XG4gICAgY29uc3Qgc291cmNlID0gZW50aXRsZW1lbnQuc291cmNlIHx8ICdnb29nbGUnO1xuICAgIHJldHVybiBuZXcgVG9hc3QoXG4gICAgICB0aGlzLmRlcHNfLFxuICAgICAgZmVVcmwoJy90b2FzdGlmcmFtZScpLFxuICAgICAgZmVBcmdzKHtcbiAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLnB1YmxpY2F0aW9uSWRfLFxuICAgICAgICAnc291cmNlJzogc291cmNlLFxuICAgICAgfSlcbiAgICApLm9wZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbnRpdGxlbWVudHN9IGVudGl0bGVtZW50c1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNrXyhlbnRpdGxlbWVudHMpIHtcbiAgICBpZiAoZW50aXRsZW1lbnRzLmdldEVudGl0bGVtZW50Rm9yVGhpcygpKSB7XG4gICAgICB0aGlzLnNldFRvYXN0U2hvd24odHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoXyhvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHtcbiAgICBsZXQgdXJsID1cbiAgICAgICcvcHVibGljYXRpb24vJyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5wdWJsaWNhdGlvbklkXykgK1xuICAgICAgJy9lbnRpdGxlbWVudHMnO1xuICAgIGlmIChvcHRfZW5jcnlwdGVkRG9jdW1lbnRLZXkpIHtcbiAgICAgIC8vVE9ETyhjaGVuc2hheSk6IE1ha2UgdGhpcyBhICdQb3N0Jy5cbiAgICAgIHVybCArPSAnP2NyeXB0PScgKyBlbmNvZGVVUklDb21wb25lbnQob3B0X2VuY3J5cHRlZERvY3VtZW50S2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hlcl9cbiAgICAgIC5mZXRjaENyZWRlbnRpYWxlZEpzb24oc2VydmljZVVybCh1cmwpKVxuICAgICAgLnRoZW4oanNvbiA9PiB0aGlzLnBhcnNlRW50aXRsZW1lbnRzKGpzb24pKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgU3RyaW5nIHZhbHVlIG9mIGlzUmVhZHlUb1BheVxuICogKGZyb20gSlNPTiBvciBDYWNoZSkgdG8gYSBib29sZWFuIHZhbHVlLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlydHBTdHJpbmdUb0Jvb2xlYW4odmFsdWUpIHtcbiAgc3dpdGNoICh2YWx1ZSkge1xuICAgIGNhc2UgJ3RydWUnOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnZmFsc2UnOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RXZlbnR9IGZyb20gJy4uL2FwaS9sb2dnZXItYXBpJztcbmltcG9ydCB7QW5hbHl0aWNzRXZlbnR9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLEFuYWx5dGljc0V2ZW50Pn0gKi9cbmNvbnN0IFB1Ymxpc2hlckV2ZW50VG9BbmFseXRpY3NFdmVudCA9IHtcbiAgW0V2ZW50LklNUFJFU1NJT05fUEFZV0FMTF06IEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fUEFZV0FMTCxcbiAgW0V2ZW50LklNUFJFU1NJT05fQURdOiBBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX0FELFxuICBbRXZlbnQuSU1QUkVTU0lPTl9PRkZFUlNdOiBBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX09GRkVSUyxcbiAgW0V2ZW50LkFDVElPTl9TVUJTQ1JJUFRJT05TX0xBTkRJTkdfUEFHRV06XG4gICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1NVQlNDUklQVElPTlNfTEFORElOR19QQUdFLFxuICBbRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVEXTogQW5hbHl0aWNzRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVELFxuICBbRXZlbnQuQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVEXTpcbiAgICBBbmFseXRpY3NFdmVudC5BQ1RJT05fUEFZTUVOVF9GTE9XX1NUQVJURUQsXG4gIFtFdmVudC5BQ1RJT05fUEFZTUVOVF9DT01QTEVURURdOiBBbmFseXRpY3NFdmVudC5BQ1RJT05fUEFZTUVOVF9DT01QTEVURSxcbiAgW0V2ZW50LkVWRU5UX0NVU1RPTV06IEFuYWx5dGljc0V2ZW50LkVWRU5UX0NVU1RPTSxcbn07XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8bnVtYmVyLD9FdmVudD59ICovXG5jb25zdCBBbmFseXRpY3NFdmVudFRvUHVibGlzaGVyRXZlbnQgPSB7XG4gIFtBbmFseXRpY3NFdmVudC5VTktOT1dOXTogbnVsbCxcbiAgW0FuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fUEFZV0FMTF06IEV2ZW50LklNUFJFU1NJT05fUEFZV0FMTCxcbiAgW0FuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fQURdOiBFdmVudC5JTVBSRVNTSU9OX0FELFxuICBbQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9PRkZFUlNdOiBFdmVudC5JTVBSRVNTSU9OX09GRkVSUyxcbiAgW0FuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fU1VCU0NSSUJFX0JVVFRPTl06IG51bGwsXG4gIFtBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1NNQVJUQk9YXTogbnVsbCxcbiAgW0FuYWx5dGljc0V2ZW50LkFDVElPTl9TVUJTQ1JJQkVdOiBudWxsLFxuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1BBWU1FTlRfQ09NUExFVEVdOiBFdmVudC5BQ1RJT05fUEFZTUVOVF9DT01QTEVURUQsXG4gIFtBbmFseXRpY3NFdmVudC5BQ1RJT05fQUNDT1VOVF9DUkVBVEVEXTogbnVsbCxcbiAgW0FuYWx5dGljc0V2ZW50LkFDVElPTl9BQ0NPVU5UX0FDS05PV0xFREdFRF06IG51bGwsXG4gIFtBbmFseXRpY3NFdmVudC5BQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0VdOlxuICAgIEV2ZW50LkFDVElPTl9TVUJTQ1JJUFRJT05TX0xBTkRJTkdfUEFHRSxcbiAgW0FuYWx5dGljc0V2ZW50LkFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRF06XG4gICAgRXZlbnQuQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVELFxuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVEXTogRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVELFxuICBbQW5hbHl0aWNzRXZlbnQuRVZFTlRfUEFZTUVOVF9GQUlMRURdOiBudWxsLFxuICBbQW5hbHl0aWNzRXZlbnQuRVZFTlRfQ1VTVE9NXTogRXZlbnQuRVZFTlRfQ1VTVE9NLFxufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIHByb3BlbnNpdHkgZXZlbnQgZW51bSBpbnRvIGFuIGFuYWx5dGljcyBldmVudCBlbnVtLlxuICogQHBhcmFtIHshRXZlbnR8c3RyaW5nfSBwcm9wZW5zaXR5RXZlbnRcbiAqIEByZXR1cm5zIHshQW5hbHl0aWNzRXZlbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnQocHJvcGVuc2l0eUV2ZW50KSB7XG4gIHJldHVybiBQdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnRbcHJvcGVuc2l0eUV2ZW50XTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhbmFseXRpY3MgZXZlbnQgZW51bSBpbnRvIGEgcHJvcGVuc2l0eSBldmVudCBlbnVtLlxuICogQHBhcmFtIHshQW5hbHl0aWNzRXZlbnR9IGFuYWx5dGljc0V2ZW50XG4gKiBAcmV0dXJucyB7P0V2ZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5hbHl0aWNzRXZlbnRUb1B1Ymxpc2hlckV2ZW50KGFuYWx5dGljc0V2ZW50KSB7XG4gIHJldHVybiBBbmFseXRpY3NFdmVudFRvUHVibGlzaGVyRXZlbnRbYW5hbHl0aWNzRXZlbnRdO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBFeHBlcmltZW50RmxhZ3MgPSB7XG4gIC8qKlxuICAgKiBFbmFibGVzIEdQYXkgQVBJIGluIFN3Ry5cbiAgICogQ2xlYW51cCBpc3N1ZTogIzQwNi5cbiAgICovXG4gIEdQQVlfQVBJOiAnZ3BheS1hcGknLFxuXG4gIC8qKlxuICAgKiBFbmFibGVzIEdQYXkgbmF0aXZlIHN1cHBvcnQuXG4gICAqIENsZWFudXAgaXNzdWU6ICM0NDEuXG4gICAqL1xuICBHUEFZX05BVElWRTogJ2dwYXktbmF0aXZlJyxcblxuICAvKipcbiAgICogRW5hYmxlcyB0aGUgZmVhdHVyZSB0aGF0IGFsbG93cyB5b3UgdG8gcmVwbGFjZSBvbmUgc3Vic2NyaXB0aW9uXG4gICAqIGZvciBhbm90aGVyIGluIHRoZSBzdWJzY3JpYmUoKSBBUEkuXG4gICAqL1xuICBSRVBMQUNFX1NVQlNDUklQVElPTjogJ3JlcGxhY2Utc3Vic2NyaXB0aW9uJyxcblxuICAvKipcbiAgICogRW5hYmxlcyB0aGUgY29udHJpYnV0aW9ucyBmZWF0dXJlLlxuICAgKi9cbiAgQ09OVFJJQlVUSU9OUzogJ2NvbnRyaWJ1dGlvbnMnLFxuXG4gIC8qKlxuICAgKiBFbmFibGVzIHRoZSBQcm9wZW5zaXR5IGZlYXR1cmVcbiAgICovXG4gIFBST1BFTlNJVFk6ICdwcm9wZW5zaXR5JyxcblxuICAvKipcbiAgICogRW5hYmxlcyB0aGUgU21hcnRib3ggZmVhdHVyZS5cbiAgICovXG4gIFNNQVJUQk9YOiAnc21hcnRib3gnLFxuXG4gIC8qKlxuICAgKiBFbmFibGVzIHVzaW5nIG5ldyBBY3Rpdml0aWVzIEFQSXNcbiAgICovXG4gIEhFSklSQTogJ2hlamlyYScsXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0Vycm9yVXRpbHN9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmd9IGZyb20gJy4uL3V0aWxzL3VybCc7XG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICpcbiAqIENsaWVudC1zaWRlIGV4cGVyaW1lbnRzIGluIFN3Ry5cbiAqXG4gKiBUaGUgZXhwZXJpbWVudHMgY2FuIGJlIHNldCBpbiBhIGZldyBkaWZmZXJlbnQgd2F5czpcbiAqICAxLiBCeSBndWxwIGJ1aWxkIHJ1bGVzIHVzaW5nIGAtLWV4cGVyaW1lbnRzPSR7ZXhwZXJpbWVudHNTdHJpbmd9YCBhcmd1bWVudC5cbiAqICAyLiBCeSBgI3N3Zy5leHBlcmltZW50cz0ke2V4cGVyaW1lbnRzU3RyaW5nfWAgcGFyYW1ldGVyIGluIHRoZSBVUkwnc1xuICogICAgIGZyYWdtZW50LlxuICogIDMuIEJ5IGBzd2cuY29uZmlndXJlKHtleHBlcmltZW50czogW2FycmF5XX0pYCBjYWxsLlxuICpcbiAqIFRoZSBgJHtleHBlcmltZW50c1N0cmluZ31gIGlzIGRlZmluZWQgYXMgZm9sbG93aW5nOlxuICogIC0gZXhwZXJpbWVudFN0cmluZyA9IChleHBlcmltZW50U3BlYywpKlxuICogIC0gZXhwZXJpbWVudFNwZWMgPSBleHBlcmltZW50SWQgfCBleHBlcmltZW50SWQgJz0nIG51bTEwMCAoJ2MnKT9cbiAqXG4gKiBTb21lIGV4YW1wbGVzOlxuICogIC0gYEEsQmAgLSBkZWZpbmVzIHR3byBleHBlcmltZW50cyBcIkFcIiBhbmQgXCJCXCIgdGhhdCB3aWxsIGJlIHR1cm5lZCBvbi5cbiAqICAtIGBBOjEwMCxCOjEwMGAgLSB0aGUgc2FtZTogXCJBXCIgYW5kIFwiQlwiIHdpbGwgYmUgdHVybmVkIG9uLlxuICogIC0gYEE6MGAgLSB0aGUgZXhwZXJpbWVudCBcIkFcIiB3aWxsIGJlIGRpc2FibGVkLlxuICogIC0gYEE6MWAgLSBlbmFibGUgdGhlIGV4cGVyaW1lbnQgXCJBXCIgaW4gMSUgb2YgaW1wcmVzc2lvbnMuXG4gKiAgLSBgQToxMGNgIC0gZW5hYmxlIHRoZSBleHBlcmltZW50IFwiQVwiIGluIDEwJSBvZiBpbXByZXNzaW9ucyB3aXRoIDEwJVxuICogICAgY29udHJvbC4gSW4gdGhpcyBjYXNlLCAyMCUgb2YgdGhlIGltcHJlc3Npb25zIHdpbGwgYmUgc3BsaXQgaW50byB0d29cbiAqICAgIGNhdGVnb3JpZXM6IGV4cGVyaW1lbnQgYW5kIGNvbnRyb2wuIE5vdGljZSwgYSBjb250cm9sIGNhbiBiZSByZXF1ZXN0ZWRcbiAqICAgIG9ubHkgZm9yIHRoZSBmcmFjdGlvbiB1bmRlciAyMCUuXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBTZWxlY3Rpb24gPSB7XG4gIEVYUEVSSU1FTlQ6ICdlJyxcbiAgQ09OVFJPTDogJ2MnLFxufTtcblxuLyoqXG4gKiBBIGNvbW1hLXNlcGFyYXRlZCBzZXQgb2YgZXhwZXJpbWVudHMuXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5sZXQgZXhwZXJpbWVudHNTdHJpbmcgPSAnJGV4cGVyaW1lbnRzJCc7XG5cbi8qKlxuICogQSBwYXJzZWQgbWFwIG9mIGV4cGVyaW1lbnRzLlxuICogQHR5cGUgez9PYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xubGV0IGV4cGVyaW1lbnRNYXAgPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzXG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRFeHBlcmltZW50c1N0cmluZ0ZvclRlc3Rpbmcocykge1xuICBleHBlcmltZW50c1N0cmluZyA9IHM7XG4gIGV4cGVyaW1lbnRNYXAgPSBudWxsO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCB0aGUgZXhwZXJpbWVudHMgaGF2ZSBiZWVuIGluaXRpYWxpemVkIGFuZCByZXR1cm5zIHRoZW0uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5mdW5jdGlvbiBnZXRFeHBlcmltZW50cyh3aW4pIHtcbiAgaWYgKCFleHBlcmltZW50TWFwKSB7XG4gICAgZXhwZXJpbWVudE1hcCA9IHt9O1xuICAgIGxldCBjb21iaW5lZEV4cGVyaW1lbnRTdHJpbmcgPSBleHBlcmltZW50c1N0cmluZztcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHdpbi5sb2NhdGlvbi5oYXNoKTtcbiAgICAgIGNvbnN0IGV4cGVyaW1lbnRTdHJpbmdGcm9tSGFzaCA9IHF1ZXJ5Wydzd2cuZXhwZXJpbWVudHMnXTtcbiAgICAgIGlmIChleHBlcmltZW50U3RyaW5nRnJvbUhhc2gpIHtcbiAgICAgICAgY29tYmluZWRFeHBlcmltZW50U3RyaW5nICs9ICcsJyArIGV4cGVyaW1lbnRTdHJpbmdGcm9tSGFzaDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmU6IGV4cGVyaW1lbnQgcGFyc2luZyBjYW5ub3QgYmxvY2sgcnVudGltZS5cbiAgICAgIEVycm9yVXRpbHMudGhyb3dBc3luYyhlKTtcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQ6XG4gICAgLy8gLSBleHBlcmltZW50U3RyaW5nID0gKGV4cGVyaW1lbnRTcGVjLCkqXG4gICAgY29tYmluZWRFeHBlcmltZW50U3RyaW5nLnNwbGl0KCcsJykuZm9yRWFjaChzID0+IHtcbiAgICAgIHMgPSBzLnRyaW0oKTtcbiAgICAgIGlmICghcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBwYXJzZVNldEV4cGVyaW1lbnQod2luLCBleHBlcmltZW50TWFwLCBzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWdub3JlOiBleHBlcmltZW50IHBhcnNpbmcgY2Fubm90IGJsb2NrIHJ1bnRpbWUuXG4gICAgICAgIEVycm9yVXRpbHMudGhyb3dBc3luYyhlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZXhwZXJpbWVudE1hcDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHs/T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IGV4cGVyaW1lbnRNYXBcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcGVjXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2V0RXhwZXJpbWVudCh3aW4sIGV4cGVyaW1lbnRNYXAsIHNwZWMpIHtcbiAgLy8gRm9ybWF0OlxuICAvLyAtIGV4cGVyaW1lbnRTcGVjID0gZXhwZXJpbWVudElkIHwgZXhwZXJpbWVudElkICc9JyBudW0xMDAgKCdjJyk/XG4gIGxldCBleHBlcmltZW50SWQ7XG4gIGxldCBmcmFjdGlvbjtcbiAgbGV0IGNvbnRyb2wgPSBmYWxzZTtcbiAgY29uc3QgZXEgPSBzcGVjLmluZGV4T2YoJzonKTtcbiAgaWYgKGVxID09IC0xKSB7XG4gICAgZXhwZXJpbWVudElkID0gc3BlYztcbiAgICBmcmFjdGlvbiA9IDEwMDtcbiAgICBjb250cm9sID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgZXhwZXJpbWVudElkID0gc3BlYy5zdWJzdHJpbmcoMCwgZXEpLnRyaW0oKTtcbiAgICBzcGVjID0gc3BlYy5zdWJzdHJpbmcoZXEgKyAxKTtcbiAgICBpZiAoc3BlYy5zdWJzdHJpbmcoc3BlYy5sZW5ndGggLSAxKSA9PSBTZWxlY3Rpb24uQ09OVFJPTCkge1xuICAgICAgY29udHJvbCA9IHRydWU7XG4gICAgICBzcGVjID0gc3BlYy5zdWJzdHJpbmcoMCwgc3BlYy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZnJhY3Rpb24gPSBwYXJzZUludChzcGVjLCAxMCk7XG4gIH1cbiAgaWYgKGlzTmFOKGZyYWN0aW9uKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBmcmFjdGlvbicpO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIFwib25cIi9cIm9mZlwiLlxuICBsZXQgb247XG4gIGlmIChmcmFjdGlvbiA+IDk5KSB7XG4gICAgLy8gRXhwbGljaXRseSBcIm9uXCIuXG4gICAgb24gPSB0cnVlO1xuICB9IGVsc2UgaWYgKGZyYWN0aW9uIDwgMSkge1xuICAgIC8vIEV4cGxpY2l0bHkgXCJvZmZcIi5cbiAgICBvbiA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKHdpbi5zZXNzaW9uU3RvcmFnZSkge1xuICAgIC8vIEZyYWN0aW9uYWwgYW5kIHBvc3NpYmx5IHdpdGggdGhlIGNvbnRyb2wuXG4gICAgLy8gTm90ZSB0aGF0OlxuICAgIC8vIGEuIFdlIGNhbid0IGRvIHBlcnNpc3RlbnQgZXhwZXJpbWVudHMgaWYgc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlLlxuICAgIC8vIGIuIFdlIGNhbid0IHJ1biBjb250cm9sIG9uIG1vcmUgdGhhbiAyMCUuXG4gICAgY29udHJvbCA9IGNvbnRyb2wgJiYgZnJhY3Rpb24gPD0gMjA7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNldCBmcmFjdGlvbiBpbiB0aGUgZXhwZXJpbWVudCB0byBtYWtlIGl0IHVubGF1bmNoYWJsZS5cbiAgICAgIGNvbnN0IHN0b3JhZ2VLZXkgPVxuICAgICAgICAnc3Vic2NyaWJlLmdvb2dsZS5jb206ZTonICtcbiAgICAgICAgZXhwZXJpbWVudElkICtcbiAgICAgICAgJzonICtcbiAgICAgICAgZnJhY3Rpb24gK1xuICAgICAgICAoY29udHJvbCA/ICdjJyA6ICcnKTtcbiAgICAgIGxldCBzZWxlY3Rpb24gPSBwYXJzZVNlbGVjdGlvbih3aW4uc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlS2V5KSk7XG4gICAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgICAvLyBJcyBleHBlcmltZW50L2NvbnRyb2wgcmFuZ2U/XG4gICAgICAgIGlmICh3aW4uTWF0aC5yYW5kb20oKSAqIDEwMCA8PSBmcmFjdGlvbiAqIChjb250cm9sID8gMiA6IDEpKSB7XG4gICAgICAgICAgY29uc3QgaW5FeHBlcmltZW50ID0gY29udHJvbCA/IHdpbi5NYXRoLnJhbmRvbSgpIDw9IDAuNSA6IHRydWU7XG4gICAgICAgICAgc2VsZWN0aW9uID0gaW5FeHBlcmltZW50ID8gU2VsZWN0aW9uLkVYUEVSSU1FTlQgOiBTZWxlY3Rpb24uQ09OVFJPTDtcbiAgICAgICAgICB3aW4uc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlS2V5LCBzZWxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbiA9ICEhc2VsZWN0aW9uO1xuICAgICAgaWYgKHNlbGVjdGlvbiA9PSBTZWxlY3Rpb24uQ09OVFJPTCkge1xuICAgICAgICBleHBlcmltZW50SWQgPSAnYy0nICsgZXhwZXJpbWVudElkO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElnbm9yZTogZXhwZXJpbWVudCBwYXJzaW5nIGNhbm5vdCBibG9jayBydW50aW1lLlxuICAgICAgb24gPSBmYWxzZTtcbiAgICAgIEVycm9yVXRpbHMudGhyb3dBc3luYyhlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgb24gPSBmYWxzZTtcbiAgfVxuXG4gIGV4cGVyaW1lbnRNYXBbZXhwZXJpbWVudElkXSA9IG9uO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7P3N0cmluZ30gc1xuICogQHJldHVybiB7P1NlbGVjdGlvbn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VTZWxlY3Rpb24ocykge1xuICAvLyBEbyBhIHNpbXBsZSBpZi10aGVuIHRvIGlubGluZSB0aGUgd2hvbGUgU2VsZWN0aW9uIGVudW0uXG4gIHJldHVybiBzID09IFNlbGVjdGlvbi5FWFBFUklNRU5UXG4gICAgPyBTZWxlY3Rpb24uRVhQRVJJTUVOVFxuICAgIDogcyA9PSBTZWxlY3Rpb24uQ09OVFJPTFxuICAgID8gU2VsZWN0aW9uLkNPTlRST0xcbiAgICA6IG51bGw7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIGV4cGVyaW1lbnQgaXMgb24gb3Igb2ZmLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50SWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGVyaW1lbnRPbih3aW4sIGV4cGVyaW1lbnRJZCkge1xuICByZXR1cm4gZ2V0RXhwZXJpbWVudHMod2luKVtleHBlcmltZW50SWRdIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIGV4cGVyaW1lbnQgb24gb3Igb2ZmLiBSZXR1cm5zIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGV4cGVyaW1lbnRcbiAqIGFmdGVyIHRvZ2dsaW5nIGlzIGRvbmUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnRJZFxuICogQHBhcmFtIHtib29sZWFufSBvblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RXhwZXJpbWVudCh3aW4sIGV4cGVyaW1lbnRJZCwgb24pIHtcbiAgZ2V0RXhwZXJpbWVudHMod2luKVtleHBlcmltZW50SWRdID0gb247XG59XG5cbi8qKlxuICogQHJldHVybiB7IUFycmF5PHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPbkV4cGVyaW1lbnRzKHdpbikge1xuICBjb25zdCBleHBlcmltZW50TWFwID0gZ2V0RXhwZXJpbWVudHMod2luKTtcbiAgY29uc3QgZXhwZXJpbWVudHMgPSBbXTtcbiAgZm9yIChjb25zdCBleHBlcmltZW50IGluIGV4cGVyaW1lbnRNYXApIHtcbiAgICBpZiAoZXhwZXJpbWVudE1hcFtleHBlcmltZW50XSkge1xuICAgICAgZXhwZXJpbWVudHMucHVzaChleHBlcmltZW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGV4cGVyaW1lbnRzO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1hocn0gZnJvbSAnLi4vdXRpbHMveGhyJztcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXRjaGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bnVzZWRVcmxcbiAgICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gICAqL1xuICBmZXRjaENyZWRlbnRpYWxlZEpzb24odW51c2VkVXJsKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkVXJsXG4gICAqIEBwYXJhbSB7IS4uL3V0aWxzL3hoci5GZXRjaEluaXREZWZ9IHVudXNlZEluaXRcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL3V0aWxzL3hoci5GZXRjaFJlc3BvbnNlPn1cbiAgICovXG4gIGZldGNoKHVudXNlZFVybCwgdW51c2VkSW5pdCkge31cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7RmV0Y2hlcn1cbiAqL1xuZXhwb3J0IGNsYXNzIFhockZldGNoZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKiBAY29uc3QgeyFYaHJ9ICovXG4gICAgdGhpcy54aHJfID0gbmV3IFhocih3aW4pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBmZXRjaENyZWRlbnRpYWxlZEpzb24odXJsKSB7XG4gICAgY29uc3QgaW5pdCA9IC8qKiBAdHlwZSB7IS4uL3V0aWxzL3hoci5GZXRjaEluaXREZWZ9ICovICh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogeydBY2NlcHQnOiAndGV4dC9wbGFpbiwgYXBwbGljYXRpb24vanNvbid9LFxuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy54aHJfLmZldGNoKHVybCwgaW5pdCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBmZXRjaCh1cmwsIGluaXQpIHtcbiAgICByZXR1cm4gdGhpcy54aHJfLmZldGNoKHVybCwgaW5pdCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBKc0Vycm9yIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5taWNyb1Rhc2tfID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGVycm9yKHZhcl9hcmdzKSB7XG4gICAgY29uc3QgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgcmV0dXJuIHRoaXMubWljcm9UYXNrXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JWYXJncy5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIGlmIChlcnJvci5yZXBvcnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpbWcgPSB0aGlzLmRvY18uZ2V0V2luKCkuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICBpbWcuc3JjID1cbiAgICAgICAgJyRmcm9udGVuZCQvXy9TdWJzY3JpYmV3aXRoZ29vZ2xlQ2xpZW50VWkvanNlcnJvcicgK1xuICAgICAgICAnP2Vycm9yPScgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGVycm9yKSkgK1xuICAgICAgICAnJnNjcmlwdD0nICtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KCckZnJvbnRlbmQkL3N3Zy9qcy92MS9zd2cuanMnKSArXG4gICAgICAgICcmbGluZT0nICtcbiAgICAgICAgKGVycm9yLmxpbmVOdW1iZXIgfHwgMSkgK1xuICAgICAgICAnJnRyYWNlPScgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoZXJyb3Iuc3RhY2spO1xuICAgICAgLy8gQXBwZW5kaW5nIHRoaXMgaW1hZ2UgdG8gRE9NIGlzIG5vdCBuZWNlc3NhcnkuXG4gICAgICBlcnJvci5yZXBvcnRlZCA9IHRydWU7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gKiBAcmV0dXJuIHshRXJyb3J9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVycm9yVmFyZ3ModmFyX2FyZ3MpIHtcbiAgbGV0IGVycm9yID0gbnVsbDtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yICYmICFlcnJvcikge1xuICAgICAgZXJyb3IgPSBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGFyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gJyAnO1xuICAgICAgfVxuICAgICAgbWVzc2FnZSArPSBhcmc7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFlcnJvcikge1xuICAgIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9IGVsc2UgaWYgKG1lc3NhZ2UpIHtcbiAgICBlcnJvci5tZXNzYWdlID0gbWVzc2FnZSArICc6ICcgKyBlcnJvci5tZXNzYWdlO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuLyoqXG4gKiBTb21lIGV4Y2VwdGlvbnMgKERPTUV4Y2VwdGlvbiwgbmFtZWx5KSBoYXZlIHJlYWQtb25seSBtZXNzYWdlLlxuICogQHBhcmFtIHshRXJyb3J9IGVycm9yXG4gKiBAcmV0dXJuIHshRXJyb3J9XG4gKi9cbmZ1bmN0aW9uIGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpIHtcbiAgY29uc3QgbWVzc2FnZVByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlcnJvciwgJ21lc3NhZ2UnKTtcbiAgaWYgKG1lc3NhZ2VQcm9wZXJ0eSAmJiBtZXNzYWdlUHJvcGVydHkud3JpdGFibGUpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICBjb25zdCB7bWVzc2FnZSwgc3RhY2t9ID0gZXJyb3I7XG4gIGNvbnN0IGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIC8vIENvcHkgYWxsIHRoZSBleHRyYW5lb3VzIHRoaW5ncyB3ZSBhdHRhY2guXG4gIGZvciAoY29uc3QgcHJvcCBpbiBlcnJvcikge1xuICAgIGVbcHJvcF0gPSBlcnJvcltwcm9wXTtcbiAgfVxuICAvLyBFbnN1cmUgdGhlc2UgYXJlIGNvcGllZC5cbiAgZS5zdGFjayA9IHN0YWNrO1xuICByZXR1cm4gZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBY3Rpdml0eUlmcmFtZVZpZXd9IGZyb20gJy4uL3VpL2FjdGl2aXR5LWlmcmFtZS12aWV3JztcbmltcG9ydCB7U3Vic2NyaXB0aW9uRmxvd3MsIFdpbmRvd09wZW5Nb2RlfSBmcm9tICcuLi9hcGkvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQge2FjY2VwdFBvcnRSZXN1bHREYXRhfSBmcm9tICcuLi91dGlscy9hY3Rpdml0eS11dGlscyc7XG5pbXBvcnQge2ZlQXJncywgZmVPcmlnaW4sIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7aXNDYW5jZWxFcnJvciwgY3JlYXRlQ2FuY2VsRXJyb3J9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XG5pbXBvcnQge0xpbmtpbmdJbmZvUmVzcG9uc2UsIExpbmtTYXZlVG9rZW5SZXF1ZXN0fSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuXG5jb25zdCBMSU5LX1JFUVVFU1RfSUQgPSAnc3dnLWxpbmsnO1xuXG4vKipcbiAqIFRoZSBmbG93IHRvIGluaXRpYXRlIGxpbmtiYWNrIGZsb3cuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5rYmFja0Zsb3cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnXyA9IGRlcHMucGFnZUNvbmZpZygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBMaW5rIGFjY291bnQgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5MSU5LX0FDQ09VTlQpO1xuICAgIGNvbnN0IGZvcmNlUmVkaXJlY3QgPVxuICAgICAgdGhpcy5kZXBzXy5jb25maWcoKS53aW5kb3dPcGVuTW9kZSA9PSBXaW5kb3dPcGVuTW9kZS5SRURJUkVDVDtcbiAgICBjb25zdCBvcGVuZXIgPSB0aGlzLmFjdGl2aXR5UG9ydHNfLm9wZW4oXG4gICAgICBMSU5LX1JFUVVFU1RfSUQsXG4gICAgICBmZVVybCgnL2xpbmtiYWNrc3RhcnQnKSxcbiAgICAgIGZvcmNlUmVkaXJlY3QgPyAnX3RvcCcgOiAnX2JsYW5rJyxcbiAgICAgIGZlQXJncyh7XG4gICAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5wYWdlQ29uZmlnXy5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICB9KSxcbiAgICAgIHt9XG4gICAgKTtcbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLnBvcHVwT3BlbmVkKG9wZW5lciAmJiBvcGVuZXIudGFyZ2V0V2luKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIExpbmsgYWNjb3VudHMgZmxvdy5cbiAqL1xuZXhwb3J0IGNsYXNzIExpbmtDb21wbGV0ZUZsb3cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIHN0YXRpYyBjb25maWd1cmVQZW5kaW5nKGRlcHMpIHtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVyIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnREZWZ9IHBvcnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYW5kbGVyKHBvcnQpIHtcbiAgICAgIGRlcHMuZW50aXRsZW1lbnRzTWFuYWdlcigpLmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuICAgICAgZGVwcy5jYWxsYmFja3MoKS50cmlnZ2VyTGlua1Byb2dyZXNzKCk7XG4gICAgICBkZXBzLmRpYWxvZ01hbmFnZXIoKS5wb3B1cENsb3NlZCgpO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IGFjY2VwdFBvcnRSZXN1bHREYXRhKFxuICAgICAgICBwb3J0LFxuICAgICAgICBmZU9yaWdpbigpLFxuICAgICAgICAvKiByZXF1aXJlT3JpZ2luVmVyaWZpZWQgKi8gZmFsc2UsXG4gICAgICAgIC8qIHJlcXVpcmVTZWN1cmVDaGFubmVsICovIGZhbHNlXG4gICAgICApO1xuICAgICAgcmV0dXJuIHByb21pc2UudGhlbihcbiAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgIGNvbnN0IGZsb3cgPSBuZXcgTGlua0NvbXBsZXRlRmxvdyhkZXBzLCByZXNwb25zZSk7XG4gICAgICAgICAgZmxvdy5zdGFydCgpO1xuICAgICAgICB9LFxuICAgICAgICByZWFzb24gPT4ge1xuICAgICAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgICAgIGRlcHNcbiAgICAgICAgICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAgICAgICAgIC50cmlnZ2VyRmxvd0NhbmNlbGVkKFN1YnNjcmlwdGlvbkZsb3dzLkxJTktfQUNDT1VOVCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBkZXBzLmFjdGl2aXRpZXMoKS5vblJlc3VsdChMSU5LX1JFUVVFU1RfSUQsIGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7P09iamVjdH0gcmVzcG9uc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIHJlc3BvbnNlKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZW50aXRsZW1lbnRzLW1hbmFnZXIuRW50aXRsZW1lbnRzTWFuYWdlcn0gKi9cbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfID0gZGVwcy5lbnRpdGxlbWVudHNNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9jYWxsYmFja3MuQ2FsbGJhY2tzfSAqL1xuICAgIHRoaXMuY2FsbGJhY2tzXyA9IGRlcHMuY2FsbGJhY2tzKCk7XG5cbiAgICBjb25zdCBpbmRleCA9IChyZXNwb25zZSAmJiByZXNwb25zZVsnaW5kZXgnXSkgfHwgJzAnO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL2xpbmtjb25maXJtaWZyYW1lJywgJy91LycgKyBpbmRleCksXG4gICAgICBmZUFyZ3Moe1xuICAgICAgICAncHJvZHVjdElkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICdwdWJsaWNhdGlvbklkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgfSksXG4gICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyB0cnVlXG4gICAgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5jb21wbGV0ZVJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbXBsZXRlUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuY29tcGxldGVSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgTGluayBhY2NvdW50IGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHRBbmRWZXJpZnkoXG4gICAgICBmZU9yaWdpbigpLFxuICAgICAgLyogcmVxdWlyZU9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAvKiByZXF1aXJlU2VjdXJlQ2hhbm5lbCAqLyB0cnVlXG4gICAgKTtcbiAgICBwcm9taXNlXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIHRoaXMuY29tcGxldGVfKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgLy8gUmV0aHJvdyBhc3luYy5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIFRoZSBmbG93IGlzIGNvbXBsZXRlLlxuICAgICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9PYmplY3R9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb21wbGV0ZV8ocmVzcG9uc2UpIHtcbiAgICB0aGlzLmNhbGxiYWNrc18udHJpZ2dlckxpbmtDb21wbGV0ZSgpO1xuICAgIHRoaXMuY2FsbGJhY2tzXy5yZXNldExpbmtQcm9ncmVzcygpO1xuICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8uc2V0VG9hc3RTaG93bih0cnVlKTtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLnVuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyXy5yZXNldCgocmVzcG9uc2UgJiYgcmVzcG9uc2VbJ3N1Y2Nlc3MnXSkgfHwgZmFsc2UpO1xuICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZVsnZW50aXRsZW1lbnRzJ10pIHtcbiAgICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8ucHVzaE5leHRFbnRpdGxlbWVudHMocmVzcG9uc2VbJ2VudGl0bGVtZW50cyddKTtcbiAgICB9XG4gICAgdGhpcy5jb21wbGV0ZVJlc29sdmVyXygpO1xuICB9XG5cbiAgLyoqIEByZXR1cm4geyFQcm9taXNlfSAqL1xuICB3aGVuQ29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGxldGVQcm9taXNlXztcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBmbG93IHRvIHNhdmUgc3Vic2NyaXB0aW9uIGluZm9ybWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgTGlua1NhdmVGbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBjYWxsYmFjaykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2t9ICovXG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Pn0gKi9cbiAgICB0aGlzLnJlcXVlc3RQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMub3BlblByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPCEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TYXZlU3Vic2NyaXB0aW9uUmVxdWVzdD59XG4gICAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAqL1xuICBnZXRSZXF1ZXN0UHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbXBsZXRlXygpIHtcbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gcmVzdWx0XG4gICAqIEByZXR1cm4geyFQcm9taXNlPGJvb2xlYW4+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlTGlua1NhdmVSZXNwb25zZV8ocmVzdWx0KSB7XG4gICAgLy8gVGhpcyBmbG93IGlzIGNvbXBsZXRlXG4gICAgdGhpcy5jb21wbGV0ZV8oKTtcbiAgICBsZXQgc3RhcnRQcm9taXNlO1xuICAgIGxldCBsaW5rQ29uZmlybSA9IG51bGw7XG4gICAgaWYgKHJlc3VsdFsnbGlua2VkJ10pIHtcbiAgICAgIC8vIFdoZW4gbGlua2luZyBzdWNjZWVkcywgc3RhcnQgbGluayBjb25maXJtYXRpb24gZmxvd1xuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5wb3B1cENsb3NlZCgpO1xuICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd1N0YXJ0ZWQoU3Vic2NyaXB0aW9uRmxvd3MuTElOS19BQ0NPVU5UKTtcbiAgICAgIGxpbmtDb25maXJtID0gbmV3IExpbmtDb21wbGV0ZUZsb3codGhpcy5kZXBzXywgcmVzdWx0KTtcbiAgICAgIHN0YXJ0UHJvbWlzZSA9IGxpbmtDb25maXJtLnN0YXJ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0UHJvbWlzZSA9IFByb21pc2UucmVqZWN0KGNyZWF0ZUNhbmNlbEVycm9yKHRoaXMud2luXywgJ25vdCBsaW5rZWQnKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXBsZXRlUHJvbWlzZSA9IHN0YXJ0UHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckxpbmtQcm9ncmVzcygpO1xuICAgICAgcmV0dXJuIGxpbmtDb25maXJtLndoZW5Db21wbGV0ZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbXBsZXRlUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TGlua2luZ0luZm9SZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNlbmRMaW5rU2F2ZVRva2VuXyhyZXNwb25zZSkge1xuICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmdldFJlcXVlc3RlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVxdWVzdFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICByZXNvbHZlKHRoaXMuY2FsbGJhY2tfKCkpO1xuICAgIH0pXG4gICAgICAudGhlbihyZXF1ZXN0ID0+IHtcbiAgICAgICAgY29uc3Qgc2F2ZVJlcXVlc3QgPSBuZXcgTGlua1NhdmVUb2tlblJlcXVlc3QoKTtcbiAgICAgICAgaWYgKHJlcXVlc3QgJiYgcmVxdWVzdC50b2tlbikge1xuICAgICAgICAgIGlmIChyZXF1ZXN0LmF1dGhDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JvdGggYXV0aENvZGUgYW5kIHRva2VuIGFyZSBhdmFpbGFibGUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2F2ZVJlcXVlc3Quc2V0VG9rZW4ocmVxdWVzdC50b2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QgJiYgcmVxdWVzdC5hdXRoQ29kZSkge1xuICAgICAgICAgIHNhdmVSZXF1ZXN0LnNldEF1dGhDb2RlKHJlcXVlc3QuYXV0aENvZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmVpdGhlciB0b2tlbiBvciBhdXRoQ29kZSBpcyBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18uZXhlY3V0ZShzYXZlUmVxdWVzdCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgIC8vIFRoZSBmbG93IGlzIGNvbXBsZXRlLlxuICAgICAgICB0aGlzLmNvbXBsZXRlXygpO1xuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZX1cbiAgICovXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHNhdmUgc3Vic2NyaXB0aW9uXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgY29uc3QgaWZyYW1lQXJncyA9IHtcbiAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5kZXBzXy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgJ2lzQ2xvc2FibGUnOiB0cnVlLFxuICAgIH07XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL2xpbmtzYXZlaWZyYW1lJyksXG4gICAgICBmZUFyZ3MoaWZyYW1lQXJncyksXG4gICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyBmYWxzZSxcbiAgICAgIC8qIGhhc0xvYWRpbmdJbmRpY2F0b3IgKi8gdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uKFxuICAgICAgTGlua2luZ0luZm9SZXNwb25zZSxcbiAgICAgIHRoaXMuc2VuZExpbmtTYXZlVG9rZW5fLmJpbmQodGhpcylcbiAgICApO1xuXG4gICAgdGhpcy5vcGVuUHJvbWlzZV8gPSB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KFxuICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLFxuICAgICAgLyogaGlkZGVuICovIHRydWVcbiAgICApO1xuICAgIC8qKiB7IVByb21pc2U8Ym9vbGVhbj59ICovXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3X1xuICAgICAgLmFjY2VwdFJlc3VsdEFuZFZlcmlmeShcbiAgICAgICAgZmVPcmlnaW4oKSxcbiAgICAgICAgLyogcmVxdWlyZU9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAgIC8qIHJlcXVpcmVTZWN1cmVDaGFubmVsICovIHRydWVcbiAgICAgIClcbiAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUxpbmtTYXZlUmVzcG9uc2VfKHJlc3VsdCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgIC8vIEluIGNhc2UgdGhpcyBmbG93IHdhc24ndCBjb21wbGV0ZSwgY29tcGxldGUgaXQgaGVyZVxuICAgICAgICB0aGlzLmNvbXBsZXRlXygpO1xuICAgICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uIGZyb20gdXNlciwgbGluayBjb25maXJtIHN0YXJ0IG9yIGNvbXBsZXRpb24gaGVyZVxuICAgICAgICBpZiAoaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAgICAgICAudHJpZ2dlckZsb3dDYW5jZWxlZChTdWJzY3JpcHRpb25GbG93cy5MSU5LX0FDQ09VTlQpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtFdmVudCwgU3Vic2NyaXB0aW9uU3RhdGV9IGZyb20gJy4uL2FwaS9sb2dnZXItYXBpJztcbmltcG9ydCB7aXNPYmplY3QsIGlzRW51bVZhbHVlLCBpc0Jvb2xlYW59IGZyb20gJy4uL3V0aWxzL3R5cGVzJztcbmltcG9ydCB7QW5hbHl0aWNzRXZlbnQsIEV2ZW50T3JpZ2luYXRvcn0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7cHVibGlzaGVyRXZlbnRUb0FuYWx5dGljc0V2ZW50fSBmcm9tICcuL2V2ZW50LXR5cGUtbWFwcGluZyc7XG5cbi8qKlxuICogQGltcGxlbWVudHMgey4uL2FwaS9sb2dnZXItYXBpLkxvZ2dlckFwaX1cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50TWFuYWdlckFwaX0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZW5kU3Vic2NyaXB0aW9uU3RhdGUoc3RhdGUsIGpzb25Qcm9kdWN0cykge1xuICAgIGlmICghaXNFbnVtVmFsdWUoU3Vic2NyaXB0aW9uU3RhdGUsIHN0YXRlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN1YnNjcmlwdGlvbiBzdGF0ZSBwcm92aWRlZCcpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAoU3Vic2NyaXB0aW9uU3RhdGUuU1VCU0NSSUJFUiA9PSBzdGF0ZSB8fFxuICAgICAgICBTdWJzY3JpcHRpb25TdGF0ZS5QQVNUX1NVQlNDUklCRVIgPT0gc3RhdGUpICYmXG4gICAgICAhanNvblByb2R1Y3RzXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdFbnRpdGxlbWVudHMgbXVzdCBiZSBwcm92aWRlZCBmb3IgdXNlcnMgd2l0aCcgK1xuICAgICAgICAgICcgYWN0aXZlIG9yIGV4cGlyZWQgc3Vic2NyaXB0aW9ucydcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChqc29uUHJvZHVjdHMgJiYgIWlzT2JqZWN0KGpzb25Qcm9kdWN0cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRW50aXRsZW1lbnRzIG11c3QgYmUgYW4gT2JqZWN0Jyk7XG4gICAgfVxuICAgIGxldCBwcm9kdWN0c09yU2t1cyA9IG51bGw7XG4gICAgaWYgKGpzb25Qcm9kdWN0cykge1xuICAgICAgcHJvZHVjdHNPclNrdXMgPSBKU09OLnN0cmluZ2lmeShqc29uUHJvZHVjdHMpO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8ubG9nRXZlbnQoe1xuICAgICAgZXZlbnRUeXBlOiBBbmFseXRpY3NFdmVudC5FVkVOVF9TVUJTQ1JJUFRJT05fU1RBVEUsXG4gICAgICBldmVudE9yaWdpbmF0b3I6IEV2ZW50T3JpZ2luYXRvci5QVUJMSVNIRVJfQ0xJRU5ULFxuICAgICAgaXNGcm9tVXNlckFjdGlvbjogbnVsbCxcbiAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzOiB7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBwcm9kdWN0c09yU2t1cyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNlbmRFdmVudCh1c2VyRXZlbnQpIHtcbiAgICBsZXQgZGF0YSA9IG51bGw7XG4gICAgaWYgKFxuICAgICAgIWlzRW51bVZhbHVlKEV2ZW50LCB1c2VyRXZlbnQubmFtZSkgfHxcbiAgICAgICFwdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnQodXNlckV2ZW50Lm5hbWUpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdXNlciBldmVudCBwcm92aWRlZCgnICsgdXNlckV2ZW50Lm5hbWUgKyAnKScpO1xuICAgIH1cblxuICAgIGlmICh1c2VyRXZlbnQuZGF0YSkge1xuICAgICAgaWYgKCFpc09iamVjdCh1c2VyRXZlbnQuZGF0YSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBkYXRhIG11c3QgYmUgYW4gT2JqZWN0KCcgKyB1c2VyRXZlbnQuZGF0YSArICcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0ge307XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgdXNlckV2ZW50LmRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0Jvb2xlYW4odXNlckV2ZW50LmFjdGl2ZSkpIHtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBkYXRhID0ge307XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHsnaXNfYWN0aXZlJzogdXNlckV2ZW50LmFjdGl2ZX0pO1xuICAgIH0gZWxzZSBpZiAodXNlckV2ZW50LmFjdGl2ZSAhPSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IGFjdGl2ZSBtdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8ubG9nRXZlbnQoe1xuICAgICAgZXZlbnRUeXBlOiBwdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnQodXNlckV2ZW50Lm5hbWUpLFxuICAgICAgZXZlbnRPcmlnaW5hdG9yOiBFdmVudE9yaWdpbmF0b3IuUFVCTElTSEVSX0NMSUVOVCxcbiAgICAgIGlzRnJvbVVzZXJBY3Rpb246IHVzZXJFdmVudC5hY3RpdmUsXG4gICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogZGF0YSxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGl2aXR5SWZyYW1lVmlld30gZnJvbSAnLi4vdWkvYWN0aXZpdHktaWZyYW1lLXZpZXcnO1xuaW1wb3J0IHtTdWJzY3JpcHRpb25GbG93c30gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIExvZ2luTm90aWZpY2F0aW9uQXBpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLm9wZW5WaWV3UHJvbWlzZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgdGhpcy53aW5fLFxuICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXyxcbiAgICAgIGZlVXJsKCcvbG9naW5pZnJhbWUnKSxcbiAgICAgIGZlQXJncyh7XG4gICAgICAgIHB1YmxpY2F0aW9uSWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgcHJvZHVjdElkOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQcm9kdWN0SWQoKSxcbiAgICAgICAgLy8gTm8gbmVlZCB0byBhc2sgdGhlIHVzZXIuIEp1c3QgdGVsbCB0aGVtIHlvdSdyZSBsb2dnaW5nIHRoZW0gaW4uXG4gICAgICAgIHVzZXJDb25zZW50OiBmYWxzZSxcbiAgICAgICAgLy8gVE9ETyhjaGVuc2hheSk6IFBhc3MgZW50aXRsZW1lbnRzIHZhbHVlIGhlcmUuXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyB0aGUgTG9naW4gZmxvdyAoYWZ0ZXIgd2FpdGluZykuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfTE9HSU5fTk9USUZJQ0FUSU9OKTtcblxuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoXG4gICAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld19cbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHQoKS50aGVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBUaGUgY29uc2VudCBwYXJ0IGlzIGNvbXBsZXRlLlxuICAgICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgfSxcbiAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbkZsb3dzfSBmcm9tICcuLi9hcGkvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtpc0NhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuXG5leHBvcnQgY2xhc3MgTG9naW5Qcm9tcHRBcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9sb2dpbmlmcmFtZScpLFxuICAgICAgZmVBcmdzKHtcbiAgICAgICAgcHVibGljYXRpb25JZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICBwcm9kdWN0SWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAvLyBGaXJzdCBhc2sgdGhlIHVzZXIgaWYgdGhleSB3YW50IHVzIHRvIGxvZyB0aGVtIGluLlxuICAgICAgICB1c2VyQ29uc2VudDogdHJ1ZSxcbiAgICAgICAgLy8gVE9ETyhjaGVuc2hheSk6IFBhc3MgZW50aXRsZW1lbnRzIHZhbHVlIGhlcmUuXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb21wdHMgdGhlIHVzZXIgdG8gbG9naW4uXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfTE9HSU5fUFJPTVBUKTtcblxuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoXG4gICAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld19cbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHQoKS50aGVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBUaGUgY29uc2VudCBwYXJ0IGlzIGNvbXBsZXRlLlxuICAgICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgfSxcbiAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgICB0aGlzLmRlcHNfXG4gICAgICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgICAgIC50cmlnZ2VyRmxvd0NhbmNlbGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfTE9HSU5fUFJPTVBUKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7c2VydmljZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBPZmZlcnNBcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ30gY29uZmlnXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZldGNoZXIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ30gKi9cbiAgICB0aGlzLmNvbmZpZ18gPSBjb25maWc7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9mZXRjaGVyLkZldGNoZXJ9ICovXG4gICAgdGhpcy5mZXRjaGVyXyA9IGZldGNoZXI7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfcHJvZHVjdElkXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBcnJheTwhLi4vYXBpL29mZmVyLk9mZmVyPj59XG4gICAqL1xuICBnZXRPZmZlcnMob3B0X3Byb2R1Y3RJZCkge1xuICAgIGNvbnN0IHByb2R1Y3RJZCA9IG9wdF9wcm9kdWN0SWQgfHwgdGhpcy5jb25maWdfLmdldFByb2R1Y3RJZCgpO1xuICAgIGlmICghcHJvZHVjdElkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldE9mZmVycyByZXF1aXJlcyBwcm9kdWN0SWQgaW4gY29uZmlnIG9yIGFyZ3VtZW50cycpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mZXRjaF8ocHJvZHVjdElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZHVjdElkXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBcnJheTwhLi4vYXBpL29mZmVyLk9mZmVyPj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaF8ocHJvZHVjdElkKSB7XG4gICAgY29uc3QgdXJsID0gc2VydmljZVVybChcbiAgICAgICcvcHVibGljYXRpb24vJyArXG4gICAgICAgIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbmZpZ18uZ2V0UHVibGljYXRpb25JZCgpKSArXG4gICAgICAgICcvb2ZmZXJzJyArXG4gICAgICAgICc/bGFiZWw9JyArXG4gICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChwcm9kdWN0SWQpXG4gICAgKTtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IHN3aXRjaCB0byBhIG5vbi1jcmVkZW50aWFsZWQgcmVxdWVzdCBhZnRlciBsYXVuY2guXG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hlcl8uZmV0Y2hDcmVkZW50aWFsZWRKc29uKHVybCkudGhlbihqc29uID0+IHtcbiAgICAgIHJldHVybiBqc29uWydvZmZlcnMnXSB8fCBbXTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGl2aXR5SWZyYW1lVmlld30gZnJvbSAnLi4vdWkvYWN0aXZpdHktaWZyYW1lLXZpZXcnO1xuaW1wb3J0IHtQYXlTdGFydEZsb3d9IGZyb20gJy4vcGF5LWZsb3cnO1xuaW1wb3J0IHtTdWJzY3JpcHRpb25GbG93cywgUHJvZHVjdFR5cGV9IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7QW5hbHl0aWNzRXZlbnR9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQge1xuICBTa3VTZWxlY3RlZFJlc3BvbnNlLFxuICBBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlLFxuICBWaWV3U3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxuICBTdWJzY3JpYmVSZXNwb25zZSxcbn0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcblxuLyoqXG4gKiBPZmZlcnMgdmlldyBpcyBjbG9zYWJsZSB3aGVuIHJlcXVlc3Qgd2FzIG9yaWdpbmF0ZWQgZnJvbSAnQWJicnZPZmZlckZsb3cnXG4gKiBvciBmcm9tICdTdWJzY3JpYmVPcHRpb25GbG93Jy5cbiAqL1xuY29uc3QgT0ZGRVJTX1ZJRVdfQ0xPU0FCTEUgPSB0cnVlO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3IgT2ZmZXJzIGZsb3cuXG4gKi9cbmV4cG9ydCBjbGFzcyBPZmZlcnNGbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBvcHRpb25zKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvY2xpZW50LWV2ZW50LW1hbmFnZXIuQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG5cbiAgICBsZXQgaXNDbG9zYWJsZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pc0Nsb3NhYmxlO1xuICAgIGlmIChpc0Nsb3NhYmxlID09IHVuZGVmaW5lZCkge1xuICAgICAgaXNDbG9zYWJsZSA9IGZhbHNlOyAvLyBEZWZhdWx0IGlzIHRvIGhpZGUgQ2xvc2UgYnV0dG9uLlxuICAgIH1cblxuICAgIGNvbnN0IGZlQXJnc09iaiA9IHtcbiAgICAgICdwcm9kdWN0SWQnOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQcm9kdWN0SWQoKSxcbiAgICAgICdwdWJsaWNhdGlvbklkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgJ3Nob3dOYXRpdmUnOiBkZXBzLmNhbGxiYWNrcygpLmhhc1N1YnNjcmliZVJlcXVlc3RDYWxsYmFjaygpLFxuICAgICAgJ3Byb2R1Y3RUeXBlJzogUHJvZHVjdFR5cGUuU1VCU0NSSVBUSU9OLFxuICAgICAgJ2xpc3QnOiAob3B0aW9ucyAmJiBvcHRpb25zLmxpc3QpIHx8ICdkZWZhdWx0JyxcbiAgICAgICdza3VzJzogKG9wdGlvbnMgJiYgb3B0aW9ucy5za3VzKSB8fCBudWxsLFxuICAgICAgJ2lzQ2xvc2FibGUnOiBpc0Nsb3NhYmxlLFxuICAgIH07XG5cbiAgICB0aGlzLnByb3JhdGlvbk1vZGUgPSBmZUFyZ3NPYmpbJ3JlcGxhY2VTa3VQcm9yYXRpb25Nb2RlJ10gfHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5vbGRTa3UpIHtcbiAgICAgIGZlQXJnc09ialsnb2xkU2t1J10gPSBvcHRpb25zLm9sZFNrdTtcbiAgICB9XG5cbiAgICBpZiAoZmVBcmdzT2JqWydvbGRTa3UnXSkge1xuICAgICAgYXNzZXJ0KGZlQXJnc09ialsnc2t1cyddLCAnTmVlZCBhIHNrdSBsaXN0IGlmIG9sZCBza3UgaXMgcHJvdmlkZWQhJyk7XG5cbiAgICAgIC8vIFJlbW92ZSBvbGQgc2t1IGZyb20gb2ZmZXJzIGlmIGluIGxpc3QuXG4gICAgICBsZXQgc2t1TGlzdCA9IGZlQXJnc09ialsnc2t1cyddO1xuICAgICAgY29uc3QgLyoqIEB0eXBlIHtzdHJpbmd9ICovIG9sZFNrdSA9IGZlQXJnc09ialsnb2xkU2t1J107XG4gICAgICBza3VMaXN0ID0gc2t1TGlzdC5maWx0ZXIoc2t1ID0+IHNrdSAhPT0gb2xkU2t1KTtcblxuICAgICAgYXNzZXJ0KFxuICAgICAgICBza3VMaXN0Lmxlbmd0aCA+IDAsXG4gICAgICAgICdTa3UgbGlzdCBvbmx5IGNvbnRhaW5lZCBvZmZlciB1c2VyIGFscmVhZHkgaGFzJ1xuICAgICAgKTtcbiAgICAgIGZlQXJnc09ialsnc2t1cyddID0gc2t1TGlzdDtcbiAgICB9XG5cbiAgICAvLyBSZWRpcmVjdCB0byBwYXltZW50cyBpZiBvbmx5IG9uZSB1cGdyYWRlIG9wdGlvbiBpcyBwYXNzZWQuXG4gICAgaWYgKGZlQXJnc09ialsnc2t1cyddICYmIGZlQXJnc09ialsnc2t1cyddLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3Qgc2t1ID0gZmVBcmdzT2JqWydza3VzJ11bMF07XG4gICAgICBjb25zdCAvKiogQHR5cGUge3N0cmluZ3x1bmRlZmluZWR9ICovIG9sZFNrdSA9IGZlQXJnc09ialsnb2xkU2t1J107XG4gICAgICAvLyBVcGRhdGUgc3Vic2NyaXB0aW9uIHRyaWdnZXJzIGV4cGVyaW1lbnRhbCBmbGFnIGlmIG9sZFNrdSBpcyBwYXNzZWQsXG4gICAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciBvbGRTa3UgdG8gZGVjaWRlIGlmIGl0IG5lZWRzIHRvIGJlIHNlbnQuXG4gICAgICAvLyBPdGhlcndpc2Ugd2UgbWlnaHQgYWNjaWRlbnRhbGx5IGJsb2NrIGEgcmVndWxhciBzdWJzY3JpcHRpb24gcmVxdWVzdC5cbiAgICAgIGlmIChvbGRTa3UpIHtcbiAgICAgICAgbmV3IFBheVN0YXJ0Rmxvdyh0aGlzLmRlcHNfLCB7XG4gICAgICAgICAgc2t1SWQ6IHNrdSxcbiAgICAgICAgICBvbGRTa3UsXG4gICAgICAgICAgcmVwbGFjZVNrdVByb3JhdGlvbk1vZGU6IHRoaXMucHJvcmF0aW9uTW9kZSxcbiAgICAgICAgfSkuc3RhcnQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9vZmZlcnNpZnJhbWUnKSxcbiAgICAgIGZlQXJncyhmZUFyZ3NPYmopLFxuICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTa3VTZWxlY3RlZFJlc3BvbnNlfSByZXNwb25zZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRQYXlGbG93XyhyZXNwb25zZSkge1xuICAgIGNvbnN0IHNrdSA9IHJlc3BvbnNlLmdldFNrdSgpO1xuICAgIGNvbnN0IG9sZFNrdSA9IHJlc3BvbnNlLmdldE9sZFNrdSgpO1xuICAgIGlmIChza3UpIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVELFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgICAgbGV0IHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdDtcbiAgICAgIGlmIChvbGRTa3UpIHtcbiAgICAgICAgc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0ID0ge307XG4gICAgICAgIHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdFsnc2t1SWQnXSA9IHNrdTtcbiAgICAgICAgc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0WydvbGRTa3UnXSA9IG9sZFNrdTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdCA9IHNrdTtcbiAgICAgIH1cbiAgICAgIG5ldyBQYXlTdGFydEZsb3codGhpcy5kZXBzXywgc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0KS5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMaW5rUmVxdWVzdF8ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0U3Vic2NyaWJlck9yTWVtYmVyKCkpIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0FMUkVBRFlfU1VCU0NSSUJFRCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckxvZ2luUmVxdWVzdCh7XG4gICAgICAgIGxpbmtSZXF1ZXN0ZWQ6ICEhcmVzcG9uc2UuZ2V0TGlua1JlcXVlc3RlZCgpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Vmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0TmF0aXZlRmxvd18ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0TmF0aXZlKCkpIHtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlclN1YnNjcmliZVJlcXVlc3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBvZmZlcnMgZmxvdyBvciBhbHJlYWR5U3Vic2NyaWJlZCBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIGlmICh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pIHtcbiAgICAgIC8vIFNvIG5vIGVycm9yIGlmIHNraXBwZWQgdG8gcGF5bWVudCBzY3JlZW4uXG4gICAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd1N0YXJ0ZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19PRkZFUlMpO1xuICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uQ2FuY2VsKCgpID0+IHtcbiAgICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgICAgIC50cmlnZ2VyRmxvd0NhbmNlbGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfT0ZGRVJTKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uKFxuICAgICAgICBTa3VTZWxlY3RlZFJlc3BvbnNlLFxuICAgICAgICB0aGlzLnN0YXJ0UGF5Rmxvd18uYmluZCh0aGlzKVxuICAgICAgKTtcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgICAgQWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZSxcbiAgICAgICAgdGhpcy5oYW5kbGVMaW5rUmVxdWVzdF8uYmluZCh0aGlzKVxuICAgICAgKTtcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgICAgVmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZSxcbiAgICAgICAgdGhpcy5zdGFydE5hdGl2ZUZsb3dfLmJpbmQodGhpcylcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX09GRkVSUyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3Igc3Vic2NyaWJlIG9wdGlvbiBmbG93LlxuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaWJlT3B0aW9uRmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0fHVuZGVmaW5lZH0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgb3B0aW9ucykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0fHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gb3B0aW9ucztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2NsaWVudC1ldmVudC1tYW5hZ2VyLkNsaWVudEV2ZW50TWFuYWdlcn0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgZGVwcy53aW4oKSxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL29wdGlvbnNpZnJhbWUnKSxcbiAgICAgIGZlQXJncyh7XG4gICAgICAgICdwdWJsaWNhdGlvbklkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAncHJvZHVjdElkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICdsaXN0JzogKG9wdGlvbnMgJiYgb3B0aW9ucy5saXN0KSB8fCAnZGVmYXVsdCcsXG4gICAgICAgICdza3VzJzogKG9wdGlvbnMgJiYgb3B0aW9ucy5za3VzKSB8fCBudWxsLFxuICAgICAgICAnaXNDbG9zYWJsZSc6IHRydWUsXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIG9mZmVycyBmbG93IG9yIGFscmVhZHlTdWJzY3JpYmVkIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgLy8gU3RhcnQvY2FuY2VsIGV2ZW50cy5cbiAgICB0aGlzLmRlcHNfXG4gICAgICAuY2FsbGJhY2tzKClcbiAgICAgIC50cmlnZ2VyRmxvd1N0YXJ0ZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19TVUJTQ1JJQkVfT1BUSU9OKTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ub25DYW5jZWwoKCkgPT4ge1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19TVUJTQ1JJQkVfT1BUSU9OKTtcbiAgICB9KTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ub24oXG4gICAgICBTdWJzY3JpYmVSZXNwb25zZSxcbiAgICAgIHRoaXMubWF5YmVPcGVuT2ZmZXJzRmxvd18uYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18uYWNjZXB0UmVzdWx0KCkudGhlbihcbiAgICAgIHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXN1bHQuZGF0YTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgU3Vic2NyaWJlUmVzcG9uc2UoKTtcbiAgICAgICAgaWYgKGRhdGFbJ3N1YnNjcmliZSddKSB7XG4gICAgICAgICAgcmVzcG9uc2Uuc2V0U3Vic2NyaWJlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF5YmVPcGVuT2ZmZXJzRmxvd18ocmVzcG9uc2UpO1xuICAgICAgfSxcbiAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgIEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fQ0xJQ0tfVE9fU0hPV19PRkZFUlNcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdWJzY3JpYmVSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1heWJlT3Blbk9mZmVyc0Zsb3dfKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLmdldFN1YnNjcmliZSgpKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zXyB8fCB7fTtcbiAgICAgIGlmIChvcHRpb25zLmlzQ2xvc2FibGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdGlvbnMuaXNDbG9zYWJsZSA9IE9GRkVSU19WSUVXX0NMT1NBQkxFO1xuICAgICAgfVxuICAgICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9WSUVXX09GRkVSUywgdHJ1ZSk7XG4gICAgICBuZXcgT2ZmZXJzRmxvdyh0aGlzLmRlcHNfLCBvcHRpb25zKS5zdGFydCgpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3IgQWJicmV2aWF0ZWQgT2ZmZXIgZmxvdy5cbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBBYmJydk9mZmVyRmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0PX0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMub3B0aW9uc18gPSBvcHRpb25zO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvY2xpZW50LWV2ZW50LW1hbmFnZXIuQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9hYmJydm9mZmVyaWZyYW1lJyksXG4gICAgICBmZUFyZ3Moe1xuICAgICAgICAncHVibGljYXRpb25JZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgJ3Byb2R1Y3RJZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAnc2hvd05hdGl2ZSc6IGRlcHMuY2FsbGJhY2tzKCkuaGFzU3Vic2NyaWJlUmVxdWVzdENhbGxiYWNrKCksXG4gICAgICAgICdsaXN0JzogKG9wdGlvbnMgJiYgb3B0aW9ucy5saXN0KSB8fCAnZGVmYXVsdCcsXG4gICAgICAgICdza3VzJzogKG9wdGlvbnMgJiYgb3B0aW9ucy5za3VzKSB8fCBudWxsLFxuICAgICAgICAnaXNDbG9zYWJsZSc6IHRydWUsXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMaW5rUmVxdWVzdF8ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0U3Vic2NyaWJlck9yTWVtYmVyKCkpIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0FMUkVBRFlfU1VCU0NSSUJFRCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckxvZ2luUmVxdWVzdCh7XG4gICAgICAgIGxpbmtSZXF1ZXN0ZWQ6ICEhcmVzcG9uc2UuZ2V0TGlua1JlcXVlc3RlZCgpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgb2ZmZXJzIGZsb3dcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc19cbiAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0FCQlJWX09GRkVSKTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ub25DYW5jZWwoKCkgPT4ge1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19BQkJSVl9PRkZFUik7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGUgdXNlciBpcyBhbHJlYWR5IHN1YnNjcmliZWQsIHRyaWdnZXIgbG9naW4gZmxvd1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgIEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG4gICAgICB0aGlzLmhhbmRsZUxpbmtSZXF1ZXN0Xy5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIC8vIElmIHJlc3VsdCBpcyBkdWUgdG8gcmVxdWVzdGluZyBvZmZlcnMsIHJlZGlyZWN0IHRvIG9mZmVycyBmbG93XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQuZGF0YVsndmlld09mZmVycyddKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnNfIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5pc0Nsb3NhYmxlID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG9wdGlvbnMuaXNDbG9zYWJsZSA9IE9GRkVSU19WSUVXX0NMT1NBQkxFO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5BQ1RJT05fVklFV19PRkZFUlMsIHRydWUpO1xuICAgICAgICBuZXcgT2ZmZXJzRmxvdyh0aGlzLmRlcHNfLCBvcHRpb25zKS5zdGFydCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0LmRhdGFbJ25hdGl2ZSddKSB7XG4gICAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlclN1YnNjcmliZVJlcXVlc3QoKTtcbiAgICAgICAgLy8gVGhlIGZsb3cgaXMgY29tcGxldGUuXG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgIEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fQ0xJQ0tfVE9fU0hPV19PRkZFUlNfT1JfQUxSRUFEWV9TVUJTQ1JJQkVEXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtFeHBlcmltZW50RmxhZ3N9IGZyb20gJy4vZXhwZXJpbWVudC1mbGFncyc7XG5pbXBvcnQge1BheW1lbnRzQXN5bmNDbGllbnR9IGZyb20gJy4uLy4uL3RoaXJkX3BhcnR5L2dwYXkvc3JjL3BheWpzX2FzeW5jJztcbmltcG9ydCB7WGhyfSBmcm9tICcuLi91dGlscy94aHInO1xuaW1wb3J0IHtieXRlc1RvU3RyaW5nLCBzdHJpbmdUb0J5dGVzfSBmcm9tICcuLi91dGlscy9ieXRlcyc7XG5pbXBvcnQge2NyZWF0ZUNhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlQ2FjaGVkfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7aXNFeHBlcmltZW50T259IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuXG5jb25zdCBQQVlfUkVRVUVTVF9JRCA9ICdzd2ctcGF5JztcbmNvbnN0IEdQQVlfQUNUSVZJVFlfUkVRVUVTVCA9ICdHUEFZJztcblxuY29uc3QgUkVESVJFQ1RfU1RPUkFHRV9LRVkgPSAnc3Vic2NyaWJlLmdvb2dsZS5jb206cmsnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGZvcmNlUmVkaXJlY3Q6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFBheU9wdGlvbnNEZWY7XG5cbi8qKlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS5cbiAqL1xuZXhwb3J0IGNvbnN0IFBBWV9PUklHSU4gPSB7XG4gICdQUk9EVUNUSU9OJzogJ2h0dHBzOi8vcGF5Lmdvb2dsZS5jb20nLFxuICAnU0FOREJPWCc6ICdodHRwczovL3BheS5zYW5kYm94Lmdvb2dsZS5jb20nLFxufTtcblxuLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbmZ1bmN0aW9uIHBheU9yaWdpbigpIHtcbiAgcmV0dXJuIFBBWV9PUklHSU5bJyRwYXlFbnZpcm9ubWVudCQnXTtcbn1cblxuLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbmZ1bmN0aW9uIHBheVVybCgpIHtcbiAgcmV0dXJuIGZlQ2FjaGVkKFBBWV9PUklHSU5bJyRwYXlFbnZpcm9ubWVudCQnXSArICcvZ3AvcC91aS9wYXknKTtcbn1cblxuLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbmZ1bmN0aW9uIHBheURlY3J5cHRVcmwoKSB7XG4gIHJldHVybiBQQVlfT1JJR0lOWyckcGF5RW52aXJvbm1lbnQkJ10gKyAnL2dwL3AvYXBpcy9idXlmbG93L3Byb2Nlc3MnO1xufVxuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIFBheUNsaWVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gYWN0aXZpdHlQb3J0c1xuICAgKiBAcGFyYW0geyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9IGRpYWxvZ01hbmFnZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgYWN0aXZpdHlQb3J0cywgZGlhbG9nTWFuYWdlcikge1xuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyFQYXlDbGllbnRCaW5kaW5nRGVmfSAqL1xuICAgIHRoaXMuYmluZGluZ18gPSBpc0V4cGVyaW1lbnRPbih3aW4sIEV4cGVyaW1lbnRGbGFncy5HUEFZX0FQSSlcbiAgICAgID8gbmV3IFBheUNsaWVudEJpbmRpbmdQYXlqcyh3aW4sIGFjdGl2aXR5UG9ydHMpXG4gICAgICA6IG5ldyBQYXlDbGllbnRCaW5kaW5nU3dnKHdpbiwgYWN0aXZpdHlQb3J0cywgZGlhbG9nTWFuYWdlcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vdXRpbHMvcHJlY29ubmVjdC5QcmVjb25uZWN0fSBwcmVcbiAgICovXG4gIHByZWNvbm5lY3QocHJlKSB7XG4gICAgcHJlLnByZWZldGNoKHBheVVybCgpKTtcbiAgICBwcmUucHJlZmV0Y2goXG4gICAgICAnaHR0cHM6Ly9wYXltZW50cy5nb29nbGUuY29tL3BheW1lbnRzL3Y0L2pzL2ludGVncmF0b3IuanM/c3M9bWQnXG4gICAgKTtcbiAgICBwcmUucHJlZmV0Y2goJ2h0dHBzOi8vY2xpZW50czIuZ29vZ2xlLmNvbS9nci9ncl9mdWxsXzIuMC42LmpzJyk7XG4gICAgcHJlLnByZWNvbm5lY3QoJ2h0dHBzOi8vd3d3LmdzdGF0aWMuY29tLycpO1xuICAgIHByZS5wcmVjb25uZWN0KCdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tLycpO1xuICAgIHByZS5wcmVjb25uZWN0KCdodHRwczovL3d3dy5nb29nbGUuY29tLycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28sICM0MDYpOiByZW1vdmUgb25jZSBHUGF5IEFQSSBpcyBsYXVuY2hlZC5cbiAgICByZXR1cm4gdGhpcy5iaW5kaW5nXy5nZXRUeXBlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSBwYXltZW50UmVxdWVzdFxuICAgKiBAcGFyYW0geyFQYXlPcHRpb25zRGVmPX0gb3B0aW9uc1xuICAgKi9cbiAgc3RhcnQocGF5bWVudFJlcXVlc3QsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuYmluZGluZ18uc3RhcnQocGF5bWVudFJlcXVlc3QsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIVByb21pc2U8IU9iamVjdD4pfSBjYWxsYmFja1xuICAgKi9cbiAgb25SZXNwb25zZShjYWxsYmFjaykge1xuICAgIHRoaXMuYmluZGluZ18ub25SZXNwb25zZShjYWxsYmFjayk7XG4gIH1cbn1cblxuLyoqXG4gKiBUT0RPKGR2b3l0ZW5rbywgIzQwNik6IHJlbW92ZSBkZWxlZ2F0ZWQgY2xhc3Mgb25jZSBHUGF5IGxhdW5jaGVzLlxuICogQGludGVyZmFjZVxuICovXG5jbGFzcyBQYXlDbGllbnRCaW5kaW5nRGVmIHtcbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFR5cGUoKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IHVudXNlZFBheW1lbnRSZXF1ZXN0XG4gICAqIEBwYXJhbSB7IVBheU9wdGlvbnNEZWZ9IHVudXNlZE9wdGlvbnNcbiAgICovXG4gIHN0YXJ0KHVudXNlZFBheW1lbnRSZXF1ZXN0LCB1bnVzZWRPcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCFPYmplY3Q+KX0gdW51c2VkQ2FsbGJhY2tcbiAgICovXG4gIG9uUmVzcG9uc2UodW51c2VkQ2FsbGJhY2spIHt9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge1BheUNsaWVudEJpbmRpbmdEZWZ9XG4gKi9cbmNsYXNzIFBheUNsaWVudEJpbmRpbmdTd2cge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9IGFjdGl2aXR5UG9ydHNcbiAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSBkaWFsb2dNYW5hZ2VyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGFjdGl2aXR5UG9ydHMsIGRpYWxvZ01hbmFnZXIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGFjdGl2aXR5UG9ydHM7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGlhbG9nTWFuYWdlcjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0VHlwZSgpIHtcbiAgICByZXR1cm4gJ1NXRyc7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXJ0KHBheW1lbnRSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgb3BlbmVyID0gdGhpcy5hY3Rpdml0eVBvcnRzXy5vcGVuKFxuICAgICAgR1BBWV9BQ1RJVklUWV9SRVFVRVNULFxuICAgICAgcGF5VXJsKCksXG4gICAgICBvcHRpb25zLmZvcmNlUmVkaXJlY3QgPyAnX3RvcCcgOiAnX2JsYW5rJyxcbiAgICAgIGZlQXJncyhwYXltZW50UmVxdWVzdCksXG4gICAgICB7fVxuICAgICk7XG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5wb3B1cE9wZW5lZCgob3BlbmVyICYmIG9wZW5lci50YXJnZXRXaW4pIHx8IG51bGwpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcmVzcG9uc2VDYWxsYmFjayA9IHBvcnQgPT4ge1xuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5wb3B1cENsb3NlZCgpO1xuICAgICAgY2FsbGJhY2sodGhpcy52YWxpZGF0ZVBheVJlc3BvbnNlXyhwb3J0KSk7XG4gICAgfTtcbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLm9uUmVzdWx0KEdQQVlfQUNUSVZJVFlfUkVRVUVTVCwgcmVzcG9uc2VDYWxsYmFjayk7XG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXy5vblJlc3VsdChQQVlfUkVRVUVTVF9JRCwgcmVzcG9uc2VDYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydERlZn0gcG9ydFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHZhbGlkYXRlUGF5UmVzcG9uc2VfKHBvcnQpIHtcbiAgICAvLyBEbyBub3QgcmVxdWlyZSBzZWN1cml0eSBpbW1lZGlhdGVseTogaXQgd2lsbCBiZSBjaGVja2VkIGJlbG93LlxuICAgIHJldHVybiBwb3J0LmFjY2VwdFJlc3VsdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQub3JpZ2luICE9IHBheU9yaWdpbigpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY2hhbm5lbCBtaXNtYXRjaCcpO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHJlc3VsdC5kYXRhKTtcbiAgICAgIGlmIChkYXRhWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddKSB7XG4gICAgICAgIC8vIERhdGEgaXMgc3VwcGxpZWQgYXMgYW4gZW5jcnlwdGVkIGJsb2IuXG4gICAgICAgIGNvbnN0IHhociA9IG5ldyBYaHIodGhpcy53aW5fKTtcbiAgICAgICAgY29uc3QgdXJsID0gcGF5RGVjcnlwdFVybCgpO1xuICAgICAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICBoZWFkZXJzOiB7J0FjY2VwdCc6ICd0ZXh0L3BsYWluLCBhcHBsaWNhdGlvbi9qc29uJ30sXG4gICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICBib2R5OiBkYXRhWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddLFxuICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB4aHJcbiAgICAgICAgICAuZmV0Y2godXJsLCBpbml0KVxuICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhQ2xvbmUgPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhKTtcbiAgICAgICAgICAgIGRlbGV0ZSBkYXRhQ2xvbmVbJ3JlZGlyZWN0RW5jcnlwdGVkQ2FsbGJhY2tEYXRhJ107XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkYXRhQ2xvbmUsIHJlc3BvbnNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIERhdGEgaXMgc3VwcGxpZWQgZGlyZWN0bHk6IG11c3QgYmUgYSB2ZXJpZmllZCBhbmQgc2VjdXJlIGNoYW5uZWwuXG4gICAgICBpZiAocmVzdWx0Lm9yaWdpblZlcmlmaWVkICYmIHJlc3VsdC5zZWN1cmVDaGFubmVsKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFubmVsIG1pc21hdGNoJyk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBCaW5kaW5nIGJhc2VkIG9uIHRoZSBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3BheWpzLlxuICogQGltcGxlbWVudHMge1BheUNsaWVudEJpbmRpbmdEZWZ9XG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXlDbGllbnRCaW5kaW5nUGF5anMge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9IGFjdGl2aXR5UG9ydHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgYWN0aXZpdHlQb3J0cykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gYWN0aXZpdHlQb3J0cztcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCFQcm9taXNlPCFPYmplY3Q+KX0gKi9cbiAgICB0aGlzLnJlc3BvbnNlQ2FsbGJhY2tfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8IU9iamVjdD59ICovXG4gICAgdGhpcy5yZXNwb25zZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVJlZGlyZWN0VmVyaWZpZXJIZWxwZXJ9ICovXG4gICAgdGhpcy5yZWRpcmVjdFZlcmlmaWVySGVscGVyXyA9IG5ldyBSZWRpcmVjdFZlcmlmaWVySGVscGVyKHRoaXMud2luXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUGF5bWVudHNBc3luY0NsaWVudH0gKi9cbiAgICB0aGlzLmNsaWVudF8gPSB0aGlzLmNyZWF0ZUNsaWVudF8oXG4gICAgICB7XG4gICAgICAgIGVudmlyb25tZW50OiAnJHBheUVudmlyb25tZW50JCcsXG4gICAgICAgICdpJzoge1xuICAgICAgICAgICdyZWRpcmVjdEtleSc6IHRoaXMucmVkaXJlY3RWZXJpZmllckhlbHBlcl8ucmVzdG9yZUtleSgpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2VfLmJpbmQodGhpcylcbiAgICApO1xuXG4gICAgLy8gUHJlcGFyZSBuZXcgdmVyaWZpZXIgcGFpci5cbiAgICB0aGlzLnJlZGlyZWN0VmVyaWZpZXJIZWxwZXJfLnByZXBhcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhT2JqZWN0Pil9IGhhbmRsZXJcbiAgICogQHJldHVybiB7IVBheW1lbnRzQXN5bmNDbGllbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVDbGllbnRfKG9wdGlvbnMsIGhhbmRsZXIpIHtcbiAgICByZXR1cm4gbmV3IFBheW1lbnRzQXN5bmNDbGllbnQoXG4gICAgICBvcHRpb25zLFxuICAgICAgaGFuZGxlcixcbiAgICAgIC8qIHVzZUlmcmFtZSAqLyBmYWxzZSxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18uZ2V0T3JpZ2luYWxXZWJBY3Rpdml0eVBvcnRzKClcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRUeXBlKCkge1xuICAgIHJldHVybiAnUEFZSlMnO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGFydChwYXltZW50UmVxdWVzdCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmZvcmNlUmVkaXJlY3QpIHtcbiAgICAgIHBheW1lbnRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihwYXltZW50UmVxdWVzdCwge1xuICAgICAgICAnZm9yY2VSZWRpcmVjdCc6IG9wdGlvbnMuZm9yY2VSZWRpcmVjdCB8fCBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRJbnRlcm5hbFBhcmFtKFxuICAgICAgcGF5bWVudFJlcXVlc3QsXG4gICAgICAnZGlzYWJsZU5hdGl2ZScsXG4gICAgICAvLyBUaGUgcGFnZSBjYW5ub3QgYmUgaWZyYW1lZCBhdCB0aGlzIHRpbWUuIE1heSBiZSByZWxheGVkIGxhdGVyXG4gICAgICAvLyBmb3IgQU1QIGFuZCBzaW1pbGFyIGNvbnRleHRzLlxuICAgICAgdGhpcy53aW5fICE9IHRoaXMudG9wXygpIHx8XG4gICAgICAgIC8vIEV4cGVyaW1lbnQgbXVzdCBiZSBlbmFibGVkLlxuICAgICAgICAhaXNFeHBlcmltZW50T24odGhpcy53aW5fLCBFeHBlcmltZW50RmxhZ3MuR1BBWV9OQVRJVkUpXG4gICAgKTtcbiAgICAvLyBOb3RpY2UgdGhhdCB0aGUgY2FsbGJhY2sgZm9yIHZlcmlmaWVyIG1heSBleGVjdXRlIGFzeW5jaHJvbm91c2x5LlxuICAgIHRoaXMucmVkaXJlY3RWZXJpZmllckhlbHBlcl8udXNlVmVyaWZpZXIodmVyaWZpZXIgPT4ge1xuICAgICAgaWYgKHZlcmlmaWVyKSB7XG4gICAgICAgIHNldEludGVybmFsUGFyYW0ocGF5bWVudFJlcXVlc3QsICdyZWRpcmVjdFZlcmlmaWVyJywgdmVyaWZpZXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5jbGllbnRfLmxvYWRQYXltZW50RGF0YShwYXltZW50UmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnJlc3BvbnNlQ2FsbGJhY2tfID0gY2FsbGJhY2s7XG4gICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlXztcbiAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBjYWxsYmFjayh0aGlzLmNvbnZlcnRSZXNwb25zZV8ocmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IU9iamVjdD59IHJlc3BvbnNlUHJvbWlzZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlUmVzcG9uc2VfKHJlc3BvbnNlUHJvbWlzZSkge1xuICAgIHRoaXMucmVzcG9uc2VfID0gcmVzcG9uc2VQcm9taXNlO1xuICAgIGlmICh0aGlzLnJlc3BvbnNlQ2FsbGJhY2tfKSB7XG4gICAgICB0aGlzLnJlc3BvbnNlQ2FsbGJhY2tfKHRoaXMuY29udmVydFJlc3BvbnNlXyh0aGlzLnJlc3BvbnNlXykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlPCFPYmplY3Q+fSByZXNwb25zZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnZlcnRSZXNwb25zZV8ocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIGlmICh0eXBlb2YgcmVhc29uID09ICdvYmplY3QnICYmIHJlYXNvblsnc3RhdHVzQ29kZSddID09ICdDQU5DRUxFRCcpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNyZWF0ZUNhbmNlbEVycm9yKHRoaXMud2luXykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVdpbmRvd31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRvcF8oKSB7XG4gICAgLy8gT25seSBleGlzdHMgZm9yIHRlc3Rpbmcgc2luY2UgaXQncyBub3QgcG9zc2libGUgdG8gb3ZlcnJpZGUgYHdpbmRvdy50b3BgLlxuICAgIHJldHVybiB0aGlzLndpbl8udG9wO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAga2V5OiBzdHJpbmcsXG4gKiAgIHZlcmlmaWVyOiBzdHJpbmcsXG4gKiB9fVxuICovXG5sZXQgUmVkaXJlY3RWZXJpZmllclBhaXJEZWY7XG5cbi8qKlxuICogVGhpcyBoZWxwZXIgZ2VuZXJhdGVzIGtleS92ZXJpZmllciBwYWlyIGZvciB0aGUgcmVkaXJlY3QgbW9kZS4gV2hlbiB0aGVcbiAqIHJlZGlyZWN0IG1vZGUgaXMgdXNlZCwgdGhlIGVuY3J5cHRlZCBwYXlsb2FkIGlzIHJldHVybmVkIHZpYSBuaXZpZ2F0aW9uIFVSTC5cbiAqIFRoaXMgcGF5bG9hZCBuZWVkIHRvIGJlIGRlY3J5cHRlZCBhbmQgdG8gYXZvaWQgc2Vzc2lvbiBmaXhhdGlvbiBhdHRhY2tzLCBhXG4gKiB2ZXJpZmllciBoYXMgdG8gYmUgdXNlZC4gVGhpcyByZWRpcmVjdCB2ZXJpZmllciBpcyBub3QgdGhlIG9ubHkgc2Vzc2lvblxuICogdmVyaWZpZXIgaW4gdXNlOiB3ZSBhbHNvIHVzZSBHQUlBLiBIb3dldmVyLCB3ZSBoYXZlIHRvIGZhbGxiYWNrIHRvIHRoaXNcbiAqIHZlcmlmaWVyIHdoZW4gR0FJQSBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlZGlyZWN0VmVyaWZpZXJIZWxwZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMucGFpckNyZWF0ZWRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9SZWRpcmVjdFZlcmlmaWVyUGFpckRlZn0gKi9cbiAgICB0aGlzLnBhaXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8P1JlZGlyZWN0VmVyaWZpZXJQYWlyRGVmPn0gKi9cbiAgICB0aGlzLnBhaXJQcm9taXNlXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVG8gYXZvaWQgcG9wdXAgYmxvY2tlcnMsIHRoZSBrZXkvdmVyaWZpZXIgcGFpciBpcyBjcmVhdGVkIGFzIHNvb24gYXNcbiAgICogcG9zc2libGUuXG4gICAqIEByZXR1cm4gez9Qcm9taXNlfVxuICAgKi9cbiAgcHJlcGFyZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRPckNyZWF0ZVBhaXJfKCgpID0+IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxscyB0aGUgcHJvdmlkZWQgY2FsbGJhY2sgd2l0aCB0aGUgZ2VuZXJhdGVkIHJlZGlyZWN0IHZlcmlmaWVyLiBUaGlzXG4gICAqIEFQSSBpcyBzeW5jL2FzeW5jLCB3aGljaCBpcyBhIGJpZyBhbnRpLXBhdHRlcm4uIEhvd2V2ZXIsIGl0J3MgbmVjZXNzYXJ5XG4gICAqIHRvIHJlZHVjZSB0aGUgcmlzayBvZiBwb3B1cCBibG9ja2Vycy4gSWYgdGhlIHZlcmlmaWVyIGlzIGFscmVhZHkgYXZhaWxhYmxlXG4gICAqIChzZWUgYHByZXBhcmVgIG1ldGhvZCksIHRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBpbW1lZGlhdGVseSBhbmQgdGh1c1xuICAgKiBpbiB0aGUgc2FtZSBldmVudCBsb29wIGFzIHRoZSB1c2VyIGFjdGlvbi5cbiAgICpcbiAgICogVGhlIHJldHVybiB2ZXJpZmllciBjb3VsZCBiZSBgbnVsbGAuIFRoaXMgY291bGQgbWVhbiBlaXRoZXIgdGhhdCBpdHNcbiAgICogZ2VuZXJhdGlvbiBmYWlsZWQsIG9yIGlmIHRoZSBwbGF0Zm9ybSBkb2Vzbid0IHN1cHBvcnQgbmVjZXNzYXJ5IEFQSXMsIHN1Y2hcbiAgICogYXMgV2ViIENyeXB0by4gVGhlIHJlZGlyZWN0IGNhbiBzdGlsbCBwcm9jZWVkIGFuZCB0cnkgdG8gZmFsbGJhY2sgb24gR0FJQVxuICAgKiBhcyBhIHJlZGlyZWN0IHZlcmlmaWVyLiBUaGUgc2V0IG9mIHBsYXRmb3JtcyB3aGVyZSBHQUlBIGlzIG5vdCBhdmFpbGFibGVcbiAgICogYW5kIHRoZSByZWRpcmVjdCB2ZXJpZmllciBjYW5ub3QgYmUgY3JlYXRlZCBpcyBuZWdsaWdpYmxlLlxuICAgKlxuICAgKiBUaGUga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJldHVybmVkIHZlcmlmaWVyIGlzIHN0b3JlZCBpbiB0aGUgc2Vzc2lvblxuICAgKiBzdG9yYWdlIGFuZCBjYW4gYmUgbGF0ZXIgcmVzdG9yZWQgdXNpbmcgYHJlc3RvcmVLZXlgIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbig/c3RyaW5nKX0gY2FsbGJhY2tcbiAgICovXG4gIHVzZVZlcmlmaWVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5nZXRPckNyZWF0ZVBhaXJfKHBhaXIgPT4ge1xuICAgICAgaWYgKHBhaXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLndpbl8ubG9jYWxTdG9yYWdlLnNldEl0ZW0oUkVESVJFQ1RfU1RPUkFHRV9LRVksIHBhaXIua2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElmIHN0b3JhZ2UgaGFzIGZhaWxlZCwgdGhlcmUncyBubyBwb2ludCBpbiB1c2luZyB0aGUgdmVyaWZlci5cbiAgICAgICAgICAvLyBIb3dldmVyLCB0aGVyZSBhcmUgb3RoZXIgd2F5cyB0byByZWNvdmVyIHRoZSByZWRpcmVjdCwgc28gaXQnc1xuICAgICAgICAgIC8vIG5vdCBuZWNlc3NhcmlseSBhIGZhdGFsIGNvbmRpdGlvbi5cbiAgICAgICAgICBwYWlyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FsbGJhY2soKHBhaXIgJiYgcGFpci52ZXJpZmllcikgfHwgbnVsbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZXMgdGhlIHJlZGlyZWN0IGtleSBmcm9tIHRoZSBzZXNzaW9uIHN0b3JhZ2UuIFRoZSBrZXkgbWF5IGJlIG51bGwuXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICByZXN0b3JlS2V5KCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAodGhpcy53aW5fLmxvY2FsU3RvcmFnZSAmJlxuICAgICAgICAgIHRoaXMud2luXy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRURJUkVDVF9TVE9SQUdFX0tFWSkpIHx8XG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP1JlZGlyZWN0VmVyaWZpZXJQYWlyRGVmKX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P1Byb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRPckNyZWF0ZVBhaXJfKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jcmVhdGVQYWlyXygpO1xuICAgIGlmICh0aGlzLnBhaXJDcmVhdGVkXykge1xuICAgICAgLy8gQWxyZWFkeSBjcmVhdGVkLlxuICAgICAgY2FsbGJhY2sodGhpcy5wYWlyXyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBhaXJQcm9taXNlXykge1xuICAgICAgLy8gT3RoZXJ3aXNlIHdhaXQgZm9yIGl0IHRvIGJlIGNyZWF0ZWQuXG4gICAgICB0aGlzLnBhaXJQcm9taXNlXy50aGVuKHBhaXIgPT4gY2FsbGJhY2socGFpcikpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYWlyUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZVBhaXJfKCkge1xuICAgIC8vIEVpdGhlciBhbHJlYWR5IGNyZWF0ZWQgb3IgYWxyZWFkeSBzdGFydGVkLlxuICAgIGlmICh0aGlzLnBhaXJDcmVhdGVkXyB8fCB0aGlzLnBhaXJQcm9taXNlXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHRoYXQgdGhlIHBsYXRmb3JtIGNhbiBmdWxseSBzdXBwb3J0IHZlcmlmaWNhdGlvbi4gVGhhdCBtZWFuc1xuICAgIC8vIHRoYXQgaXQncyBleHBlY3RlZCB0byBpbXBsZW1lbnQgdGhlIGZvbGxvd2luZyBBUElzOlxuICAgIC8vIGEuIExvY2FsIHN0b3JhZ2UgKGxvY2FsU3RvcmFnZSk7XG4gICAgLy8gYi4gV2ViQ3J5cHRvIChjcnlwdG8uc3VidGxlKTtcbiAgICAvLyBjLiBDcnlwdG8gcmFuZG9tIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKTtcbiAgICAvLyBkLiBTSEEyODQgKGNyeXB0by5zdWJ0bGUuZGlnZXN0KS5cbiAgICBjb25zdCBjcnlwdG8gPSB0aGlzLndpbl8uY3J5cHRvO1xuICAgIGlmIChcbiAgICAgIHRoaXMud2luXy5sb2NhbFN0b3JhZ2UgJiZcbiAgICAgIGNyeXB0byAmJlxuICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJlxuICAgICAgY3J5cHRvLnN1YnRsZSAmJlxuICAgICAgY3J5cHRvLnN1YnRsZS5kaWdlc3RcbiAgICApIHtcbiAgICAgIHRoaXMucGFpclByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAvLyAxLiBVc2UgY3J5cHRvIHJhbmRvbSB0byBjcmVhdGUgYSAxMjgtYml0ICgxNiBieXRlKSByZWRpcmVjdCBrZXkuXG4gICAgICAgIGNvbnN0IGtleUJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGtleUJ5dGVzKTtcblxuICAgICAgICAvLyAyLiBFbmNvZGUga2V5IGFzIGJhc2U2NC5cbiAgICAgICAgY29uc3Qga2V5ID0gYnRvYShieXRlc1RvU3RyaW5nKGtleUJ5dGVzKSk7XG5cbiAgICAgICAgLy8gMy4gQ3JlYXRlIGEgaGFzaC5cbiAgICAgICAgY3J5cHRvLnN1YnRsZS5kaWdlc3Qoe25hbWU6ICdTSEEtMzg0J30sIHN0cmluZ1RvQnl0ZXMoa2V5KSkudGhlbihcbiAgICAgICAgICBidWZmZXIgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmVyaWZpZXIgPSBidG9hKFxuICAgICAgICAgICAgICBieXRlc1RvU3RyaW5nKFxuICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KC8qKiBAdHlwZSB7IUFycmF5QnVmZmVyfSAqLyAoYnVmZmVyKSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc29sdmUoe2tleSwgdmVyaWZpZXJ9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIC8vIElnbm9yZSBmYWlsdXJlcy4gQSBmYWlsdXJlIHRvIGNyZWF0ZSBhIHJlZGlyZWN0IHZlcmlmaWVyIGlzIG9mdGVuXG4gICAgICAgICAgLy8gcmVjb3ZlcmFibGUuXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHBhaXIgPT4ge1xuICAgICAgICAgIHRoaXMucGFpckNyZWF0ZWRfID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnBhaXJfID0gcGFpcjtcbiAgICAgICAgICByZXR1cm4gcGFpcjtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vdCBzdXBwb3J0ZWQuXG4gICAgICB0aGlzLnBhaXJDcmVhdGVkXyA9IHRydWU7XG4gICAgICB0aGlzLnBhaXJfID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IHBheW1lbnRSZXF1ZXN0XG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuZnVuY3Rpb24gc2V0SW50ZXJuYWxQYXJhbShwYXltZW50UmVxdWVzdCwgcGFyYW0sIHZhbHVlKSB7XG4gIHBheW1lbnRSZXF1ZXN0WydpJ10gPSBPYmplY3QuYXNzaWduKHBheW1lbnRSZXF1ZXN0WydpJ10gfHwge30sIHtcbiAgICBbcGFyYW1dOiB2YWx1ZSxcbiAgfSk7XG59XG5cbi8vIFRPRE8oZHZveXRlbmtvLCAjNDA2KTogUmVtb3ZlIG9uY2UgR1BheSBBUEkgaXMgc3VwcG9ydGVkLlxuZXhwb3J0IGZ1bmN0aW9uIGdldFBheWpzQmluZGluZ0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBQYXlDbGllbnRCaW5kaW5nUGF5anM7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqIFRoZSBGbG93IGdvZXMgbGlrZSB0aGlzOlxuICogYS4gU3RhcnQgUGF5bWVudHNcbiAqIGIuIENvbXBsZXRlIFBheW1lbnRzXG4gKiBjLiBDcmVhdGUgQWNjb3VudFxuICogZC4gQWNrbm93bGVkZ2UgQWNjb3VudFxuICpcbiAqIEluIG90aGVyIHdvcmRzLCBGbG93ID0gUGF5bWVudHMgKyBBY2NvdW50IENyZWF0aW9uLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge0FuYWx5dGljc0V2ZW50LCBFdmVudFBhcmFtc30gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7Snd0SGVscGVyfSBmcm9tICcuLi91dGlscy9qd3QnO1xuaW1wb3J0IHtQdXJjaGFzZURhdGEsIFN1YnNjcmliZVJlc3BvbnNlfSBmcm9tICcuLi9hcGkvc3Vic2NyaWJlLXJlc3BvbnNlJztcbmltcG9ydCB7XG4gIFByb2R1Y3RUeXBlLFxuICBTdWJzY3JpcHRpb25GbG93cyxcbiAgV2luZG93T3Blbk1vZGUsXG59IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7VXNlckRhdGF9IGZyb20gJy4uL2FwaS91c2VyLWRhdGEnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7aXNDYW5jZWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcbmltcG9ydCB7cGFyc2VKc29uLCB0cnlQYXJzZUpzb259IGZyb20gJy4uL3V0aWxzL2pzb24nO1xuaW1wb3J0IHtcbiAgRW50aXRsZW1lbnRzUmVzcG9uc2UsXG4gIEFjY291bnRDcmVhdGlvblJlcXVlc3QsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG4vKipcbiAqIFN0cmluZyB2YWx1ZXMgaW5wdXQgYnkgdGhlIHB1Ymxpc2hlciBhcmUgbWFwcGVkIHRvIHRoZSBudW1iZXIgdmFsdWVzLlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICovXG5leHBvcnQgY29uc3QgUmVwbGFjZVNrdVByb3JhdGlvbk1vZGVNYXBwaW5nID0ge1xuICAvLyBUaGUgcmVwbGFjZW1lbnQgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5LCBhbmQgdGhlIHJlbWFpbmluZyB0aW1lIHdpbGxcbiAgLy8gYmUgcHJvcmF0ZWQgYW5kIGNyZWRpdGVkIHRvIHRoZSB1c2VyLiBUaGlzIGlzIHRoZSBjdXJyZW50IGRlZmF1bHRcbiAgLy8gYmVoYXZpb3IuXG4gICdJTU1FRElBVEVfV0lUSF9USU1FX1BST1JBVElPTic6IDEsXG59O1xuXG4vKipcbiAqIFRoZSBmbG93IHRvIGluaXRpYXRlIHBheW1lbnQgcHJvY2Vzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFBheVN0YXJ0RmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25SZXF1ZXN0fHN0cmluZ30gc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0XG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlByb2R1Y3RUeXBlfSBwcm9kdWN0VHlwZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgZGVwcyxcbiAgICBza3VPclN1YnNjcmlwdGlvblJlcXVlc3QsXG4gICAgcHJvZHVjdFR5cGUgPSBQcm9kdWN0VHlwZS5TVUJTQ1JJUFRJT05cbiAgKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vcGF5LWNsaWVudC5QYXlDbGllbnR9ICovXG4gICAgdGhpcy5wYXlDbGllbnRfID0gZGVwcy5wYXlDbGllbnQoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSAqL1xuICAgIHRoaXMucGFnZUNvbmZpZ18gPSBkZXBzLnBhZ2VDb25maWcoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlN1YnNjcmlwdGlvblJlcXVlc3R9ICovXG4gICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0XyA9XG4gICAgICB0eXBlb2Ygc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0ID09ICdzdHJpbmcnXG4gICAgICAgID8geydza3VJZCc6IHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdH1cbiAgICAgICAgOiBza3VPclN1YnNjcmlwdGlvblJlcXVlc3Q7XG5cbiAgICAvKipAcHJpdmF0ZSBAY29uc3QgeyFQcm9kdWN0VHlwZX0gKi9cbiAgICB0aGlzLnByb2R1Y3RUeXBlXyA9IHByb2R1Y3RUeXBlO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvYW5hbHl0aWNzLXNlcnZpY2UuQW5hbHl0aWNzU2VydmljZX0gKi9cbiAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfID0gZGVwcy5hbmFseXRpY3MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2NsaWVudC1ldmVudC1tYW5hZ2VyLkNsaWVudEV2ZW50TWFuYWdlcn0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuXG4gICAgLy8gTWFwIHRoZSBwcm9yYXRpb24gbW9kZSB0byB0aGUgZW51bSB2YWx1ZSAoaWYgcHJvcmF0aW9uIGV4aXN0cykuXG4gICAgdGhpcy5wcm9yYXRpb25Nb2RlID0gdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0Xy5yZXBsYWNlU2t1UHJvcmF0aW9uTW9kZTtcbiAgICB0aGlzLnByb3JhdGlvbkVudW0gPSAwO1xuICAgIGlmICh0aGlzLnByb3JhdGlvbk1vZGUpIHtcbiAgICAgIHRoaXMucHJvcmF0aW9uRW51bSA9IFJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlTWFwcGluZ1t0aGlzLnByb3JhdGlvbk1vZGVdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0Xy5vbGRTa3UpIHtcbiAgICAgIHRoaXMucHJvcmF0aW9uRW51bSA9XG4gICAgICAgIFJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlTWFwcGluZ1snSU1NRURJQVRFX1dJVEhfVElNRV9QUk9SQVRJT04nXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBwYXltZW50cyBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIC8vIEFkZCB0aGUgJ3B1YmxpY2F0aW9uSWQnIGtleSB0byB0aGUgc3Vic2NyaXB0aW9uUmVxdWVzdF8gb2JqZWN0LlxuICAgIGNvbnN0IHN3Z1BheW1lbnRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0Xywge1xuICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLnBhZ2VDb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnByb3JhdGlvbkVudW0pIHtcbiAgICAgIHN3Z1BheW1lbnRSZXF1ZXN0LnJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlID0gdGhpcy5wcm9yYXRpb25FbnVtO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0L2NhbmNlbCBldmVudHMuXG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAudHJpZ2dlckZsb3dTdGFydGVkKFxuICAgICAgICBTdWJzY3JpcHRpb25GbG93cy5TVUJTQ1JJQkUsXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdF9cbiAgICAgICk7XG4gICAgLy8gVE9ETyhjaGVuc2hheSk6IENyZWF0ZSBhbmFseXRpY3MgZm9yICdyZXBsYWNlIHN1YnNjcmlwdGlvbicuXG4gICAgdGhpcy5hbmFseXRpY3NTZXJ2aWNlXy5zZXRTa3UodGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0Xy5za3VJZCk7XG4gICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KFxuICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVELFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5wYXlDbGllbnRfLnN0YXJ0KFxuICAgICAge1xuICAgICAgICAnYXBpVmVyc2lvbic6IDEsXG4gICAgICAgICdhbGxvd2VkUGF5bWVudE1ldGhvZHMnOiBbJ0NBUkQnXSxcbiAgICAgICAgJ2Vudmlyb25tZW50JzogJyRwYXlFbnZpcm9ubWVudCQnLFxuICAgICAgICAncGxheUVudmlyb25tZW50JzogJyRwbGF5RW52aXJvbm1lbnQkJyxcbiAgICAgICAgJ3N3Zyc6IHN3Z1BheW1lbnRSZXF1ZXN0LFxuICAgICAgICAnaSc6IHtcbiAgICAgICAgICAnc3RhcnRUaW1lTXMnOiBEYXRlLm5vdygpLFxuICAgICAgICAgICdnb29nbGVUcmFuc2FjdGlvbklkJzogdGhpcy5hbmFseXRpY3NTZXJ2aWNlXy5nZXRUcmFuc2FjdGlvbklkKCksXG4gICAgICAgICAgJ3Byb2R1Y3RUeXBlJzogdGhpcy5wcm9kdWN0VHlwZV8sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmb3JjZVJlZGlyZWN0OlxuICAgICAgICAgIHRoaXMuZGVwc18uY29uZmlnKCkud2luZG93T3Blbk1vZGUgPT0gV2luZG93T3Blbk1vZGUuUkVESVJFQ1QsXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgZmxvdyBmb3Igc3VjY2Vzc2Z1bCBwYXltZW50cyBjb21wbGV0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgUGF5Q29tcGxldGVGbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBzdGF0aWMgY29uZmlndXJlUGVuZGluZyhkZXBzKSB7XG4gICAgLyoqIEBjb25zdCBAdHlwZSB7Li9jbGllbnQtZXZlbnQtbWFuYWdlci5DbGllbnRFdmVudE1hbmFnZXJ9ICovXG4gICAgY29uc3QgZXZlbnRNYW5hZ2VyID0gZGVwcy5ldmVudE1hbmFnZXIoKTtcblxuICAgIGRlcHMucGF5Q2xpZW50KCkub25SZXNwb25zZShwYXlQcm9taXNlID0+IHtcbiAgICAgIGRlcHMuZW50aXRsZW1lbnRzTWFuYWdlcigpLmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuICAgICAgY29uc3QgZmxvdyA9IG5ldyBQYXlDb21wbGV0ZUZsb3coZGVwcyk7XG4gICAgICBjb25zdCBwcm9taXNlID0gdmFsaWRhdGVQYXlSZXNwb25zZShcbiAgICAgICAgZGVwcyxcbiAgICAgICAgcGF5UHJvbWlzZSxcbiAgICAgICAgZmxvdy5jb21wbGV0ZS5iaW5kKGZsb3cpXG4gICAgICApO1xuICAgICAgZGVwcy5jYWxsYmFja3MoKS50cmlnZ2VyU3Vic2NyaWJlUmVzcG9uc2UocHJvbWlzZSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKFxuICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgZXZlbnRNYW5hZ2VyLmxvZ1N3Z0V2ZW50KFxuICAgICAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1BBWU1FTlRfQ09NUExFVEUsXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmbG93LnN0YXJ0KHJlc3BvbnNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVhc29uID0+IHtcbiAgICAgICAgICBpZiAoaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuU1VCU0NSSUJFKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVwc1xuICAgICAgICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkVWRU5UX1BBWU1FTlRfRkFJTEVELCBmYWxzZSk7XG4gICAgICAgICAgICBkZXBzLmpzZXJyb3IoKS5lcnJvcignUGF5IGZhaWxlZCcsIHJlYXNvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/U3Vic2NyaWJlUmVzcG9uc2V9ICovXG4gICAgdGhpcy5yZXNwb25zZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLnJlYWR5UHJvbWlzZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvYW5hbHl0aWNzLXNlcnZpY2UuQW5hbHl0aWNzU2VydmljZX0gKi9cbiAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfID0gZGVwcy5hbmFseXRpY3MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2NsaWVudC1ldmVudC1tYW5hZ2VyLkNsaWVudEV2ZW50TWFuYWdlcn0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcGF5bWVudHMgY29tcGxldGlvbiBmbG93LlxuICAgKiBAcGFyYW0geyFTdWJzY3JpYmVSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydChyZXNwb25zZSkge1xuICAgIGlmICghdGhpcy5hbmFseXRpY3NTZXJ2aWNlXy5nZXRTa3UoKSkge1xuICAgICAgLy8gVGhpcyBpcyBhIHJlZGlyZWN0IHJlc3BvbnNlLiBFeHRyYWN0IHRoZSBTS1UgaWYgcG9zc2libGUuXG4gICAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfLmFkZExhYmVscyhbJ3JlZGlyZWN0J10pO1xuICAgICAgY29uc3Qgc2t1ID0gcGFyc2VTa3VGcm9tUHVyY2hhc2VEYXRhU2FmZShyZXNwb25zZS5wdXJjaGFzZURhdGEpO1xuICAgICAgaWYgKHNrdSkge1xuICAgICAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfLnNldFNrdShza3UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgIEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fQUNDT1VOVF9DSEFOR0VELFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkucmVzZXQodHJ1ZSk7XG4gICAgdGhpcy5yZXNwb25zZV8gPSByZXNwb25zZTtcbiAgICAvLyBUT0RPKGRpYW5hamluZyk6IGZpbmQgYSB3YXkgdG8gc3BlY2lmeSB3aGV0aGVyIHJlc3BvbnNlIGlzIGEgc3Vic2NyaXB0aW9uIHVwZGF0ZVxuICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICAncHVibGljYXRpb25JZCc6IHRoaXMuZGVwc18ucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICdwcm9kdWN0VHlwZSc6IHRoaXMucmVzcG9uc2VfWydwcm9kdWN0VHlwZSddLFxuICAgICAgLy8gJ2lzU3Vic2NyaXB0aW9uVXBkYXRlJzogISFyZXNwb25zZS5vbGRTa3UsXG4gICAgfTtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbywgIzQwMCk6IGNsZWFudXAgb25jZSBlbnRpdGxlbWVudHMgaXMgbGF1bmNoZWQgZXZlcnl3aGVyZS5cbiAgICBpZiAocmVzcG9uc2UudXNlckRhdGEgJiYgcmVzcG9uc2UuZW50aXRsZW1lbnRzKSB7XG4gICAgICBhcmdzWydpZFRva2VuJ10gPSByZXNwb25zZS51c2VyRGF0YS5pZFRva2VuO1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuZW50aXRsZW1lbnRzTWFuYWdlcigpXG4gICAgICAgIC5wdXNoTmV4dEVudGl0bGVtZW50cyhyZXNwb25zZS5lbnRpdGxlbWVudHMucmF3KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJnc1snbG9naW5IaW50J10gPSByZXNwb25zZS51c2VyRGF0YSAmJiByZXNwb25zZS51c2VyRGF0YS5lbWFpbDtcbiAgICB9XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL3BheWNvbmZpcm1pZnJhbWUnKSxcbiAgICAgIGZlQXJncyhhcmdzKSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWVcbiAgICApO1xuXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uKFxuICAgICAgRW50aXRsZW1lbnRzUmVzcG9uc2UsXG4gICAgICB0aGlzLmhhbmRsZUVudGl0bGVtZW50c1Jlc3BvbnNlXy5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHQoKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIFRoZSBmbG93IGlzIGNvbXBsZXRlLlxuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICB9KTtcbiAgICB0aGlzLnJlYWR5UHJvbWlzZV8gPSB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgcmV0dXJuIHRoaXMucmVhZHlQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbnRpdGxlbWVudHNSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUVudGl0bGVtZW50c1Jlc3BvbnNlXyhyZXNwb25zZSkge1xuICAgIGNvbnN0IGp3dCA9IHJlc3BvbnNlLmdldEp3dCgpO1xuICAgIGlmIChqd3QpIHtcbiAgICAgIHRoaXMuZGVwc18uZW50aXRsZW1lbnRzTWFuYWdlcigpLnB1c2hOZXh0RW50aXRsZW1lbnRzKGp3dCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY29tcGxldGUoKSB7XG4gICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9BQ0NPVU5UX0NSRUFURUQsIHRydWUpO1xuICAgIHRoaXMuZGVwc18uZW50aXRsZW1lbnRzTWFuYWdlcigpLnVuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgdGhpcy5yZWFkeVByb21pc2VfLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudENvbXBsZXRpb25SZXF1ZXN0ID0gbmV3IEFjY291bnRDcmVhdGlvblJlcXVlc3QoKTtcbiAgICAgIGFjY291bnRDb21wbGV0aW9uUmVxdWVzdC5zZXRDb21wbGV0ZSh0cnVlKTtcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5leGVjdXRlKGFjY291bnRDb21wbGV0aW9uUmVxdWVzdCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3X1xuICAgICAgLmFjY2VwdFJlc3VsdCgpXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvLyBJZ25vcmUgZXJyb3JzLlxuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KFxuICAgICAgICAgIEFuYWx5dGljc0V2ZW50LkFDVElPTl9BQ0NPVU5UX0FDS05PV0xFREdFRCxcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZGVwc18uZW50aXRsZW1lbnRzTWFuYWdlcigpLnNldFRvYXN0U2hvd24odHJ1ZSk7XG4gICAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gKiBAcGFyYW0geyFQcm9taXNlPCFPYmplY3Q+fSBwYXlQcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IVByb21pc2V9IGNvbXBsZXRlSGFuZGxlclxuICogQHJldHVybiB7IVByb21pc2U8IVN1YnNjcmliZVJlc3BvbnNlPn1cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQYXlSZXNwb25zZShkZXBzLCBwYXlQcm9taXNlLCBjb21wbGV0ZUhhbmRsZXIpIHtcbiAgcmV0dXJuIHBheVByb21pc2UudGhlbihkYXRhID0+IHtcbiAgICAvLyAxKSBXZSBsb2cgYWdhaW5zdCBhIHJhbmRvbSBUWCBJRCB3aGljaCBpcyBob3cgd2UgdHJhY2sgYSBzcGVjaWZpYyB1c2VyXG4gICAgLy8gICAgYW5vbnltb3VzbHkuXG4gICAgLy8gMikgSWYgdGhlcmUgd2FzIGEgcmVkaXJlY3QgdG8gZ1BheSwgd2UgbWF5IGhhdmUgbG9zdCBvdXIgc3RvcmVkIFRYIElELlxuICAgIC8vIDMpIFBheSBzZXJ2aWNlIGlzIHN1cHBvc2VkIHRvIGdpdmUgdXMgdGhlIFRYIElEIGl0IGxvZ2dlZCBhZ2FpbnN0LlxuXG4gICAgY29uc3QgaGFzTG9nZ2VkID0gZGVwcy5hbmFseXRpY3MoKS5nZXRIYXNMb2dnZWQoKTtcbiAgICBsZXQgZXZlbnRUeXBlID0gQW5hbHl0aWNzRXZlbnQuVU5LTk9XTjtcbiAgICBsZXQgZXZlbnRQYXJhbXMgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAhZGF0YVsnZ29vZ2xlVHJhbnNhY3Rpb25JZCddKSB7XG4gICAgICAvLyBJZiBnUGF5IGRvZXNuJ3QgZ2l2ZSB1cyBhIFRYIElEIGl0IG1lYW5zIHRoYXQgc29tZXRoaW5nIG1heVxuICAgICAgLy8gYmUgd3JvbmcuICBJZiB3ZSBwcmV2aW91c2x5IGxvZ2dlZCB0aGVuIHdlIGFyZSBhdCBsZWFzdCBjb250aW51aW5nIHRvXG4gICAgICAvLyBsb2cgYWdhaW5zdCB0aGUgc2FtZSBUWCBJRC4gIElmIHdlIGRpZG4ndCBwcmV2aW91c2x5IGxvZyB0aGVuIHdlIGhhdmVcbiAgICAgIC8vIGxvc3QgYWxsIGNvbm5lY3Rpb24gdG8gdGhlIGV2ZW50cyB0aGF0IHByZWNlZGVkIHRoZSBwYXltZW50IGV2ZW50IGFuZFxuICAgICAgLy8gd2UgYXQgbGVhc3Qgd2FudCB0byBrbm93IHdoeSB0aGF0IGRhdGEgd2FzIGxvc3QuXG4gICAgICBldmVudFBhcmFtcyA9IG5ldyBFdmVudFBhcmFtcygpO1xuICAgICAgZXZlbnRQYXJhbXMuc2V0SGFkTG9nZ2VkKGhhc0xvZ2dlZCk7XG4gICAgICBldmVudFR5cGUgPSBBbmFseXRpY3NFdmVudC5FVkVOVF9HUEFZX05PX1RYX0lEO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBvbGRUeElkID0gZGVwcy5hbmFseXRpY3MoKS5nZXRUcmFuc2FjdGlvbklkKCk7XG4gICAgICBjb25zdCBuZXdUeElkID0gZGF0YVsnZ29vZ2xlVHJhbnNhY3Rpb25JZCddO1xuXG4gICAgICBpZiAoIWhhc0xvZ2dlZCkge1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBleHBlY3RlZCBjYXNlIGZvciBmdWxsIHJlZGlyZWN0cy4gIEl0IG1heSBiZSBoYXBwZW5pbmdcbiAgICAgICAgLy8gdW5leHBlY3RlZGx5IGF0IG90aGVyIHRpbWVzIHRvbyB0aG91Z2ggYW5kIHdlIHdhbnQgdG8gYmUgYXdhcmUgb2YgaXRcbiAgICAgICAgLy8gaWYgaXQgZG9lcy5cbiAgICAgICAgZGVwcy5hbmFseXRpY3MoKS5zZXRUcmFuc2FjdGlvbklkKG5ld1R4SWQpO1xuICAgICAgICBldmVudFR5cGUgPSBBbmFseXRpY3NFdmVudC5FVkVOVF9HUEFZX0NBTk5PVF9DT05GSVJNX1RYX0lEO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9sZFR4SWQgPT09IG5ld1R4SWQpIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBleHBlY3RlZCBjYXNlIGZvciBub24tcmVkaXJlY3QgcGF5IGV2ZW50c1xuICAgICAgICAgIGV2ZW50VHlwZSA9IEFuYWx5dGljc0V2ZW50LkVWRU5UX0NPTkZJUk1fVFhfSUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyBhbiB1bmV4cGVjdGVkIGNhc2U6IGdQYXkgcmVqZWN0ZWQgb3VyIFRYIElEIGFuZCBjcmVhdGVkXG4gICAgICAgICAgLy8gaXRzIG93bi4gIExvZyB0aGUgZ1BheSBUWCBJRCBidXQga2VlcCBvdXIgbG9nZ2luZyBjb25zaXN0ZW50LlxuICAgICAgICAgIGV2ZW50UGFyYW1zID0gbmV3IEV2ZW50UGFyYW1zKCk7XG4gICAgICAgICAgZXZlbnRQYXJhbXMuc2V0R3BheVRyYW5zYWN0aW9uSWQobmV3VHhJZCk7XG4gICAgICAgICAgZXZlbnRUeXBlID0gQW5hbHl0aWNzRXZlbnQuRVZFTlRfQ0hBTkdFRF9UWF9JRDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkZXBzLmV2ZW50TWFuYWdlcigpLmxvZ1N3Z0V2ZW50KGV2ZW50VHlwZSwgdHJ1ZSwgZXZlbnRQYXJhbXMpO1xuICAgIHJldHVybiBwYXJzZVN1YnNjcmlwdGlvblJlc3BvbnNlKGRlcHMsIGRhdGEsIGNvbXBsZXRlSGFuZGxlcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gKiBAcGFyYW0geyp9IGRhdGFcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY29tcGxldGVIYW5kbGVyXG4gKiBAcmV0dXJuIHshU3Vic2NyaWJlUmVzcG9uc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN1YnNjcmlwdGlvblJlc3BvbnNlKGRlcHMsIGRhdGEsIGNvbXBsZXRlSGFuZGxlcikge1xuICBsZXQgc3dnRGF0YSA9IG51bGw7XG4gIGxldCByYXcgPSBudWxsO1xuICBsZXQgcHJvZHVjdFR5cGUgPSBudWxsO1xuICBpZiAoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykge1xuICAgICAgcmF3ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQXNzdW1lIGl0J3MgYSBqc29uIG9iamVjdCBpbiB0aGUgZm9ybWF0OlxuICAgICAgLy8gYHtpbnRlZ3JhdG9yQ2xpZW50Q2FsbGJhY2tEYXRhOiBcIi4uLlwifWAgb3IgYHtzd2dDYWxsYmFja0RhdGE6IFwiLi4uXCJ9YC5cbiAgICAgIGNvbnN0IGpzb24gPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChkYXRhKTtcbiAgICAgIGlmICgncHJvZHVjdFR5cGUnIGluIGRhdGEpIHtcbiAgICAgICAgcHJvZHVjdFR5cGUgPSBkYXRhWydwcm9kdWN0VHlwZSddO1xuICAgICAgfVxuICAgICAgaWYgKCdzd2dDYWxsYmFja0RhdGEnIGluIGpzb24pIHtcbiAgICAgICAgc3dnRGF0YSA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGpzb25bJ3N3Z0NhbGxiYWNrRGF0YSddKTtcbiAgICAgIH0gZWxzZSBpZiAoJ2ludGVncmF0b3JDbGllbnRDYWxsYmFja0RhdGEnIGluIGpzb24pIHtcbiAgICAgICAgcmF3ID0ganNvblsnaW50ZWdyYXRvckNsaWVudENhbGxiYWNrRGF0YSddO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoIXByb2R1Y3RUeXBlKSB7XG4gICAgcHJvZHVjdFR5cGUgPSBQcm9kdWN0VHlwZS5TVUJTQ1JJUFRJT047XG4gIH1cbiAgaWYgKHJhdyAmJiAhc3dnRGF0YSkge1xuICAgIHJhdyA9IGF0b2IocmF3KTtcbiAgICBpZiAocmF3KSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUpzb24ocmF3KTtcbiAgICAgIHN3Z0RhdGEgPSBwYXJzZWRbJ3N3Z0NhbGxiYWNrRGF0YSddO1xuICAgIH1cbiAgfVxuICBpZiAoIXN3Z0RhdGEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQgcGF5bWVudCByZXNwb25zZScpO1xuICB9XG4gIHJhdyA9IEpTT04uc3RyaW5naWZ5KC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChzd2dEYXRhKSk7XG4gIHJldHVybiBuZXcgU3Vic2NyaWJlUmVzcG9uc2UoXG4gICAgcmF3LFxuICAgIHBhcnNlUHVyY2hhc2VEYXRhKHN3Z0RhdGEpLFxuICAgIHBhcnNlVXNlckRhdGEoc3dnRGF0YSksXG4gICAgcGFyc2VFbnRpdGxlbWVudHMoZGVwcywgc3dnRGF0YSksXG4gICAgcHJvZHVjdFR5cGUsXG4gICAgY29tcGxldGVIYW5kbGVyXG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBzd2dEYXRhXG4gKiBAcmV0dXJuIHshUHVyY2hhc2VEYXRhfVxuICovXG5mdW5jdGlvbiBwYXJzZVB1cmNoYXNlRGF0YShzd2dEYXRhKSB7XG4gIGNvbnN0IHJhdyA9IHN3Z0RhdGFbJ3B1cmNoYXNlRGF0YSddO1xuICBjb25zdCBzaWduYXR1cmUgPSBzd2dEYXRhWydwdXJjaGFzZURhdGFTaWduYXR1cmUnXTtcbiAgcmV0dXJuIG5ldyBQdXJjaGFzZURhdGEocmF3LCBzaWduYXR1cmUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3dnRGF0YVxuICogQHJldHVybiB7P1VzZXJEYXRhfVxuICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXNlckRhdGEoc3dnRGF0YSkge1xuICBjb25zdCBpZFRva2VuID0gc3dnRGF0YVsnaWRUb2tlbiddO1xuICBpZiAoIWlkVG9rZW4pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBqd3QgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChuZXcgSnd0SGVscGVyKCkuZGVjb2RlKGlkVG9rZW4pKTtcbiAgcmV0dXJuIG5ldyBVc2VyRGF0YShpZFRva2VuLCBqd3QpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gKiBAcGFyYW0geyFPYmplY3R9IHN3Z0RhdGFcbiAqIEByZXR1cm4gez8uLi9hcGkvZW50aXRsZW1lbnRzLkVudGl0bGVtZW50c31cbiAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudGl0bGVtZW50cyhkZXBzLCBzd2dEYXRhKSB7XG4gIGlmIChzd2dEYXRhWydzaWduZWRFbnRpdGxlbWVudHMnXSkge1xuICAgIHJldHVybiBkZXBzLmVudGl0bGVtZW50c01hbmFnZXIoKS5wYXJzZUVudGl0bGVtZW50cyhzd2dEYXRhKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFQdXJjaGFzZURhdGF9IHB1cmNoYXNlRGF0YVxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcGFyc2VTa3VGcm9tUHVyY2hhc2VEYXRhU2FmZShwdXJjaGFzZURhdGEpIHtcbiAgY29uc3QganNvbiA9IHRyeVBhcnNlSnNvbihwdXJjaGFzZURhdGEucmF3KTtcbiAgcmV0dXJuIChqc29uICYmIGpzb25bJ3Byb2R1Y3RJZCddKSB8fCBudWxsO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHthZHNVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtcbiAgQW5hbHl0aWNzRXZlbnQsXG4gIEV2ZW50T3JpZ2luYXRvcixcbiAgRXZlbnRQYXJhbXMsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge2lzT2JqZWN0LCBpc0Jvb2xlYW59IGZyb20gJy4uL3V0aWxzL3R5cGVzJztcbmltcG9ydCB7YW5hbHl0aWNzRXZlbnRUb1B1Ymxpc2hlckV2ZW50fSBmcm9tICcuL2V2ZW50LXR5cGUtbWFwcGluZyc7XG5cbi8qKlxuICogSW1wbGVtZW50cyBpbnRlcmZhY2UgdG8gUHJvcGVuc2l0eSBzZXJ2ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlbnNpdHlTZXJ2ZXIge1xuICAvKipcbiAgICogUGFnZSBjb25maWd1cmF0aW9uIGlzIGtub3duIHdoZW4gUHJvcGVuc2l0eSBBUElcbiAgICogaXMgYXZhaWxhYmxlLCBwdWJsaWNhdGlvbiBJRCBpcyB0aGVyZWZvcmUgdXNlZFxuICAgKiBpbiBjb25zdHJ1Y3RvciBmb3IgdGhlIHNlcnZlciBpbnRlcmZhY2UuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGRlcHMsIGZldGNoZXIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucHVibGljYXRpb25JZF8gPSB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCk7XG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuY2xpZW50SWRfID0gbnVsbDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9mZXRjaGVyLkZldGNoZXJ9ICovXG4gICAgdGhpcy5mZXRjaGVyXyA9IGZldGNoZXI7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgIHRoaXMudmVyc2lvbl8gPSAxO1xuXG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAucmVnaXN0ZXJFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlQ2xpZW50RXZlbnRfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldERvY3VtZW50Q29va2llXygpIHtcbiAgICByZXR1cm4gdGhpcy53aW5fLmRvY3VtZW50LmNvb2tpZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjbGllbnQgSUQgdG8gYmUgdXNlZC5cbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldENsaWVudElkXygpIHtcbiAgICBpZiAoIXRoaXMuY2xpZW50SWRfKSB7XG4gICAgICAvLyBNYXRjaCAnX19nYWRzJyAobmFtZSBvZiB0aGUgY29va2llKSBkcm9wcGVkIGJ5IEFkcyBUYWcuXG4gICAgICBjb25zdCBnYWRzbWF0Y2ggPSB0aGlzLmdldERvY3VtZW50Q29va2llXygpLm1hdGNoKFxuICAgICAgICAnKF58OylcXFxccypfX2dhZHNcXFxccyo9XFxcXHMqKFteO10rKSdcbiAgICAgICk7XG4gICAgICAvLyBTaW5jZSB0aGUgY29va2llIHdpbGwgYmUgY29uc3VtZWQgdXNpbmcgZGVjb2RlVVJJQ29tcG9uZW50KCksXG4gICAgICAvLyB1c2UgZW5jb2RlVVJJQ29tcG9uZW50KCkgaGVyZSB0byBtYXRjaC5cbiAgICAgIHRoaXMuY2xpZW50SWRfID0gZ2Fkc21hdGNoICYmIGVuY29kZVVSSUNvbXBvbmVudChnYWRzbWF0Y2gucG9wKCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jbGllbnRJZF87XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBwcm9wZW5zaXR5VXJsXyh1cmwpIHtcbiAgICB1cmwgPSB1cmwgKyAnJnVfdHo9MjQwJnY9JyArIHRoaXMudmVyc2lvbl87XG4gICAgY29uc3QgY2xpZW50SWQgPSB0aGlzLmdldENsaWVudElkXygpO1xuICAgIGlmIChjbGllbnRJZCkge1xuICAgICAgdXJsID0gdXJsICsgJyZjb29raWU9JyArIGNsaWVudElkO1xuICAgIH1cbiAgICB1cmwgPSB1cmwgKyAnJmNkbT0nICsgdGhpcy53aW5fLmxvY2F0aW9uLmhvc3RuYW1lO1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gcHJvZHVjdHNPclNrdXNcbiAgICovXG4gIHNlbmRTdWJzY3JpcHRpb25TdGF0ZShzdGF0ZSwgcHJvZHVjdHNPclNrdXMpIHtcbiAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgIH0pO1xuICAgIGxldCB1c2VyU3RhdGUgPSB0aGlzLnB1YmxpY2F0aW9uSWRfICsgJzonICsgc3RhdGU7XG4gICAgaWYgKHByb2R1Y3RzT3JTa3VzKSB7XG4gICAgICB1c2VyU3RhdGUgPSB1c2VyU3RhdGUgKyAnOicgKyBlbmNvZGVVUklDb21wb25lbnQocHJvZHVjdHNPclNrdXMpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSBhZHNVcmwoJy9zdWJvcHQvZGF0YT9zdGF0ZXM9JykgKyBlbmNvZGVVUklDb21wb25lbnQodXNlclN0YXRlKTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaGVyXy5mZXRjaCh0aGlzLnByb3BlbnNpdHlVcmxfKHVybCksIGluaXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGNvbnRleHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNlbmRFdmVudF8oZXZlbnQsIGNvbnRleHQpIHtcbiAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgIH0pO1xuICAgIGxldCBldmVudEluZm8gPSB0aGlzLnB1YmxpY2F0aW9uSWRfICsgJzonICsgZXZlbnQ7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgIGV2ZW50SW5mbyA9IGV2ZW50SW5mbyArICc6JyArIGVuY29kZVVSSUNvbXBvbmVudChjb250ZXh0KTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gYWRzVXJsKCcvc3Vib3B0L2RhdGE/ZXZlbnRzPScpICsgZW5jb2RlVVJJQ29tcG9uZW50KGV2ZW50SW5mbyk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hlcl8uZmV0Y2godGhpcy5wcm9wZW5zaXR5VXJsXyh1cmwpLCBpbml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50fSBldmVudFxuICAgKi9cbiAgaGFuZGxlQ2xpZW50RXZlbnRfKGV2ZW50KSB7XG4gICAgLyoqXG4gICAgICogRG9lcyBhIGxpdmUgY2hlY2sgb2YgdGhlIGNvbmZpZyBiZWNhdXNlIHdlIGRvbid0IGtub3cgd2hlbiBwdWJsaXNoZXJcbiAgICAgKiBjYWxsZWQgdG8gZW5hYmxlIChpdCBtYXkgYmUgYWZ0ZXIgYSBjb25zZW50IGRpYWxvZykuXG4gICAgICovXG4gICAgaWYgKFxuICAgICAgIXRoaXMuZGVwc18uY29uZmlnKCkuZW5hYmxlUHJvcGVuc2l0eSAmJlxuICAgICAgZXZlbnQuZXZlbnRPcmlnaW5hdG9yICE9PSBFdmVudE9yaWdpbmF0b3IuUFJPUEVOU0lUWV9DTElFTlRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZXZlbnRUeXBlID09PSBBbmFseXRpY3NFdmVudC5FVkVOVF9TVUJTQ1JJUFRJT05fU1RBVEUpIHtcbiAgICAgIHRoaXMuc2VuZFN1YnNjcmlwdGlvblN0YXRlKFxuICAgICAgICBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVyc1snc3RhdGUnXSxcbiAgICAgICAgZXZlbnQuYWRkaXRpb25hbFBhcmFtZXRlcnNbJ3Byb2R1Y3RzT3JTa3VzJ11cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByb3BFdmVudCA9IGFuYWx5dGljc0V2ZW50VG9QdWJsaXNoZXJFdmVudChldmVudC5ldmVudFR5cGUpO1xuICAgIGlmIChwcm9wRXZlbnQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgYWRkaXRpb25hbFBhcmFtZXRlcnMgPSBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVycztcbiAgICAvLyBUaGUgRXZlbnRQYXJhbXMgb2JqZWN0IGlzIHByaXZhdGUgdG8gU3dHIGFuYWx5dGljcy4gIERvIG5vdCBzZW5kLlxuICAgIGlmIChhZGRpdGlvbmFsUGFyYW1ldGVycyBpbnN0YW5jZW9mIEV2ZW50UGFyYW1zKSB7XG4gICAgICBhZGRpdGlvbmFsUGFyYW1ldGVycyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGlzQm9vbGVhbihldmVudC5pc0Zyb21Vc2VyQWN0aW9uKSkge1xuICAgICAgaWYgKCFpc09iamVjdChhZGRpdGlvbmFsUGFyYW1ldGVycykpIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzWydpc19hY3RpdmUnXSA9IGV2ZW50LmlzRnJvbVVzZXJBY3Rpb247XG4gICAgfVxuICAgIHRoaXMuc2VuZEV2ZW50XyhcbiAgICAgIHByb3BFdmVudCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KC8qKiBAdHlwZSB7P0pzb25PYmplY3R9ICovIChhZGRpdGlvbmFsUGFyYW1ldGVycykpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0pzb25PYmplY3R9IHJlc3BvbnNlXG4gICAqIEByZXR1cm4geyEuLi9hcGkvcHJvcGVuc2l0eS1hcGkuUHJvcGVuc2l0eVNjb3JlfVxuICAgKi9cbiAgcGFyc2VQcm9wZW5zaXR5UmVzcG9uc2VfKHJlc3BvbnNlKSB7XG4gICAgbGV0IGRlZmF1bHRTY29yZSA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmV9ICovICh7fSk7XG4gICAgaWYgKCFyZXNwb25zZVsnaGVhZGVyJ10pIHtcbiAgICAgIGRlZmF1bHRTY29yZSA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmV9ICovICh7XG4gICAgICAgIGhlYWRlcjoge29rOiBmYWxzZX0sXG4gICAgICAgIGJvZHk6IHtlcnJvcjogJ05vIHZhbGlkIHJlc3BvbnNlJ30sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZhdWx0U2NvcmU7XG4gICAgfVxuICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlWydoZWFkZXInXTtcbiAgICBsZXQgc2NvcmVEZXRhaWxzID0gdW5kZWZpbmVkO1xuICAgIGlmIChzdGF0dXNbJ29rJ10pIHtcbiAgICAgIGNvbnN0IHNjb3JlcyA9IHJlc3BvbnNlWydzY29yZXMnXTtcbiAgICAgIHNjb3JlRGV0YWlscyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY29yZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc2NvcmVzW2ldO1xuICAgICAgICBjb25zdCBzY29yZVN0YXR1cyA9ICEhcmVzdWx0WydzY29yZSddO1xuICAgICAgICBsZXQgc2NvcmVEZXRhaWw7XG4gICAgICAgIGlmIChzY29yZVN0YXR1cykge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gLyoqIEB0eXBlIHshLi4vYXBpL3Byb3BlbnNpdHktYXBpLlNjb3JlfSAqLyAoe1xuICAgICAgICAgICAgdmFsdWU6IHJlc3VsdFsnc2NvcmUnXSxcbiAgICAgICAgICAgIGJ1Y2tldGVkOiByZXN1bHRbJ3Njb3JlX3R5cGUnXSA9PSAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNjb3JlRGV0YWlsID0gLyoqIEB0eXBlIHshLi4vYXBpL3Byb3BlbnNpdHktYXBpLkJvZHl9ICovICh7XG4gICAgICAgICAgICBwcm9kdWN0OiByZXN1bHRbJ3Byb2R1Y3QnXSxcbiAgICAgICAgICAgIHNjb3JlOiB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzY29yZURldGFpbCA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Cb2R5fSAqLyAoe1xuICAgICAgICAgICAgcHJvZHVjdDogcmVzdWx0Wydwcm9kdWN0J10sXG4gICAgICAgICAgICBlcnJvcjogcmVzdWx0WydlcnJvcl9tZXNzYWdlJ10sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2NvcmVEZXRhaWxzLnB1c2goc2NvcmVEZXRhaWwpO1xuICAgICAgfVxuICAgICAgaWYgKHNjb3JlRGV0YWlscykge1xuICAgICAgICBkZWZhdWx0U2NvcmUgPSAvKiogQHR5cGUgeyEuLi9hcGkvcHJvcGVuc2l0eS1hcGkuUHJvcGVuc2l0eVNjb3JlfSAqLyAoe1xuICAgICAgICAgIGhlYWRlcjoge29rOiB0cnVlfSxcbiAgICAgICAgICBib2R5OiB7c2NvcmVzOiBzY29yZURldGFpbHN9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZhdWx0U2NvcmU7XG4gICAgfVxuICAgIGRlZmF1bHRTY29yZSA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmV9ICovICh7XG4gICAgICBoZWFkZXI6IHtvazogZmFsc2V9LFxuICAgICAgYm9keToge2Vycm9yOiByZXNwb25zZVsnZXJyb3InXX0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmF1bHRTY29yZTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZmVycmVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPC4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmU+fVxuICAgKi9cbiAgZ2V0UHJvcGVuc2l0eShyZWZlcnJlciwgdHlwZSkge1xuICAgIGNvbnN0IGluaXQgPSAvKiogQHR5cGUgeyEuLi91dGlscy94aHIuRmV0Y2hJbml0RGVmfSAqLyAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgfSk7XG4gICAgY29uc3QgdXJsID1cbiAgICAgIGFkc1VybCgnL3N1Ym9wdC9wdHM/cHJvZHVjdHM9JykgK1xuICAgICAgdGhpcy5wdWJsaWNhdGlvbklkXyArXG4gICAgICAnJnR5cGU9JyArXG4gICAgICB0eXBlICtcbiAgICAgICcmcmVmPScgK1xuICAgICAgcmVmZXJyZXI7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hlcl9cbiAgICAgIC5mZXRjaCh0aGlzLnByb3BlbnNpdHlVcmxfKHVybCksIGluaXQpXG4gICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0Lmpzb24oKSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VQcm9wZW5zaXR5UmVzcG9uc2VfKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgKiBhcyBQcm9wZW5zaXR5QXBpIGZyb20gJy4uL2FwaS9wcm9wZW5zaXR5LWFwaSc7XG5pbXBvcnQge0V2ZW50LCBTdWJzY3JpcHRpb25TdGF0ZX0gZnJvbSAnLi4vYXBpL2xvZ2dlci1hcGknO1xuaW1wb3J0IHtQcm9wZW5zaXR5U2VydmVyfSBmcm9tICcuL3Byb3BlbnNpdHktc2VydmVyJztcbmltcG9ydCB7aXNPYmplY3QsIGlzRW51bVZhbHVlfSBmcm9tICcuLi91dGlscy90eXBlcyc7XG5pbXBvcnQge0V2ZW50T3JpZ2luYXRvcn0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7cHVibGlzaGVyRXZlbnRUb0FuYWx5dGljc0V2ZW50fSBmcm9tICcuL2V2ZW50LXR5cGUtbWFwcGluZyc7XG5pbXBvcnQge2lzQm9vbGVhbn0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnO1xuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtQcm9wZW5zaXR5QXBpLlByb3BlbnNpdHlBcGl9XG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9wZW5zaXR5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqXG4gICAqIElNUE9SVEFOVDogZGVwcyBtYXkgbm90IGJlIGZ1bGwgaW5pdGlhbGl6ZWQgY29uZmlnIGFuZCBwYWdlQ29uZmlnIGFyZVxuICAgKiBhdmFpbGFibGUgaW1tZWRpYXRlbHksIG90aGVyIGZ1bmN0aW9uIHNob3VsZCBiZSBnYXRlZCBvbiBhIHJlYWR5IHByb21pc2UuXG4gICAqICNUT0RPKGpwZXR0aXR0KSBzd2l0Y2ggcmVmYWN0b3IgdG8gdGFrZSBvdXQgdGhlIHdpbiBhbmQgdXNlIGRlcHMgdG8gZ2V0IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBkZXBzLCBmZXRjaGVyKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG4gICAgLyoqIEBwcml2YXRlIHtQcm9wZW5zaXR5U2VydmVyfSAqL1xuICAgIHRoaXMucHJvcGVuc2l0eVNlcnZlcl8gPSBuZXcgUHJvcGVuc2l0eVNlcnZlcih3aW4sIGRlcHMsIGZldGNoZXIpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuQ2xpZW50RXZlbnRNYW5hZ2VyQXBpfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNlbmRTdWJzY3JpcHRpb25TdGF0ZShzdGF0ZSwganNvblByb2R1Y3RzKSB7XG4gICAgaWYgKCFPYmplY3QudmFsdWVzKFN1YnNjcmlwdGlvblN0YXRlKS5pbmNsdWRlcyhzdGF0ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdWJzY3JpcHRpb24gc3RhdGUgcHJvdmlkZWQnKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKFN1YnNjcmlwdGlvblN0YXRlLlNVQlNDUklCRVIgPT0gc3RhdGUgfHxcbiAgICAgICAgU3Vic2NyaXB0aW9uU3RhdGUuUEFTVF9TVUJTQ1JJQkVSID09IHN0YXRlKSAmJlxuICAgICAgIWpzb25Qcm9kdWN0c1xuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnRW50aXRsZW1lbnRzIG11c3QgYmUgcHJvdmlkZWQgZm9yIHVzZXJzIHdpdGgnICtcbiAgICAgICAgICAnIGFjdGl2ZSBvciBleHBpcmVkIHN1YnNjcmlwdGlvbnMnXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoanNvblByb2R1Y3RzICYmICFpc09iamVjdChqc29uUHJvZHVjdHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VudGl0bGVtZW50cyBtdXN0IGJlIGFuIE9iamVjdCcpO1xuICAgIH1cbiAgICBsZXQgcHJvZHVjdHNPclNrdXMgPSBudWxsO1xuICAgIGlmIChqc29uUHJvZHVjdHMpIHtcbiAgICAgIHByb2R1Y3RzT3JTa3VzID0gSlNPTi5zdHJpbmdpZnkoanNvblByb2R1Y3RzKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wZW5zaXR5U2VydmVyXy5zZW5kU3Vic2NyaXB0aW9uU3RhdGUoc3RhdGUsIHByb2R1Y3RzT3JTa3VzKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0UHJvcGVuc2l0eSh0eXBlKSB7XG4gICAgaWYgKHR5cGUgJiYgIU9iamVjdC52YWx1ZXMoUHJvcGVuc2l0eUFwaS5Qcm9wZW5zaXR5VHlwZSkuaW5jbHVkZXModHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcm9wZW5zaXR5IHR5cGUgcmVxdWVzdGVkJyk7XG4gICAgfVxuICAgIGlmICghdHlwZSkge1xuICAgICAgdHlwZSA9IFByb3BlbnNpdHlBcGkuUHJvcGVuc2l0eVR5cGUuR0VORVJBTDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvcGVuc2l0eVNlcnZlcl8uZ2V0UHJvcGVuc2l0eShcbiAgICAgIHRoaXMud2luXy5kb2N1bWVudC5yZWZlcnJlcixcbiAgICAgIHR5cGVcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZW5kRXZlbnQodXNlckV2ZW50KSB7XG4gICAgY29uc3QgYW5hbHl0aWNzRXZlbnQgPSBwdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnQodXNlckV2ZW50Lm5hbWUpO1xuICAgIGxldCBkYXRhID0gbnVsbDtcbiAgICBpZiAoIWlzRW51bVZhbHVlKEV2ZW50LCB1c2VyRXZlbnQubmFtZSkgfHwgIWFuYWx5dGljc0V2ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdXNlciBldmVudCBwcm92aWRlZCgnICsgdXNlckV2ZW50Lm5hbWUgKyAnKScpO1xuICAgIH1cblxuICAgIGlmICh1c2VyRXZlbnQuZGF0YSkge1xuICAgICAgaWYgKCFpc09iamVjdCh1c2VyRXZlbnQuZGF0YSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBkYXRhIG11c3QgYmUgYW4gT2JqZWN0KCcgKyB1c2VyRXZlbnQuZGF0YSArICcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0ge307XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgdXNlckV2ZW50LmRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0Jvb2xlYW4odXNlckV2ZW50LmFjdGl2ZSkpIHtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBkYXRhID0ge307XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHsnaXNfYWN0aXZlJzogdXNlckV2ZW50LmFjdGl2ZX0pO1xuICAgIH0gZWxzZSBpZiAodXNlckV2ZW50LmFjdGl2ZSAhPSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IGFjdGl2ZSBtdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dFdmVudCh7XG4gICAgICBldmVudFR5cGU6IGFuYWx5dGljc0V2ZW50LFxuICAgICAgZXZlbnRPcmlnaW5hdG9yOiBFdmVudE9yaWdpbmF0b3IuUFJPUEVOU0lUWV9DTElFTlQsXG4gICAgICBpc0Zyb21Vc2VyQWN0aW9uOiB1c2VyRXZlbnQuYWN0aXZlLFxuICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnM6IGRhdGEsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBY3Rpdml0eVBvcnRzfSBmcm9tICcuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMnO1xuaW1wb3J0IHtBbmFseXRpY3NFdmVudH0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7QnV0dG9uQXBpfSBmcm9tICcuL2J1dHRvbi1hcGknO1xuaW1wb3J0IHtDU1MgYXMgU1dHX0RJQUxPR30gZnJvbSAnLi4vLi4vYnVpbGQvY3NzL2NvbXBvbmVudHMvZGlhbG9nLmNzcyc7XG5pbXBvcnQge0NhbGxiYWNrc30gZnJvbSAnLi9jYWxsYmFja3MnO1xuaW1wb3J0IHtDb250cmlidXRpb25zRmxvd30gZnJvbSAnLi9jb250cmlidXRpb25zLWZsb3cnO1xuaW1wb3J0IHtEZWZlcnJlZEFjY291bnRGbG93fSBmcm9tICcuL2RlZmVycmVkLWFjY291bnQtZmxvdyc7XG5pbXBvcnQge0RlcHNEZWZ9IGZyb20gJy4vZGVwcyc7XG5pbXBvcnQge0RpYWxvZ01hbmFnZXJ9IGZyb20gJy4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXInO1xuaW1wb3J0IHtEb2MsIHJlc29sdmVEb2N9IGZyb20gJy4uL21vZGVsL2RvYyc7XG5pbXBvcnQge0VudGl0bGVtZW50c01hbmFnZXJ9IGZyb20gJy4vZW50aXRsZW1lbnRzLW1hbmFnZXInO1xuaW1wb3J0IHtFeHBlcmltZW50RmxhZ3N9IGZyb20gJy4vZXhwZXJpbWVudC1mbGFncyc7XG5pbXBvcnQge0ZldGNoZXIsIFhockZldGNoZXJ9IGZyb20gJy4vZmV0Y2hlcic7XG5pbXBvcnQge0pzRXJyb3J9IGZyb20gJy4vanNlcnJvcic7XG5pbXBvcnQge1xuICBMaW5rQ29tcGxldGVGbG93LFxuICBMaW5rYmFja0Zsb3csXG4gIExpbmtTYXZlRmxvdyxcbn0gZnJvbSAnLi9saW5rLWFjY291bnRzLWZsb3cnO1xuaW1wb3J0IHtMb2dpblByb21wdEFwaX0gZnJvbSAnLi9sb2dpbi1wcm9tcHQtYXBpJztcbmltcG9ydCB7TG9naW5Ob3RpZmljYXRpb25BcGl9IGZyb20gJy4vbG9naW4tbm90aWZpY2F0aW9uLWFwaSc7XG5pbXBvcnQge1BheUNsaWVudH0gZnJvbSAnLi9wYXktY2xpZW50JztcbmltcG9ydCB7V2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cEFwaX0gZnJvbSAnLi93YWl0LWZvci1zdWJzY3JpcHRpb24tbG9va3VwLWFwaSc7XG5pbXBvcnQge09mZmVyc0FwaX0gZnJvbSAnLi9vZmZlcnMtYXBpJztcbmltcG9ydCB7T2ZmZXJzRmxvdywgU3Vic2NyaWJlT3B0aW9uRmxvdywgQWJicnZPZmZlckZsb3d9IGZyb20gJy4vb2ZmZXJzLWZsb3cnO1xuaW1wb3J0IHtQYWdlQ29uZmlnfSBmcm9tICcuLi9tb2RlbC9wYWdlLWNvbmZpZyc7XG5pbXBvcnQge1xuICBQYWdlQ29uZmlnUmVzb2x2ZXIsXG4gIGdldENvbnRyb2xGbGFnLFxufSBmcm9tICcuLi9tb2RlbC9wYWdlLWNvbmZpZy1yZXNvbHZlcic7XG5pbXBvcnQge1BheVN0YXJ0RmxvdywgUGF5Q29tcGxldGVGbG93fSBmcm9tICcuL3BheS1mbG93JztcbmltcG9ydCB7UHJlY29ubmVjdH0gZnJvbSAnLi4vdXRpbHMvcHJlY29ubmVjdCc7XG5pbXBvcnQge1N0b3JhZ2V9IGZyb20gJy4vc3RvcmFnZSc7XG5pbXBvcnQge1xuICBTdWJzY3JpcHRpb25zLFxuICBXaW5kb3dPcGVuTW9kZSxcbiAgZGVmYXVsdENvbmZpZyxcbiAgUHJvZHVjdFR5cGUsXG59IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7ZGVidWdMb2d9IGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQge2luamVjdFN0eWxlU2hlZXQsIGlzRWRnZUJyb3dzZXJ9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4uL3V0aWxzL3R5cGVzJztcbmltcG9ydCB7aXNFeHBlcmltZW50T259IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtzZXRFeHBlcmltZW50fSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7QW5hbHl0aWNzU2VydmljZX0gZnJvbSAnLi9hbmFseXRpY3Mtc2VydmljZSc7XG5pbXBvcnQge0FuYWx5dGljc01vZGV9IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7UHJvcGVuc2l0eX0gZnJvbSAnLi9wcm9wZW5zaXR5JztcbmltcG9ydCB7Q2xpZW50RXZlbnRNYW5hZ2VyfSBmcm9tICcuL2NsaWVudC1ldmVudC1tYW5hZ2VyJztcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7aXNCb29sZWFufSBmcm9tICcuLi91dGlscy90eXBlcyc7XG5cbmNvbnN0IFJVTlRJTUVfUFJPUCA9ICdTV0cnO1xuY29uc3QgUlVOVElNRV9MRUdBQ1lfUFJPUCA9ICdTVUJTQ1JJUFRJT05TJzsgLy8gTUlHUkFURVxuXG4vKiogQHByaXZhdGUgeyFSdW50aW1lfSAqL1xubGV0IHJ1bnRpbWVJbnN0YW5jZV87XG5cbi8qKlxuICogUmV0dXJucyBydW50aW1lIGZvciB0ZXN0aW5nIGlmIGF2YWlsYWJsZS4gVGhyb3dzIGlmIHRoZSBydW50aW1lIGlzIG5vdFxuICogaW5pdGlhbGl6ZWQgeWV0LlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKiBAcmV0dXJuIHshUnVudGltZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJ1bnRpbWUoKSB7XG4gIGFzc2VydChydW50aW1lSW5zdGFuY2VfLCAnbm90IGluaXRpYWxpemVkIHlldCcpO1xuICByZXR1cm4gcnVudGltZUluc3RhbmNlXztcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFJ1bnRpbWUod2luKSB7XG4gIGlmICh3aW5bUlVOVElNRV9QUk9QXSAmJiAhaXNBcnJheSh3aW5bUlVOVElNRV9QUk9QXSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBydW50aW1lID0gbmV3IFJ1bnRpbWUod2luKTtcblxuICBjb25zdCB3YWl0aW5nQXJyYXkgPSBbXS5jb25jYXQod2luW1JVTlRJTUVfUFJPUF0sIHdpbltSVU5USU1FX0xFR0FDWV9QUk9QXSk7XG5cbiAgLy8gUHVibGljIHJ1bnRpbWUuXG4gIGNvbnN0IHB1YmxpY1J1bnRpbWUgPSBjcmVhdGVQdWJsaWNSdW50aW1lKHJ1bnRpbWUpO1xuXG4gIGNvbnN0IGRlcGVuZGVuY3lJbnN0YWxsZXIgPSB7fTtcblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighU3Vic2NyaXB0aW9ucyl9IGNhbGxiYWNrXG4gICAqL1xuICBmdW5jdGlvbiBwdXNoRGVwZW5kZW5jeShjYWxsYmFjaykge1xuICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcnVudGltZS53aGVuUmVhZHkoKS50aGVuKCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKHB1YmxpY1J1bnRpbWUpO1xuICAgIH0pO1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXBlbmRlbmN5SW5zdGFsbGVyLCAncHVzaCcsIHtcbiAgICBnZXQ6ICgpID0+IHB1c2hEZXBlbmRlbmN5LFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gIH0pO1xuICB3aW5bUlVOVElNRV9QUk9QXSA9IGRlcGVuZGVuY3lJbnN0YWxsZXI7XG4gIHdpbltSVU5USU1FX0xFR0FDWV9QUk9QXSA9IGRlcGVuZGVuY3lJbnN0YWxsZXI7XG4gIGlmICh3YWl0aW5nQXJyYXkpIHtcbiAgICB3YWl0aW5nQXJyYXkuZm9yRWFjaChwdXNoRGVwZW5kZW5jeSk7XG4gIH1cbiAgcnVudGltZUluc3RhbmNlXyA9IHJ1bnRpbWU7XG4gIHJ1bnRpbWUuc3RhcnRTdWJzY3JpcHRpb25zRmxvd0lmTmVlZGVkKCk7XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge1N1YnNjcmlwdGlvbnN9XG4gKi9cbmV4cG9ydCBjbGFzcyBSdW50aW1lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gcmVzb2x2ZURvYyh3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeV8gPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnByb2R1Y3RPclB1YmxpY2F0aW9uSWRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Db25maWd9ICovXG4gICAgdGhpcy5jb25maWdfID0ge307XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5jb21taXR0ZWRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigoIUNvbmZpZ3VyZWRSdW50aW1lfCFQcm9taXNlKSl9ICovXG4gICAgdGhpcy5jb25maWd1cmVkUmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPCFDb25maWd1cmVkUnVudGltZT59ICovXG4gICAgdGhpcy5jb25maWd1cmVkUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuY29uZmlndXJlZFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9QYWdlQ29uZmlnUmVzb2x2ZXJ9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnUmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFCdXR0b25BcGl9ICovXG4gICAgdGhpcy5idXR0b25BcGlfID0gbmV3IEJ1dHRvbkFwaSh0aGlzLmRvY18sIHRoaXMuY29uZmlndXJlZFByb21pc2VfKTtcbiAgICB0aGlzLmJ1dHRvbkFwaV8uaW5pdCgpOyAvLyBJbmplY3RzIHN3Zy1idXR0b24gc3R5bGVzaGVldC5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkeV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBjb21taXRcbiAgICogQHJldHVybiB7IVByb21pc2U8IUNvbmZpZ3VyZWRSdW50aW1lPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbmZpZ3VyZWRfKGNvbW1pdCkge1xuICAgIGlmICghdGhpcy5jb21taXR0ZWRfICYmIGNvbW1pdCkge1xuICAgICAgdGhpcy5jb21taXR0ZWRfID0gdHJ1ZTtcbiAgICAgIC8qKiBAdHlwZSB7IVByb21pc2U8IVBhZ2VDb25maWc+fSAqL1xuICAgICAgbGV0IHBhZ2VDb25maWdQcm9taXNlO1xuICAgICAgaWYgKHRoaXMucHJvZHVjdE9yUHVibGljYXRpb25JZF8pIHtcbiAgICAgICAgcGFnZUNvbmZpZ1Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgICAgbmV3IFBhZ2VDb25maWcodGhpcy5wcm9kdWN0T3JQdWJsaWNhdGlvbklkXywgLyogbG9ja2VkICovIGZhbHNlKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYWdlQ29uZmlnUmVzb2x2ZXJfID0gbmV3IFBhZ2VDb25maWdSZXNvbHZlcih0aGlzLmRvY18pO1xuICAgICAgICBwYWdlQ29uZmlnUHJvbWlzZSA9IHRoaXMucGFnZUNvbmZpZ1Jlc29sdmVyX1xuICAgICAgICAgIC5yZXNvbHZlQ29uZmlnKClcbiAgICAgICAgICAudGhlbihjb25maWcgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYWdlQ29uZmlnUmVzb2x2ZXJfID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBwYWdlQ29uZmlnUHJvbWlzZS50aGVuKFxuICAgICAgICBwYWdlQ29uZmlnID0+IHtcbiAgICAgICAgICB0aGlzLmNvbmZpZ3VyZWRSZXNvbHZlcl8oXG4gICAgICAgICAgICBuZXcgQ29uZmlndXJlZFJ1bnRpbWUoXG4gICAgICAgICAgICAgIHRoaXMuZG9jXyxcbiAgICAgICAgICAgICAgcGFnZUNvbmZpZyxcbiAgICAgICAgICAgICAgLyogb3B0X2ludGVnciAqLyB7Y29uZmlnUHJvbWlzZTogdGhpcy5jb25maWd1cmVkUHJvbWlzZV99LFxuICAgICAgICAgICAgICB0aGlzLmNvbmZpZ19cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuY29uZmlndXJlZFJlc29sdmVyXyA9IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgICAgdGhpcy5jb25maWd1cmVkUmVzb2x2ZXJfKFByb21pc2UucmVqZWN0KHJlYXNvbikpO1xuICAgICAgICAgIHRoaXMuY29uZmlndXJlZFJlc29sdmVyXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChjb21taXQgJiYgdGhpcy5wYWdlQ29uZmlnUmVzb2x2ZXJfKSB7XG4gICAgICB0aGlzLnBhZ2VDb25maWdSZXNvbHZlcl8uY2hlY2soKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZFByb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgc3Vic2NyaXB0aW9uIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbmQgdGhlIHBhZ2UgaXNcbiAgICogY29uZmlndXJlZCB0byBzdGFydCBpdCBhdXRvbWF0aWNhbGx5LlxuICAgKlxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZX1cbiAgICogQHBhY2thZ2VcbiAgICovXG4gIHN0YXJ0U3Vic2NyaXB0aW9uc0Zsb3dJZk5lZWRlZCgpIHtcbiAgICBjb25zdCBjb250cm9sID0gZ2V0Q29udHJvbEZsYWcodGhpcy53aW5fLmRvY3VtZW50KTtcbiAgICBkZWJ1Z0xvZyhjb250cm9sLCAnbW9kZScpO1xuICAgIGlmIChjb250cm9sID09ICdtYW51YWwnKSB7XG4gICAgICAvLyBcIlNraXBwaW5nIGF1dG9tYXRpYyBzdGFydCBiZWNhdXNlIGNvbnRyb2wgZmxhZyBpcyBzZXQgdG8gXCJtYW51YWxcIi5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGFydCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpbml0KHByb2R1Y3RPclB1YmxpY2F0aW9uSWQpIHtcbiAgICBhc3NlcnQoIXRoaXMuY29tbWl0dGVkXywgJ2FscmVhZHkgY29uZmlndXJlZCcpO1xuICAgIHRoaXMucHJvZHVjdE9yUHVibGljYXRpb25JZF8gPSBwcm9kdWN0T3JQdWJsaWNhdGlvbklkO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb25maWd1cmUoY29uZmlnKSB7XG4gICAgLy8gQWNjdW11bGF0ZSBjb25maWcgZm9yIHN0YXJ0dXAuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZ18sIGNvbmZpZyk7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4ocnVudGltZSA9PiBydW50aW1lLmNvbmZpZ3VyZShjb25maWcpKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+IHJ1bnRpbWUuc3RhcnQoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHJlc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PiBydW50aW1lLnJlc2V0KCkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjbGVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKHJ1bnRpbWUgPT4gcnVudGltZS5jbGVhcigpKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0RW50aXRsZW1lbnRzKG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleSkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5nZXRFbnRpdGxlbWVudHMob3B0X2VuY3J5cHRlZERvY3VtZW50S2V5KVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLnNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0T2ZmZXJzKG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLmdldE9mZmVycyhvcHRfb3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93T2ZmZXJzKG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLnNob3dPZmZlcnMob3B0X29wdGlvbnMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd1VwZGF0ZU9mZmVycyhvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zaG93VXBkYXRlT2ZmZXJzKG9wdF9vcHRpb25zKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dTdWJzY3JpYmVPcHRpb24ob3B0X29wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKHJ1bnRpbWUgPT5cbiAgICAgIHJ1bnRpbWUuc2hvd1N1YnNjcmliZU9wdGlvbihvcHRfb3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93QWJicnZPZmZlcihvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zaG93QWJicnZPZmZlcihvcHRfb3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93Q29udHJpYnV0aW9uT3B0aW9ucyhvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zaG93Q29udHJpYnV0aW9uT3B0aW9ucyhvcHRfb3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB3YWl0Rm9yU3Vic2NyaXB0aW9uTG9va3VwKGFjY291bnRQcm9taXNlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLndhaXRGb3JTdWJzY3JpcHRpb25Mb29rdXAoYWNjb3VudFByb21pc2UpXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3QoY2FsbGJhY2spXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25TdWJzY3JpYmVSZXNwb25zZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKGZhbHNlKS50aGVuKHJ1bnRpbWUgPT5cbiAgICAgIHJ1bnRpbWUuc2V0T25TdWJzY3JpYmVSZXNwb25zZShjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdWJzY3JpYmUoc2t1KSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+IHJ1bnRpbWUuc3Vic2NyaWJlKHNrdSkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB1cGRhdGVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS51cGRhdGVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uUmVxdWVzdClcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkNvbnRyaWJ1dGlvblJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zZXRPbkNvbnRyaWJ1dGlvblJlc3BvbnNlKGNhbGxiYWNrKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbnRyaWJ1dGUoc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLmNvbnRyaWJ1dGUoc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0KVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbXBsZXRlRGVmZXJyZWRBY2NvdW50Q3JlYXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKHJ1bnRpbWUgPT5cbiAgICAgIHJ1bnRpbWUuY29tcGxldGVEZWZlcnJlZEFjY291bnRDcmVhdGlvbihvcHRfb3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkxvZ2luUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKGZhbHNlKS50aGVuKHJ1bnRpbWUgPT5cbiAgICAgIHJ1bnRpbWUuc2V0T25Mb2dpblJlcXVlc3QoY2FsbGJhY2spXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25MaW5rQ29tcGxldGUoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLnNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGxpbmtBY2NvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PiBydW50aW1lLmxpbmtBY2NvdW50KCkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRmxvd0NhbmNlbGVkKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4ocnVudGltZSA9PlxuICAgICAgcnVudGltZS5zZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzYXZlU3Vic2NyaXB0aW9uKHNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKHJ1bnRpbWUgPT4ge1xuICAgICAgcmV0dXJuIHJ1bnRpbWUuc2F2ZVN1YnNjcmlwdGlvbihzYXZlU3Vic2NyaXB0aW9uUmVxdWVzdENhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0xvZ2luUHJvbXB0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PiB7XG4gICAgICByZXR1cm4gcnVudGltZS5zaG93TG9naW5Qcm9tcHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0xvZ2luTm90aWZpY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4ocnVudGltZSA9PiB7XG4gICAgICByZXR1cm4gcnVudGltZS5zaG93TG9naW5Ob3RpZmljYXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY3JlYXRlQnV0dG9uKG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5idXR0b25BcGlfLmNyZWF0ZShvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXR0YWNoU21hcnRCdXR0b24oYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+XG4gICAgICBydW50aW1lLmF0dGFjaFNtYXJ0QnV0dG9uKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIG9wdF9jYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhdHRhY2hCdXR0b24oYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uQXBpXy5hdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0UHJvcGVuc2l0eU1vZHVsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKHJ1bnRpbWUgPT4ge1xuICAgICAgcmV0dXJuIHJ1bnRpbWUuZ2V0UHJvcGVuc2l0eU1vZHVsZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRMb2dnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbihydW50aW1lID0+IHJ1bnRpbWUuZ2V0TG9nZ2VyKCkpO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge0RlcHNEZWZ9XG4gKiBAaW1wbGVtZW50cyB7U3Vic2NyaXB0aW9uc31cbiAqL1xuZXhwb3J0IGNsYXNzIENvbmZpZ3VyZWRSdW50aW1lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd3whRG9jdW1lbnR8IURvY30gd2luT3JEb2NcbiAgICogQHBhcmFtIHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ30gcGFnZUNvbmZpZ1xuICAgKiBAcGFyYW0ge3tcbiAgICogICAgIGZldGNoZXI6ICghRmV0Y2hlcnx1bmRlZmluZWQpLFxuICAgKiAgICAgY29uZmlnUHJvbWlzZTogKCFQcm9taXNlfHVuZGVmaW5lZCksXG4gICAqICAgfT19IG9wdF9pbnRlZ3JcbiAgICogQHBhcmFtIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnPX0gb3B0X2NvbmZpZ1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luT3JEb2MsIHBhZ2VDb25maWcsIG9wdF9pbnRlZ3IsIG9wdF9jb25maWcpIHtcbiAgICBvcHRfaW50ZWdyID0gb3B0X2ludGVnciB8fCB7fTtcbiAgICBvcHRfaW50ZWdyLmNvbmZpZ1Byb21pc2UgPSBvcHRfaW50ZWdyLmNvbmZpZ1Byb21pc2UgfHwgUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IG5ldyBDbGllbnRFdmVudE1hbmFnZXIob3B0X2ludGVnci5jb25maWdQcm9taXNlKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gcmVzb2x2ZURvYyh3aW5PckRvYyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHRoaXMuZG9jXy5nZXRXaW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Db25maWd9ICovXG4gICAgdGhpcy5jb25maWdfID0gZGVmYXVsdENvbmZpZygpO1xuXG4gICAgaWYgKGlzRWRnZUJyb3dzZXIodGhpcy53aW5fKSkge1xuICAgICAgLy8gVE9ETyhkdm95dGVua28sIGIvMTIwNjA3MzQzKTogRmluZCBhIHdheSB0byByZW1vdmUgdGhpcyByZXN0cmljdGlvblxuICAgICAgLy8gb3IgbW92ZSBpdCB0byBXZWIgQWN0aXZpdGllcy5cbiAgICAgIHRoaXMuY29uZmlnXy53aW5kb3dPcGVuTW9kZSA9IFdpbmRvd09wZW5Nb2RlLlJFRElSRUNUO1xuICAgIH1cbiAgICBpZiAob3B0X2NvbmZpZykge1xuICAgICAgdGhpcy5jb25maWd1cmVfKG9wdF9jb25maWcpO1xuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSAqL1xuICAgIHRoaXMucGFnZUNvbmZpZ18gPSBwYWdlQ29uZmlnO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5kb2N1bWVudFBhcnNlZF8gPSB0aGlzLmRvY18ud2hlblJlYWR5KCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSnNFcnJvcn0gKi9cbiAgICB0aGlzLmpzZXJyb3JfID0gbmV3IEpzRXJyb3IodGhpcy5kb2NfKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFGZXRjaGVyfSAqL1xuICAgIHRoaXMuZmV0Y2hlcl8gPSBvcHRfaW50ZWdyLmZldGNoZXIgfHwgbmV3IFhockZldGNoZXIodGhpcy53aW5fKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFTdG9yYWdlfSAqL1xuICAgIHRoaXMuc3RvcmFnZV8gPSBuZXcgU3RvcmFnZSh0aGlzLndpbl8pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IG5ldyBEaWFsb2dNYW5hZ2VyKHRoaXMuZG9jXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IG5ldyBBY3Rpdml0eVBvcnRzKHRoaXMud2luXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUGF5Q2xpZW50fSAqL1xuICAgIHRoaXMucGF5Q2xpZW50XyA9IG5ldyBQYXlDbGllbnQoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyX1xuICAgICk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQ2FsbGJhY2tzfSAqL1xuICAgIHRoaXMuY2FsbGJhY2tzXyA9IG5ldyBDYWxsYmFja3MoKTtcblxuICAgIC8vTk9URTogJ3RoaXMnIGlzIHBhc3NlZCBpbiBhcyBhIERlcHNEZWYuICBEbyBub3QgcGFzcyBpbiAndGhpcycgYmVmb3JlXG4gICAgLy9hbmFseXRpY3Mgc2VydmljZSBhbmQgZW50aXRsZW1lbnRzIG1hbmFnZXIgYXJlIGNvbnN0cnVjdGVkIHVubGVzc1xuICAgIC8veW91IGFyZSBjZXJ0YWluIHRoZXkgZG8gbm90IHJlbHkgb24gdGhlbSBiZWNhdXNlIHRoZXkgYXJlIHBhcnQgb2YgdGhhdFxuICAgIC8vZGVmaW5pdGlvbi5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshTG9nZ2VyfSAqL1xuICAgIHRoaXMubG9nZ2VyXyA9IG5ldyBMb2dnZXIodGhpcyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQW5hbHl0aWNzU2VydmljZX0gKi9cbiAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfID0gbmV3IEFuYWx5dGljc1NlcnZpY2UodGhpcyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRW50aXRsZW1lbnRzTWFuYWdlcn0gKi9cbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfID0gbmV3IEVudGl0bGVtZW50c01hbmFnZXIoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLnBhZ2VDb25maWdfLFxuICAgICAgdGhpcy5mZXRjaGVyXyxcbiAgICAgIHRoaXMgLy8gU2VlIG5vdGUgYWJvdXQgJ3RoaXMnIGFib3ZlXG4gICAgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9wZW5zaXR5fSAqL1xuICAgIHRoaXMucHJvcGVuc2l0eU1vZHVsZV8gPSBuZXcgUHJvcGVuc2l0eShcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMsIC8vIFNlZSBub3RlIGFib3V0ICd0aGlzJyBhYm92ZVxuICAgICAgdGhpcy5mZXRjaGVyX1xuICAgICk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2ZmZXJzQXBpfSAqL1xuICAgIHRoaXMub2ZmZXJzQXBpXyA9IG5ldyBPZmZlcnNBcGkodGhpcy5wYWdlQ29uZmlnXywgdGhpcy5mZXRjaGVyXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQnV0dG9uQXBpfSAqL1xuICAgIHRoaXMuYnV0dG9uQXBpXyA9IG5ldyBCdXR0b25BcGkodGhpcy5kb2NfLCBQcm9taXNlLnJlc29sdmUodGhpcykpO1xuXG4gICAgY29uc3QgcHJlY29ubmVjdCA9IG5ldyBQcmVjb25uZWN0KHRoaXMud2luXy5kb2N1bWVudCk7XG5cbiAgICBwcmVjb25uZWN0LnByZWZldGNoKCckYXNzZXRzJC9sb2FkZXIuc3ZnJyk7XG4gICAgTGlua0NvbXBsZXRlRmxvdy5jb25maWd1cmVQZW5kaW5nKHRoaXMpO1xuICAgIFBheUNvbXBsZXRlRmxvdy5jb25maWd1cmVQZW5kaW5nKHRoaXMpO1xuICAgIHRoaXMucGF5Q2xpZW50Xy5wcmVjb25uZWN0KHByZWNvbm5lY3QpO1xuXG4gICAgaW5qZWN0U3R5bGVTaGVldCh0aGlzLmRvY18sIFNXR19ESUFMT0cpO1xuXG4gICAgLy8gUmVwb3J0IHJlZGlyZWN0IGVycm9ycyBpZiBhbnkuXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXy5vblJlZGlyZWN0RXJyb3IoZXJyb3IgPT4ge1xuICAgICAgdGhpcy5hbmFseXRpY3NTZXJ2aWNlXy5hZGRMYWJlbHMoWydyZWRpcmVjdCddKTtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuRVZFTlRfUEFZTUVOVF9GQUlMRUQsXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgICAgdGhpcy5qc2Vycm9yXy5lcnJvcignUmVkaXJlY3QgZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRvYygpIHtcbiAgICByZXR1cm4gdGhpcy5kb2NfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB3aW4oKSB7XG4gICAgcmV0dXJuIHRoaXMud2luXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcGFnZUNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlQ29uZmlnXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAganNlcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5qc2Vycm9yXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWN0aXZpdGllcygpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eVBvcnRzXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcGF5Q2xpZW50KCkge1xuICAgIHJldHVybiB0aGlzLnBheUNsaWVudF87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpYWxvZ01hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlhbG9nTWFuYWdlcl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGVudGl0bGVtZW50c01hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNhbGxiYWNrcygpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsYmFja3NfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdG9yYWdlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JhZ2VfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhbmFseXRpY3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuYW5hbHl0aWNzU2VydmljZV87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGluaXQoKSB7XG4gICAgLy8gSW1wbGVtZW50ZWQgYnkgdGhlIGBSdW50aW1lYCBjbGFzcy5cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY29uZmlndXJlKGNvbmZpZykge1xuICAgIC8vIEluZGlyZWN0ZWQgZm9yIGNvbnN0cnVjdG9yIHRlc3RpbmcuXG4gICAgdGhpcy5jb25maWd1cmVfKGNvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnfSBjb25maWdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbmZpZ3VyZV8oY29uZmlnKSB7XG4gICAgLy8gVmFsaWRhdGUgZmlyc3QuXG4gICAgbGV0IGVycm9yID0gJyc7XG4gICAgZm9yIChjb25zdCBrIGluIGNvbmZpZykge1xuICAgICAgY29uc3QgdiA9IGNvbmZpZ1trXTtcbiAgICAgIHN3aXRjaCAoaykge1xuICAgICAgICBjYXNlICd3aW5kb3dPcGVuTW9kZSc6XG4gICAgICAgICAgaWYgKHYgIT0gV2luZG93T3Blbk1vZGUuQVVUTyAmJiB2ICE9IFdpbmRvd09wZW5Nb2RlLlJFRElSRUNUKSB7XG4gICAgICAgICAgICBlcnJvciA9ICdVbmtub3duIHdpbmRvd09wZW5Nb2RlOiAnICsgdjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2V4cGVyaW1lbnRzJzpcbiAgICAgICAgICB2LmZvckVhY2goZXhwZXJpbWVudCA9PiBzZXRFeHBlcmltZW50KHRoaXMud2luXywgZXhwZXJpbWVudCwgdHJ1ZSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhbmFseXRpY3NNb2RlJzpcbiAgICAgICAgICBpZiAodiAhPSBBbmFseXRpY3NNb2RlLkRFRkFVTFQgJiYgdiAhPSBBbmFseXRpY3NNb2RlLklNUFJFU1NJT05TKSB7XG4gICAgICAgICAgICBlcnJvciA9ICdVbmtub3duIGFuYWx5dGljcyBtb2RlOiAnICsgdjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2VuYWJsZVN3Z0FuYWx5dGljcyc6XG4gICAgICAgICAgaWYgKCFpc0Jvb2xlYW4odikpIHtcbiAgICAgICAgICAgIGVycm9yID0gJ1Vua25vd24gZW5hYmxlU3dnQW5hbHl0aWNzIHZhbHVlOiAnICsgdjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2VuYWJsZVByb3BlbnNpdHknOlxuICAgICAgICAgIGlmICghaXNCb29sZWFuKHYpKSB7XG4gICAgICAgICAgICBlcnJvciA9ICdVbmtub3duIGVuYWJsZVByb3BlbnNpdHkgdmFsdWU6ICcgKyB2O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBlcnJvciA9ICdVbmtub3duIGNvbmZpZyBwcm9wZXJ0eTogJyArIGs7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFRocm93IGVycm9yIHN0cmluZyBpZiBpdCdzIG5vdCBudWxsXG4gICAgYXNzZXJ0KCFlcnJvciwgZXJyb3IgfHwgdW5kZWZpbmVkKTtcbiAgICAvLyBBc3NpZ24uXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZ18sIGNvbmZpZyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWdfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICByZXNldCgpIHtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLnJlc2V0KCk7XG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZUFsbCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLmNsZWFyKCk7XG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZUFsbCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBObyBuZWVkIHRvIHJ1biBlbnRpdGxlbWVudHMgd2l0aG91dCBhIHByb2R1Y3Qgb3IgZm9yIGFuIHVubG9ja2VkIHBhZ2UuXG4gICAgaWYgKCF0aGlzLnBhZ2VDb25maWdfLmdldFByb2R1Y3RJZCgpIHx8ICF0aGlzLnBhZ2VDb25maWdfLmlzTG9ja2VkKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdGhpcy5nZXRFbnRpdGxlbWVudHMoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0RW50aXRsZW1lbnRzKG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleSkge1xuICAgIHJldHVybiB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfXG4gICAgICAuZ2V0RW50aXRsZW1lbnRzKG9wdF9lbmNyeXB0ZWREb2N1bWVudEtleSlcbiAgICAgIC50aGVuKGVudGl0bGVtZW50cyA9PiBlbnRpdGxlbWVudHMuY2xvbmUoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25FbnRpdGxlbWVudHNSZXNwb25zZShjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldE9mZmVycyhvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLm9mZmVyc0FwaV8uZ2V0T2ZmZXJzKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLnByb2R1Y3RJZCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dPZmZlcnMob3B0X29wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICAnVGhlIHNob3dPZmZlcnMoKSBtZXRob2QgY2Fubm90IGJlIHVzZWQgdG8gdXBkYXRlIGEgc3Vic2NyaXB0aW9uLiAnICtcbiAgICAgICAgJ1VzZSB0aGUgc2hvd1VwZGF0ZU9mZmVycygpIG1ldGhvZCBpbnN0ZWFkLic7XG4gICAgICBhc3NlcnQob3B0X29wdGlvbnMgPyAhb3B0X29wdGlvbnNbJ29sZFNrdSddIDogdHJ1ZSwgZXJyb3JNZXNzYWdlKTtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgT2ZmZXJzRmxvdyh0aGlzLCBvcHRfb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmxvdy5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93VXBkYXRlT2ZmZXJzKG9wdF9vcHRpb25zKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgaXNFeHBlcmltZW50T24odGhpcy53aW5fLCBFeHBlcmltZW50RmxhZ3MuUkVQTEFDRV9TVUJTQ1JJUFRJT04pLFxuICAgICAgJ05vdCB5ZXQgbGF1bmNoZWQhJ1xuICAgICk7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgJ1RoZSBzaG93VXBkYXRlT2ZmZXJzKCkgbWV0aG9kIGNhbm5vdCBiZSB1c2VkIGZvciBuZXcgc3Vic2NyaWJlcnMuICcgK1xuICAgICAgICAnVXNlIHRoZSBzaG93T2ZmZXJzKCkgbWV0aG9kIGluc3RlYWQuJztcbiAgICAgIGFzc2VydChvcHRfb3B0aW9ucyA/ICEhb3B0X29wdGlvbnNbJ29sZFNrdSddIDogZmFsc2UsIGVycm9yTWVzc2FnZSk7XG4gICAgICBjb25zdCBmbG93ID0gbmV3IE9mZmVyc0Zsb3codGhpcywgb3B0X29wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZsb3cuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd1N1YnNjcmliZU9wdGlvbihvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgU3Vic2NyaWJlT3B0aW9uRmxvdyh0aGlzLCBvcHRfb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmxvdy5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93QWJicnZPZmZlcihvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgQWJicnZPZmZlckZsb3codGhpcywgb3B0X29wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZsb3cuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMob3B0X29wdGlvbnMpIHtcbiAgICBhc3NlcnQoXG4gICAgICBpc0V4cGVyaW1lbnRPbih0aGlzLndpbl8sIEV4cGVyaW1lbnRGbGFncy5DT05UUklCVVRJT05TKSxcbiAgICAgICdOb3QgeWV0IGxhdW5jaGVkISdcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgQ29udHJpYnV0aW9uc0Zsb3codGhpcywgb3B0X29wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZsb3cuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgd2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cChhY2NvdW50UHJvbWlzZSkge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IHdhaXQgPSBuZXcgV2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cEFwaSh0aGlzLCBhY2NvdW50UHJvbWlzZSk7XG4gICAgICByZXR1cm4gd2FpdC5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkxvZ2luUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPbkxvZ2luUmVxdWVzdChjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbGlua0FjY291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBMaW5rYmFja0Zsb3codGhpcykuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2F2ZVN1YnNjcmlwdGlvbihzYXZlU3Vic2NyaXB0aW9uUmVxdWVzdENhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBMaW5rU2F2ZUZsb3codGhpcywgc2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFjaykuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0xvZ2luUHJvbXB0KCkge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgTG9naW5Qcm9tcHRBcGkodGhpcykuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0xvZ2luTm90aWZpY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgTG9naW5Ob3RpZmljYXRpb25BcGkodGhpcykuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uU3Vic2NyaWJlUmVxdWVzdChjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uU3Vic2NyaWJlUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25TdWJzY3JpYmVSZXNwb25zZShjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN1YnNjcmliZShza3UpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgJ1RoZSBzdWJzY3JpYmUoKSBtZXRob2QgY2FuIG9ubHkgdGFrZSBhIHNrdSBhcyBpdHMgcGFyYW1ldGVyOyAnICtcbiAgICAgICdmb3Igc3Vic2NyaXB0aW9uIHVwZGF0ZXMgcGxlYXNlIHVzZSB0aGUgdXBkYXRlU3Vic2NyaXB0aW9uKCkgbWV0aG9kJztcbiAgICBhc3NlcnQodHlwZW9mIHNrdSA9PT0gJ3N0cmluZycsIGVycm9yTWVzc2FnZSk7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQYXlTdGFydEZsb3codGhpcywgc2t1KS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB1cGRhdGVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIGFzc2VydChcbiAgICAgIGlzRXhwZXJpbWVudE9uKHRoaXMud2luXywgRXhwZXJpbWVudEZsYWdzLlJFUExBQ0VfU1VCU0NSSVBUSU9OKSxcbiAgICAgICdOb3QgeWV0IGxhdW5jaGVkISdcbiAgICApO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAnVGhlIHVwZGF0ZVN1YnNjcmlwdGlvbigpIG1ldGhvZCBzaG91bGQgYmUgdXNlZCBmb3Igc3Vic2NyaXB0aW9uICcgK1xuICAgICAgJ3VwZGF0ZXM7IGZvciBuZXcgc3Vic2NyaXB0aW9ucyBwbGVhc2UgdXNlIHRoZSBzdWJzY3JpYmUoKSBtZXRob2QnO1xuICAgIGFzc2VydChcbiAgICAgIHN1YnNjcmlwdGlvblJlcXVlc3QgPyBzdWJzY3JpcHRpb25SZXF1ZXN0WydvbGRTa3UnXSA6IGZhbHNlLFxuICAgICAgZXJyb3JNZXNzYWdlXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFBheVN0YXJ0Rmxvdyh0aGlzLCBzdWJzY3JpcHRpb25SZXF1ZXN0KS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkNvbnRyaWJ1dGlvblJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb250cmlidXRlKHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIGFzc2VydChcbiAgICAgIGlzRXhwZXJpbWVudE9uKHRoaXMud2luXywgRXhwZXJpbWVudEZsYWdzLkNPTlRSSUJVVElPTlMpLFxuICAgICAgJ05vdCB5ZXQgbGF1bmNoZWQhJ1xuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFBheVN0YXJ0RmxvdyhcbiAgICAgICAgdGhpcyxcbiAgICAgICAgc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0LFxuICAgICAgICBQcm9kdWN0VHlwZS5VSV9DT05UUklCVVRJT05cbiAgICAgICkuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY29tcGxldGVEZWZlcnJlZEFjY291bnRDcmVhdGlvbihvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRGVmZXJyZWRBY2NvdW50Rmxvdyh0aGlzLCBvcHRfb3B0aW9ucyB8fCBudWxsKS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uRmxvd1N0YXJ0ZWQoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNyZWF0ZUJ1dHRvbihvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgLy8gVGhpcyBpcyBhIG1pbm9yIGR1cGxpY2F0aW9uIHRvIGFsbG93IHRoaXMgY29kZSB0byBiZSBzeW5jLlxuICAgIHJldHVybiB0aGlzLmJ1dHRvbkFwaV8uY3JlYXRlKG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhdHRhY2hCdXR0b24oYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgLy8gVGhpcyBpcyBhIG1pbm9yIGR1cGxpY2F0aW9uIHRvIGFsbG93IHRoaXMgY29kZSB0byBiZSBzeW5jLlxuICAgIHRoaXMuYnV0dG9uQXBpXy5hdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXR0YWNoU21hcnRCdXR0b24oYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgaXNFeHBlcmltZW50T24odGhpcy53aW5fLCBFeHBlcmltZW50RmxhZ3MuU01BUlRCT1gpLFxuICAgICAgJ05vdCB5ZXQgbGF1bmNoZWQhJ1xuICAgICk7XG4gICAgdGhpcy5idXR0b25BcGlfLmF0dGFjaFNtYXJ0QnV0dG9uKFxuICAgICAgdGhpcyxcbiAgICAgIGJ1dHRvbixcbiAgICAgIG9wdGlvbnNPckNhbGxiYWNrLFxuICAgICAgb3B0X2NhbGxiYWNrXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0UHJvcGVuc2l0eU1vZHVsZSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJvcGVuc2l0eU1vZHVsZV8pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJuIHshQ2xpZW50RXZlbnRNYW5hZ2VyfVxuICAgKi9cbiAgZXZlbnRNYW5hZ2VyKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50TWFuYWdlcl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldExvZ2dlcigpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMubG9nZ2VyXyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFSdW50aW1lfSBydW50aW1lXG4gKiBAcmV0dXJuIHshU3Vic2NyaXB0aW9uc31cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHVibGljUnVudGltZShydW50aW1lKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyFTdWJzY3JpcHRpb25zfSAqLyAoe1xuICAgIGluaXQ6IHJ1bnRpbWUuaW5pdC5iaW5kKHJ1bnRpbWUpLFxuICAgIGNvbmZpZ3VyZTogcnVudGltZS5jb25maWd1cmUuYmluZChydW50aW1lKSxcbiAgICBzdGFydDogcnVudGltZS5zdGFydC5iaW5kKHJ1bnRpbWUpLFxuICAgIHJlc2V0OiBydW50aW1lLnJlc2V0LmJpbmQocnVudGltZSksXG4gICAgY2xlYXI6IHJ1bnRpbWUuY2xlYXIuYmluZChydW50aW1lKSxcbiAgICBnZXRFbnRpdGxlbWVudHM6IHJ1bnRpbWUuZ2V0RW50aXRsZW1lbnRzLmJpbmQocnVudGltZSksXG4gICAgbGlua0FjY291bnQ6IHJ1bnRpbWUubGlua0FjY291bnQuYmluZChydW50aW1lKSxcbiAgICBzaG93TG9naW5Qcm9tcHQ6IHJ1bnRpbWUuc2hvd0xvZ2luUHJvbXB0LmJpbmQocnVudGltZSksXG4gICAgc2hvd0xvZ2luTm90aWZpY2F0aW9uOiBydW50aW1lLnNob3dMb2dpbk5vdGlmaWNhdGlvbi5iaW5kKHJ1bnRpbWUpLFxuICAgIGdldE9mZmVyczogcnVudGltZS5nZXRPZmZlcnMuYmluZChydW50aW1lKSxcbiAgICBzaG93T2ZmZXJzOiBydW50aW1lLnNob3dPZmZlcnMuYmluZChydW50aW1lKSxcbiAgICBzaG93VXBkYXRlT2ZmZXJzOiBydW50aW1lLnNob3dVcGRhdGVPZmZlcnMuYmluZChydW50aW1lKSxcbiAgICBzaG93QWJicnZPZmZlcjogcnVudGltZS5zaG93QWJicnZPZmZlci5iaW5kKHJ1bnRpbWUpLFxuICAgIHNob3dTdWJzY3JpYmVPcHRpb246IHJ1bnRpbWUuc2hvd1N1YnNjcmliZU9wdGlvbi5iaW5kKHJ1bnRpbWUpLFxuICAgIHNob3dDb250cmlidXRpb25PcHRpb25zOiBydW50aW1lLnNob3dDb250cmlidXRpb25PcHRpb25zLmJpbmQocnVudGltZSksXG4gICAgd2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cDogcnVudGltZS53YWl0Rm9yU3Vic2NyaXB0aW9uTG9va3VwLmJpbmQocnVudGltZSksXG4gICAgc3Vic2NyaWJlOiBydW50aW1lLnN1YnNjcmliZS5iaW5kKHJ1bnRpbWUpLFxuICAgIHVwZGF0ZVN1YnNjcmlwdGlvbjogcnVudGltZS51cGRhdGVTdWJzY3JpcHRpb24uYmluZChydW50aW1lKSxcbiAgICBjb250cmlidXRlOiBydW50aW1lLmNvbnRyaWJ1dGUuYmluZChydW50aW1lKSxcbiAgICBjb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uOiBydW50aW1lLmNvbXBsZXRlRGVmZXJyZWRBY2NvdW50Q3JlYXRpb24uYmluZChcbiAgICAgIHJ1bnRpbWVcbiAgICApLFxuICAgIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2U6IHJ1bnRpbWUuc2V0T25FbnRpdGxlbWVudHNSZXNwb25zZS5iaW5kKHJ1bnRpbWUpLFxuICAgIHNldE9uTG9naW5SZXF1ZXN0OiBydW50aW1lLnNldE9uTG9naW5SZXF1ZXN0LmJpbmQocnVudGltZSksXG4gICAgc2V0T25MaW5rQ29tcGxldGU6IHJ1bnRpbWUuc2V0T25MaW5rQ29tcGxldGUuYmluZChydW50aW1lKSxcbiAgICBzZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3Q6IHJ1bnRpbWUuc2V0T25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0LmJpbmQoXG4gICAgICBydW50aW1lXG4gICAgKSxcbiAgICBzZXRPblN1YnNjcmliZVJlc3BvbnNlOiBydW50aW1lLnNldE9uU3Vic2NyaWJlUmVzcG9uc2UuYmluZChydW50aW1lKSxcbiAgICBzZXRPbkNvbnRyaWJ1dGlvblJlc3BvbnNlOiBydW50aW1lLnNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UuYmluZChydW50aW1lKSxcbiAgICBzZXRPbkZsb3dTdGFydGVkOiBydW50aW1lLnNldE9uRmxvd1N0YXJ0ZWQuYmluZChydW50aW1lKSxcbiAgICBzZXRPbkZsb3dDYW5jZWxlZDogcnVudGltZS5zZXRPbkZsb3dDYW5jZWxlZC5iaW5kKHJ1bnRpbWUpLFxuICAgIHNhdmVTdWJzY3JpcHRpb246IHJ1bnRpbWUuc2F2ZVN1YnNjcmlwdGlvbi5iaW5kKHJ1bnRpbWUpLFxuICAgIGNyZWF0ZUJ1dHRvbjogcnVudGltZS5jcmVhdGVCdXR0b24uYmluZChydW50aW1lKSxcbiAgICBhdHRhY2hCdXR0b246IHJ1bnRpbWUuYXR0YWNoQnV0dG9uLmJpbmQocnVudGltZSksXG4gICAgYXR0YWNoU21hcnRCdXR0b246IHJ1bnRpbWUuYXR0YWNoU21hcnRCdXR0b24uYmluZChydW50aW1lKSxcbiAgICBnZXRQcm9wZW5zaXR5TW9kdWxlOiBydW50aW1lLmdldFByb3BlbnNpdHlNb2R1bGUuYmluZChydW50aW1lKSxcbiAgICBnZXRMb2dnZXI6IHJ1bnRpbWUuZ2V0TG9nZ2VyLmJpbmQocnVudGltZSksXG4gIH0pO1xufVxuXG4vKipcbiAqIEByZXR1cm4geyFGdW5jdGlvbn1cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbnNDbGFzc0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBTdWJzY3JpcHRpb25zO1xufVxuXG4vKipcbiAqIEByZXR1cm4geyFGdW5jdGlvbn1cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZldGNoZXJDbGFzc0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBGZXRjaGVyO1xufVxuXG4vKiogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERvY0NsYXNzRm9yVGVzdGluZygpIHtcbiAgcmV0dXJuIERvYztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHthZGRRdWVyeVBhcmFtLCBwYXJzZVF1ZXJ5U3RyaW5nLCBwYXJzZVVybH0gZnJvbSAnLi4vdXRpbHMvdXJsJztcblxuLyoqXG4gKiBIYXZlIHRvIHB1dCB0aGVzZSBpbiB0aGUgbWFwIHRvIGF2b2lkIGNvbXBpbGVyIG9wdGltaXphdGlvbi4gRHVlIHRvXG4gKiBvcHRpbWl6YXRpb24gaXNzdWVzLCB0aGlzIG1hcCBvbmx5IGFsbG93cyBwcm9wZXJ0eS1zdHlsZSBrZXlzLiBFLmcuIFwiaHIxXCIsXG4gKiBhcyBvcHBvc2VkIHRvIFwiMWhyXCIuXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjb25zdCBDQUNIRV9LRVlTID0ge1xuICAnbm9jYWNoZSc6IDEsXG4gICdocjEnOiAzNjAwMDAwLCAvLyAxaHIgPSAxMDAwICogNjAgKiA2MFxuICAnaHIxMic6IDQzMjAwMDAwLCAvLyAxMmhyID0gMTAwMCAqIDYwICogNjAgKiAxMlxufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZU9yaWdpbigpIHtcbiAgcmV0dXJuIHBhcnNlVXJsKCckZnJvbnRlbmQkJykub3JpZ2luO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgVVJMLCBlLmcuIFwiL3NlcnZpY2UxXCIuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wbGV0ZSBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlVXJsKHVybCkge1xuICByZXR1cm4gJyRmcm9udGVuZCQvc3dnL18vYXBpL3YxJyArIHVybDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsICBSZWxhdGl2ZSBVUkwsIGUuZy4gXCIvc2VydmljZTFcIi5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBsZXRlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkc1VybCh1cmwpIHtcbiAgcmV0dXJuICckYWRzU2VydmVyJCcgKyB1cmw7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBVUkwsIGUuZy4gXCIvb2ZmZXJzaWZyYW1lXCIuXG4gKiBAcGFyYW0ge3N0cmluZz19IHByZWZpeFxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29tcGxldGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmVVcmwodXJsLCBwcmVmaXggPSAnJykge1xuICAvLyBBZGQgY2FjaGUgcGFyYW0uXG4gIHVybCA9IGZlQ2FjaGVkKCckZnJvbnRlbmQkJyArIHByZWZpeCArICcvc3dnL18vdWkvdjEnICsgdXJsKTtcblxuICAvLyBPcHRpb25hbGx5IGFkZCBqc21vZGUgcGFyYW0uIFRoaXMgYWxsb3dzIHVzIHRvIHRlc3QgYWdhaW5zdCBcImFnZ3Jlc3NpdmVseVwiIGNvbXBpbGVkIEJvcSBKUy5cbiAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHNlbGYubG9jYXRpb24uaGFzaCk7XG4gIGNvbnN0IGJvcUpzTW9kZSA9IHF1ZXJ5Wydzd2cuYm9xanNtb2RlJ107XG4gIGlmIChib3FKc01vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHVybCA9IGFkZFF1ZXJ5UGFyYW0odXJsLCAnanNtb2RlJywgYm9xSnNNb2RlKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBGRSBVUkwuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wbGV0ZSBVUkwgaW5jbHVkaW5nIGNhY2hlIHBhcmFtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmVDYWNoZWQodXJsKSB7XG4gIHJldHVybiBhZGRRdWVyeVBhcmFtKHVybCwgJ18nLCBjYWNoZVBhcmFtKCckZnJvbnRlbmRDYWNoZSQnKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgPz59IGFyZ3NcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCA/Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZlQXJncyhhcmdzKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKGFyZ3MsIHtcbiAgICAnX2NsaWVudCc6ICdTd0cgJGludGVybmFsUnVudGltZVZlcnNpb24kJyxcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlS2V5XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWNoZVBhcmFtKGNhY2hlS2V5KSB7XG4gIGxldCBwZXJpb2QgPSBDQUNIRV9LRVlTW2NhY2hlS2V5XTtcbiAgaWYgKHBlcmlvZCA9PSBudWxsKSB7XG4gICAgcGVyaW9kID0gMTtcbiAgfVxuICBpZiAocGVyaW9kID09PSAwKSB7XG4gICAgcmV0dXJuICdfJztcbiAgfVxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICByZXR1cm4gU3RyaW5nKHBlcmlvZCA8PSAxID8gbm93IDogTWF0aC5mbG9vcihub3cgLyBwZXJpb2QpKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtjcmVhdGVFbGVtZW50fSBmcm9tICcuLi91dGlscy9kb20nO1xuaW1wb3J0IHtzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcbmltcG9ydCB7ZmVBcmdzLCBmZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge1NtYXJ0Qm94TWVzc2FnZX0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5jb25zdCBpZnJhbWVBdHRyaWJ1dGVzID0ge1xuICAnZnJhbWVib3JkZXInOiAnMCcsXG4gICdzY3JvbGxpbmcnOiAnbm8nLFxufTtcblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgVGhlbWUgPSB7XG4gIExJR0hUOiAnbGlnaHQnLFxuICBEQVJLOiAnZGFyaycsXG59O1xuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3IgU21hcnQgYnV0dG9uIEFwaS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNtYXJ0U3Vic2NyaXB0aW9uQnV0dG9uQXBpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGJ1dHRvblxuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gY2FsbGJhY2tcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIGJ1dHRvbiwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gdGhpcy53aW5fLmRvY3VtZW50O1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSAvKiogQHR5cGUgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi8gKGNyZWF0ZUVsZW1lbnQoXG4gICAgICB0aGlzLmRvY18sXG4gICAgICAnaWZyYW1lJyxcbiAgICAgIGlmcmFtZUF0dHJpYnV0ZXNcbiAgICApKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuYnV0dG9uXyA9IGJ1dHRvbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNtYXJ0QnV0dG9uT3B0aW9uc30gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gb3B0aW9ucztcblxuICAgIC8qKiBAcHJpdmF0ZSBjb25zdCB7ZnVuY3Rpb24oKT19ICovXG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNyY18gPSBmZVVybCgnL3NtYXJ0Ym94aWZyYW1lJyk7XG5cbiAgICBjb25zdCBmcm9udGVuZEFyZ3VtZW50cyA9IHtcbiAgICAgICdwcm9kdWN0SWQnOiB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQcm9kdWN0SWQoKSxcbiAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5kZXBzXy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgJ3RoZW1lJzogKHRoaXMub3B0aW9uc18gJiYgdGhpcy5vcHRpb25zXy50aGVtZSkgfHwgJ2xpZ2h0JyxcbiAgICAgICdsYW5nJzogKHRoaXMub3B0aW9uc18gJiYgdGhpcy5vcHRpb25zXy5sYW5nKSB8fCAnZW4nLFxuICAgIH07XG4gICAgY29uc3QgbWVzc2FnZVRleHRDb2xvciA9IHRoaXMub3B0aW9uc18gJiYgdGhpcy5vcHRpb25zXy5tZXNzYWdlVGV4dENvbG9yO1xuICAgIGlmIChtZXNzYWdlVGV4dENvbG9yKSB7XG4gICAgICBmcm9udGVuZEFyZ3VtZW50c1snbWVzc2FnZVRleHRDb2xvciddID0gbWVzc2FnZVRleHRDb2xvcjtcbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0fSAqL1xuICAgIHRoaXMuYXJnc18gPSBmZUFyZ3MoZnJvbnRlbmRBcmd1bWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U21hcnRCb3hNZXNzYWdlfSBzbWFydEJveE1lc3NhZ2VcbiAgICovXG4gIGhhbmRsZVNtYXJ0Qm94Q2xpY2tfKHNtYXJ0Qm94TWVzc2FnZSkge1xuICAgIGlmIChzbWFydEJveE1lc3NhZ2UgJiYgc21hcnRCb3hNZXNzYWdlLmdldElzQ2xpY2tlZCgpKSB7XG4gICAgICBpZiAoIXRoaXMuY2FsbGJhY2tfKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY2FsbGJhY2shJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhbGxiYWNrXygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgY2FsbCB0byBidWlsZCBidXR0b24gY29udGVudCBhbmQgbGlzdGVucyBmb3IgdGhlICdjbGljaycgbWVzc2FnZS5cbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICAvKipcbiAgICAgKiBBZGQgYSBjYWxsYmFjayB0byB0aGUgYnV0dG9uIGl0c2VsZiB0byBmaXJlIHRoZSBpZnJhbWUncyBidXR0b24gY2xpY2tcbiAgICAgKiBhY3Rpb24gd2hlbiB1c2VyIHRhYnMgdG8gdGhlIGNvbnRhaW5lciBidXR0b24gYW5kIGhpdHMgZW50ZXIuXG4gICAgICovXG4gICAgdGhpcy5idXR0b25fLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jYWxsYmFja18oKTtcbiAgICB9KTtcblxuICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmlmcmFtZV8sIHtcbiAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICAgICAndG9wJzogMCxcbiAgICAgICdib3R0b20nOiAwLFxuICAgICAgJ2xlZnQnOiAwLFxuICAgICAgJ2hlaWdodCc6ICcxMDAlJyxcbiAgICAgICdyaWdodCc6IDAsXG4gICAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgfSk7XG4gICAgdGhpcy5idXR0b25fLmFwcGVuZENoaWxkKHRoaXMuaWZyYW1lXyk7XG4gICAgY29uc3QgYW5hbHl0aWNzQ29udGV4dCA9IHRoaXMuZGVwc19cbiAgICAgIC5hbmFseXRpY3MoKVxuICAgICAgLmdldENvbnRleHQoKVxuICAgICAgLnRvQXJyYXkoKTtcbiAgICB0aGlzLmFyZ3NfWydhbmFseXRpY3NDb250ZXh0J10gPSBhbmFseXRpY3NDb250ZXh0O1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c19cbiAgICAgIC5vcGVuSWZyYW1lKHRoaXMuaWZyYW1lXywgdGhpcy5zcmNfLCB0aGlzLmFyZ3NfKVxuICAgICAgLnRoZW4ocG9ydCA9PiB7XG4gICAgICAgIHBvcnQub24oU21hcnRCb3hNZXNzYWdlLCB0aGlzLmhhbmRsZVNtYXJ0Qm94Q2xpY2tfLmJpbmQodGhpcykpO1xuICAgICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBQUkVGSVggPSAnc3Vic2NyaWJlLmdvb2dsZS5jb20nO1xuXG5leHBvcnQgY2xhc3MgU3RvcmFnZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIVByb21pc2U8P3N0cmluZz4+fSAqL1xuICAgIHRoaXMudmFsdWVzXyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7IVByb21pc2U8P3N0cmluZz59XG4gICAqL1xuICBnZXQoa2V5KSB7XG4gICAgaWYgKCF0aGlzLnZhbHVlc19ba2V5XSkge1xuICAgICAgdGhpcy52YWx1ZXNfW2tleV0gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgaWYgKHRoaXMud2luXy5zZXNzaW9uU3RvcmFnZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMud2luXy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkoa2V5KSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBlcnJvci5cbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy52YWx1ZXNfW2tleV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMudmFsdWVzX1trZXldID0gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZiAodGhpcy53aW5fLnNlc3Npb25TdG9yYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy53aW5fLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleShrZXkpLCB2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3IuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgcmVtb3ZlKGtleSkge1xuICAgIGRlbGV0ZSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZiAodGhpcy53aW5fLnNlc3Npb25TdG9yYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy53aW5fLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oc3RvcmFnZUtleShrZXkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvci5cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdG9yYWdlS2V5KGtleSkge1xuICByZXR1cm4gUFJFRklYICsgJzonICsga2V5O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGl2aXR5SWZyYW1lVmlld30gZnJvbSAnLi4vdWkvYWN0aXZpdHktaWZyYW1lLXZpZXcnO1xuaW1wb3J0IHtEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlfSBmcm9tICcuLi9hcGkvZGVmZXJyZWQtYWNjb3VudC1jcmVhdGlvbic7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgV2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cEFwaSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0gez9Qcm9taXNlfSBhY2NvdW50UHJvbWlzZVxuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgYWNjb3VudFByb21pc2UpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMuYWNjb3VudFByb21pc2VfID0gYWNjb3VudFByb21pc2UgfHwgbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL3dhaXRmb3JzdWJzY3JpcHRpb25sb29rdXBpZnJhbWUnKSxcbiAgICAgIGZlQXJncyh7XG4gICAgICAgIHB1YmxpY2F0aW9uSWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgcHJvZHVjdElkOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQcm9kdWN0SWQoKSxcbiAgICAgIH0pLFxuICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZSxcbiAgICAgIC8qIGhhc0xvYWRpbmdJbmRpY2F0b3IgKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBMb2dpbiBGbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoXG4gICAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld19cbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuYWNjb3VudFByb21pc2VfLnRoZW4oXG4gICAgICBhY2NvdW50ID0+IHtcbiAgICAgICAgLy8gQWNjb3VudCB3YXMgZm91bmQuXG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgICAgfSxcbiAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Vmlld30gZnJvbSAnLi4vY29tcG9uZW50cy92aWV3JztcbmltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7aXNDYW5jZWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcbmltcG9ydCB7YWNjZXB0UG9ydFJlc3VsdERhdGF9IGZyb20gJy4uL3V0aWxzL2FjdGl2aXR5LXV0aWxzJztcblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5jb25zdCBpZnJhbWVBdHRyaWJ1dGVzID0ge1xuICAnZnJhbWVib3JkZXInOiAnMCcsXG4gICdzY3JvbGxpbmcnOiAnbm8nLFxufTtcblxuLyoqXG4gKiBDbGFzcyB0byBidWlsZCBhbmQgcmVuZGVyIEFjdGl2aXR5IGlmcmFtZSB2aWV3LlxuICovXG5leHBvcnQgY2xhc3MgQWN0aXZpdHlJZnJhbWVWaWV3IGV4dGVuZHMgVmlldyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gYWN0aXZpdHlQb3J0c1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsID8+PX0gYXJnc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBzaG91bGRGYWRlQm9keVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBoYXNMb2FkaW5nSW5kaWNhdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICB3aW4sXG4gICAgYWN0aXZpdHlQb3J0cyxcbiAgICBzcmMsXG4gICAgYXJncyxcbiAgICBzaG91bGRGYWRlQm9keSA9IGZhbHNlLFxuICAgIGhhc0xvYWRpbmdJbmRpY2F0b3IgPSBmYWxzZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gdGhpcy53aW5fLmRvY3VtZW50O1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUhUTUxJRnJhbWVFbGVtZW50fSAqL1xuICAgIHRoaXMuaWZyYW1lXyA9IC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXyxcbiAgICAgICdpZnJhbWUnLFxuICAgICAgaWZyYW1lQXR0cmlidXRlc1xuICAgICkpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBhY3Rpdml0eVBvcnRzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc3JjXyA9IHNyYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCA/Pn0gKi9cbiAgICB0aGlzLmFyZ3NfID0gYXJncyB8fCB7fTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5zaG91bGRGYWRlQm9keV8gPSBzaG91bGRGYWRlQm9keTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5oYXNMb2FkaW5nSW5kaWNhdG9yXyA9IGhhc0xvYWRpbmdJbmRpY2F0b3I7XG5cbiAgICAvKiogQHByaXZhdGUgez8uLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlJZnJhbWVQb3J0fSAqL1xuICAgIHRoaXMucG9ydF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiB7P2Z1bmN0aW9uPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnR8IVByb21pc2U+fVxuICAgICAqL1xuICAgIHRoaXMucG9ydFJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3RcbiAgICAgKiB7IVByb21pc2U8IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5SWZyYW1lUG9ydD59XG4gICAgICovXG4gICAgdGhpcy5wb3J0UHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMucG9ydFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaW5pdChkaWFsb2cpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eVBvcnRzX1xuICAgICAgLm9wZW5JZnJhbWUodGhpcy5pZnJhbWVfLCB0aGlzLnNyY18sIHRoaXMuYXJnc18pXG4gICAgICAudGhlbihwb3J0ID0+IHRoaXMub25PcGVuSWZyYW1lUmVzcG9uc2VfKHBvcnQsIGRpYWxvZykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaWYgZG9jdW1lbnQgc2hvdWxkIGZhZGUgZm9yIHRoaXMgdmlldy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHNob3VsZEZhZGVCb2R5KCkge1xuICAgIHJldHVybiB0aGlzLnNob3VsZEZhZGVCb2R5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGlmIHRoZSB2aWV3IHNob3dzIGxvYWRpbmcgaW5kaWNhdG9yLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzTG9hZGluZ0luZGljYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNMb2FkaW5nSW5kaWNhdG9yXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlJZnJhbWVQb3J0fSBwb3J0XG4gICAqIEBwYXJhbSB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLkRpYWxvZ30gZGlhbG9nXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgb25PcGVuSWZyYW1lUmVzcG9uc2VfKHBvcnQsIGRpYWxvZykge1xuICAgIHRoaXMucG9ydF8gPSBwb3J0O1xuICAgIHRoaXMucG9ydFJlc29sdmVyXyhwb3J0KTtcblxuICAgIHRoaXMucG9ydF8ub25SZXNpemVSZXF1ZXN0KGhlaWdodCA9PiB7XG4gICAgICBkaWFsb2cucmVzaXplVmlldyh0aGlzLCBoZWlnaHQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMucG9ydF8ud2hlblJlYWR5KCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UG9ydFByb21pc2VfKCkge1xuICAgIHJldHVybiB0aGlzLnBvcnRQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGRhdGFcbiAgICovXG4gIG1lc3NhZ2VEZXByZWNhdGVkKGRhdGEpIHtcbiAgICB0aGlzLmdldFBvcnRQcm9taXNlXygpLnRoZW4ocG9ydCA9PiB7XG4gICAgICBwb3J0Lm1lc3NhZ2VEZXByZWNhdGVkKGRhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQgYnkgdGhlIHBvcnQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIU9iamVjdDxzdHJpbmcsIHN0cmluZ3xib29sZWFuPil9IGNhbGxiYWNrXG4gICAqL1xuICBvbk1lc3NhZ2VEZXByZWNhdGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5nZXRQb3J0UHJvbWlzZV8oKS50aGVuKHBvcnQgPT4ge1xuICAgICAgcG9ydC5vbk1lc3NhZ2VEZXByZWNhdGVkKGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshZnVuY3Rpb24obmV3OiBUKX0gIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtmdW5jdGlvbiguLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZSl9IGNhbGxiYWNrXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqL1xuICBvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZ2V0UG9ydFByb21pc2VfKCkudGhlbihwb3J0ID0+IHtcbiAgICAgIHBvcnQub24obWVzc2FnZSwgY2FsbGJhY2spO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL3Byb3RvL2FwaV9tZXNzYWdlcy5NZXNzYWdlfSByZXF1ZXN0XG4gICAqL1xuICBleGVjdXRlKHJlcXVlc3QpIHtcbiAgICB0aGlzLmdldFBvcnRQcm9taXNlXygpLnRoZW4ocG9ydCA9PiB7XG4gICAgICBwb3J0LmV4ZWN1dGUocmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyByZXN1bHRzIGZyb20gdGhlIGNhbGxlci5cbiAgICogQHJldHVybiB7IVByb21pc2U8IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UmVzdWx0Pn1cbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRQb3J0UHJvbWlzZV8oKS50aGVuKHBvcnQgPT4gcG9ydC5hY2NlcHRSZXN1bHQoKSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyByZXN1bHRzIGZyb20gdGhlIGNhbGxlciBhbmQgdmVyaWZpZXMgb3JpZ2luLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWlyZU9yaWdpblxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVpcmVPcmlnaW5WZXJpZmllZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVpcmVTZWN1cmVDaGFubmVsXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICAgKi9cbiAgYWNjZXB0UmVzdWx0QW5kVmVyaWZ5KFxuICAgIHJlcXVpcmVPcmlnaW4sXG4gICAgcmVxdWlyZU9yaWdpblZlcmlmaWVkLFxuICAgIHJlcXVpcmVTZWN1cmVDaGFubmVsXG4gICkge1xuICAgIHJldHVybiB0aGlzLmdldFBvcnRQcm9taXNlXygpLnRoZW4ocG9ydCA9PiB7XG4gICAgICByZXR1cm4gYWNjZXB0UG9ydFJlc3VsdERhdGEoXG4gICAgICAgIHBvcnQsXG4gICAgICAgIHJlcXVpcmVPcmlnaW4sXG4gICAgICAgIHJlcXVpcmVPcmlnaW5WZXJpZmllZCxcbiAgICAgICAgcmVxdWlyZVNlY3VyZUNoYW5uZWxcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGxldGVzIHRoZSBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5Db21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hY2NlcHRSZXN1bHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gICAqL1xuICBvbkNhbmNlbChjYWxsYmFjaykge1xuICAgIHRoaXMuYWNjZXB0UmVzdWx0KCkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICAgIHRocm93IHJlYXNvbjtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcmVzaXplZCgpIHtcbiAgICBpZiAodGhpcy5wb3J0Xykge1xuICAgICAgdGhpcy5wb3J0Xy5yZXNpemVkKCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcblxuLyoqXG4gKiBMb2FkaW5nIGluZGljYXRvciBjbGFzcy4gQnVpbGRzIHRoZSBsb2FkaW5nIGluZGljYXRvciB2aWV3IHRvIGJlIGluamVjdGVkIGluXG4gKiBwYXJlbnQgZWxlbWVudCA8aWZyYW1lIGNsYXNzPVwic3dnLWRpYWxvZ1wiPiBlbGVtZW50LiBQcm92aWRlcyBtZXRob2RzIHRvXG4gKiBzaG93L2hpZGUgbG9hZGluZyBpbmRpY2F0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2FkaW5nVmlldyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXyA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICB0aGlzLmRvY18sXG4gICAgICAnc3dnLWxvYWRpbmctY29udGFpbmVyJyxcbiAgICAgIHt9XG4gICAgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMubG9hZGluZ18gPSBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXywgJ3N3Zy1sb2FkaW5nJywge30pO1xuICAgIHRoaXMubG9hZGluZ0NvbnRhaW5lcl8uYXBwZW5kQ2hpbGQodGhpcy5sb2FkaW5nXyk7XG5cbiAgICB0aGlzLmxvYWRpbmdDb250YWluZXJfLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XG5cbiAgICAvLyBCdWlsZCB0aGUgYW5pbWF0ZWQgbG9hZGluZyBpbmRpY2F0b3IuXG4gICAgdGhpcy5idWlsZExvYWRpbmdJbmRpY2F0b3JfKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcG9wdWxhdGVkIGxvYWRpbmcgY29udGFpbmVyLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9hZGluZ0NvbnRhaW5lcl87XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIHdpdGhpbiB0aGUgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICBzaG93KCkge1xuICAgIHRoaXMubG9hZGluZ0NvbnRhaW5lcl8uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgbG9hZGluZyBpbmRpY2F0b3Igd2l0aGluIHRoZSBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXy5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvcHVsYXRlcyB0aGUgbG9hZGluZyBpbmRpdmljYXRvci4gVGhlIHBvcHVsYXRlZCBlbGVtZW50XG4gICAqIGNhbiBiZSBhZGRlZCBpbiBhbnkgdmlldywgd2hlbiByZXF1aXJlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkTG9hZGluZ0luZGljYXRvcl8oKSB7XG4gICAgY29uc3QgbG9hZGluZ0NvbnRhaW5lciA9IHRoaXMubG9hZGluZ187XG5cbiAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yVG9wQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXyxcbiAgICAgICdzd2ctbG9hZGluZy1hbmltYXRlJyxcbiAgICAgIHt9XG4gICAgKTtcbiAgICBsb2FkaW5nQ29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRpbmdJbmRpY2F0b3JUb3BDb250YWluZXIpO1xuXG4gICAgY29uc3QgbG9hZGluZ0luZGljYXRvckNoaWxkQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXyxcbiAgICAgICdzd2ctbG9hZGluZy1pbWFnZScsXG4gICAgICB7fVxuICAgICk7XG4gICAgbG9hZGluZ0luZGljYXRvclRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkaW5nSW5kaWNhdG9yQ2hpbGRDb250YWluZXIpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7cmVzZXRTdHlsZXMsIHNldEltcG9ydGFudFN0eWxlc30gZnJvbSAnLi4vdXRpbHMvc3R5bGUnO1xuaW1wb3J0IHt0cmFuc2l0aW9ufSBmcm9tICcuLi91dGlscy9hbmltYXRpb24nO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59ICovXG5leHBvcnQgY29uc3QgdG9hc3RJbXBvcnRhbnRTdHlsZXMgPSB7XG4gICdoZWlnaHQnOiAwLFxufTtcblxuLyoqIEB0eXBlZGVmIHt7XG4gKiAgICB0ZXh0OiBzdHJpbmcsXG4gKiAgICBhY3Rpb246ICh7bGFiZWw6IHN0cmluZywgaGFuZGxlcjogZnVuY3Rpb24oKX18dW5kZWZpbmVkKVxuICogIH19XG4gKi9cbmV4cG9ydCBsZXQgVG9hc3RTcGVjRGVmO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmNvbnN0IGlmcmFtZUF0dHJpYnV0ZXMgPSB7XG4gICdmcmFtZWJvcmRlcic6ICcwJyxcbiAgJ3Njcm9sbGluZyc6ICdubycsXG4gICdjbGFzcyc6ICdzd2ctdG9hc3QnLFxufTtcblxuLyoqXG4gKiBUaGUgY2xhc3MgTm90aWZpY2F0aW9uIHRvYXN0LlxuICovXG5leHBvcnQgY2xhc3MgVG9hc3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vcnVudGltZS9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCA/Pn0gYXJnc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgc3JjLCBhcmdzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZGVwcy5kb2MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zcmNfID0gc3JjO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsID8+fSAqL1xuICAgIHRoaXMuYXJnc18gPSBhcmdzO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLmFuaW1hdGluZ18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUhUTUxJRnJhbWVFbGVtZW50fSAqL1xuICAgIHRoaXMuaWZyYW1lXyA9IC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudCxcbiAgICAgICdpZnJhbWUnLFxuICAgICAgaWZyYW1lQXR0cmlidXRlc1xuICAgICkpO1xuXG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuaWZyYW1lXywgdG9hc3RJbXBvcnRhbnRTdHlsZXMpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuaWZyYW1lXy5vbmxvYWQgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGlmcmFtZSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHshSFRNTElGcmFtZUVsZW1lbnR9XG4gICAqL1xuICBnZXRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZV87XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIG5vdGlmaWNhdGlvbiB0b2FzdC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvcGVuKCkge1xuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkuYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWVfKTsgLy8gRmlyZXMgb25sb2FkLlxuICAgIHJldHVybiB0aGlzLmJ1aWxkVG9hc3RfKCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGRzIHRoZSBjb250ZW50IG9mIHRoZSBpZnJhbWUuIE9uIGxvYWQsIGFuaW1hdGVzIHRoZSB0b2FzdC5cbiAgICovXG4gIGJ1aWxkVG9hc3RfKCkge1xuICAgIGNvbnN0IHRvYXN0RHVyYXRpb25TZWNvbmRzID0gNztcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eVBvcnRzX1xuICAgICAgLm9wZW5JZnJhbWUodGhpcy5pZnJhbWVfLCB0aGlzLnNyY18sIHRoaXMuYXJnc18pXG4gICAgICAudGhlbihwb3J0ID0+IHtcbiAgICAgICAgcmV0dXJuIHBvcnQud2hlblJlYWR5KCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXNldFN0eWxlcyh0aGlzLmlmcmFtZV8sIFsnaGVpZ2h0J10pO1xuXG4gICAgICAgIHRoaXMuYW5pbWF0ZV8oKCkgPT4ge1xuICAgICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmlmcmFtZV8sIHtcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgxMDAlKScsXG4gICAgICAgICAgICAnb3BhY3RpeSc6IDEsXG4gICAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lXyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKDApJyxcbiAgICAgICAgICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA0MDAsXG4gICAgICAgICAgICAnZWFzZS1vdXQnXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2xvc2UgdGhlIFRvYXN0IGFmdGVyIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24uXG4gICAgICAgIHRoaXMuZG9jXy5nZXRXaW4oKS5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0sICh0b2FzdER1cmF0aW9uU2Vjb25kcyArIDEpICogMTAwMCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IVByb21pc2V9IGNhbGxiYWNrXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYW5pbWF0ZV8oY2FsbGJhY2spIHtcbiAgICBjb25zdCB3YWl0ID0gdGhpcy5hbmltYXRpbmdfIHx8IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIHJldHVybiAodGhpcy5hbmltYXRpbmdfID0gd2FpdFxuICAgICAgLnRoZW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvcnMgdG8gbWFrZSBzdXJlIGFuaW1hdGlvbnMgZG9uJ3QgZ2V0IHN0dWNrLlxuICAgICAgICB9XG4gICAgICApXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW5nXyA9IG51bGw7XG4gICAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSB0b2FzdC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hbmltYXRlXygoKSA9PiB7XG4gICAgICAvLyBSZW1vdmUgdGhlIHRvYXN0IGZyb20gdGhlIERPTSBhZnRlciBhbmltYXRpb24gaXMgY29tcGxldGUuXG4gICAgICB0aGlzLmRvY18uZ2V0V2luKCkuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkucmVtb3ZlQ2hpbGQodGhpcy5pZnJhbWVfKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgfSwgNTAwKTtcblxuICAgICAgcmV0dXJuIHRyYW5zaXRpb24oXG4gICAgICAgIHRoaXMuaWZyYW1lXyxcbiAgICAgICAge1xuICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgxMDAlKScsXG4gICAgICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAgICAgICB9LFxuICAgICAgICA0MDAsXG4gICAgICAgICdlYXNlLW91dCdcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0geyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0RGVmfSBwb3J0XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWlyZU9yaWdpblxuICogQHBhcmFtIHtib29sZWFufSByZXF1aXJlT3JpZ2luVmVyaWZpZWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZVNlY3VyZUNoYW5uZWxcbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWNjZXB0UG9ydFJlc3VsdERhdGEoXG4gIHBvcnQsXG4gIHJlcXVpcmVPcmlnaW4sXG4gIHJlcXVpcmVPcmlnaW5WZXJpZmllZCxcbiAgcmVxdWlyZVNlY3VyZUNoYW5uZWxcbikge1xuICByZXR1cm4gcG9ydC5hY2NlcHRSZXN1bHQoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgaWYgKFxuICAgICAgcmVzdWx0Lm9yaWdpbiAhPSByZXF1aXJlT3JpZ2luIHx8XG4gICAgICAocmVxdWlyZU9yaWdpblZlcmlmaWVkICYmICFyZXN1bHQub3JpZ2luVmVyaWZpZWQpIHx8XG4gICAgICAocmVxdWlyZVNlY3VyZUNoYW5uZWwgJiYgIXJlc3VsdC5zZWN1cmVDaGFubmVsKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFubmVsIG1pc21hdGNoJyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7c2V0SW1wb3J0YW50U3R5bGVzfSBmcm9tICcuL3N0eWxlJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZCBhZnRlciB0aGUgZ2l2ZW4gZHVyYXRpb24gb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbCAtIEVsZW1lbnQgdG8gYmUgb2JzZXJ2ZWQuXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn0gcHJvcHMgLSBwcm9wZXJ0aWVzIHRvIGJlIGFuaW1hdGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uTWlsbGlzIC0gZHVyYXRpb24gb2YgYW5pbWF0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGN1cnZlIC0gdHJhbnNpdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGFuaW1hdGlvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlfSBQcm9taXNlIHdoaWNoIHJlc29sdmVzIG9uY2UgdGhlIGFuaW1hdGlvbiBpcyBkb25lIHBsYXlpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2l0aW9uKGVsLCBwcm9wcywgZHVyYXRpb25NaWxsaXMsIGN1cnZlKSB7XG4gIGNvbnN0IHdpbiA9IGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gIGNvbnN0IHByZXZpb3VzVHJhbnNpdGlvblZhbHVlID0gZWwuc3R5bGUudHJhbnNpdGlvbiB8fCAnJztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHdpbi5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHdpbi5zZXRUaW1lb3V0KHJlc29sdmUsIGR1cmF0aW9uTWlsbGlzKTtcbiAgICAgIGNvbnN0IHRyID0gYCR7ZHVyYXRpb25NaWxsaXN9bXMgJHtjdXJ2ZX1gO1xuICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKFxuICAgICAgICBlbCxcbiAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICAndHJhbnNpdGlvbic6IGB0cmFuc2Zvcm0gJHt0cn0sIG9wYWNpdHkgJHt0cn1gLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJvcHNcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSkudGhlbigoKSA9PiB7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCB7XG4gICAgICAndHJhbnNpdGlvbic6IHByZXZpb3VzVHJhbnNpdGlvblZhbHVlLFxuICAgIH0pO1xuICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vbG9nJztcblxuLyoqXG4gKiBDaGFyYWN0ZXIgbWFwcGluZyBmcm9tIGJhc2U2NHVybCB0byBiYXNlNjQuXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5jb25zdCBiYXNlNjRVcmxEZWNvZGVTdWJzID0geyctJzogJysnLCAnXyc6ICcvJywgJy4nOiAnPSd9O1xuXG4vKipcbiAqIENoYXJhY3RlciBtYXBwaW5nIGZyb20gYmFzZTY0IHRvIGJhc2U2NHVybC5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IGJhc2U2NFVybEVuY29kZVN1YnMgPSB7JysnOiAnLScsICcvJzogJ18nfTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyB3aGljaCBob2xkcyA4LWJpdCBjb2RlIHBvaW50cywgc3VjaCBhcyB0aGUgcmVzdWx0IG9mIGF0b2IsXG4gKiBpbnRvIGEgVWludDhBcnJheSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGJ5dGVzLlxuICogSWYgeW91IGhhdmUgYSBzdHJpbmcgb2YgY2hhcmFjdGVycywgeW91IHByb2JhYmx5IHdhbnQgdG8gYmUgdXNpbmcgdXRmOEVuY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShzdHIubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGFzc2VydChjaGFyQ29kZSA8PSAyNTUsICdDaGFyYWN0ZXJzIG11c3QgYmUgaW4gcmFuZ2UgWzAsMjU1XScpO1xuICAgIGJ5dGVzW2ldID0gY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgOC1iaXQgYnl0ZXMgYXJyYXkgaW50byBhIHN0cmluZ1xuICogQHBhcmFtIHshVWludDhBcnJheX0gYnl0ZXNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVzVG9TdHJpbmcoYnl0ZXMpIHtcbiAgLy8gSW50ZW50aW9uYWxseSBhdm9pZHMgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSBzbyB3ZSBkb24ndCBzdWZmZXIgYVxuICAvLyBzdGFjayBvdmVyZmxvdy4gIzEwNDk1LCBodHRwczovL2pzcGVyZi5jb20vYnl0ZXNUb1N0cmluZy0yXG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5KGJ5dGVzLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJheVtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pO1xuICB9XG4gIHJldHVybiBhcnJheS5qb2luKCcnKTtcbn1cblxuLyoqXG4gKiBJbnRlcnByZXQgYSBieXRlIGFycmF5IGFzIGEgVVRGLTggc3RyaW5nLlxuICogQHBhcmFtIHshQnVmZmVyU291cmNlfSBieXRlc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXRmOERlY29kZVN5bmMoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShieXRlcyk7XG4gIH1cbiAgY29uc3QgYXNjaWlTdHJpbmcgPSBieXRlc1RvU3RyaW5nKG5ldyBVaW50OEFycmF5KGJ5dGVzLmJ1ZmZlciB8fCBieXRlcykpO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhc2NpaVN0cmluZykpO1xufVxuXG4vKipcbiAqIFR1cm4gYSBzdHJpbmcgaW50byBVVEYtOCBieXRlcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXRmOEVuY29kZVN5bmMoc3RyaW5nKSB7XG4gIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigndXRmLTgnKS5lbmNvZGUoc3RyaW5nKTtcbiAgfVxuICByZXR1cm4gc3RyaW5nVG9CeXRlcyh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSkpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHdoaWNoIGlzIGluIGJhc2U2NHVybCBlbmNvZGluZyBpbnRvIGEgVWludDhBcnJheVxuICogY29udGFpbmluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VXJsRGVjb2RlVG9CeXRlcyhzdHIpIHtcbiAgY29uc3QgZW5jb2RlZCA9IGF0b2Ioc3RyLnJlcGxhY2UoL1stXy5dL2csIGNoID0+IGJhc2U2NFVybERlY29kZVN1YnNbY2hdKSk7XG4gIHJldHVybiBzdHJpbmdUb0J5dGVzKGVuY29kZWQpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnl0ZXMgYXJyYXkgaW50byBiYXNlNjR1cmwgZW5jb2RlZCBzdHJpbmcuXG4gKiBiYXNlNjR1cmwgaXMgZGVmaW5lZCBpbiBSRkMgNDY0OC4gSXQgaXMgc29tZXRpbWVzIHJlZmVycmVkIHRvIGFzIFwid2ViIHNhZmVcIi5cbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRVcmxFbmNvZGVGcm9tQnl0ZXMoYnl0ZXMpIHtcbiAgY29uc3Qgc3RyID0gYnl0ZXNUb1N0cmluZyhieXRlcyk7XG4gIHJldHVybiBidG9hKHN0cikucmVwbGFjZSgvWysvXS9nLCBjaCA9PiBiYXNlNjRVcmxFbmNvZGVTdWJzW2NoXSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRSZWFkeVN0YXRlKGRvYykge1xuICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChkb2NbJ3JlYWR5U3RhdGUnXSk7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEb2N1bWVudFJlYWR5KGRvYykge1xuICBjb25zdCByZWFkeVN0YXRlID0gZ2V0UmVhZHlTdGF0ZShkb2MpO1xuICByZXR1cm4gcmVhZHlTdGF0ZSAhPSAnbG9hZGluZycgJiYgcmVhZHlTdGF0ZSAhPSAndW5pbml0aWFsaXplZCc7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaGFzIGxvYWRlZCBhbGwgdGhlIGNzcyBhbmQgc3ViLXJlc291cmNlcy5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRG9jdW1lbnRDb21wbGV0ZShkb2MpIHtcbiAgcmV0dXJuIGdldFJlYWR5U3RhdGUoZG9jKSA9PSAnY29tcGxldGUnO1xufVxuXG4vKipcbiAqIENhbGxzIHRoZSBjYWxsYmFjayB3aGVuIGRvY3VtZW50IGlzIHJlYWR5LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZnVuY3Rpb24gb25Eb2N1bWVudFJlYWR5KGRvYywgY2FsbGJhY2spIHtcbiAgb25Eb2N1bWVudFN0YXRlKGRvYywgaXNEb2N1bWVudFJlYWR5LCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gZG9jdW1lbnQncyBzdGF0ZSBzYXRpc2ZpZXMgdGhlIHN0YXRlRm4uXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFEb2N1bWVudCk6Ym9vbGVhbn0gc3RhdGVGblxuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpfSBjYWxsYmFja1xuICovXG5mdW5jdGlvbiBvbkRvY3VtZW50U3RhdGUoZG9jLCBzdGF0ZUZuLCBjYWxsYmFjaykge1xuICBsZXQgcmVhZHkgPSBzdGF0ZUZuKGRvYyk7XG4gIGlmIChyZWFkeSkge1xuICAgIGNhbGxiYWNrKGRvYyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVhZHlMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIGlmIChzdGF0ZUZuKGRvYykpIHtcbiAgICAgICAgaWYgKCFyZWFkeSkge1xuICAgICAgICAgIHJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICBjYWxsYmFjayhkb2MpO1xuICAgICAgICB9XG4gICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgcmVhZHlMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIHJlYWR5TGlzdGVuZXIpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGRvY3VtZW50IGlzIHJlYWR5LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7IVByb21pc2U8IURvY3VtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW5Eb2N1bWVudFJlYWR5KGRvYykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgb25Eb2N1bWVudFJlYWR5KGRvYywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBkb2N1bWVudCBpcyBjb21wbGV0ZS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4geyFQcm9taXNlPCFEb2N1bWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aGVuRG9jdW1lbnRDb21wbGV0ZShkb2MpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIG9uRG9jdW1lbnRTdGF0ZShkb2MsIGlzRG9jdW1lbnRDb21wbGV0ZSwgcmVzb2x2ZSk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtzZXRTdHlsZXN9IGZyb20gJy4vc3R5bGUnO1xuXG4vKiogQGNvbnN0IEBlbnVte3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBzdHlsZUxpbmtBdHRycyA9IHtcbiAgJ3JlbCc6ICdzdHlsZXNoZWV0JyxcbiAgJ3R5cGUnOiAndGV4dC9jc3MnLFxufTtcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IHN0eWxlVHlwZSA9ICd0ZXh0L2Nzcyc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBzdHlsZUV4aXN0c1F1ZXJ5U2VsZWN0b3IgPSAnbGlua1tyZWw9c3R5bGVzaGVldF1baHJlZl0nO1xuXG4vKipcbiAqIEFkZCBhdHRyaWJ1dGVzIHRvIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyfGJvb2xlYW58IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXJ8Ym9vbGVhbj4+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gdXBkYXRlZCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQXR0cmlidXRlc1RvRWxlbWVudChlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gIGZvciAoY29uc3QgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKGF0dHIgPT0gJ3N0eWxlJykge1xuICAgICAgc2V0U3R5bGVzKFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8Ym9vbGVhbnxudW1iZXI+fSAqL1xuICAgICAgICAoYXR0cmlidXRlc1thdHRyXSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICBhdHRyLFxuICAgICAgICAvKiogQHR5cGUge3N0cmluZ3xib29sZWFufG51bWJlcn0gKi8gKGF0dHJpYnV0ZXNbYXR0cl0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZWxlbWVudCBvbiBkb2N1bWVudCB3aXRoIHNwZWNpZmllZCB0YWdOYW1lIGFuZCBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7PyhzdHJpbmd8IU5vZGV8IUFycmF5TGlrZTwhTm9kZT58IUFycmF5PCFOb2RlPik9fSBvcHRfY29udGVudFxuICogQHJldHVybiB7IUVsZW1lbnR9IGNyZWF0ZWQgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZG9jLCB0YWdOYW1lLCBhdHRyaWJ1dGVzLCBvcHRfY29udGVudCkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gIGFkZEF0dHJpYnV0ZXNUb0VsZW1lbnQoZWxlbWVudCwgYXR0cmlidXRlcyk7XG4gIGlmIChvcHRfY29udGVudCAhPSBudWxsKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRfY29udGVudCA9PSAnc3RyaW5nJykge1xuICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IG9wdF9jb250ZW50O1xuICAgIH0gZWxzZSBpZiAob3B0X2NvbnRlbnQubm9kZVR5cGUpIHtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0X2NvbnRlbnQpO1xuICAgIH0gZWxzZSBpZiAoJ2xlbmd0aCcgaW4gb3B0X2NvbnRlbnQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0X2NvbnRlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvcHRfY29udGVudFtpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydChmYWxzZSwgJ1Vuc3VwcG9ydGVkIGNvbnRlbnQ6ICVzJywgb3B0X2NvbnRlbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBjaGlsZHJlbiBmcm9tIHRoZSBwYXJlbnQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KSB7XG4gIHBhcmVudC50ZXh0Q29udGVudCA9ICcnO1xufVxuXG4vKipcbiAqIEluamVjdHMgdGhlIHByb3ZpZGVkIHN0eWxlcyBpbiB0aGUgSEVBRCBzZWN0aW9uIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvYyBUaGUgZG9jdW1lbnQgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlVGV4dCBUaGUgc3R5bGUgc3RyaW5nLlxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RTdHlsZVNoZWV0KGRvYywgc3R5bGVUZXh0KSB7XG4gIGNvbnN0IHN0eWxlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoZG9jLmdldFdpbigpLmRvY3VtZW50LCAnc3R5bGUnLCB7XG4gICAgJ3R5cGUnOiBzdHlsZVR5cGUsXG4gIH0pO1xuICBzdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHlsZVRleHQ7XG4gIGRvYy5nZXRIZWFkKCkuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgcmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGhhdmUgYSBuZXh0IG5vZGUgaW4gdGhlIGRvY3VtZW50IG9yZGVyLlxuICogVGhpcyBtZWFucyBlaXRoZXI6XG4gKiAgYS4gVGhlIGVsZW1lbnQgaXRzZWxmIGhhcyBhIG5leHRTaWJsaW5nLlxuICogIGIuIEFueSBvZiB0aGUgZWxlbWVudCBhbmNlc3RvcnMgaGFzIGEgbmV4dFNpYmxpbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gez9Ob2RlPX0gb3B0X3N0b3BOb2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzTmV4dE5vZGVJbkRvY3VtZW50T3JkZXIoZWxlbWVudCwgb3B0X3N0b3BOb2RlKSB7XG4gIGxldCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gIGRvIHtcbiAgICBpZiAoY3VycmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSB3aGlsZSAoXG4gICAgKGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZSkgJiZcbiAgICBjdXJyZW50RWxlbWVudCAhPSBvcHRfc3RvcE5vZGVcbiAgKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFBvbHlmaWxsIG9mIHRoZSBgTm9kZS5pc0Nvbm5lY3RlZGAgQVBJLiBTZWVcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL2lzQ29ubmVjdGVkLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29ubmVjdGVkKG5vZGUpIHtcbiAgLy8gRW5zdXJlIHRoYXQgbm9kZSBpcyBhdHRhY2hlZCBpZiBzcGVjaWZpZWQuIFRoaXMgY2hlY2sgdXNlcyBhIG5ldyBhbmRcbiAgLy8gZmFzdCBgaXNDb25uZWN0ZWRgIEFQSSBhbmQgdGh1cyBvbmx5IGNoZWNrZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBpdC5cbiAgLy8gU2VlIGh0dHBzOi8vd3d3LmNocm9tZXN0YXR1cy5jb20vZmVhdHVyZS81Njc2MTEwNTQ5MzUyNDQ4LlxuICBpZiAoJ2lzQ29ubmVjdGVkJyBpbiBub2RlKSB7XG4gICAgcmV0dXJuIG5vZGVbJ2lzQ29ubmVjdGVkJ107XG4gIH1cbiAgLy8gUG9seWZpbGwuXG4gIGNvbnN0IHJvb3QgPSBub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgcmV0dXJuIChyb290ICYmIHJvb3QuY29udGFpbnMobm9kZSkpIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFZGdlQnJvd3Nlcih3aW4pIHtcbiAgY29uc3QgbmF2ID0gd2luLm5hdmlnYXRvcjtcbiAgcmV0dXJuIC9FZGdlL2kudGVzdChuYXYgJiYgbmF2LnVzZXJBZ2VudCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlQWJvcnRFcnJvciwgaXNBYm9ydEVycm9yfSBmcm9tICd3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cyc7XG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIGVycm9yIGlzIGFuIEFib3J0RXJyb3IgdHlwZS5cbiAqIFNlZSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNhYm9ydGVycm9yLlxuICogQHBhcmFtIHsqfSBlcnJvclxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FuY2VsRXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuIGlzQWJvcnRFcnJvcihlcnJvcik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBvciBlbXVsYXRlcyBhIERPTUV4Y2VwdGlvbiBvZiBBYm9ydEVycm9yIHR5cGUuXG4gKiBTZWUgaHR0cHM6Ly9oZXljYW0uZ2l0aHViLmlvL3dlYmlkbC8jYWJvcnRlcnJvci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlXG4gKiBAcmV0dXJuIHshRE9NRXhjZXB0aW9ufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FuY2VsRXJyb3Iod2luLCBvcHRfbWVzc2FnZSkge1xuICByZXR1cm4gY3JlYXRlQWJvcnRFcnJvcih3aW4sIG9wdF9tZXNzYWdlKTtcbn1cblxuLyoqXG4gKiBBIHNldCBvZiBlcnJvciB1dGlsaXRpZXMgY29tYmluZWQgaW4gYSBjbGFzcyB0byBhbGxvdyBlYXN5IHN0dWJiaW5nIGluIHRlc3RzLlxuICovXG5leHBvcnQgY2xhc3MgRXJyb3JVdGlscyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICovXG4gIHN0YXRpYyB0aHJvd0FzeW5jKGVycm9yKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59IG1hcFxuICogQHBhcmFtIHs/c3RyaW5nfD9FbGVtZW50fSBsYW5nT3JFbGVtZW50XG4gKiBAcmV0dXJuIHs/c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbXNnKG1hcCwgbGFuZ09yRWxlbWVudCkge1xuICBjb25zdCBsYW5nID0gIWxhbmdPckVsZW1lbnRcbiAgICA/ICcnXG4gICAgOiB0eXBlb2YgbGFuZ09yRWxlbWVudCA9PSAnc3RyaW5nJ1xuICAgID8gbGFuZ09yRWxlbWVudFxuICAgIDogbGFuZ09yRWxlbWVudC5sYW5nIHx8XG4gICAgICAobGFuZ09yRWxlbWVudC5vd25lckRvY3VtZW50ICYmXG4gICAgICAgIGxhbmdPckVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyk7XG4gIGxldCBzZWFyY2ggPSAoKGxhbmcgJiYgbGFuZy50b0xvd2VyQ2FzZSgpKSB8fCAnZW4nKS5yZXBsYWNlKC9fL2csICctJyk7XG4gIHdoaWxlIChzZWFyY2gpIHtcbiAgICBpZiAoc2VhcmNoIGluIG1hcCkge1xuICAgICAgcmV0dXJuIG1hcFtzZWFyY2hdO1xuICAgIH1cbiAgICBjb25zdCBkYXNoID0gc2VhcmNoLmxhc3RJbmRleE9mKCctJyk7XG4gICAgc2VhcmNoID0gZGFzaCAhPSAtMSA/IHNlYXJjaC5zdWJzdHJpbmcoMCwgZGFzaCkgOiAnJztcbiAgfVxuICAvLyBcImVuXCIgaXMgYWx3YXlzIGRlZmF1bHQuXG4gIHJldHVybiBtYXBbJ2VuJ107XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBUaGlzIG1vZHVsZSBkZWNsYXJlcyBKU09OIHR5cGVzIGFzIGRlZmluZWQgaW4gdGhlXG4gKiB7QGxpbmsgaHR0cDovL2pzb24ub3JnL30uXG4gKi9cblxuaW1wb3J0IHtpc09iamVjdH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogUmVjcmVhdGVzIG9iamVjdHMgd2l0aCBwcm90b3R5cGUtbGVzcyBjb3BpZXMuXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBvYmpcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVjcmVhdGVOb25Qcm90b09iamVjdChvYmopIHtcbiAgY29uc3QgY29weSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCB2ID0gb2JqW2tdO1xuICAgIGNvcHlba10gPSBpc09iamVjdCh2KSA/IHJlY3JlYXRlTm9uUHJvdG9PYmplY3QodikgOiB2O1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoY29weSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZyb20gYW4gb2JqZWN0IGZvciBhIGZpZWxkLWJhc2VkIGV4cHJlc3Npb24uIFRoZSBleHByZXNzaW9uXG4gKiBpcyBhIHNpbXBsZSBuZXN0ZWQgZG90LW5vdGF0aW9uIG9mIGZpZWxkcywgc3VjaCBhcyBgZmllbGQxLmZpZWxkMmAuIElmIGFueVxuICogZmllbGQgaW4gYSBjaGFpbiBkb2VzIG5vdCBleGlzdCBvciBpcyBub3QgYW4gb2JqZWN0LCB0aGUgcmV0dXJuZWQgdmFsdWUgd2lsbFxuICogYmUgYHVuZGVmaW5lZGAuXG4gKlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwclxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlRm9yRXhwcihvYmosIGV4cHIpIHtcbiAgLy8gVGhlIGAuYCBpbmRpY2F0ZXMgXCJ0aGUgb2JqZWN0IGl0c2VsZlwiLlxuICBpZiAoZXhwciA9PSAnLicpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIC8vIE90aGVyd2lzZSwgbmF2aWdhdGUgdmlhIHByb3BlcnRpZXMuXG4gIGNvbnN0IHBhcnRzID0gZXhwci5zcGxpdCgnLicpO1xuICBsZXQgdmFsdWUgPSBvYmo7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwYXJ0ID0gcGFydHNbaV07XG4gICAgaWYgKCFwYXJ0KSB7XG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAhaXNPYmplY3QodmFsdWUpIHx8XG4gICAgICB2YWx1ZVtwYXJ0XSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAhaGFzT3duUHJvcGVydHkodmFsdWUsIHBhcnQpXG4gICAgKSB7XG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB2YWx1ZSA9IHZhbHVlW3BhcnRdO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgSlNPTi5wYXJzZSB0aGF0IGNhc3RzIHRoZSByZXR1cm4gdmFsdWVcbiAqIHRvIEpzb25PYmplY3QuXG4gKiBDcmVhdGUgYSBuZXcgd3JhcHBlciBpZiBhbiBhcnJheSByZXR1cm4gdmFsdWUgaXMgZGVzaXJlZC5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHN0cmluZyB0byBwYXJzZVxuICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfSBNYXkgYmUgZXh0ZW5kIHRvIHBhcnNlIGFycmF5cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbihqc29uKSB7XG4gIHJldHVybiAvKiogQHR5cGUgez9Kc29uT2JqZWN0fSAqLyAoSlNPTi5wYXJzZSgvKiogQHR5cGUge3N0cmluZ30gKi8gKGpzb24pKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBganNvbmAgc3RyaW5nIHdpdGhvdXQgdGhyb3dpbmcgYW4gZXhjZXB0aW9uIGlmIG5vdCB2YWxpZC5cbiAqIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgcGFyc2luZyBmYWlscy5cbiAqIFJldHVybnMgdGhlIGBPYmplY3RgIGNvcnJlc3BvbmRpbmcgdG8gdGhlIEpTT04gc3RyaW5nIHdoZW4gcGFyc2luZyBzdWNjZWVkcy5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHN0cmluZyB0byBwYXJzZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpPX0gb3B0X29uRmFpbGVkIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWRcbiAqICAgICB3aXRoIHRoZSBlcnJvciBpZiBwYXJzaW5nIGZhaWxzLlxuICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfSBNYXkgYmUgZXh0ZW5kIHRvIHBhcnNlIGFycmF5cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeVBhcnNlSnNvbihqc29uLCBvcHRfb25GYWlsZWQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VKc29uKGpzb24pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKG9wdF9vbkZhaWxlZCkge1xuICAgICAgb3B0X29uRmFpbGVkKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwga2V5KSB7XG4gIGlmIChvYmogPT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAob2JqKSxcbiAgICBrZXlcbiAgKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtiYXNlNjRVcmxEZWNvZGVUb0J5dGVzLCB1dGY4RGVjb2RlU3luY30gZnJvbSAnLi9ieXRlcyc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi9qc29uJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBoZWFkZXI6ICg/SnNvbk9iamVjdHx1bmRlZmluZWQpLFxuICogICBwYXlsb2FkOiAoP0pzb25PYmplY3R8dW5kZWZpbmVkKSxcbiAqICAgdmVyaWZpYWJsZTogc3RyaW5nLFxuICogICBzaWc6IHN0cmluZyxcbiAqIH19XG4gKi9cbmxldCBKd3RUb2tlbkludGVybmFsRGVmO1xuXG4vKipcbiAqIFByb3ZpZGVzIGhlbHBlciBtZXRob2RzIHRvIGRlY29kZSBhbmQgdmVyaWZ5IEpXVCB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBKd3RIZWxwZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgLyoqXG4gICAqIERlY29kZXMgSldUIHRva2VuIGFuZCByZXR1cm5zIGl0cyBwYXlsb2FkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RlZFRva2VuXG4gICAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHVuZGVmaW5lZH1cbiAgICovXG4gIGRlY29kZShlbmNvZGVkVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5kZWNvZGVJbnRlcm5hbF8oZW5jb2RlZFRva2VuKS5wYXlsb2FkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGVkVG9rZW5cbiAgICogQHJldHVybiB7IUp3dFRva2VuSW50ZXJuYWxEZWZ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWNvZGVJbnRlcm5hbF8oZW5jb2RlZFRva2VuKSB7XG4gICAgLy8gU2VlIGh0dHBzOi8vand0LmlvL2ludHJvZHVjdGlvbi9cbiAgICAvKipcbiAgICAgKiBUaHJvd3MgZXJyb3IgYWJvdXQgaW52YWxpZCB0b2tlbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZhbGlkVG9rZW4oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdG9rZW46IFwiJHtlbmNvZGVkVG9rZW59XCJgKTtcbiAgICB9XG5cbiAgICAvLyBFbmNvZGVkIHRva2VuIGhhcyB0aHJlZSBwYXJ0czogaGVhZGVyLnBheWxvYWQuc2lnXG4gICAgLy8gTm90ZSEgVGhlIHBhZGRpbmcgaXMgbm90IGFsbG93ZWQgYnkgSldUIHNwZWM6XG4gICAgLy8gaHR0cDovL3NlbGYtaXNzdWVkLmluZm8vZG9jcy9kcmFmdC1nb2xhbmQtanNvbi13ZWItdG9rZW4tMDAuaHRtbCNyZmMuc2VjdGlvbi41XG4gICAgY29uc3QgcGFydHMgPSBlbmNvZGVkVG9rZW4uc3BsaXQoJy4nKTtcbiAgICBpZiAocGFydHMubGVuZ3RoICE9IDMpIHtcbiAgICAgIGludmFsaWRUb2tlbigpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXJVdGY4Qnl0ZXMgPSBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKHBhcnRzWzBdKTtcbiAgICBjb25zdCBwYXlsb2FkVXRmOEJ5dGVzID0gYmFzZTY0VXJsRGVjb2RlVG9CeXRlcyhwYXJ0c1sxXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcjogdHJ5UGFyc2VKc29uKHV0ZjhEZWNvZGVTeW5jKGhlYWRlclV0ZjhCeXRlcyksIGludmFsaWRUb2tlbiksXG4gICAgICBwYXlsb2FkOiB0cnlQYXJzZUpzb24odXRmOERlY29kZVN5bmMocGF5bG9hZFV0ZjhCeXRlcyksIGludmFsaWRUb2tlbiksXG4gICAgICB2ZXJpZmlhYmxlOiBgJHtwYXJ0c1swXX0uJHtwYXJ0c1sxXX1gLFxuICAgICAgc2lnOiBwYXJ0c1syXSxcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogRGVidWcgbG9nZ2VyLCBvbmx5IGxvZyBtZXNzYWdlIGlmICNzd2cubG9nPTFcbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3MgW2RlY3JpcHRpb25dXG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgKi9cblxuZnVuY3Rpb24gZGVidWdMb2codmFyX2FyZ3MpIHtcbiAgaWYgKC9zd2cuZGVidWc9MS8udGVzdChzZWxmLmxvY2F0aW9uLmhhc2gpKSB7XG4gICAgY29uc3QgbG9nQXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgbG9nQXJncy51bnNoaWZ0KCdbU3Vic2NyaXB0aW9uc10nKTtcbiAgICBsb2cuYXBwbHkobG9nLCBsb2dBcmdzKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSAgey4uLip9IHZhcl9hcmdzIFtkZXNjcmlwdGlvbl1cbiAqL1xuZnVuY3Rpb24gbG9nKHZhcl9hcmdzKSB7XG4gIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG59XG5cbi8qKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCB0cnVlaXNoLlxuICpcbiAqIFN1cHBvcnRzIGFyZ3VtZW50IHN1YnN0aXR1dGlvbiBpbnRvIHRoZSBtZXNzYWdlIHZpYSAlcyBwbGFjZWhvbGRlcnMuXG4gKlxuICogVGhyb3dzIGFuIGVycm9yIG9iamVjdCB0aGF0IGhhcyB0d28gZXh0cmEgcHJvcGVydGllczpcbiAqIC0gYXNzb2NpYXRlZEVsZW1lbnQ6IFRoaXMgaXMgdGhlIGZpcnN0IGVsZW1lbnQgcHJvdmlkZWQgaW4gdGhlIHZhciBhcmdzLlxuICogICBJdCBjYW4gYmUgdXNlZCBmb3IgaW1wcm92ZWQgZGlzcGxheSBvZiBlcnJvciBtZXNzYWdlcy5cbiAqIC0gbWVzc2FnZUFycmF5OiBUaGUgZWxlbWVudHMgb2YgdGhlIHN1YnN0aXR1dGVkIG1lc3NhZ2UgYXMgbm9uLXN0cmluZ2lmaWVkXG4gKiAgIGVsZW1lbnRzIGluIGFuIGFycmF5LiBXaGVuIGUuZy4gcGFzc2VkIHRvIGNvbnNvbGUuZXJyb3IgdGhpcyB5aWVsZHNcbiAqICAgbmF0aXZlIGRpc3BsYXlzIG9mIHRoaW5ncyBsaWtlIEhUTUwgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtUfSBzaG91bGRCZVRydWVpc2ggVGhlIHZhbHVlIHRvIGFzc2VydC4gVGhlIGFzc2VydCBmYWlscyBpZiBpdCBkb2VzXG4gKiAgICAgbm90IGV2YWx1YXRlIHRvIHRydWUuXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJncyBBcmd1bWVudHMgc3Vic3RpdHV0ZWQgaW50byAlcyBpbiB0aGUgbWVzc2FnZS5cbiAqIEByZXR1cm4ge1R9IFRoZSB2YWx1ZSBvZiBzaG91bGRCZVRydWVpc2guXG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBhc3NlcnQoc2hvdWxkQmVUcnVlaXNoLCBvcHRfbWVzc2FnZSwgdmFyX2FyZ3MpIHtcbiAgbGV0IGZpcnN0RWxlbWVudDtcbiAgaWYgKCFzaG91bGRCZVRydWVpc2gpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gb3B0X21lc3NhZ2UgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnO1xuICAgIGNvbnN0IHNwbGl0TWVzc2FnZSA9IG1lc3NhZ2Uuc3BsaXQoJyVzJyk7XG4gICAgY29uc3QgZmlyc3QgPSBzcGxpdE1lc3NhZ2Uuc2hpZnQoKTtcbiAgICBsZXQgZm9ybWF0dGVkID0gZmlyc3Q7XG4gICAgY29uc3QgbWVzc2FnZUFycmF5ID0gW107XG4gICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBmaXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHZhbCA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGlmICh2YWwgJiYgdmFsLnRhZ05hbWUpIHtcbiAgICAgICAgZmlyc3RFbGVtZW50ID0gdmFsO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV4dENvbnN0YW50ID0gc3BsaXRNZXNzYWdlLnNoaWZ0KCk7XG4gICAgICBtZXNzYWdlQXJyYXkucHVzaCh2YWwpO1xuICAgICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBuZXh0Q29uc3RhbnQudHJpbSgpKTtcbiAgICAgIGZvcm1hdHRlZCArPSB0b1N0cmluZyh2YWwpICsgbmV4dENvbnN0YW50O1xuICAgIH1cbiAgICBjb25zdCBlID0gbmV3IEVycm9yKGZvcm1hdHRlZCk7XG4gICAgZS5mcm9tQXNzZXJ0ID0gdHJ1ZTtcbiAgICBlLmFzc29jaWF0ZWRFbGVtZW50ID0gZmlyc3RFbGVtZW50O1xuICAgIGUubWVzc2FnZUFycmF5ID0gbWVzc2FnZUFycmF5O1xuICAgIHRocm93IGU7XG4gIH1cbiAgcmV0dXJuIHNob3VsZEJlVHJ1ZWlzaDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFBcnJheX0gYXJyYXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cbmZ1bmN0aW9uIHB1c2hJZk5vbkVtcHR5KGFycmF5LCB2YWwpIHtcbiAgaWYgKHZhbCAhPSAnJykge1xuICAgIGFycmF5LnB1c2godmFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b1N0cmluZyh2YWwpIHtcbiAgLy8gRG8gY2hlY2sgZXF1aXZhbGVudCB0byBgdmFsIGluc3RhbmNlb2YgRWxlbWVudGAgd2l0aG91dCBjcm9zcy13aW5kb3cgYnVnXG4gIGlmICh2YWwgJiYgdmFsLm5vZGVUeXBlID09IDEpIHtcbiAgICByZXR1cm4gdmFsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICh2YWwuaWQgPyAnIycgKyB2YWwuaWQgOiAnJyk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodmFsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFzc2VydCxcbiAgZGVidWdMb2csXG4gIGxvZ1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGEgbWFwLWxpa2Ugb2JqZWN0LlxuICogSWYgb3B0X2luaXRpYWwgaXMgcHJvdmlkZWQsIGNvcGllcyBpdHMgb3duIHByb3BlcnRpZXMgaW50byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfaW5pdGlhbCBUaGlzIHNob3VsZCB0eXBpY2FsbHkgYmUgYW4gb2JqZWN0IGxpdGVyYWwuXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChvcHRfaW5pdGlhbCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAob3B0X2luaXRpYWwpIHtcbiAgICBPYmplY3QuYXNzaWduKG9iaiwgb3B0X2luaXRpYWwpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBgQXJyYXkuZmluZCgpYCBtZXRob2QgdGhhdCdzIG5vdCB5ZXQgYXZhaWxhYmxlIGluIGFsbCBicm93c2Vycy5cbiAqXG4gKiBAcGFyYW0gez9BcnJheTxUPn0gYXJyYXlcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCAhQXJyYXk8VD4pOmJvb2xlYW59IHByZWRpY2F0ZVxuICogQHJldHVybiB7P1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEluQXJyYXkoYXJyYXksIHByZWRpY2F0ZSkge1xuICBpZiAoIWFycmF5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgbGVuID0gYXJyYXkubGVuZ3RoIHx8IDA7XG4gIGlmIChsZW4gPiAwKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3Qgb3RoZXIgPSBhcnJheVtpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob3RoZXIsIGksIGFycmF5KSkge1xuICAgICAgICByZXR1cm4gb3RoZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2NyZWF0ZUVsZW1lbnR9IGZyb20gJy4vZG9tJztcblxuZXhwb3J0IGNsYXNzIFByZWNvbm5lY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqL1xuICBwcmVjb25uZWN0KHVybCkge1xuICAgIHRoaXMucHJlXyh1cmwsICdwcmVjb25uZWN0Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgZG5zUHJlZmV0Y2godXJsKSB7XG4gICAgdGhpcy5wcmVfKHVybCwgJ2Rucy1wcmVmZXRjaCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICovXG4gIHByZWZldGNoKHVybCkge1xuICAgIHRoaXMucHJlXyh1cmwsICdwcmVjb25uZWN0IHByZWZldGNoJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXNcbiAgICovXG4gIHByZWxvYWQodXJsLCBhcykge1xuICAgIHRoaXMucHJlXyh1cmwsICdwcmVjb25uZWN0IHByZWxvYWQnLCBhcyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF9hc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJlXyh1cmwsIHJlbCwgb3B0X2FzKSB7XG4gICAgLy8gPGxpbmsgcmVsPVwicHJlZmV0Y2hcIiBocmVmPVwiLi4uXCIgYXM9XCJcIj5cbiAgICBjb25zdCBsaW5rRWwgPSBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXywgJ2xpbmsnLCB7XG4gICAgICAncmVsJzogcmVsLFxuICAgICAgJ2hyZWYnOiB1cmwsXG4gICAgfSk7XG4gICAgaWYgKG9wdF9hcykge1xuICAgICAgbGlua0VsLnNldEF0dHJpYnV0ZSgnYXMnLCBvcHRfYXMpO1xuICAgIH1cbiAgICB0aGlzLmRvY18uaGVhZC5hcHBlbmRDaGlsZChsaW5rRWwpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiByYW5kb20gdmFsdWVzLiAgVGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkgaXMgbnVtSW50cy4gIEVhY2hcbiAqIGludCB3aWxsIGJlID49IDAgYW5kIDwgbWF4VmFsLlxuICogQHBhcmFtIHshbnVtYmVyfSBudW1JbnRzXG4gKiBAcGFyYW0geyFudW1iZXJ9IG1heFZhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50cyhudW1JbnRzLCBtYXhWYWwpIHtcbiAgLy8gRW5zdXJlIGFycmF5IHR5cGUgaXMgYXBwcm9wcmlhdGUgZm9yIHRoZSBtYXggdmFsdWUgKHBlcmZvcm1hbmNlKVxuICBjb25zdCBhcnIgPVxuICAgIG1heFZhbCA8IDI1NlxuICAgICAgPyBuZXcgVWludDhBcnJheShudW1JbnRzKVxuICAgICAgOiBtYXhWYWwgPCAzMjc2OFxuICAgICAgPyBuZXcgVWludDE2QXJyYXkobnVtSW50cylcbiAgICAgIDogbmV3IFVpbnQzMkFycmF5KG51bUludHMpO1xuXG4gIGlmIChjcnlwdG8gJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyKTtcbiAgICBmb3IgKGxldCBpID0gYXJyLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgICBhcnJbaV0gPSBhcnJbaV0gJSBtYXhWYWw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgIGZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICAgIGFycltpXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heFZhbCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFycjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtnZXRSYW5kb21JbnRzfSBmcm9tICcuL3JhbmRvbSc7XG5cbmNvbnN0IENIQVJTID0gJzAxMjM0NTY3ODlBQkNERUYnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBfbWF0Y2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9VcHBlckNhc2UoX21hdGNoLCBjaGFyYWN0ZXIpIHtcbiAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIHdpdGggZGFzaGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IERhc2hlcyByZW1vdmVkIGFuZCBjaGFyYWN0ZXIgYWZ0ZXIgdG8gdXBwZXIgY2FzZS5cbiAqIHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9DYW1lbENhc2UobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC8tKFthLXpdKS9nLCB0b1VwcGVyQ2FzZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWUgd2l0aCBkYXNoZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gRGFzaGVzIHJlcGxhY2VkIGJ5IHVuZGVybGluZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9VbmRlcmxpbmUobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKCctJywgJ18nKTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWZmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsIHN1ZmZpeCkge1xuICBjb25zdCBpbmRleCA9IHN0cmluZy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHJpbmcuaW5kZXhPZihzdWZmaXgsIGluZGV4KSA9PSBpbmRleDtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCBwcmVmaXgpIHtcbiAgaWYgKHByZWZpeC5sZW5ndGggPiBzdHJpbmcubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YocHJlZml4LCAwKSA9PSAwO1xufVxuXG4vKipcbiAqIEV4cGFuZHMgcGxhY2Vob2xkZXJzIGluIGEgZ2l2ZW4gdGVtcGxhdGUgc3RyaW5nIHdpdGggdmFsdWVzLlxuICpcbiAqIFBsYWNlaG9sZGVycyB1c2UgJHtrZXktbmFtZX0gc3ludGF4IGFuZCBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAqIHJldHVybmVkIGZyb20gdGhlIGdpdmVuIGdldHRlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGhlIHRlbXBsYXRlIHN0cmluZyB0byBleHBhbmQuXG4gKiBAcGFyYW0geyFmdW5jdGlvbihzdHJpbmcpOip9IGdldHRlciBGdW5jdGlvbiB1c2VkIHRvIHJldHJpZXZlIGEgdmFsdWUgZm9yIGFcbiAqICAgcGxhY2Vob2xkZXIuIFJldHVybnMgdmFsdWVzIHdpbGwgYmUgY29lcmNlZCBpbnRvIHN0cmluZ3MuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhJdGVyYXRpb25zIE51bWJlciBvZiB0aW1lcyB0byBleHBhbmQgdGhlIHRlbXBsYXRlLlxuICogICBEZWZhdWx0cyB0byAxLCBidXQgc2hvdWxkIGJlIHNldCB0byBhIGxhcmdlciB2YWx1ZSB5b3VyIHBsYWNlaG9sZGVyIHRva2Vuc1xuICogICBjYW4gYmUgZXhwYW5kZWQgdG8gb3RoZXIgcGxhY2Vob2xkZXIgdG9rZW5zLiBUYWtlIGNhdXRpb24gd2l0aCBsYXJnZSB2YWx1ZXNcbiAqICAgYXMgcmVjdXJzaXZlbHkgZXhwYW5kaW5nIGEgc3RyaW5nIGNhbiBiZSBleHBvbmVudGlhbGx5IGV4cGVuc2l2ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFRlbXBsYXRlKHRlbXBsYXRlLCBnZXR0ZXIsIG9wdF9tYXhJdGVyYXRpb25zKSB7XG4gIGNvbnN0IG1heEl0ZXJhdGlvbnMgPSBvcHRfbWF4SXRlcmF0aW9ucyB8fCAxO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEl0ZXJhdGlvbnM7IGkrKykge1xuICAgIGxldCBtYXRjaGVzID0gMDtcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xcJHsoW159XSopfS9nLCAoX2EsIGIpID0+IHtcbiAgICAgIG1hdGNoZXMrKztcbiAgICAgIHJldHVybiBnZXR0ZXIoYik7XG4gICAgfSk7XG4gICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRlbXBsYXRlO1xufVxuXG4vKipcbiAqIEhhc2ggZnVuY3Rpb24gZGpiMmFcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgYSBzaW1wbGUsIGZhc3QgaGFzaGluZyBmdW5jdGlvbiB1c2luZyBtaW5pbWFsIGNvZGUuXG4gKiBJdCBkb2VzICpub3QqIGhhdmUgZ29vZCBjcnlwdG9ncmFwaGljIHByb3BlcnRpZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IDMyLWJpdCB1bnNpZ25lZCBoYXNoIG9mIHRoZSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0hhc2gzMihzdHIpIHtcbiAgY29uc3QgbGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgbGV0IGhhc2ggPSA1MzgxO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaGFzaCA9IChoYXNoICogMzMpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgLy8gQ29udmVydCBmcm9tIDMyLWJpdCBzaWduZWQgdG8gdW5zaWduZWQuXG4gIHJldHVybiBTdHJpbmcoaGFzaCA+Pj4gMCk7XG59XG5cbi8qKlxuICogRW5zdXJlcyB0aGUgcGFzc2VkIHZhbHVlIGlzIHNhZmUgdG8gdXNlIGZvciBjaGFyYWN0ZXIgMTkgcGVyIHJmYzQxMjIsXG4gKiBzZWMuIDQuMS41LiAgXCJTZXRzIHRoZSBoaWdoIGJpdHMgb2YgY2xvY2sgc2VxdWVuY2VcIi5cbiAqIEBwYXJhbSB7IW51bWJlcn0gdlxuICovXG5mdW5jdGlvbiBnZXRDaGFyMTkodikge1xuICByZXR1cm4gQ0hBUlNbKHYgJiAweDMpIHwgMHg4XTtcbn1cblxuLyoqXG4gKiBUaGUgcmV0dXJuZWQgaWRlbnRpZmllciB3aWxsIGFsd2F5cyBiZSBhbiA4IGRpZ2l0IHZhbGlkIGhleGlkZWNpbWFsIG51bWJlclxuICogYW5kIHdpbGwgYmUgdW5pcXVlIGZvciBlYWNoIE1TIHdpdGhpbiBhIGdpdmVuIG1vbnRoLlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRNb250aGx5VGltZUlkZW50aWZpZXIoKSB7XG4gIGNvbnN0IGhleFRpbWUgPSBEYXRlLm5vdygpLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIGhleFRpbWUuc3Vic3RyaW5nKGhleFRpbWUubGVuZ3RoIC0gOCkudG9VcHBlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBSRkMgNDEyMiBWNCBVVUlELiBFeDogXCI5MjMyOUQzOS02RjVDLTQ1MjAtQUJGQy1BQUI2NDU0NEUxNzJcIlxuICogVGhlIGZpcnN0IDggZGlnaXRzIGFyZSB1bmlxdWUgZm9yIHRoZSBtaWxsaXNlY29uZCBvZiB0aGUgbW9udGguICBUaGUgcmVzdFxuICogYXJlIHJhbmRvbWx5IGdlbmVyYXRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFV1aWQoKSB7XG4gIGxldCB1dWlkID0gZ2V0TW9udGhseVRpbWVJZGVudGlmaWVyKCkgKyAnLSc7XG4gIGxldCBySW5kZXggPSAwO1xuICBjb25zdCByYW5kcyA9IGdldFJhbmRvbUludHMoMjMsIDE2KTtcbiAgZm9yIChsZXQgaSA9IDk7IGkgPCAzNjsgaSsrKSB7XG4gICAgc3dpdGNoIChpKSB7XG4gICAgICBjYXNlIDEzOlxuICAgICAgY2FzZSAxODpcbiAgICAgIGNhc2UgMjM6XG4gICAgICAgIHV1aWQgKz0gJy0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTQ6XG4gICAgICAgIHV1aWQgKz0gJzQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTk6XG4gICAgICAgIHV1aWQgKz0gZ2V0Q2hhcjE5KHJhbmRzW3JJbmRleCsrXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdXVpZCArPSBDSEFSU1tyYW5kc1tySW5kZXgrK11dO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHV1aWQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIE5vdGU6IGxvYWRlZCBieSAzcCBzeXN0ZW0uIENhbm5vdCByZWx5IG9uIGJhYmVsIHBvbHlmaWxscy5cbmltcG9ydCB7bWFwfSBmcm9tICcuL29iamVjdC5qcyc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xubGV0IHByb3BlcnR5TmFtZUNhY2hlO1xuXG4vKiogQGNvbnN0IHshQXJyYXk8c3RyaW5nPn0gKi9cbmNvbnN0IHZlbmRvclByZWZpeGVzID0gWydXZWJraXQnLCAnd2Via2l0JywgJ01veicsICdtb3onLCAnbXMnLCAnTycsICdvJ107XG5cbi8qKlxuICogRGVmYXVsdCBzdHlsZXMgdG8gYmUgc2V0IGZvciB0b3AgbGV2ZWwgZnJpZW5kbHkgaWZyYW1lLlxuICogU29tZSBhdHRyaWJ1dGVzIGFyZSBub3QgaW5jbHVkZWQgc3VjaCBhcyBoZWlnaHQsIGxlZnQsIG1hcmdpbi1sZWZ0OyBzaW5jZVxuICogdGhlc2UgYXR0cmlidXRlcyBhcmUgdXBkYXRlZCBieSBAbWVkaWEgcXVlcmllcyBhbmQgaGF2aW5nIHRoZXNlIHZhbHVlc1xuICogZGVmaW5lZCBoZXJlIGFzICFpbXBvcnRhbnQgZG9lcyBub3Qgd29yayBvbiBJRS9lZGdlIGJyb3dzZXJzLlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0U3R5bGVzID0ge1xuICAnYWxpZ24tY29udGVudCc6ICdub3JtYWwnLFxuICAnYW5pbWF0aW9uJzogJ25vbmUnLFxuICAnYWxpZ24taXRlbXMnOiAnbm9ybWFsJyxcbiAgJ2FsaWduLXNlbGYnOiAnYXV0bycsXG4gICdhbGlnbm1lbnQtYmFzZWxpbmUnOiAnYXV0bycsXG4gICdiYWNrZmFjZS12aXNpYmlsaXR5JzogJ2hpZGRlbicsXG4gICdiYWNrZ3JvdW5kLWNsaXAnOiAnYm9yZGVyLWJveCcsXG4gICdiYWNrZ3JvdW5kLWltYWdlJzogJ25vbmUnLFxuICAnYmFzZWxpbmUtc2hpZnQnOiAnMCcsXG4gICdibG9jay1zaXplJzogJ2F1dG8nLFxuICAnYm9yZGVyJzogJ25vbmUnLFxuICAnYm9yZGVyLWNvbGxhcHNlJzogJ3NlcGFyYXRlJyxcbiAgJ2JvdHRvbSc6ICcwJyxcbiAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG4gICdicmVhay1hZnRlcic6ICdhdXRvJyxcbiAgJ2JyZWFrLWJlZm9yZSc6ICdhdXRvJyxcbiAgJ2JyZWFrLWluc2lkZSc6ICdhdXRvJyxcbiAgJ2J1ZmZlcmVkLXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ2NhcHRpb24tc2lkZSc6ICd0b3AnLFxuICAnY2FyZXQtY29sb3InOiAncmdiKDUxLCA1MSwgNTEpJyxcbiAgJ2NsZWFyJzogJ25vbmUnLFxuICAnY29sb3InOiAncmdiKDUxLCA1MSwgNTEpJyxcbiAgJ2NvbG9yLXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ2NvbHVtbi1jb3VudCc6ICdhdXRvJyxcbiAgJ2NvbHVtbi1maWxsJzogJ2JhbGFuY2UnLFxuICAnY29sdW1uLWdhcCc6ICdub3JtYWwnLFxuICAnY29sdW1uLXJ1bGUtY29sb3InOiAncmdiKDUxLCA1MSwgNTEpJyxcbiAgJ2NvbHVtbi1ydWxlLXN0eWxlJzogJ25vbmUnLFxuICAnY29sdW1uLXJ1bGUtd2lkdGgnOiAnMCcsXG4gICdjb2x1bW4tc3Bhbic6ICdub25lJyxcbiAgJ2NvbHVtbi13aWR0aCc6ICdhdXRvJyxcbiAgJ2NvbnRhaW4nOiAnbm9uZScsXG4gICdjb3VudGVyLWluY3JlbWVudCc6ICdub25lJyxcbiAgJ2NvdW50ZXItcmVzZXQnOiAnbm9uZScsXG4gICdjdXJzb3InOiAnYXV0bycsXG4gICdkaXJlY3Rpb24nOiAnaW5oZXJpdCcsXG4gICdkaXNwbGF5JzogJ2Jsb2NrJyxcbiAgJ2VtcHR5LWNlbGxzJzogJ3Nob3cnLFxuICAnZmlsdGVyJzogJ25vbmUnLFxuICAnZmxleCc6ICdub25lJywgLy8gZmxleC1ncm93LCBmbGV4LXNocmluaywgYW5kIGZsZXgtYmFzaXMuXG4gICdmbGV4LWZsb3cnOiAncm93IG5vd3JhcCcsIC8vIGZsZXgtZGlyZWN0aW9uLCBmbGV4LXdyYXAuXG4gICdmbG9hdCc6ICdub25lJyxcbiAgJ2Zsb29kLWNvbG9yJzogJ3JnYigwLCAwLCAwKScsXG4gICdmbG9vZC1vcGFjaXR5JzogJzEnLFxuICAnZm9udCc6ICdub25lJyxcbiAgJ2ZvbnQtc2l6ZSc6ICdtZWRpdW0nLFxuICAnZm9udC1mYW1pbHknOiAnJyxcbiAgJ2hlaWdodCc6ICdhdXRvJyxcbiAgJ2h5cGhlbnMnOiAnbWFudWFsJyxcbiAgJ2ltYWdlLXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ2lubGluZS1zaXplJzogJycsIC8vIFNldHRpbmcgdG8gJ2F1dG8nIHdpbGwgbm90IGFsbG93IG92ZXJyaWRlLlxuICAnaXNvbGF0aW9uJzogJ2F1dG8nLFxuICAnanVzdGlmeS1jb250ZW50JzogJ25vcm1hbCcsXG4gICdqdXN0aWZ5LWl0ZW1zJzogJ25vcm1hbCcsXG4gICdqdXN0aWZ5LXNlbGYnOiAnYXV0bycsXG4gICdsZXR0ZXItc3BhY2luZyc6ICdub3JtYWwnLFxuICAnbGlnaHRpbmctY29sb3InOiAncmdiKDI1NSwgMjU1LCAyNTUpJyxcbiAgJ2xpbmUtYnJlYWsnOiAnYXV0bycsXG4gICdsaW5lLWhlaWdodCc6ICdub3JtYWwnLFxuICAnbWFzayc6ICdub25lJyxcbiAgJ21heC1ibG9jay1zaXplJzogJ25vbmUnLFxuICAnbWF4LWhlaWdodCc6ICdub25lJyxcbiAgJ21heC1pbmxpbmUtc2l6ZSc6ICdub25lJyxcbiAgJ21heC13aWR0aCc6ICdub25lJyxcbiAgJ21pbi1ibG9jay1zaXplJzogJ25vbmUnLFxuICAnbWluLWhlaWdodCc6ICcwJyxcbiAgJ21pbi1pbmxpbmUtc2l6ZSc6ICcwJyxcbiAgJ21pbi13aWR0aCc6ICcwJyxcbiAgJ21peC1ibGVuZC1tb2RlJzogJ25vcm1hbCcsXG4gICdvYmplY3QtZml0JzogJ2ZpbGwnLCAvLyBJbXBvcnRhbnQgZm9yIFNhZmFyaSBicm93c2VyLlxuICAnb2Zmc2V0LWRpc3RhbmNlJzogJ25vbmUnLCAvLyBDaHJvbWUgb25seSAoRXhwZXJpbWVudGFsKS5cbiAgJ29mZnNldC1wYXRoJzogJ25vbmUnLCAvLyBDaHJvbWUgb25seSAoRXhwZXJpbWVudGFsKS5cbiAgJ29mZnNldC1yb3RhdGUnOiAnYXV0byAwZGVnJywgLy8gQ2hyb21lIG9ubHkgKEV4cGVyaW1lbnRhbCkuXG4gICdvcGFjaXR5JzogJzEnLFxuICAnb3JkZXInOiAnMCcsXG4gICdvcnBoYW5zJzogJzInLFxuICAnb3V0bGluZSc6ICdub25lJyxcbiAgJ292ZXJmbG93LWFuY2hvcic6ICdhdXRvJyxcbiAgJ292ZXJmbG93LXdyYXAnOiAnbm9ybWFsJyxcbiAgJ292ZXJmbG93JzogJ3Zpc2libGUnLFxuICAncGFkZGluZyc6ICcwJyxcbiAgJ3BhZ2UnOiAnJyxcbiAgJ3BlcnNwZWN0aXZlJzogJ25vbmUnLFxuICAncG9pbnRlci1ldmVudHMnOiAnYXV0bycsXG4gICdwb3NpdGlvbic6ICdzdGF0aWMnLFxuICAncXVvdGVzJzogJycsXG4gICdyZXNpemUnOiAnbm9uZScsXG4gICdyaWdodCc6ICcwJyxcbiAgJ3Njcm9sbC1iZWhhdmlvcic6ICdhdXRvJyxcbiAgJ3RhYi1zaXplJzogJzgnLCAvLyBPbmx5IENocm9tZSwgU2FmYXJpIChFeHBlcmltZW50YWwpLlxuICAndGFibGUtbGF5b3V0JzogJ2F1dG8nLFxuICAndGV4dC1hbGlnbic6ICdzdGFydCcsXG4gICd0ZXh0LWFsaWduLWxhc3QnOiAnYXV0bycsXG4gICd0ZXh0LWFuY2hvcic6ICdzdGFydCcsXG4gICd0ZXh0LWNvbWJpbmUtdXByaWdodCc6ICdub25lJyxcbiAgJ3RleHQtZGVjb3JhdGlvbic6ICdub25lJyxcbiAgJ3RleHQtaW5kZW50JzogJzAnLFxuICAndGV4dC1vcmllbnRhdGlvbic6ICdtaXhlZCcsXG4gICd0ZXh0LW92ZXJmbG93JzogJ2NsaXAnLFxuICAndGV4dC1yZW5kZXJpbmcnOiAnYXV0bycsXG4gICd0ZXh0LXNoYWRvdyc6ICdub25lJyxcbiAgJ3RleHQtc2l6ZS1hZGp1c3QnOiAnYXV0bycsXG4gICd0ZXh0LXRyYW5zZm9ybSc6ICdub25lJyxcbiAgJ3RleHQtdW5kZXJsaW5lLXBvc2l0aW9uJzogJ2F1dG8nLFxuICAndG9wJzogJ2F1dG8nLFxuICAndG91Y2gtYWN0aW9uJzogJ2F1dG8nLFxuICAndHJhbnNmb3JtJzogJ25vbmUnLFxuICAndHJhbnNpdGlvbic6ICdub25lIDBzIGVhc2UgMHMnLFxuICAndW5pY29kZS1iaWRpJzogJ25vcm1hbCcsXG4gICd1c2VyLXNlbGVjdCc6ICdhdXRvJyxcbiAgJ3ZlY3Rvci1lZmZlY3QnOiAnbm9uZScsXG4gICd2ZXJ0aWNhbC1hbGlnbic6ICdiYXNlbGluZScsXG4gICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAnd2hpdGUtc3BhY2UnOiAnbm9ybWFsJyxcbiAgJ3dpZG93cyc6ICcyJyxcbiAgJ3dvcmQtYnJlYWsnOiAnbm9ybWFsJyxcbiAgJ3dvcmQtc3BhY2luZyc6ICcwJyxcbiAgJ3dvcmQtd3JhcCc6ICdub3JtYWwnLFxuICAnd3JpdGluZy1tb2RlJzogJ2hvcml6b250YWwtdGInLFxuICAnem9vbSc6ICcxJyxcbiAgJ3otaW5kZXgnOiAnYXV0bycsXG59O1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgZ29vZ2xlRm9udHNVcmwgPVxuICAnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PUdvb2dsZStTYW5zJztcblxuLyoqXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIGNhbWVsIGNhc2VkIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSB0aXRsZSBjYXNlZCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsQ2FzZVRvVGl0bGVDYXNlKGNhbWVsQ2FzZSkge1xuICByZXR1cm4gY2FtZWxDYXNlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxDYXNlLnNsaWNlKDEpO1xufVxuXG4vKipcbiAqIENoZWNrcyB0aGUgc3R5bGUgaWYgYSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgcHJvcGVydHkgZXhpc3RzIGFuZCByZXR1cm5zXG4gKiBpdCBvciByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVDYXNlIHRoZSB0aXRsZSBjYXNlIHZlcnNpb24gb2YgYSBjc3MgcHJvcGVydHkgbmFtZVxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgcHJlZml4ZWQgcHJvcGVydHkgbmFtZSBvciBudWxsLlxuICovXG5mdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcHJvcGVydHlOYW1lID0gdmVuZG9yUHJlZml4ZXNbaV0gKyB0aXRsZUNhc2U7XG4gICAgaWYgKHN0eWxlW3Byb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvc3NpYmx5IHByZWZpeGVkIEphdmFTY3JpcHQgcHJvcGVydHkgbmFtZSBvZiBhIHN0eWxlIHByb3BlcnR5XG4gKiAoZXguIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvbikgZ2l2ZW4gYSBjYW1lbENhc2UnZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eVxuICogKGV4LiB0cmFuc2l0aW9uRHVyYXRpb24pLlxuICogQGV4cG9ydFxuICogQHBhcmFtIHshT2JqZWN0fSBzdHlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGNhbWVsQ2FzZSB0aGUgY2FtZWwgY2FzZWQgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfYnlwYXNzQ2FjaGUgYnlwYXNzIHRoZSBtZW1vaXplZCBjYWNoZSBvZiBwcm9wZXJ0eVxuICogICBtYXBwaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShzdHlsZSwgY2FtZWxDYXNlLCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgaWYgKHN0YXJ0c1dpdGgoY2FtZWxDYXNlLCAnLS0nKSkge1xuICAgIC8vIENTUyB2YXJzIGFyZSByZXR1cm5lZCBhcyBpcy5cbiAgICByZXR1cm4gY2FtZWxDYXNlO1xuICB9XG4gIGlmICghcHJvcGVydHlOYW1lQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWVDYWNoZSA9IG1hcCgpO1xuICB9XG4gIGxldCBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdO1xuICBpZiAoIXByb3BlcnR5TmFtZSB8fCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWUgPSBjYW1lbENhc2U7XG4gICAgaWYgKHN0eWxlW2NhbWVsQ2FzZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdGl0bGVDYXNlID0gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKTtcbiAgICAgIGNvbnN0IHByZWZpeGVkUHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWVfKHN0eWxlLCB0aXRsZUNhc2UpO1xuXG4gICAgICBpZiAoc3R5bGVbcHJlZml4ZWRQcm9wZXJ0eU5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvcGVydHlOYW1lID0gcHJlZml4ZWRQcm9wZXJ0eU5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghb3B0X2J5cGFzc0NhY2hlKSB7XG4gICAgICBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdID0gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcGVydHlOYW1lO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50IHdpdGggIWltcG9ydGFudC4gVGhlIHN0eWxlc1xuICogYXJlIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn0gc3R5bGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRJbXBvcnRhbnRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoc3R5bGVzLCBrKSxcbiAgICAgIHN0eWxlc1trXS50b1N0cmluZygpLFxuICAgICAgJ2ltcG9ydGFudCdcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoIG9wdGlvbmFsIHVuaXRzLCBlLmcuIFwicHhcIi5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0gez9zdHJpbmd8bnVtYmVyfGJvb2xlYW59IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF91bml0c1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2J5cGFzc0NhY2hlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdHlsZShlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUsIG9wdF91bml0cywgb3B0X2J5cGFzc0NhY2hlKSB7XG4gIGNvbnN0IHByb3BlcnR5TmFtZSA9IGdldFZlbmRvckpzUHJvcGVydHlOYW1lKFxuICAgIGVsZW1lbnQuc3R5bGUsXG4gICAgcHJvcGVydHksXG4gICAgb3B0X2J5cGFzc0NhY2hlXG4gICk7XG4gIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKG9wdF91bml0c1xuICAgICAgPyB2YWx1ZSArIG9wdF91bml0c1xuICAgICAgOiB2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2J5cGFzc0NhY2hlXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3R5bGUoZWxlbWVudCwgcHJvcGVydHksIG9wdF9ieXBhc3NDYWNoZSkge1xuICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShcbiAgICBlbGVtZW50LnN0eWxlLFxuICAgIHByb3BlcnR5LFxuICAgIG9wdF9ieXBhc3NDYWNoZVxuICApO1xuICBpZiAoIXByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gVGhlIHN0eWxlc1xuICogYSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgP3N0cmluZ3xudW1iZXJ8Ym9vbGVhbj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgc2V0U3R5bGUoZWxlbWVudCwgaywgc3R5bGVzW2tdKTtcbiAgfVxufVxuXG4vKipcbiAqIFNob3dzIG9yIGhpZGVzIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9kaXNwbGF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGUoZWxlbWVudCwgb3B0X2Rpc3BsYXkpIHtcbiAgaWYgKG9wdF9kaXNwbGF5ID09PSB1bmRlZmluZWQpIHtcbiAgICBvcHRfZGlzcGxheSA9IGdldFN0eWxlKGVsZW1lbnQsICdkaXNwbGF5JykgPT0gJ25vbmUnO1xuICB9XG4gIHNldFN0eWxlKGVsZW1lbnQsICdkaXNwbGF5Jywgb3B0X2Rpc3BsYXkgPyAnJyA6ICdub25lJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHBpeGVsIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBweCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgKyAncHgnO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBcInRyYW5zbGF0ZVhcIiBmb3IgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGVYKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gYHRyYW5zbGF0ZVgoJHt2YWx1ZX0pYDtcbiAgfVxuICByZXR1cm4gYHRyYW5zbGF0ZVgoJHtweCh2YWx1ZSl9KWA7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFwidHJhbnNsYXRlWFwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30geFxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBvcHRfeVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHgsIG9wdF95KSB7XG4gIGlmICh0eXBlb2YgeCA9PSAnbnVtYmVyJykge1xuICAgIHggPSBweCh4KTtcbiAgfVxuICBpZiAob3B0X3kgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBgdHJhbnNsYXRlKCR7eH0pYDtcbiAgfVxuICBpZiAodHlwZW9mIG9wdF95ID09ICdudW1iZXInKSB7XG4gICAgb3B0X3kgPSBweChvcHRfeSk7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGUoJHt4fSwgJHtvcHRfeX0pYDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJzY2FsZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHZhbHVlKSB7XG4gIHJldHVybiBgc2NhbGUoJHt2YWx1ZX0pYDtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYWxwaGEgdmFsdWUgZnJvbSBhIHJnYmEgY29sb3IgdmFsdWUuXG4gKiBSZXR1cm4gdGhlIG5ldyBjb2xvciBwcm9wZXJ0eSB3aXRoIGFscGhhIGVxdWFscyBpZiBoYXMgdGhlIGFscGhhIHZhbHVlLlxuICogQ2FsbGVyIG5lZWRzIHRvIG1ha2Ugc3VyZSB0aGUgaW5wdXQgY29sb3IgdmFsdWUgaXMgYSB2YWxpZCByZ2JhL3JnYiB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IHJnYmFDb2xvclxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWxwaGFGcm9tQ29sb3IocmdiYUNvbG9yKSB7XG4gIHJldHVybiByZ2JhQ29sb3IucmVwbGFjZShcbiAgICAvXFwoKFteLF0rKSwoW14sXSspLChbXiwpXSspLFteKV0rXFwpL2csXG4gICAgJygkMSwkMiwkMywgMSknXG4gICk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGVsZW1lbnQuIFRoZSBoZWxwZXIgaXMgbmVjZXNzYXJ5IHRvIGVuZm9yY2VcbiAqIHRoZSBwb3NzaWJsZSBgbnVsbGAgdmFsdWUgcmV0dXJuZWQgYnkgYSBidWdneSBGaXJlZm94LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlZFN0eWxlKHdpbiwgZWwpIHtcbiAgY29uc3Qgc3R5bGUgPSAvKiogQHR5cGUgez9DU1NTdHlsZURlY2xhcmF0aW9ufSAqLyAod2luLmdldENvbXB1dGVkU3R5bGUoZWwpKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovIChzdHlsZSkgfHwgbWFwKCk7XG59XG5cbi8qKlxuICogUmVzZXRzIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGR5bmFtaWNhbGx5IChpLmUuIGlubGluZSlcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc3R5bGVPYmogPSB7fTtcbiAgcHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgIHN0eWxlT2JqW3Byb3BdID0gbnVsbDtcbiAgfSk7XG4gIHNldFN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG59XG5cbi8qKlxuICogUmVzZXRzIGFsbCB0aGUgc3R5bGVzIG9mIGFuIGVsZW1lbnQgdG8gYSBnaXZlbiB2YWx1ZS4gRGVmYXVsdHMgdG8gbnVsbC5cbiAqIFRoZSB2YWxpZCB2YWx1ZXMgYXJlICdpbmhlcml0JywgJ2luaXRpYWwnLCAndW5zZXQnIG9yIG51bGwuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldEFsbFN0eWxlcyhlbGVtZW50KSB7XG4gIHNldEltcG9ydGFudFN0eWxlcyhlbGVtZW50LCBkZWZhdWx0U3R5bGVzKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyogQGNvbnN0ICovXG5jb25zdCB0b1N0cmluZ18gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIEVDTUEgW1tDbGFzc11dIG9mIGEgdmFsdWVcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXy5jYWxsKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIEFycmF5LlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGFuIGFycmF5LlxuICogQHBhcmFtIHs/SUFycmF5TGlrZTxUPnxzdHJpbmd9IGFycmF5TGlrZVxuICogQHJldHVybiB7IUFycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkoYXJyYXlMaWtlKSB7XG4gIGlmICghYXJyYXlMaWtlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5KGFycmF5TGlrZS5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5TGlrZS5sZW5ndGg7IGkrKykge1xuICAgIGFycmF5W2ldID0gYXJyYXlMaWtlW2ldO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIE9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIG9mIG51bWJlciB0eXBlIGFuZCBmaW5pdGUuXG4gKiBOYU4gYW5kIEluZmluaXR5IGFyZSBub3QgY29uc2lkZXJlZCBhIGZpbml0ZSBudW1iZXIuXG4gKiBTdHJpbmcgbnVtYmVycyBhcmUgbm90IGNvbnNpZGVyZWQgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zpbml0ZU51bWJlcih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWx1ZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB2YWx1ZSBpcyBvZiBGb3JtRGF0YSB0eXBlLlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybURhdGEodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nKHZhbHVlKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJztcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBgc2AgaXMgYSB2YWxpZCB2YWx1ZSBvZiBgZW51bU9iamAuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0PFQ+fSBlbnVtT2JqXG4gKiBAcGFyYW0ge1R9IHNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbnVtVmFsdWUoZW51bU9iaiwgcykge1xuICBmb3IgKGNvbnN0IGsgaW4gZW51bU9iaikge1xuICAgIGlmIChlbnVtT2JqW2tdID09PSBzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFRydWUgaWYgdGhlIHZhbHVlIGlzIGEgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgZWl0aGVyIHRydWUgb3IgZmFsc2UuXG4gKiBAcGFyYW0gez8qfSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2U7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7aXNBcnJheX0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICBAdHlwZWRlZiB7e1xuICAgIGhyZWY6IHN0cmluZyxcbiAgICBwcm90b2NvbDogc3RyaW5nLFxuICAgIGhvc3Q6IHN0cmluZyxcbiAgICBob3N0bmFtZTogc3RyaW5nLFxuICAgIHBvcnQ6IHN0cmluZyxcbiAgICBwYXRobmFtZTogc3RyaW5nLFxuICAgIHNlYXJjaDogc3RyaW5nLFxuICAgIGhhc2g6IHN0cmluZyxcbiAgICBvcmlnaW46IHN0cmluZyxcbiAgfX1cbiAgKi9cbmxldCBMb2NhdGlvbkRlZjtcblxuLyoqXG4gKiBDYWNoZWQgYS10YWcgdG8gYXZvaWQgbWVtb3J5IGFsbG9jYXRpb24gZHVyaW5nIFVSTCBwYXJzaW5nLlxuICogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fVxuICovXG5sZXQgYTtcblxuLyoqXG4gKiBXZSBjYWNoZWQgYWxsIHBhcnNlZCBVUkxzLiBBcyBvZiBub3cgdGhlcmUgYXJlIG5vIHVzZSBjYXNlc1xuICogb2YgQU1QIGRvY3MgdGhhdCB3b3VsZCBldmVyIHBhcnNlIGFuIGFjdHVhbCBsYXJnZSBudW1iZXIgb2YgVVJMcyxcbiAqIGJ1dCB3ZSBvZnRlbiBwYXJzZSB0aGUgc2FtZSBvbmUgb3ZlciBhbmQgb3ZlciBhZ2Fpbi5cbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAhTG9jYXRpb25EZWY+fVxuICovXG5sZXQgY2FjaGU7XG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgcGFzc2VkIHBhcmFtZXRlciBtYXAgaW50byBhIHF1ZXJ5IHN0cmluZyB3aXRoIGJvdGgga2V5c1xuICogYW5kIHZhbHVlcyBlbmNvZGVkLlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpIHtcbiAgY29uc3QgcyA9IFtdO1xuICBmb3IgKGNvbnN0IGsgaW4gcGFyYW1zKSB7XG4gICAgY29uc3QgdiA9IHBhcmFtc1trXTtcbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdiA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodltpXSk7XG4gICAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHYpO1xuICAgICAgcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQoc3YpfWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIENvbnNpZGVyIHRoZSByZXR1cm5lZCBvYmplY3QgaW1tdXRhYmxlLiBUaGlzIGlzIGVuZm9yY2VkIGR1cmluZ1xuICogdGVzdGluZyBieSBmcmVlemluZyB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vY2FjaGVcbiAqIEByZXR1cm4geyFMb2NhdGlvbkRlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsKHVybCwgb3B0X25vY2FjaGUpIHtcbiAgaWYgKCFhKSB7XG4gICAgYSA9IC8qKiBAdHlwZSB7IUhUTUxBbmNob3JFbGVtZW50fSAqLyAoc2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuICAgIGNhY2hlID0gc2VsZi5VcmxDYWNoZSB8fCAoc2VsZi5VcmxDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICB9XG5cbiAgY29uc3QgZnJvbUNhY2hlID0gY2FjaGVbdXJsXTtcbiAgaWYgKGZyb21DYWNoZSkge1xuICAgIHJldHVybiBmcm9tQ2FjaGU7XG4gIH1cblxuICBjb25zdCBpbmZvID0gcGFyc2VVcmxXaXRoQShhLCB1cmwpO1xuXG4gIHJldHVybiAoY2FjaGVbdXJsXSA9IGluZm8pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBMb2NhdGlvbi1saWtlIG9iamVjdCBmb3IgdGhlIGdpdmVuIFVSTC4gSWYgaXQgaXMgcmVsYXRpdmUsXG4gKiB0aGUgVVJMIGdldHMgcmVzb2x2ZWQuXG4gKiBAcGFyYW0geyFIVE1MQW5jaG9yRWxlbWVudH0gYVxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7IUxvY2F0aW9uRGVmfVxuICovXG5mdW5jdGlvbiBwYXJzZVVybFdpdGhBKGEsIHVybCkge1xuICBhLmhyZWYgPSB1cmw7XG5cbiAgLy8gSUUxMSBkb2Vzbid0IHByb3ZpZGUgZnVsbCBVUkwgY29tcG9uZW50cyB3aGVuIHBhcnNpbmcgcmVsYXRpdmUgVVJMcy5cbiAgLy8gQXNzaWduaW5nIHRvIGl0c2VsZiBhZ2FpbiBkb2VzIHRoZSB0cmljay5cbiAgaWYgKCFhLnByb3RvY29sKSB7XG4gICAgYS5ocmVmID0gYS5ocmVmO1xuICB9XG5cbiAgLyoqIEB0eXBlIHshTG9jYXRpb25EZWZ9ICovXG4gIGNvbnN0IGluZm8gPSB7XG4gICAgaHJlZjogYS5ocmVmLFxuICAgIHByb3RvY29sOiBhLnByb3RvY29sLFxuICAgIGhvc3Q6IGEuaG9zdCxcbiAgICBob3N0bmFtZTogYS5ob3N0bmFtZSxcbiAgICBwb3J0OiBhLnBvcnQgPT0gJzAnID8gJycgOiBhLnBvcnQsXG4gICAgcGF0aG5hbWU6IGEucGF0aG5hbWUsXG4gICAgc2VhcmNoOiBhLnNlYXJjaCxcbiAgICBoYXNoOiBhLmhhc2gsXG4gICAgb3JpZ2luOiAnJywgLy8gU2V0IGJlbG93LlxuICB9O1xuXG4gIC8vIFNvbWUgSUUxMSBzcGVjaWZpYyBwb2x5ZmlsbHMuXG4gIC8vIDEpIElFMTEgc3RyaXBzIG91dCB0aGUgbGVhZGluZyAnLycgaW4gdGhlIHBhdGhuYW1lLlxuICBpZiAoaW5mby5wYXRobmFtZVswXSAhPT0gJy8nKSB7XG4gICAgaW5mby5wYXRobmFtZSA9ICcvJyArIGluZm8ucGF0aG5hbWU7XG4gIH1cblxuICAvLyAyKSBGb3IgVVJMcyB3aXRoIGltcGxpY2l0IHBvcnRzLCBJRTExIHBhcnNlcyB0byBkZWZhdWx0IHBvcnRzIHdoaWxlXG4gIC8vIG90aGVyIGJyb3dzZXJzIGxlYXZlIHRoZSBwb3J0IGZpZWxkIGVtcHR5LlxuICBpZiAoXG4gICAgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHA6JyAmJiBpbmZvLnBvcnQgPT0gODApIHx8XG4gICAgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaW5mby5wb3J0ID09IDQ0MylcbiAgKSB7XG4gICAgaW5mby5wb3J0ID0gJyc7XG4gICAgaW5mby5ob3N0ID0gaW5mby5ob3N0bmFtZTtcbiAgfVxuXG4gIC8vIEZvciBkYXRhIFVSSSBhLm9yaWdpbiBpcyBlcXVhbCB0byB0aGUgc3RyaW5nICdudWxsJyB3aGljaCBpcyBub3QgdXNlZnVsLlxuICAvLyBXZSBpbnN0ZWFkIHJldHVybiB0aGUgYWN0dWFsIG9yaWdpbiB3aGljaCBpcyB0aGUgZnVsbCBVUkwuXG4gIGlmIChhLm9yaWdpbiAmJiBhLm9yaWdpbiAhPSAnbnVsbCcpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGEub3JpZ2luO1xuICB9IGVsc2UgaWYgKGluZm8ucHJvdG9jb2wgPT0gJ2RhdGE6JyB8fCAhaW5mby5ob3N0KSB7XG4gICAgaW5mby5vcmlnaW4gPSBpbmZvLmhyZWY7XG4gIH0gZWxzZSB7XG4gICAgaW5mby5vcmlnaW4gPSBpbmZvLnByb3RvY29sICsgJy8vJyArIGluZm8uaG9zdDtcbiAgfVxuICByZXR1cm4gaW5mbztcbn1cblxuLyoqXG4gKiBQYXJzZXMgYW5kIGJ1aWxkcyBPYmplY3Qgb2YgVVJMIHF1ZXJ5IHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSBUaGUgVVJMIHF1ZXJ5IHN0cmluZy5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeSkge1xuICBpZiAoIXF1ZXJ5KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHJldHVybiAoL15bPyNdLy50ZXN0KHF1ZXJ5KSA/IHF1ZXJ5LnNsaWNlKDEpIDogcXVlcnkpXG4gICAgLnNwbGl0KCcmJylcbiAgICAucmVkdWNlKChwYXJhbXMsIHBhcmFtKSA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgIGNvbnN0IGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzBdIHx8ICcnKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMV0gfHwgJycpO1xuICAgICAgaWYgKGtleSkge1xuICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9LCB7fSk7XG59XG5cbi8qKlxuICogQWRkcyBhIHBhcmFtZXRlciB0byBhIHF1ZXJ5IHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRRdWVyeVBhcmFtKHVybCwgcGFyYW0sIHZhbHVlKSB7XG4gIGNvbnN0IHF1ZXJ5SW5kZXggPSB1cmwuaW5kZXhPZignPycpO1xuICBjb25zdCBmcmFnbWVudEluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgbGV0IGZyYWdtZW50ID0gJyc7XG4gIGlmIChmcmFnbWVudEluZGV4ICE9IC0xKSB7XG4gICAgZnJhZ21lbnQgPSB1cmwuc3Vic3RyaW5nKGZyYWdtZW50SW5kZXgpO1xuICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgZnJhZ21lbnRJbmRleCk7XG4gIH1cbiAgaWYgKHF1ZXJ5SW5kZXggPT0gLTEpIHtcbiAgICB1cmwgKz0gJz8nO1xuICB9IGVsc2UgaWYgKHF1ZXJ5SW5kZXggPCB1cmwubGVuZ3RoIC0gMSkge1xuICAgIHVybCArPSAnJic7XG4gIH1cbiAgdXJsICs9IGVuY29kZVVSSUNvbXBvbmVudChwYXJhbSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICByZXR1cm4gdXJsICsgZnJhZ21lbnQ7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVXJsIGluY2x1ZGluZyB0aGUgcGF0aCBhbmQgc2VhcmNoLCB3aXRob3V0IGZyZWdtZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9zdFVybCh1cmwpIHtcbiAgY29uc3QgbG9jYXRpb25IcmVmID0gcGFyc2VVcmwodXJsKTtcbiAgcmV0dXJuIGxvY2F0aW9uSHJlZi5vcmlnaW4gKyBsb2NhdGlvbkhyZWYucGF0aG5hbWUgKyBsb2NhdGlvbkhyZWYuc2VhcmNoO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtwYXJzZUpzb259IGZyb20gJy4vanNvbic7XG5pbXBvcnQge3BhcnNlVXJsfSBmcm9tICcuL3VybCc7XG5pbXBvcnQge3V0ZjhFbmNvZGVTeW5jfSBmcm9tICcuL2J5dGVzJztcblxuLyoqXG4gKiBUaGUgXCJpbml0XCIgYXJndW1lbnQgb2YgdGhlIEZldGNoIEFQSS4gQ3VycmVudGx5LCBvbmx5IFwiY3JlZGVudGlhbHM6IGluY2x1ZGVcIlxuICogaXMgaW1wbGVtZW50ZWQuXG4gKlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9HbG9iYWxGZXRjaC9mZXRjaFxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGJvZHk6ICghRm9ybURhdGF8c3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGNyZWRlbnRpYWxzOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGhlYWRlcnM6ICghT2JqZWN0fHVuZGVmaW5lZCksXG4gKiAgIG1ldGhvZDogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICByZXNwb25zZVR5cGU6IChzdHJpbmcpXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEZldGNoSW5pdERlZjtcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7IUFycmF5PHN0cmluZz59ICovXG5jb25zdCBhbGxvd2VkTWV0aG9kc18gPSBbJ0dFVCcsICdQT1NUJ107XG5cbi8qKiBAcHJpdmF0ZSBAZW51bSB7bnVtYmVyfSBBbGxvd2VkIGZldGNoIHJlc3BvbnNlcy4gKi9cbmNvbnN0IGFsbG93ZWRGZXRjaFR5cGVzXyA9IHtcbiAgZG9jdW1lbnQ6IDEsXG4gIHRleHQ6IDIsXG59O1xuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBwb2x5ZmlsbHMgRmV0Y2ggQVBJLlxuICovXG5leHBvcnQgY2xhc3MgWGhyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luID0gd2luO1xuICB9XG5cbiAgLyoqXG4gICAqIFdlIHdhbnQgdG8gY2FsbCBgZmV0Y2hfYCB1bmJvdW5kIGZyb20gYW55IGNvbnRleHQgc2luY2UgaXQgY291bGRcbiAgICogYmUgZWl0aGVyIHRoZSBuYXRpdmUgZmV0Y2ggb3Igb3VyIHBvbHlmaWxsLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5wdXRcbiAgICogQHBhcmFtIHshRmV0Y2hJbml0RGVmfSBpbml0XG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFGZXRjaFJlc3BvbnNlPnwhUHJvbWlzZTwhUmVzcG9uc2U+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmV0Y2hfKGlucHV0LCBpbml0KSB7XG4gICAgLy8gVE9ETyhhdmltZWh0YSk6IFNob3VsZCB0aGUgcmVxdWVzdHMgZ28gdGhyb3VnaCB3aGVuIHBhZ2UgaXMgbm90IHZpc2libGU/XG4gICAgYXNzZXJ0KHR5cGVvZiBpbnB1dCA9PSAnc3RyaW5nJywgJ09ubHkgVVJMIHN1cHBvcnRlZDogJXMnLCBpbnB1dCk7XG4gICAgLy8gSW4gcGFydGljdWxhciwgRmlyZWZveCBkb2VzIG5vdCB0b2xlcmF0ZSBgbnVsbGAgdmFsdWVzIGZvclxuICAgIC8vIGBjcmVkZW50aWFsc2AuXG4gICAgY29uc3QgY3JlZHMgPSBpbml0LmNyZWRlbnRpYWxzO1xuICAgIGFzc2VydChcbiAgICAgIGNyZWRzID09PSB1bmRlZmluZWQgfHwgY3JlZHMgPT0gJ2luY2x1ZGUnIHx8IGNyZWRzID09ICdvbWl0JyxcbiAgICAgICdPbmx5IGNyZWRlbnRpYWxzPWluY2x1ZGV8b21pdCBzdXBwb3J0OiAlcycsXG4gICAgICBjcmVkc1xuICAgICk7XG4gICAgLy8gRmFsbGJhY2sgdG8geGhyIHBvbHlmaWxsIHNpbmNlIGBmZXRjaGAgYXBpIGRvZXMgbm90IHN1cHBvcnRcbiAgICAvLyByZXNwb25zZVR5cGUgPSAnZG9jdW1lbnQnLiBXZSBkbyB0aGlzIHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gYW55IHBhcnNpbmdcbiAgICAvLyBhbmQgZG9jdW1lbnQgY29uc3RydWN0aW9uIG9uIHRoZSBVSSB0aHJlYWQgd2hpY2ggd291bGQgYmUgZXhwZW5zaXZlLlxuICAgIGlmIChpbml0LnJlc3BvbnNlVHlwZSA9PSAnZG9jdW1lbnQnKSB7XG4gICAgICByZXR1cm4gZmV0Y2hQb2x5ZmlsbChpbnB1dCwgaW5pdCk7XG4gICAgfVxuICAgIHJldHVybiAodGhpcy53aW4uZmV0Y2ggfHwgZmV0Y2hQb2x5ZmlsbCkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgVVJMXG4gICAqIEBwYXJhbSB7P0ZldGNoSW5pdERlZn0gb3B0X2luaXQgRmV0Y2ggb3B0aW9ucyBvYmplY3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFGZXRjaFJlc3BvbnNlPn1cbiAgICovXG4gIGZldGNoKGlucHV0LCBvcHRfaW5pdCkge1xuICAgIC8vIFRPRE8gKGF2aW1laHRhKTogRmlndXJlIG91dCBpZiBDT1JTIG5lZWRzIGJlIGhhbmRsZWQgdGhlIHdheSBBTVAgZG9lcyBpdC5cbiAgICBjb25zdCBpbml0ID0gc2V0dXBJbml0KG9wdF9pbml0KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaF8oaW5wdXQsIGluaXQpXG4gICAgICAudGhlbihcbiAgICAgICAgcmVzcG9uc2UgPT4gcmVzcG9uc2UsXG4gICAgICAgIHJlYXNvbiA9PiB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0T3JpZ2luID0gcGFyc2VVcmwoaW5wdXQpLm9yaWdpbjtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgWEhSIEZhaWxlZCBmZXRjaGluZyAoJHt0YXJnZXRPcmlnaW59Ly4uLik6YCxcbiAgICAgICAgICAgIHJlYXNvbiAmJiByZWFzb24ubWVzc2FnZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IGFzc2VydFN1Y2Nlc3MocmVzcG9uc2UpKTtcbiAgfVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZWQgbWV0aG9kIG5hbWUgYnkgdXBwZXJjYXNpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IG1ldGhvZFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kXyhtZXRob2QpIHtcbiAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdHRVQnO1xuICB9XG4gIG1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuXG4gIGFzc2VydChcbiAgICBhbGxvd2VkTWV0aG9kc18uaW5jbHVkZXMobWV0aG9kKSxcbiAgICAnT25seSBvbmUgb2YgJXMgaXMgY3VycmVudGx5IGFsbG93ZWQuIEdvdCAlcycsXG4gICAgYWxsb3dlZE1ldGhvZHNfLmpvaW4oJywgJyksXG4gICAgbWV0aG9kXG4gICk7XG5cbiAgcmV0dXJuIG1ldGhvZDtcbn1cblxuLyoqXG4gKiBTZXRzIHVwIGFuZCBub3JtYWxpemVzIHRoZSBGZXRjaEluaXREZWZcbiAqXG4gKiBAcGFyYW0gez9GZXRjaEluaXREZWY9fSBvcHRfaW5pdCBGZXRjaCBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2FjY2VwdCBUaGUgSFRUUCBBY2NlcHQgaGVhZGVyIHZhbHVlLlxuICogQHJldHVybiB7IUZldGNoSW5pdERlZn1cbiAqL1xuZnVuY3Rpb24gc2V0dXBJbml0KG9wdF9pbml0LCBvcHRfYWNjZXB0KSB7XG4gIGNvbnN0IGluaXQgPSBvcHRfaW5pdCB8fCAvKiogQHR5cGUge0ZldGNoSW5pdERlZn0gKi8gKHt9KTtcbiAgaW5pdC5tZXRob2QgPSBub3JtYWxpemVNZXRob2RfKGluaXQubWV0aG9kKTtcbiAgaW5pdC5oZWFkZXJzID0gaW5pdC5oZWFkZXJzIHx8IHt9O1xuICBpZiAob3B0X2FjY2VwdCkge1xuICAgIGluaXQuaGVhZGVyc1snQWNjZXB0J10gPSBvcHRfYWNjZXB0O1xuICB9XG4gIHJldHVybiBpbml0O1xufVxuXG4vKipcbiAqIEEgbWluaW1hbCBwb2x5ZmlsbCBvZiBGZXRjaCBBUEkuIEl0IG9ubHkgcG9seWZpbGxzIHdoYXQgd2UgY3VycmVudGx5IHVzZS5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0dsb2JhbEZldGNoL2ZldGNoXG4gKlxuICogTm90aWNlIHRoYXQgdGhlIFwiZmV0Y2hcIiBtZXRob2QgaXRzZWxmIGlzIG5vdCBleHBvcnRlZCBhcyB0aGF0IHdvdWxkIHJlcXVpcmVcbiAqIHVzIHRvIGltbWVkaWF0ZWx5IHN1cHBvcnQgYSBtdWNoIHdpZGUgQVBJLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dFxuICogQHBhcmFtIHshRmV0Y2hJbml0RGVmfSBpbml0XG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRmV0Y2hSZXNwb25zZT59XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFBvbHlmaWxsKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCB4aHIgPSBjcmVhdGVYaHJSZXF1ZXN0KGluaXQubWV0aG9kIHx8ICdHRVQnLCBpbnB1dCk7XG5cbiAgICBpZiAoaW5pdC5jcmVkZW50aWFscyA9PSAnaW5jbHVkZScpIHtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpbml0LnJlc3BvbnNlVHlwZSBpbiBhbGxvd2VkRmV0Y2hUeXBlc18pIHtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBpbml0LnJlc3BvbnNlVHlwZTtcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5oZWFkZXJzKSB7XG4gICAgICBPYmplY3Qua2V5cyhpbml0LmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgaW5pdC5oZWFkZXJzW2hlYWRlcl0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA8IC8qIFNUQVRVU19SRUNFSVZFRCAqLyAyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh4aHIuc3RhdHVzIDwgMTAwIHx8IHhoci5zdGF0dXMgPiA1OTkpIHtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVua25vd24gSFRUUCBzdGF0dXMgJHt4aHIuc3RhdHVzfWApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IFRoaXMgaXMgY3VycmVudGx5IHNpbXBsaWZpZWQ6IHdlIHdpbGwgd2FpdCBmb3IgdGhlXG4gICAgICAvLyB3aG9sZSBkb2N1bWVudCBsb2FkaW5nIHRvIGNvbXBsZXRlLiBUaGlzIGlzIGZpbmUgZm9yIHRoZSB1c2UgY2FzZXNcbiAgICAgIC8vIHdlIGhhdmUgbm93LCBidXQgbWF5IG5lZWQgdG8gYmUgcmVpbXBsZW1lbnRlZCBsYXRlci5cbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSAvKiBDT01QTEVURSAqLyA0KSB7XG4gICAgICAgIHJlc29sdmUobmV3IEZldGNoUmVzcG9uc2UoeGhyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB4aHIub25lcnJvciA9ICgpID0+IHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ05ldHdvcmsgZmFpbHVyZScpKTtcbiAgICB9O1xuICAgIHhoci5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCBhYm9ydGVkJykpO1xuICAgIH07XG5cbiAgICBpZiAoaW5pdC5tZXRob2QgPT0gJ1BPU1QnKSB7XG4gICAgICB4aHIuc2VuZChpbml0LmJvZHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7IVhNTEh0dHBSZXF1ZXN0fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlWGhyUmVxdWVzdChtZXRob2QsIHVybCkge1xuICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikge1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPUlMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICB9XG4gIHJldHVybiB4aHI7XG59XG5cbi8qKlxuICogSWYgNDE1IG9yIGluIHRoZSA1eHggcmFuZ2UuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzXG4gKi9cbmZ1bmN0aW9uIGlzUmV0cmlhYmxlKHN0YXR1cykge1xuICByZXR1cm4gc3RhdHVzID09IDQxNSB8fCAoc3RhdHVzID49IDUwMCAmJiBzdGF0dXMgPCA2MDApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHJlc3BvbnNlIGlmIHN1Y2Nlc3NmdWwgb3Igb3RoZXJ3aXNlIHRocm93cyBhbiBlcnJvci5cbiAqIEBwYXJhbSB7IUZldGNoUmVzcG9uc2V9IHJlc3BvbnNlXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRmV0Y2hSZXNwb25zZT59XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRTdWNjZXNzKHJlc3BvbnNlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBjb25zdCB7c3RhdHVzfSA9IHJlc3BvbnNlO1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgSFRUUCBlcnJvciAke3N0YXR1c31gKTtcbiAgICBlcnIucmV0cmlhYmxlID0gaXNSZXRyaWFibGUoc3RhdHVzKTtcbiAgICAvLyBUT0RPKEBqcmlkZ2V3ZWxsLCAjOTQ0OCk6IENhbGxlcnMgd2hvIG5lZWQgdGhlIHJlc3BvbnNlIHNob3VsZFxuICAgIC8vIHNraXAgcHJvY2Vzc2luZy5cbiAgICBlcnIucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlc3BvbnNlIG9iamVjdCBpbiB0aGUgRmV0Y2ggQVBJLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2xvYmFsRmV0Y2gvZmV0Y2hcbiAqL1xuZXhwb3J0IGNsYXNzIEZldGNoUmVzcG9uc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshWE1MSHR0cFJlcXVlc3R9IHhoclxuICAgKi9cbiAgY29uc3RydWN0b3IoeGhyKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVhNTEh0dHBSZXF1ZXN0fSAqL1xuICAgIHRoaXMueGhyXyA9IHhocjtcblxuICAgIC8qKiBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLnN0YXR1cyA9IHRoaXMueGhyXy5zdGF0dXM7XG5cbiAgICAvKiogQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDA7XG5cbiAgICAvKiogQGNvbnN0IHshRmV0Y2hSZXNwb25zZUhlYWRlcnN9ICovXG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEZldGNoUmVzcG9uc2VIZWFkZXJzKHhocik7XG5cbiAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlO1xuXG4gICAgLyoqIEB0eXBlIHs/UmVhZGFibGVTdHJlYW19ICovXG4gICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb3B5IG9mIHRoZSByZXNwb25zZSBhbmQgcmV0dXJuIGl0LlxuICAgKiBAcmV0dXJuIHshRmV0Y2hSZXNwb25zZX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIGFzc2VydCghdGhpcy5ib2R5VXNlZCwgJ0JvZHkgYWxyZWFkeSB1c2VkJyk7XG4gICAgcmV0dXJuIG5ldyBGZXRjaFJlc3BvbnNlKHRoaXMueGhyXyk7XG4gIH1cblxuICAvKipcbiAgICogRHJhaW5zIHRoZSByZXNwb25zZSBhbmQgcmV0dXJucyB0aGUgdGV4dC5cbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRyYWluVGV4dF8oKSB7XG4gICAgYXNzZXJ0KCF0aGlzLmJvZHlVc2VkLCAnQm9keSBhbHJlYWR5IHVzZWQnKTtcbiAgICB0aGlzLmJvZHlVc2VkID0gdHJ1ZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMueGhyXy5yZXNwb25zZVRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYWlucyB0aGUgcmVzcG9uc2UgYW5kIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzcG9uc2VcbiAgICogdGV4dC5cbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIHRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHJhaW5UZXh0XygpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYWlucyB0aGUgcmVzcG9uc2UgYW5kIHJldHVybnMgdGhlIEpTT04gb2JqZWN0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhSnNvbk9iamVjdD59XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCFKc29uT2JqZWN0Pn0gKi8gKHRoaXMuZHJhaW5UZXh0XygpLnRoZW4oXG4gICAgICBwYXJzZUpzb25cbiAgICApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgeGhyIHJlc3BvbnNlWE1MLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRG9jdW1lbnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZG9jdW1lbnRfKCkge1xuICAgIGFzc2VydCghdGhpcy5ib2R5VXNlZCwgJ0JvZHkgYWxyZWFkeSB1c2VkJyk7XG4gICAgdGhpcy5ib2R5VXNlZCA9IHRydWU7XG4gICAgYXNzZXJ0KFxuICAgICAgdGhpcy54aHJfLnJlc3BvbnNlWE1MLFxuICAgICAgJ3Jlc3BvbnNlWE1MIHNob3VsZCBleGlzdC4gTWFrZSBzdXJlIHRvIHJldHVybiAnICtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZTogdGV4dC9odG1sIGhlYWRlci4nXG4gICAgKTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhRG9jdW1lbnQ+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgYXNzZXJ0KHRoaXMueGhyXy5yZXNwb25zZVhNTClcbiAgICApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmFpbnMgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3BvbnNlXG4gICAqIEFycmF5QnVmZmVyLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhQXJyYXlCdWZmZXI+fVxuICAgKi9cbiAgYXJyYXlCdWZmZXIoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUFycmF5QnVmZmVyPn0gKi8gKHRoaXMuZHJhaW5UZXh0XygpLnRoZW4oXG4gICAgICB1dGY4RW5jb2RlU3luY1xuICAgICkpO1xuICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIHRoZSByZXNwb25zZSBoZWFkZXJzIGFzIGRlZmluZWQgaW4gdGhlIEZldGNoIEFQSS5cbiAqIEBwcml2YXRlIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXRjaFJlc3BvbnNlSGVhZGVycyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih4aHIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshWE1MSHR0cFJlcXVlc3R9ICovXG4gICAgdGhpcy54aHJfID0geGhyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMueGhyXy5nZXRSZXNwb25zZUhlYWRlcihuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy54aHJfLmdldFJlc3BvbnNlSGVhZGVyKG5hbWUpICE9IG51bGw7XG4gIH1cbn1cbiIsIihmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gIHZhciBiYWJlbEhlbHBlcnMgPSBnbG9iYWwuYmFiZWxIZWxwZXJzID0ge307XG5cbiAgYmFiZWxIZWxwZXJzLmluaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7XG4gICAgfVxuXG4gICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuICB9O1xuXG4gIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICB9O1xuICB9KSgpO1xuXG4gIGJhYmVsSGVscGVycy5zbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbiAgYmFiZWxIZWxwZXJzLmJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtcblxuICBiYWJlbEhlbHBlcnMuaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbmV3T2JqID0ge307XG5cbiAgICAgIGlmIChvYmogIT0gbnVsbCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmV3T2JqW1wiZGVmYXVsdFwiXSA9IG9iajtcbiAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfVxuICB9O1xuXG4gIGJhYmVsSGVscGVycy5pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gIH07XG5cbiAgYmFiZWxIZWxwZXJzLmdldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICAgIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7XG5cbiAgICBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7XG5cbiAgICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHtcbiAgICAgIHJldHVybiBkZXNjLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7XG5cbiAgICAgIGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpO1xuICAgIH1cbiAgfTtcblxuICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuICB9O1xuXG4gIGJhYmVsSGVscGVycy5kZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBvYmo7XG4gIH07XG59KSh0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IGdsb2JhbCk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgTUFYX1pfSU5ERVggPSAyMTQ3NDgzNjQ3O1xuXG5jb25zdCBDb25zdGFudHMgPSB7fTtcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZW52aXJvbm1lbnRzLlxuICpcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5FbnZpcm9ubWVudCA9IHtcbiAgTE9DQUw6ICdMT0NBTCcsXG4gIFBSRVBST0Q6ICdQUkVQUk9EJyxcbiAgUFJPRFVDVElPTjogJ1BST0RVQ1RJT04nLFxuICBTQU5EQk9YOiAnU0FOREJPWCcsXG4gIFRFU1Q6ICdURVNUJyxcbiAgVElOOiAnVElOJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIHBheW1lbnQgbWV0aG9kcy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuUGF5bWVudE1ldGhvZCA9IHtcbiAgQ0FSRDogJ0NBUkQnLFxuICBUT0tFTklaRURfQ0FSRDogJ1RPS0VOSVpFRF9DQVJEJyxcbiAgVVBJOiAnVVBJJyxcbn07XG5cbi8qKlxuICogQXV0aCBtZXRob2RzLlxuICpcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5BdXRoTWV0aG9kID0ge1xuICBDUllQVE9HUkFNXzNEUzogJ0NSWVBUT0dSQU1fM0RTJyxcbiAgUEFOX09OTFk6ICdQQU5fT05MWScsXG59O1xuXG4vKipcbiAqIFJldHVybmVkIHJlc3VsdCBzdGF0dXMuXG4gKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLlJlc3BvbnNlU3RhdHVzID0ge1xuICBDQU5DRUxFRDogJ0NBTkNFTEVEJyxcbiAgREVWRUxPUEVSX0VSUk9SOiAnREVWRUxPUEVSX0VSUk9SJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIHRvdGFsIHByaWNlIHN0YXR1cy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuVG90YWxQcmljZVN0YXR1cyA9IHtcbiAgRVNUSU1BVEVEOiAnRVNUSU1BVEVEJyxcbiAgRklOQUw6ICdGSU5BTCcsXG4gIE5PVF9DVVJSRU5UTFlfS05PV046ICdOT1RfQ1VSUkVOVExZX0tOT1dOJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIEdvb2dsZSBQYXkgcGF5bWVudCBidXR0b24gdHlwZS5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuQnV0dG9uVHlwZSA9IHtcbiAgU0hPUlQ6ICdzaG9ydCcsXG4gIExPTkc6ICdsb25nJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIGJ1dHRvbiBjb2xvcnMuXG4gKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLkJ1dHRvbkNvbG9yID0ge1xuICBERUZBVUxUOiAnZGVmYXVsdCcsICAvLyBDdXJyZW50bHkgZGVmYXVsdHMgdG8gYmxhY2suXG4gIEJMQUNLOiAnYmxhY2snLFxuICBXSElURTogJ3doaXRlJyxcbn07XG5cbi8qKlxuICogSWQgYXR0cmlidXRlcy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuSWQgPSB7XG4gIFBPUFVQX1dJTkRPV19DT05UQUlORVI6ICdwb3B1cC13aW5kb3ctY29udGFpbmVyJyxcbn07XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbkNvbnN0YW50cy5TVE9SQUdFX0tFWV9QUkVGSVggPSAnZ29vZ2xlLnBheW1lbnRzLmFwaS5zdG9yYWdlJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuQ29uc3RhbnRzLklTX1JFQURZX1RPX1BBWV9SRVNVTFRfS0VZID1cbiAgICBDb25zdGFudHMuU1RPUkFHRV9LRVlfUFJFRklYICsgJy5pc3JlYWR5dG9wYXkucmVzdWx0JztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuQ29uc3RhbnRzLlVQSV9DQU5fTUFLRV9QQVlNRU5UX0NBQ0hFX0tFWSA9XG4gICAgQ29uc3RhbnRzLlNUT1JBR0VfS0VZX1BSRUZJWCArICcudXBpLmNhbk1ha2VQYXltZW50Q2FjaGUnO1xuXG5cbkNvbnN0YW50cy5DTEFTU19QUkVGSVggPSAnZ29vZ2xlLXBheW1lbnRzLSc7XG5Db25zdGFudHMuSUZSQU1FX0FDVElWRV9DT05UQUlORVJfQ0xBU1MgPVxuICAgIGAke0NvbnN0YW50cy5DTEFTU19QUkVGSVh9YWN0aXZlQ29udGFpbmVyYDtcbkNvbnN0YW50cy5JRlJBTUVfQ09OVEFJTkVSX0NMQVNTID0gYCR7Q29uc3RhbnRzLkNMQVNTX1BSRUZJWH1kaWFsb2dDb250YWluZXJgO1xuQ29uc3RhbnRzLklGUkFNRV9TVFlMRV9DRU5URVJfQ0xBU1MgPSBgJHtDb25zdGFudHMuQ0xBU1NfUFJFRklYfWRpYWxvZ0NlbnRlcmA7XG5Db25zdGFudHMuSUZSQU1FX1NUWUxFX0NMQVNTID0gYCR7Q29uc3RhbnRzLkNMQVNTX1BSRUZJWH1kaWFsb2dgO1xuXG5Db25zdGFudHMuSUZSQU1FX1NUWUxFID0gYFxuLiR7Q29uc3RhbnRzLklGUkFNRV9TVFlMRV9DTEFTU30ge1xuICAgIGFuaW1hdGlvbjogbm9uZSAwcyBlYXNlIDBzIDEgbm9ybWFsIG5vbmUgcnVubmluZztcbiAgICBiYWNrZ3JvdW5kOiBub25lIDAgMCAvIGF1dG8gcmVwZWF0IHNjcm9sbCBwYWRkaW5nLWJveCBib3JkZXItYm94ICNmZmY7XG4gICAgYmFja2dyb3VuZC1ibGVuZC1tb2RlOiBub3JtYWw7XG4gICAgYm9yZGVyOiAwIG5vbmUgIzMzMztcbiAgICBib3JkZXItcmFkaXVzOiA4cHggOHB4IDAgMDtcbiAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xuICAgIGJvdHRvbTogMDtcbiAgICBib3gtc2hhZG93OiAjODA4MDgwIDAgM3B4IDAgMCwgIzgwODA4MCAwIDAgMjJweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7XG4gICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgei1pbmRleDogJHtNQVhfWl9JTkRFWH07XG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgIGxlZnQ6IDA7XG59XG5AbWVkaWEgKG1pbi13aWR0aDogNDgwcHgpIHtcbiAgLiR7Q29uc3RhbnRzLklGUkFNRV9TVFlMRV9DTEFTU30ge1xuICAgIHdpZHRoOiA0ODBweCAhaW1wb3J0YW50O1xuICAgIGxlZnQ6IC0yNDBweCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbi1sZWZ0OiBjYWxjKDEwMHZ3IC0gMTAwdncgLyAyKSAhaW1wb3J0YW50O1xuICB9XG59XG4uJHtDb25zdGFudHMuSUZSQU1FX0NPTlRBSU5FUl9DTEFTU30ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuMjYpO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogMTAwJTtcbiAgbGVmdDogMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMDtcbn1cbi5pZnJhbWVDb250YWluZXIge1xuICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XG59XG5gO1xuXG5Db25zdGFudHMuSUZSQU1FX1NUWUxFX0NFTlRFUiA9IGBcbi4ke0NvbnN0YW50cy5JRlJBTUVfU1RZTEVfQ0VOVEVSX0NMQVNTfSB7XG4gIGFuaW1hdGlvbjogbm9uZSAwcyBlYXNlIDBzIDEgbm9ybWFsIG5vbmUgcnVubmluZztcbiAgYmFja2dyb3VuZC1ibGVuZC1tb2RlOiBub3JtYWw7XG4gIGJhY2tncm91bmQ6IG5vbmUgMCAwIC8gYXV0byByZXBlYXQgc2Nyb2xsIHBhZGRpbmctYm94IGJvcmRlci1ib3ggI2ZmZjtcbiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3JkZXI6IDBweCBub25lICMzMzM7XG4gIGJvdHRvbTogYXV0bztcbiAgYm94LXNoYWRvdzogIzgwODA4MCAwIDAgMjJweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgbGVmdDogLTI0MHB4O1xuICBsZXR0ZXItc3BhY2luZzogbm9ybWFsO1xuICBtYXJnaW4tbGVmdDogY2FsYygxMDB2dyAtIDEwMHZ3IC8gMikgIWltcG9ydGFudDtcbiAgbWF4LWhlaWdodDogOTAlO1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDEwMCU7XG4gIHRyYW5zZm9ybTogc2NhbGUoMC44KTtcbiAgd2lkdGg6IDQ4MHB4O1xuICB6LWluZGV4OiAke01BWF9aX0lOREVYfTtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xufVxuQG1lZGlhIChtaW4taGVpZ2h0OiA2NjdweCkge1xuICAuJHtDb25zdGFudHMuSUZSQU1FX1NUWUxFX0NFTlRFUl9DTEFTU30ge1xuICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICB9XG59XG4uJHtDb25zdGFudHMuSUZSQU1FX0FDVElWRV9DT05UQUlORVJfQ0xBU1N9IHtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogc2NhbGUoMS4wKSB0cmFuc2xhdGVZKC01MCUpO1xufVxuYDtcblxuQ29uc3RhbnRzLkdQQVlfQlVUVE9OX1dJVEhfQ0FSRF9JTkZPX0lNQUdFID1cbiAgICAnYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHBzOi8vcGF5Lmdvb2dsZS5jb20vZ3AvcC9nZW5lcmF0ZV9ncGF5X2J0bl9pbWcpOyc7XG5cbkNvbnN0YW50cy5CVVRUT05fTE9DQUxFX1RPX01JTl9XSURUSCA9IHtcbiAgJ2VuJzogMTUyLFxuICAnYmcnOiAxNjMsXG4gICdjcyc6IDE5MixcbiAgJ2RlJzogMTgzLFxuICAnZXMnOiAxODMsXG4gICdmcic6IDE4MyxcbiAgJ2hyJzogMTU3LFxuICAnaWQnOiAxODYsXG4gICdqYSc6IDE0OCxcbiAgJ2tvJzogMTM3LFxuICAnbXMnOiAxODYsXG4gICdubCc6IDE2NyxcbiAgJ3BsJzogMTgyLFxuICAncHQnOiAxOTMsXG4gICdydSc6IDIwNixcbiAgJ3NrJzogMTU3LFxuICAnc2wnOiAyMTEsXG4gICdzcic6IDE0NixcbiAgJ3RyJzogMTYxLFxuICAndWsnOiAyMDcsXG4gICd6aCc6IDE1Nixcbn07XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgZ3JheXBhbmUuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5HUEFZX0dSQVlQQU5FID0gJ2dwYXktZ3JheXBhbmUnO1xuXG4vKipcbiAqIENsYXNzIHVzZWQgZm9yIHRoZSBncGF5IGJ1dHRvbi5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTID0gJ2dwYXktYnV0dG9uJztcblxuQ29uc3RhbnRzLkJVVFRPTl9TVFlMRSA9IGBcbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30ge1xuICBiYWNrZ3JvdW5kLW9yaWdpbjogY29udGVudC1ib3g7XG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcbiAgYm9yZGVyOiAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYm94LXNoYWRvdzogcmdiYSg2MCwgNjQsIDY3LCAwLjMpIDBweCAxcHggMXB4IDBweCwgcmdiYSg2MCwgNjQsIDY3LCAwLjE1KSAwcHggMXB4IDNweCAxcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgaGVpZ2h0OiA0MHB4O1xuICBtaW4taGVpZ2h0OiA0MHB4O1xuICBwYWRkaW5nOiAxMXB4IDI0cHg7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30uYmxhY2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICBib3gtc2hhZG93OiBub25lO1xuICBwYWRkaW5nOiAxMnB4IDI0cHggMTBweDtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS53aGl0ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30uc2hvcnQge1xuICBtaW4td2lkdGg6IDkwcHg7XG4gIHdpZHRoOiAxNjBweDtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS5ibGFjay5zaG9ydCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwczovL3d3dy5nc3RhdGljLmNvbS9pbnN0YW50YnV5L3N2Zy9kYXJrX2dwYXkuc3ZnKTtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS53aGl0ZS5zaG9ydCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwczovL3d3dy5nc3RhdGljLmNvbS9pbnN0YW50YnV5L3N2Zy9saWdodF9ncGF5LnN2Zyk7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30uYmxhY2suYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzVmNjM2ODtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS5ibGFjay5ob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzYzQwNDM7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30ud2hpdGUuYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS53aGl0ZS5mb2N1cyB7XG4gIGJveC1zaGFkb3c6ICNlOGU4ZTggMCAxcHggMXB4IDAsICNlOGU4ZTggMCAxcHggM3B4O1xufVxuXG4uJHtDb25zdGFudHMuR1BBWV9CVVRUT05fQ0xBU1N9LndoaXRlLmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODtcbn1cbmA7XG5cbkNvbnN0YW50cy5HUEFZX0JVVFRPTl9XSVRIX09GRkVSX0lDT05fQURESVRJT05BTF9TVFlMRSA9ICdwb3NpdGlvbjogcmVsYXRpdmU7JztcblxuQ29uc3RhbnRzLkdQQVlfT0ZGRVJfSUNPTl9DTEFTUyA9ICdncGF5LW9mZmVyLWljb24nO1xuXG5Db25zdGFudHMuR1BBWV9PRkZFUl9JQ09OX1NWRyA9XG4gICAgXCI8c3ZnIHdpZHRoPVxcXCIyMHB4XFxcIiBoZWlnaHQ9XFxcIjIwcHhcXFwiIHZpZXdCb3g9XFxcIjAgMCAyMCAyMFxcXCIgXCIgK1xuICAgIFwidmVyc2lvbj1cXFwiMS4xXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHhtbG5zOnhsaW5rPVwiICtcbiAgICBcIlxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXFxcIiBjbGFzcz1cXFwiZ3BheS1vZmZlci1pY29uXFxcIj48ZGVmcz48cGF0aCBkPVxcXCJNMTkuNDEsOS41OCBMMTAuNDEsMC41OCBcIiArXG4gICAgXCJDMTAuMDUsMC4yMiA5LjU1LDAgOSwwIEwyLDAgQzAuOSwwIDAsMC45IDAsMiBMMCw5IEMwLDkuNTUgMC4yMiwxMC4wNSBcIiArXG4gICAgXCIwLjU5LDEwLjQyIEw5LjU5LDE5LjQyIEM5Ljk1LDE5Ljc4IDEwLjQ1LDIwIDExLDIwIEMxMS41NSwyMCAxMi4wNSwxOS43OCBcIiArXG4gICAgXCIxMi40MSwxOS40MSBMMTkuNDEsMTIuNDEgQzE5Ljc4LDEyLjA1IDIwLDExLjU1IDIwLDExIEMyMCwxMC40NSAxOS43NyxcIiArXG4gICAgXCI5Ljk0IDE5LjQxLDkuNTggWlxcXCIgaWQ9XFxcInBhdGgtMVxcXCI+PC9wYXRoPjwvZGVmcz48ZyBpZD1cXFwiYnV0dG9uc18xMC4wNVxcXCJcIiArXG4gICAgXCIgc3Ryb2tlPVxcXCJub25lXFxcIiBzdHJva2Utd2lkdGg9XFxcIjFcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkFydGJvYXJkXFxcIiB0cmFuc2Zvcm09XFxcInRyYW5zbGF0ZSgtNDAuMDAwMDAwLCAtNDMuMDAwMDAwKVxcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkdyb3VwLTNcXFwiIHRyYW5zZm9ybT1cXFwidHJhbnNsYXRlKDQwLjAwMDAwMCwgNDMuMDAwMDAwKVxcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkdyb3VwLTItQ29weS0yXFxcIj48ZyBpZD1cXFwiR3JvdXAtQ29weVxcXCI+PGcgaWQ9XFxcImljX2xveWFsdHlfMjRweFxcXCI+XCIgK1xuICAgIFwiPG1hc2sgaWQ9XFxcIm1hc2stMlxcXCIgZmlsbD1cXFwid2hpdGVcXFwiPjx1c2UgeGxpbms6aHJlZj1cXFwiI3BhdGgtMVxcXCI+PC91c2U+XCIgK1xuICAgIFwiPC9tYXNrPjx1c2UgaWQ9XFxcImdwYXktU2hhcGVcXFwiIGZpbGw9XFxcIiNGRjYxMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgXCIgK1xuICAgIFwieGxpbms6aHJlZj1cXFwiI3BhdGgtMVxcXCI+PC91c2U+PHBhdGggZD1cXFwiTTMuNSw1IEMyLjY3LDUgMiw0LjMzIDIsMy41IEMyLFwiICtcbiAgICBcIjIuNjcgMi42NywyIDMuNSwyIEM0LjMzLDIgNSwyLjY3IDUsMy41IEM1LDQuMzMgNC4zMyw1IDMuNSw1IFpcXFwiIFwiICtcbiAgICBcImlkPVxcXCJQYXRoXFxcIiBmaWxsPVxcXCIjRkZGRkZGXFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiIG1hc2s9XFxcInVybCgjbWFzay0yKVxcXCI+XCIgK1xuICAgIFwiPC9wYXRoPjwvZz48L2c+PC9nPjxnIGlkPVxcXCJHcm91cC0xMy1Db3B5LTdcXFwiIHRyYW5zZm9ybT1cXFwidHJhbnNsYXRlXCIgK1xuICAgIFwiKDYuMDAwMDAwLCA2LjAwMDAwMClcXFwiIGZpbGw9XFxcIiNGRkZGRkZcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkdyb3VwLTEzLUNvcHktMlxcXCI+PHBhdGggZD1cXFwiTTIuMTUyMTczOTEsNC41NTE3MjQxNCBDMC45NjM1NjEwODIsXCIgK1xuICAgIFwiNC41NTE3MjQxNCAxLjk5ODQwMTQ0ZS0xNCwzLjUzMjc4NTk4IDEuOTk4NDAxNDRlLTE0LDIuMjc1ODYyMDcgXCIgK1xuICAgIFwiQzEuOTk4NDAxNDRlLTE0LDEuMDE4OTM4MTYgMC45NjM1NjEwODIsNi4zMDYwNjY3OGUtMTQgMi4xNTIxNzM5MSw2LlwiICtcbiAgICBcIjMwNjA2Njc4ZS0xNCBDMy4zNDA3ODY3NCw2LjMwNjA2Njc4ZS0xNCA0LjMwNDM0NzgzLDEuMDE4OTM4MTYgNC4zMDQzNDc4MyxcIiArXG4gICAgXCIyLjI3NTg2MjA3IEM0LjMwNDM0NzgzLDMuNTMyNzg1OTggMy4zNDA3ODY3NCw0LjU1MTcyNDE0IDIuMTUyMTczOTEsXCIgK1xuICAgIFwiNC41NTE3MjQxNCBaIE0yLjE1MjE3MzkxLDMuMzEwMzQ0ODMgQzIuNjkyNDUyNDcsMy4zMTAzNDQ4MyAzLjEzMDQzNDc4LDIuXCIgK1xuICAgIFwiODQ3MTkxMTIgMy4xMzA0MzQ3OCwyLjI3NTg2MjA3IEMzLjEzMDQzNDc4LDEuNzA0NTMzMDIgMi42OTI0NTI0NyxcIiArXG4gICAgXCIxLjI0MTM3OTMxIDIuMTUyMTczOTEsMS4yNDEzNzkzMSBDMS42MTE4OTUzNSwxLjI0MTM3OTMxIDEuMTczOTEzMDQsMVwiICtcbiAgICBcIi43MDQ1MzMwMiAxLjE3MzkxMzA0LDIuMjc1ODYyMDcgQzEuMTczOTEzMDQsMi44NDcxOTExMiAxLjYxMTg5NTM1LDMuXCIgK1xuICAgIFwiMzEwMzQ0ODMgMi4xNTIxNzM5MSwzLjMxMDM0NDgzIFpcXFwiIGlkPVxcXCJDb21iaW5lZC1TaGFwZVxcXCI+PC9wYXRoPlwiICtcbiAgICBcIjxwYXRoIGQ9XFxcIk02Ljg0NzgyNjA5LDkgQzUuNjU5MjEzMjYsOSA0LjY5NTY1MjE3LDcuOTgxMDYxODQgNC42OTU2NTIxNyxcIiArXG4gICAgXCI2LjcyNDEzNzkzIEM0LjY5NTY1MjE3LDUuNDY3MjE0MDIgNS42NTkyMTMyNiw0LjQ0ODI3NTg2IDYuODQ3ODI2MDksXCIgK1xuICAgIFwiNC40NDgyNzU4NiBDOC4wMzY0Mzg5Miw0LjQ0ODI3NTg2IDksNS40NjcyMTQwMiA5LDYuNzI0MTM3OTMgQzksNy45ODEwNjE4NFwiICtcbiAgICBcIiA4LjAzNjQzODkyLDkgNi44NDc4MjYwOSw5IFogTTYuODQ3ODI2MDksNy43NTg2MjA2OSBDNy4zODgxMDQ2NSxcIiArXG4gICAgXCI3Ljc1ODYyMDY5IDcuODI2MDg2OTYsNy4yOTU0NjY5OCA3LjgyNjA4Njk2LDYuNzI0MTM3OTMgQzcuODI2MDg2OTZcIiArXG4gICAgXCIsNi4xNTI4MDg4OCA3LjM4ODEwNDY1LDUuNjg5NjU1MTcgNi44NDc4MjYwOSw1LjY4OTY1NTE3IEM2LjMwNzU0NzUzLFwiICtcbiAgICBcIjUuNjg5NjU1MTcgNS44Njk1NjUyMiw2LjE1MjgwODg4IDUuODY5NTY1MjIsNi43MjQxMzc5MyBDNS44Njk1NjUyMixcIiArXG4gICAgXCI3LjI5NTQ2Njk4IDYuMzA3NTQ3NTMsNy43NTg2MjA2OSA2Ljg0NzgyNjA5LDcuNzU4NjIwNjkgWlxcXCIgXCIgK1xuICAgIFwiaWQ9XFxcIkNvbWJpbmVkLVNoYXBlXFxcIj48L3BhdGg+PHBvbHlnb24gaWQ9XFxcIlJlY3RhbmdsZVxcXCIgXCIgK1xuICAgIFwidHJhbnNmb3JtPVxcXCJ0cmFuc2xhdGUoNC40OTc3MjAsIDQuNTQxOTM4KSByb3RhdGUoMzQuMDAwMDAwKSBcIiArXG4gICAgXCJ0cmFuc2xhdGUoLTQuNDk3NzIwLCAtNC41NDE5MzgpIFxcXCIgcG9pbnRzPVxcXCIzLjc3OTAxNzc4IC0wLjIwMjI5NTk3OCBcIiArXG4gICAgXCI0Ljk3NDAyNzMgLTAuMTcxMDE5MTYxIDUuMjE2NDIyNjMgOS4yODYxNzI3OCA0LjAyMTQxMzExIDkuMjU0ODk1OTZcXFwiPlwiICtcbiAgICBcIjwvcG9seWdvbj48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPlwiO1xuXG5Db25zdGFudHMuR1BBWV9PRkZFUl9JQ09OX1NUWUxFID0gYFxuLiR7Q29uc3RhbnRzLkdQQVlfT0ZGRVJfSUNPTl9DTEFTU30ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAtNXB4O1xuICB0b3A6IC01cHg7XG59XG5cbiNpY19sb3lhbHR5XzI0cHggdXNlLmhvdmVyIHtcbiAgZmlsbDogI0ZDODUzQjtcbn1cbmA7XG5cbkNvbnN0YW50cy5HUEFZX09GRkVSX0RFU0NSSVBUSU9OX0NMQVNTID0gJ2dwYXktb2ZmZXItZGVzY3JpcHRpb24nO1xuXG5Db25zdGFudHMuR1BBWV9PRkZFUl9ERVNDUklQVElPTl9TVFlMRSA9IGBcbkBpbXBvcnQgdXJsKC8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Hb29nbGUrU2Fuczo1MDApO1xuLiR7Q29uc3RhbnRzLkdQQVlfT0ZGRVJfREVTQ1JJUFRJT05fQ0xBU1N9IHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250OiAxMHB4ICdHb29nbGUgU2Fucyc7XG4gIG1hcmdpbi10b3A6IDJweDtcbiAgbWFyZ2luLWJvdHRvbTogMHB4O1xufVxuXG4uJHtDb25zdGFudHMuR1BBWV9PRkZFUl9ERVNDUklQVElPTl9DTEFTU30uZ3BheS1idG4tY2xpY2tlZCB7XG4gIGNvbG9yOiAjM0M0MDQzO1xufVxuXG4uJHtDb25zdGFudHMuR1BBWV9PRkZFUl9ERVNDUklQVElPTl9DTEFTU30uc2hvcnQge1xuICBtaW4td2lkdGg6IDkwcHg7XG4gIHdpZHRoOiAxNjBweDtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfT0ZGRVJfREVTQ1JJUFRJT05fQ0xBU1N9Lmxvbmcge1xuICBtaW4td2lkdGg6IDE1MnB4O1xuICB3aWR0aDogMjQwcHg7XG59XG5gO1xuXG4vKipcbiAqIENsYXNzIHVzZWQgZm9yIHRoZSBuZXcgZ3BheSBidXR0b24gd2l0aCBjYXJkIGluZm8gKGxhc3QgNCBkaWdpdHMsIGNhcmQgbmV0KS5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTUyA9ICdncGF5LWNhcmQtaW5mby1idG4nO1xuXG5Db25zdGFudHMuR1BBWV9CVVRUT05fQ0FSRF9JTkZPX0JVVFRPTl9TVFlMRSA9IGBcbiAgLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTU30ge1xuICAgIGJhY2tncm91bmQtb3JpZ2luOiBjb250ZW50LWJveDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xuICAgIGJvcmRlcjogMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBib3gtc2hhZG93OiByZ2JhKDYwLCA2NCwgNjcsIDAuMykgMHB4IDFweCAxcHggMHB4LCByZ2JhKDYwLCA2NCwgNjcsIDAuMTUpIDBweCAxcHggM3B4IDFweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgaGVpZ2h0OiA0MHB4O1xuICAgIG1pbi1oZWlnaHQ6IDQwcHg7XG4gICAgcGFkZGluZzogMTFweCAyNHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICBwYWRkaW5nOiA5cHggMjRweCAxMHB4O1xuICAgIG1pbi13aWR0aDogMTkwcHg7XG4gICAgd2lkdGg6IDI0MHB4O1xuICB9XG5cbiAgLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTU30uYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWY2MzY4O1xuICB9XG5cbiAgLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTU30uaG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMzYzQwNDM7XG4gIH1cbiAgYDtcblxuXG4vKipcbiAqIFRydXN0ZWQgZG9tYWluIGZvciBzZWN1cmUgY29udGV4dCB2YWxpZGF0aW9uXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5UUlVTVEVEX0RPTUFJTiA9ICcuZ29vZ2xlLmNvbSc7XG5cbmV4cG9ydCB7Q29uc3RhbnRzfTtcblxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbi8qKlxuICogSW5qZWN0cyB0aGUgcHJvdmlkZWQgc3R5bGUgc2hlZXQgdG8gdGhlIGRvY3VtZW50IGhlYWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3R5bGVUZXh0IFRoZSBzdHlsZXNoZWV0IHRvIGJlIGluamVjdGVkLlxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGluamVjdFN0eWxlU2hlZXQoc3R5bGVUZXh0KSB7XG4gIGNvbnN0IHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlRWxlbWVudC50eXBlID0gJ3RleHQvY3NzJztcbiAgc3R5bGVFbGVtZW50LnRleHRDb250ZW50ID0gc3R5bGVUZXh0O1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG4gIHJldHVybiBzdHlsZUVsZW1lbnQ7XG59XG5cbi8qKlxuICogSW5qZWN0cyB0aGUgcGF5IHdpdGggZ29vZ2xlIGlmcmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZnJhbWVDbGFzc05hbWUgVGhlIGNsYXNzbmFtZSBvZiB0aGUgaUZyYW1lIHdyYXBwZXIuXG4gKiBAcmV0dXJuIHshe2NvbnRhaW5lcjogIUVsZW1lbnQsIGlmcmFtZTohSFRNTElGcmFtZUVsZW1lbnR9fVxuICovXG5mdW5jdGlvbiBpbmplY3RJZnJhbWUoaWZyYW1lQ2xhc3NOYW1lKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChDb25zdGFudHMuSUZSQU1FX0NPTlRBSU5FUl9DTEFTUyk7XG4gIGNvbnN0IGlmcmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBpZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaWZyYW1lQ29udGFpbmVyJyk7XG4gIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgY29uc3QgaWZyYW1lID1cbiAgICAgIC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJykpO1xuICBpZnJhbWUuY2xhc3NMaXN0LmFkZChpZnJhbWVDbGFzc05hbWUpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdmcmFtZWJvcmRlcicsICcwJyk7XG4gIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3Njcm9sbGluZycsICdubycpO1xuICBpZnJhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlmcmFtZUNvbnRhaW5lcik7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgcmV0dXJuIHsnY29udGFpbmVyJzogY29udGFpbmVyLCAnaWZyYW1lJzogaWZyYW1lfTtcbn1cblxuZXhwb3J0IHtcbiAgaW5qZWN0U3R5bGVTaGVldCxcbiAgaW5qZWN0SWZyYW1lLFxufTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5jb25zdCBNQVhfWl9JTkRFWCA9IDIxNDc0ODM2NDc7XG5cblxuY2xhc3MgR3JheXBhbmUge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGRvYy5jcmVhdGVFbGVtZW50KENvbnN0YW50cy5HUEFZX0dSQVlQQU5FKTtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5lbGVtZW50Xywge1xuICAgICAgJ3otaW5kZXgnOiBNQVhfWl9JTkRFWCxcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxuICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICd0b3AnOiAwLFxuICAgICAgJ3JpZ2h0JzogMCxcbiAgICAgICdib3R0b20nOiAwLFxuICAgICAgJ2xlZnQnOiAwLFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgzMiwgMzMsIDM2LCAuNiknLFxuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/V2luZG93fSAqL1xuICAgIHRoaXMucG9wdXBXaW5kb3dfID0gbnVsbDtcblxuICAgIHRoaXMuZWxlbWVudF8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wb3B1cFdpbmRvd18pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnBvcHVwV2luZG93Xy5mb2N1cygpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGdyYXlwYW5lLlxuICAgKiBAcGFyYW0gez9XaW5kb3d8dW5kZWZpbmVkfSBwb3B1cFdpbmRvd1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHNob3cocG9wdXBXaW5kb3cpIHtcbiAgICB0aGlzLnBvcHVwV2luZG93XyA9IHBvcHVwV2luZG93IHx8IG51bGw7XG4gICAgdGhpcy5kb2NfLmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZWxlbWVudF8sIHtcbiAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJyxcbiAgICAgICdvcGFjaXR5JzogMCxcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhbnNpdGlvbih0aGlzLmVsZW1lbnRfLCB7XG4gICAgICAnb3BhY2l0eSc6IDEsXG4gICAgfSwgMzAwLCAnZWFzZS1vdXQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgZ3JheXBhbmUuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfHVuZGVmaW5lZH1cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5wb3B1cFdpbmRvd18gPSBudWxsO1xuICAgIGlmICghdGhpcy5lbGVtZW50Xy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAvLyBIYXMgYWxyZWFkeSBiZWVuIHJlbW92ZWQgb3IgaGF2ZW4ndCBiZWVuIGV2ZW4gYWRkZWQgdG8gRE9NLlxuICAgICAgLy8gVGhpcyBjb3VsZCBiZSBwb3NzaWJsZSBhZnRlciByZWRpcmVjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zaXRpb24odGhpcy5lbGVtZW50Xywge1xuICAgICAgJ29wYWNpdHknOiAwLFxuICAgIH0sIDMwMCwgJ2Vhc2Utb3V0JykudGhlbigoKSA9PiB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5lbGVtZW50XywgeydkaXNwbGF5JzogJ25vbmUnfSk7XG4gICAgICB0aGlzLmRvY18uYm9keS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCAhaW1wb3J0YW50LiBUaGUgc3R5bGVzXG4gKiBhcmUgc3BlY2lmaWVkIGFzIGEgbWFwIGZyb20gQ1NTIHByb3BlcnR5IG5hbWVzIHRvIHRoZWlyIHZhbHVlcy5cbiAqXG4gKiBUaGUgYCFpbXBvcnRhbnRgIHN0eWxlcyBhcmUgdXNlZCB0byBhdm9pZCBhY2NpZGVudGFsIHNwZWNpZmljaXR5IG92ZXJyaWRlc1xuICogZnJvbSB0aGUgM3AgcGFnZSdzIHN0eWxlc2hlZXQuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59IHN0eWxlc1xuICovXG5mdW5jdGlvbiBzZXRJbXBvcnRhbnRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGssIHN0eWxlc1trXS50b1N0cmluZygpLCAnaW1wb3J0YW50Jyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIGFmdGVyIHRoZSBnaXZlbiBkdXJhdGlvbiBvZiBhbmltYXRpb25cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsIC0gRWxlbWVudCB0byBiZSBvYnNlcnZlZC5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+fSBwcm9wcyAtIHByb3BlcnRpZXMgdG8gYmUgYW5pbWF0ZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb25NaWxsaXMgLSBkdXJhdGlvbiBvZiBhbmltYXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VydmUgLSB0cmFuc2l0aW9uIGZ1bmN0aW9uIGZvciB0aGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7IVByb21pc2V9IFByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGRvbmUgcGxheWluZy5cbiAqL1xuZnVuY3Rpb24gdHJhbnNpdGlvbihlbCwgcHJvcHMsIGR1cmF0aW9uTWlsbGlzLCBjdXJ2ZSkge1xuICBjb25zdCB3aW4gPSBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBjb25zdCBwcmV2aW91c1RyYW5zaXRpb25WYWx1ZSA9IGVsLnN0eWxlLnRyYW5zaXRpb24gfHwgJyc7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB3aW4uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB3aW4uc2V0VGltZW91dChyZXNvbHZlLCBkdXJhdGlvbk1pbGxpcyk7XG4gICAgICBjb25zdCB0ciA9IGAke2R1cmF0aW9uTWlsbGlzfW1zICR7Y3VydmV9YDtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhlbCwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICd0cmFuc2l0aW9uJzogYHRyYW5zZm9ybSAke3RyfSwgb3BhY2l0eSAke3RyfWAsXG4gICAgICB9LCBwcm9wcykpO1xuICAgIH0pO1xuICB9KS50aGVuKCgpID0+IHtcbiAgICAvLyBTdG9wIHRyYW5zaXRpb24gYW5kIG1ha2Ugc3VyZSB0aGF0IHRoZSBmaW5hbCBwcm9wZXJ0aWVzIGdldCBzZXQuXG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICd0cmFuc2l0aW9uJzogcHJldmlvdXNUcmFuc2l0aW9uVmFsdWUsXG4gICAgfSwgcHJvcHMpKTtcbiAgfSk7XG59XG5cblxuZXhwb3J0IHtHcmF5cGFuZX07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7UG9zdE1lc3NhZ2VTZXJ2aWNlfSBmcm9tICcuL3Bvc3RfbWVzc2FnZV9zZXJ2aWNlLmpzJztcblxuLyoqXG4gKiBTdXBwb3J0ZWQgaW50ZXJhY3Rpb25zIGJldHdlZW4gaWZyYW1lIGFuZCBtZXJjaGFudCBwYWdlLlxuICpcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbi8vIE5leHQgSWQ6IDEwXG5jb25zdCBQb3N0TWVzc2FnZUV2ZW50VHlwZSA9IHtcbiAgSVNfUkVBRFlfVE9fUEFZOiA2LFxuICBMT0dfQlVUVE9OX0NMSUNLOiA1LFxuICBMT0dfSVNfUkVBRFlfVE9fUEFZX0FQSTogMCxcbiAgTE9HX0xPQURfUEFZTUVOVF9EQVRBX0FQSTogMSxcbiAgTE9HX1JFTkRFUl9CVVRUT046IDIsXG4gIExPR19JTklUSUFMSVpFX1BBWU1FTlRTX0NMSUVOVDogOSxcbiAgTE9HX1BBWV9GUkFNRV9SRVFVRVNURUQ6IDE1LFxuICBMT0dfUEFZX0ZSQU1FX0xPQURFRDogMTYsXG4gIExPR19QQVlfRlJBTUVfTE9BREVEX1dJVEhfQUxMX0pTOiAxNyxcbiAgTE9HX0lOTElORV9QQVlNRU5UX1dJREdFVF9JTklUSUFMSVpFOiA0LFxuICBMT0dfSU5MSU5FX1BBWU1FTlRfV0lER0VUX1NVQk1JVDogMyxcbiAgTE9HX0lOTElORV9QQVlNRU5UX1dJREdFVF9ESVNQTEFZRUQ6IDcsXG4gIExPR19JTkxJTkVfUEFZTUVOVF9XSURHRVRfSElEREVOOiA4LFxufTtcblxuLyoqXG4gKiBUeXBlcyBvZiBidXkgZmxvdyBhY3Rpdml0eSBtb2Rlcy5cbiAqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5jb25zdCBCdXlGbG93QWN0aXZpdHlNb2RlID0ge1xuICBVTktOT1dOX01PREU6IDAsXG4gIElGUkFNRTogMSxcbiAgUE9QVVA6IDIsXG4gIFJFRElSRUNUOiAzLFxuICBBTkRST0lEX05BVElWRTogNCxcbiAgUEFZTUVOVF9IQU5ETEVSOiA1LFxufTtcblxuLyoqXG4gKiBUeXBlcyBvZiBidXkgZmxvdyBhY3Rpdml0eSBtb2Rlcy5cbiAqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5jb25zdCBQdWJsaWNFcnJvckNvZGUgPSB7XG4gIFVOS05PV05fRVJST1JfVFlQRTogMCxcbiAgSU5URVJOQUxfRVJST1I6IDEsXG4gIERFVkVMT1BFUl9FUlJPUjogMixcbiAgQlVZRVJfQUNDT1VOVF9FUlJPUjogMyxcbiAgTUVSQ0hBTlRfQUNDT1VOVF9FUlJPUjogNCxcbiAgVU5TVVBQT1JURURfQVBJX1ZFUlNJT046IDUsXG4gIEJVWUVSX0NBTkNFTDogNixcbn07XG5cbi8qKlxuICogVGhlIHByZXNlbnRhdGlvbiBtb2RlIG9mIHRoZSBidXkgZmxvd1xuICpcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmNvbnN0IEJ1eUZsb3dNb2RlID0ge1xuICBQQVlfV0lUSF9HT09HTEU6IDUsXG4gIFNVQlNDUklCRV9XSVRIX0dPT0dMRTogNixcbn07XG5cbi8qKlxuICogSWZyYW1lIHVzZWQgZm9yIGxvZ2dpbmcgYW5kIHByZWZldGNoaW5nLlxuICpcbiAqIEB0eXBlIHs/RWxlbWVudH1cbiAqL1xubGV0IGlmcmFtZSA9IG51bGw7XG5cbi8qKiBAdHlwZSB7P1Bvc3RNZXNzYWdlU2VydmljZX0gKi9cbmxldCBwb3N0TWVzc2FnZVNlcnZpY2UgPSBudWxsO1xuXG4vKiogQHR5cGUgez9zdHJpbmd9ICovXG5sZXQgZW52aXJvbm1lbnQgPSBudWxsO1xuXG4vKiogQHR5cGUgez9zdHJpbmd9ICovXG5sZXQgZ29vZ2xlVHJhbnNhY3Rpb25JZCA9IG51bGw7XG5cbi8qKiBAdHlwZSB7bnVtYmVyfSAqL1xubGV0IG9yaWdpblRpbWVNcyA9IERhdGUubm93KCk7XG5cbi8qKiBAdHlwZSB7P0J1eUZsb3dBY3Rpdml0eU1vZGV9ICovXG5sZXQgYnV5Rmxvd0FjdGl2aXR5TW9kZSA9IG51bGw7XG5cbi8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbmxldCBpZnJhbWVMb2FkZWQgPSBmYWxzZTtcblxuLyoqIEB0eXBlIHshQXJyYXk8IU9iamVjdD59ICovXG5sZXQgYnVmZmVyID0gW107XG5cbmNsYXNzIFBheUZyYW1lSGVscGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBoaWRkZW4gaWZyYW1lIGZvciBsb2dnaW5nIGFuZCBhcHBlbmRzIGl0IHRvIHRoZSB0b3AgbGV2ZWxcbiAgICogZG9jdW1lbnQuXG4gICAqL1xuICBzdGF0aWMgbG9hZCgpIHtcbiAgICBpZiAoaWZyYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluaXRPcHRpb25zID1cbiAgICAgICAgLyoqIEB0eXBlIHshUGF5bWVudE9wdGlvbnN9ICovICh3aW5kb3dbJ2dwYXlJbml0UGFyYW1zJ10pIHx8IHt9O1xuICAgIGVudmlyb25tZW50ID0gaW5pdE9wdGlvbnMuZW52aXJvbm1lbnQgfHwgQ29uc3RhbnRzLkVudmlyb25tZW50LlBST0RVQ1RJT047XG4gICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgLy8gUGFzcyBpbiBvcmlnaW4gYmVjYXVzZSBkb2N1bWVudC5yZWZlcnJlciBpbnNpZGUgaWZyYW1lIGlzIGVtcHR5IGluXG4gICAgLy8gY2VydGFpbiBjYXNlc1xuICAgIC8vIENhbiBiZSByZXBsYWNlZCBieSBpZnJhbWUuc3JjPS4uLiBpbiBub24gR29vZ2xlIGNvbnRleHQuXG4gICAgaWZyYW1lLnNyYyA9IFBheUZyYW1lSGVscGVyLmdldElmcmFtZVVybF8oXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgaW5pdE9wdGlvbnMubWVyY2hhbnRJbmZvICYmIGluaXRPcHRpb25zLm1lcmNoYW50SW5mby5tZXJjaGFudElkKTtcbiAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX1BBWV9GUkFNRV9SRVFVRVNURUQsXG4gICAgICAnY2xpZW50TGF0ZW5jeVN0YXJ0TXMnOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuICAgIGlmcmFtZS5oZWlnaHQgPSAnMCc7XG4gICAgaWZyYW1lLndpZHRoID0gJzAnO1xuICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGlmcmFtZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX1BBWV9GUkFNRV9MT0FERURfV0lUSF9BTExfSlMsXG4gICAgICAgICdjbGllbnRMYXRlbmN5U3RhcnRNcyc6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIFBheUZyYW1lSGVscGVyLmlmcmFtZUxvYWRlZCgpO1xuICAgIH07XG4gICAgLy8gSWYgdGhlIGJvZHkgaXMgYWxyZWFkeSBsb2FkZWQsIGp1c3QgYXBwZW5kIHRoZSBpZnJhbWUuIE90aGVyd2lzZSwgd2Ugd2FpdFxuICAgIC8vIHVudGlsIHRoZSBET00gaGFzIGxvYWRlZCB0byBhcHBlbmQgdGhlIGlmcmFtZSwgb3RoZXJ3aXNlIGRvY3VtZW50LmJvZHkgaXNcbiAgICAvLyBudWxsLlxuICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICBQYXlGcmFtZUhlbHBlci5pbml0aWFsaXplXygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICdET01Db250ZW50TG9hZGVkJywgKCkgPT4gUGF5RnJhbWVIZWxwZXIuaW5pdGlhbGl6ZV8oKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgdGhlIGlmcmFtZSB0byB0aGUgRE9NIGFuZCB1cGRhdGVzIHRoZSBwb3N0IG1lc3NhZ2Ugc2VydmljZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBpbml0aWFsaXplXygpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgcG9zdE1lc3NhZ2VTZXJ2aWNlID0gbmV3IFBvc3RNZXNzYWdlU2VydmljZShpZnJhbWUuY29udGVudFdpbmRvdyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBpZnJhbWUgYW5kIHdhaXQgZm9yIGEgcmVzcG9uc2UuXG4gICAqIFVzZXMgdGhlIHJlc3BvbnNlSGFuZGxlciBzcGVjaWZpZWQgb25seSBpZiB0aGUgcmVzcG9uc2VUeXBlIGlzIGEgbWF0Y2guXG4gICAqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZGF0YVxuICAgKiBAcGFyYW0geyFQb3N0TWVzc2FnZUV2ZW50VHlwZX0gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZVR5cGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSByZXNwb25zZUhhbmRsZXJcbiAgICovXG4gIHN0YXRpYyBzZW5kQW5kV2FpdEZvclJlc3BvbnNlKFxuICAgICAgZGF0YSwgZXZlbnRUeXBlLCByZXNwb25zZVR5cGUsIHJlc3BvbnNlSGFuZGxlcikge1xuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQuZGF0YVtyZXNwb25zZVR5cGVdKSB7XG4gICAgICAgIHJlc3BvbnNlSGFuZGxlcihldmVudCk7XG4gICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byBwcm9jZXNzIHRoZSByZXNwb25zZSBmcm9tIHRoZSBwYXlmcmFtZSBvbmNlLlxuICAgICAgICAvLyBzbyBzdG9wIGxpc3RlbmluZyB0byB0aGUgZXZlbnQgb25jZSBwcm9jZXNzZWQuXG4gICAgICAgIFBheUZyYW1lSGVscGVyLnJlbW92ZU1lc3NhZ2VFdmVudExpc3RlbmVyXyhjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgUGF5RnJhbWVIZWxwZXIuYWRkTWVzc2FnZUV2ZW50TGlzdGVuZXJfKGNhbGxiYWNrKTtcblxuICAgIGNvbnN0IHBvc3RNZXNzYWdlRGF0YSA9IE9iamVjdC5hc3NpZ24oeydldmVudFR5cGUnOiBldmVudFR5cGV9LCBkYXRhKTtcbiAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZShwb3N0TWVzc2FnZURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciBmb3IgbGlzdGVuaW5nIHRvIG1lc3NhZ2VzIHJlY2VpdmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgYWRkTWVzc2FnZUV2ZW50TGlzdGVuZXJfKGNhbGxiYWNrKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciBmb3IgbGlzdGVuaW5nIHRvIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgcmVtb3ZlTWVzc2FnZUV2ZW50TGlzdGVuZXJfKGNhbGxiYWNrKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUG9zdHMgYSBtZXNzYWdlIHRvIHRoZSBpZnJhbWUgd2l0aCB0aGUgZ2l2ZW4gZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0fSBkYXRhXG4gICAqL1xuICBzdGF0aWMgcG9zdE1lc3NhZ2UoZGF0YSkge1xuICAgIGlmICghaWZyYW1lTG9hZGVkKSB7XG4gICAgICBidWZmZXIucHVzaChkYXRhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcG9zdE1lc3NhZ2VEYXRhID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAge1xuICAgICAgICAgICdidXlGbG93QWN0aXZpdHlNb2RlJzogYnV5Rmxvd0FjdGl2aXR5TW9kZSxcbiAgICAgICAgICAnZ29vZ2xlVHJhbnNhY3Rpb25JZCc6IGdvb2dsZVRyYW5zYWN0aW9uSWQsXG4gICAgICAgICAgJ29yaWdpblRpbWVNcyc6IG9yaWdpblRpbWVNcyxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YSk7XG4gICAgcG9zdE1lc3NhZ2VTZXJ2aWNlLnBvc3RNZXNzYWdlKFxuICAgICAgICBwb3N0TWVzc2FnZURhdGEsIFBheUZyYW1lSGVscGVyLmdldElmcmFtZU9yaWdpbl8oKSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYWN0aXZpdHkgbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHshQnV5Rmxvd0FjdGl2aXR5TW9kZX0gbW9kZVxuICAgKi9cbiAgc3RhdGljIHNldEJ1eUZsb3dBY3Rpdml0eU1vZGUobW9kZSkge1xuICAgIGJ1eUZsb3dBY3Rpdml0eU1vZGUgPSBtb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdvb2dsZSB0cmFuc2FjdGlvbiBpZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR4bklkXG4gICAqL1xuICBzdGF0aWMgc2V0R29vZ2xlVHJhbnNhY3Rpb25JZCh0eG5JZCkge1xuICAgIGdvb2dsZVRyYW5zYWN0aW9uSWQgPSB0eG5JZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvcmlnaW5UaW1lTXMuIFRvIGJlIHVzZWQgb25seSBmb3IgdGVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5UaW1lTXNUZW1wXG4gICAqL1xuICBzdGF0aWMgc2V0T3JpZ2luVGltZU1zKG9yaWdpblRpbWVNc1RlbXApIHtcbiAgICBvcmlnaW5UaW1lTXMgPSBvcmlnaW5UaW1lTXNUZW1wO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHBvc3RNZXNzYWdlU2VydmljZSBmb3IgdGVzdGluZy5cbiAgICpcbiAgICogQHBhcmFtIHshUG9zdE1lc3NhZ2VTZXJ2aWNlfSBtZXNzYWdlU2VydmljZVxuICAgKi9cbiAgc3RhdGljIHNldFBvc3RNZXNzYWdlU2VydmljZShtZXNzYWdlU2VydmljZSkge1xuICAgIHBvc3RNZXNzYWdlU2VydmljZSA9IG1lc3NhZ2VTZXJ2aWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgc2luZ2xldG9uIHZhcmlhYmxlcy5cbiAgICovXG4gIHN0YXRpYyByZXNldCgpIHtcbiAgICBpZnJhbWUgPSBudWxsO1xuICAgIGJ1ZmZlci5sZW5ndGggPSAwO1xuICAgIGlmcmFtZUxvYWRlZCA9IGZhbHNlO1xuICAgIGJ1eUZsb3dBY3Rpdml0eU1vZGUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgd2hldGhlciB0aGUgaWZyYW1lIGhhcyBiZWVuIGxvYWRlZCBvciBub3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9hZGVkXG4gICAqL1xuICBzdGF0aWMgc2V0SWZyYW1lTG9hZGVkKGxvYWRlZCkge1xuICAgIGlmcmFtZUxvYWRlZCA9IGxvYWRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbmV2ZXIgdGhlIGlmcmFtZSBpcyBsb2FkZWQuXG4gICAqL1xuICBzdGF0aWMgaWZyYW1lTG9hZGVkKCkge1xuICAgIGlmcmFtZUxvYWRlZCA9IHRydWU7XG4gICAgYnVmZmVyLmZvckVhY2goZnVuY3Rpb24oZGF0YSkge1xuICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2UoZGF0YSk7XG4gICAgfSk7XG4gICAgYnVmZmVyLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXZlbnRzIHRoYXQgaGF2ZSBiZWVuIGJ1ZmZlcmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IU9iamVjdD59XG4gICAqL1xuICBzdGF0aWMgZ2V0QnVmZmVyKCkge1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvKipcbiAgICogTW9ja3MgdGhlIGlmcmFtZSBhcyBhbiBhcmJpdHJhcnkgaHRtbCBlbGVtZW50IGluc3RlYWQgb2YgYWN0dWFsbHkgaW5qZWN0aW5nXG4gICAqIGl0IGZvciB0ZXN0aW5nLlxuICAgKi9cbiAgc3RhdGljIGluamVjdElmcmFtZUZvclRlc3RpbmcoKSB7XG4gICAgUGF5RnJhbWVIZWxwZXIucmVzZXQoKTtcbiAgICBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgUGF5RnJhbWVIZWxwZXIuaWZyYW1lTG9hZGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcGF5ZnJhbWUgb3JpZ2luIGJhc2VkIG9uIHRoZSBlbnZpcm9ubWVudC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGdldElmcmFtZU9yaWdpbl8oKSB7XG4gICAgbGV0IGlmcmFtZVVybCA9ICdodHRwczovL3BheSc7XG4gICAgaWYgKGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5TQU5EQk9YKSB7XG4gICAgICBpZnJhbWVVcmwgKz0gJy5zYW5kYm94JztcbiAgICB9IGVsc2UgaWYgKGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EKSB7XG4gICAgICBpZnJhbWVVcmwgKz0gJy1wcmVwcm9kLnNhbmRib3gnO1xuICAgIH1cbiAgICByZXR1cm4gaWZyYW1lVXJsICsgJy5nb29nbGUuY29tJztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwYXlmcmFtZSBVUkwgYmFzZWQgb24gdGhlIGVudmlyb25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luIFRoZSBvcmlnaW4gdGhhdCBpcyBvcGVuaW5nIHRoZSBwYXlmcmFtZS5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbD19IG1lcmNoYW50SWQgVGhlIG1lcmNoYW50IGlkLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgZ2V0SWZyYW1lVXJsXyhvcmlnaW4sIG1lcmNoYW50SWQpIHtcbiAgICAvLyBUcnVzdGVkUmVzb3VyY2VVcmwgaGVhZGVyIG5lZWRzIHRvIHN0YXJ0IHdpdGggaHR0cHMgb3IgJy8vJy5cbiAgICBjb25zdCBpZnJhbWVVcmwgPSBgaHR0cHM6Ly9wYXkke2Vudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EID9cbiAgICAgICAgICAgICAnLXByZXByb2Quc2FuZGJveCcgOlxuICAgICAgICAgICAgIGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5TQU5EQk9YID8gJy5zYW5kYm94JyA6ICcnfS5nb29nbGUuY29tL2dwL3AvdWkvcGF5ZnJhbWU/b3JpZ2luPSR7b3JpZ2lufSZtaWQ9JXttZXJjaGFudElkfWA7XG4gICAgcmV0dXJuIGlmcmFtZVVybDtcbiAgfVxufVxuXG4vLyBTdGFydCBsb2FkaW5nIHBheSBmcmFtZSBlYXJseVxuUGF5RnJhbWVIZWxwZXIubG9hZCgpO1xuXG5leHBvcnQge1xuICBCdXlGbG93QWN0aXZpdHlNb2RlLFxuICBCdXlGbG93TW9kZSxcbiAgUGF5RnJhbWVIZWxwZXIsXG4gIFBvc3RNZXNzYWdlRXZlbnRUeXBlLFxuICBQdWJsaWNFcnJvckNvZGUsXG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge1BheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9IGZyb20gJy4vcGF5bWVudHNfY2xpZW50X2RlbGVnYXRlX2ludGVyZmFjZS5qcyc7XG5pbXBvcnQge1BheW1lbnRzUmVxdWVzdERlbGVnYXRlfSBmcm9tICcuL3BheW1lbnRzX3JlcXVlc3RfZGVsZWdhdGUuanMnO1xuaW1wb3J0IHtQYXltZW50c1dlYkFjdGl2aXR5RGVsZWdhdGV9IGZyb20gJy4vcGF5bWVudHNfd2ViX2FjdGl2aXR5X2RlbGVnYXRlLmpzJztcbmltcG9ydCB7VXBpSGFuZGxlcn0gZnJvbSAnLi91cGlfaGFuZGxlci5qcyc7XG5pbXBvcnQge0FjdGl2aXR5UG9ydHN9IGZyb20gJ3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzJztcbmltcG9ydCB7QnV5Rmxvd0FjdGl2aXR5TW9kZSwgQnV5Rmxvd01vZGUsIFBheUZyYW1lSGVscGVyLCBQb3N0TWVzc2FnZUV2ZW50VHlwZSwgUHVibGljRXJyb3JDb2RlfSBmcm9tICcuL3BheV9mcmFtZV9oZWxwZXIuanMnO1xuaW1wb3J0IHthcGlWMkRvZXNNZXJjaGFudFN1cHBvcnRTcGVjaWZpZWRDYXJkVHlwZSwgY2hyb21lU3VwcG9ydHNQYXltZW50SGFuZGxlciwgY2hyb21lU3VwcG9ydHNQYXltZW50UmVxdWVzdCwgZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcywgZ2V0VXBpUGF5bWVudE1ldGhvZCwgdmFsaWRhdGVQYXltZW50T3B0aW9ucywgdmFsaWRhdGVJc1JlYWR5VG9QYXlSZXF1ZXN0LCB2YWxpZGF0ZVBheW1lbnREYXRhUmVxdWVzdCwgdmFsaWRhdGVTZWN1cmVDb250ZXh0fSBmcm9tICcuL3ZhbGlkYXRvci5qcyc7XG5cbmltcG9ydCB7Y3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbmNvbnN0IFRSVVNURURfRE9NQUlOUyA9IFtcbiAgJ2FjdGlvbnMuZ29vZ2xlLmNvbScsXG4gICdhbXAtYWN0aW9ucy5zYW5kYm94Lmdvb2dsZS5jb20nLFxuICAnYW1wLWFjdGlvbnMtc3RhZ2luZy5zYW5kYm94Lmdvb2dsZS5jb20nLFxuICAnYW1wLWFjdGlvbnMtYXV0b3B1c2guc2FuZGJveC5nb29nbGUuY29tJyxcbiAgJ3BheW1lbnRzLmRldmVsb3BlcnMuZ29vZ2xlLmNvbScsXG4gICdwYXltZW50cy5nb29nbGUuY29tJyxcbl07XG5cbi8qKlxuICogVGhlIGNsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgR29vZ2xlIFBheW1lbnQgQVBJcy5cbiAqIDxwPlxuICogVGhlIGFzeW5jIHJlZmVycyB0byB0aGUgZmFjdCB0aGF0IHRoaXMgY2xpZW50IHN1cHBvcnRzIHJlZGlyZWN0c1xuICogd2hlbiB1c2luZyB3ZWJhY3RpdnRpZXMuXG4gKiA8cD5cbiAqIElmIHlvdSBhcmUgdXNpbmcgdGhpcyBiZSBzdXJlIHRoYXQgdGhpcyBpcyB3aGF0IHlvdSB3YW50LlxuICogPHA+XG4gKiBJbiBhbG1vc3QgYWxsIGNhc2VzIFBheW1lbnRzQ2xpZW50IGlzIHRoZSBiZXR0ZXIgY2xpZW50IHRvIHVzZSBiZWNhdXNlXG4gKiBpdCBleHBvc2VzIGEgcHJvbWlzZXMgYmFzZWQgYXBpIHdoaWNoIGlzIGVhc2llciB0byBkZWFsIHdpdGguXG4gKiBAZmluYWxcbiAqL1xuY2xhc3MgUGF5bWVudHNBc3luY0NsaWVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXltZW50T3B0aW9uc30gcGF5bWVudE9wdGlvbnNcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhUGF5bWVudERhdGE+KX0gb25QYXltZW50UmVzcG9uc2VcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3VzZUlmcmFtZVxuICAgKiBAcGFyYW0geyFBY3Rpdml0eVBvcnRzPX0gb3B0X2FjdGl2aXRpZXMgQ2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBhIHNoYXJlZFxuICAgKiAgIGFjdGl2aXRpZXMgbWFuYWdlci4gQnkgZGVmYXVsdCwgdGhlIG5ldyBtYW5hZ2VyIGlzIGNyZWF0ZWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXltZW50T3B0aW9ucywgb25QYXltZW50UmVzcG9uc2UsIG9wdF91c2VJZnJhbWUsXG4gICAgICAgICAgICAgb3B0X2FjdGl2aXRpZXMpIHtcbiAgICB0aGlzLm9uUGF5bWVudFJlc3BvbnNlXyA9IG9uUGF5bWVudFJlc3BvbnNlO1xuXG4gICAgdmFsaWRhdGVQYXltZW50T3B0aW9ucyhwYXltZW50T3B0aW9ucyk7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5sb2FkUGF5bWVudERhdGFBcGlTdGFydFRpbWVNc18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZW52aXJvbm1lbnRfID1cbiAgICAgICAgcGF5bWVudE9wdGlvbnMuZW52aXJvbm1lbnQgfHwgQ29uc3RhbnRzLkVudmlyb25tZW50LlRFU1Q7XG4gICAgaWYgKCFQYXltZW50c0FzeW5jQ2xpZW50Lmdvb2dsZVRyYW5zYWN0aW9uSWRfKSB7XG4gICAgICBQYXltZW50c0FzeW5jQ2xpZW50Lmdvb2dsZVRyYW5zYWN0aW9uSWRfID1cbiAgICAgICAgICAvKiogQHR5cGUge3N0cmluZ30gKi8gKFxuICAgICAgICAgICAgICAodGhpcy5pc0luVHJ1c3RlZERvbWFpbl8oKSAmJiBwYXltZW50T3B0aW9uc1snaSddICYmXG4gICAgICAgICAgICAgICBwYXltZW50T3B0aW9uc1snaSddWydnb29nbGVUcmFuc2FjdGlvbklkJ10pID9cbiAgICAgICAgICAgICAgICAgIHBheW1lbnRPcHRpb25zWydpJ11bJ2dvb2dsZVRyYW5zYWN0aW9uSWQnXSA6XG4gICAgICAgICAgICAgICAgICBjcmVhdGVHb29nbGVUcmFuc2FjdGlvbklkKHRoaXMuZW52aXJvbm1lbnRfKSk7XG4gICAgfVxuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVBheW1lbnRPcHRpb25zfSAqL1xuICAgIHRoaXMucGF5bWVudE9wdGlvbnNfID0gcGF5bWVudE9wdGlvbnM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZX0gKi9cbiAgICB0aGlzLndlYkFjdGl2aXR5RGVsZWdhdGVfID0gbmV3IFBheW1lbnRzV2ViQWN0aXZpdHlEZWxlZ2F0ZShcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudF8sIFBheW1lbnRzQXN5bmNDbGllbnQuZ29vZ2xlVHJhbnNhY3Rpb25JZF8sXG4gICAgICAgIG9wdF91c2VJZnJhbWUsIG9wdF9hY3Rpdml0aWVzLFxuICAgICAgICBwYXltZW50T3B0aW9uc1snaSddICYmIHBheW1lbnRPcHRpb25zWydpJ11bJ3JlZGlyZWN0S2V5J10pO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5idXlGbG93TW9kZV8gPSBCdXlGbG93TW9kZS5QQVlfV0lUSF9HT09HTEU7XG5cbiAgICBjb25zdCBwYXltZW50UmVxdWVzdFN1cHBvcnRlZCA9IGNocm9tZVN1cHBvcnRzUGF5bWVudFJlcXVlc3QoKTtcbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhlIHRlbXBvcmFyeSBoYWNrIHRoYXQgZGlzYWJsZSBwYXltZW50c1xuICAgIC8vIHJlcXVlc3QgZm9yIGlubGluZSBmbG93LlxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9QYXltZW50c0NsaWVudERlbGVnYXRlSW50ZXJmYWNlfSAqL1xuICAgIHRoaXMuZGVsZWdhdGVfID0gcGF5bWVudFJlcXVlc3RTdXBwb3J0ZWQgJiYgIW9wdF91c2VJZnJhbWUgP1xuICAgICAgICBuZXcgUGF5bWVudHNSZXF1ZXN0RGVsZWdhdGUodGhpcy5lbnZpcm9ubWVudF8pIDpcbiAgICAgICAgdGhpcy53ZWJBY3Rpdml0eURlbGVnYXRlXztcblxuICAgIHRoaXMudXBpSGFuZGxlcl8gPSBuZXcgVXBpSGFuZGxlcigpO1xuXG4gICAgdGhpcy53ZWJBY3Rpdml0eURlbGVnYXRlXy5vblJlc3VsdCh0aGlzLm9uUmVzdWx0Xy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmRlbGVnYXRlXy5vblJlc3VsdCh0aGlzLm9uUmVzdWx0Xy5iaW5kKHRoaXMpKTtcblxuICAgIC8vIElmIHdlYiBkZWxlZ2F0ZSBpcyB1c2VkIGFueXdheSB0aGVuIHRoaXMgaXMgb3ZlcnJpZGRlbiBpbiB0aGUgd2ViXG4gICAgLy8gYWN0aXZpdHkgZGVsZWdhdGUgd2hlbiBsb2FkIHBheW1lbnQgZGF0YSBpcyBjYWxsZWQuXG4gICAgaWYgKGNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSkge1xuICAgICAgUGF5RnJhbWVIZWxwZXIuc2V0QnV5Rmxvd0FjdGl2aXR5TW9kZShcbiAgICAgICAgICBCdXlGbG93QWN0aXZpdHlNb2RlLlBBWU1FTlRfSEFORExFUik7XG4gICAgfSBlbHNlIGlmIChwYXltZW50UmVxdWVzdFN1cHBvcnRlZCkge1xuICAgICAgUGF5RnJhbWVIZWxwZXIuc2V0QnV5Rmxvd0FjdGl2aXR5TW9kZShCdXlGbG93QWN0aXZpdHlNb2RlLkFORFJPSURfTkFUSVZFKTtcbiAgICB9XG5cbiAgICBQYXlGcmFtZUhlbHBlci5zZXRHb29nbGVUcmFuc2FjdGlvbklkKFxuICAgICAgICBQYXltZW50c0FzeW5jQ2xpZW50Lmdvb2dsZVRyYW5zYWN0aW9uSWRfKTtcbiAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX0lOSVRJQUxJWkVfUEFZTUVOVFNfQ0xJRU5ULFxuICAgICAgJ2NsaWVudExhdGVuY3lTdGFydE1zJzogRGF0ZS5ub3coKSxcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnbWVzc2FnZScsIGV2ZW50ID0+IHRoaXMuaGFuZGxlTWVzc2FnZUV2ZW50XyhldmVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHdoZXRoZXIgdGhlIHVzZXIgY2FuIG1ha2UgcGF5bWVudHMgdXNpbmcgdGhlIFBheW1lbnQgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0geyFJc1JlYWR5VG9QYXlSZXF1ZXN0fSBpc1JlYWR5VG9QYXlSZXF1ZXN0XG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBUaGUgcHJvbWlzZSB3aWxsIGNvbnRhaW4gdGhlIGJvb2xlYW4gcmVzdWx0IGFuZCBlcnJvclxuICAgKiAgICAgbWVzc2FnZSB3aGVuIHBvc3NpYmxlLlxuICAgKiBAZXhwb3J0XG4gICAqL1xuICBpc1JlYWR5VG9QYXkoaXNSZWFkeVRvUGF5UmVxdWVzdCkge1xuICAgIC8vIE1lcmdlIHdpdGggcGF5bWVudE9wdGlvbnMsIHByZWZlcnJpbmcgdmFsdWVzIGZyb20gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICAgIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0ID1cbiAgICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBheW1lbnRPcHRpb25zXywgaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgfVxuICAgIGNvbnN0IHN0YXJ0VGltZU1zID0gRGF0ZS5ub3coKTtcbiAgICAvKiogQHR5cGUgez9zdHJpbmd9ICovXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdmFsaWRhdGVTZWN1cmVDb250ZXh0KCkgfHxcbiAgICAgICAgdmFsaWRhdGVJc1JlYWR5VG9QYXlSZXF1ZXN0KGlzUmVhZHlUb1BheVJlcXVlc3QpO1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIFBheW1lbnRzQXN5bmNDbGllbnQubG9nRGV2RXJyb3JUb0NvbnNvbGVfKCdpc1JlYWR5VG9QYXknLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19JU19SRUFEWV9UT19QQVlfQVBJLFxuICAgICAgICAgICdlcnJvcic6IFB1YmxpY0Vycm9yQ29kZS5ERVZFTE9QRVJfRVJST1IsXG4gICAgICAgIH0pO1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICdzdGF0dXNDb2RlJzogQ29uc3RhbnRzLlJlc3BvbnNlU3RhdHVzLkRFVkVMT1BFUl9FUlJPUixcbiAgICAgICAgICAnc3RhdHVzTWVzc2FnZSc6IGVycm9yTWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUmVhZHlUb1BheVByb21pc2UgPSB0aGlzLmlzUmVhZHlUb1BheV8oaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG5cbiAgICBpc1JlYWR5VG9QYXlQcm9taXNlLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX0lTX1JFQURZX1RPX1BBWV9BUEksXG4gICAgICAgICdjbGllbnRMYXRlbmN5U3RhcnRNcyc6IHN0YXJ0VGltZU1zLFxuICAgICAgICAnaXNSZWFkeVRvUGF5QXBpUmVzcG9uc2UnOiByZXNwb25zZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0pO1xuICAgIHJldHVybiBpc1JlYWR5VG9QYXlQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdHVhbCBpbXBsZW1lbnRhdGlvbiBvZiBpc1JlYWR5VG9QYXkgaW4gYSBwcml2YXRlIG1ldGhvZCBzbyB0aGF0XG4gICAqIHdlIGNhbiBhZGQgY2FsbGJhY2tzIHRvIHRoZSBwcm9taXNlIHRvIG1lYXN1cmUgbGF0ZW5jaWVzLlxuICAgKlxuICAgKiBAcGFyYW0geyFJc1JlYWR5VG9QYXlSZXF1ZXN0fSBpc1JlYWR5VG9QYXlSZXF1ZXN0XG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBUaGUgcHJvbWlzZSB3aWxsIGNvbnRhaW4gdGhlIGJvb2xlYW4gcmVzdWx0IGFuZCBlcnJvclxuICAgKiAgICAgbWVzc2FnZSB3aGVuIHBvc3NpYmxlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNSZWFkeVRvUGF5Xyhpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gICAgaWYgKHRoaXMudXBpSGFuZGxlcl8uaXNVcGlSZXF1ZXN0KGlzUmVhZHlUb1BheVJlcXVlc3QpKSB7XG4gICAgICByZXR1cm4gdGhpcy51cGlIYW5kbGVyXy5pc1JlYWR5VG9QYXkoaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgfVxuICAgIGlmIChjaHJvbWVTdXBwb3J0c1BheW1lbnRSZXF1ZXN0KCkgJiZcbiAgICAgICAhaXNOYXRpdmVEaXNhYmxlZEluUmVxdWVzdChpc1JlYWR5VG9QYXlSZXF1ZXN0KSkge1xuICAgICAgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzUmVhZHlUb1BheUFwaVYyRm9yQ2hyb21lUGF5bWVudFJlcXVlc3RfKFxuICAgICAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBhcGlWZXJzaW9uIDEgYnJhbmNoLlxuICAgICAgICAvLyBJZiB0aGUgbWVyY2hhbnQgc3VwcG9ydHMgb25seSBUb2tlbml6ZWQgY2FyZHMgdGhlbiBqdXN0IHJlbHkgb25cbiAgICAgICAgLy8gZGVsZWdhdGUgdG8gZ2l2ZSB1cyB0aGUgcmVzdWx0LlxuICAgICAgICAvLyBUaGlzIHdpbGwgbmVlZCB0byBjaGFuZ2Ugb25jZSBiLzc4NTE5MTg4IGlzIGZpeGVkLlxuICAgICAgICBjb25zdCB3ZWJQcm9taXNlID1cbiAgICAgICAgICAgIHRoaXMud2ViQWN0aXZpdHlEZWxlZ2F0ZV8uaXNSZWFkeVRvUGF5KGlzUmVhZHlUb1BheVJlcXVlc3QpO1xuICAgICAgICBjb25zdCBuYXRpdmVQcm9taXNlID0gdGhpcy5kZWxlZ2F0ZV8uaXNSZWFkeVRvUGF5KGlzUmVhZHlUb1BheVJlcXVlc3QpO1xuICAgICAgICBpZiAoZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcyhpc1JlYWR5VG9QYXlSZXF1ZXN0KSAmJlxuICAgICAgICAgICAgIWNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSkge1xuICAgICAgICAgIHJldHVybiBuYXRpdmVQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB3ZWJJc1JlYWR5VG9QYXkgb25seSBpZiBkZWxlZ2F0ZUlzUmVhZHlUb1BheSBoYXMgYmVlblxuICAgICAgICAvLyBleGVjdXRlZC5cbiAgICAgICAgcmV0dXJuIG5hdGl2ZVByb21pc2UudGhlbigoKSA9PiB3ZWJQcm9taXNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgd2ViUHJvbWlzZSA9XG4gICAgICAgIHRoaXMud2ViQWN0aXZpdHlEZWxlZ2F0ZV8uaXNSZWFkeVRvUGF5KGlzUmVhZHlUb1BheVJlcXVlc3QpO1xuICAgIHJldHVybiB3ZWJQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBpcyByZWFkeSB0byBwYXkgZm9yIGFwaSB2Mi5cbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gVGhlIHByb21pc2Ugd2lsbCBjb250YWluIHRoZSBib29sZWFuIHJlc3VsdCBhbmQgZXJyb3JcbiAgICogICAgIG1lc3NhZ2Ugd2hlbiBwb3NzaWJsZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzUmVhZHlUb1BheUFwaVYyRm9yQ2hyb21lUGF5bWVudFJlcXVlc3RfKGlzUmVhZHlUb1BheVJlcXVlc3QpIHtcbiAgICBsZXQgZGVmYXVsdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoeydyZXN1bHQnOiBmYWxzZX0pO1xuICAgIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmV4aXN0aW5nUGF5bWVudE1ldGhvZFJlcXVpcmVkKSB7XG4gICAgICBkZWZhdWx0UHJvbWlzZSA9XG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHsncmVzdWx0JzogZmFsc2UsICdwYXltZW50TWV0aG9kUHJlc2VudCc6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgbGV0IG5hdGl2ZVByb21pc2UgPSBkZWZhdWx0UHJvbWlzZTtcbiAgICBpZiAoYXBpVjJEb2VzTWVyY2hhbnRTdXBwb3J0U3BlY2lmaWVkQ2FyZFR5cGUoXG4gICAgICAgICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LCBDb25zdGFudHMuQXV0aE1ldGhvZC5DUllQVE9HUkFNXzNEUykpIHtcbiAgICAgIC8vIElmIHRoZSBtZXJjaGFudCBzdXBwb3J0cyB0b2tlbml6ZWQgY2FyZHMuXG4gICAgICAvLyBNYWtlIGEgc2VwYXJhdGUgY2FsbCB0byBnbXMgY29yZSB0byBjaGVjayBpZiB0aGUgdXNlciBpc1JlYWR5VG9QYXlcbiAgICAgIC8vIHdpdGgganVzdCB0b2tlbml6ZWQgY2FyZHMuIFdlIGNhbid0IHBhc3MgaW4gUEFOX09OTFkgaGVyZVxuICAgICAgLy8gYmVjYXVzZSBnbXMgY29yZSBhbHdheXMgcmV0dXJucyB0cnVlIGZvciBQQU5fT05MWS5cbiAgICAgIC8vIExlYXZlIG90aGVyIHBheW1lbnQgbWV0aG9kcyBhcyBpcy5cbiAgICAgIGNvbnN0IG5hdGl2ZVJ0cFJlcXVlc3QgPSAvKiogQHR5cGUgeyFJc1JlYWR5VG9QYXlSZXF1ZXN0fSAqL1xuICAgICAgICAgIChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGlzUmVhZHlUb1BheVJlcXVlc3QpKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hdGl2ZVJ0cFJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChuYXRpdmVSdHBSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kc1tpXS50eXBlID09XG4gICAgICAgICAgICBDb25zdGFudHMuUGF5bWVudE1ldGhvZC5DQVJEKSB7XG4gICAgICAgICAgbmF0aXZlUnRwUmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHNbaV1cbiAgICAgICAgICAgICAgLnBhcmFtZXRlcnNbJ2FsbG93ZWRBdXRoTWV0aG9kcyddID1cbiAgICAgICAgICAgICAgW0NvbnN0YW50cy5BdXRoTWV0aG9kLkNSWVBUT0dSQU1fM0RTXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuYXRpdmVQcm9taXNlID0gdGhpcy5kZWxlZ2F0ZV8uaXNSZWFkeVRvUGF5KG5hdGl2ZVJ0cFJlcXVlc3QpO1xuICAgIH1cblxuICAgIGxldCB3ZWJQcm9taXNlID0gZGVmYXVsdFByb21pc2U7XG4gICAgaWYgKGFwaVYyRG9lc01lcmNoYW50U3VwcG9ydFNwZWNpZmllZENhcmRUeXBlKFxuICAgICAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdCwgQ29uc3RhbnRzLkF1dGhNZXRob2QuUEFOX09OTFkpKSB7XG4gICAgICB3ZWJQcm9taXNlID0gdGhpcy53ZWJBY3Rpdml0eURlbGVnYXRlXy5pc1JlYWR5VG9QYXkoaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHNlc3Npb24gc3RvcmFnZSB3aXRoIHBheW1lbnQgaGFuZGxlciBjYW5NYWtlUGF5bWVudCByZXN1bHQgYnV0XG4gICAgLy8gcmVseSBvbiB3ZWIgZGVsZWdhdGUgZm9yIGFjdHVhbCByZXNwb25zZVxuICAgIGlmIChjaHJvbWVTdXBwb3J0c1BheW1lbnRIYW5kbGVyKCkpIHtcbiAgICAgIHJldHVybiBuYXRpdmVQcm9taXNlLnRoZW4oKCkgPT4gd2ViUHJvbWlzZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hdGl2ZVByb21pc2UudGhlbihuYXRpdmVSZXN1bHQgPT4ge1xuICAgICAgaWYgKChuYXRpdmVSZXN1bHQgJiYgbmF0aXZlUmVzdWx0WydyZXN1bHQnXSkgPT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gbmF0aXZlUmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdlYlByb21pc2U7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJlZmV0Y2ggcGF5bWVudERhdGEgdG8gc3BlZWQgdXAgbG9hZFBheW1lbnREYXRhIGNhbGwuIE5vdGUgdGhlIHByb3ZpZGVkXG4gICAqIHBheW1lbnREYXRhUmVxdWVzdCBzaG91bGQgZXhhY3RseSBiZSB0aGUgc2FtZSBhcyBwcm92aWRlZCBpblxuICAgKiBsb2FkUGF5bWVudERhdGEgdG8gbWFrZSB0aGUgbG9hZFBheW1lbnREYXRhIGNhbGwgZmFzdCBzaW5jZSBjdXJyZW50XG4gICAqIHdlYiBmbG93IHByZWZldGNoaW5nIGlzIGJhc2VkIG9uIHRoZSBmdWxsIHJlcXVlc3QgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3QgUHJvdmlkZXMgbmVjZXNzYXJ5XG4gICAqICAgICBpbmZvcm1hdGlvbiB0byBzdXBwb3J0IGEgcGF5bWVudC5cbiAgICogQGV4cG9ydFxuICAgKi9cbiAgcHJlZmV0Y2hQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICAvKiogQHR5cGUgez9zdHJpbmd9ICovXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdmFsaWRhdGVTZWN1cmVDb250ZXh0KCkgfHxcbiAgICAgICAgdmFsaWRhdGVQYXltZW50RGF0YVJlcXVlc3QocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICBQYXltZW50c0FzeW5jQ2xpZW50LmxvZ0RldkVycm9yVG9Db25zb2xlXyhcbiAgICAgICAgICAncHJlZmV0Y2hQYXltZW50RGF0YScsIGVycm9yTWVzc2FnZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYXNzaWduSW50ZXJuYWxQYXJhbXNfKHBheW1lbnREYXRhUmVxdWVzdCk7XG4gICAgaWYgKGNocm9tZVN1cHBvcnRzUGF5bWVudFJlcXVlc3QoKVxuICAgICAgICYmICFpc05hdGl2ZURpc2FibGVkSW5SZXF1ZXN0KHBheW1lbnREYXRhUmVxdWVzdCkpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGVfLnByZWZldGNoUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIG5vbiBjaHJvbWUgc3VwcG9ydHMgYWx3YXlzIHVzZSB0aGUgaG9zdGluZyBwYWdlLlxuICAgICAgdGhpcy53ZWJBY3Rpdml0eURlbGVnYXRlXy5wcmVmZXRjaFBheW1lbnREYXRhKHBheW1lbnREYXRhUmVxdWVzdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgUGF5bWVudERhdGEsIHdoaWNoIGNvbnRhaW5zIG5lY2Vzc2FyeSBpbmZvbWFydGlvbiB0byBjb21wbGV0ZSBhXG4gICAqIHBheW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0IFByb3ZpZGVzIG5lY2Vzc2FyeVxuICAgKiAgICAgaW5mb3JtYXRpb24gdG8gc3VwcG9ydCBhIHBheW1lbnQuXG4gICAqIEBleHBvcnRcbiAgICovXG4gIGxvYWRQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX0JVVFRPTl9DTElDSyxcbiAgICB9KTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB2YWxpZGF0ZVNlY3VyZUNvbnRleHQoKSB8fFxuICAgICAgICB2YWxpZGF0ZVBheW1lbnREYXRhUmVxdWVzdChwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgIHRoaXMuYnV5Rmxvd01vZGVfID0gcGF5bWVudERhdGFSZXF1ZXN0ICYmIHBheW1lbnREYXRhUmVxdWVzdC5zd2cgP1xuICAgICAgICBCdXlGbG93TW9kZS5TVUJTQ1JJQkVfV0lUSF9HT09HTEUgOlxuICAgICAgICBCdXlGbG93TW9kZS5QQVlfV0lUSF9HT09HTEU7XG4gICAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgICAgdGhpcy5vblBheW1lbnRSZXNwb25zZV8obmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19MT0FEX1BBWU1FTlRfREFUQV9BUEksXG4gICAgICAgICAgJ2Vycm9yJzogUHVibGljRXJyb3JDb2RlLkRFVkVMT1BFUl9FUlJPUixcbiAgICAgICAgICAnYnV5Rmxvd01vZGUnOiB0aGlzLmJ1eUZsb3dNb2RlXyxcbiAgICAgICAgfSk7XG4gICAgICAgIFBheW1lbnRzQXN5bmNDbGllbnQubG9nRGV2RXJyb3JUb0NvbnNvbGVfKFxuICAgICAgICAgICAgJ2xvYWRQYXltZW50RGF0YScsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgJ3N0YXR1c0NvZGUnOiBDb25zdGFudHMuUmVzcG9uc2VTdGF0dXMuREVWRUxPUEVSX0VSUk9SLFxuICAgICAgICAgICdzdGF0dXNNZXNzYWdlJzogZXJyb3JNZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZXIgZm9yIFVQSSBQYXltZW50TWV0aG9kXG4gICAgLy8gQ3VycmVudGx5IHdlIGRvbid0IHN1cHBvcnQgVVBJIGFsb25nIHdpdGggb3RoZXIgcGF5bWVudCBtZXRob2RzLCBpZlxuICAgIC8vIFVQSSBpcyBpbiBwYXltZW50IG1ldGhvZHMgdGhlbiB3ZSBhc3N1bWUgaXQgaXMgVVBJIG9ubHkuXG4gICAgY29uc3QgdXBpUGF5bWVudE1ldGhvZCA9IGdldFVwaVBheW1lbnRNZXRob2QocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICBpZiAodXBpUGF5bWVudE1ldGhvZCkge1xuICAgICAgdGhpcy51cGlIYW5kbGVyXy5sb2FkUGF5bWVudERhdGEoXG4gICAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LCB1cGlQYXltZW50TWV0aG9kLCB0aGlzLm9uUmVzdWx0Xy5iaW5kKHRoaXMpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpc1JlYWR5VG9QYXlSZXN1bHQgPVxuICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShDb25zdGFudHMuSVNfUkVBRFlfVE9fUEFZX1JFU1VMVF9LRVkpO1xuICAgIHRoaXMubG9hZFBheW1lbnREYXRhQXBpU3RhcnRUaW1lTXNfID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmFzc2lnbkludGVybmFsUGFyYW1zXyhwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgIC8vIFdlIHdhbnQgdG8gZmFsbCBiYWNrIHRvIHRoZSB3ZWIgZGVsZWdhdGUgaWYgcGF5bWVudCBoYW5kbGVyIGlzIHN1cHBvcnRlZFxuICAgIC8vIGFuZCBpc1JlYWR5VG9QYXkgYml0IGlzIG5vdCBleHBsaWNpdGx5IHNldCB0byB0cnVlIChmYWxsYmFjayB0byB3ZWIgaWZcbiAgICAvLyBpc1JlYWR5VG9QYXkgd2Fzbid0IGNhbGxlZCBmb3IgUEgpXG4gICAgaWYgKChjaHJvbWVTdXBwb3J0c1BheW1lbnRIYW5kbGVyKCkgJiYgaXNSZWFkeVRvUGF5UmVzdWx0ICE9PSAndHJ1ZScpXG4gICAgICAgfHwgaXNOYXRpdmVEaXNhYmxlZEluUmVxdWVzdChwYXltZW50RGF0YVJlcXVlc3QpKSB7XG4gICAgICB0aGlzLndlYkFjdGl2aXR5RGVsZWdhdGVfLmxvYWRQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlbGVnYXRlXy5sb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRldmVsb3BlciBlcnJvciB0byBjb25zb2xlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXBpTmFtZVxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGVycm9yTWVzc2FnZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGxvZ0RldkVycm9yVG9Db25zb2xlXyhhcGlOYW1lLCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmVycm9yKCdERVZFTE9QRVJfRVJST1IgaW4gJyArIGFwaU5hbWUgKyAnIDogJyArIGVycm9yTWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgPGRpdj4gZWxlbWVudCBjb250YWluaW5nIGEgR29vZ2xlIFBheSBwYXltZW50IGJ1dHRvbi5cbiAgICpcbiAgICogQHBhcmFtIHshQnV0dG9uT3B0aW9ucz19IG9wdGlvbnNcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqIEBleHBvcnRcbiAgICovXG4gIGNyZWF0ZUJ1dHRvbihvcHRpb25zID0ge30pIHtcbiAgICBsZXQgYnV0dG9uID0gbnVsbDtcbiAgICAvLyBPbmx5IGxvZyBpZiBidXR0b24gd2FzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgY29uc3Qgc3RhcnRUaW1lTXMgPSBEYXRlLm5vdygpO1xuICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICdldmVudFR5cGUnOiBQb3N0TWVzc2FnZUV2ZW50VHlwZS5MT0dfUkVOREVSX0JVVFRPTixcbiAgICAgICdjbGllbnRMYXRlbmN5U3RhcnRNcyc6IHN0YXJ0VGltZU1zLFxuICAgIH0pO1xuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnR9IGUgcG9zdE1lc3NhZ2UgZXZlbnQgZnJvbSB0aGUgQU1QIHBhZ2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVNZXNzYWdlRXZlbnRfKGUpIHtcbiAgICBpZiAodGhpcy5pc0luVHJ1c3RlZERvbWFpbl8oKSkge1xuICAgICAgLy8gT25seSBoYW5kbGVzIHRoZSBldmVudCByaWdodCBub3cgaWYgbG9hZGVkIGluIHRydXN0ZWQgZG9tYWluLlxuICAgICAgaWYgKGUuZGF0YVsnbmFtZSddID09PSAnbG9nUGF5bWVudERhdGEnKSB7XG4gICAgICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKGUuZGF0YVsnZGF0YSddKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzSW5UcnVzdGVkRG9tYWluXygpIHtcbiAgICByZXR1cm4gVFJVU1RFRF9ET01BSU5TLmluZGV4T2Yod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSAhPSAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBsb2FkIHBheW1lbnQgZGF0YSByZXN1bHQgaXMgcmV0dXJuZWQuIFRoaXMgdHJpZ2dlcnMgdGhlIHBheW1lbnRcbiAgICogcmVzcG9uc2UgY2FsbGJhY2sgcGFzc2VkIHRvIHRoZSBjbGllbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblJlc3VsdF8ocmVzcG9uc2UpIHtcbiAgICByZXNwb25zZVxuICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICdldmVudFR5cGUnOiBQb3N0TWVzc2FnZUV2ZW50VHlwZS5MT0dfTE9BRF9QQVlNRU5UX0RBVEFfQVBJLFxuICAgICAgICAgICAgJ2NsaWVudExhdGVuY3lTdGFydE1zJzogdGhpcy5sb2FkUGF5bWVudERhdGFBcGlTdGFydFRpbWVNc18sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChyZXN1bHQgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHRbJ2Vycm9yQ29kZSddKSB7XG4gICAgICAgICAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICdldmVudFR5cGUnOiBQb3N0TWVzc2FnZUV2ZW50VHlwZS5MT0dfTE9BRF9QQVlNRU5UX0RBVEFfQVBJLFxuICAgICAgICAgICAgICAnZXJyb3InOiAvKiogQHR5cGUgeyFQdWJsaWNFcnJvckNvZGV9ICovIChyZXN1bHRbJ2Vycm9yQ29kZSddKSxcbiAgICAgICAgICAgICAgJ2J1eUZsb3dNb2RlJzogdGhpcy5idXlGbG93TW9kZV8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdXNlciBjbG9zZXMgd2luZG93IHdlIGRvbid0IGdldCBhIGVycm9yIGNvZGVcbiAgICAgICAgICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19MT0FEX1BBWU1FTlRfREFUQV9BUEksXG4gICAgICAgICAgICAgICdlcnJvcic6IFB1YmxpY0Vycm9yQ29kZS5CVVlFUl9DQU5DRUwsXG4gICAgICAgICAgICAgICdidXlGbG93TW9kZSc6IHRoaXMuYnV5Rmxvd01vZGVfLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB0aGlzLm9uUGF5bWVudFJlc3BvbnNlXyhyZXNwb25zZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3RcbiAgICogQHJldHVybiB7IVBheW1lbnREYXRhUmVxdWVzdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzc2lnbkludGVybmFsUGFyYW1zXyhwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICBjb25zdCBpbnRlcm5hbFBhcmFtID0ge1xuICAgICAgJ3N0YXJ0VGltZU1zJzogRGF0ZS5ub3coKSxcbiAgICAgICdnb29nbGVUcmFuc2FjdGlvbklkJzogUGF5bWVudHNBc3luY0NsaWVudC5nb29nbGVUcmFuc2FjdGlvbklkXyxcbiAgICB9O1xuICAgIHBheW1lbnREYXRhUmVxdWVzdFsnaSddID0gcGF5bWVudERhdGFSZXF1ZXN0WydpJ10gP1xuICAgICAgICBPYmplY3QuYXNzaWduKGludGVybmFsUGFyYW0sIHBheW1lbnREYXRhUmVxdWVzdFsnaSddKSA6XG4gICAgICAgIGludGVybmFsUGFyYW07XG4gICAgcmV0dXJuIHBheW1lbnREYXRhUmVxdWVzdDtcbiAgfVxufVxuXG4vKiogQGNvbnN0IHs/c3RyaW5nfSAqL1xuUGF5bWVudHNBc3luY0NsaWVudC5nb29nbGVUcmFuc2FjdGlvbklkXztcblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHJlcXVlc3Qgc3BlY2lmaWVzIHRoYXQgdGhlIG5hdGl2ZSBzdXBwb3J0IGhhcyB0byBiZSBkaXNhYmxlZC5cbiAqXG4gKiBAcGFyYW0geyFJc1JlYWR5VG9QYXlSZXF1ZXN0fCFQYXltZW50RGF0YVJlcXVlc3R9IHJlcXVlc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlRGlzYWJsZWRJblJlcXVlc3QocmVxdWVzdCkge1xuICByZXR1cm4gKHJlcXVlc3RbJ2knXSAmJiByZXF1ZXN0WydpJ11bJ2Rpc2FibGVOYXRpdmUnXSkgPT09IHRydWU7XG59XG5cblxuZXhwb3J0IHtQYXltZW50c0FzeW5jQ2xpZW50fTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEFuIGludGVyZmFjZSB3aGljaCBjYXB0dXJlcyB3aGF0IHdlIG5lZWQgdG8gc3RhcnQgdXAgYnV5ZmxvdyBhY3Jvc3Mgc3VyZmFjZXMuXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmNsYXNzIFBheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciB0aGUgdXNlciBjYW4gbWFrZSBwYXltZW50cyB1c2luZyB0aGUgUGF5bWVudCBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R9IGlzUmVhZHlUb1BheVJlcXVlc3RcbiAgICogQHJldHVybiB7IVByb21pc2V9IFRoZSBwcm9taXNlIHdpbGwgY29udGFpbiB0aGUgYm9vbGVhbiByZXN1bHQgYW5kIGVycm9yXG4gICAqICAgICBtZXNzYWdlIHdoZW4gcG9zc2libGUuXG4gICAqL1xuICBpc1JlYWR5VG9QYXkoaXNSZWFkeVRvUGF5UmVxdWVzdCkge31cblxuICAvKipcbiAgICogUHJlZmV0Y2ggcGF5bWVudERhdGEgdG8gc3BlZWQgdXAgbG9hZFBheW1lbnREYXRhIGNhbGwuIE5vdGUgdGhlIHByb3ZpZGVkXG4gICAqIHBheW1lbnREYXRhUmVxdWVzdCBzaG91bGQgZXhhY3RseSBiZSB0aGUgc2FtZSBhcyBwcm92aWRlZCBpblxuICAgKiBsb2FkUGF5bWVudERhdGEgdG8gbWFrZSB0aGUgbG9hZFBheW1lbnREYXRhIGNhbGwgZmFzdC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3QgUHJvdmlkZXMgbmVjZXNzYXJ5XG4gICAqICAgICBpbmZvcm1hdGlvbiB0byBzdXBwb3J0IGEgcGF5bWVudC5cbiAgICovXG4gIHByZWZldGNoUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IFBheW1lbnREYXRhLCB3aGljaCBjb250YWlucyBuZWNlc3NhcnkgaW5mb21hcnRpb24gdG8gY29tcGxldGUgYVxuICAgKiBwYXltZW50LlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdCBQcm92aWRlcyBuZWNlc3NhcnlcbiAgICogICAgIGluZm9ybWF0aW9uIHRvIHN1cHBvcnQgYSBwYXltZW50LlxuICAgKi9cbiAgbG9hZFBheW1lbnREYXRhKHBheW1lbnREYXRhUmVxdWVzdCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhUGF5bWVudERhdGE+KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzdWx0KGNhbGxiYWNrKSB7fVxufVxuXG5leHBvcnQge1BheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBEZXNjcmlwdGlvbiBvZiB0aGlzIGZpbGUuXG4gKi9cbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge1BheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9IGZyb20gJy4vcGF5bWVudHNfY2xpZW50X2RlbGVnYXRlX2ludGVyZmFjZS5qcyc7XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgUGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZSB0aGF0IGxldmVyYWdlcyBwYXltZW50XG4gKiByZXF1ZXN0LlxuICogQGltcGxlbWVudHMge1BheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9XG4gKi9cbmNsYXNzIFBheW1lbnRzUmVxdWVzdERlbGVnYXRlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbnZpcm9ubWVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoZW52aXJvbm1lbnQpIHtcbiAgICB0aGlzLmVudmlyb25tZW50XyA9IGVudmlyb25tZW50O1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oIVByb21pc2U8IVBheW1lbnREYXRhPil9ICovXG4gICAgdGhpcy5jYWxsYmFja18gPSBudWxsO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblJlc3VsdChjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tfID0gY2FsbGJhY2s7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzUmVhZHlUb1BheShpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gICAgLyoqIEB0eXBleyFQYXltZW50UmVxdWVzdH0gKi9cbiAgICBjb25zdCBwYXltZW50UmVxdWVzdCA9IHRoaXMuY3JlYXRlUGF5bWVudFJlcXVlc3RfKGlzUmVhZHlUb1BheVJlcXVlc3QpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBwYXltZW50UmVxdWVzdC5jYW5NYWtlUGF5bWVudCgpXG4gICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5JU19SRUFEWV9UT19QQVlfUkVTVUxUX0tFWSwgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7J3Jlc3VsdCc6IHJlc3VsdH07XG4gICAgICAgICAgICBpZiAoaXNSZWFkeVRvUGF5UmVxdWVzdC5hcGlWZXJzaW9uID49IDIgJiZcbiAgICAgICAgICAgICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LmV4aXN0aW5nUGF5bWVudE1ldGhvZFJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgIC8vIEZvciBhcGlWZXJzaW9uIDIsIHdlIGFsd2F5cyB1c2UgbmF0aXZlIHRvIG9ubHkgY2hlY2sgZm9yXG4gICAgICAgICAgICAgIC8vIHRva2VuaXplZCBjYXJkcy5cbiAgICAgICAgICAgICAgLy8gRm9yIHRva2VuaXplZCBjYXJkcyBuYXRpdmUgYWx3YXlzIGRvZXMgYSBwcmVzZW5jZSBjaGVjayBzb1xuICAgICAgICAgICAgICAvLyB3ZSBjYW4gc2F5IHRoYXQgaWYgY2FuTWFrZVBheW1lbnQgaXMgdHJ1ZSBmb3IgbmF0aXZlIGZvclxuICAgICAgICAgICAgICAvLyB0b2tlbml6ZWRDYXJkcyB0aGVuIHRoZSB1c2VyIGhhcyBhIHBheW1lbnQgbWV0aG9kIHdoaWNoIGlzXG4gICAgICAgICAgICAgIC8vIHByZXNlbnQuXG4gICAgICAgICAgICAgIHJlc3BvbnNlWydwYXltZW50TWV0aG9kUHJlc2VudCddID0gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgIENvbnN0YW50cy5JU19SRUFEWV9UT19QQVlfUkVTVUxUX0tFWSkpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgJ3Jlc3VsdCc6IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzLklTX1JFQURZX1RPX1BBWV9SRVNVTFRfS0VZKSA9PSAndHJ1ZSdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXNvbHZlKHsncmVzdWx0JzogZmFsc2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcHJlZmV0Y2hQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICAvLyBDcmVhdGluZyBQYXltZW50UmVxdWVzdCBpbnN0YW5jZSB3aWxsIGNhbGxcbiAgICAvLyBHY29yZSBpc1JlYWR5VG9QYXkgaW50ZXJuYWxseSB3aGljaCB3aWxsIHByZWZldGNoIHRlbXBhbHRlcy5cbiAgICB0aGlzLmNyZWF0ZVBheW1lbnRSZXF1ZXN0XyhcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LCB0aGlzLmVudmlyb25tZW50XyxcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby5jdXJyZW5jeUNvZGUsXG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8udG90YWxQcmljZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGxvYWRQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICB0aGlzLmxvYWRQYXltZW50RGF0YVRocm91Z2hQYXltZW50UmVxdWVzdF8ocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgUGF5bWVudFJlcXVlc3QgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R8IVBheW1lbnREYXRhUmVxdWVzdH0gcmVxdWVzdCBUaGUgbmVjZXNzYXJ5IGluZm9ybWF0aW9uIHRvIGNoZWNrIGlmIHVzZXIgaXNcbiAgICogICAgIHJlYWR5IHRvIHBheSBvciB0byBzdXBwb3J0IGEgcGF5bWVudCBmcm9tIG1lcmNoYW50cy5cbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gZW52aXJvbm1lbnQgKG9wdGlvbmFsKVxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBjdXJyZW5jeUNvZGUgKG9wdGlvbmFsKVxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSB0b3RhbFByaWNlIChvcHRpb25hbClcbiAgICogQHJldHVybiB7IVBheW1lbnRSZXF1ZXN0fSBQYXltZW50UmVxdWVzdCBpbnN0YW5jZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZVBheW1lbnRSZXF1ZXN0XyhyZXF1ZXN0LCBlbnZpcm9ubWVudCwgY3VycmVuY3lDb2RlLCB0b3RhbFByaWNlKSB7XG4gICAgbGV0IGRhdGEgPSB7fTtcbiAgICBpZiAocmVxdWVzdCkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVxdWVzdCkpO1xuICAgIH1cblxuICAgIC8vIE9ubHkgc2V0IHRoZSBhcGlWZXJzaW9uIGlmIHRoZSBtZXJjaGFudCBkb2Vzbid0IHNldCBpdC5cbiAgICBpZiAoIWRhdGFbJ2FwaVZlcnNpb24nXSkge1xuICAgICAgZGF0YVsnYXBpVmVyc2lvbiddID0gMTtcbiAgICB9XG5cbiAgICAvLyBBZGQgYWxsb3dlZFBheW1lbnRNZXRob2RzIGZvciBzd2cgdG8gZ2V0IHRocm91Z2ggZ21zIGNvcmUgdmFsaWRhdGlvbi5cbiAgICBpZiAoZGF0YVsnc3dnJ10pIHtcbiAgICAgIGRhdGFbJ2FsbG93ZWRQYXltZW50TWV0aG9kcyddID0gW0NvbnN0YW50cy5QYXltZW50TWV0aG9kLkNBUkRdO1xuICAgIH1cblxuICAgIGlmIChlbnZpcm9ubWVudCAmJiBlbnZpcm9ubWVudCA9PSBDb25zdGFudHMuRW52aXJvbm1lbnQuVEVTVCkge1xuICAgICAgZGF0YVsnZW52aXJvbm1lbnQnXSA9IGVudmlyb25tZW50O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cHBvcnRlZEluc3RydW1lbnRzID0gW3tcbiAgICAgICdzdXBwb3J0ZWRNZXRob2RzJzogWydodHRwczovL2dvb2dsZS5jb20vcGF5J10sXG4gICAgICAnZGF0YSc6IGRhdGEsXG4gICAgfV07XG5cbiAgICBjb25zdCBkZXRhaWxzID0ge1xuICAgICAgJ3RvdGFsJzoge1xuICAgICAgICAnbGFiZWwnOiAnRXN0aW1hdGVkIFRvdGFsIFByaWNlJyxcbiAgICAgICAgJ2Ftb3VudCc6IHtcbiAgICAgICAgICAvLyBjdXJyZW5jeSBhbmQgdmFsdWUgYXJlIHJlcXVpcmVkIGZpZWxkcyBpbiBQYXltZW50UmVxdWVzdCwgYnV0IHRoZXNlXG4gICAgICAgICAgLy8gZmllbGRzIHdpbGwgbmV2ZXIgYmUgdXNlZCBzaW5jZSBQYXltZW50UmVxdWVzdCBVSSBpcyBza2lwcGVkIHdoZW5cbiAgICAgICAgICAvLyB3ZSdyZSB0aGUgb25seSBwYXltZW50IG1ldGhvZCwgc28gZGVmYXVsdCB0byBzb21lIHZhbHVlIHRvIGJ5IHBhc3NcbiAgICAgICAgICAvLyB0aGlzIHJlcXVpcmVtZW50LlxuICAgICAgICAgICdjdXJyZW5jeSc6IGN1cnJlbmN5Q29kZSB8fCAnVVNEJyxcbiAgICAgICAgICAndmFsdWUnOiB0b3RhbFByaWNlIHx8ICcwJyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFBheW1lbnRSZXF1ZXN0KHN1cHBvcnRlZEluc3RydW1lbnRzLCBkZXRhaWxzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdCBQcm92aWRlcyBuZWNlc3NhcnlcbiAgICogICAgIGluZm9ybWF0aW9uIHRvIHN1cHBvcnQgYSBwYXltZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbG9hZFBheW1lbnREYXRhVGhyb3VnaFBheW1lbnRSZXF1ZXN0XyhwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSAocGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mbyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QudHJhbnNhY3Rpb25JbmZvLmN1cnJlbmN5Q29kZSkgfHxcbiAgICAgICAgdW5kZWZpbmVkO1xuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSAocGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mbyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby50b3RhbFByaWNlKSB8fFxuICAgICAgICB1bmRlZmluZWQ7XG4gICAgY29uc3QgcGF5bWVudFJlcXVlc3QgPSB0aGlzLmNyZWF0ZVBheW1lbnRSZXF1ZXN0XyhcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LCB0aGlzLmVudmlyb25tZW50XywgY3VycmVuY3lDb2RlLCB0b3RhbFByaWNlKTtcbiAgICB0aGlzLmNhbGxiYWNrXyhcbiAgICAgICAgLyoqIEB0eXBleyFQcm9taXNlPCFQYXltZW50RGF0YT59ICovXG4gICAgICAgIChwYXltZW50UmVxdWVzdC5zaG93KClcbiAgICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7IVBheW1lbnRSZXNwb25zZX0gcGF5bWVudFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAqIEByZXR1cm4geyFQYXltZW50RGF0YX1cbiAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgIChwYXltZW50UmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAvLyBTaG91bGQgYmUgY2FsbGVkIHRvIGRpc21pc3MgYW55IHJlbWFpbmluZyBVSVxuICAgICAgICAgICAgICAgICAgIHBheW1lbnRSZXNwb25zZS5jb21wbGV0ZSgnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXltZW50UmVzcG9uc2UuZGV0YWlscztcbiAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICBlcnJbJ3N0YXR1c0NvZGUnXSA9IENvbnN0YW50cy5SZXNwb25zZVN0YXR1cy5DQU5DRUxFRDtcbiAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICB9KSkpO1xuICB9XG59XG5cbmV4cG9ydCB7UGF5bWVudHNSZXF1ZXN0RGVsZWdhdGV9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge0dyYXlwYW5lfSBmcm9tICcuL2dyYXlwYW5lLmpzJztcbmltcG9ydCB7UGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZX0gZnJvbSAnLi9wYXltZW50c19jbGllbnRfZGVsZWdhdGVfaW50ZXJmYWNlLmpzJztcbmltcG9ydCB7QWN0aXZpdHlQb3J0LCBBY3Rpdml0eVBvcnRzLCBBY3Rpdml0eUlmcmFtZVBvcnR9IGZyb20gJ3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzJztcbmltcG9ydCB7QnV5Rmxvd0FjdGl2aXR5TW9kZSwgUGF5RnJhbWVIZWxwZXIsIFBvc3RNZXNzYWdlRXZlbnRUeXBlfSBmcm9tICcuL3BheV9mcmFtZV9oZWxwZXIuanMnO1xuaW1wb3J0IHtkb2VzTWVyY2hhbnRTdXBwb3J0T25seVRva2VuaXplZENhcmRzfSBmcm9tICcuL3ZhbGlkYXRvci5qcyc7XG5pbXBvcnQge2luamVjdFN0eWxlU2hlZXQsIGluamVjdElmcmFtZX0gZnJvbSAnLi9lbGVtZW50X2luamVjdG9yLmpzJztcblxuY29uc3QgR1BBWV9BQ1RJVklUWV9SRVFVRVNUID0gJ0dQQVknO1xuY29uc3QgSUZSQU1FX0NMT1NFX0RVUkFUSU9OX0lOX01TID0gMjUwO1xuY29uc3QgSUZSQU1FX1NIT1dfVVBfRFVSQVRJT05fSU5fTVMgPSAyNTA7XG5jb25zdCBJRlJBTUVfU01PT1RIX0hFSUdIVF9UUkFOU0lUSU9OID1cbiAgICBgaGVpZ2h0ICR7SUZSQU1FX1NIT1dfVVBfRFVSQVRJT05fSU5fTVN9bXNgO1xuY29uc3QgRVJST1JfUFJFRklYID0gJ0Vycm9yOiAnO1xuXG4vKipcbiAqIFN1cHBvcnRlZCBicm93c2VyIHVzZXIgYWdlbnQga2V5cy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBCcm93c2VyVXNlckFnZW50ID0ge1xuICBDSFJPTUU6ICdDaHJvbWUnLFxuICBGSVJFRk9YOiAnRmlyZWZveCcsXG4gIFNBRkFSSTogJ1NhZmFyaScsXG59O1xuXG5cbi8qKlxuICogUmVzaXppbmcgcGF5bG9hZCBpbmNsdWRpbmcgcmVzaXplIGhlaWdodCBhbmQgdHJhbnNpdGlvbiBzdHlsZS5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICBoZWlnaHQ6IHN0cmluZyxcbiAqICAgdHJhbnNpdGlvbjogc3RyaW5nLFxuICogfX1cbiAqL1xubGV0IFJlc2l6ZVBheWxvYWQ7XG5cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBQYXltZW50c0NsaWVudERlbGVnYXRlSW50ZXJmYWNlIHRoYXQgdXNlcyB0aGUgY3VzdG9tXG4gKiBob3N0aW5nIHBhZ2UgYWxvbmcgd2l0aCB3ZWIgYWN0aXZpdGllcyB0byBhY3R1YWxseSBnZXQgdG8gdGhlIGhvc3RpbmcgcGFnZS5cbiAqIEBpbXBsZW1lbnRzIHtQYXltZW50c0NsaWVudERlbGVnYXRlSW50ZXJmYWNlfVxuICovXG5jbGFzcyBQYXltZW50c1dlYkFjdGl2aXR5RGVsZWdhdGUge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudmlyb25tZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBnb29nbGVUcmFuc2FjdGlvbklkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF91c2VJZnJhbWVcbiAgICogQHBhcmFtIHshQWN0aXZpdHlQb3J0cz19IG9wdF9hY3Rpdml0aWVzIENhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYSBzaGFyZWRcbiAgICogICBhY3Rpdml0aWVzIG1hbmFnZXIuIEJ5IGRlZmF1bHQsIHRoZSBuZXcgbWFuYWdlciBpcyBjcmVhdGVkLlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBvcHRfcmVkaXJlY3RLZXkgVGhlIHJlZGlyZWN0IGtleSB1c2VkIGZvciByZWRpcmVjdCBtb2RlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZW52aXJvbm1lbnQsIGdvb2dsZVRyYW5zYWN0aW9uSWQsIG9wdF91c2VJZnJhbWUsXG4gICAgICAgICAgICAgb3B0X2FjdGl2aXRpZXMsIG9wdF9yZWRpcmVjdEtleSkge1xuICAgIHRoaXMuZW52aXJvbm1lbnRfID0gZW52aXJvbm1lbnQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICBcbiAgICAvKiogQGNvbnN0IHshQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXRpZXMgPSBvcHRfYWN0aXZpdGllcyB8fCBuZXcgQWN0aXZpdHlQb3J0cyh3aW5kb3cpO1xuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyFHcmF5cGFuZX0gKi9cbiAgICB0aGlzLmdyYXlwYW5lXyA9IG5ldyBHcmF5cGFuZSh3aW5kb3cuZG9jdW1lbnQpO1xuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCFQcm9taXNlPCFQYXltZW50RGF0YT4pfSAqL1xuICAgIHRoaXMuY2FsbGJhY2tfID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7P3tcbiAgICAgKiAgICAgICAgICAgICBjb250YWluZXI6ICFFbGVtZW50LFxuICAgICAqICAgICAgICAgICAgIGlmcmFtZTohSFRNTElGcmFtZUVsZW1lbnQsXG4gICAgICogICAgICAgICAgICAgcmVxdWVzdDohUGF5bWVudERhdGFSZXF1ZXN0LFxuICAgICAqICAgICAgICAgICAgIGRhdGFQcm9taXNlOj9Qcm9taXNlPCFQYXltZW50RGF0YT59fVxuICAgICAqL1xuICAgIHRoaXMucHJlZmV0Y2hlZE9iamVjdHNfID0gbnVsbDtcbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5zaG91bGRIYW5kbGVSZXNpemluZ18gPSBmYWxzZTtcbiAgICAvKiogQHByaXZhdGUgez9BY3Rpdml0eUlmcmFtZVBvcnR9ICovXG4gICAgdGhpcy5wb3J0XyA9IG51bGw7XG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oIVByb21pc2U8dm9pZD4pfSAqL1xuICAgIHRoaXMuZGlzbWlzc1Byb21pc2VSZXNvbHZlcl8gPSBudWxsO1xuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge3N0cmluZ30gKi9cbiAgICB0aGlzLmdvb2dsZVRyYW5zYWN0aW9uSWRfID0gZ29vZ2xlVHJhbnNhY3Rpb25JZDtcbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucmVkaXJlY3RLZXlfID0gb3B0X3JlZGlyZWN0S2V5IHx8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7P1Jlc2l6ZVBheWxvYWR9XG4gICAgICovXG4gICAgdGhpcy5zYXZlZFJlc2l6ZVBheWxvYWRfID0gbnVsbDtcblxuICAgIC8vIE9ubHkgaW5zdGFsbCBkaWFsb2cgc3R5bGVzIHdoZW4gaWZyYW1pbmcgaXMgYWxsb3dlZC5cbiAgICBpZiAobnVsbCkge1xuICAgICAgaW5qZWN0U3R5bGVTaGVldChDb25zdGFudHMuSUZSQU1FX1NUWUxFKTtcbiAgICAgIGlmIChudWxsKSB7XG4gICAgICAgIGluamVjdFN0eWxlU2hlZXQoQ29uc3RhbnRzLklGUkFNRV9TVFlMRV9DRU5URVIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgb25SZXN1bHQoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5jYWxsYmFja18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcbiAgICB0aGlzLmFjdGl2aXRpZXMub25SZXN1bHQoR1BBWV9BQ1RJVklUWV9SRVFVRVNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aXZpdHlSZXN1bHRfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UG9ydH0gcG9ydFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25BY3Rpdml0eVJlc3VsdF8ocG9ydCkge1xuICAgIC8vIEhpZGUgdGhlIGdyYXlwYW5lLlxuICAgIHRoaXMuZ3JheXBhbmVfLmhpZGUoKTtcbiAgICAvLyBPbmx5IHZlcmlmaWVkIG9yaWdpbnMgYXJlIGFsbG93ZWQuXG4gICAgdGhpcy5jYWxsYmFja18ocG9ydC5hY2NlcHRSZXN1bHQoKS50aGVuKFxuICAgICAgICAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgLy8gT3JpZ2luIG11c3QgYWx3YXlzIG1hdGNoOiBwb3B1cCwgaWZyYW1lIG9yIHJlZGlyZWN0LlxuICAgICAgICAgIGlmIChyZXN1bHQub3JpZ2luICE9IHRoaXMuZ2V0T3JpZ2luXygpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NoYW5uZWwgbWlzbWF0Y2gnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZGF0YSA9IC8qKiBAdHlwZSB7IVBheW1lbnREYXRhfSAqLyAocmVzdWx0LmRhdGEpO1xuICAgICAgICAgIGlmIChkYXRhWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddKSB7XG4gICAgICAgICAgICBQYXlGcmFtZUhlbHBlci5zZXRCdXlGbG93QWN0aXZpdHlNb2RlKFxuICAgICAgICAgICAgICAgIEJ1eUZsb3dBY3Rpdml0eU1vZGUuUkVESVJFQ1QpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hSZWRpcmVjdFJlc3BvbnNlXyhcbiAgICAgICAgICAgICAgICBkYXRhWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddKVxuICAgICAgICAgICAgICAgIC50aGVuKChkZWNyeXBlZEpzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIG90aGVyIG5vbi1lbmNyeXB0ZWQgZmllbGRzIGludG8gdGhlIGZpbmFsIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgY29uc3QgY2xvbmUgPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjbG9uZVsncmVkaXJlY3RFbmNyeXB0ZWRDYWxsYmFja0RhdGEnXTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGNsb25lLCBkZWNyeXBlZEpzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBVbmVuY3J5cHRlZCBkYXRhIHN1cHBsaWVkOiBtdXN0IGJlIGEgdmVyaWZpZWQgYW5kIHNlY3VyZSBjaGFubmVsLlxuICAgICAgICAgIGlmICghcmVzdWx0Lm9yaWdpblZlcmlmaWVkIHx8ICFyZXN1bHQuc2VjdXJlQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFubmVsIG1pc21hdGNoJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAvLyBUT0RPOiBMb2cgdGhlIG9yaWdpbmFsIGFuZCB0aGUgaW5mZXJyZWQgZXJyb3IgdG8gZXllMy5cbiAgICAgICAgICBsZXQgb3JpZ2luYWxFcnJvciA9IGVycm9yWydtZXNzYWdlJ107XG4gICAgICAgICAgbGV0IGluZmVycmVkRXJyb3IgPSBlcnJvclsnbWVzc2FnZSddO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgdGhlIGVycm9yIG1lc3NhZ2UgdG8gYSBzdHJ1Y3R1cmVkIGVycm9yLCBpZiBpdCdzXG4gICAgICAgICAgICAvLyBub3QgcG9zc2libGUsIGZhbGxiYWNrIHRvIHVzZSB0aGUgZXJyb3IgbWVzc2FnZSBzdHJpbmcuXG4gICAgICAgICAgICBpbmZlcnJlZEVycm9yID1cbiAgICAgICAgICAgICAgICBKU09OLnBhcnNlKG9yaWdpbmFsRXJyb3Iuc3Vic3RyaW5nKEVSUk9SX1BSRUZJWC5sZW5ndGgpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbmZlcnJlZEVycm9yWydzdGF0dXNDb2RlJ10gJiYgW1xuICAgICAgICAgICAgICAgICdERVZFTE9QRVJfRVJST1InLCAnTUVSQ0hBTlRfQUNDT1VOVF9FUlJPUidcbiAgICAgICAgICAgICAgXS5pbmRleE9mKGluZmVycmVkRXJyb3JbJ3N0YXR1c0NvZGUnXSkgPT0gLTEpIHtcbiAgICAgICAgICAgIGluZmVycmVkRXJyb3IgPSB7XG4gICAgICAgICAgICAgICdzdGF0dXNDb2RlJzogJ0NBTkNFTEVEJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbmZlcnJlZEVycm9yID09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAgICAgaW5mZXJyZWRFcnJvciA9IHtcbiAgICAgICAgICAgICAgJ3N0YXR1c0NvZGUnOiAnQ0FOQ0VMRUQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGluZmVycmVkRXJyb3IpO1xuICAgICAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZGlyZWN0RW5jcnlwdGVkQ2FsbGJhY2tEYXRhXG4gICAqIEByZXR1cm4geyFQYXltZW50RGF0YX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoUmVkaXJlY3RSZXNwb25zZV8ocmVkaXJlY3RFbmNyeXB0ZWRDYWxsYmFja0RhdGEpIHtcbiAgICAvLyBUaGlzIG1ldGhvZCBoYXMgdG8gcmVseSBvbiB0aGUgbGVnYWN5IFhIUiBBUEkgYmVjYXVzZSB0aGUgcmVkaXJlY3RcbiAgICAvLyBmdW5jdGlvbmFsaXR5IGlzLCBpbiBwYXJ0LCBhaW1lZCBhdCBvbGRlciBicm93c2Vycy5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdXJsID0gdGhpcy5nZXREZWNyeXB0aW9uVXJsXygpO1xuICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB4aHIub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7XG4gICAgICBpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSB7XG4gICAgICAgIC8vIEl0J3MgZmluZSB0byBwcm9jZWVkIGluIGEgbm9uLXJlZGlyZWN0IG1vZGUgYmVjYXVzZSByZWRpcmVjdFZlcmlmaWVyXG4gICAgICAgIC8vIHBsYXlzIHRoZSBwYXJ0IG9mIENPUlMgcHJvcGFnYXRpb24uXG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPCAvKiBTVEFUVVNfUkVDRUlWRUQgKi8gMikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeGhyLnN0YXR1cyA8IDEwMCB8fCB4aHIuc3RhdHVzID4gNTk5KSB7XG4gICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVW5rbm93biBIVFRQIHN0YXR1cyAke3hoci5zdGF0dXN9YCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gLyogQ09NUExFVEUgKi8gNCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEpTT04gcGFyc2luZyBlcnJvciBpcyBleHBlY3RlZCBoZXJlLlxuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdOZXR3b3JrIGZhaWx1cmUnKSk7XG4gICAgICB9O1xuICAgICAgeGhyLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcpKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNlbmQgUE9TVC5cbiAgICAgIHhoci5zZW5kKHJlZGlyZWN0RW5jcnlwdGVkQ2FsbGJhY2tEYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNSZWFkeVRvUGF5KGlzUmVhZHlUb1BheVJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKGRvZXNNZXJjaGFudFN1cHBvcnRPbmx5VG9rZW5pemVkQ2FyZHMoaXNSZWFkeVRvUGF5UmVxdWVzdCkpIHtcbiAgICAgICAgcmVzb2x2ZSh7J3Jlc3VsdCc6IGZhbHNlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgY29uc3QgaXNJb3NHc2EgPSB1c2VyQWdlbnQuaW5kZXhPZignR1NBLycpID4gMCAmJlxuICAgICAgICAgIHVzZXJBZ2VudC5pbmRleE9mKEJyb3dzZXJVc2VyQWdlbnQuU0FGQVJJKSA+IDA7XG4gICAgICAvLyBwb3AgdXAgaW4gSUdTQSBkb2Vzbid0IHdvcmsuXG4gICAgICBpZiAoaXNJb3NHc2EgJiYgIW51bGwpIHtcbiAgICAgICAgcmVzb2x2ZSh7J3Jlc3VsdCc6IGZhbHNlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzRmlyZWZveElvcyA9IHVzZXJBZ2VudC5pbmRleE9mKCdGeGlPUycpID4gMDtcbiAgICAgIGlmIChpc0ZpcmVmb3hJb3MpIHtcbiAgICAgICAgcmVzb2x2ZSh7J3Jlc3VsdCc6IGZhbHNlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzU3VwcG9ydGVkID0gdXNlckFnZW50LmluZGV4T2YoQnJvd3NlclVzZXJBZ2VudC5DSFJPTUUpID4gMCB8fFxuICAgICAgICAgIHVzZXJBZ2VudC5pbmRleE9mKEJyb3dzZXJVc2VyQWdlbnQuRklSRUZPWCkgPiAwIHx8XG4gICAgICAgICAgdXNlckFnZW50LmluZGV4T2YoQnJvd3NlclVzZXJBZ2VudC5TQUZBUkkpID4gMDtcbiAgICAgIGlmIChpc1N1cHBvcnRlZCAmJiBpc1JlYWR5VG9QYXlSZXF1ZXN0LmFwaVZlcnNpb24gPj0gMiAmJlxuICAgICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuZXhpc3RpbmdQYXltZW50TWV0aG9kUmVxdWlyZWQpIHtcbiAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdC5lbnZpcm9ubWVudCA9IHRoaXMuZW52aXJvbm1lbnRfO1xuICAgICAgICBQYXlGcmFtZUhlbHBlci5zZW5kQW5kV2FpdEZvclJlc3BvbnNlKFxuICAgICAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdCwgUG9zdE1lc3NhZ2VFdmVudFR5cGUuSVNfUkVBRFlfVE9fUEFZLFxuICAgICAgICAgICAgJ2lzUmVhZHlUb1BheVJlc3BvbnNlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgJ3Jlc3VsdCc6IGlzU3VwcG9ydGVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBpZiAoaXNSZWFkeVRvUGF5UmVxdWVzdC5leGlzdGluZ1BheW1lbnRNZXRob2RSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlWydwYXltZW50TWV0aG9kUHJlc2VudCddID1cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YVsnaXNSZWFkeVRvUGF5UmVzcG9uc2UnXSA9PSAnUkVBRFlfVE9fUEFZJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSh7J3Jlc3VsdCc6IGlzU3VwcG9ydGVkfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHByZWZldGNoUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgLy8gT25seSBoYW5kbGVzIHByZWZldGNoIGZvciBpZnJhbWUgZm9yIG5vdy5cbiAgICBpZiAoIW51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVyQW5kRnJhbWUgPSB0aGlzLmluamVjdElmcmFtZV8ocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICBjb25zdCBwYXltZW50RGF0YVByb21pc2UgPSB0aGlzLm9wZW5JZnJhbWVfKFxuICAgICAgICBjb250YWluZXJBbmRGcmFtZVsnY29udGFpbmVyJ10sIGNvbnRhaW5lckFuZEZyYW1lWydpZnJhbWUnXSxcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICB0aGlzLnByZWZldGNoZWRPYmplY3RzXyA9IHtcbiAgICAgICdjb250YWluZXInOiBjb250YWluZXJBbmRGcmFtZVsnY29udGFpbmVyJ10sXG4gICAgICAnaWZyYW1lJzogY29udGFpbmVyQW5kRnJhbWVbJ2lmcmFtZSddLFxuICAgICAgJ3JlcXVlc3QnOiBwYXltZW50RGF0YVJlcXVlc3QsXG4gICAgICAnZGF0YVByb21pc2UnOiBwYXltZW50RGF0YVByb21pc2UsXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbG9hZFBheW1lbnREYXRhKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIGlmICghcGF5bWVudERhdGFSZXF1ZXN0LnN3Zykge1xuICAgICAgLy8gT25seSBzZXQgdGhlIGFwaVZlcnNpb24gaWYgdGhlIG1lcmNoYW50IGlzIG5vdCBzZXR0aW5nIGl0LlxuICAgICAgaWYgKCFwYXltZW50RGF0YVJlcXVlc3QuYXBpVmVyc2lvbikge1xuICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QuYXBpVmVyc2lvbiA9IDE7XG4gICAgICB9XG4gICAgfVxuICAgIHBheW1lbnREYXRhUmVxdWVzdC5lbnZpcm9ubWVudCA9IHRoaXMuZW52aXJvbm1lbnRfO1xuICAgIGlmIChudWxsKSB7XG4gICAgICBQYXlGcmFtZUhlbHBlci5zZXRCdXlGbG93QWN0aXZpdHlNb2RlKEJ1eUZsb3dBY3Rpdml0eU1vZGUuSUZSQU1FKTtcbiAgICAgIC8vIFRPRE86IENvbXBhcmUgdGhlIHJlcXVlc3Qgd2l0aCBwcmVmZXRjaGVkIHJlcXVlc3QuXG4gICAgICBsZXQgY29udGFpbmVyQW5kRnJhbWU7XG4gICAgICBsZXQgcGF5bWVudERhdGFQcm9taXNlO1xuICAgICAgaWYgKHRoaXMucHJlZmV0Y2hlZE9iamVjdHNfKSB7XG4gICAgICAgIC8vIFJlbmRlcmluZyBwcmVmZXRjaGVkIGZyYW1lIGFuZCBjb250YWluZXIuXG4gICAgICAgIGNvbnRhaW5lckFuZEZyYW1lID0gdGhpcy5wcmVmZXRjaGVkT2JqZWN0c187XG4gICAgICAgIHBheW1lbnREYXRhUHJvbWlzZSA9IHRoaXMucHJlZmV0Y2hlZE9iamVjdHNfWydkYXRhUHJvbWlzZSddO1xuICAgICAgICB0aGlzLnByZWZldGNoZWRPYmplY3RzXyA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250YWluZXJBbmRGcmFtZSA9IHRoaXMuaW5qZWN0SWZyYW1lXyhwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgICAgICBwYXltZW50RGF0YVByb21pc2UgPSB0aGlzLm9wZW5JZnJhbWVfKFxuICAgICAgICAgICAgY29udGFpbmVyQW5kRnJhbWVbJ2NvbnRhaW5lciddLCBjb250YWluZXJBbmRGcmFtZVsnaWZyYW1lJ10sXG4gICAgICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgICAgfVxuICAgICAgdGhpcy5zaG93Q29udGFpbmVyQW5kSWZyYW1lV2l0aEFuaW1hdGlvbl8oXG4gICAgICAgICAgY29udGFpbmVyQW5kRnJhbWVbJ2NvbnRhaW5lciddLCBjb250YWluZXJBbmRGcmFtZVsnaWZyYW1lJ10sXG4gICAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgJycpO1xuICAgICAgY29uc3Qgb25Qb3BTdGF0ZSA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5iYWNrQnV0dG9uSGFuZGxlcl8oY29udGFpbmVyQW5kRnJhbWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBvblBvcFN0YXRlKTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBvblBvcFN0YXRlKTtcbiAgICAgIGNvbnN0IGRpc21pc3NQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHRoaXMuZGlzbWlzc1Byb21pc2VSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNhbGxiYWNrXyhQcm9taXNlLnJhY2UoW3BheW1lbnREYXRhUHJvbWlzZSwgZGlzbWlzc1Byb21pc2VdKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFBheUZyYW1lSGVscGVyLnNldEJ1eUZsb3dBY3Rpdml0eU1vZGUoXG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdFsnZm9yY2VSZWRpcmVjdCddID8gQnV5Rmxvd0FjdGl2aXR5TW9kZS5SRURJUkVDVCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV5Rmxvd0FjdGl2aXR5TW9kZS5QT1BVUCk7XG4gICAgY29uc3Qgb3BlbmVyID0gdGhpcy5hY3Rpdml0aWVzLm9wZW4oXG4gICAgICAgIEdQQVlfQUNUSVZJVFlfUkVRVUVTVCwgdGhpcy5nZXRIb3N0aW5nUGFnZVVybF8oKSxcbiAgICAgICAgdGhpcy5nZXRSZW5kZXJNb2RlXyhwYXltZW50RGF0YVJlcXVlc3QpLCBwYXltZW50RGF0YVJlcXVlc3QsXG4gICAgICAgIHsnd2lkdGgnOiA2MDAsICdoZWlnaHQnOiA2MDB9KTtcbiAgICB0aGlzLmdyYXlwYW5lXy5zaG93KG9wZW5lciAmJiBvcGVuZXIudGFyZ2V0V2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZW5kZXIgbW9kZSB3aGV0aGVyIG5lZWQgdG8gZm9yY2UgcmVkaXJlY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFJlbmRlck1vZGVfKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIHJldHVybiBwYXltZW50RGF0YVJlcXVlc3RbJ2ZvcmNlUmVkaXJlY3QnXSA/XG4gICAgICAgICdfdG9wJyA6XG4gICAgICAgICdncC1qcy1wb3B1cCc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2VydmVyIG9yaWdpbiBiYXNlZCBvbiB0aGUgZW52aXJvbm1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldE9yaWdpbl8oKSB7XG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRfID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5MT0NBTCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIHZhciBiYXNlRG9tYWluO1xuICAgIGlmICh0aGlzLmVudmlyb25tZW50XyA9PSBDb25zdGFudHMuRW52aXJvbm1lbnQuUFJFUFJPRCkge1xuICAgICAgYmFzZURvbWFpbiA9ICdwYXktcHJlcHJvZC5zYW5kYm94JztcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW52aXJvbm1lbnRfID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5TQU5EQk9YKSB7XG4gICAgICBiYXNlRG9tYWluID0gJ3BheS5zYW5kYm94JztcbiAgICB9IGVsc2Uge1xuICAgICAgYmFzZURvbWFpbiA9ICdwYXknO1xuICAgIH1cbiAgICByZXR1cm4gJ2h0dHBzOi8vJyArIGJhc2VEb21haW4gKyAnLmdvb2dsZS5jb20nO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJhc2UgcGF0aCBiYXNlZCBvbiB0aGUgZW52aXJvbm1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGJhc2UgcGF0aFxuICAgKi9cbiAgZ2V0QmFzZVBhdGhfKCkge1xuICAgIHJldHVybiB0aGlzLmdldE9yaWdpbl8oKSArICcvZ3AvcCc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGVjcnlwdGlvbiB1cmwgdG8gYmUgdXNlZCB0byBkZWNyeXB0IHRoZSBlbmNyeXB0ZWQgcGF5bG9hZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgZGVjcnlwdGlvbiB1cmxcbiAgICovXG4gIGdldERlY3J5cHRpb25VcmxfKCkge1xuICAgIGxldCB1cmwgPSB0aGlzLmdldEJhc2VQYXRoXygpICsgJy9hcGlzL2J1eWZsb3cvcHJvY2Vzcyc7XG4gICAgaWYgKHRoaXMucmVkaXJlY3RLZXlfKSB7XG4gICAgICB1cmwgKz0gJz9yaz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucmVkaXJlY3RLZXlfKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBob3N0aW5nIHBhZ2UgdXJsLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBob3N0aW5nIHBhZ2UgdXJsXG4gICAqL1xuICBnZXRIb3N0aW5nUGFnZVVybF8oKSB7XG4gICAgLy8gSW4gVGluIHRlc3RzLCB0aGUgaG9zdGluZyBwYWdlIGlzIHJlcXVlc3RlZCBmcm9tXG4gICAgLy8gL3Rlc3RpbmcvYnV5Zmxvdy9tZXJjaGFudGRlbW8uaHRtbCBhbmQgaXMgYWNjZXNzZWQgcmVsYXRpdmVseSBzaW5jZSB0aGVcbiAgICAvLyBiYXNlIHBhdGggaXMgdW5rbm93biBhaGVhZCBvZiB0aW1lLlxuICAgIGlmICh0aGlzLmVudmlyb25tZW50XyA9PSBDb25zdGFudHMuRW52aXJvbm1lbnQuVElOKSB7XG4gICAgICAvLyBUaGVyZSBpcyBubyAvZ3AvcCBwcmVmaXggc2luY2UgbXVsdGlsb2dpbiBwcmVmaXhlcyBpcyBicm9rZW4gaW4gVGluOlxuICAgICAgLy8gaHR0cDovL3lhcXMvNDkxMjMyMjk0MTU1MDU5MlxuICAgICAgcmV0dXJuICcvdWkvcGF5JztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0QmFzZVBhdGhfKCkgKyAnL3VpL3BheSc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaWZyYW1lIHB3ZyB1cmwgdG8gYmUgdXNlZCB0byBiZSB1c2VkIGZvciBhbXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbnZpcm9ubWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGlmcmFtZSB1cmxcbiAgICovXG4gIGdldElmcmFtZVVybChlbnZpcm9ubWVudCwgb3JpZ2luKSB7XG4gICAgLy8gVE9ETzogVGhlc2Ugc2hvdWxkIGJlIGNvbXBpbGUgdGltZSBjb25zdGFudHMgYW5kIG5vdCBkZXBlbmRlbnRcbiAgICAvLyBvbiB0aGUgZW52aXJvbm1lbnQuXG4gICAgbGV0IGlmcmFtZVVybCA9IGBodHRwczovL3BheS5nb29nbGUuY29tL2dwL3AvdWkvcGF5P29yaWdpbj0ke29yaWdpbn1gO1xuICAgIGlmIChlbnZpcm9ubWVudCA9PSBDb25zdGFudHMuRW52aXJvbm1lbnQuU0FOREJPWCB8fFxuICAgICAgICBlbnZpcm9ubWVudCA9PSBDb25zdGFudHMuRW52aXJvbm1lbnQuUFJFUFJPRCkge1xuICAgICAgaWZyYW1lVXJsID0gICBgaHR0cHM6Ly9wYXknKyAgKGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EID8gJy1wcmVwcm9kJyA6ICcnKSsgICcuc2FuZGJveC5nb29nbGUuY29tL2dwL3AvdWkvcGF5P29yaWdpbj0ke29yaWdpbn1gO1xuICAgIH1cbiAgICByZXR1cm4gaWZyYW1lVXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIGlmcmFtZSB3aXRoIGFuaW1hdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHshRWxlbWVudH0gY29udGFpbmVyXG4gICAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZUlmcmFtZUFuZENvbnRhaW5lcl8oY29udGFpbmVyLCBpZnJhbWUpIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uU3R5bGUgPSAnYWxsICcgKyBJRlJBTUVfQ0xPU0VfRFVSQVRJT05fSU5fTVMgKyAnbXMgZWFzZSAwcyc7XG4gICAgdGhpcy5zZXRUcmFuc2l0aW9uXyhpZnJhbWUsIHRyYW5zaXRpb25TdHlsZSk7XG4gICAgaWZyYW1lLmhlaWdodCA9ICcwcHgnO1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIHJlcGxhY2VkIGJ5IGxpc3RlbmluZyB0byBUcmFuc2l0aW9uRW5kIGV2ZW50XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoY29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9LCBJRlJBTUVfQ0xPU0VfRFVSQVRJT05fSU5fTVMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gICAqIEByZXR1cm4ge3tjb250YWluZXI6ICFFbGVtZW50LCBpZnJhbWU6IUhUTUxJRnJhbWVFbGVtZW50fX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluamVjdElmcmFtZV8ocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgY29uc3QgY29udGFpbmVyQW5kRnJhbWUgPSBpbmplY3RJZnJhbWUoXG4gICAgICAgIHRoaXMuaXNWZXJ0aWNhbENlbnRlckV4cGVyaW1lbnRFbmFibGVkXyhwYXltZW50RGF0YVJlcXVlc3QpID9cbiAgICAgICAgICAgIENvbnN0YW50cy5JRlJBTUVfU1RZTEVfQ0VOVEVSX0NMQVNTIDpcbiAgICAgICAgICAgIENvbnN0YW50cy5JRlJBTUVfU1RZTEVfQ0xBU1MpO1xuICAgIGNvbnN0IGlmcmFtZSA9IGNvbnRhaW5lckFuZEZyYW1lWydpZnJhbWUnXTtcbiAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJBbmRGcmFtZVsnY29udGFpbmVyJ107XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdjbGljaycsIHRoaXMuY2xvc2VBY3Rpb25IYW5kbGVyXy5iaW5kKHRoaXMsIGNvbnRhaW5lckFuZEZyYW1lKSk7XG4gICAgLy8gSGlkZSBpZnJhbWUgYW5kIGRpc2FibGUgcmVzaXplIGF0IGluaXRpYWxpemUuXG4gICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWZyYW1lLmhlaWdodCA9ICcwcHgnO1xuICAgIGNvbnN0IHRyYW5zaXRpb25TdHlsZSA9XG4gICAgICAgICdhbGwgJyArIElGUkFNRV9TSE9XX1VQX0RVUkFUSU9OX0lOX01TICsgJ21zIGVhc2UgMHMnO1xuICAgIHRoaXMuc2V0VHJhbnNpdGlvbl8oaWZyYW1lLCB0cmFuc2l0aW9uU3R5bGUpO1xuICAgIHRoaXMuc2hvdWxkSGFuZGxlUmVzaXppbmdfID0gZmFsc2U7XG4gICAgcmV0dXJuIGNvbnRhaW5lckFuZEZyYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXIgd2hlbiBiYWNrIGJ1dHRvbiBpcyB0cmlnZ2VyZWQsIHNob3VsZCBkaXNtaXNzIGlmcmFtZSBpZiBwcmVzZW50LlxuICAgKiBAcGFyYW0ge3tjb250YWluZXI6ICFFbGVtZW50LCBpZnJhbWU6IUhUTUxJRnJhbWVFbGVtZW50fX0gY29udGFpbmVyQW5kRnJhbWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJhY2tCdXR0b25IYW5kbGVyXyhjb250YWluZXJBbmRGcmFtZSkge1xuICAgIHRoaXMuZGlzbWlzc0lmcmFtZV8oY29udGFpbmVyQW5kRnJhbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXIgd2hlbiBjbG9zZSBhY3Rpb24gaXMgdHJpZ2dlcmVkLCB3aWxsIHBvcCBoaXN0b3J5IHN0YXRlIHRvIGNsb3NlXG4gICAqIHRoZSBpZnJhbWUuXG4gICAqIEBwYXJhbSB7e2NvbnRhaW5lcjogIUVsZW1lbnQsIGlmcmFtZTohSFRNTElGcmFtZUVsZW1lbnR9fSBjb250YWluZXJBbmRGcmFtZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2xvc2VBY3Rpb25IYW5kbGVyXyhjb250YWluZXJBbmRGcmFtZSkge1xuICAgIGlmIChjb250YWluZXJBbmRGcmFtZVsnY29udGFpbmVyJ10ucGFyZW50Tm9kZSkge1xuICAgICAgLy8gQ2xvc2UgYWN0aW9uIG9ubHkgd2hlbiBjb250YWluZXIgaXMgc3RpbGwgYXR0YWNoZWQgdG8gdGhlIHBhZ2UuXG4gICAgICBoaXN0b3J5LmJhY2soKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHt7Y29udGFpbmVyOiAhRWxlbWVudCwgaWZyYW1lOiFIVE1MSUZyYW1lRWxlbWVudH19IGNvbnRhaW5lckFuZEZyYW1lXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNtaXNzSWZyYW1lXyhjb250YWluZXJBbmRGcmFtZSkge1xuICAgIC8vIERpc21pc3MgaWZyYW1lIG9ubHkgd2hlbiBjb250YWluZXIgaXMgc3RpbGwgYXR0YWNoZWQgaW4gdGhlIHBhZ2UuXG4gICAgaWYgKGNvbnRhaW5lckFuZEZyYW1lWydjb250YWluZXInXS5wYXJlbnROb2RlKSB7XG4gICAgICAvLyBUT0RPOiBUaGluayBhYm91dCB3aGV0aGVyIHRoaXMgY291bGQgYmUganVzdCBoaWRlIGluc3RlYWQgb2ZcbiAgICAgIC8vIGRpc2Nvbm5lY3QgYW5kIHJlbW92ZSwgdGhlIHRyaWNreSBwYXJ0IGlzIGhvdyB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmVcbiAgICAgIC8vIHBheW1lbnQgZGF0YSByZXF1ZXN0IGlzIG5vdCB0aGUgc2FtZS5cbiAgICAgIHRoaXMuZGlzbWlzc1Byb21pc2VSZXNvbHZlcl8oUHJvbWlzZS5yZWplY3QoeydlcnJvckNvZGUnOiAnQ0FOQ0VMRUQnfSkpO1xuICAgICAgdGhpcy5yZW1vdmVJZnJhbWVBbmRDb250YWluZXJfKFxuICAgICAgICAgIGNvbnRhaW5lckFuZEZyYW1lWydjb250YWluZXInXSwgY29udGFpbmVyQW5kRnJhbWVbJ2lmcmFtZSddKTtcbiAgICAgIHRoaXMucG9ydF8gJiYgdGhpcy5wb3J0Xy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc1ZlcnRpY2FsQ2VudGVyRXhwZXJpbWVudEVuYWJsZWRfKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIHJldHVybiBudWxsXG4gICAgICAgICYmIHBheW1lbnREYXRhUmVxdWVzdFsnaSddXG4gICAgICAgICYmIHBheW1lbnREYXRhUmVxdWVzdFsnaSddLnJlbmRlckNvbnRhaW5lckNlbnRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBjb250YWluZXJcbiAgICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2hvd0NvbnRhaW5lckFuZElmcmFtZVdpdGhBbmltYXRpb25fKGNvbnRhaW5lciwgaWZyYW1lLCBwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gSGFyZCBjb2RlIHRoZSBhcHByeCBoZWlnaHQgaGVyZSwgaXQgd2lsbCBiZSByZXNpemUgdG8gZXhwZWN0ZWQgaGVpZ2h0XG4gICAgICAvLyBsYXRlci5cbiAgICAgIGlmcmFtZS5oZWlnaHQgPSAnMjgwcHgnO1xuICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbENlbnRlckV4cGVyaW1lbnRFbmFibGVkXyhwYXltZW50RGF0YVJlcXVlc3QpKSB7XG4gICAgICAgIGlmcmFtZS5jbGFzc0xpc3QuYWRkKENvbnN0YW50cy5JRlJBTUVfQUNUSVZFX0NPTlRBSU5FUl9DTEFTUyk7XG4gICAgICB9XG4gICAgICAvLyBUT0RPOiBUaGlzIHNob3VsZCBiZSBoYW5kbGVzIHByb3Blcmx5IGJ5IGxpc3RlbmluZyB0b1xuICAgICAgLy8gVHJhbnNpdGlvbkVuZCBldmVudC5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNob3VsZEhhbmRsZVJlc2l6aW5nXyA9IHRydWU7XG4gICAgICAgIC8vIFRPRE86IEFkZCBicm93c2VyIHRlc3QgdGhhdCBjYXRjaGVzIHRoaXMuXG4gICAgICAgIGlmICh0aGlzLnNhdmVkUmVzaXplUGF5bG9hZF8pIHtcbiAgICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25fKGlmcmFtZSwgdGhpcy5zYXZlZFJlc2l6ZVBheWxvYWRfWyd0cmFuc2l0aW9uJ10pO1xuICAgICAgICAgIGlmcmFtZS5oZWlnaHQgPSB0aGlzLnNhdmVkUmVzaXplUGF5bG9hZF9bJ2hlaWdodCddO1xuICAgICAgICAgIHRoaXMuc2F2ZWRSZXNpemVQYXlsb2FkXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sIElGUkFNRV9TSE9XX1VQX0RVUkFUSU9OX0lOX01TKTtcbiAgICB9LCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2l0aW9uU3R5bGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldFRyYW5zaXRpb25fKGlmcmFtZSwgdHJhbnNpdGlvblN0eWxlKSB7XG4gICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KCd0cmFuc2l0aW9uJywgdHJhbnNpdGlvblN0eWxlKTtcbiAgICAvLyBGb3Igc2FmYXJpLlxuICAgIGlmcmFtZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLXdlYmtpdC10cmFuc2l0aW9uJywgdHJhbnNpdGlvblN0eWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgV2ViQWN0aXZpdGl5IHRvIG9wZW4gaWZyYW1lIHRoYXQncyBpbiBnaXZlbiBjb250YWluZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGNvbnRhaW5lclxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFQYXltZW50RGF0YT59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvcGVuSWZyYW1lXyhjb250YWluZXIsIGlmcmFtZSwgcGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgaWYgKCFwYXltZW50RGF0YVJlcXVlc3Quc3dnKSB7XG4gICAgICBpZiAoIXBheW1lbnREYXRhUmVxdWVzdC5hcGlWZXJzaW9uKSB7XG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdC5hcGlWZXJzaW9uID0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcGF5bWVudERhdGFSZXF1ZXN0LmVudmlyb25tZW50ID0gdGhpcy5lbnZpcm9ubWVudF87XG4gICAgbGV0IGlmcmFtZUxvYWRTdGFydFRpbWU7XG4gICAgY29uc3QgdHJ1c3RlZFVybCA9XG4gICAgICAgIHRoaXMuZ2V0SWZyYW1lVXJsKHRoaXMuZW52aXJvbm1lbnRfLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0aWVzLm9wZW5JZnJhbWUoaWZyYW1lLCB0cnVzdGVkVXJsLCBwYXltZW50RGF0YVJlcXVlc3QpXG4gICAgICAgIC50aGVuKHBvcnQgPT4ge1xuICAgICAgICAgIC8vIEhhbmRsZSBjdXN0b20gcmVzaXplIG1lc3NhZ2UuXG4gICAgICAgICAgdGhpcy5wb3J0XyA9IHBvcnQ7XG4gICAgICAgICAgcG9ydC5vbk1lc3NhZ2UocGF5bG9hZCA9PiB7XG4gICAgICAgICAgICBpZiAocGF5bG9hZFsndHlwZSddICE9PSAncmVzaXplJyB8fCAhdGhpcy5zaG91bGRIYW5kbGVSZXNpemluZ18pIHtcbiAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgcmVzaXplIGV2ZW50IGxhdGVyIGFmdGVyIGluaXRpYWwgYW5pbWF0aW9uIGlzIGZpbmlzaGVkXG4gICAgICAgICAgICAgIHRoaXMuc2F2ZWRSZXNpemVQYXlsb2FkXyA9IHtcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogcGF5bG9hZFsnaGVpZ2h0J10sXG4gICAgICAgICAgICAgICAgJ3RyYW5zaXRpb24nOiBwYXlsb2FkWyd0cmFuc2l0aW9uJ11cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYi8xMTEzMTA4OTk6IFNtb290aCBvdXQgaW5pdGlhbCBpRnJhbWUgbG9hZGluZ1xuICAgICAgICAgICAgaWYgKCFpZnJhbWVMb2FkU3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgIGlmcmFtZUxvYWRTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgPFxuICAgICAgICAgICAgICAgIGlmcmFtZUxvYWRTdGFydFRpbWUgKyBJRlJBTUVfU0hPV19VUF9EVVJBVElPTl9JTl9NUykge1xuICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25fKGlmcmFtZSwgcGF5bG9hZFsndHJhbnNpdGlvbiddICsgJywgJ1xuICAgICAgICAgICAgICAgICAgKyBJRlJBTUVfU01PT1RIX0hFSUdIVF9UUkFOU0lUSU9OKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbl8oaWZyYW1lLCBwYXlsb2FkWyd0cmFuc2l0aW9uJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWZyYW1lLmhlaWdodCA9IHBheWxvYWRbJ2hlaWdodCddO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCFPYmplY3Q+fSAqLyAocG9ydC5hY2NlcHRSZXN1bHQoKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcGFyYW0geyFPYmplY3R9IHJlc3VsdFxuICAgICAgICAgICAgICogQHJldHVybiB7IVBheW1lbnREYXRhfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXN1bHQgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnJlbW92ZUlmcmFtZUFuZENvbnRhaW5lcl8oY29udGFpbmVyLCBpZnJhbWUpO1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIG9ubHkgZm9yIHBvcHBpbmcgdGhlIHN0YXRlIHdlIHB1c2hlZCBlYXJsaWVyLlxuICAgICAgICAgICAgICBoaXN0b3J5LmJhY2soKTtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IC8qKiBAdHlwZSB7IVBheW1lbnREYXRhfSAqLyAocmVzdWx0WydkYXRhJ10pO1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlSWZyYW1lQW5kQ29udGFpbmVyXyhjb250YWluZXIsIGlmcmFtZSk7XG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgb25seSBmb3IgcG9wcGluZyB0aGUgc3RhdGUgd2UgcHVzaGVkIGVhcmxpZXIuXG4gICAgICAgICAgICAgIGhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IHtQYXltZW50c1dlYkFjdGl2aXR5RGVsZWdhdGV9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogU2VydmljZSB3cmFwcGluZyB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlLiBUaGlzIGVuYWJsZXNcbiAqIHdpbmRvdy5wb3N0TWVzc2FnZSB0byBiZSBzd2FwcGVkIG91dCBpbiB1bml0IHRlc3RzLlxuICovXG5jbGFzcyBQb3N0TWVzc2FnZVNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcih3aW5kb3cpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luZG93XyA9IHdpbmRvdztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXNzdGhyb3VnaCB0byBXaW5kb3cjcG9zdE1lc3NhZ2UuIFNlZSBXaW5kb3cjcG9zdE1lc3NhZ2UgRE9NIEFQSVxuICAgKiBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGFyZ3VtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0fSBtZXNzYWdlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRPcmlnaW5cbiAgICovXG4gIHBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRhcmdldE9yaWdpbikge1xuICAgIHRoaXMud2luZG93Xy5wb3N0TWVzc2FnZShtZXNzYWdlLCB0YXJnZXRPcmlnaW4pO1xuICB9XG59XG5cbmV4cG9ydCB7UG9zdE1lc3NhZ2VTZXJ2aWNlfTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHtQdWJsaWNFcnJvckNvZGV9IGZyb20gJy4vcGF5X2ZyYW1lX2hlbHBlci5qcyc7XG5pbXBvcnQge2dldFVwaVBheW1lbnRNZXRob2R9IGZyb20gJy4vdmFsaWRhdG9yLmpzJztcblxuY2xhc3MgVXBpSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB1cGkgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGlmIGl0IGV4aXN0cyBpbiBhbGxvd2VkIHBheW1lbnQgbWV0aG9kc1xuICAgKiBvciBudWxsIGlmIGl0IGRvZXNuJ3RcbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1VwaVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiAhIWdldFVwaVBheW1lbnRNZXRob2QocmVxdWVzdCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB1cGkgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGlmIGl0IGV4aXN0cyBpbiBhbGxvd2VkIHBheW1lbnQgbWV0aG9kc1xuICAgKiBvciBudWxsIGlmIGl0IGRvZXNuJ3RcbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBUaGUgcHJvbWlzZSB3aWxsIGNvbnRhaW4gdGhlIGJvb2xlYW4gcmVzdWx0IGFuZCBlcnJvclxuICAgKiAgICAgbWVzc2FnZSB3aGVuIHBvc3NpYmxlLlxuICAgKi9cbiAgaXNSZWFkeVRvUGF5KHJlcXVlc3QpIHtcbiAgICAvLyBBbHdheXMgcmV0dXJuIHRydWUgZm9yIFVQSSBpZiBhcGkgdmVyc2lvbiBpcyAyIGFuZCBjaHJvbWUgc3VwcG9ydHNcbiAgICAvLyBwYXltZW50IHJlcXVlc3RcbiAgICBpZiAoZ2V0VXBpUGF5bWVudE1ldGhvZChyZXF1ZXN0KSkge1xuICAgICAgaWYgKHJlcXVlc3QuZXhpc3RpbmdQYXltZW50TWV0aG9kUmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7J3Jlc3VsdCc6IHRydWUsICdwYXltZW50TWV0aG9kUHJlc2VudCc6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeydyZXN1bHQnOiB0cnVlfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignTm8gVXBpIHBheW1lbnQgbWV0aG9kIGZvdW5kIGluIGhhbmRsZXInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHBheW1lbnQgZGF0YSB3aGVuIHBheW1lbnQgbWV0aG9kIGlzIFVQSVxuICAgKlxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdCBQcm92aWRlcyBuZWNlc3NhcnlcbiAgICogICAgIGluZm9ybWF0aW9uIHRvIHN1cHBvcnQgYSBwYXltZW50LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IHVwaVBheW1lbnRNZXRob2QgVVBJIHBheW1lbnRtZXRob2QgaW5cbiAgICogICAgIGFsbG93ZWRQYXltZW50TWV0aG9kcyBhcnJheS5cbiAgICogQHBhcmFtIHshRnVuY3Rpb259IG9uUmVzdWx0Q2FsbGJhY2sgRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGV2ZXJ5dGhpbmcgaXNcbiAgICogICAgIGRvbmUuXG4gICAqL1xuICBsb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0LCB1cGlQYXltZW50TWV0aG9kLCBvblJlc3VsdENhbGxiYWNrKSB7XG4gICAgY29uc3QgcGFyYW1ldGVycyA9IHVwaVBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbkluZm8gPSBwYXltZW50RGF0YVJlcXVlc3RbJ3RyYW5zYWN0aW9uSW5mbyddO1xuICAgIGNvbnN0IHN1cHBvcnRlZEluc3RydW1lbnRzID0gbnVsbCA/XG4gICAgICAgIFt7XG4gICAgICAgICAgLy8gVGhpcyBpcyB0aGUgdXJsIGZvciBUZXogdGVhbWZvb2QgcmVsZWFzZS5cbiAgICAgICAgICAnc3VwcG9ydGVkTWV0aG9kcyc6IFsnaHR0cHM6Ly9wd3Atc2VydmVyLmFwcHNwb3QuY29tL3BheS10ZWFtZm9vZCddLFxuICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgJ3BhJzogJ3JlZGJ1c0BheGlzYmFuaycsXG4gICAgICAgICAgICAncG4nOiBwYXJhbWV0ZXJzWydwYXllZU5hbWUnXSxcbiAgICAgICAgICAgICd0cic6IHBhcmFtZXRlcnNbJ3RyYW5zYWN0aW9uUmVmZXJlbmNlSWQnXSxcbiAgICAgICAgICAgICd1cmwnOiBwYXJhbWV0ZXJzWydyZWZlcmVuY2VVcmwnXSxcbiAgICAgICAgICAgICdtYyc6ICc0MTMxJyxcbiAgICAgICAgICAgICd0bic6ICdQdXJjaGFzZSBpbiBNZXJjaGFudCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfV0gOlxuICAgICAgICBbe1xuICAgICAgICAgICdzdXBwb3J0ZWRNZXRob2RzJzogWydodHRwczovL3Rlei5nb29nbGUuY29tL3BheSddLFxuICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgJ3BhJzogcGFyYW1ldGVyc1sncGF5ZWVWcGEnXSxcbiAgICAgICAgICAgICdwbic6IHBhcmFtZXRlcnNbJ3BheWVlTmFtZSddLFxuICAgICAgICAgICAgJ3RyJzogcGFyYW1ldGVyc1sndHJhbnNhY3Rpb25SZWZlcmVuY2VJZCddLFxuICAgICAgICAgICAgJ3VybCc6IHBhcmFtZXRlcnNbJ3JlZmVyZW5jZVVybCddLFxuICAgICAgICAgICAgJ21jJzogcGFyYW1ldGVyc1snbWNjJ10sXG4gICAgICAgICAgICAndG4nOiB0cmFuc2FjdGlvbkluZm9bJ3RyYW5zYWN0aW9uTm90ZSddLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1dO1xuXG4gICAgaWYgKHBhcmFtZXRlcnNbJ3RyYW5zYWN0aW9uSWQnXSkge1xuICAgICAgc3VwcG9ydGVkSW5zdHJ1bWVudHNbMF1bJ2RhdGEnXVsndGlkJ10gPSBwYXJhbWV0ZXJzWyd0cmFuc2FjdGlvbklkJ107XG4gICAgfVxuXG4gICAgY29uc3QgZGV0YWlscyA9IHtcbiAgICAgICd0b3RhbCc6IHtcbiAgICAgICAgJ2xhYmVsJzogJ1RvdGFsJyxcbiAgICAgICAgJ2Ftb3VudCc6IHtcbiAgICAgICAgICAnY3VycmVuY3knOiB0cmFuc2FjdGlvbkluZm9bJ2N1cnJlbmN5Q29kZSddLFxuICAgICAgICAgICd2YWx1ZSc6IHRyYW5zYWN0aW9uSW5mb1sndG90YWxQcmljZSddLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICdkaXNwbGF5SXRlbXMnOiBbe1xuICAgICAgICAnbGFiZWwnOiAnT3JpZ2luYWwgQW1vdW50JyxcbiAgICAgICAgJ2Ftb3VudCc6IHtcbiAgICAgICAgICAnY3VycmVuY3knOiB0cmFuc2FjdGlvbkluZm9bJ2N1cnJlbmN5Q29kZSddLFxuICAgICAgICAgICd2YWx1ZSc6IHRyYW5zYWN0aW9uSW5mb1sndG90YWxQcmljZSddLFxuICAgICAgICB9LFxuICAgICAgfV0sXG4gICAgfTtcblxuICAgIGxldCByZXF1ZXN0ID0gbmV3IFBheW1lbnRSZXF1ZXN0KHN1cHBvcnRlZEluc3RydW1lbnRzLCBkZXRhaWxzKTtcblxuICAgIG9uUmVzdWx0Q2FsbGJhY2soXG4gICAgICAgIHRoaXMuY2hlY2tDYW5NYWtlUGF5bWVudF8ocmVxdWVzdClcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93VWlfKHJlcXVlc3QpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VG9Hb29nbGVQbGF5XygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocGF5bWVudERhdGEgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRGF0YV8oXG4gICAgICAgICAgICAgICAgICBwYXltZW50RGF0YSwgcGF5bWVudERhdGFSZXF1ZXN0LCB1cGlQYXltZW50TWV0aG9kKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBlcnJvclsnc3RhdHVzQ29kZSddID0gQ29uc3RhbnRzLlJlc3BvbnNlU3RhdHVzLkNBTkNFTEVEO1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIFRleiBwYXltZW50IHJlcXVlc3QgVUkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7IVBheW1lbnRSZXF1ZXN0fSByZXF1ZXN0IFRoZSBwYXltZW50IHJlcXVlc3Qgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhUGF5bWVudERhdGE+fSBBIHByb21pc2UgY29udGFpbmluZyBwYXltZW50IHJlc3BvbnNlLlxuICAgKi9cbiAgc2hvd1VpXyhyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3Quc2hvdygpLnRoZW4ocGF5bWVudFJlc3BvbnNlID0+IHtcbiAgICAgIHBheW1lbnRSZXNwb25zZS5jb21wbGV0ZSgnc3VjY2VzcycpO1xuICAgICAgcmV0dXJuIHBheW1lbnRSZXNwb25zZS5kZXRhaWxzO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIGNhbiBtYWtlIGEgcGF5bWVudCB3aXRoIFRleiBvbiB0aGlzIGRldmljZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHshUGF5bWVudFJlcXVlc3R9IHJlcXVlc3QgVGhlIHBheW1lbnQgcmVxdWVzdCBvYmplY3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPGJvb2xlYW4+fSBhIHByb21pc2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIHdoZXRoZXIgY2FuXG4gICAqICAgICBtYWtlIHBheW1lbnQuXG4gICAqL1xuICBjaGVja0Nhbk1ha2VQYXltZW50XyhyZXF1ZXN0KSB7XG4gICAgLy8gQ2hlY2tzIGNhbk1ha2VQYXltZW50IGNhY2hlLCBhbmQgdXNlIHRoZSBjYWNoZSByZXN1bHQgaWYgaXQgZXhpc3RzLlxuICAgIGNvbnN0IGNhY2hlUmVzdWx0ID1cbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLlVQSV9DQU5fTUFLRV9QQVlNRU5UX0NBQ0hFX0tFWSk7XG4gICAgaWYgKGNhY2hlUmVzdWx0KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlUmVzdWx0ID09PSAndHJ1ZScpO1xuICAgIH1cblxuICAgIC8vIEZlYXR1cmUgZGV0ZWN0IGNhbk1ha2VQYXltZW50KCkuXG4gICAgaWYgKCFyZXF1ZXN0LmNhbk1ha2VQYXltZW50KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cblxuICAgIGxldCBjYW5NYWtlUGF5bWVudFByb21pc2UgPSByZXF1ZXN0LmNhbk1ha2VQYXltZW50KCk7XG5cbiAgICByZXR1cm4gY2FuTWFrZVBheW1lbnRQcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIC8vIFN0b3JlIHRoZSByZXN1bHQgaW4gY2FjaGUgaWYgdGhlIHJlc3VsdCBpcyB0cnVlIHRvIGF2b2lkIHF1b3RhIGVycm9yXG4gICAgICAvLyBjYXVzZWQgYnkgcXVlcnlpbmcgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgZGF0YS5cbiAgICAgIC8vIERvZXNuJ3Qgc3RvcmUgZmFsc2UgYmVjYXVzZSBpZiB3ZSBkbyBzbywgdXNlciB3aWxsIGJlIHJlZGlyZWN0ZWQgdG9cbiAgICAgIC8vIEdvb2dsZSBQbGF5IGFnYWluIGFmdGVyIGluc3RhbGxpbmcgR29vZ2xlIFBheSBpZiBDaHJvbWUgaXMgbm90IGNsb3NlZC5cbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICBDb25zdGFudHMuVVBJX0NBTl9NQUtFX1BBWU1FTlRfQ0FDSEVfS0VZLCByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZGlyZWN0IHVzZXIgdG8gR29vZ2xlIFBheSBhcHAgaW4gR29vZ2xlIFBsYXkgc3RvcmVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMgeyFQcm9taXNlPCFPYmplY3Q+fSBSZWplY3RlZCBwcm9taXNlIHdpdGggZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgcmVkaXJlY3RUb0dvb2dsZVBsYXlfKCkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFxuICAgICAgICBudWxsID9cbiAgICAgICAgICAgICdodHRwczovL3BsYXkuZ29vZ2xlLmNvbS9zdG9yZS9hcHBzL2RldGFpbHM/aWQ9Y29tLmdvb2dsZS5hbmRyb2lkLmFwcHMubmJ1LnBhaXNhLnVzZXIudGVhbWZvb2QgJyA6ICAvLyBOT0xJTlRcbiAgICAgICAgICAgICdodHRwczovL3BsYXkuZ29vZ2xlLmNvbS9zdG9yZS9hcHBzL2RldGFpbHM/aWQ9Y29tLmdvb2dsZS5hbmRyb2lkLmFwcHMubmJ1LnBhaXNhLnVzZXInKTsgIC8vIE5PTElOVFxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgeydlcnJvck1lc3NhZ2UnOiAnQ2Fubm90IHJlZGlyZWN0IHRvIFRleiBwYWdlIGluIEdvb2dsZSBQbGF5Lid9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IFRleiBwYXltZW50IGRhdGEgdG8gR1BheSBwYXltZW50IGRhdGEgaWYgcGF5bWVudCBzdWNjZWVkZWQsIG9yXG4gICAqIHJlamVjdCBpZiBwYXltZW50IGZhaWxlZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YX0gdGV6UGF5bWVudERhdGEgVGhlIHBheW1lbnQgZGF0YSBvYmplY3QgZnJvbSBUZXouXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0IFRoZSBwYXltZW50IGRhdGEgcmVxdWVzdC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSB1cGlQYXltZW50TWV0aG9kIFVQSSBwYXltZW50bWV0aG9kIGluXG4gICAqIGFsbG93ZWRQYXltZW50TWV0aG9kcyBhcnJheVxuICAgKiBAcmV0dXJucyB7IVByb21pc2U8UGF5bWVudERhdGE+fSBBIHByb21pc2UgY29udGFpbmluZyBwYXltZW50IGRhdGEgb3JcbiAgICogICAgIGVycm9yIG1lc3NhZ2UuXG4gICAqL1xuICBwcm9jZXNzRGF0YV8odGV6UGF5bWVudERhdGEsIHBheW1lbnREYXRhUmVxdWVzdCwgdXBpUGF5bWVudE1ldGhvZCkge1xuICAgIGNvbnN0IHRlelJlc3BvbnNlID0gSlNPTi5wYXJzZSh0ZXpQYXltZW50RGF0YVsndGV6UmVzcG9uc2UnXSk7XG4gICAgaWYgKHRlelJlc3BvbnNlWydTdGF0dXMnXSA9PT0gJ0ZBSUxVUkUnKSB7XG4gICAgICBsZXQgZXJyb3I7XG4gICAgICBzd2l0Y2ggKHRlelJlc3BvbnNlWydyZXNwb25zZUNvZGUnXSkge1xuICAgICAgICBjYXNlICdaTSc6XG4gICAgICAgICAgLy8gcGF5bWVudCBmYWlsdXJlIGR1ZSB0byBpbnZhbGlkIE1QSU5cbiAgICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICAgICdlcnJvckNvZGUnOiBQdWJsaWNFcnJvckNvZGUuQlVZRVJfQUNDT1VOVF9FUlJPUixcbiAgICAgICAgICAgICdlcnJvck1lc3NhZ2UnOiAnUGF5bWVudCBmYWlsdXJlIGR1ZSB0byBpbnZhbGlkIE1QSU4uJ1xuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1o5JzpcbiAgICAgICAgICAvLyBwYXltZW50IGZhaWx1cmUgZHVlIHRvIGluc3VmZmljaWVudCBmdW5kc1xuICAgICAgICAgIGVycm9yID0ge1xuICAgICAgICAgICAgJ2Vycm9yQ29kZSc6IFB1YmxpY0Vycm9yQ29kZS5CVVlFUl9BQ0NPVU5UX0VSUk9SLFxuICAgICAgICAgICAgJ2Vycm9yTWVzc2FnZSc6ICdQYXltZW50IGZhaWx1cmUgZHVlIHRvIGluc3VmZmljaWVudCBmdW5kcy4nXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnOTEnOlxuICAgICAgICAgIC8vIHBheW1lbnQgZmFpbHVyZSBkdWUgdG8gdHJhbnNhY3Rpb24gdGltZW91dCBvciBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgZXJyb3IgPSB7XG4gICAgICAgICAgICAnZXJyb3JDb2RlJzogUHVibGljRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuICAgICAgICAgICAgJ2Vycm9yTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgJ1BheW1lbnQgZmFpbHVyZSBkdWUgdG8gdHJhbnNhY3Rpb24gdGltZW91dCBvciBjb25uZWN0aW9uJyArXG4gICAgICAgICAgICAgICAgJyBpc3N1ZS4nXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBwYXltZW50IGZhaWx1cmUgZHVlIHRvIHVzZXIgY2FuY2VsIG9yIG90aGVyIGlzc3Vlc1xuICAgICAgICAgIGVycm9yID0geydlcnJvck1lc3NhZ2UnOiAnUGF5bWVudCBjYW5jZWxsZWQuJ307XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpZ25lZE1lc3NhZ2UgPSB7XG4gICAgICAncGF5bWVudE1ldGhvZFR5cGUnOiAnVVBJJyxcbiAgICAgICdwYXllZVZwYSc6IHVwaVBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXVsncGF5ZWVWcGEnXSxcbiAgICAgICdzdGF0dXMnOiB0ZXpSZXNwb25zZVsnU3RhdHVzJ10sXG4gICAgICAndHJhbnNhY3Rpb25SZWZlcmVuY2VJZCc6XG4gICAgICAgICAgdXBpUGF5bWVudE1ldGhvZFsncGFyYW1ldGVycyddWyd0cmFuc2FjdGlvblJlZmVyZW5jZUlkJ10sXG4gICAgICAndHJhbnNhY3Rpb25JZCc6IHVwaVBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXVsndHJhbnNhY3Rpb25JZCddID9cbiAgICAgICAgICB1cGlQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ11bJ3RyYW5zYWN0aW9uSWQnXSA6XG4gICAgICAgICAgdGV6UmVzcG9uc2VbJ3R4bklkJ10sXG4gICAgICAndHJhbnNhY3Rpb25JbmZvJzogcGF5bWVudERhdGFSZXF1ZXN0Wyd0cmFuc2FjdGlvbkluZm8nXSxcbiAgICB9O1xuXG4gICAgbGV0IHBheW1lbnREYXRhID0ge1xuICAgICAgJ2FwaVZlcnNpb24nOiBwYXltZW50RGF0YVJlcXVlc3RbJ2FwaVZlcnNpb24nXSxcbiAgICAgICdhcGlWZXJzaW9uTWlub3InOiBwYXltZW50RGF0YVJlcXVlc3RbJ2FwaVZlcnNpb25NaW5vciddLFxuICAgICAgJ3BheW1lbnRNZXRob2REYXRhJzoge1xuICAgICAgICAndHlwZSc6IHVwaVBheW1lbnRNZXRob2RbJ3R5cGUnXSxcbiAgICAgICAgJ3Rva2VuaXphdGlvbkRhdGEnOiB7XG4gICAgICAgICAgJ3R5cGUnOiAnRElSRUNUJyxcbiAgICAgICAgICAndG9rZW4nOiB7XG4gICAgICAgICAgICAncHJvdG9jb2xWZXJzaW9uJzogJ0VDdjEnLFxuICAgICAgICAgICAgLy8gVE9ETzogVmVyaWZ5IHRoYXQgcmVzcG9uc2UgY29tZXMgZnJvbSB0ZXogYW5kXG4gICAgICAgICAgICAvLyBhZGQgc2lnbmF0dXJlIGFuZCBlbmNyeXB0IHNpZ25lZCBtZXNzYWdlIGhlcmVcbiAgICAgICAgICAgICdzaWduYXR1cmUnOiAnJyxcbiAgICAgICAgICAgICdzaWduZWRNZXNzYWdlJzogc2lnbmVkTWVzc2FnZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXltZW50RGF0YSk7XG4gIH1cbn1cblxuZXhwb3J0IHtVcGlIYW5kbGVyfTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgdXVpZCBmcm9tICcuLi90aGlyZF9wYXJ0eS9yYW5kb21fdXVpZC9SYW5kb20udXVpZC5qcyc7XG5cbi8qKlxuICogUmV0dXJucyBhIGdvb2dsZSB0cmFuc2FjdGlvbiBpZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW52aXJvbm1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZChlbnZpcm9ubWVudCkge1xuICByZXR1cm4gdXVpZC51dWlkRmFzdCgpICsgJy4nICsgZW52aXJvbm1lbnQ7XG59XG5cbmV4cG9ydCB7Y3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZH07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgdmVyc2lvbiBvZiBDaHJvbWUgc3VwcG9ydHMgUGF5bWVudEhhbmRsZXIuXG4gKi9cbmZ1bmN0aW9uIGNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSB7XG4gIC8vIENoZWNrIGlmIGZlYXR1cmUgaXMgZW5hYmxlZCBmb3IgdXNlclxuICBpZiAodHlwZW9mIGdvb2dsZSA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgIW51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBQYXltZW50IGhhbmRsZXIgaXNuJ3Qgc3VwcG9ydGVkIG9uIG1vYmlsZVxuICBjb25zdCBtb2JpbGVQbGF0Zm9ybSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKFxuICAgICAgL0FuZHJvaWR8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlL2kpO1xuICBpZiAobW9iaWxlUGxhdGZvcm0gIT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGNocm9tZVZlcnNpb24gPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFswLTldKylcXC4vaSk7XG4gIHJldHVybiAnUGF5bWVudFJlcXVlc3QnIGluIHdpbmRvdyAmJiBjaHJvbWVWZXJzaW9uICE9IG51bGwgJiZcbiAgICAgIE51bWJlcihjaHJvbWVWZXJzaW9uWzFdKSA+PSA2OCAmJlxuICAgICAgd2luZG93Lm5hdmlnYXRvci52ZW5kb3IgPT0gJ0dvb2dsZSBJbmMuJztcbn1cblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgdmVyc2lvbiBvZiBDaHJvbWUgc3VwcG9ydHMgUGF5bWVudFJlcXVlc3QuXG4gKi9cbmZ1bmN0aW9uIGNocm9tZVN1cHBvcnRzUGF5bWVudFJlcXVlc3QoKSB7XG4gIC8vIE9wZXJhIHVzZXMgY2hyb21lIGFzIHJlbmRlcmluZyBlbmdpbmUgYW5kIHNlbmRzIGFsbW9zdCB0aGUgZXhhY3Qgc2FtZVxuICAvLyB1c2VyIGFnZW50IGFzIGNocm9tZSB0aGVyZWJ5IGZvb2xpbmcgdXMgb24gYW5kcm9pZC5cbiAgY29uc3QgaXNPcGVyYSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ09QUi8nKSAhPSAtMTtcbiAgaWYgKGlzT3BlcmEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3QgYW5kcm9pZFBsYXRmb3JtID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSk7XG4gIGNvbnN0IGNocm9tZVZlcnNpb24gPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFswLTldKylcXC4vaSk7XG4gIHJldHVybiBhbmRyb2lkUGxhdGZvcm0gIT0gbnVsbCAmJiAnUGF5bWVudFJlcXVlc3QnIGluIHdpbmRvdyAmJlxuICAgICAgLy8gTWFrZSBzdXJlIHNraXBwaW5nIFBheW1lbnRSZXF1ZXN0IFVJIHdoZW4gb25seSBvbmUgUGF5bWVudE1ldGhvZCBpc1xuICAgICAgLy8gc3VwcG9ydGVkIChzdGFydHMgb24gR29vZ2xlIENocm9tZSA1OSkuXG4gICAgICB3aW5kb3cubmF2aWdhdG9yLnZlbmRvciA9PSAnR29vZ2xlIEluYy4nICYmIGNocm9tZVZlcnNpb24gIT0gbnVsbCAmJlxuICAgICAgTnVtYmVyKGNocm9tZVZlcnNpb25bMV0pID49IDU5O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R9IGlzUmVhZHlUb1BheVJlcXVlc3RcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBtZXJjaGFudCBvbmx5IHN1cHBvcnRzIHRva2VuaXplZCBjYXJkcy5cbiAqL1xuZnVuY3Rpb24gZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcyhpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmFwaVZlcnNpb24gPj0gMikge1xuICAgIGNvbnN0IGFsbG93ZWRBdXRoTWV0aG9kcyA9XG4gICAgICAgIGV4dHJhY3RBbGxvd2VkQXV0aE1ldGhvZHNGb3JDYXJkc18oaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgaWYgKGFsbG93ZWRBdXRoTWV0aG9kcyAmJiBhbGxvd2VkQXV0aE1ldGhvZHMubGVuZ3RoID09IDEgJiZcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzWzBdID09IENvbnN0YW50cy5BdXRoTWV0aG9kLkNSWVBUT0dSQU1fM0RTKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aCA9PSAxICYmXG4gICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kc1swXSA9PVxuICAgICAgQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuVE9LRU5JWkVEX0NBUkQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICogQHBhcmFtIHtDb25zdGFudHMuQXV0aE1ldGhvZH0gYXBpVjJBdXRoTWV0aG9kXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgbWVyY2hhbnQgc3VwcG9ydHMgcGFuIGNhcmRzLlxuICovXG5mdW5jdGlvbiBhcGlWMkRvZXNNZXJjaGFudFN1cHBvcnRTcGVjaWZpZWRDYXJkVHlwZShcbiAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LCBhcGlWMkF1dGhNZXRob2QpIHtcbiAgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyKSB7XG4gICAgY29uc3QgYWxsb3dlZEF1dGhNZXRob2RzID1cbiAgICAgICAgZXh0cmFjdEFsbG93ZWRBdXRoTWV0aG9kc0ZvckNhcmRzXyhpc1JlYWR5VG9QYXlSZXF1ZXN0KTtcbiAgICBpZiAoYWxsb3dlZEF1dGhNZXRob2RzICYmIGFsbG93ZWRBdXRoTWV0aG9kcy5pbmNsdWRlcyhhcGlWMkF1dGhNZXRob2QpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBpZiBpcyBzZWN1cmUgY29udGV4dC4gUmV0dXJucyBudWxsIGlmIGNvbnRleHQgaXMgc2VjdXJlLCBvdGhlcndpc2VcbiAqIHJldHVybiBlcnJvciBtZXNzYWdlLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TZWN1cml0eS9TZWN1cmVfQ29udGV4dHNcbiAqXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBudWxsIGlmIGN1cnJlbnQgY29udGV4dCBpcyBzZWN1cmUsIG90aGVyd2lzZSByZXR1cm4gZXJyb3JcbiAqIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlU2VjdXJlQ29udGV4dCgpIHtcbiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5lbmRzV2l0aChDb25zdGFudHMuVFJVU1RFRF9ET01BSU4pKSB7XG4gICAgLy8gVGhpcyBpcyBmb3IgbG9jYWwgZGV2ZWxvcG1lbnQuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIEJyb3dzZXIgbm90IHN1cHBvcnQgaXNTZWN1cmVDb250ZXh0LCBmaWd1cmUgb3V0IGEgd2F5IHRvIHZhbGlkYXRlIHRoaXNcbiAgICAvLyBmb3IgdGhlIHVuc3VwcG9ydGVkIGJyb3dzZXIuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgP1xuICAgICAgbnVsbCA6XG4gICAgICAnR29vZ2xlIFBheSBBUElzIHNob3VsZCBiZSBjYWxsZWQgaW4gc2VjdXJlIGNvbnRleHQhJztcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBQYXltZW50T3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0geyFQYXltZW50T3B0aW9uc30gcGF5bWVudE9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQYXltZW50T3B0aW9ucyhwYXltZW50T3B0aW9ucykge1xuICBpZiAocGF5bWVudE9wdGlvbnMuZW52aXJvbm1lbnQgJiZcbiAgICAgICFPYmplY3QudmFsdWVzKENvbnN0YW50cy5FbnZpcm9ubWVudClcbiAgICAgICAgICAgLmluY2x1ZGVzKHBheW1lbnRPcHRpb25zLmVudmlyb25tZW50KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1BhcmFtZXRlciBlbnZpcm9ubWVudCBpbiBQYXltZW50T3B0aW9ucyBjYW4gb3B0aW9uYWxseSBiZSBzZXQgdG8gJyArXG4gICAgICAgICdQUk9EVUNUSU9OLCBvdGhlcndpc2UgaXQgZGVmYXVsdHMgdG8gVEVTVC4nKTtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlIElzUmVhZHlUb1BheVJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICogQHJldHVybiB7P3N0cmluZ30gZXJyb3JNZXNzYWdlIGlmIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlSXNSZWFkeVRvUGF5UmVxdWVzdChpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gIGlmICghaXNSZWFkeVRvUGF5UmVxdWVzdCkge1xuICAgIHJldHVybiAnaXNSZWFkeVRvUGF5UmVxdWVzdCBtdXN0IGJlIHNldCEnO1xuICB9IGVsc2UgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyKSB7XG4gICAgaWYgKCEoJ2FwaVZlcnNpb25NaW5vcicgaW4gaXNSZWFkeVRvUGF5UmVxdWVzdCkpIHtcbiAgICAgIHJldHVybiAnYXBpVmVyc2lvbk1pbm9yIG11c3QgYmUgc2V0ISc7XG4gICAgfVxuICAgIGlmICghaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMpIHx8XG4gICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm4gJ2ZvciB2MiBhbGxvd2VkUGF5bWVudE1ldGhvZHMgbXVzdCBiZSBzZXQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBhIGxpc3Qgb2YgYWNjZXB0ZWQgcGF5bWVudCBtZXRob2RzJztcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGFsbG93ZWRQYXltZW50TWV0aG9kID0gaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHNbaV07XG4gICAgICBpZiAoYWxsb3dlZFBheW1lbnRNZXRob2RbJ3R5cGUnXSA9PSBDb25zdGFudHMuUGF5bWVudE1ldGhvZC5DQVJEKSB7XG4gICAgICAgIGlmICghYWxsb3dlZFBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXSkge1xuICAgICAgICAgIHJldHVybiAnRmllbGQgcGFyYW1ldGVycyBtdXN0IGJlIHNldHVwIGluIGVhY2ggYWxsb3dlZFBheW1lbnRNZXRob2QnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbGxvd2VkQ2FyZE5ldHdvcmtzID1cbiAgICAgICAgICAgIGFsbG93ZWRQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ11bJ2FsbG93ZWRDYXJkTmV0d29ya3MnXTtcbiAgICAgICAgaWYgKCFhbGxvd2VkQ2FyZE5ldHdvcmtzIHx8ICFBcnJheS5pc0FycmF5KGFsbG93ZWRDYXJkTmV0d29ya3MpIHx8XG4gICAgICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuICdhbGxvd2VkQ2FyZE5ldHdvcmtzIG11c3QgYmUgc2V0dXAgaW4gcGFyYW1ldGVycyBmb3IgdHlwZSBDQVJEJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWxsb3dlZEF1dGhNZXRob2RzID1cbiAgICAgICAgICAgIGFsbG93ZWRQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ11bJ2FsbG93ZWRBdXRoTWV0aG9kcyddO1xuICAgICAgICBpZiAoIWFsbG93ZWRBdXRoTWV0aG9kcyB8fCAhQXJyYXkuaXNBcnJheShhbGxvd2VkQXV0aE1ldGhvZHMpIHx8XG4gICAgICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHMubGVuZ3RoID09IDAgfHxcbiAgICAgICAgICAgICFhbGxvd2VkQXV0aE1ldGhvZHMuZXZlcnkoaXNBdXRoTWV0aG9kVmFsaWQpKSB7XG4gICAgICAgICAgcmV0dXJuICdhbGxvd2VkQXV0aE1ldGhvZHMgbXVzdCBiZSBzZXR1cCBpbiBwYXJhbWV0ZXJzIGZvciB0eXBlIFxcJ0NBUkRcXCcgJyArXG4gICAgICAgICAgICAgICcgYW5kIG11c3QgY29udGFpbiBcXCdDUllQVE9HUkFNXzNEU1xcJyBhbmQvb3IgXFwnUEFOX09OTFlcXCcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKFxuICAgICAgIWlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcykgfHxcbiAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aCA9PSAwIHx8XG4gICAgICAhaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMuZXZlcnkoaXNQYXltZW50TWV0aG9kVmFsaWQpKSB7XG4gICAgcmV0dXJuICdhbGxvd2VkUGF5bWVudE1ldGhvZHMgbXVzdCBiZSBzZXQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBcXCdDQVJEXFwnICcgK1xuICAgICAgICAnYW5kL29yIFxcJ1RPS0VOSVpFRF9DQVJEXFwnISc7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGhlIHBheW1lbnQgbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXltZW50TWV0aG9kXG4gKiBAcmV0dXJuIHtib29sZWFufSBpZiB0aGUgY3VycmVudCBwYXltZW50IG1ldGhvZCBpcyB2YWxpZC5cbiAqL1xuZnVuY3Rpb24gaXNQYXltZW50TWV0aG9kVmFsaWQocGF5bWVudE1ldGhvZCkge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhDb25zdGFudHMuUGF5bWVudE1ldGhvZCkuaW5jbHVkZXMocGF5bWVudE1ldGhvZCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGhlIGF1dGggbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoTWV0aG9kXG4gKiBAcmV0dXJuIHtib29sZWFufSBpZiB0aGUgY3VycmVudCBhdXRoIG1ldGhvZCBpcyB2YWxpZC5cbiAqL1xuZnVuY3Rpb24gaXNBdXRoTWV0aG9kVmFsaWQoYXV0aE1ldGhvZCkge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhDb25zdGFudHMuQXV0aE1ldGhvZCkuaW5jbHVkZXMoYXV0aE1ldGhvZCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgUGF5bWVudERhdGFSZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBlcnJvck1lc3NhZ2UgaWYgdGhlIHJlcXVlc3QgaXMgaW52YWxpZC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQYXltZW50RGF0YVJlcXVlc3QocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gIGlmICghcGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgcmV0dXJuICdwYXltZW50RGF0YVJlcXVlc3QgbXVzdCBiZSBzZXQhJztcbiAgfVxuICBpZiAocGF5bWVudERhdGFSZXF1ZXN0LnN3Zykge1xuICAgIHJldHVybiB2YWxpZGF0ZVBheW1lbnREYXRhUmVxdWVzdEZvclN3ZyhwYXltZW50RGF0YVJlcXVlc3Quc3dnKTtcbiAgfSBlbHNlIGlmICghcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mbykge1xuICAgIHJldHVybiAndHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0ISc7XG4gIH0gZWxzZSBpZiAoIXBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8uY3VycmVuY3lDb2RlKSB7XG4gICAgcmV0dXJuICdjdXJyZW5jeUNvZGUgaW4gdHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0ISc7XG4gIH0gZWxzZSBpZiAoXG4gICAgICAhcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby50b3RhbFByaWNlU3RhdHVzIHx8XG4gICAgICAhT2JqZWN0LnZhbHVlcyhDb25zdGFudHMuVG90YWxQcmljZVN0YXR1cylcbiAgICAgICAgICAgLmluY2x1ZGVzKHBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8udG90YWxQcmljZVN0YXR1cykpIHtcbiAgICByZXR1cm4gJ3RvdGFsUHJpY2VTdGF0dXMgaW4gdHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0IHRvIG9uZSBvZicgK1xuICAgICAgICAnIE5PVF9DVVJSRU5UTFlfS05PV04sIEVTVElNQVRFRCBvciBGSU5BTCEnO1xuICB9IGVsc2UgaWYgKFxuICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby50b3RhbFByaWNlU3RhdHVzICE9PVxuICAgICAgICAgICdOT1RfQ1VSUkVOVExZX0tOT1dOJyAmJlxuICAgICAgIXBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8udG90YWxQcmljZSkge1xuICAgIHJldHVybiAndG90YWxQcmljZSBpbiB0cmFuc2FjdGlvbkluZm8gbXVzdCBiZSBzZXQgd2hlbicgK1xuICAgICAgICAnIHRvdGFsUHJpY2VTdGF0dXMgaXMgRVNUSU1BVEVEIG9yIEZJTkFMISc7XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBwYXltZW50IGRhdGEgcmVxdWVzdCBmb3IgVVBJIHBheW1lbnQgbWV0aG9kXG4gIGNvbnN0IGFsbG93ZWRQYXltZW50TWV0aG9kID0gZ2V0VXBpUGF5bWVudE1ldGhvZChwYXltZW50RGF0YVJlcXVlc3QpO1xuICBpZiAoYWxsb3dlZFBheW1lbnRNZXRob2QpIHtcbiAgICBpZiAoIWFsbG93ZWRQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ10pIHtcbiAgICAgIHJldHVybiAncGFyYW1ldGVycyBtdXN0IGJlIHNldCBpbiBhbGxvd2VkUGF5bWVudE1ldGhvZCEnO1xuICAgIH1cblxuICAgIHZhciBwYXJhbWV0ZXJzID0gYWxsb3dlZFBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXTtcbiAgICBpZiAoIXBhcmFtZXRlcnNbJ3BheWVlVnBhJ10pIHtcbiAgICAgIHJldHVybiAncGF5ZWVWcGEgaW4gYWxsb3dlZFBheW1lbnRNZXRob2QgcGFyYW1ldGVycyBtdXN0IGJlIHNldCEnO1xuICAgIH0gZWxzZSBpZiAoIXBhcmFtZXRlcnNbJ3BheWVlTmFtZSddKSB7XG4gICAgICByZXR1cm4gJ3BheWVlTmFtZSBpbiBhbGxvd2VkUGF5bWVudE1ldGhvZCBwYXJhbWV0ZXJzIG11c3QgYmUgc2V0ISc7XG4gICAgfSBlbHNlIGlmICghcGFyYW1ldGVyc1sncmVmZXJlbmNlVXJsJ10pIHtcbiAgICAgIHJldHVybiAncmVmZXJlbmNlVXJsIGluIGFsbG93ZWRQYXltZW50TWV0aG9kIHBhcmFtZXRlcnMgbXVzdCBiZSBzZXQhJztcbiAgICB9IGVsc2UgaWYgKCFwYXJhbWV0ZXJzWydtY2MnXSkge1xuICAgICAgcmV0dXJuICdtY2MgaW4gYWxsb3dlZFBheW1lbnRNZXRob2QgcGFyYW1ldGVycyBtdXN0IGJlIHNldCEnO1xuICAgIH0gZWxzZSBpZiAoIXBhcmFtZXRlcnNbJ3RyYW5zYWN0aW9uUmVmZXJlbmNlSWQnXSkge1xuICAgICAgcmV0dXJuICd0cmFuc2FjdGlvblJlZmVyZW5jZUlkIGluIGFsbG93ZWRQYXltZW50TWV0aG9kIHBhcmFtZXRlcnMnICtcbiAgICAgICAgICAnIG11c3QgYmUgc2V0ISc7XG4gICAgfVxuXG4gICAgaWYgKHBheW1lbnREYXRhUmVxdWVzdFsndHJhbnNhY3Rpb25JbmZvJ11bJ2N1cnJlbmN5Q29kZSddICE9PSAnSU5SJykge1xuICAgICAgcmV0dXJuICdjdXJyZW5jeUNvZGUgaW4gdHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0IHRvIElOUiEnO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdFsndHJhbnNhY3Rpb25JbmZvJ11bJ3RvdGFsUHJpY2VTdGF0dXMnXSAhPT0gJ0ZJTkFMJykge1xuICAgICAgcmV0dXJuICd0b3RhbFByaWNlU3RhdHVzIGluIHRyYW5zYWN0aW9uSW5mbyBtdXN0IGJlIHNldCB0byBGSU5BTCEnO1xuICAgIH0gZWxzZSBpZiAoIXBheW1lbnREYXRhUmVxdWVzdFsndHJhbnNhY3Rpb25JbmZvJ11bJ3RyYW5zYWN0aW9uTm90ZSddKSB7XG4gICAgICByZXR1cm4gJ3RyYW5zYWN0aW9uTm90ZSBpbiB0cmFuc2FjdGlvbkluZm8gbXVzdCBiZSBzZXQhJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyB1cGkgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGlmIGl0IGV4aXN0cyBpbiBhbGxvd2VkIHBheW1lbnQgbWV0aG9kc1xuICogb3IgbnVsbCBpZiBpdCBkb2Vzbid0XG4gKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcmV0dXJuIHs/T2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRVcGlQYXltZW50TWV0aG9kKHJlcXVlc3QpIHtcbiAgaWYgKCFjaHJvbWVTdXBwb3J0c1BheW1lbnRSZXF1ZXN0KCkgfHwgcmVxdWVzdC5hcGlWZXJzaW9uIDwgMiB8fFxuICAgICAgIXJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGdldEFsbG93ZWRQYXltZW50TWV0aG9kRm9yVHlwZV8ocmVxdWVzdCwgQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuVVBJKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBwYXJhbWV0ZXJzIGZvciBzd2cuXG4gKlxuICogQHBhcmFtIHs/U3dnUGFyYW1ldGVyc30gc3dnUGFyYW1ldGVyc1xuICogQHJldHVybiB7P3N0cmluZ30gZXJyb3JNZXNzYWdlIGlmIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUGF5bWVudERhdGFSZXF1ZXN0Rm9yU3dnKHN3Z1BhcmFtZXRlcnMpIHtcbiAgaWYgKCFzd2dQYXJhbWV0ZXJzKSB7XG4gICAgcmV0dXJuICdTd2cgcGFyYW1ldGVycyBtdXN0IGJlIHByb3ZpZGVkJztcbiAgfVxuICBpZiAoIXN3Z1BhcmFtZXRlcnMuc2t1SWQgfHwgIXN3Z1BhcmFtZXRlcnMucHVibGljYXRpb25JZCkge1xuICAgIHJldHVybiAnQm90aCBza3VJZCBhbmQgcHVibGljYXRpb25JZCBtdXN0IGJlIHByb3ZpZGVkJztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbGxvd2VkQXV0aE1ldGhvZHMgZm9yIGEgY2FyZCBmcm9tIHRoZSByZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R9IGlzUmVhZHlUb1BheVJlcXVlc3RcbiAqIEByZXR1cm4gez9BcnJheTxzdHJpbmc+fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEFsbG93ZWRBdXRoTWV0aG9kc0ZvckNhcmRzXyhpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcykge1xuICAgIGNvbnN0IGFsbG93ZWRQYXltZW50TWV0aG9kID0gZ2V0QWxsb3dlZFBheW1lbnRNZXRob2RGb3JUeXBlXyhcbiAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdCwgQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuQ0FSRCk7XG4gICAgaWYgKGFsbG93ZWRQYXltZW50TWV0aG9kICYmIGFsbG93ZWRQYXltZW50TWV0aG9kLnBhcmFtZXRlcnMpIHtcbiAgICAgIHJldHVybiBhbGxvd2VkUGF5bWVudE1ldGhvZC5wYXJhbWV0ZXJzWydhbGxvd2VkQXV0aE1ldGhvZHMnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICogQHBhcmFtIHtzdHJpbmd9IHBheW1lbnRNZXRob2RUeXBlXG4gKiBAcmV0dXJuIHs/UGF5bWVudE1ldGhvZH0gUmV0dXJuIGZpcnN0IHBheW1lbnQgbWV0aG9kIGZvciB0aGUgZ2l2ZW4gdHlwZSxcbiAqICAgICByZXR1cm4gbnVsbCBpZiBub3QgZm91bmQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRBbGxvd2VkUGF5bWVudE1ldGhvZEZvclR5cGVfKFxuICAgIGlzUmVhZHlUb1BheVJlcXVlc3QsIHBheW1lbnRNZXRob2RUeXBlKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhbGxvd2VkUGF5bWVudE1ldGhvZCA9IGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzW2ldO1xuICAgIGlmIChhbGxvd2VkUGF5bWVudE1ldGhvZC50eXBlID09IHBheW1lbnRNZXRob2RUeXBlKSB7XG4gICAgICByZXR1cm4gYWxsb3dlZFBheW1lbnRNZXRob2Q7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQge1xuICBhcGlWMkRvZXNNZXJjaGFudFN1cHBvcnRTcGVjaWZpZWRDYXJkVHlwZSxcbiAgY2hyb21lU3VwcG9ydHNQYXltZW50SGFuZGxlcixcbiAgY2hyb21lU3VwcG9ydHNQYXltZW50UmVxdWVzdCxcbiAgZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcyxcbiAgZ2V0VXBpUGF5bWVudE1ldGhvZCxcbiAgaXNQYXltZW50TWV0aG9kVmFsaWQsXG4gIHZhbGlkYXRlSXNSZWFkeVRvUGF5UmVxdWVzdCxcbiAgdmFsaWRhdGVQYXltZW50T3B0aW9ucyxcbiAgdmFsaWRhdGVQYXltZW50RGF0YVJlcXVlc3QsXG4gIHZhbGlkYXRlU2VjdXJlQ29udGV4dFxufTtcbiIsIi8qKiBAbGljZW5zZVxuTWF0aC51dWlkLmpzICh2MS40KVxuaHR0cDovL3d3dy5icm9vZmEuY29tXG5tYWlsdG86cm9iZXJ0QGJyb29mYS5jb21cbkNvcHlyaWdodCAoYykgMjAxMCBSb2JlcnQgS2llZmZlclxuRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4qL1xuXG4vKlxuICogR2VuZXJhdGUgYSByYW5kb20gdXVpZC5cbiAqXG4gKiBVU0FHRTogTWF0aC51dWlkKGxlbmd0aCwgcmFkaXgpXG4gKiAgIGxlbmd0aCAtIHRoZSBkZXNpcmVkIG51bWJlciBvZiBjaGFyYWN0ZXJzXG4gKiAgIHJhZGl4ICAtIHRoZSBudW1iZXIgb2YgYWxsb3dhYmxlIHZhbHVlcyBmb3IgZWFjaCBjaGFyYWN0ZXIuXG4gKlxuICogRVhBTVBMRVM6XG4gKiAgIC8vIE5vIGFyZ3VtZW50cyAgLSByZXR1cm5zIFJGQzQxMjIsIHZlcnNpb24gNCBJRFxuICogICA+Pj4gTWF0aC51dWlkKClcbiAqICAgXCI5MjMyOUQzOS02RjVDLTQ1MjAtQUJGQy1BQUI2NDU0NEUxNzJcIlxuICpcbiAqICAgLy8gT25lIGFyZ3VtZW50IC0gcmV0dXJucyBJRCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aFxuICogICA+Pj4gTWF0aC51dWlkKDE1KSAgICAgLy8gMTUgY2hhcmFjdGVyIElEIChkZWZhdWx0IGJhc2U9NjIpXG4gKiAgIFwiVmN5ZHhnbHR4clZaU1RWXCJcbiAqXG4gKiAgIC8vIFR3byBhcmd1bWVudHMgLSByZXR1cm5zIElEIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLCBhbmQgcmFkaXguIChSYWRpeCBtdXN0IGJlIDw9IDYyKVxuICogICA+Pj4gTWF0aC51dWlkKDgsIDIpICAvLyA4IGNoYXJhY3RlciBJRCAoYmFzZT0yKVxuICogICBcIjAxMDAxMDEwXCJcbiAqICAgPj4+IE1hdGgudXVpZCg4LCAxMCkgLy8gOCBjaGFyYWN0ZXIgSUQgKGJhc2U9MTApXG4gKiAgIFwiNDc0NzMwNDZcIlxuICogICA+Pj4gTWF0aC51dWlkKDgsIDE2KSAvLyA4IGNoYXJhY3RlciBJRCAoYmFzZT0xNilcbiAqICAgXCIwOThGNEQzNVwiXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZG9tX3V1aWQge307XG4gIC8vIFByaXZhdGUgYXJyYXkgb2YgY2hhcnMgdG8gdXNlXG4gIHZhciBDSEFSUyA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicuc3BsaXQoJycpO1xuXG4gIFJhbmRvbV91dWlkLnV1aWQgPSBmdW5jdGlvbiAobGVuLCByYWRpeCkge1xuICAgIHZhciBjaGFycyA9IENIQVJTLCB1dWlkID0gW10sIGk7XG4gICAgcmFkaXggPSByYWRpeCB8fCBjaGFycy5sZW5ndGg7XG5cbiAgICBpZiAobGVuKSB7XG4gICAgICAvLyBDb21wYWN0IGZvcm1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgdXVpZFtpXSA9IGNoYXJzWzAgfCBNYXRoLnJhbmRvbSgpKnJhZGl4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmZjNDEyMiwgdmVyc2lvbiA0IGZvcm1cbiAgICAgIHZhciByO1xuXG4gICAgICAvLyByZmM0MTIyIHJlcXVpcmVzIHRoZXNlIGNoYXJhY3RlcnNcbiAgICAgIHV1aWRbOF0gPSB1dWlkWzEzXSA9IHV1aWRbMThdID0gdXVpZFsyM10gPSAnLSc7XG4gICAgICB1dWlkWzE0XSA9ICc0JztcblxuICAgICAgLy8gRmlsbCBpbiByYW5kb20gZGF0YS4gIEF0IGk9PTE5IHNldCB0aGUgaGlnaCBiaXRzIG9mIGNsb2NrIHNlcXVlbmNlIGFzXG4gICAgICAvLyBwZXIgcmZjNDEyMiwgc2VjLiA0LjEuNVxuICAgICAgZm9yIChpID0gMDsgaSA8IDM2OyBpKyspIHtcbiAgICAgICAgaWYgKCF1dWlkW2ldKSB7XG4gICAgICAgICAgciA9IDAgfCBNYXRoLnJhbmRvbSgpKjE2O1xuICAgICAgICAgIHV1aWRbaV0gPSBjaGFyc1soaSA9PSAxOSkgPyAociAmIDB4MykgfCAweDggOiByXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1dWlkLmpvaW4oJycpO1xuICB9O1xuXG4gIC8vIEEgbW9yZSBwZXJmb3JtYW50LCBidXQgc2xpZ2h0bHkgYnVsa2llciwgUkZDNDEyMnY0IHNvbHV0aW9uLiAgV2UgYm9vc3QgcGVyZm9ybWFuY2VcbiAgLy8gYnkgbWluaW1pemluZyBjYWxscyB0byByYW5kb20oKVxuICBSYW5kb21fdXVpZC51dWlkRmFzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjaGFycyA9IENIQVJTLCB1dWlkID0gbmV3IEFycmF5KDM2KSwgcm5kPTAsIHI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzNjsgaSsrKSB7XG4gICAgICBpZiAoaT09OCB8fCBpPT0xMyB8fCAgaT09MTggfHwgaT09MjMpIHtcbiAgICAgICAgdXVpZFtpXSA9ICctJztcbiAgICAgIH0gZWxzZSBpZiAoaT09MTQpIHtcbiAgICAgICAgdXVpZFtpXSA9ICc0JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChybmQgPD0gMHgwMikgcm5kID0gMHgyMDAwMDAwICsgKE1hdGgucmFuZG9tKCkqMHgxMDAwMDAwKXwwO1xuICAgICAgICByID0gcm5kICYgMHhmO1xuICAgICAgICBybmQgPSBybmQgPj4gNDtcbiAgICAgICAgdXVpZFtpXSA9IGNoYXJzWyhpID09IDE5KSA/IChyICYgMHgzKSB8IDB4OCA6IHJdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXVpZC5qb2luKCcnKTtcbiAgfTtcblxuICAvLyBBIG1vcmUgY29tcGFjdCwgYnV0IGxlc3MgcGVyZm9ybWFudCwgUkZDNDEyMnY0IHNvbHV0aW9uOlxuICBSYW5kb21fdXVpZC51dWlkQ29tcGFjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSoxNnwwLCB2ID0gYyA9PSAneCcgPyByIDogKHImMHgzfDB4OCk7XG4gICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG4gIH07XG4iXX0="}