{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/css/components/dialog.css.js","build/css/ui/ui.css.js","node_modules/promise-pjs/promise.js","node_modules/web-activities/activity-ports.js","src/api/basic-subscriptions.js","src/api/client-event-manager-api.js","src/api/deferred-account-creation.js","src/api/entitlements.js","src/api/logger-api.js","src/api/metering.js","src/api/offer.js","src/api/propensity-api.js","src/api/subscribe-response.js","src/api/subscriptions.js","src/api/user-data.js","src/components/activities.js","src/components/dialog-manager.js","src/components/dialog.js","src/components/friendly-iframe.js","src/components/graypane.js","src/components/view.js","src/i18n/strings.js","src/i18n/swg-strings.js","src/main.js","src/model/auto-prompt-config.js","src/model/client-config.js","src/model/doc.js","src/model/page-config-resolver.js","src/model/page-config.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/object-values.js","src/polyfills/promise.js","src/proto/api_messages.js","src/runtime/analytics-service.js","src/runtime/button-api.js","src/runtime/callbacks.js","src/runtime/client-config-manager.js","src/runtime/client-event-manager.js","src/runtime/contributions-flow.js","src/runtime/deferred-account-flow.js","src/runtime/deps.js","src/runtime/entitlements-manager.js","src/runtime/event-type-mapping.js","src/runtime/experiment-flags.js","src/runtime/experiments.js","src/runtime/fetcher.js","src/runtime/jserror.js","src/runtime/link-accounts-flow.js","src/runtime/logger.js","src/runtime/login-notification-api.js","src/runtime/login-prompt-api.js","src/runtime/meter-toast-api.js","src/runtime/offers-api.js","src/runtime/offers-flow.js","src/runtime/pay-client.js","src/runtime/pay-flow.js","src/runtime/propensity-server.js","src/runtime/propensity.js","src/runtime/runtime.js","src/runtime/services.js","src/runtime/smart-button-api.js","src/runtime/storage.js","src/runtime/wait-for-subscription-lookup-api.js","src/ui/activity-iframe-view.js","src/ui/loading-view.js","src/ui/toast.js","src/utils/activity-utils.js","src/utils/animation.js","src/utils/bytes.js","src/utils/constants.js","src/utils/date-utils.js","src/utils/document-ready.js","src/utils/dom.js","src/utils/error-logger.js","src/utils/errors.js","src/utils/gaa.js","src/utils/i18n.js","src/utils/json.js","src/utils/jwt.js","src/utils/log.js","src/utils/object.js","src/utils/preconnect.js","src/utils/random.js","src/utils/string.js","src/utils/style.js","src/utils/types.js","src/utils/url.js","src/utils/xhr.js","third_party/gpay/src/constants.js","third_party/gpay/src/element_injector.js","third_party/gpay/src/graypane.js","third_party/gpay/src/pay_frame_helper.js","third_party/gpay/src/payjs_async.js","third_party/gpay/src/payments_client_delegate_interface.js","third_party/gpay/src/payments_request_delegate.js","third_party/gpay/src/payments_web_activity_delegate.js","third_party/gpay/src/post_message_service.js","third_party/gpay/src/upi_handler.js","third_party/gpay/src/utils.js","third_party/gpay/src/validator.js","third_party/gpay/third_party/random_uuid/Random.uuid.js"],"names":[],"mappings":"AAAA;;;;;;;ACAO,IAAM,GAAG,GAAG,u4BAAZ;;;;;;;;;;ACAA,IAAM,GAAG,GAAG,+2CAAZ;;;;ACAP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC9wDA;;AACA;;;;;;;;AAEA;AACA;AACA;AACA;IACa,kB;;;;;;;;AACX;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,kBAAK,MAAL,EAAa,CAAE;AAEf;AACF;AACA;AACA;AACA;;;;WACE,mCAA0B,QAA1B,EAAoC,CAAE;AAEtC;AACF;AACA;AACA;AACA;;;;WACE,8BAAqB,QAArB,EAA+B,CAAE;AAEjC;AACF;AACA;AACA;AACA;;;;WACE,2BAAkB,QAAlB,EAA4B,CAAE;AAE9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,gCAAuB,OAAvB,EAAgC,CAAE;AAElC;AACF;AACA;AACA;AACA;;;;WACE,wBAAe,CAAE;;;;;AAGnB;;;;AACO,IAAM,cAAc,GAAG;AAC5B,EAAA,IAAI,EAAE,MADsB;AAE5B,EAAA,YAAY,EAAE,cAFc;AAG5B,EAAA,YAAY,EAAE;AAHc,CAAvB;AAMP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,aAAJ;AAEP;AACA;AACA;AACA;AACA;;;AACO,IAAI,YAAJ;AAEP;;;AACO,IAAM,WAAW,GAAG;AACzB,EAAA,KAAK,EAAE,OADkB;AAEzB,EAAA,IAAI,EAAE;AAFmB,CAApB;;;;;;;;;;;ACpGP;;;;;;;;AAEA;AACO,IAAM,YAAY,GAAG;AAC1B;AACA,EAAA,aAAa,EAAE,CAFW;;AAG1B;AACA,EAAA,YAAY,EAAE;AAJY,CAArB;AAOP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,WAAJ;AAEP;AACA;AACA;;;;IACa,qB;;;;;;;;AACX;AACF;AACA;AACA;AACA;AACE,mCAAsB,QAAtB,EAAgC,CAAE;AAElC;AACF;AACA;AACA;AACA;AACA;AACA;;;;WACE,+BAAsB,QAAtB,EAAgC,CAAE;AAElC;AACF;AACA;AACA;AACA;AACA;AACA;;;;WACE,kBAAS,KAAT,EAAgB,CAAE;;;;;;;;;;;;;;;;ACvDpB;;AACA;;AACA;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAI,8BAAJ;AAEP;AACA;;;;IACa,+B;AACX;AACF;AAC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,EAAA,kBAAkB,EAAE,SAfD;;AAgBnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,aAAa,EAAE,UA9BI;;AA+BnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,iBAAiB,EAAE,cAlEA;;AAmEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,iCAAiC,EAAE,4BAjGhB;;AAkGnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,qBAAqB,EAAE,gBAhHJ;;AAiHnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,2BAA2B,EAAE,oBA9HV;;AA+HnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,wBAAwB,EAAE,kBA5IP;;AA6InB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,YAAY,EAAE;AA7JK,CAAd;AAgKP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,cAAJ;AAEP;AACA;AACA;;;;IACa,S;;;;;;;;AACX;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,uBAAU,SAAV,EAAqB,CAAE;AAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,+BAAsB,KAAtB,EAA6B,YAA7B,EAA2C,CAAE;;;;;;;;;;;;;;;;AC3P/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO,IAAM,gBAAgB,GAAG;AAC9B;AACA,EAAA,kBAAkB,EAAE;AAFU,CAAzB;;;;;;;;;;;;;ACjBP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;IACa,K;AAEX;AACF;AACA;AACA;AACA;AACA;AACE,eAAY,KAAZ,EAAmB,KAAnB,EAA0B,WAA1B,EAAuC,KAAvC,EAA8C;AAAA;;AAC5C;AACA,OAAK,KAAL,GAAa,KAAb;AACA;;AACA,OAAK,KAAL,GAAa,KAAb;AACA;;AACA,OAAK,WAAL,GAAmB,WAAnB;AACA;;AACA,OAAK,KAAL,GAAa,KAAb;AACD,C;;;;;;;;;;;;;;ACrBH;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACO,IAAM,cAAc,GAAG;AAC5B;AACA,EAAA,OAAO,EAAE,SAFmB;AAG5B;AACA,EAAA,OAAO,EAAE;AAJmB,CAAvB;AAOP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,KAAJ;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,WAAJ;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,IAAJ;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,MAAJ;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,IAAI,eAAJ;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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;AACA;AACA;AACA;;;;WACE,6BAAoB,OAApB,EAA6B,CAAE;AAE/B;AACF;AACA;AACA;AACA;;;;WACE,wBAAe,OAAf,EAAwB,CAAE;AAE1B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,iCAAwB,OAAxB,EAAiC,CAAE;AAEnC;AACF;AACA;AACA;AACA;AACA;;;;WACE,qCAA4B,QAA5B,EAAsC,CAAE;AAExC;AACF;AACA;AACA;AACA;;;;WACE,gCAAuB,QAAvB,EAAiC,CAAE;AAEnC;AACF;AACA;AACA;AACA;;;;WACE,mBAAU,GAAV,EAAe,CAAE;AAEjB;AACF;AACA;AACA;AACA;;;;WACE,4BAAmB,mBAAnB,EAAwC,CAAE;AAE1C;AACF;AACA;AACA;AACA;;;;WACE,mCAA0B,QAA1B,EAAoC,CAAE;AAEtC;AACF;AACA;AACA;AACA;;;;WACE,8BAAqB,QAArB,EAA+B,CAAE;AAEjC;AACF;AACA;AACA;AACA;;;;WACE,oBAAW,wBAAX,EAAqC,CAAE;AAEvC;AACF;AACA;AACA;AACA;AACA;;;;WACE,yCAAgC,OAAhC,EAAyC,CAAE;AAE3C;AACF;AACA;AACA;;;;WACE,2BAAkB,QAAlB,EAA4B,CAAE;AAE9B;AACF;AACA;AACA;;;;WACE,6BAAoB,OAApB,EAA6B,CAAE;AAE/B;AACF;AACA;AACA;;;;WACE,2BAAkB,CAAE;AAEpB;AACF;AACA;AACA;;;;WACE,iCAAwB,CAAE;AAE1B;AACF;AACA;AACA;;;;WACE,2BAAkB,QAAlB,EAA4B,CAAE;AAE9B;AACF;AACA;AACA;;;;WACE,mCAA0B,cAA1B,EAA0C,CAAE;AAE5C;AACF;AACA;AACA;AACA;AACA;;;;WACE,qBAAY,MAAZ,EAAoB,CAAE;AAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,0BAAiB,QAAjB,EAA2B,CAAE;AAE7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,2BAAkB,QAAlB,EAA4B,C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","file":"subscriptions.max.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export const CSS = \".swg-dialog,.swg-toast{background-color:#fff!important;box-sizing:border-box}.swg-toast{border:none!important;bottom:0!important;max-height:46px!important;position:fixed!important;z-index:2147483647!important}@media (max-height:640px),(max-width:640px){.swg-dialog,.swg-toast{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important;left:-240px!important;margin-left:50vw!important;width:480px!important}}@media (min-width:640px) and (min-height:640px){.swg-dialog{background-color:transparent!important;border:none!important;left:-315px!important;margin-left:50vw!important;width:630px!important}.swg-toast{left:0!important}}@media (max-width:480px){.swg-dialog,.swg-toast{left:0!important;margin-left:0!important;right:0!important;width:100%!important}}\\n/*# sourceURL=/./src/components/dialog.css*/\";","export const CSS = \"body{margin:0;padding:0}swg-container,swg-loading,swg-loading-animate,swg-loading-image{display:block}swg-loading-container{-ms-flex-align:center!important;-ms-flex-pack:center!important;align-items:center!important;bottom:0!important;display:-ms-flexbox!important;display:flex!important;height:100%!important;justify-content:center!important;margin-top:5px!important;min-height:148px!important;width:100%!important;z-index:2147483647!important}@media (min-height:630px),(min-width:630px){swg-loading-container{background-color:#fff!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important;margin-left:35px!important;width:560px!important}}swg-loading{animation:mspin-rotate 1568.63ms linear infinite;height:36px;overflow:hidden;width:36px;z-index:2147483647!important}swg-loading-animate{animation:mspin-revrot 5332ms steps(4) infinite}swg-loading-image{animation:swg-loading-film 5332ms steps(324) infinite;background-image:url($assets$/loader.svg);background-size:100%;height:36px;width:11664px}@keyframes swg-loading-film{0%{transform:translateX(0)}to{transform:translateX(-11664px)}}@keyframes mspin-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes mspin-revrot{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}\\n/*# sourceURL=/./src/ui/ui.css*/\";","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid a promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid a promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid a promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // If we're adopting another promise, it's not the end of the promise chain,\n  // the new promise is.\n  if (adoptee) {\n    adoptee._isChainEnd = false;\n  }\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * @license\n * Copyright 2017 The Web Activities Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n /** Version: 1.24 */\n'use strict';\n\n/*eslint no-unused-vars: 0*/\n\n\n/**\n * @enum {string}\n */\nconst ActivityMode = {\n  IFRAME: 'iframe',\n  POPUP: 'popup',\n  REDIRECT: 'redirect',\n};\n\n\n/**\n * The result code used for `ActivityResult`.\n * @enum {string}\n */\nconst ActivityResultCode = {\n  OK: 'ok',\n  CANCELED: 'canceled',\n  FAILED: 'failed',\n};\n\n\n/**\n * The result of an activity. The activity implementation returns this object\n * for a successful result, a cancelation or a failure.\n * @struct\n */\nclass ActivityResult {\n  /**\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @param {!ActivityMode} mode\n   * @param {string} origin\n   * @param {boolean} originVerified\n   * @param {boolean} secureChannel\n   */\n  constructor(code, data, mode, origin, originVerified, secureChannel) {\n    /** @const {!ActivityResultCode} */\n    this.code = code;\n    /** @const {*} */\n    this.data = code == ActivityResultCode.OK ? data : null;\n    /** @const {!ActivityMode} */\n    this.mode = mode;\n    /** @const {string} */\n    this.origin = origin;\n    /** @const {boolean} */\n    this.originVerified = originVerified;\n    /** @const {boolean} */\n    this.secureChannel = secureChannel;\n    /** @const {boolean} */\n    this.ok = code == ActivityResultCode.OK;\n    /** @const {?Error} */\n    this.error = code == ActivityResultCode.FAILED ?\n        new Error(String(data) || '') :\n        null;\n  }\n}\n\n\n/**\n * The activity request that different types of hosts can be started with.\n * @typedef {{\n *   requestId: string,\n *   returnUrl: string,\n *   args: ?Object,\n *   origin: (string|undefined),\n *   originVerified: (boolean|undefined),\n * }}\n */\nlet ActivityRequest;\n\n\n/**\n * The activity \"open\" options used for popups and redirects.\n *\n * - returnUrl: override the return URL. By default, the current URL will be\n *   used.\n * - skipRequestInUrl: removes the activity request from the URL, in case\n *   redirect is used. By default, the activity request is appended to the\n *   activity URL. This option can be used if the activity request is passed\n *   to the activity by some alternative means.\n * - disableRedirectFallback: disallows popup fallback to redirect. By default\n *   the redirect fallback is allowed. This option has to be used very carefully\n *   because there are many user agents that may fail to open a popup and it\n *   won't be always possible for the opener window to even be aware of such\n *   failures.\n *\n * @typedef {{\n *   returnUrl: (string|undefined),\n *   skipRequestInUrl: (boolean|undefined),\n *   disableRedirectFallback: (boolean|undefined),\n *   width: (number|undefined),\n *   height: (number|undefined),\n * }}\n */\nlet ActivityOpenOptions;\n\n\n/**\n * Activity client-side binding. The port provides limited ways to communicate\n * with the activity and receive signals and results from it. Not every type\n * of activity exposes a port.\n *\n * @interface\n */\nclass ActivityPort {\n\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!ActivityMode}\n   */\n  getMode() {}\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!ActivityResult>}\n   */\n  acceptResult() {}\n}\n\n\n/**\n * Activity client-side binding for messaging.\n *\n * Whether the host can or cannot receive a message depends on the type of\n * host and its state. Ensure that the code has an alternative path if\n * messaging is not available.\n *\n * @interface\n */\nclass ActivityMessagingPort {\n\n  /**\n   * Returns the target window where host is loaded. May be unavailable.\n   * @return {?Window}\n   */\n  getTargetWin() {}\n\n  /**\n   * Sends a message to the host.\n   * @param {!Object} payload\n   */\n  message(payload) {}\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * @param {function(!Object)} callback\n   */\n  onMessage(callback) {}\n\n  /**\n   * Creates a new communication channel or returns an existing one.\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  messageChannel(opt_name) {}\n}\n\n\n\n/** DOMException.ABORT_ERR name */\nconst ABORT_ERR_NAME = 'AbortError';\n\n/** DOMException.ABORT_ERR = 20 */\nconst ABORT_ERR_CODE = 20;\n\n/** @type {?HTMLAnchorElement} */\nlet aResolver;\n\n\n/**\n * @param {string} urlString\n * @return {!HTMLAnchorElement}\n */\nfunction parseUrl(urlString) {\n  if (!aResolver) {\n    aResolver = /** @type {!HTMLAnchorElement} */ (document.createElement('a'));\n  }\n  aResolver.href = urlString;\n  return /** @type {!HTMLAnchorElement} */ (aResolver);\n}\n\n\n/**\n * @param {!Location|!URL|!HTMLAnchorElement} loc\n * @return {string}\n */\nfunction getOrigin(loc) {\n  if (loc.origin) {\n    return loc.origin;\n  }\n  // Make sure that the origin is normalized. Specifically on IE, host sometimes\n  // includes the default port, which is not per standard.\n  const protocol = loc.protocol;\n  let host = loc.host;\n  if (protocol == 'https:' && host.indexOf(':443') == host.length - 4) {\n    host = host.replace(':443', '');\n  } else if (protocol == 'http:' && host.indexOf(':80') == host.length - 3) {\n    host = host.replace(':80', '');\n  }\n  return protocol + '//' + host;\n}\n\n\n/**\n * @param {string} urlString\n * @return {string}\n */\nfunction getOriginFromUrl(urlString) {\n  return getOrigin(parseUrl(urlString));\n}\n\n\n/**\n * @param {string} urlString\n * @return {string}\n */\nfunction removeFragment(urlString) {\n  const index = urlString.indexOf('#');\n  if (index == -1) {\n    return urlString;\n  }\n  return urlString.substring(0, index);\n}\n\n\n/**\n * Parses and builds Object of URL query string.\n * @param {string} query The URL query string.\n * @return {!Object<string, string>}\n */\nfunction parseQueryString(query) {\n  if (!query) {\n    return {};\n  }\n  return (/^[?#]/.test(query) ? query.slice(1) : query)\n      .split('&')\n      .reduce((params, param) => {\n        const item = param.split('=');\n        const key = decodeURIComponent(item[0] || '');\n        const value = decodeURIComponent(item[1] || '');\n        if (key) {\n          params[key] = value;\n        }\n        return params;\n      }, {});\n}\n\n\n/**\n * @param {string} queryString  A query string in the form of \"a=b&c=d\". Could\n *   be optionally prefixed with \"?\" or \"#\".\n * @param {string} param The param to get from the query string.\n * @return {?string}\n */\nfunction getQueryParam(queryString, param) {\n  return parseQueryString(queryString)[param];\n}\n\n\n/**\n * Add a query-like parameter to the fragment string.\n * @param {string} url\n * @param {string} param\n * @param {string} value\n * @return {string}\n */\nfunction addFragmentParam(url, param, value) {\n  return url +\n      (url.indexOf('#') == -1 ? '#' : '&') +\n      encodeURIComponent(param) + '=' + encodeURIComponent(value);\n}\n\n\n/**\n * @param {string} queryString  A query string in the form of \"a=b&c=d\". Could\n *   be optionally prefixed with \"?\" or \"#\".\n * @param {string} param The param to remove from the query string.\n * @return {?string}\n */\nfunction removeQueryParam(queryString, param) {\n  if (!queryString) {\n    return queryString;\n  }\n  const search = encodeURIComponent(param) + '=';\n  let index = -1;\n  do {\n    index = queryString.indexOf(search, index);\n    if (index != -1) {\n      const prev = index > 0 ? queryString.substring(index - 1, index) : '';\n      if (prev == '' || prev == '?' || prev == '#' || prev == '&') {\n        let end = queryString.indexOf('&', index + 1);\n        if (end == -1) {\n          end = queryString.length;\n        }\n        queryString =\n            queryString.substring(0, index) +\n            queryString.substring(end + 1);\n      } else {\n        index++;\n      }\n    }\n  } while (index != -1 && index < queryString.length);\n  return queryString;\n}\n\n\n/**\n * @param {!ActivityRequest} request\n * @return {string}\n */\nfunction serializeRequest(request) {\n  const map = {\n    'requestId': request.requestId,\n    'returnUrl': request.returnUrl,\n    'args': request.args,\n  };\n  if (request.origin !== undefined) {\n    map['origin'] = request.origin;\n  }\n  if (request.originVerified !== undefined) {\n    map['originVerified'] = request.originVerified;\n  }\n  return JSON.stringify(map);\n}\n\n\n/**\n * @param {*} error\n * @return {boolean}\n */\nfunction isAbortError(error) {\n  if (!error || typeof error != 'object') {\n    return false;\n  }\n  return (error['name'] === ABORT_ERR_NAME);\n}\n\n\n/**\n * Creates or emulates a DOMException of AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {!Window} win\n * @param {string=} opt_message\n * @return {!DOMException}\n */\nfunction createAbortError(win, opt_message) {\n  const message = 'AbortError' + (opt_message ? ': ' + opt_message : '');\n  let error = null;\n  if (typeof win['DOMException'] == 'function') {\n    // TODO(dvoytenko): remove typecast once externs are fixed.\n    const constr = /** @type {function(new:DOMException, string, string)} */ (\n        win['DOMException']);\n    try {\n      error = new constr(message, ABORT_ERR_NAME);\n    } catch (e) {\n      // Ignore. In particular, `new DOMException()` fails in Edge.\n    }\n  }\n  if (!error) {\n    // TODO(dvoytenko): remove typecast once externs are fixed.\n    const constr = /** @type {function(new:DOMException, string)} */ (\n        Error);\n    error = new constr(message);\n    error.name = ABORT_ERR_NAME;\n    error.code = ABORT_ERR_CODE;\n  }\n  return error;\n}\n\n\n/**\n * Resolves the activity result as a promise:\n *  - `OK` result is yielded as the promise's payload;\n *  - `CANCEL` result is rejected with the `AbortError`;\n *  - `FAILED` result is rejected with the embedded error.\n *\n * @param {!Window} win\n * @param {!ActivityResult} result\n * @param {function((!ActivityResult|!Promise))} resolver\n */\nfunction resolveResult(win, result, resolver) {\n  if (result.ok) {\n    resolver(result);\n  } else {\n    const error = result.error || createAbortError(win);\n    error.activityResult = result;\n    resolver(Promise.reject(error));\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIeBrowser(win) {\n  // MSIE and Trident are typical user agents for IE browsers.\n  const nav = win.navigator;\n  return /Trident|MSIE|IEMobile/i.test(nav && nav.userAgent);\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isEdgeBrowser(win) {\n  const nav = win.navigator;\n  return /Edge/i.test(nav && nav.userAgent);\n}\n\n\n/**\n * @param {!Error} e\n */\nfunction throwAsync(e) {\n  setTimeout(() => {throw e;});\n}\n\n\n/**\n * Polyfill of the `Node.isConnected` API. See\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected.\n * @param {!Node} node\n * @return {boolean}\n */\nfunction isNodeConnected(node) {\n  // Ensure that node is attached if specified. This check uses a new and\n  // fast `isConnected` API and thus only checked on platforms that have it.\n  // See https://www.chromestatus.com/feature/5676110549352448.\n  if ('isConnected' in node) {\n    return node['isConnected'];\n  }\n  // Polyfill.\n  const root = node.ownerDocument && node.ownerDocument.documentElement;\n  return (root && root.contains(node)) || false;\n}\n\n\n\nconst SENTINEL = '__ACTIVITIES__';\n\n\n/**\n * The messenger helper for activity's port and host.\n */\nclass Messenger {\n\n  /**\n   * @param {!Window} win\n   * @param {!Window|function():?Window} targetOrCallback\n   * @param {?string} targetOrigin\n   * @param {boolean} requireTarget\n   */\n  constructor(win, targetOrCallback, targetOrigin, requireTarget) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Window|function():?Window} */\n    this.targetOrCallback_ = targetOrCallback;\n\n    /**\n     * May start as unknown (`null`) until received in the first message.\n     * @private {?string}\n     */\n    this.targetOrigin_ = targetOrigin;\n\n    /** @private @const {boolean} */\n    this.requireTarget_ = requireTarget;\n\n    /** @private {?Window} */\n    this.target_ = null;\n\n    /** @private {boolean} */\n    this.acceptsChannel_ = false;\n\n    /** @private {?MessagePort} */\n    this.port_ = null;\n\n    /** @private {?function(string, ?Object)} */\n    this.onCommand_ = null;\n\n    /** @private {?function(!Object)} */\n    this.onCustomMessage_ = null;\n\n    /**\n     * @private {?Object<string, !ChannelHolder>}\n     */\n    this.channels_ = null;\n\n    /** @private @const */\n    this.boundHandleEvent_ = this.handleEvent_.bind(this);\n  }\n\n  /**\n   * Connect the port to the host or vice versa.\n   * @param {function(string, ?Object)} onCommand\n   */\n  connect(onCommand) {\n    if (this.onCommand_) {\n      throw new Error('already connected');\n    }\n    this.onCommand_ = onCommand;\n    this.win_.addEventListener('message', this.boundHandleEvent_);\n  }\n\n  /**\n   * Disconnect messenger.\n   */\n  disconnect() {\n    if (this.onCommand_) {\n      this.onCommand_ = null;\n      if (this.port_) {\n        closePort(this.port_);\n        this.port_ = null;\n      }\n      this.win_.removeEventListener('message', this.boundHandleEvent_);\n      if (this.channels_) {\n        for (const k in this.channels_) {\n          const channelObj = this.channels_[k];\n          if (channelObj.port1) {\n            closePort(channelObj.port1);\n          }\n          if (channelObj.port2) {\n            closePort(channelObj.port2);\n          }\n        }\n        this.channels_ = null;\n      }\n    }\n  }\n\n  /**\n   * Returns whether the messenger has been connected already.\n   * @return {boolean}\n   */\n  isConnected() {\n    return this.targetOrigin_ != null;\n  }\n\n  /**\n   * Returns the messaging target. Only available when connection has been\n   * establihsed.\n   * @return {!Window}\n   */\n  getTarget() {\n    const target = this.getOptionalTarget_();\n    if (!target) {\n      throw new Error('not connected');\n    }\n    return target;\n  }\n\n  /**\n   * @return {?Window}\n   * @private\n   */\n  getOptionalTarget_() {\n    if (this.onCommand_ && !this.target_) {\n      if (typeof this.targetOrCallback_ == 'function') {\n        this.target_ = this.targetOrCallback_();\n      } else {\n        this.target_ = /** @type {!Window} */ (this.targetOrCallback_);\n      }\n    }\n    return this.target_;\n  }\n\n  /**\n   * Returns the messaging origin. Only available when connection has been\n   * establihsed.\n   * @return {string}\n   */\n  getTargetOrigin() {\n    if (this.targetOrigin_ == null) {\n      throw new Error('not connected');\n    }\n    return this.targetOrigin_;\n  }\n\n  /**\n   * The host sends this message to the client to indicate that it's ready to\n   * start communicating. The client is expected to respond back with the\n   * \"start\" command. See `sendStartCommand` method.\n   */\n  sendConnectCommand() {\n    // TODO(dvoytenko): MessageChannel is critically necessary for IE/Edge,\n    // since window messaging doesn't always work. It's also preferred as an API\n    // for other browsers: it's newer, cleaner and arguably more secure.\n    // Unfortunately, browsers currently do not propagate user gestures via\n    // MessageChannel, only via window messaging. This should be re-enabled\n    // once browsers fix user gesture propagation.\n    // See:\n    // Safari: https://bugs.webkit.org/show_bug.cgi?id=186593\n    // Chrome: https://bugs.chromium.org/p/chromium/issues/detail?id=851493\n    // Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1469422\n    const acceptsChannel = isIeBrowser(this.win_) || isEdgeBrowser(this.win_);\n    this.sendCommand('connect', {'acceptsChannel': acceptsChannel});\n  }\n\n  /**\n   * The client sends this message to the host upon receiving the \"connect\"\n   * message to start the main communication channel. As a payload, the message\n   * will contain the provided start arguments.\n   * @param {?Object} args\n   */\n  sendStartCommand(args) {\n    let channel = null;\n    if (this.acceptsChannel_ && typeof this.win_.MessageChannel == 'function') {\n      channel = new this.win_.MessageChannel();\n    }\n    if (channel) {\n      this.sendCommand('start', args, [channel.port2]);\n      // It's critical to switch to port messaging only after \"start\" has been\n      // sent. Otherwise, it won't be delivered.\n      this.switchToChannel_(channel.port1);\n    } else {\n      this.sendCommand('start', args);\n    }\n  }\n\n  /**\n   * Sends the specified command from the port to the host or vice versa.\n   * @param {string} cmd\n   * @param {?Object=} opt_payload\n   * @param {?Array=} opt_transfer\n   */\n  sendCommand(cmd, opt_payload, opt_transfer) {\n    const data = {\n      'sentinel': SENTINEL,\n      'cmd': cmd,\n      'payload': opt_payload || null,\n    };\n    if (this.port_) {\n      this.port_.postMessage(data, opt_transfer || undefined);\n    } else {\n      const target = this.getTarget();\n      // Only \"connect\" command is allowed to use `targetOrigin == '*'`\n      const targetOrigin =\n          cmd == 'connect' ?\n          (this.targetOrigin_ != null ? this.targetOrigin_ : '*') :\n          this.getTargetOrigin();\n      target.postMessage(data, targetOrigin, opt_transfer || undefined);\n    }\n  }\n\n  /**\n   * Sends a message to the client.\n   * @param {!Object} payload\n   */\n  customMessage(payload) {\n    this.sendCommand('msg', payload);\n  }\n\n  /**\n   * Registers a callback to receive messages from the client.\n   * @param {function(!Object)} callback\n   */\n  onCustomMessage(callback) {\n    this.onCustomMessage_ = callback;\n  }\n\n  /**\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  startChannel(opt_name) {\n    const name = opt_name || '';\n    const channelObj = this.getChannelObj_(name);\n    if (!channelObj.port1) {\n      const channel = new this.win_.MessageChannel();\n      channelObj.port1 = channel.port1;\n      channelObj.port2 = channel.port2;\n      channelObj.resolver(channelObj.port1);\n    }\n    if (channelObj.port2) {\n      // Not yet sent.\n      this.sendCommand('cnset', {'name': name}, [channelObj.port2]);\n      channelObj.port2 = null;\n    }\n    return channelObj.promise;\n  }\n\n  /**\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  askChannel(opt_name) {\n    const name = opt_name || '';\n    const channelObj = this.getChannelObj_(name);\n    if (!channelObj.port1) {\n      this.sendCommand('cnget', {'name': name});\n    }\n    return channelObj.promise;\n  }\n\n  /**\n   * @param {string} name\n   * @param {!MessagePort} port\n   * @private\n   */\n  receiveChannel_(name, port) {\n    const channelObj = this.getChannelObj_(name);\n    channelObj.port1 = port;\n    channelObj.resolver(port);\n  }\n\n  /**\n   * @param {string} name\n   * @return {!ChannelHolder}\n   */\n  getChannelObj_(name) {\n    if (!this.channels_) {\n      this.channels_ = {};\n    }\n    let channelObj = this.channels_[name];\n    if (!channelObj) {\n      let resolver;\n      const promise = new Promise(resolve => {\n        resolver = resolve;\n      });\n      channelObj = {\n        port1: null,\n        port2: null,\n        resolver,\n        promise,\n      };\n      this.channels_[name] = channelObj;\n    }\n    return channelObj;\n  }\n\n  /**\n   * @param {!MessagePort} port\n   * @private\n   */\n  switchToChannel_(port) {\n    if (this.port_) {\n      closePort(this.port_);\n    }\n    this.port_ = port;\n    this.port_.onmessage = event => {\n      const data = event.data;\n      const cmd = data && data['cmd'];\n      const payload = data && data['payload'] || null;\n      if (cmd) {\n        this.handleCommand_(cmd, payload, event);\n      }\n    };\n    // Even though all messaging will switch to ports, the window-based message\n    // listener will be preserved just in case the host is refreshed and needs\n    // another connection.\n  }\n\n  /**\n   * @param {!MessageEvent} event\n   * @private\n   */\n  handleEvent_(event) {\n    if (this.requireTarget_ && this.getOptionalTarget_() != event.source) {\n      // When target is required, confirm it against the event.source. This\n      // is normally only needed for ports where a single window can include\n      // multiple iframes to match the event to a specific iframe. Otherwise,\n      // the origin checks below are sufficient.\n      return;\n    }\n    const data = event.data;\n    if (!data || data['sentinel'] != SENTINEL) {\n      return;\n    }\n    const cmd = data['cmd'];\n    if (this.port_ && cmd != 'connect' && cmd != 'start') {\n      // Messaging channel has already taken over. However, the \"connect\" and\n      // \"start\" commands are allowed to proceed in case re-connection is\n      // requested.\n      return;\n    }\n    const origin = /** @type {string} */ (event.origin);\n    const payload = data['payload'] || null;\n    if (this.targetOrigin_ == null && cmd == 'start') {\n      this.targetOrigin_ = origin;\n    }\n    if (this.targetOrigin_ == null && event.source) {\n      if (this.getOptionalTarget_() == event.source) {\n        this.targetOrigin_ = origin;\n      }\n    }\n    // Notice that event.source may differ from the target because of\n    // friendly-iframe intermediaries.\n    if (origin != this.targetOrigin_) {\n      return;\n    }\n    this.handleCommand_(cmd, payload, event);\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @param {!MessageEvent} event\n   * @private\n   */\n  handleCommand_(cmd, payload, event) {\n    if (cmd == 'connect') {\n      if (this.port_) {\n        // In case the port has already been open - close it to reopen it\n        // again later.\n        closePort(this.port_);\n        this.port_ = null;\n      }\n      this.acceptsChannel_ = payload && payload['acceptsChannel'] || false;\n      this.onCommand_(cmd, payload);\n    } else if (cmd == 'start') {\n      const port = event.ports && event.ports[0];\n      if (port) {\n        this.switchToChannel_(port);\n      }\n      this.onCommand_(cmd, payload);\n    } else if (cmd == 'msg') {\n      if (this.onCustomMessage_ != null && payload != null) {\n        this.onCustomMessage_(payload);\n      }\n    } else if (cmd == 'cnget') {\n      const name = payload['name'];\n      this.startChannel(name);\n    } else if (cmd == 'cnset') {\n      const name = payload['name'];\n      const port = event.ports[0];\n      this.receiveChannel_(name, /** @type {!MessagePort} */ (port));\n    } else {\n      this.onCommand_(cmd, payload);\n    }\n  }\n}\n\n\n/**\n * @param {!MessagePort} port\n */\nfunction closePort(port) {\n  try {\n    port.close();\n  } catch (e) {\n    // Ignore.\n  }\n}\n\n\n\n\n/**\n * The `ActivityPort` implementation for the iframe case. Unlike other types\n * of activities, iframe-based activities are always connected and can react\n * to size requests.\n *\n * @implements {ActivityPort}\n * @implements {ActivityMessagingPort}\n */\nclass ActivityIframePort {\n\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   */\n  constructor(iframe, url, opt_args) {\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = iframe;\n    /** @private @const {string} */\n    this.url_ = url;\n    /** @private @const {?Object} */\n    this.args_ = opt_args || null;\n\n    /** @private @const {!Window} */\n    this.win_ = /** @type {!Window} */ (this.iframe_.ownerDocument.defaultView);\n\n    /** @private @const {string} */\n    this.targetOrigin_ = getOriginFromUrl(url);\n\n    /** @private {boolean} */\n    this.connected_ = false;\n\n    /** @private {?function()} */\n    this.connectedResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.connectedPromise_ = new Promise(resolve => {\n      this.connectedResolver_ = resolve;\n    });\n\n    /** @private {?function()} */\n    this.readyResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.readyPromise_ = new Promise(resolve => {\n      this.readyResolver_ = resolve;\n    });\n\n    /** @private {?function((!ActivityResult|!Promise))} */\n    this.resultResolver_ = null;\n\n    /** @private @const {!Promise<!ActivityResult>} */\n    this.resultPromise_ = new Promise(resolve => {\n      this.resultResolver_ = resolve;\n    });\n\n    /** @private {?function(number)} */\n    this.onResizeRequest_ = null;\n\n    /** @private {?number} */\n    this.requestedHeight_ = null;\n\n    /** @private @const {!Messenger} */\n    this.messenger_ = new Messenger(\n        this.win_,\n        () => this.iframe_.contentWindow,\n        this.targetOrigin_,\n        /* requireTarget */ true);\n  }\n\n  /** @override */\n  getMode() {\n    return ActivityMode.IFRAME;\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {\n    if (!isNodeConnected(this.iframe_)) {\n      throw new Error('iframe must be in DOM');\n    }\n    this.messenger_.connect(this.handleCommand_.bind(this));\n    this.iframe_.src = this.url_;\n    return this.connectedPromise_;\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    this.connected_ = false;\n    this.messenger_.disconnect();\n  }\n\n  /** @override */\n  acceptResult() {\n    return this.resultPromise_;\n  }\n\n  /** @override */\n  getTargetWin() {\n    return this.iframe_.contentWindow || null;\n  }\n\n  /** @override */\n  message(payload) {\n    this.messenger_.customMessage(payload);\n  }\n\n  /** @override */\n  onMessage(callback) {\n    this.messenger_.onCustomMessage(callback);\n  }\n\n  /** @override */\n  messageChannel(opt_name) {\n    return this.messenger_.askChannel(opt_name);\n  }\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.readyPromise_;\n  }\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} callback\n   */\n  onResizeRequest(callback) {\n    this.onResizeRequest_ = callback;\n    Promise.resolve().then(() => {\n      if (this.requestedHeight_ != null) {\n        callback(this.requestedHeight_);\n      }\n    });\n  }\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {\n    if (!this.connected_) {\n      return;\n    }\n    const height = this.iframe_.offsetHeight;\n    this.messenger_.sendCommand('resized', {'height': height});\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @private\n   */\n  handleCommand_(cmd, payload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.connected_ = true;\n      this.messenger_.sendStartCommand(this.args_);\n      this.connectedResolver_();\n    } else if (cmd == 'result') {\n      // The last message. Indicates that the result has been received.\n      if (this.resultResolver_) {\n        const code = /** @type {!ActivityResultCode} */ (payload['code']);\n        const data =\n            code == ActivityResultCode.FAILED ?\n            new Error(payload['data'] || '') :\n            payload['data'];\n        const result = new ActivityResult(\n            code,\n            data,\n            ActivityMode.IFRAME,\n            this.messenger_.getTargetOrigin(),\n            /* originVerified */ true,\n            /* secureChannel */ true);\n        resolveResult(this.win_, result, this.resultResolver_);\n        this.resultResolver_ = null;\n        this.messenger_.sendCommand('close');\n        this.disconnect();\n      }\n    } else if (cmd == 'ready') {\n      if (this.readyResolver_) {\n        this.readyResolver_();\n        this.readyResolver_ = null;\n      }\n    } else if (cmd == 'resize') {\n      this.requestedHeight_ = /** @type {number} */ (payload['height']);\n      if (this.onResizeRequest_) {\n        this.onResizeRequest_(this.requestedHeight_);\n      }\n    }\n  }\n}\n\n\n\n\n/**\n * The `ActivityPort` implementation for the standalone window activity\n * client executed as a popup.\n *\n * @implements {ActivityPort}\n * @implements {ActivityMessagingPort}\n */\nclass ActivityWindowPort {\n\n  /**\n   * @param {!Window} win\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   */\n  constructor(win, requestId, url, target, opt_args, opt_options) {\n    const isValidTarget =\n        target &&\n        (target == '_blank' || target == '_top' || target[0] != '_');\n    if (!isValidTarget) {\n      throw new Error('The only allowed targets are \"_blank\", \"_top\"' +\n          ' and name targets');\n    }\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {string} */\n    this.requestId_ = requestId;\n    /** @private @const {string} */\n    this.url_ = url;\n    /** @private @const {string} */\n    this.openTarget_ = target;\n    /** @private @const {?Object} */\n    this.args_ = opt_args || null;\n    /** @private @const {!ActivityOpenOptions} */\n    this.options_ = opt_options || {};\n\n    /** @private {?function()} */\n    this.connectedResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.connectedPromise_ = new Promise(resolve => {\n      this.connectedResolver_ = resolve;\n    });\n\n    /** @private {?function((!ActivityResult|!Promise))} */\n    this.resultResolver_ = null;\n\n    /** @private @const {!Promise<!ActivityResult>} */\n    this.resultPromise_ = new Promise(resolve => {\n      this.resultResolver_ = resolve;\n    });\n\n    /** @private {?Window} */\n    this.targetWin_ = null;\n\n    /** @private {?number} */\n    this.heartbeatInterval_ = null;\n\n    /** @private {?Messenger} */\n    this.messenger_ = null;\n  }\n\n  /** @override */\n  getMode() {\n    return this.openTarget_ == '_top' ?\n        ActivityMode.REDIRECT :\n        ActivityMode.POPUP;\n  }\n\n  /**\n   * Opens the activity in a window, either as a popup or via redirect.\n   *\n   * Returns the promise that will yield when the window returns or closed.\n   * Notice, that this promise may never complete if \"redirect\" mode was used.\n   *\n   * @return {!Promise}\n   */\n  open() {\n    return this.openInternal_();\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  whenConnected() {\n    return this.connectedPromise_;\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    if (this.heartbeatInterval_) {\n      this.win_.clearInterval(this.heartbeatInterval_);\n      this.heartbeatInterval_ = null;\n    }\n    if (this.messenger_) {\n      this.messenger_.disconnect();\n      this.messenger_ = null;\n    }\n    if (this.targetWin_) {\n      // Try to close the popup window. The host will also try to do the same.\n      try {\n        this.targetWin_.close();\n      } catch (e) {\n        // Ignore.\n      }\n      this.targetWin_ = null;\n    }\n    this.resultResolver_ = null;\n  }\n\n  /** @override */\n  getTargetWin() {\n    return this.targetWin_;\n  }\n\n  /** @override */\n  acceptResult() {\n    return this.resultPromise_;\n  }\n\n  /**\n   * Sends a message to the host.\n   * Whether the host can or cannot receive a message depends on the type of\n   * host and its state. Ensure that the code has an alternative path if\n   * messaging is not available.\n   * @override\n   */\n  message(payload) {\n    this.messenger_.customMessage(payload);\n  }\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * Whether the host can or cannot receive a message depends on the type of\n   * host and its state. Ensure that the code has an alternative path if\n   * messaging is not available.\n   * @override\n   */\n  onMessage(callback) {\n    this.messenger_.onCustomMessage(callback);\n  }\n\n  /**\n   * Creates a new communication channel or returns an existing one.\n   * Whether the host can or cannot receive a message depends on the type of\n   * host and its state. Ensure that the code has an alternative path if\n   * messaging is not available.\n   * @override\n   */\n  messageChannel(opt_name) {\n    return this.messenger_.askChannel(opt_name);\n  }\n\n  /**\n   * This method wraps around window's open method. It first tries to execute\n   * `open` call with the provided target and if it fails, it retries the call\n   * with the `_top` target. This is necessary given that in some embedding\n   * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n   * is blocked by default.\n   * @return {!Promise}\n   * @private\n   */\n  openInternal_() {\n    const featuresStr = this.buildFeatures_();\n\n    // Protectively, the URL will contain the request payload, unless explicitly\n    // directed not to via `skipRequestInUrl` option.\n    let url = this.url_;\n    if (!this.options_.skipRequestInUrl) {\n      const returnUrl =\n          this.options_.returnUrl ||\n          removeFragment(this.win_.location.href);\n      const requestString = serializeRequest({\n        requestId: this.requestId_,\n        returnUrl,\n        args: this.args_,\n      });\n      url = addFragmentParam(url, '__WA__', requestString);\n    }\n\n    // Open the window.\n    let targetWin;\n    let openTarget = this.openTarget_;\n    // IE does not support CORS popups - the popup has to fallback to redirect\n    // mode.\n    if (openTarget != '_top') {\n      if (isIeBrowser(this.win_)) {\n        openTarget = '_top';\n      }\n    }\n    // Try first with the specified target. If we're inside the WKWebView or\n    // a similar environments, this method is expected to fail by default for\n    // all targets except `_top`.\n    try {\n      targetWin = this.win_.open(url, openTarget, featuresStr);\n    } catch (e) {\n      // Ignore.\n    }\n    // Then try with `_top` target.\n    if (!targetWin &&\n        openTarget != '_top' &&\n        !this.options_.disableRedirectFallback) {\n      openTarget = '_top';\n      try {\n        targetWin = this.win_.open(url, openTarget);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n\n    // Setup the target window.\n    if (targetWin) {\n      this.targetWin_ = targetWin;\n      if (openTarget != '_top') {\n        this.setupPopup_();\n      }\n    } else {\n      this.disconnectWithError_(new Error('failed to open window'));\n    }\n\n    // Return result promise, even though it may never complete.\n    return this.resultPromise_.catch(() => {\n      // Ignore. Call to the `acceptResult()` should fail if needed.\n    });\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  buildFeatures_() {\n    // The max width and heights are calculated as following:\n    // MaxSize = AvailSize - ControlsSize\n    // ControlsSize = OuterSize - InnerSize\n    const screen = this.win_.screen;\n    const availWidth = screen.availWidth || screen.width;\n    const availHeight = screen.availHeight || screen.height;\n    const isTop = this.isTopWindow_();\n    const isEdge = isEdgeBrowser(this.win_);\n    // Limit controls to 100px width and height. Notice that it's only\n    // possible to calculate controls size in the top window, not in iframes.\n    // Notice that the Edge behavior is somewhat unique. If we can't find the\n    // right width/height, it will launch in the full-screen. Other browsers\n    // deal with such cases more gracefully.\n    const controlsWidth =\n        isTop && this.win_.outerWidth > this.win_.innerWidth ?\n        Math.min(100, this.win_.outerWidth - this.win_.innerWidth) :\n        (isEdge ? 100 : 0);\n    const controlsHeight =\n        isTop && this.win_.outerHeight > this.win_.innerHeight ?\n        Math.min(100, this.win_.outerHeight - this.win_.innerHeight) :\n        (isEdge ? 100 : 0);\n    // With all the adjustments, at least 50% of the available width/height\n    // should be made available to a popup.\n    const maxWidth = Math.max(availWidth - controlsWidth, availWidth * 0.5);\n    const maxHeight = Math.max(availHeight - controlsHeight, availHeight * 0.5);\n    let w = Math.floor(Math.min(600, maxWidth * 0.9));\n    let h = Math.floor(Math.min(600, maxHeight * 0.9));\n    if (this.options_.width) {\n      w = Math.min(this.options_.width, maxWidth);\n    }\n    if (this.options_.height) {\n      h = Math.min(this.options_.height, maxHeight);\n    }\n    const x = Math.floor((screen.width - w) / 2);\n    const y = Math.floor((screen.height - h) / 2);\n    const features = {\n      'height': h,\n      'width': w,\n      'resizable': 'yes',\n      'scrollbars': 'yes',\n    };\n    // Do not set left/top in Edge: it fails.\n    if (!isEdge) {\n      features['left'] = x;\n      features['top'] = y;\n    }\n    let featuresStr = '';\n    for (const f in features) {\n      if (featuresStr) {\n        featuresStr += ',';\n      }\n      featuresStr += `${f}=${features[f]}`;\n    }\n    return featuresStr;\n  }\n\n  /**\n   * This method only exists to make iframe/top emulation possible in tests.\n   * Otherwise `window.top` cannot be overridden.\n   * @return {boolean}\n   * @private\n   */\n  isTopWindow_() {\n    return this.win_ == this.win_.top;\n  }\n\n  /** @private */\n  setupPopup_() {\n    // Keep alive to catch the window closing, which would indicate\n    // \"cancel\" signal.\n    this.heartbeatInterval_ = this.win_.setInterval(() => {\n      this.check_(/* delayCancel */ true);\n    }, 500);\n\n    // Start up messaging. The messaging is explicitly allowed to proceed\n    // without origin check b/c all arguments have already been passed in\n    // the URL and special handling is enforced when result is delivered.\n    this.messenger_ = new Messenger(\n        this.win_,\n        /** @type {!Window} */ (this.targetWin_),\n        /* targetOrigin */ null,\n        /* requireTarget */ true);\n    this.messenger_.connect(this.handleCommand_.bind(this));\n  }\n\n  /**\n   * @param {boolean=} opt_delayCancel\n   * @private\n   */\n  check_(opt_delayCancel) {\n    if (!this.targetWin_ || this.targetWin_.closed) {\n      if (this.heartbeatInterval_) {\n        this.win_.clearInterval(this.heartbeatInterval_);\n        this.heartbeatInterval_ = null;\n      }\n      // Give a chance for the result to arrive, but otherwise consider the\n      // responce to be empty.\n      this.win_.setTimeout(() => {\n        try {\n          this.result_(ActivityResultCode.CANCELED, /* data */ null);\n        } catch (e) {\n          this.disconnectWithError_(e);\n        }\n      }, opt_delayCancel ? 3000 : 0);\n    }\n  }\n\n  /**\n   * @param {!Error} reason\n   * @private\n   */\n  disconnectWithError_(reason) {\n    if (this.resultResolver_) {\n      this.resultResolver_(Promise.reject(reason));\n    }\n    this.disconnect();\n  }\n\n  /**\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @private\n   */\n  result_(code, data) {\n    if (this.resultResolver_) {\n      const isConnected = this.messenger_.isConnected();\n      const result = new ActivityResult(\n          code,\n          data,\n          ActivityMode.POPUP,\n          isConnected ?\n              this.messenger_.getTargetOrigin() :\n              getOriginFromUrl(this.url_),\n          /* originVerified */ isConnected,\n          /* secureChannel */ isConnected);\n      resolveResult(this.win_, result, this.resultResolver_);\n      this.resultResolver_ = null;\n    }\n    if (this.messenger_) {\n      this.messenger_.sendCommand('close');\n    }\n    this.disconnect();\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @private\n   */\n  handleCommand_(cmd, payload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.messenger_.sendStartCommand(this.args_);\n      this.connectedResolver_();\n    } else if (cmd == 'result') {\n      // The last message. Indicates that the result has been received.\n      const code = /** @type {!ActivityResultCode} */ (payload['code']);\n      const data =\n          code == ActivityResultCode.FAILED ?\n          new Error(payload['data'] || '') :\n          payload['data'];\n      this.result_(code, data);\n    } else if (cmd == 'check') {\n      this.win_.setTimeout(() => this.check_(), 200);\n    }\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @param {string} fragment\n * @param {string} requestId\n * @return {?ActivityPort}\n */\nfunction discoverRedirectPort(win, fragment, requestId) {\n  // Try to find the result in the fragment.\n  const paramName = '__WA_RES__';\n  const fragmentParam = getQueryParam(fragment, paramName);\n  if (!fragmentParam) {\n    return null;\n  }\n  const response = /** @type {?Object} */ (JSON.parse(fragmentParam));\n  if (!response || response['requestId'] != requestId) {\n    return null;\n  }\n\n  // Remove the found param from the fragment.\n  const cleanFragment = removeQueryParam(win.location.hash, paramName) || '';\n  if (cleanFragment != win.location.hash) {\n    if (win.history && win.history.replaceState) {\n      try {\n        win.history.replaceState(win.history.state, '', cleanFragment);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n  }\n\n  const code = response['code'];\n  const data = response['data'];\n  const origin = response['origin'];\n  const referrerOrigin = win.document.referrer &&\n      getOriginFromUrl(win.document.referrer);\n  const originVerified = origin == referrerOrigin;\n  return new ActivityWindowRedirectPort(\n      win,\n      code,\n      data,\n      origin,\n      originVerified);\n}\n\n\n/**\n * The `ActivityPort` implementation for the standalone window activity\n * client executed as a popup.\n *\n * @implements {ActivityPort}\n */\nclass ActivityWindowRedirectPort {\n\n  /**\n   * @param {!Window} win\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @param {string} targetOrigin\n   * @param {boolean} targetOriginVerified\n   */\n  constructor(win, code, data, targetOrigin, targetOriginVerified) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!ActivityResultCode} */\n    this.code_ = code;\n    /** @private @const {*} */\n    this.data_ = data;\n    /** @private {string} */\n    this.targetOrigin_ = targetOrigin;\n    /** @private {boolean} */\n    this.targetOriginVerified_ = targetOriginVerified;\n  }\n\n  /** @override */\n  getMode() {\n    return ActivityMode.REDIRECT;\n  }\n\n  /** @override */\n  acceptResult() {\n    const result = new ActivityResult(\n        this.code_,\n        this.data_,\n        ActivityMode.REDIRECT,\n        this.targetOrigin_,\n        this.targetOriginVerified_,\n        /* secureChannel */ false);\n    return new Promise(resolve => {\n      resolveResult(this.win_, result, resolve);\n    });\n  }\n}\n\n\n\n\n/**\n * The page-level activities manager ports. This class is intended to be used\n * as a singleton. It can start activities of all modes: iframe, popup, and\n * redirect.\n */\nclass ActivityPorts {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {string} */\n    this.version = '1.24';\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {string} */\n    this.fragment_ = win.location.hash;\n\n    /**\n     * @private @const {!Object<string, !Array<function(!ActivityPort)>>}\n     */\n    this.requestHandlers_ = {};\n\n    /**\n     * The result buffer is indexed by `requestId`.\n     * @private @const {!Object<string, !ActivityPort>}\n     */\n    this.resultBuffer_ = {};\n\n    /** @private {?function(!Error)} */\n    this.redirectErrorResolver_ = null;\n\n    /** @private {!Promise<!Error>} */\n    this.redirectErrorPromise_ = new Promise(resolve => {\n      this.redirectErrorResolver_ = resolve;\n    });\n  }\n\n  /**\n   * Start an activity within the specified iframe.\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   * @return {!Promise<!ActivityIframePort>}\n   */\n  openIframe(iframe, url, opt_args) {\n    const port = new ActivityIframePort(iframe, url, opt_args);\n    return port.connect().then(() => port);\n  }\n\n  /**\n   * Start an activity in a separate window. The result will be delivered\n   * to the `onResult` callback.\n   *\n   * The activity can be opened in two modes: \"popup\" and \"redirect\". This\n   * depends on the `target` value, but also on the browser/environment.\n   *\n   * The allowed `target` values are `_blank`, `_top` and name targets. The\n   * `_self`, `_parent` and similar targets are not allowed.\n   *\n   * The `_top` target indicates that the activity should be opened as a\n   * \"redirect\", while other targets indicate that the activity should be\n   * opened as a popup. The activity client will try to honor the requested\n   * target. However, it's not always possible. Some environments do not\n   * allow popups and they either force redirect or fail the window open\n   * request. In this case, the activity will try to fallback to the \"redirect\"\n   * mode.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {{targetWin: ?Window}}\n   */\n  open(requestId, url, target, opt_args, opt_options) {\n    const port = this.openWin_(requestId, url, target, opt_args, opt_options);\n    return {targetWin: port.getTargetWin()};\n  }\n\n  /**\n   * Start an activity in a separate window and tries to setup messaging with\n   * this window.\n   *\n   * See `open()` method for more details, including `onResult` callback.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {!Promise<!ActivityMessagingPort>}\n   */\n  openWithMessaging(requestId, url, target, opt_args, opt_options) {\n    const port = this.openWin_(requestId, url, target, opt_args, opt_options);\n    return port.whenConnected().then(() => port);\n  }\n\n  /**\n   * Registers the callback for the result of the activity opened with the\n   * specified `requestId` (see the `open()` method). The callback is a\n   * function that takes a single `ActivityPort` argument. The client\n   * can use this object to verify the port using it's origin, verified and\n   * secure channel flags. Then the client can call\n   * `ActivityPort.acceptResult()` method to accept the result.\n   *\n   * The activity result is handled via a separate callback because of a\n   * possible redirect. So use of direct callbacks and/or promises is not\n   * possible in that case.\n   *\n   * A typical implementation would look like:\n   * ```\n   * ports.onResult('request1', function(port) {\n   *   port.acceptResult().then(function(result) {\n   *     // Only verified origins are allowed.\n   *     if (result.origin == expectedOrigin &&\n   *         result.originVerified &&\n   *         result.secureChannel) {\n   *       handleResultForRequest1(result);\n   *     }\n   *   });\n   * })\n   *\n   * ports.open('request1', request1Url, '_blank');\n   * ```\n   *\n   * @param {string} requestId\n   * @param {function(!ActivityPort)} callback\n   */\n  onResult(requestId, callback) {\n    let handlers = this.requestHandlers_[requestId];\n    if (!handlers) {\n      handlers = [];\n      this.requestHandlers_[requestId] = handlers;\n    }\n    handlers.push(callback);\n\n    // Consume available result.\n    const availableResult = this.discoverResult_(requestId);\n    if (availableResult) {\n      this.consumeResult_(availableResult, callback);\n    }\n  }\n\n  /**\n   * @param {function(!Error)} handler\n   */\n  onRedirectError(handler) {\n    this.redirectErrorPromise_.then(handler);\n  }\n\n  /**\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {!ActivityWindowPort}\n   */\n  openWin_(requestId, url, target, opt_args, opt_options) {\n    const port = new ActivityWindowPort(\n        this.win_, requestId, url, target, opt_args, opt_options);\n    port.open().then(() => {\n      // Await result if possible. Notice that when falling back to \"redirect\",\n      // the result will never arrive through this port.\n      this.consumeResultAll_(requestId, port);\n    });\n    return port;\n  }\n\n  /**\n   * @param {string} requestId\n   * @return {?ActivityPort}\n   * @private\n   */\n  discoverResult_(requestId) {\n    let port = this.resultBuffer_[requestId];\n    if (!port && this.fragment_) {\n      try {\n        port = discoverRedirectPort(\n            this.win_, this.fragment_, requestId);\n      } catch (e) {\n        throwAsync(e);\n        this.redirectErrorResolver_(e);\n      }\n      if (port) {\n        this.resultBuffer_[requestId] = port;\n      }\n    }\n    return port;\n  }\n\n  /**\n   * @param {!ActivityPort} port\n   * @param {function(!ActivityPort)} callback\n   * @private\n   */\n  consumeResult_(port, callback) {\n    Promise.resolve().then(() => {\n      callback(port);\n    });\n  }\n\n  /**\n   * @param {string} requestId\n   * @param {!ActivityPort} port\n   * @private\n   */\n  consumeResultAll_(requestId, port) {\n    // Find and execute handlers.\n    const handlers = this.requestHandlers_[requestId];\n    if (handlers) {\n      handlers.forEach(handler => {\n        this.consumeResult_(port, handler);\n      });\n    }\n    // Buffer the result for callbacks that may arrive in the future.\n    this.resultBuffer_[requestId] = port;\n  }\n}\n\n\n\nmodule.exports = {\n  ActivityPorts,\n  ActivityIframePort,\n  ActivityMessagingPort,\n  ActivityMode,\n  ActivityOpenOptions,\n  ActivityPort,\n  ActivityRequest,\n  ActivityResult,\n  ActivityResultCode,\n  ActivityWindowPort,\n  createAbortError,\n  isAbortError,\n};\n","/**\n * Copyright 2020 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlements} from './entitlements';\nimport {SubscribeResponse} from './subscribe-response';\n\n/**\n * Interface for users of the basic tier of Subscribe with Google.\n * @interface\n */\nexport class BasicSubscriptions {\n  /**\n   * Initializes the basic subscriptions runtime. This includes setting of the\n   * specified param values in the JSON-LD markup of the page, sets up any SwG\n   * buttons with attribute 'swg-standard-button', and inserts a SwG prompt for\n   * contributions/subscriptions. If the fields specified in the params are\n   * already specified in the JSON-LD markup on the page, the existing values\n   * will be preserved, and the values within init will be ignored.\n   * @param {{\n   *   type: (string|!Array<string>),\n   *   isAccessibleForFree: boolean,\n   *   isPartOfType: (string|!Array<string>),\n   *   isPartOfProductId: string,\n   *   autoPromptType: (AutoPromptType|undefined),\n   *   clientOptions: (ClientOptions|undefined),\n   * }=} params\n   */\n  init(params) {}\n\n  /**\n   * Set the entitlement check callback.\n   * @param {function(!Promise<!Entitlements>)} callback\n   * @return {?}\n   */\n  setOnEntitlementsResponse(callback) {}\n\n  /**\n   * Set the payment complete callback.\n   * @param {function(!Promise<!SubscribeResponse>)} callback\n   * @return {?}\n   */\n  setOnPaymentResponse(callback) {}\n\n  /**\n   * Open CheckEntitlementsView to let users log in Google and check their entitlements.\n   * @param {function(!LoginRequest)} callback\n   * @return {?}\n   */\n  setOnLoginRequest(callback) {}\n\n  /**\n   * Creates and displays a SwG subscription or contribution prompt, where the\n   * prompt type is determined by the parameters passed in to init. If the auto\n   * prompt is determined to have been already set up, the setup portion of the\n   * function will be skipped, and the prompt will be displayed. The\n   * autoPromptType specifies which type of prompt should be displayed (see\n   * AutoPromptType below). The alwaysShow parameter is an option to force show\n   * the prompt, regardless of any display rules. This parameter is intended for\n   * preview purposes.\n   * @param {{\n   *   autoPromptType: (!AutoPromptType|undefined),\n   *   alwaysShow: (boolean|undefined),\n   * }} options\n   * @returns {!Promise}\n   */\n  setupAndShowAutoPrompt(options) {}\n\n  /**\n   * Dismisses any SwG UI currently displayed. Intended to be used for preview\n   * purposes.\n   * @return {?}\n   */\n  dismissSwgUI() {}\n}\n\n/** @enum {string} */\nexport const AutoPromptType = {\n  NONE: 'none',\n  CONTRIBUTION: 'contribution',\n  SUBSCRIPTION: 'subscription',\n};\n\n/**\n * Options for configuring all client UI.\n * Properties:\n * - lang: Sets the button and prompt lanugage. Default is \"en\".\n * - theme: \"light\" or \"dark\". Default is \"light\".\n *\n * @typedef {{\n *   theme: (ClientTheme|undefined),\n *   lang: (string|undefined),\n * }}\n */\nexport let ClientOptions;\n\n/**\n * @typedef {{\n *   linkRequested: boolean,\n * }}\n */\nexport let LoginRequest;\n\n/** @enum {string} */\nexport const ClientTheme = {\n  LIGHT: 'light',\n  DARK: 'dark',\n};\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AnalyticsEvent, EventOriginator} from '../proto/api_messages';\n\n/** @enum {number}  */\nexport const FilterResult = {\n  /** The event is allowed to proceed to the listeners. */\n  PROCESS_EVENT: 0,\n  /** The event is canceled and the listeners are not informed about it. */\n  CANCEL_EVENT: 1,\n};\n\n/**\n * Defines a client event in SwG\n * Properties:\n * - eventType: Required. The AnalyticsEvent type that occurred.\n * - eventOriginator: Required.  The codebase that initiated the event.\n * - isFromUserAction: Optional.  True if the user took an action to generate\n *   the event.\n * - additionalParameters: Optional.  A JSON object to store generic data.\n *\n *  @typedef {{\n *    eventType: ?AnalyticsEvent,\n *    eventOriginator: !EventOriginator,\n *    isFromUserAction: ?boolean,\n *    additionalParameters: ?Object,\n * }}\n */\nexport let ClientEvent;\n\n/**\n * @interface\n */\nexport class ClientEventManagerApi {\n  /**\n   * Call this function to log an event. The registered listeners will be\n   * invoked unless the event is filtered.\n   * @param {!function(!ClientEvent)} listener\n   */\n  registerEventListener(listener) {}\n\n  /**\n   * Register a filterer for events if you need to potentially prevent the\n   * listeners from hearing about it.  A filterer should return\n   * FilterResult.CANCEL_EVENT to prevent listeners from hearing about the\n   * event.\n   * @param {!function(!ClientEvent):FilterResult} filterer\n   */\n  registerEventFilterer(filterer) {}\n\n  /**\n   * Call this function to log an event.  It will immediately throw an error if\n   * the event is invalid.  It will then asynchronously call the filterers and\n   * stop the event if a filterer cancels it.  After that, it will call each\n   * listener asynchronously.\n   * @param {!ClientEvent} event\n   */\n  logEvent(event) {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlements} from './entitlements';\nimport {PurchaseData} from './subscribe-response';\nimport {UserData} from './user-data';\n\n/**\n * Properties:\n * - entitlements - the current entitlements.\n * - consent - whether to ask the user for account creation consent.\n *   Default is `true`.\n *\n * @typedef {{\n *   entitlements: (?Entitlements|undefined),\n *   consent: (boolean|undefined),\n * }}\n */\nexport let DeferredAccountCreationRequest;\n\n/**\n */\nexport class DeferredAccountCreationResponse {\n  /**\n   * @param {!Entitlements} entitlements\n   * @param {!UserData} userData\n   * @param {!Array<!PurchaseData>} purchaseDataList\n   * @param {function():!Promise} completeHandler\n   */\n  constructor(entitlements, userData, purchaseDataList, completeHandler) {\n    /** @const {!Entitlements} */\n    this.entitlements = entitlements;\n    /** @const {!UserData} */\n    this.userData = userData;\n    /** @const {!Array<!PurchaseData>} */\n    this.purchaseDataList = purchaseDataList;\n    // TODO(dvoytenko): deprecate.\n    /** @const {!PurchaseData} */\n    this.purchaseData = purchaseDataList[0];\n    /** @private @const {function():!Promise} */\n    this.completeHandler_ = completeHandler;\n  }\n\n  /**\n   * @return {!DeferredAccountCreationResponse}\n   */\n  clone() {\n    return new DeferredAccountCreationResponse(\n      this.entitlements,\n      this.userData,\n      this.purchaseDataList,\n      this.completeHandler_\n    );\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'entitlements': this.entitlements.json(),\n      'userData': this.userData.json(),\n      'purchaseDataList': this.purchaseDataList.map((pd) => pd.json()),\n      // TODO(dvoytenko): deprecate.\n      'purchaseData': this.purchaseData.json(),\n    };\n  }\n\n  /**\n   * Allows the receiving site to complete/acknowledge that it registered\n   * the subscription info. The typical action would be to create an\n   * account (or match an existing one) and associated the subscription with\n   * that account.\n   *\n   * SwG will display progress indicator until this method is called and\n   * upon receiving this call will show the confirmation to the user.\n   * The promise returned by this method will yield once the user closes\n   * the confirmation.\n   *\n   * @return {!Promise}\n   */\n  complete() {\n    return this.completeHandler_();\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {findInArray} from '../utils/object';\nimport {getPropertyFromJsonString} from '../utils/json';\nimport {warn} from '../utils/log';\n\n/** Source for Google-provided metering entitlements. */\nexport const GOOGLE_METERING_SOURCE = 'google:metering';\n\n/**\n * The holder of the entitlements for a service.\n */\nexport class Entitlements {\n  /**\n   * @param {string} service\n   * @param {string} raw\n   * @param {!Array<!Entitlement>} entitlements\n   * @param {?string} currentProduct\n   * @param {function(!Entitlements)} ackHandler\n   * @param {function(!Entitlements, ?Function=)} consumeHandler\n   * @param {?boolean|undefined} isReadyToPay\n   * @param {?string|undefined} decryptedDocumentKey\n   */\n  constructor(\n    service,\n    raw,\n    entitlements,\n    currentProduct,\n    ackHandler,\n    consumeHandler,\n    isReadyToPay,\n    decryptedDocumentKey\n  ) {\n    /** @const {string} */\n    this.service = service;\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {!Array<!Entitlement>} */\n    this.entitlements = entitlements;\n    /** @const {boolean} */\n    this.isReadyToPay = isReadyToPay || false;\n    /** @const {?string} */\n    this.decryptedDocumentKey = decryptedDocumentKey || null;\n\n    /** @private @const {?string} */\n    this.product_ = currentProduct;\n    /** @private @const {function(!Entitlements)} */\n    this.ackHandler_ = ackHandler;\n    /** @private @const {function(!Entitlements, ?Function=)} */\n    this.consumeHandler_ = consumeHandler;\n  }\n\n  /**\n   * @return {!Entitlements}\n   */\n  clone() {\n    return new Entitlements(\n      this.service,\n      this.raw,\n      this.entitlements.map((ent) => ent.clone()),\n      this.product_,\n      this.ackHandler_,\n      this.consumeHandler_,\n      this.isReadyToPay,\n      this.decryptedDocumentKey\n    );\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'service': this.service,\n      'entitlements': this.entitlements.map((item) => item.json()),\n      'isReadyToPay': this.isReadyToPay,\n    };\n  }\n\n  /**\n   * Returns true if the current article is unlocked by a\n   * cacheable entitlement. Metering entitlements aren't cacheable,\n   * because each metering entitlement is meant to be used for one article.\n   * Subscription entitlements are cacheable, because subscription entitlements\n   * are meant to be used across multiple articles on a publication.\n   * @return {boolean}\n   */\n  enablesThisWithCacheableEntitlements() {\n    const entitlement = this.getEntitlementForThis();\n    return !!entitlement && entitlement.source !== GOOGLE_METERING_SOURCE;\n  }\n\n  /**\n   * Returns true if the current article is unlocked by a\n   * Google metering entitlement. These entitlements come\n   * from Google News Intiative's licensing program to support news.\n   * https://www.blog.google/outreach-initiatives/google-news-initiative/licensing-program-support-news-industry-/\n   * @return {boolean}\n   */\n  enablesThisWithGoogleMetering() {\n    const entitlement = this.getEntitlementForThis();\n    return !!entitlement && entitlement.source === GOOGLE_METERING_SOURCE;\n  }\n\n  /**\n   * @param {string=} source\n   * @return {boolean}\n   */\n  enablesThis(source) {\n    return this.enables(this.product_, source);\n  }\n\n  /**\n   * @param {string=} source\n   * @return {boolean}\n   */\n  enablesAny(source) {\n    for (let i = 0; i < this.entitlements.length; i++) {\n      if (\n        this.entitlements[i].products.length > 0 &&\n        (!source || source == this.entitlements[i].source)\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Whether these entitlements enable the specified product, optionally also\n   * restricting the source.\n   * @param {?string} product\n   * @param {string=} source\n   * @return {boolean}\n   */\n  enables(product, source) {\n    if (!product) {\n      return false;\n    }\n    return !!this.getEntitlementFor(product, source);\n  }\n\n  /**\n   * Returns the first matching entitlement for the current product,\n   * optionally also matching the specified source.\n   * @param {string=} source\n   * @return {?Entitlement}\n   */\n  getEntitlementForThis(source) {\n    return this.getEntitlementFor(this.product_, source);\n  }\n\n  /**\n   * Returns the first matching entitlement for the specified product,\n   * optionally also matching the specified source.\n   *\n   * Returns non-metering entitlements if possible, to avoid consuming\n   * metered reads unnecessarily.\n   *\n   * @param {?string} product\n   * @param {string=} source\n   * @return {?Entitlement}\n   */\n  getEntitlementFor(product, source) {\n    if (!product) {\n      // Require a product ID.\n      warn(\n        'SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID.'\n      );\n      return null;\n    }\n\n    // Prefer subscription entitlements over metering entitlements.\n    // Metering entitlements are a limited resource. When a metering entitlement\n    // unlocks an article, that depletes the user's remaining \"free reads\".\n    // Subscription entitlements are *not* depleted when they unlock articles.\n    // They are essentially unlimited if the subscription remains valid.\n    // For this reason, subscription entitlements are preferred.\n    const entitlementsThatUnlockArticle = this.entitlements.filter(\n      (entitlement) =>\n        entitlement.enables(product) &&\n        (!source || source === entitlement.source)\n    );\n\n    const subscriptionEntitlement = findInArray(\n      entitlementsThatUnlockArticle,\n      (entitlement) => entitlement.source !== GOOGLE_METERING_SOURCE\n    );\n\n    const meteringEntitlement = findInArray(\n      entitlementsThatUnlockArticle,\n      (entitlement) => entitlement.source === GOOGLE_METERING_SOURCE\n    );\n\n    return subscriptionEntitlement || meteringEntitlement || null;\n  }\n\n  /**\n   * Returns the first matching entitlement for the specified source w/o\n   * matching any specific products.\n   * @param {string} source\n   * @return {?Entitlement}\n   */\n  getEntitlementForSource(source) {\n    if (this.entitlements.length > 0) {\n      for (let i = 0; i < this.entitlements.length; i++) {\n        if (\n          this.entitlements[i].subscriptionToken &&\n          source == this.entitlements[i].source\n        ) {\n          return this.entitlements[i];\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * A 3p site should call this method to acknowledge that it \"saw\" and\n   * \"understood\" entitlements.\n   */\n  ack() {\n    this.ackHandler_(this);\n  }\n\n  /**\n   * A 3p site should call this method to consume a Google metering entitlement.\n   * When a metering entitlement is consumed, SwG shows the user a metering dialog.\n   * When the user closes the dialog, SwG depletes one of the user's remaining\n   * \"free reads\".\n   * @param {?Function=} onCloseDialog Called after the user closes the dialog.\n   */\n  consume(onCloseDialog) {\n    this.consumeHandler_(this, onCloseDialog);\n  }\n}\n\n/**\n * The single entitlement object.\n */\nexport class Entitlement {\n  /**\n   * @param {string} source\n   * @param {!Array<string>} products\n   * @param {string} subscriptionToken\n   */\n  constructor(source, products, subscriptionToken) {\n    /** @const {string} */\n    this.source = source;\n    /** @const {!Array<string>} */\n    this.products = products;\n    /** @const {string} */\n    this.subscriptionToken = subscriptionToken;\n  }\n\n  /**\n   * @return {!Entitlement}\n   */\n  clone() {\n    return new Entitlement(\n      this.source,\n      this.products.slice(0),\n      this.subscriptionToken\n    );\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'source': this.source,\n      'products': this.products,\n      'subscriptionToken': this.subscriptionToken,\n    };\n  }\n\n  /**\n   * @param {?string} product\n   * @return {boolean}\n   */\n  enables(product) {\n    if (!product) {\n      return false;\n    }\n    // Wildcard allows this product.\n    const eq = product.indexOf(':');\n    if (\n      eq != -1 &&\n      this.products.includes(product.substring(0, eq + 1) + '*')\n    ) {\n      return true;\n    }\n    return this.products.includes(product);\n  }\n\n  /**\n   * @param {?Object} json\n   * @return {!Entitlement}\n   */\n  static parseFromJson(json) {\n    if (!json) {\n      json = {};\n    }\n    const source = json['source'] || '';\n    const products = json['products'] || [];\n    const subscriptionToken = json['subscriptionToken'];\n    return new Entitlement(source, products, subscriptionToken);\n  }\n\n  /**\n   * The JSON is expected in one of the forms:\n   * - Single entitlement: `{products: [], ...}`.\n   * - A list of entitlements: `[{products: [], ...}, {...}]`.\n   * @param {!Object|!Array<!Object>} json\n   * @return {!Array<!Entitlement>}\n   */\n  static parseListFromJson(json) {\n    const jsonList = Array.isArray(json)\n      ? /** @type {!Array<Object>} */ (json)\n      : [json];\n    return jsonList.map((json) => Entitlement.parseFromJson(json));\n  }\n\n  /**\n   * Returns the SKU associated with this entitlement.\n   * @return {?string}\n   */\n  getSku() {\n    if (this.source !== 'google') {\n      return null;\n    }\n    const sku = /** @type {?string} */ (getPropertyFromJsonString(\n      this.subscriptionToken,\n      'productId'\n    ) || null);\n    if (!sku) {\n      warn('Unable to retrieve SKU from SwG subscription token');\n    }\n    return sku;\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @enum {string}\n */\nexport const SubscriptionState = {\n  // user's subscription state not known.\n  UNKNOWN: 'unknown',\n  // user is not a subscriber.\n  NON_SUBSCRIBER: 'non_subscriber',\n  // user is a subscriber.\n  SUBSCRIBER: 'subscriber',\n  // user's subscription has expired.\n  PAST_SUBSCRIBER: 'past_subscriber',\n};\n\n/**\n * Subscription related events. Listed below are enum strings that\n * represent events related to Subscription flow. Event parameters\n * that provide more context about the event are sent as a JSON\n * block of depth 1 in the sendEvent() API call.\n * @enum {string}\n */\nexport const Event = {\n  /**\n   * IMPRESSION_PAYWALL event.\n   * User hits a paywall.\n   * Every impression should be qualified as active or passive.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false to indicate this.\n   * If the user has run out of metering, and thats why was shown\n   * a paywall, that would be a passive impression of the paywall.\n   * For example:\n   * const propensityEvent = {\n   *  name: 'paywall',\n   *  active: false,\n   * }\n   */\n  IMPRESSION_PAYWALL: 'paywall',\n  /**\n   * IMPRESSION_AD event.\n   * User has been shown a subscription ad.\n   * Every impression should be qualified as active or passive.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false to indicate this.\n   * The JSON block can provide the name of the subscription ad\n   * creative or campaign. Ad impressions are usually passive.\n   * const propensityEvent = {\n   *   name: 'ad_shown',\n   *   active: false,\n   *   data: {'ad_name': 'fall_ad'}\n   * }\n   */\n  IMPRESSION_AD: 'ad_shown',\n  /**\n   * IMPRESSION_OFFERS event.\n   * User has been shown a list of available offers for subscription.\n   * Every impression should be qualified as active or passive.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false to indicate this.\n   * The JSON block can provide a list of products displayed,\n   * and the source to indicate why the user was shown the offer.\n   * Note: source is not the same as referrer.\n   * In the cases below, the user took action before seeing the offers,\n   * and therefore considered active impression.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'offers_shown',\n   *   active: true,\n   *   data: {'offers': ['basic-monthly', 'premium-weekly'],\n   *           'source': 'ad-click'}\n   * }\n   * For example:\n   * const propensityEvent = {\n   *   name: 'offers_shown',\n   *   active: true,\n   *   data: {'offers': ['basic-monthly', 'premium-weekly'],\n   *           'source': navigate-to-offers-page}\n   * }\n   * If the user was shown the offers as a result of paywall metering\n   * expiration, it is considered a passive impression.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'offers_shown',\n   *   active: false,\n   *   data: {'offers': ['basic-monthly', 'premium-weekly'],\n   *           'source': paywall-metering-expired}\n   * }\n   */\n  IMPRESSION_OFFERS: 'offers_shown',\n  /**\n   * ACTION_SUBSCRIPTIONS_LANDING_PAGE event.\n   * User has taken the action to arrive at a landing page of the\n   * subscription workflow. The landing page should satisfy one of\n   * the following conditions and hence be a part of the funnel to\n   * get the user to subscribe:\n   * - have a button to navigate the user to an offers page, (in\n   *   this case, the next event will be IMPRESSION_OFFERS, with\n   *   parameter 'source' as subscriptions-landing-page and\n   *   'is_active' set to true),\n   * - show offers the user can select, (in this case, the next\n   *   event will be IMPRESSION_OFFERS, with a parameter 'source'\n   *   as navigate-to-offers-page and 'is_active' set to true),\n   * - provide a way to start the payment flow for a specific offer.\n   *   (in this case, the next event will be ACTION_OFFER_SELECTED\n   *   or ACTION_PAYMENT_FLOW_STARTED depending on if that button\n   *   took the user to a checkout page on the publishers site or\n   *   directly started the payment flow).\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block with this event can provide additional information\n   * such as the source, indicating what caused the user to navigate\n   * to this page.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'subscriptions_landing_page',\n   *   active: true,\n   *   data: {'source': 'marketing_via_email'}\n   * }\n   */\n  ACTION_SUBSCRIPTIONS_LANDING_PAGE: 'subscriptions_landing_page',\n  /**\n   * ACTION_OFFER_SELECTED event.\n   * User has selected an offer.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block can provide the product selected.\n   * For example: {\n   *   name: 'offer_selected',\n   *   active: true,\n   *   data: {product': 'basic-monthly'}\n   * }\n   * When offer selection starts the payment flow directly,\n   * use the next event ACTION_PAYMENT_FLOW_STARTED instead.\n   */\n  ACTION_OFFER_SELECTED: 'offer_selected',\n  /**\n   * ACTION_PAYMENT_FLOW_STARTED event.\n   * User has started payment flow.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block can provide the product selected.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'payment_flow_started',\n   *   active: true,\n   *   data: {product': 'basic-monthly'}\n   * }\n   */\n  ACTION_PAYMENT_FLOW_STARTED: 'payment_flow_start',\n  /**\n   * ACTION_PAYMENT_COMPLETED.\n   * User has made the payment for a subscription.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true since this is a user action.\n   * The JSON block can provide the product user paid for.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'payment_complete',\n   *   active: true,\n   *   data: {product': 'basic-monthly'}\n   * }\n   */\n  ACTION_PAYMENT_COMPLETED: 'payment_complete',\n  /**\n   * EVENT_CUSTOM: custom publisher event.\n   * The field 'active' of PropensityEvent, which carries this\n   * event, must be set to true or false depending on if the event\n   * was generated as a result of a user action.\n   * The JSON block can provide the event name for the custom event.\n   * For example:\n   * const propensityEvent = {\n   *   name: 'custom',\n   *   active: true,\n   *   data: {\n   *     'event_name': 'social_share',\n   *     'platform_used': 'whatsapp'\n   *   }\n   *  }\n   */\n  EVENT_CUSTOM: 'custom',\n};\n\n/**\n * Propensity Event\n * Properties:\n * - name: Required. Name should be valid string in the Event\n *         enum within src/api/logger-api.js.\n * - active: Required. A boolean that indicates whether the\n *         user took some action to participate in the flow\n *         that generated this event. For impression event,\n *         this is set to true if is_active field would be\n *         set to true, as described in documentation for\n *         enum Event. Otherwise, set this field to false.\n *         For action events, this field must always be set\n *         to true. The caller must always set this field.\n * - data: Optional. JSON block of depth '1' provides event\n *         parameters. The guideline to create this JSON block\n *         that describes the event is provided against each\n *         enum listed in the Event enum above.\n *\n *  @typedef {{\n *    name: string,\n *    active: boolean,\n *    data: ?JsonObject,\n * }}\n */\nexport let PublisherEvent;\n\n/**\n * @interface\n */\nexport class LoggerApi {\n  /**\n   * Send a buy-flow event that occurred on the publisher's site to Google.  The\n   * ultimate destination is controlled by configuration settings.  Publisher\n   * configuration available:\n   *   enablePropensity - Sends data to the Propensity to Subscribe ads server.\n   *   enableSwgAnalytics - Sends data to Google's analytics server for buy-flow\n   *     comparison purposes.\n   * @param {!PublisherEvent} userEvent\n   */\n  sendEvent(userEvent) {}\n\n  /**\n   * Send user subscription state upon initial discovery.\n   * A user may have active subscriptions to some products\n   * and expired subscriptions to others. Make one API call\n   * per subscription state and provide a corresponding\n   * list of products with a json object of depth 1.\n   * For example:\n   *     {'product': ['product1', 'product2']}\n   * Each call to this API should have the first argument\n   * as a valid string from the enum SubscriptionState.\n   * @param {SubscriptionState} state\n   * @param {?JsonObject} jsonProducts\n   */\n  sendSubscriptionState(state, jsonProducts) {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @enum {number}  */\nexport const MeterClientTypes = {\n  /** Meter client type for content licensed by Google. */\n  LICENSED_BY_GOOGLE: 1,\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nexport class Offer {\n\n  /**\n   * @param {string} skuId\n   * @param {string} title\n   * @param {string} description\n   * @param {string} price\n   */\n  constructor(skuId, title, description, price) {\n    /** @const {string} */\n    this.skuId = skuId;\n    /** @const {string} */\n    this.title = title;\n    /** @const {string} */\n    this.description = description;\n    /** @const {string} */\n    this.price = price;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as LoggerApi from './logger-api';\n\n/**\n * @enum {string}\n */\nexport const PropensityType = {\n  // Propensity score for a user to subscribe to a publication.\n  GENERAL: 'general',\n  // Propensity score when blocked access to content by paywall.\n  PAYWALL: 'paywall',\n};\n\n/**\n * The Propensity Score\n * - value: Required. A number that indicates the propensity to subscribe.\n * - bucketed: Required. Indicates if the score is a raw score [1-100] or bucketed[1-20].\n *\n * @typedef {{\n *   value: number,\n *   bucketed: boolean,\n * }}\n */\nexport let Score;\n\n/**\n * Propensity Score Detail\n * Properties:\n * - product: Required. Indicates the publication_id:product_id for which the score is provided.\n * - score: Optional. When score is available, this field contains the propensity score for this product.\n * - error: Optional. When no score is avaialble, a string provides the error message.\n *\n * @typedef {{\n *   product: string,\n *   score: ?Score,\n *   error: ?string,\n * }}\n */\nexport let ScoreDetail;\n\n/**\n * The Body field of the Propensity Score.\n * Properties:\n * - scores: Optional, an array of scores. When header indicates so, atleast one score is available.\n * - error: Optional, string describing why, if no scores were provided by the server.\n *\n *  @typedef {{\n *    scores: ?Array<ScoreDetail>,\n *    error: ?string,\n * }}\n */\nexport let Body;\n\n/**\n * The Header of the Propensity Score.\n * Properties:\n * - ok: Required. true, if propensity score is available, false otherwise.\n *\n *  @typedef {{\n *    ok: boolean,\n * }}\n */\nexport let Header;\n\n/**\n * The Propensity Score.\n * Properties:\n * - header: Required. Provides the header of the Score response.\n * - body: Required. Provides the body of the Score response.\n *\n *  @typedef {{\n *    header: Header,\n *    body: Body,\n * }}\n */\nexport let PropensityScore;\n\n/**\n * Propensity Event\n *   Please note that the primary defition of this object has changed to\n *   PublisherEvent and is defined in logger-api.js.  These two object\n *   definitions are identical.\n * Properties:\n * - name: Required. Name should be valid string in the Event\n *         enum within src/api/logger-api.js.\n * - active: Required. A boolean that indicates whether the\n *         user took some action to participate in the flow\n *         that generated this event. For impression event,\n *         this is set to true if is_active field would be\n *         set to true, as described in documentation for\n *         enum Event. Otherwise, set this field to false.\n *         For action events, this field must always be set\n *         to true. The caller must always set this field.\n * - data: Optional. JSON block of depth '1' provides event\n *         parameters. The guideline to create this JSON block\n *         that describes the event is provided against each\n *         enum listed in the Event enum above.\n *\n *  @typedef {{\n *    name: string,\n *    active: boolean,\n *    data: ?JsonObject,\n * }}\n */\nexport let PropensityEvent;\n\n/*\n * Please note that the definitions of Event and SubscriptionState have moved\n * to logger-api.js.  This is now the preferred interface to use for logging\n * publisher events and setting the user's current subscription state.\n * Propensity will continue to function as an event logger until we are certain\n * no publishers are actively using it to log events.\n */\nexport const Event = LoggerApi.Event;\nexport const SubscriptionState = LoggerApi.SubscriptionState;\n\n/**\n * @extends {LoggerApi.LoggerApi}\n * @interface\n */\nexport class PropensityApi extends LoggerApi.LoggerApi {\n  /**\n   * Get the propensity of a user to subscribe based on the type.\n   * The argument should be a valid string from PropensityType.\n   * If no type is provided, GENERAL score is returned.\n   * @param {PropensityType=} type\n   * @return {?Promise<!PropensityScore>}\n   */\n  getPropensity(type) {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Entitlements} from './entitlements';\nimport {UserData} from './user-data';\n\n/**\n */\nexport class SubscribeResponse {\n  /**\n   * @param {string} raw\n   * @param {!PurchaseData} purchaseData\n   * @param {?UserData} userData\n   * @param {?Entitlements} entitlements\n   * @param {!string} productType\n   * @param {function():!Promise} completeHandler\n   * @param {?string=} oldSku\n   * @param {?string=} swgUserToken\n   * @param {?number=} paymentRecurrence\n   */\n  constructor(\n    raw,\n    purchaseData,\n    userData,\n    entitlements,\n    productType,\n    completeHandler,\n    oldSku = null,\n    swgUserToken = null,\n    paymentRecurrence = null\n  ) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {!PurchaseData} */\n    this.purchaseData = purchaseData;\n    /** @const {?UserData} */\n    this.userData = userData;\n    /** @const {?Entitlements} */\n    this.entitlements = entitlements;\n    /** @const {string} */\n    this.productType = productType;\n    /** @private @const {function():!Promise} */\n    this.completeHandler_ = completeHandler;\n    /** @const {?string} */\n    this.oldSku = oldSku;\n    /** @const {?string} */\n    this.swgUserToken = swgUserToken;\n    /** @const {?number} */\n    this.paymentRecurrence = paymentRecurrence;\n  }\n\n  /**\n   * @return {!SubscribeResponse}\n   */\n  clone() {\n    return new SubscribeResponse(\n      this.raw,\n      this.purchaseData,\n      this.userData,\n      this.entitlements,\n      this.productType,\n      this.completeHandler_,\n      this.oldSku,\n      this.swgUserToken\n    );\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'purchaseData': this.purchaseData.json(),\n      'userData': this.userData ? this.userData.json() : null,\n      'entitlements': this.entitlements ? this.entitlements.json() : null,\n      'oldSku': this.oldSku,\n      'productType': this.productType,\n      'swgUserToken': this.swgUserToken,\n    };\n  }\n\n  /**\n   * Allows the receiving site to complete/acknowledge that it registered\n   * the subscription purchase. The typical action would be to create an\n   * account (or match an existing one) and associated the purchase with\n   * that account.\n   *\n   * SwG will display progress indicator until this method is called and\n   * upon receiving this call will show the confirmation to the user.\n   * The promise returned by this method will yield once the user closes\n   * the confirmation.\n   *\n   * @return {!Promise}\n   */\n  complete() {\n    return this.completeHandler_();\n  }\n}\n\n/**\n */\nexport class PurchaseData {\n  /**\n   * @param {string} raw\n   * @param {string} signature\n   */\n  constructor(raw, signature) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {string} */\n    this.data = raw;\n    /** @const {string} */\n    this.signature = signature;\n  }\n\n  /**\n   * @return {!PurchaseData}\n   */\n  clone() {\n    return new PurchaseData(this.raw, this.signature);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'data': this.raw,\n      'signature': this.signature,\n    };\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ClientEventManagerApi} from './client-event-manager-api';\nimport {\n  DeferredAccountCreationRequest,\n  DeferredAccountCreationResponse,\n} from './deferred-account-creation';\nimport {Entitlements} from './entitlements';\nimport {LoggerApi} from './logger-api';\nimport {Offer} from './offer';\nimport {PropensityApi} from './propensity-api';\nimport {SubscribeResponse} from './subscribe-response';\n\n/**\n * @interface\n */\nexport class Subscriptions {\n  /**\n   * Optionally initializes the subscriptions runtime with publication or\n   * product ID. If not called, the runtime will look for the initialization\n   * parameters in the page's markup.\n   * @param {string} productOrPublicationId\n   */\n  init(productOrPublicationId) {}\n\n  /**\n   * Optionally configures the runtime with non-default properties. See\n   * `Config` definition for details.\n   * @param {!Config} config\n   * @return {?}\n   */\n  configure(config) {}\n\n  /**\n   * Starts the entitlement flow.\n   * @return {?}\n   */\n  start() {}\n\n  /**\n   * Resets the entitlements that can be fetched again.\n   * @return {?}\n   */\n  reset() {}\n\n  /**\n   * Resets the entitlements and clears all of the caches.\n   * @return {?}\n   */\n  clear() {}\n\n  /**\n   * @param {!GetEntitlementsParamsExternalDef=} params\n   * @return {!Promise<!Entitlements>}\n   */\n  getEntitlements(params) {}\n\n  /**\n   * Set the subscribe callback.\n   * @param {function(!Promise<!Entitlements>)} callback\n   * @return {?}\n   */\n  setOnEntitlementsResponse(callback) {}\n\n  /**\n   * Returns a set of offers.\n   * @param {{\n   *   productId: (string|undefined),\n   * }=} options\n   * @return {!Promise<!Array<!Offer>>}\n   */\n  getOffers(options) {}\n\n  /**\n   * Starts the Offers flow.\n   * @param {!OffersRequest=} options\n   * @return {?}\n   */\n  showOffers(options) {}\n\n  /**\n   * Starts the Offers flow for a subscription update.\n   * @param {!OffersRequest=} options\n   * @return {?}\n   */\n  showUpdateOffers(options) {}\n\n  /**\n   * Show subscription option.\n   * @param {!OffersRequest=} options\n   * @return {?}\n   */\n  showSubscribeOption(options) {}\n\n  /**\n   * Show abbreviated offers.\n   * @param {!OffersRequest=} options\n   * @return {?}\n   */\n  showAbbrvOffer(options) {}\n\n  /**\n   * Show contribution options for the users to select from.\n   * The options are grouped together by periods (Weekly, Monthly, etc.).\n   * User can select the amount to contribute to from available options\n   * to the publisher. These options are based on the SKUs defined in the Play\n   * console for a given publication.\n   * Each SKU has Amount, Period, SKUId and other attributes.\n   * @param {!OffersRequest=} options\n   * @return {?}\n   */\n  showContributionOptions(options) {}\n\n  /**\n   * Set the callback for the native subscribe request. Setting this callback\n   * triggers the \"native\" option in the offers flow.\n   * @param {function()} callback\n   * @return {?}\n   */\n  setOnNativeSubscribeRequest(callback) {}\n\n  /**\n   * Set the subscribe complete callback.\n   * @param {function(!Promise<!SubscribeResponse>)} callback\n   * @return {?}\n   */\n  setOnSubscribeResponse(callback) {}\n\n  /**\n   * Starts subscription purchase flow.\n   * @param {string} sku\n   * @return {?}\n   */\n  subscribe(sku) {}\n\n  /**\n   * Starts subscription purchase flow.\n   * @param {SubscriptionRequest} subscriptionRequest\n   * @return {?}\n   */\n  updateSubscription(subscriptionRequest) {}\n\n  /**\n   * Set the contribution complete callback.\n   * @param {function(!Promise<!SubscribeResponse>)} callback\n   * @return {?}\n   */\n  setOnContributionResponse(callback) {}\n\n  /**\n   * Set the payment complete callback.\n   * @param {function(!Promise<!SubscribeResponse>)} callback\n   * @return {?}\n   */\n  setOnPaymentResponse(callback) {}\n\n  /**\n   * Starts contributions purchase flow.\n   * @param {string|SubscriptionRequest} skuOrSubscriptionRequest\n   * @return {?}\n   */\n  contribute(skuOrSubscriptionRequest) {}\n\n  /**\n   * Starts the deferred account creation flow.\n   * See `DeferredAccountCreationRequest` for more details.\n   * @param {?DeferredAccountCreationRequest=} options\n   * @return {!Promise<!DeferredAccountCreationResponse>}\n   */\n  completeDeferredAccountCreation(options) {}\n\n  /**\n   * @param {function(!LoginRequest)} callback\n   * @return {?}\n   */\n  setOnLoginRequest(callback) {}\n\n  /**\n   * @param {!LoginRequest} request\n   * @return {?}\n   */\n  triggerLoginRequest(request) {}\n\n  /**\n   * Starts the login prompt flow.\n   * @return {!Promise}\n   */\n  showLoginPrompt() {}\n\n  /**\n   * Starts the login notification flow.\n   * @return {!Promise}\n   */\n  showLoginNotification() {}\n\n  /**\n   * @param {function()} callback\n   * @return {?}\n   */\n  setOnLinkComplete(callback) {}\n\n  /**\n   * @param {!Promise} accountPromise Publisher's promise to lookup account.\n   * @return {!Promise}\n   */\n  waitForSubscriptionLookup(accountPromise) {}\n\n  /**\n   * Starts the Account linking flow.\n   * TODO(dparikh): decide if it's only exposed for testing or PROD purposes.\n   * @param {{ampReaderId: (string|undefined)}=} params\n   * @return {?}\n   */\n  linkAccount(params) {}\n\n  /**\n   * Notifies the client that a flow has been started. The name of the flow\n   * is passed as the callback argument. The flow name corresponds to the\n   * method name in this interface, such as \"showOffers\", or \"subscribe\".\n   * See `SubscriptionFlows` for the full list.\n   *\n   * Also see `setOnFlowCanceled` method.\n   *\n   * @param {function({flow: string, data: !Object})} callback\n   * @return {?}\n   */\n  setOnFlowStarted(callback) {}\n\n  /**\n   * Notifies the client that a flow has been canceled. The name of the flow\n   * is passed as the callback argument. The flow name corresponds to the\n   * method name in this interface, such as \"showOffers\", or \"subscribe\".\n   * See `SubscriptionFlows` for the full list.\n   *\n   * Notice that some of the flows, such as \"subscribe\", could additionally\n   * have their own \"cancel\" events.\n   *\n   * Also see `setOnFlowStarted` method.\n   *\n   * @param {function({flow: string, data: !Object})} callback\n   * @return {?}\n   */\n  setOnFlowCanceled(callback) {}\n\n  /**\n   * Starts the save subscriptions flow.\n   * @param {!SaveSubscriptionRequestCallback} requestCallback\n   * @return {!Promise} a promise indicating flow is started\n   */\n  saveSubscription(requestCallback) {}\n\n  /**\n   * Creates an element with the SwG button style and the provided callback.\n   * The default theme is \"light\".\n   *\n   * @param {!ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {!Element}\n   */\n  createButton(optionsOrCallback, callback) {}\n\n  /**\n   * Attaches the SwG button style and the provided callback to an existing\n   * DOM element. The default theme is \"light\".\n   *\n   * @param {!Element} button\n   * @param {!ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {?}\n   */\n  attachButton(button, optionsOrCallback, callback) {}\n\n  /**\n   * Attaches smartButton element and the provided callback.\n   * The default theme is \"light\".\n   *\n   * @param {!Element} button\n   * @param {!SmartButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {?}\n   */\n  attachSmartButton(button, optionsOrCallback, callback) {}\n\n  /**\n   * Retrieves the propensity module that provides APIs to\n   * get propensity scores based on user state and events\n   * @return {!Promise<PropensityApi>}\n   */\n  getPropensityModule() {}\n\n  /** @return {!Promise<LoggerApi>} */\n  getLogger() {}\n\n  /** @return {!Promise<ClientEventManagerApi>} */\n  getEventManager() {}\n\n  /**\n   * Publishers participating in Showcase should call this with their own entitlements\n   * and entitlement related UI events.  SwG will automatically do this for Google\n   * sourced subscriptions and meters.\n   * @param {!PublisherEntitlement} entitlement\n   * @return {?}\n   */\n  setShowcaseEntitlement(entitlement) {}\n\n  /**\n   * Publishers, who both (1) participate in Showcase and (2) use server-side paywalls,\n   * should call this method to consume Showcase entitlements.\n   * @param {string} showcaseEntitlementJwt\n   * @param {?Function=} onCloseDialog Called after the user closes the dialog.\n   * @return {?}\n   */\n  consumeShowcaseEntitlementJwt(showcaseEntitlementJwt, onCloseDialog) {}\n\n  /**\n   * Intelligently returns the most interesting action to the\n   * reader based on different different user status. For\n   * instance, a new user may get free metering by simply\n   * clicking 'follow-publisher' action, and a frequently\n   * visiting user may be shown a 'creating an account' action.\n   * TODO(moonbong): Implement this function.\n   * @return {?}\n   */\n  showBestAudienceAction() {}\n}\n\n/** @enum {string} */\nexport const PublisherEntitlementEvent = {\n  // Events indicating content could potentially be unlocked\n  EVENT_SHOWCASE_METER_OFFERED: 'EVENT_SHOWCASE_METER_OFFERED', // This event is only required if the user can choose not to use a publisher meter\n\n  // Events indicating content was unlocked\n  EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION:\n    'EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION', // Publisher managed subscriptions only\n  EVENT_SHOWCASE_UNLOCKED_BY_METER: 'EVENT_SHOWCASE_UNLOCKED_BY_METER', // Publisher managed meters only\n  EVENT_SHOWCASE_UNLOCKED_FREE_PAGE: 'EVENT_SHOWCASE_UNLOCKED_FREE_PAGE', // When the article is free for any reason (lead article, etc)\n\n  // Events indicating the user must take action to view content\n  EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL:\n    'EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL', // When the user must register (or log in) to view the article\n\n  // Events indicating the user must subscribe to view content\n  EVENT_SHOWCASE_INELIGIBLE_PAYWALL: 'EVENT_SHOWCASE_INELIGIBLE_PAYWALL', // When the user is not eligible for showcase entitlements\n  EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL:\n    'EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL', // When the user has no remaining showcase entitlements\n};\n\n/**\n * PublisherEntitlement\n *   In order to participate in News Showcase, publishers must report information about their entitlements.\n * Properties:\n * - isUserRegistered: Is the user registered currently?\n * - entitlement: Publisher entitlement event type.\n *  @typedef {{\n *    isUserRegistered:  !boolean,\n *    entitlement: !PublisherEntitlementEvent,\n * }}\n */\nexport let PublisherEntitlement;\n\n/** @enum {string} */\nexport const SubscriptionFlows = {\n  SHOW_OFFERS: 'showOffers',\n  SHOW_SUBSCRIBE_OPTION: 'showSubscribeOption',\n  SHOW_ABBRV_OFFER: 'showAbbrvOffer',\n  SHOW_CONTRIBUTION_OPTIONS: 'showContributionOptions',\n  SUBSCRIBE: 'subscribe',\n  CONTRIBUTE: 'contribute',\n  COMPLETE_DEFERRED_ACCOUNT_CREATION: 'completeDeferredAccountCreation',\n  LINK_ACCOUNT: 'linkAccount',\n  SHOW_LOGIN_PROMPT: 'showLoginPrompt',\n  SHOW_LOGIN_NOTIFICATION: 'showLoginNotification',\n  SHOW_METER_TOAST: 'showMeterToast',\n};\n\n/**\n * Configuration properties:\n * - windowOpenMode - either \"auto\" or \"redirect\". The \"redirect\" value will\n *   force redirect flow for any window.open operation, including payments.\n *   The \"auto\" value either uses a redirect or a popup flow depending on\n *   what's possible on a specific environment. Defaults to \"auto\".\n * - enableSwgAnalytics - if set to true then events logged by the publisher's\n *   client will be sent to Google's SwG analytics service.  This information is\n *   used to compare the effectiveness of Google's buy-flow events to those\n *   generated by the publisher's client code.  This includes events sent to\n *   both PropensityApi and LoggerApi.\n * - enablePropensity - If true events from the logger api are sent to the\n *   propensity server.  Note events from the legacy propensity endpoint are\n *   always sent.\n * @typedef {{\n *   experiments: (!Array<string>|undefined),\n *   windowOpenMode: (!WindowOpenMode|undefined),\n *   analyticsMode: (!AnalyticsMode|undefined),\n *   enableSwgAnalytics: (boolean|undefined),\n *   enablePropensity: (boolean|undefined),\n * }}\n */\nexport let Config;\n\n/**\n * Params for GetEntitlements requests to SwG Client.\n * swg-js constructs objects of this type, but publisher JS won't.\n * swg-js converts these params to a Base64 JSON string\n * before sending them to SwG Client.\n * @typedef {{\n *   metering: (!GetEntitlementsMeteringParamsInternal|undefined),\n * }}\n */\nexport let GetEntitlementsParamsInternalDef;\n\n/**\n * Encryption params for GetEntitlements requests.\n * @typedef {{\n *   encryptedDocumentKey: string,\n *   swgUserToken: (string|undefined),\n * }}\n */\nexport let GetEntitlementsEncryptionParams;\n\n/**\n * Metering params for GetEntitlements requests to SwG Client.\n * swg-js constructs objects of this type, but publisher JS won't.\n * @typedef {{\n *   clientTypes: !Array<number>,\n *   owner: string,\n *   state: {\n *     id: string,\n *     attributes: !Array<{\n *       name: string,\n *       timestamp: number,\n *     }>,\n *   },\n *   resource: {\n *     hashedCanonicalUrl: string,\n *   },\n * }}\n */\nexport let GetEntitlementsMeteringParamsInternal;\n\n/**\n * Params for `getEntitlements` calls from publisher JS.\n * swg-js converts objects of this type to GetEntitlementsParamsInternal.\n * @typedef {{\n *   encryption: (!GetEntitlementsEncryptionParams|undefined),\n *   metering: (!GetEntitlementsMeteringParamsExternal|undefined),\n * }}\n */\nexport let GetEntitlementsParamsExternalDef;\n\n/**\n * Params for `getEntitlements` calls from publisher JS.\n * swg-js converts objects of this type to GetEntitlementsMeteringParamsInternal.\n * @typedef {{\n *   clientTypes: !Array<number>,\n *   owner: string,\n *   state: {\n *     id: string,\n *     standardAttributes: !Object<string, {\n *       timestamp: number,\n *     }>,\n *     customAttributes: !Object<string, {\n *       timestamp: number,\n *     }>,\n *   },\n *   resource: {\n *     hashedCanonicalUrl: string,\n *   },\n * }}\n */\nexport let GetEntitlementsMeteringParamsExternal;\n\n/**\n * @enum {number}\n */\nexport const AnalyticsMode = {\n  DEFAULT: 0,\n  IMPRESSIONS: 1,\n};\n\n/**\n * @enum {string}\n */\nexport const WindowOpenMode = {\n  AUTO: 'auto',\n  REDIRECT: 'redirect',\n};\n\n/**\n * @enum {string}\n */\nexport const ReplaceSkuProrationMode = {\n  // The replacement takes effect immediately, and the remaining time will\n  // be prorated and credited to the user. This is the current default\n  // behavior.\n  IMMEDIATE_WITH_TIME_PRORATION: 'IMMEDIATE_WITH_TIME_PRORATION',\n};\n\n/**\n * The Offers/Contributions UI is rendered differently based on the\n * ProductType. The ProductType parameter is passed to the Payments flow, and\n * then passed back to the Payments confirmation page to render messages/text\n * based on the ProductType.\n * @enum {string}\n */\nexport const ProductType = {\n  SUBSCRIPTION: 'SUBSCRIPTION',\n  UI_CONTRIBUTION: 'UI_CONTRIBUTION',\n};\n\n/**\n * @return {!Config}\n */\nexport function defaultConfig() {\n  return {\n    windowOpenMode: WindowOpenMode.AUTO,\n    analyticsMode: AnalyticsMode.DEFAULT,\n    enableSwgAnalytics: false,\n    enablePropensity: false,\n  };\n}\n\n/**\n * Properties:\n * - skus - a list of SKUs to return from the defined or default list. The\n *   order is preserved.\n * - list - a predefined list of SKUs. Use of this property is uncommon.\n *   Possible values are \"default\" and \"amp\". Default is \"default\".\n * - isClosable - a boolean value to determine whether the view is closable.\n *\n * @typedef {{\n *   skus: (!Array<string>|undefined),\n *   list: (string|undefined),\n *   isClosable: (boolean|undefined),\n * }}\n */\nexport let OffersRequest;\n\n/**\n * @typedef {{\n *   linkRequested: boolean,\n * }}\n */\nexport let LoginRequest;\n\n/**\n * Properties:\n * - one and only one of \"token\" or \"authCode\"\n * AuthCode reference: https://developers.google.com/actions/identity/oauth2-code-flow\n * Token reference: https://developers.google.com/actions/identity/oauth2-implicit-flow\n * @typedef {{\n *   token: (string|undefined),\n *   authCode: (string|undefined),\n * }}\n */\nexport let SaveSubscriptionRequest;\n\n/**\n * Callback for retrieving subscription request\n *\n * @typedef {function():(!Promise<SaveSubscriptionRequest> | !SaveSubscriptionRequest)} SaveSubscriptionRequestCallback\n */\nexport let SaveSubscriptionRequestCallback;\n\n/**\n * Properties:\n * - lang: Sets the button SVG and title. Default is \"en\".\n * - theme: \"light\" or \"dark\". Default is \"light\".\n *\n * @typedef {{\n *   theme: (string|undefined),\n *   lang: (string|undefined),\n * }}\n */\nexport let ButtonOptions;\n\n/**\n * Properties:\n * - lang: Sets the button SVG and title. Default is \"en\".\n * - theme: \"light\" or \"dark\". Default is \"light\".\n * - messageTextColor: Overrides theme color for message text. (ex: \"#09f\")\n *\n * @typedef {{\n *   theme: (string|undefined),\n *   lang: (string|undefined),\n *   messageTextColor: (string|undefined),\n * }}\n */\nexport let SmartButtonOptions;\n\n/**\n * Properties:\n * - sku: Required. Sku to add to the user's subscriptions.\n * - oldSku: Optional. This is if you want to replace one sku with another. For\n *  example, if a user wants to upgrade or downgrade their current subscription.\n * - prorationMode: Optional. When replacing a subscription you can decide on a\n *  specific proration mode to charge the user.\n *  The default is IMMEDIATE_WITH_TIME_PRORATION.\n * - oneTime: Optional. When a user chooses a contribution, they have the option\n *  to make it non-recurring.\n *\n *  @typedef {{\n *    skuId: string,\n *    oldSku: (string|undefined),\n *    replaceSkuProrationMode: (ReplaceSkuProrationMode|undefined),\n *    oneTime: (boolean|undefined),\n * }}\n */\nexport let SubscriptionRequest;\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n */\nexport class UserData {\n  /**\n   * @param {string} idToken\n   * @param {!Object} data\n   */\n  constructor(idToken, data) {\n    /** @const {string} */\n    this.idToken = idToken;\n    /** @const {!Object} */\n    this.data = data;\n\n    /** @const {string} */\n    this.id = data['sub'];\n    /** @const {string} */\n    this.email = data['email'];\n    /** @const {boolean} */\n    this.emailVerified = data['email_verified'];\n    /** @const {string} */\n    this.name = data['name'];\n    /** @const {string} */\n    this.givenName = data['given_name'];\n    /** @const {string} */\n    this.familyName = data['family_name'];\n    /** @const {string} */\n    this.pictureUrl = data['picture'];\n  }\n\n  /**\n   * @return {!UserData}\n   */\n  clone() {\n    return new UserData(this.idToken, this.data);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'id': this.id,\n      'email': this.email,\n      'emailVerified': this.emailVerified,\n      'name': this.name,\n      'givenName': this.givenName,\n      'familyName': this.familyName,\n      'pictureUrl': this.pictureUrl,\n    };\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  AnalyticsRequest,\n  EventOriginator,\n  deserialize,\n  getLabel,\n} from '../proto/api_messages';\n\nconst {\n  ActivityIframePort: WebActivityIframePort,\n  ActivityPorts: WebActivityPorts,\n} = require('web-activities/activity-ports');\n\n/**\n * @interface\n */\nexport class ActivityPortDef {\n  /**\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {}\n}\n/**\n * @interface\n */\nexport class ActivityPort extends ActivityPortDef {\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!web-activities/activity-ports.ActivityMode}\n   */\n  getMode() {}\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   * @override\n   */\n  acceptResult() {}\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {}\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {}\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {}\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} unusedCallback\n   */\n  onResizeRequest(unusedCallback) {}\n\n  /**\n   * @param {!../proto/api_messages.Message} unusedRequest\n   */\n  execute(unusedRequest) {}\n\n  /**\n   * @param {!function(new: T)} unusedMessage\n   * @param {function(Object)} unusedCallback\n   * @template T\n   */\n  on(unusedMessage, unusedCallback) {}\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {}\n}\n/**\n * @implements {ActivityPortDef}\n */\nclass ActivityPortDeprecated {\n  /**\n   * @param {!web-activities/activity-ports.ActivityPort} port\n   */\n  constructor(port) {\n    /** @private @const {!web-activities/activity-ports.ActivityPort} */\n    this.port_ = port;\n  }\n\n  /**\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {\n    return this.port_.acceptResult();\n  }\n}\n\n/**\n * @implements {ActivityPortDef}\n */\nexport class ActivityIframePort {\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {!../runtime/deps.DepsDef} deps\n   * @param {?Object=} args\n   */\n  constructor(iframe, url, deps, args) {\n    /** @private @const {!web-activities/activity-ports.ActivityIframePort} */\n    this.iframePort_ = new WebActivityIframePort(iframe, url, args);\n    /** @private @const {!Object<string, function(!../proto/api_messages.Message)>} */\n    this.callbackMap_ = {};\n\n    /** @private @const {../runtime/deps.DepsDef} */\n    this.deps_ = deps;\n  }\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.iframePort_.whenReady();\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {\n    return this.iframePort_.connect().then(() => {\n      // Attach a callback to receive messages after connection complete\n      this.iframePort_.onMessage((data) => {\n        const response = data && data['RESPONSE'];\n        if (!response) {\n          return;\n        }\n        const cb = this.callbackMap_[response[0]];\n        if (cb) {\n          cb(deserialize(response));\n        }\n      });\n\n      if (this.deps_ && this.deps_.eventManager()) {\n        this.on(AnalyticsRequest, (request) => {\n          const analyticsRequest = /** @type {AnalyticsRequest} */ (request);\n          this.deps_.eventManager().logEvent({\n            eventType: analyticsRequest.getEvent(),\n            eventOriginator: EventOriginator.SWG_SERVER,\n            isFromUserAction: analyticsRequest.getMeta().getIsFromUserAction(),\n            additionalParameters: analyticsRequest.getParams(),\n          });\n        });\n      }\n    });\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    this.iframePort_.disconnect();\n  }\n\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!web-activities/activity-ports.ActivityMode}\n   */\n  getMode() {\n    return this.iframePort_.getMode();\n  }\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   * @override\n   */\n  acceptResult() {\n    return this.iframePort_.acceptResult();\n  }\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} callback\n   */\n  onResizeRequest(callback) {\n    return this.iframePort_.onResizeRequest(callback);\n  }\n\n  /**\n   * @param {!../proto/api_messages.Message} request\n   */\n  execute(request) {\n    this.iframePort_.message({'REQUEST': request.toArray()});\n  }\n\n  /**\n   * @param {!function(new: T)} message\n   * @param {function(?)} callback\n   * @template T\n   */\n  on(message, callback) {\n    let label = null;\n    try {\n      label = getLabel(message);\n    } catch (ex) {\n      // Thrown if message is not a proto object and has no label\n      label = null;\n    }\n    if (!label) {\n      throw new Error('Invalid data type');\n    } else if (this.callbackMap_[label]) {\n      throw new Error('Invalid type or duplicate callback for ', label);\n    }\n    this.callbackMap_[label] = callback;\n  }\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {\n    this.iframePort_.resized();\n  }\n}\n\nexport class ActivityPorts {\n  /**\n   * @param {!../runtime/deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!../runtime/deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = new WebActivityPorts(deps.win());\n  }\n\n  /**\n   * Adds client version, publication, product and logging context information.\n   * @param {?Object=} args\n   * @return {!Object}\n   */\n  addDefaultArguments(args) {\n    const deps = this.deps_;\n    const pageConfig = deps.pageConfig();\n    const context = deps.analytics().getContext();\n    return Object.assign(\n      {\n        'analyticsContext': context.toArray(),\n        'publicationId': pageConfig.getPublicationId(),\n        'productId': pageConfig.getProductId(),\n        '_client': 'SwG $internalRuntimeVersion$',\n        'supportsEventManager': true,\n      },\n      args || {}\n    );\n  }\n\n  /*\n   * Start an activity within the specified iframe.\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} args\n   * @return {!Promise<!ActivityIframePort>}\n   */\n  openActivityIframePort_(iframe, url, args) {\n    const activityPort = new ActivityIframePort(iframe, url, this.deps_, args);\n    return activityPort.connect().then(() => activityPort);\n  }\n\n  /**\n   * Start an activity within the specified iframe.\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} args\n   * @param {boolean=} addDefaultArguments\n   * @return {!Promise<!ActivityIframePort>}\n   */\n  openIframe(iframe, url, args, addDefaultArguments = false) {\n    if (addDefaultArguments) {\n      args = this.addDefaultArguments(args);\n    }\n    return this.openActivityIframePort_(iframe, url, args);\n  }\n\n  /**\n   * Start an activity in a separate window. The result will be delivered\n   * to the `onResult` callback.\n   *\n   * The activity can be opened in two modes: \"popup\" and \"redirect\". This\n   * depends on the `target` value, but also on the browser/environment.\n   *\n   * The allowed `target` values are `_blank`, `_top` and name targets. The\n   * `_self`, `_parent` and similar targets are not allowed.\n   *\n   * The `_top` target indicates that the activity should be opened as a\n   * \"redirect\", while other targets indicate that the activity should be\n   * opened as a popup. The activity client will try to honor the requested\n   * target. However, it's not always possible. Some environments do not\n   * allow popups and they either force redirect or fail the window open\n   * request. In this case, the activity will try to fallback to the \"redirect\"\n   * mode.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} args\n   * @param {?web-activities/activity-ports.ActivityOpenOptions=} options\n   * @param {boolean=} addDefaultArguments\n   * @return {{targetWin: ?Window}}\n   */\n  open(requestId, url, target, args, options, addDefaultArguments = false) {\n    if (addDefaultArguments) {\n      args = this.addDefaultArguments(args);\n    }\n    return this.activityPorts_.open(requestId, url, target, args, options);\n  }\n\n  /**\n   * Registers the callback for the result of the activity opened with the\n   * specified `requestId` (see the `open()` method). The callback is a\n   * function that takes a single `ActivityPort` argument. The client\n   * can use this object to verify the port using it's origin, verified and\n   * secure channel flags. Then the client can call\n   * `ActivityPort.acceptResult()` method to accept the result.\n   *\n   * The activity result is handled via a separate callback because of a\n   * possible redirect. So use of direct callbacks and/or promises is not\n   * possible in that case.\n   *\n   * A typical implementation would look like:\n   * ```\n   * ports.onResult('request1', function(port) {\n   *   port.acceptResult().then(function(result) {\n   *     // Only verified origins are allowed.\n   *     if (result.origin == expectedOrigin &&\n   *         result.originVerified &&\n   *         result.secureChannel) {\n   *       handleResultForRequest1(result);\n   *     }\n   *   });\n   * })\n   *\n   * ports.open('request1', request1Url, '_blank');\n   * ```\n   *\n   * @param {string} requestId\n   * @param {function(!ActivityPortDef)} callback\n   */\n  onResult(requestId, callback) {\n    this.activityPorts_.onResult(requestId, (port) => {\n      callback(new ActivityPortDeprecated(port));\n    });\n  }\n\n  /**\n   * @param {function(!Error)} handler\n   */\n  onRedirectError(handler) {\n    this.activityPorts_.onRedirectError(handler);\n  }\n\n  /**\n   * @return {!web-activities/activity-ports.ActivityPorts}\n   */\n  getOriginalWebActivityPorts() {\n    return this.activityPorts_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Dialog} from './dialog';\nimport {Graypane} from './graypane';\nimport {isCancelError} from '../utils/errors';\n\nconst POPUP_Z_INDEX = 2147483647;\n\n/**\n * The class for the top level dialog.\n * @final\n */\nexport class DialogManager {\n  /**\n   * @param {!../model/doc.Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private {?Dialog} */\n    this.dialog_ = null;\n\n    /** @private {?Promise<!Dialog>} */\n    this.openPromise_ = null;\n\n    /** @private @const {!Graypane} */\n    this.popupGraypane_ = new Graypane(doc, POPUP_Z_INDEX);\n\n    /** @private {?Window} */\n    this.popupWin_ = null;\n\n    this.popupGraypane_.getElement().addEventListener('click', () => {\n      if (this.popupWin_) {\n        try {\n          this.popupWin_.focus();\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n    });\n  }\n\n  /**\n   * @param {boolean=} hidden\n   * @return {!Promise<!Dialog>}\n   */\n  openDialog(hidden = false) {\n    if (!this.openPromise_) {\n      this.dialog_ = new Dialog(this.doc_);\n      this.openPromise_ = this.dialog_.open(hidden);\n    }\n    return this.openPromise_;\n  }\n\n  /**\n   * @param {!./view.View} view\n   * @param {boolean=} hidden\n   * @return {!Promise}\n   */\n  openView(view, hidden = false) {\n    this.handleCancellations(view);\n    return this.openDialog(hidden).then((dialog) => dialog.openView(view));\n  }\n\n  /**\n   * Handles cancellations (ex: user clicks close button on dialog).\n   * @param {!./view.View} view\n   * @return {!Promise}\n   */\n  handleCancellations(view) {\n    return view.whenComplete().catch((reason) => {\n      if (isCancelError(reason)) {\n        this.completeView(view);\n      }\n      throw reason;\n    });\n  }\n\n  /**\n   * @param {?./view.View} view\n   */\n  completeView(view) {\n    // Give a small amount of time for another view to take over the dialog.\n    setTimeout(() => {\n      if (this.dialog_ && this.dialog_.getCurrentView() == view) {\n        this.close_();\n      }\n    }, 100);\n  }\n\n  /**\n   */\n  completeAll() {\n    if (this.dialog_) {\n      this.close_();\n    }\n    if (this.popupGraypane_.isAttached()) {\n      this.popupGraypane_.destroy();\n    }\n  }\n\n  /**\n   * @returns {?Dialog}\n   */\n  getDialog() {\n    return this.dialog_;\n  }\n\n  /** @private */\n  close_() {\n    this.dialog_.close();\n    this.dialog_ = null;\n    this.openPromise_ = null;\n  }\n\n  /**\n   * @param {?Window|undefined} targetWin\n   */\n  popupOpened(targetWin) {\n    this.popupWin_ = targetWin || null;\n    if (!this.popupGraypane_.isAttached()) {\n      this.popupGraypane_.attach();\n    }\n    this.popupGraypane_.show();\n  }\n\n  /**\n   */\n  popupClosed() {\n    this.popupWin_ = null;\n    try {\n      this.popupGraypane_.hide();\n    } catch (e) {\n      // Ignore.\n    }\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {CSS as DIALOG_CSS} from '../../build/css/ui/ui.css';\nimport {FriendlyIframe} from './friendly-iframe';\nimport {Graypane} from './graypane';\nimport {LoadingView} from '../ui/loading-view';\nimport {\n  createElement,\n  injectStyleSheet,\n  removeChildren,\n  removeElement,\n} from '../utils/dom';\nimport {resolveDoc} from '../model/doc';\nimport {setImportantStyles, setStyles} from '../utils/style';\nimport {transition} from '../utils/animation';\n\nconst Z_INDEX = 2147483647;\n\n/**\n * Default iframe important styles.\n * Note: The iframe responsiveness media query style is injected in the\n * publisher's page since style attribute can not include media query.\n * @const {!Object<string, string|number>}\n */\nconst rootElementImportantStyles = {\n  'min-height': '50px',\n  'border': 'none',\n  'display': 'block',\n  'position': 'fixed',\n  'z-index': Z_INDEX,\n  'box-sizing': 'border-box',\n};\n\n/**\n * Reset view styles.\n * @const {!Object<string, string|number>}\n */\nconst resetViewStyles = {\n  'position': 'absolute',\n  'top': '0',\n  'left': '0',\n  'right': '0',\n  'bottom': '0',\n  'opacity': 0,\n  /* These lines are a work around to this issue in iOS:     */\n  /* https://bugs.webkit.org/show_bug.cgi?id=155198          */\n  'height': 0,\n  'max-height': '100%',\n  'max-width': '100%',\n  'min-height': '100%',\n  'min-width': '100%',\n  'width': 0,\n};\n\n/**\n * Position of the dialog.\n * @const @enum {string}\n */\nconst PositionAt = {\n  BOTTOM: 'BOTTOM',\n  TOP: 'TOP',\n  FLOAT: 'FLOAT',\n  FULL: 'FULL',\n};\n\n/**\n * The class for the top level dialog.\n * @final\n */\nexport class Dialog {\n  /**\n   * Create a dialog for the provided doc.\n   * @param {!../model/doc.Doc} doc\n   * @param {!Object<string, string|number>=} importantStyles\n   * @param {!Object<string, string|number>=} styles\n   */\n  constructor(doc, importantStyles = {}, styles = {}) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!FriendlyIframe} */\n    this.iframe_ = new FriendlyIframe(doc.getWin().document, {\n      'class': 'swg-dialog',\n    });\n\n    /** @private @const {!Graypane} */\n    this.graypane_ = new Graypane(doc, Z_INDEX - 1);\n\n    const modifiedImportantStyles = Object.assign(\n      {},\n      rootElementImportantStyles,\n      importantStyles\n    );\n    setImportantStyles(this.iframe_.getElement(), modifiedImportantStyles);\n\n    setStyles(this.iframe_.getElement(), styles);\n\n    /** @private {LoadingView} */\n    this.loadingView_ = null;\n\n    /** @private {?Element} */\n    this.container_ = null; // Depends on constructed document inside iframe.\n\n    /** @private {?./view.View} */\n    this.view_ = null;\n\n    /** @private {?Promise} */\n    this.animating_ = null;\n\n    /** @private {boolean} */\n    this.hidden_ = false;\n\n    /** @private {?./view.View} */\n    this.previousProgressView_ = null;\n\n    /** @private {boolean} */\n    this.useFixedLayer_ = false;\n  }\n\n  /**\n   * Opens the dialog and builds the iframe container.\n   * @param {boolean=} hidden\n   * @return {!Promise<!Dialog>}\n   */\n  open(hidden = false) {\n    const iframe = this.iframe_;\n    if (iframe.isConnected()) {\n      throw new Error('already opened');\n    }\n\n    // Attach.\n    this.doc_.getBody().appendChild(iframe.getElement()); // Fires onload.\n\n    this.graypane_.attach();\n\n    if (hidden) {\n      setImportantStyles(iframe.getElement(), {\n        'visibility': 'hidden',\n        'opacity': 0,\n      });\n      this.hidden_ = hidden;\n    } else {\n      this.show_();\n    }\n\n    if (this.useFixedLayer_) {\n      return this.doc_\n        .addToFixedLayer(iframe.getElement())\n        .then(() => iframe.whenReady())\n        .then(() => {\n          this.buildIframe_();\n          return this;\n        });\n    } else {\n      return iframe.whenReady().then(() => {\n        this.buildIframe_();\n        return this;\n      });\n    }\n  }\n\n  /**\n   * Build the iframe with the styling after iframe is loaded.\n   * @private\n   */\n  buildIframe_() {\n    const iframe = this.iframe_;\n    const iframeBody = iframe.getBody();\n    const iframeDoc = /** @type {!HTMLDocument} */ (this.iframe_.getDocument());\n\n    // Inject Google fonts in <HEAD> section of the iframe.\n    injectStyleSheet(resolveDoc(iframeDoc), DIALOG_CSS);\n\n    // Add Loading indicator.\n    this.loadingView_ = new LoadingView(iframeDoc);\n    iframeBody.appendChild(this.loadingView_.getElement());\n\n    // Container for all dynamic content, including 3P iframe.\n    this.container_ = createElement(iframeDoc, 'swg-container', {});\n    iframeBody.appendChild(this.container_);\n    this.setPosition_();\n  }\n\n  /**\n   * Closes the dialog.\n   * @param {boolean=} animated\n   * @return {!Promise}\n   */\n  close(animated = true) {\n    let animating;\n    if (animated) {\n      animating = this.animate_(() => {\n        this.graypane_.hide(/* animate */ true);\n        return transition(\n          this.getElement(),\n          {\n            'transform': 'translateY(100%)',\n          },\n          300,\n          'ease-out'\n        );\n      });\n    } else {\n      animating = Promise.resolve();\n    }\n    return animating.then(() => {\n      const iframeEl = this.iframe_.getElement();\n      iframeEl.parentNode.removeChild(iframeEl);\n\n      this.removePaddingToHtml_();\n      this.graypane_.destroy();\n    });\n  }\n\n  /**\n   * Gets the container within the dialog.\n   * @return {!Element}\n   */\n  getContainer() {\n    if (!this.container_) {\n      throw new Error('not opened yet');\n    }\n    return this.container_;\n  }\n\n  /**\n   * Gets the attached iframe instance.\n   * @return {!FriendlyIframe}\n   */\n  getIframe() {\n    return this.iframe_;\n  }\n\n  /**\n   * Gets the Iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_.getElement();\n  }\n\n  /**\n   * Gets the LoadingView for this dialog.\n   * @return {LoadingView}\n   */\n  getLoadingView() {\n    return this.loadingView_;\n  }\n\n  /**\n   * Transitions to the next view.\n   * @private\n   */\n  entryTransitionToNextView_() {\n    if (this.view_ && this.view_.hasLoadingIndicator()) {\n      // Temporarily cache the old view.\n      this.previousProgressView_ = this.view_;\n    } else {\n      // Since loading indicator will be shown, remove contents of old view.\n      removeChildren(this.getContainer());\n      // When loading indicator was not displayed in the previous view,\n      // loading indicator must be displayed while transitioning to new view.\n      this.loadingView_.show();\n    }\n  }\n\n  /**\n   * Transition out of an old view.\n   * @private\n   */\n  exitTransitionFromOldView_() {\n    // If previous view is still around, remove it.\n    if (this.previousProgressView_) {\n      removeElement(this.previousProgressView_.getElement());\n      this.previousProgressView_ = null;\n    } else {\n      this.loadingView_.hide();\n    }\n  }\n\n  /** @return {?./view.View} */\n  getCurrentView() {\n    return this.view_;\n  }\n\n  /**\n   * Opens the given view and removes existing view from the DOM if any.\n   * @param {!./view.View} view\n   * @return {!Promise}\n   */\n  openView(view) {\n    setImportantStyles(view.getElement(), resetViewStyles);\n    this.entryTransitionToNextView_();\n\n    this.view_ = view;\n    this.getContainer().appendChild(view.getElement());\n\n    // If the current view should fade the parent document.\n    if (view.shouldFadeBody() && !this.hidden_) {\n      this.graypane_.show(/* animate */ true);\n    }\n\n    return view.init(this).then(() => {\n      setImportantStyles(view.getElement(), {\n        'opacity': 1,\n      });\n      if (this.hidden_) {\n        if (view.shouldFadeBody()) {\n          this.graypane_.show(/* animated */ true);\n        }\n        this.show_();\n      }\n      this.exitTransitionFromOldView_();\n    });\n  }\n\n  /**\n   * Show the iframe.\n   * @private\n   */\n  show_() {\n    this.animate_(() => {\n      setImportantStyles(this.getElement(), {\n        'transform': 'translateY(100%)',\n        'opactiy': 1,\n        'visibility': 'visible',\n      });\n      return transition(\n        this.getElement(),\n        {\n          'transform': 'translateY(0)',\n          'opacity': 1,\n          'visibility': 'visible',\n        },\n        300,\n        'ease-out'\n      );\n    });\n    this.hidden_ = false;\n  }\n\n  /**\n   * Resizes the dialog container.\n   * @param {!./view.View} view\n   * @param {number} height\n   * @param {boolean=} animated\n   * @return {?Promise}\n   */\n  resizeView(view, height, animated = true) {\n    if (this.view_ != view) {\n      return null;\n    }\n    const newHeight = this.getMaxAllowedHeight_(height);\n\n    let animating;\n    if (animated) {\n      const oldHeight = this.getElement().offsetHeight;\n      if (newHeight >= oldHeight) {\n        // Expand.\n        animating = this.animate_(() => {\n          setImportantStyles(this.getElement(), {\n            'height': `${newHeight}px`,\n            'transform': `translateY(${newHeight - oldHeight}px)`,\n          });\n          return transition(\n            this.getElement(),\n            {\n              'transform': 'translateY(0)',\n            },\n            300,\n            'ease-out'\n          );\n        });\n      } else {\n        // Collapse.\n        animating = this.animate_(() => {\n          return transition(\n            this.getElement(),\n            {\n              'transform': `translateY(${oldHeight - newHeight}px)`,\n            },\n            300,\n            'ease-out'\n          ).then(() => {\n            setImportantStyles(this.getElement(), {\n              'height': `${newHeight}px`,\n              'transform': 'translateY(0)',\n            });\n          });\n        });\n      }\n    } else {\n      setImportantStyles(this.getElement(), {\n        'height': `${newHeight}px`,\n      });\n      animating = Promise.resolve();\n    }\n    return animating.then(() => {\n      this.updatePaddingToHtml_(height);\n      view.resized();\n    });\n  }\n\n  /**\n   * @param {function():!Promise} callback\n   * @return {!Promise}\n   * @private\n   */\n  animate_(callback) {\n    const wait = this.animating_ || Promise.resolve();\n    return (this.animating_ = wait\n      .then(\n        () => {\n          return callback();\n        },\n        () => {\n          // Ignore errors to make sure animations don't get stuck.\n        }\n      )\n      .then(() => {\n        this.animating_ = null;\n      }));\n  }\n\n  /**\n   * Returns maximum allowed height for current viewport.\n   * @param {number} height\n   * @return {number}\n   * @private\n   */\n  getMaxAllowedHeight_(height) {\n    return Math.min(height, this.doc_.getWin()./*OK*/ innerHeight * 0.9);\n  }\n\n  /**\n   * Gets the element's height.\n   * @return {number}\n   * @private\n   */\n  getHeight_() {\n    return this.getElement().offsetHeight;\n  }\n\n  /**\n   * Sets the position of the dialog. Currently 'BOTTOM' is set by default.\n   */\n  setPosition_() {\n    setImportantStyles(this.getElement(), this.getPositionStyle_());\n  }\n\n  /**\n   * Add the padding to the containing page so as to not hide the content\n   * behind the popup, if rendered at the bottom.\n   * @param {number} newHeight\n   * @private\n   */\n  updatePaddingToHtml_(newHeight) {\n    if (this.inferPosition_() == PositionAt.BOTTOM) {\n      const bottomPadding = newHeight + 20; // Add some extra padding.\n      const htmlElement = this.doc_.getRootElement();\n      setImportantStyles(htmlElement, {\n        'padding-bottom': `${bottomPadding}px`,\n      });\n    }\n  }\n\n  /**\n   * Removes previouly added bottom padding from the document.\n   * @private\n   */\n  removePaddingToHtml_() {\n    this.doc_.getRootElement().style.removeProperty('padding-bottom');\n  }\n\n  /**\n   * Calculates the position of the dialog. Currently dialog is positioned at\n   * the bottom only. This could change in future to adjust the dialog position\n   * based on the screen size.\n   * @return {string}\n   * @private\n   */\n  inferPosition_() {\n    return PositionAt.BOTTOM;\n  }\n\n  /**\n   * Returns the styles required to postion the dialog.\n   * @return {!Object<string, string|number>}\n   * @private\n   */\n  getPositionStyle_() {\n    const dialogPosition = this.inferPosition_();\n    switch (dialogPosition) {\n      case PositionAt.BOTTOM:\n        return {'bottom': 0};\n      case PositionAt.TOP:\n        return {'top': 0};\n      case PositionAt.FLOAT:\n        return {\n          'position': 'fixed',\n          'top': '50%',\n          'left': '50%',\n          'transform': 'translate(-50%, -50%)',\n        };\n      case PositionAt.FULL:\n        return {\n          'position': 'fixed',\n          'height': '100%',\n          'top': 0,\n          'bottom': 0,\n        };\n      default:\n        return {'bottom': 0};\n    }\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement, isConnected} from '../utils/dom';\nimport {resetAllStyles} from '../utils/style';\n\n/** @const {!Object<string|number>} */\nconst friendlyIframeAttributes = {\n  'frameborder': 0,\n  'scrolling': 'no',\n  'src': 'about:blank',\n};\n\n/**\n * The class for building friendly iframe.\n */\nexport class FriendlyIframe {\n  /**\n   * @param {!Document} doc\n   * @param {!Object<string, string|number>=} attrs\n   */\n  constructor(doc, attrs = {}) {\n    const mergedAttrs = Object.assign({}, friendlyIframeAttributes, attrs);\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      doc,\n      'iframe',\n      mergedAttrs\n    ));\n\n    // Ensure that the new iframe does not inherit any CSS styles.\n    resetAllStyles(this.iframe_);\n\n    /** @private @const {!Promise} */\n    this.ready_ = new Promise((resolve) => {\n      this.iframe_.onload = resolve;\n    });\n  }\n\n  /**\n   * When promise is resolved.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.ready_;\n  }\n\n  /**\n   * Gets the iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * Gets the document object of the iframe element.\n   * @return {!Document}\n   */\n  getDocument() {\n    const doc =\n      this.getElement().contentDocument ||\n      (this.getElement().contentWindow &&\n        this.getElement().contentWindow.document);\n\n    if (!doc) {\n      throw new Error('not loaded');\n    }\n    return doc;\n  }\n\n  /**\n   * Gets the body of the iframe.\n   * @return {!Element}\n   */\n  getBody() {\n    return /** @type {!Element} */ (this.getDocument().body);\n  }\n\n  /**\n   * Whether the iframe is connected.\n   * @return {boolean}\n   */\n  isConnected() {\n    return isConnected(this.getElement());\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {setImportantStyles} from '../utils/style';\nimport {transition} from '../utils/animation';\n\nexport class Graypane {\n  /**\n   * @param {!../model/doc.Doc} doc\n   * @param {number} zIndex\n   */\n  constructor(doc, zIndex) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.fadeBackground_ = this.doc_\n      .getWin()\n      .document.createElement('swg-popup-background');\n    setImportantStyles(this.fadeBackground_, {\n      'z-index': zIndex,\n      'display': 'none',\n      'position': 'fixed',\n      'top': 0,\n      'right': 0,\n      'bottom': 0,\n      'left': 0,\n      'background-color': 'rgba(32, 33, 36, .6)',\n    });\n  }\n\n  /**\n   * @return {!Element}\n   */\n  getElement() {\n    return this.fadeBackground_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isAttached() {\n    return !!this.fadeBackground_.parentNode;\n  }\n\n  /**\n   * Attaches the graypane to the document.\n   */\n  attach() {\n    this.doc_.getBody().appendChild(this.fadeBackground_);\n  }\n\n  /**\n   * Detaches the graypane to the document.\n   */\n  destroy() {\n    this.doc_.getBody().removeChild(this.fadeBackground_);\n  }\n\n  /**\n   * Shows the graypane.\n   * @param {boolean=} animated\n   * @return {!Promise|undefined}\n   */\n  show(animated = true) {\n    setImportantStyles(this.fadeBackground_, {\n      'display': 'block',\n      'opacity': animated ? 0 : 1,\n    });\n    if (animated) {\n      return transition(\n        this.fadeBackground_,\n        {\n          'opacity': 1,\n        },\n        300,\n        'ease-out'\n      );\n    }\n  }\n\n  /**\n   * Hides the graypane.\n   * @param {boolean=} animated\n   * @return {!Promise|undefined}\n   */\n  hide(animated = true) {\n    if (animated) {\n      return transition(\n        this.fadeBackground_,\n        {\n          'opacity': 0,\n        },\n        300,\n        'ease-out'\n      ).then(() => {\n        setImportantStyles(this.fadeBackground_, {'display': 'none'});\n      });\n    }\n    setImportantStyles(this.fadeBackground_, {'display': 'none'});\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * abstract View Class. Used to render the content within the Dialog. The\n * extended class has actual content.\n * @abstract\n */\nexport class View {\n  /**\n   * Empty constructor.\n   */\n  constructor() {}\n\n  /**\n   * Gets the iframe element.\n   * @return {!Element}\n   * @abstract\n   */\n  getElement() {}\n\n  /**\n   * @param {!./dialog.Dialog} unusedDialog\n   * @return {!Promise}\n   * @abstract\n   */\n  init(unusedDialog) {}\n\n  /**\n   * Resizes the content.\n   */\n  resized() {\n    // Do nothing by default. Override if needed.\n  }\n\n  /**\n   * Accept the result.\n   * @return {!Promise}\n   * @abstract\n   */\n  whenComplete() {}\n\n  /**\n   * @return {boolean}\n   * @abstract\n   */\n  shouldFadeBody() {}\n\n  /**\n   * @return {boolean}\n   * @abstract\n   */\n  hasLoadingIndicator() {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// NOTE: Please don't edit this file directly!\n//   This document describes how to change i18n strings in swg-js: https://docs.google.com/document/d/1FMEKJ_TmjHhqON0krE4xhDbTEj0I0DnvzxMzB2cWUWA/edit?resourcekey=0-TQ7hPOzAD4hX8x9PfweGSg#heading=h.q9gi7t4h1tyj\n\nexport const I18N_STRINGS = {\n  'SHOWCASE_REGWALL_TITLE': {\n    'de': 'Immer gut informiert mit Google',\n    'en': 'Get more with Google',\n    'es-ar': 'Disfruta ms artculos con Google',\n    'fr': 'Plus de contenus avec Google',\n    'pt-br': 'Veja mais com o Google',\n  },\n  'SHOWCASE_REGWALL_DESCRIPTION': {\n    'de':\n      '<strong></strong>Dieser Inhalt ist normalerweise kostenpflichtig. Google gewhrt dir jedoch kostenlos Zugriff auf diesen Artikel und andere Inhalte, wenn du dich mit deinem Google-Konto bei <ph name=\"PUBLICATION\"><ex>AP News</ex>{publication}</ph> registrierst.',\n    'en':\n      '<strong></strong>This content usually requires payment, but Google is giving you free access to this article and more when you register with <ph name=\"PUBLICATION\"><ex>AP News</ex>{publication}</ph> using your Google Account.',\n    'es-ar':\n      '<strong></strong>Normalmente, es necesario pagar para ver este contenido, pero Google te ofrece acceso gratuito a este y otros artculos si te registras en <ph name=\"PUBLICATION\"><ex>AP News</ex>{publication}</ph> con tu Cuenta&nbsp;de&nbsp;Google.',\n    'fr':\n      '<strong></strong>Ce contenu est gnralement payant, mais vous pouvez lire cet article et d\\'autres contenus gratuitement grce  Google en vous inscrivant sur <ph name=\"PUBLICATION\"><ex>AP News</ex>{publication}</ph> avec votre compte Google.',\n    'pt-br':\n      '<strong></strong>Normalmente,  preciso pagar por este contedo. Porm, basta voc se registrar na publicao <ph name=\"PUBLICATION\"><ex>AP News</ex>{publication}</ph> usando sua Conta do Google para ter acesso gratuito a esta matria e muito mais.',\n  },\n  'SHOWCASE_REGWALL_PUBLISHER_SIGN_IN_BUTTON': {\n    'de': 'Du hast bereits ein Konto?',\n    'en': 'Already have an account?',\n    'es-ar': 'Ya tienes una cuenta?',\n    'fr': 'Vous avez dj un compte&nbsp;?',\n    'pt-br': 'J tem uma conta?',\n  },\n  'SHOWCASE_REGWALL_GOOGLE_SIGN_IN_BUTTON': {\n    'de': 'ber Google anmelden',\n    'en': 'Sign in with Google',\n    'es-ar': 'Acceder con Google',\n    'fr': 'Se connecter avec Google',\n    'pt-br': 'Fazer login com o Google',\n  },\n};\n","/**\n * Copyright 2021 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Why is there a strings.js and a swg-strings.js, you ask? strings.js is a\n// generated file, currently used for gaa builds. This file is used for swg and\n// swg-basic builds, and is currently manually updated.\n// TODO(stellachui): Figure out if they should be merged without a large impact\n//   on binary size.\n\nexport const SWG_I18N_STRINGS = {\n  'SUBSCRIPTION_TITLE_LANG_MAP': {\n    'en': 'Subscribe with Google',\n    'ar': 'Google ',\n    'de': 'Abonnieren mit Google',\n    'es': 'Suscrbete con Google',\n    'es-latam': 'Suscrbete con Google',\n    'es-latn': 'Suscrbete con Google',\n    'fr': \"S'abonner avec Google\",\n    'hi': 'Google   ',\n    'id': 'Berlangganan dengan Google',\n    'it': 'Abbonati con Google',\n    'jp': 'Google ',\n    'ko': 'Google  ',\n    'ms': 'Langgan dengan Google',\n    'nl': 'Abonneren via Google',\n    'no': 'Abonner med Google',\n    'pl': 'Subskrybuj z Google',\n    'pt': 'Subscrever com o Google',\n    'pt-br': 'Assine com o Google',\n    'ru': 'c  Google',\n    'se': 'Prenumerera med Google',\n    'th': ' Google',\n    'tr': 'Google ile Abone Ol',\n    'uk': '  Google',\n    'zh-tw': ' Google ',\n  },\n  'CONTRIBUTION_TITLE_LANG_MAP': {\n    'en': 'Contribute with Google',\n    'ar': '  Google',\n    'de': 'Mit Google beitragen',\n    'es': '\tContribuye con Google',\n    'es-latam': 'Contribuir con Google',\n    'es-latn': 'Contribuye con Google',\n    'fr': 'Contribuer avec Google',\n    'hi': 'Google      ',\n    'id': 'Berkontribusi dengan Google',\n    'it': 'Contribuisci con Google',\n    'jp': 'Google ',\n    'ko': 'Google  ',\n    'ms': 'Sumbangkan dengan Google',\n    'nl': 'Bijdragen met Google',\n    'no': 'Bidra med Google',\n    'pl': 'Wesprzyj publikacj przez Google',\n    'pt': 'Contribuir com o Google',\n    'pt-br': 'Contribua com o Google',\n    'ru': '   Google',\n    'se': 'Bidra med Google',\n    'th': ' Google',\n    'tr': 'Google ile Katkda Bulun',\n    'uk': '   Google',\n    'zh-tw': ' Google ',\n  },\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * The entry point for runtime (swg.js).\n */\n\nimport './polyfills';\nimport {installRuntime} from './runtime/runtime';\nimport {log} from './utils/log';\n\nlog('Subscriptions Runtime: $internalRuntimeVersion$');\n\ninstallRuntime(self);\n","/**\n * Copyright 2021 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Container for the auto prompt configuation details.\n */\nexport class AutoPromptConfig {\n  /**\n   * @param {number|undefined} maxImpressionsPerWeek\n   */\n  constructor(\n    maxImpressionsPerWeek,\n    displayDelaySeconds,\n    backoffSeconds,\n    maxDismissalsPerWeek,\n    maxDismissalsResultingHideSeconds\n  ) {\n    /** @const {number|undefined} */\n    this.maxImpressionsPerWeek = maxImpressionsPerWeek;\n\n    /** @const {!ClientDisplayTrigger} */\n    this.clientDisplayTrigger = new ClientDisplayTrigger(displayDelaySeconds);\n\n    /** @const {!ExplicitDismissalConfig} */\n    this.explicitDismissalConfig = new ExplicitDismissalConfig(\n      backoffSeconds,\n      maxDismissalsPerWeek,\n      maxDismissalsResultingHideSeconds\n    );\n  }\n}\n\n/**\n * Client side conditions to trigger the display of the auto prompt.\n */\nexport class ClientDisplayTrigger {\n  /**\n   * @param {number|undefined} displayDelaySeconds\n   */\n  constructor(displayDelaySeconds) {\n    /** @const {number|undefined} */\n    this.displayDelaySeconds = displayDelaySeconds;\n  }\n}\n\n/**\n * Configuration of explicit dismissal behavior and its effects.\n */\nexport class ExplicitDismissalConfig {\n  /**\n   * @param {number|undefined} backoffSeconds\n   * @param {number|undefined} maxDismissalsPerWeek\n   * @param {number|undefined} maxDismissalsResultingHideSeconds\n   */\n  constructor(\n    backoffSeconds,\n    maxDismissalsPerWeek,\n    maxDismissalsResultingHideSeconds\n  ) {\n    /** @const {number|undefined} */\n    this.backoffSeconds = backoffSeconds;\n\n    /** @const {number|undefined} */\n    this.maxDismissalsPerWeek = maxDismissalsPerWeek;\n\n    /** @const {number|undefined} */\n    this.maxDismissalsResultingHideSeconds = maxDismissalsResultingHideSeconds;\n  }\n}\n","/**\n * Copyright 2021 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Container for the details relating to how the client should be configured.\n */\nexport class ClientConfig {\n  /**\n   * @param {!./auto-prompt-config.AutoPromptConfig=} autoPromptConfig\n   * @param {string=} paySwgVersion\n   * @param {boolean=} useUpdatedOfferFlows\n   */\n  constructor(autoPromptConfig, paySwgVersion, useUpdatedOfferFlows) {\n    /** @const {!./auto-prompt-config.AutoPromptConfig|undefined} */\n    this.autoPromptConfig = autoPromptConfig;\n\n    /** @const {string|undefined} */\n    this.paySwgVersion = paySwgVersion;\n\n    /** @const {boolean} */\n    this.useUpdatedOfferFlows = useUpdatedOfferFlows || false;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isDocumentReady, whenDocumentReady} from '../utils/document-ready';\n\n/**\n * @interface\n */\nexport class Doc {\n  /**\n   * @return {!Window}\n   */\n  getWin() {}\n\n  /**\n   * The `Document` node or analog.\n   * @return {!Node}\n   */\n  getRootNode() {}\n\n  /**\n   * The `Document.documentElement` element or analog.\n   * @return {!Element}\n   */\n  getRootElement() {}\n\n  /**\n   * The `Document.head` element or analog. Returns `null` if not available\n   * yet.\n   * @return {!Element}\n   */\n  getHead() {}\n\n  /**\n   * The `Document.body` element or analog. Returns `null` if not available\n   * yet.\n   * @return {?Element}\n   */\n  getBody() {}\n\n  /**\n   * Whether the document has been fully constructed.\n   * @return {boolean}\n   */\n  isReady() {}\n\n  /**\n   * Resolved when document has been fully constructed.\n   * @return {!Promise}\n   */\n  whenReady() {}\n\n  /**\n   * Adds the element to the fixed layer.\n   * @param {!Element} unusedElement\n   * @return {!Promise}\n   *\n   * This is a no-op for except in AMP on iOS < 13.0.\n   */\n  addToFixedLayer(unusedElement) {}\n}\n\n/** @implements {Doc} */\nexport class GlobalDoc {\n  /**\n   * @param {!Window|!Document} winOrDoc\n   */\n  constructor(winOrDoc) {\n    const isWin = !!winOrDoc.document;\n    /** @private @const {!Window} */\n    this.win_ = /** @type {!Window} */ (isWin\n      ? /** @type {!Window} */ (winOrDoc)\n      : /** @type {!Document} */ (winOrDoc).defaultView);\n    /** @private @const {!Document} */\n    this.doc_ = isWin\n      ? /** @type {!Window} */ (winOrDoc).document\n      : /** @type {!Document} */ (winOrDoc);\n  }\n\n  /** @override */\n  getWin() {\n    return this.win_;\n  }\n\n  /** @override */\n  getRootNode() {\n    return this.doc_;\n  }\n\n  /** @override */\n  getRootElement() {\n    return this.doc_.documentElement;\n  }\n\n  /** @override */\n  getHead() {\n    // `document.head` always has a chance to be parsed, at least partially.\n    return /** @type {!Element} */ (this.doc_.head);\n  }\n\n  /** @override */\n  getBody() {\n    return this.doc_.body;\n  }\n\n  /** @override */\n  isReady() {\n    return isDocumentReady(this.doc_);\n  }\n\n  /** @override */\n  whenReady() {\n    return whenDocumentReady(this.doc_);\n  }\n\n  /** @override */\n  addToFixedLayer(unusedElement) {\n    return Promise.resolve();\n  }\n}\n\n/**\n * @param {!Document|!Window|!Doc} input\n * @return {!Doc}\n */\nexport function resolveDoc(input) {\n  // Is it a `Document`\n  if (/** @type {!Document} */ (input).nodeType === /* DOCUMENT */ 9) {\n    return new GlobalDoc(/** @type {!Document} */ (input));\n  }\n  // Is it a `Window`?\n  if (/** @type {!Window} */ (input).document) {\n    return new GlobalDoc(/** @type {!Window} */ (input));\n  }\n  return /** @type {!Doc} */ (input);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Doc, resolveDoc} from './doc';\nimport {PageConfig} from './page-config';\nimport {debugLog} from '../utils/log';\nimport {hasNextNodeInDocumentOrder} from '../utils/dom';\nimport {tryParseJson} from '../utils/json';\nimport {user} from '../utils/error-logger';\n\nconst ALREADY_SEEN = '__SWG-SEEN__';\nconst CONTROL_FLAG = 'subscriptions-control';\n\nconst ALLOWED_TYPES = [\n  'CreativeWork',\n  'Article',\n  'NewsArticle',\n  'Blog',\n  'Comment',\n  'Course',\n  'HowTo',\n  'Message',\n  'Review',\n  'WebPage',\n];\n\n// RegExp for quickly scanning LD+JSON for allowed types\nconst RE_ALLOWED_TYPES = new RegExp(ALLOWED_TYPES.join('|'));\n\n/**\n */\nexport class PageConfigResolver {\n  /**\n   * @param {!Window|!Document|!Doc} winOrDoc\n   */\n  constructor(winOrDoc) {\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(winOrDoc);\n\n    /** @private {?function((!PageConfig|!Promise))} */\n    this.configResolver_ = null;\n\n    /** @private @const {!Promise<!PageConfig>} */\n    this.configPromise_ = new Promise((resolve) => {\n      this.configResolver_ = resolve;\n    });\n\n    /** @private @const {!MetaParser} */\n    this.metaParser_ = new MetaParser(this.doc_);\n    /** @private @const {!JsonLdParser} */\n    this.ldParser_ = new JsonLdParser(this.doc_);\n    /** @private @const {!MicrodataParser} */\n    this.microdataParser_ = new MicrodataParser(this.doc_);\n  }\n\n  /**\n   * @return {!Promise<!PageConfig>}\n   */\n  resolveConfig() {\n    // Try resolve the config at different times.\n    Promise.resolve().then(this.check.bind(this));\n    this.doc_.whenReady().then(this.check.bind(this));\n    return this.configPromise_;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    // Already resolved.\n    if (!this.configResolver_) {\n      return null;\n    }\n    let config = this.metaParser_.check();\n    if (!config) {\n      config = this.ldParser_.check();\n    }\n    if (!config) {\n      config = this.microdataParser_.check();\n    }\n    if (config) {\n      // Product ID has been found: initialize the rest of the config.\n      this.configResolver_(config);\n      this.configResolver_ = null;\n    } else if (this.doc_.isReady()) {\n      this.configResolver_(\n        Promise.reject(\n          user().createError('No config could be discovered in the page')\n        )\n      );\n      this.configResolver_ = null;\n    }\n    debugLog(config);\n    return config;\n  }\n}\n\nclass TypeChecker {\n  constructor() {}\n\n  /**\n   * Check value from json\n   * @param {?Array|string} value\n   * @param {Array<string>} expectedTypes\n   * @return {boolean}\n   */\n  checkValue(value, expectedTypes) {\n    if (!value) {\n      return false;\n    }\n    return this.checkArray(this.toArray_(value), expectedTypes);\n  }\n\n  /**\n   * Checks space delimited list of types\n   * @param {?string} itemtype\n   * @param {Array<string>} expectedTypes\n   * @return {boolean}\n   */\n  checkString(itemtype, expectedTypes) {\n    if (!itemtype) {\n      return false;\n    }\n    return this.checkArray(itemtype.split(/\\s+/), expectedTypes);\n  }\n\n  /**\n   * @param {Array<?string>} typeArray\n   * @param {Array<string>} expectedTypes\n   * @return {boolean}\n   */\n  checkArray(typeArray, expectedTypes) {\n    let found = false;\n    typeArray.forEach((candidateType) => {\n      found =\n        found ||\n        expectedTypes.includes(\n          candidateType.replace(/^http:\\/\\/schema.org\\//i, '')\n        );\n    });\n    return found;\n  }\n\n  /*\n   * @param {?Array|string} value\n   * @return {Array}\n   * @private\n   */\n  toArray_(value) {\n    return Array.isArray(value) ? value : [value];\n  }\n}\n\nclass MetaParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n\n    // Try to find product id.\n    const productId = getMetaTag(\n      this.doc_.getRootNode(),\n      'subscriptions-product-id'\n    );\n    if (!productId) {\n      return null;\n    }\n\n    // Is locked?\n    const accessibleForFree = getMetaTag(\n      this.doc_.getRootNode(),\n      'subscriptions-accessible-for-free'\n    );\n    const locked = !!(\n      accessibleForFree && accessibleForFree.toLowerCase() === 'false'\n    );\n\n    return new PageConfig(productId, locked);\n  }\n}\n\nclass JsonLdParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n    /** @private @const @function */\n    this.checkType_ = new TypeChecker();\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n\n    const domReady = this.doc_.isReady();\n\n    // type: 'application/ld+json'\n    const elements = this.doc_\n      .getRootNode()\n      .querySelectorAll('script[type=\"application/ld+json\"]');\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (\n        element[ALREADY_SEEN] ||\n        !element.textContent ||\n        (!domReady && !hasNextNodeInDocumentOrder(element))\n      ) {\n        continue;\n      }\n      element[ALREADY_SEEN] = true;\n      if (!RE_ALLOWED_TYPES.test(element.textContent)) {\n        continue;\n      }\n      const possibleConfig = this.tryExtractConfig_(element);\n      if (possibleConfig) {\n        return possibleConfig;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {!Element} element\n   * @return {?PageConfig}\n   */\n  tryExtractConfig_(element) {\n    let possibleConfigs = tryParseJson(element.textContent);\n    if (!possibleConfigs) {\n      return null;\n    }\n\n    // Support arrays of JSON objects.\n    if (!Array.isArray(possibleConfigs)) {\n      possibleConfigs = [possibleConfigs];\n    }\n\n    const configs = /** @type {!Array<!JsonObject>} */ (possibleConfigs);\n    for (let i = 0; i < configs.length; i++) {\n      const config = configs[i];\n\n      // Must be an ALLOWED_TYPE\n      if (!this.checkType_.checkValue(config['@type'], ALLOWED_TYPES)) {\n        continue;\n      }\n\n      // Must have a isPartOf[@type=Product].\n      let productId = null;\n      const partOfArray = this.valueArray_(config, 'isPartOf');\n      if (partOfArray) {\n        for (let j = 0; j < partOfArray.length; j++) {\n          productId = this.discoverProductId_(partOfArray[j]);\n          if (productId) {\n            break;\n          }\n        }\n      }\n      if (!productId) {\n        continue;\n      }\n\n      // Found product id, just check for the access flag.\n      const isAccessibleForFree = this.bool_(\n        this.singleValue_(config, 'isAccessibleForFree'),\n        /* default */ true\n      );\n\n      return new PageConfig(productId, !isAccessibleForFree);\n    }\n\n    return null;\n  }\n\n  /**\n   * @param {*} value\n   * @param {boolean} def\n   * @return {boolean}\n   */\n  bool_(value, def) {\n    if (value == null || value === '') {\n      return def;\n    }\n    if (typeof value == 'boolean') {\n      return value;\n    }\n    if (typeof value == 'string') {\n      const lowercase = value.toLowerCase();\n      if (lowercase == 'false') {\n        return false;\n      }\n      if (lowercase == 'true') {\n        return true;\n      }\n    }\n    return def;\n  }\n\n  /**\n   * @param {!Object} json\n   * @return {?string}\n   */\n  discoverProductId_(json) {\n    // Must have type `Product`.\n    if (!this.checkType_.checkValue(json['@type'], ['Product'])) {\n      return null;\n    }\n    return /** @type {?string} */ (this.singleValue_(json, 'productID'));\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} name\n   * @return {?Array}\n   */\n  valueArray_(json, name) {\n    const value = json[name];\n    if (value == null || value === '') {\n      return null;\n    }\n    return Array.isArray(value) ? value : [value];\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} name\n   * @return {*}\n   */\n  singleValue_(json, name) {\n    const valueArray = this.valueArray_(json, name);\n    const value = valueArray && valueArray[0];\n    return value == null || value === '' ? null : value;\n  }\n}\n\nclass MicrodataParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n    /** @private {?boolean} */\n    this.access_ = null;\n    /** @private {?string} */\n    this.productId_ = null;\n    /** @private @const @function */\n    this.checkType_ = new TypeChecker();\n  }\n\n  /**\n   * Returns false if access is restricted, otherwise true\n   * @param {!Element} root An element that is an item of type in ALLOWED_TYPES list\n   * @return {?boolean} locked access\n   * @private\n   */\n  discoverAccess_(root) {\n    const ALREADY_SEEN = 'alreadySeenForAccessInfo';\n    const nodeList = root.querySelectorAll(\"[itemprop='isAccessibleForFree']\");\n    for (let i = 0; nodeList[i]; i++) {\n      const element = nodeList[i];\n      const content = element.getAttribute('content') || element.textContent;\n      if (!content) {\n        continue;\n      }\n      if (this.isValidElement_(element, root, ALREADY_SEEN)) {\n        let accessForFree = null;\n        if (content.toLowerCase() == 'true') {\n          accessForFree = true;\n        } else if (content.toLowerCase() == 'false') {\n          accessForFree = false;\n        }\n        return accessForFree;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Verifies if an element is valid based on the following\n   * - child of an item of one the the ALLOWED_TYPES\n   * - not a child of an item of any other type\n   * - not seen before, marked using the alreadySeen tag\n   * @param {?Element} current the element to be verified\n   * @param {!Element} root the parent to track up to\n   * @param {!string} alreadySeen used to tag already visited nodes\n   * @return {!boolean} valid node\n   * @private\n   */\n  isValidElement_(current, root, alreadySeen) {\n    for (\n      let node = current;\n      node && !node[alreadySeen];\n      node = node.parentNode\n    ) {\n      node[alreadySeen] = true;\n      // document nodes don't have hasAttribute\n      if (node.hasAttribute && node.hasAttribute('itemscope')) {\n        /**{?string} */\n        const type = node.getAttribute('itemtype');\n        return this.checkType_.checkString(type, ALLOWED_TYPES);\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Obtains the product ID that meets the requirements\n   * - child of an item of one of ALLOWED_TYPES\n   * - Not a child of an item of type 'Section'\n   * - child of an item of type 'productID'\n   * @param {!Element} root An element that is an item of an ALLOWED_TYPES\n   * @return {?string} product ID, if found\n   * @private\n   */\n  discoverProductId_(root) {\n    const ALREADY_SEEN = 'alreadySeenForProductInfo';\n    const nodeList = root.querySelectorAll('[itemprop=\"productID\"]');\n    for (let i = 0; nodeList[i]; i++) {\n      const element = nodeList[i];\n      const content = element.getAttribute('content') || element.textContent;\n      const item = element.closest('[itemtype][itemscope]');\n      const type = item.getAttribute('itemtype');\n      if (type.indexOf('http://schema.org/Product') <= -1) {\n        continue;\n      }\n      if (this.isValidElement_(item.parentElement, root, ALREADY_SEEN)) {\n        return content;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns PageConfig if available\n   * @return {?PageConfig} PageConfig found so far\n   */\n  getPageConfig_() {\n    let locked = null;\n    if (this.access_ != null) {\n      locked = !this.access_;\n    } else if (this.doc_.isReady()) {\n      // Default to unlocked\n      locked = false;\n    }\n    if (this.productId_ != null && locked != null) {\n      return new PageConfig(this.productId_, locked);\n    }\n    return null;\n  }\n\n  /**\n   * Extracts page config from Microdata in the DOM\n   * @return {?PageConfig} PageConfig found\n   */\n  tryExtractConfig_() {\n    let config = this.getPageConfig_();\n    if (config) {\n      return config;\n    }\n\n    // Grab all the nodes with an itemtype and filter for our allowed types\n    const nodeList = Array.prototype.slice\n      .call(this.doc_.getRootNode().querySelectorAll('[itemscope][itemtype]'))\n      .filter((node) =>\n        this.checkType_.checkString(\n          node.getAttribute('itemtype'),\n          ALLOWED_TYPES\n        )\n      );\n\n    for (let i = 0; nodeList[i] && config == null; i++) {\n      const element = nodeList[i];\n      if (this.access_ == null) {\n        this.access_ = this.discoverAccess_(element);\n      }\n      if (!this.productId_) {\n        this.productId_ = this.discoverProductId_(element);\n      }\n      config = this.getPageConfig_();\n    }\n    return config;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n    return this.tryExtractConfig_();\n  }\n}\n\n/**\n * @param {!Node} rootNode\n * @return {?string}\n */\nexport function getControlFlag(rootNode) {\n  // Look for the flag in `meta`.\n  const flag = getMetaTag(rootNode, CONTROL_FLAG);\n  if (flag) {\n    return flag;\n  }\n  // Look for the flag in `script`.\n  const el = rootNode.querySelector(`script[${CONTROL_FLAG}]`);\n  if (el) {\n    return el.getAttribute(CONTROL_FLAG);\n  }\n  return null;\n}\n\n/**\n * Returns the value from content attribute of a meta tag with given name.\n *\n * If multiple tags are found, the first value is returned.\n *\n * @param {!Node} rootNode\n * @param {string} name The tag name to look for.\n * @return {?string} attribute value or empty string.\n * @private\n */\nfunction getMetaTag(rootNode, name) {\n  const el = rootNode.querySelector(`meta[name=\"${name}\"]`);\n  if (el) {\n    return el.getAttribute('content');\n  }\n  return null;\n}\n\n/** @package Visible for testing only. */\nexport function getDocClassForTesting() {\n  return Doc;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {user} from '../utils/error-logger';\n\n/**\n */\nexport class PageConfig {\n  /**\n   * @param {string} productOrPublicationId\n   * @param {boolean} locked\n   */\n  constructor(productOrPublicationId, locked) {\n    let publicationId, productId, label;\n    const div = productOrPublicationId.indexOf(':');\n    if (div != -1) {\n      // The argument is a product id.\n      productId = productOrPublicationId;\n      publicationId = productId.substring(0, div);\n      label = productId.substring(div + 1);\n      if (label == '*') {\n        user().expectedError('wildcard disallowed');\n      }\n    } else {\n      // The argument is a publication id.\n      publicationId = productOrPublicationId;\n      productId = null;\n      label = null;\n    }\n\n    /** @private @const {string} */\n    this.publicationId_ = publicationId;\n    /** @private @const {?string} */\n    this.productId_ = productId;\n    /** @private @const {?string} */\n    this.label_ = label;\n    /** @private @const {boolean} */\n    this.locked_ = locked;\n  }\n\n  /**\n   * @return {string}\n   */\n  getPublicationId() {\n    return this.publicationId_;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getProductId() {\n    return this.productId_;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getLabel() {\n    return this.label_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isLocked() {\n    return this.locked_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Loads all polyfills needed by the project.\n * This list should not get longer without a very good reason.\n */\nimport {install as installArrayIncludes} from './polyfills/array-includes';\nimport {install as installDOMTokenListToggle} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installObjectValues} from './polyfills/object-values';\nimport {install as installPromise} from './polyfills/promise';\n\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallObjectValues(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} fromIndex\n * @return {boolean}\n * @this {Array}\n */\nexport function includes(value, fromIndex = 0) {\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Sets the Array.contains polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nexport function contains(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.HTMLDocument.prototype.contains) {\n    win.Object.defineProperty(win.HTMLDocument.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: contains,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, force)` method.\n * This is specially important because IE does not support `force` attribute.\n * See https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nexport function toggle(token, force) {\n  const remove = force === undefined ? this.contains(token) : !force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: toggle,\n    });\n  }\n}\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @returns {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @returns {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Implements `Object.values` API.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values.\n *\n * @param {!Object} target\n * @returns {!Array<*>}\n */\nexport function values(target) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = [];\n  for (const key in target) {\n    if (hasOwnProperty.call(target, key)) {\n      output.push(target[key]);\n    }\n  }\n  return output;\n}\n\n/**\n * Sets the Object.values polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.values) {\n    win.Object.defineProperty(win.Object, 'values', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: values,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @interface\n */\nclass Message {\n  /**\n   * @return {string}\n   */\n  label() {}\n\n  /**\n   * @param {boolean=} unusedIncludeLabel\n   * @return {!Array<*>}\n   */\n  toArray(unusedIncludeLabel = true) {}\n}\n/** @enum {number} */\nconst AnalyticsEvent = {\n  UNKNOWN: 0,\n  IMPRESSION_PAYWALL: 1,\n  IMPRESSION_AD: 2,\n  IMPRESSION_OFFERS: 3,\n  IMPRESSION_SUBSCRIBE_BUTTON: 4,\n  IMPRESSION_SMARTBOX: 5,\n  IMPRESSION_SWG_BUTTON: 6,\n  IMPRESSION_CLICK_TO_SHOW_OFFERS: 7,\n  IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED: 8,\n  IMPRESSION_SUBSCRIPTION_COMPLETE: 9,\n  IMPRESSION_ACCOUNT_CHANGED: 10,\n  IMPRESSION_PAGE_LOAD: 11,\n  IMPRESSION_LINK: 12,\n  IMPRESSION_SAVE_SUBSCR_TO_GOOGLE: 13,\n  IMPRESSION_GOOGLE_UPDATED: 14,\n  IMPRESSION_SHOW_OFFERS_SMARTBOX: 15,\n  IMPRESSION_SHOW_OFFERS_SWG_BUTTON: 16,\n  IMPRESSION_SELECT_OFFER_SMARTBOX: 17,\n  IMPRESSION_SELECT_OFFER_SWG_BUTTON: 18,\n  IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON: 19,\n  IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON: 20,\n  IMPRESSION_METER_TOAST: 21,\n  IMPRESSION_REGWALL: 22,\n  IMPRESSION_SHOWCASE_REGWALL: 23,\n  IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT: 24,\n  IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT: 25,\n  IMPRESSION_CONTRIBUTION_OFFERS: 26,\n  ACTION_SUBSCRIBE: 1000,\n  ACTION_PAYMENT_COMPLETE: 1001,\n  ACTION_ACCOUNT_CREATED: 1002,\n  ACTION_ACCOUNT_ACKNOWLEDGED: 1003,\n  ACTION_SUBSCRIPTIONS_LANDING_PAGE: 1004,\n  ACTION_PAYMENT_FLOW_STARTED: 1005,\n  ACTION_OFFER_SELECTED: 1006,\n  ACTION_SWG_BUTTON_CLICK: 1007,\n  ACTION_VIEW_OFFERS: 1008,\n  ACTION_ALREADY_SUBSCRIBED: 1009,\n  ACTION_NEW_DEFERRED_ACCOUNT: 1010,\n  ACTION_LINK_CONTINUE: 1011,\n  ACTION_LINK_CANCEL: 1012,\n  ACTION_GOOGLE_UPDATED_CLOSE: 1013,\n  ACTION_USER_CANCELED_PAYFLOW: 1014,\n  ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE: 1015,\n  ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL: 1016,\n  ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK: 1017,\n  ACTION_SWG_BUTTON_SELECT_OFFER_CLICK: 1018,\n  ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK: 1019,\n  ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK: 1020,\n  ACTION_USER_CONSENT_DEFERRED_ACCOUNT: 1021,\n  ACTION_USER_DENY_DEFERRED_ACCOUNT: 1022,\n  ACTION_DEFERRED_ACCOUNT_REDIRECT: 1023,\n  ACTION_GET_ENTITLEMENTS: 1024,\n  ACTION_METER_TOAST_SUBSCRIBE_CLICK: 1025,\n  ACTION_METER_TOAST_EXPANDED: 1026,\n  ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION: 1027,\n  ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN: 1028,\n  ACTION_METER_TOAST_CLOSED_BY_X_CLICKED: 1029,\n  ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK: 1030,\n  ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK: 1031,\n  ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE: 1032,\n  ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE: 1033,\n  EVENT_PAYMENT_FAILED: 2000,\n  EVENT_CUSTOM: 3000,\n  EVENT_CONFIRM_TX_ID: 3001,\n  EVENT_CHANGED_TX_ID: 3002,\n  EVENT_GPAY_NO_TX_ID: 3003,\n  EVENT_GPAY_CANNOT_CONFIRM_TX_ID: 3004,\n  EVENT_GOOGLE_UPDATED: 3005,\n  EVENT_NEW_TX_ID: 3006,\n  EVENT_UNLOCKED_BY_SUBSCRIPTION: 3007,\n  EVENT_UNLOCKED_BY_METER: 3008,\n  EVENT_NO_ENTITLEMENTS: 3009,\n  EVENT_HAS_METERING_ENTITLEMENTS: 3010,\n  EVENT_OFFERED_METER: 3011,\n  EVENT_UNLOCKED_FREE_PAGE: 3012,\n  EVENT_SUBSCRIPTION_STATE: 4000,\n};\n/** @enum {number} */\nconst EntitlementResult = {\n  UNKNOWN_ENTITLEMENT_RESULT: 0,\n  UNLOCKED_SUBSCRIBER: 1001,\n  UNLOCKED_FREE: 1002,\n  UNLOCKED_METER: 1003,\n  LOCKED_REGWALL: 2001,\n  LOCKED_PAYWALL: 2002,\n};\n/** @enum {number} */\nconst EntitlementSource = {\n  UNKNOWN_ENTITLEMENT_SOURCE: 0,\n  GOOGLE_SUBSCRIBER_ENTITLEMENT: 1001,\n  GOOGLE_SHOWCASE_METERING_SERVICE: 2001,\n  PUBLISHER_ENTITLEMENT: 3001,\n};\n/** @enum {number} */\nconst EventOriginator = {\n  UNKNOWN_CLIENT: 0,\n  SWG_CLIENT: 1,\n  AMP_CLIENT: 2,\n  PROPENSITY_CLIENT: 3,\n  SWG_SERVER: 4,\n  PUBLISHER_CLIENT: 5,\n  SHOWCASE_CLIENT: 6,\n};\n\n/**\n * @implements {Message}\n */\nclass AccountCreationRequest {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.complete_ = data[base] == null ? null : data[base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getComplete() {\n    return this.complete_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setComplete(value) {\n    this.complete_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.complete_, // field 1 - complete\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AccountCreationRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AlreadySubscribedResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.subscriberOrMember_ = data[base] == null ? null : data[base];\n\n    /** @private {?boolean} */\n    this.linkRequested_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getSubscriberOrMember() {\n    return this.subscriberOrMember_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setSubscriberOrMember(value) {\n    this.subscriberOrMember_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getLinkRequested() {\n    return this.linkRequested_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setLinkRequested(value) {\n    this.linkRequested_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.subscriberOrMember_, // field 1 - subscriber_or_member\n        this.linkRequested_, // field 2 - link_requested\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AlreadySubscribedResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AnalyticsContext {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?string} */\n    this.embedderOrigin_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.transactionId_ = data[1 + base] == null ? null : data[1 + base];\n\n    /** @private {?string} */\n    this.referringOrigin_ = data[2 + base] == null ? null : data[2 + base];\n\n    /** @private {?string} */\n    this.utmSource_ = data[3 + base] == null ? null : data[3 + base];\n\n    /** @private {?string} */\n    this.utmCampaign_ = data[4 + base] == null ? null : data[4 + base];\n\n    /** @private {?string} */\n    this.utmMedium_ = data[5 + base] == null ? null : data[5 + base];\n\n    /** @private {?string} */\n    this.sku_ = data[6 + base] == null ? null : data[6 + base];\n\n    /** @private {?boolean} */\n    this.readyToPay_ = data[7 + base] == null ? null : data[7 + base];\n\n    /** @private {!Array<string>} */\n    this.label_ = data[8 + base] || [];\n\n    /** @private {?string} */\n    this.clientVersion_ = data[9 + base] == null ? null : data[9 + base];\n\n    /** @private {?string} */\n    this.url_ = data[10 + base] == null ? null : data[10 + base];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getEmbedderOrigin() {\n    return this.embedderOrigin_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setEmbedderOrigin(value) {\n    this.embedderOrigin_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getTransactionId() {\n    return this.transactionId_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setTransactionId(value) {\n    this.transactionId_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getReferringOrigin() {\n    return this.referringOrigin_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setReferringOrigin(value) {\n    this.referringOrigin_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUtmSource() {\n    return this.utmSource_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUtmSource(value) {\n    this.utmSource_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUtmCampaign() {\n    return this.utmCampaign_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUtmCampaign(value) {\n    this.utmCampaign_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUtmMedium() {\n    return this.utmMedium_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUtmMedium(value) {\n    this.utmMedium_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.sku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSku(value) {\n    this.sku_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getReadyToPay() {\n    return this.readyToPay_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setReadyToPay(value) {\n    this.readyToPay_ = value;\n  }\n\n  /**\n   * @return {!Array<string>}\n   */\n  getLabelList() {\n    return this.label_;\n  }\n\n  /**\n   * @param {!Array<string>} value\n   */\n  setLabelList(value) {\n    this.label_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getClientVersion() {\n    return this.clientVersion_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setClientVersion(value) {\n    this.clientVersion_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setUrl(value) {\n    this.url_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.embedderOrigin_, // field 1 - embedder_origin\n        this.transactionId_, // field 2 - transaction_id\n        this.referringOrigin_, // field 3 - referring_origin\n        this.utmSource_, // field 4 - utm_source\n        this.utmCampaign_, // field 5 - utm_campaign\n        this.utmMedium_, // field 6 - utm_medium\n        this.sku_, // field 7 - sku\n        this.readyToPay_, // field 8 - ready_to_pay\n        this.label_, // field 9 - label\n        this.clientVersion_, // field 10 - client_version\n        this.url_, // field 11 - url\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AnalyticsContext';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AnalyticsEventMeta {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?EventOriginator} */\n    this.eventOriginator_ = data[base] == null ? null : data[base];\n\n    /** @private {?boolean} */\n    this.isFromUserAction_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?EventOriginator}\n   */\n  getEventOriginator() {\n    return this.eventOriginator_;\n  }\n\n  /**\n   * @param {!EventOriginator} value\n   */\n  setEventOriginator(value) {\n    this.eventOriginator_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getIsFromUserAction() {\n    return this.isFromUserAction_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setIsFromUserAction(value) {\n    this.isFromUserAction_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.eventOriginator_, // field 1 - event_originator\n        this.isFromUserAction_, // field 2 - is_from_user_action\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AnalyticsEventMeta';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass AnalyticsRequest {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?AnalyticsContext} */\n    this.context_ =\n      data[base] == null || data[base] == undefined\n        ? null\n        : new AnalyticsContext(data[base], includesLabel);\n\n    /** @private {?AnalyticsEvent} */\n    this.event_ = data[1 + base] == null ? null : data[1 + base];\n\n    /** @private {?AnalyticsEventMeta} */\n    this.meta_ =\n      data[2 + base] == null || data[2 + base] == undefined\n        ? null\n        : new AnalyticsEventMeta(data[2 + base], includesLabel);\n\n    /** @private {?EventParams} */\n    this.params_ =\n      data[3 + base] == null || data[3 + base] == undefined\n        ? null\n        : new EventParams(data[3 + base], includesLabel);\n  }\n\n  /**\n   * @return {?AnalyticsContext}\n   */\n  getContext() {\n    return this.context_;\n  }\n\n  /**\n   * @param {!AnalyticsContext} value\n   */\n  setContext(value) {\n    this.context_ = value;\n  }\n\n  /**\n   * @return {?AnalyticsEvent}\n   */\n  getEvent() {\n    return this.event_;\n  }\n\n  /**\n   * @param {!AnalyticsEvent} value\n   */\n  setEvent(value) {\n    this.event_ = value;\n  }\n\n  /**\n   * @return {?AnalyticsEventMeta}\n   */\n  getMeta() {\n    return this.meta_;\n  }\n\n  /**\n   * @param {!AnalyticsEventMeta} value\n   */\n  setMeta(value) {\n    this.meta_ = value;\n  }\n\n  /**\n   * @return {?EventParams}\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {!EventParams} value\n   */\n  setParams(value) {\n    this.params_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.context_ ? this.context_.toArray(includeLabel) : [], // field 1 - context\n        this.event_, // field 2 - event\n        this.meta_ ? this.meta_.toArray(includeLabel) : [], // field 3 - meta\n        this.params_ ? this.params_.toArray(includeLabel) : [], // field 4 - params\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'AnalyticsRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass EntitlementJwt {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?string} */\n    this.jwt_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.source_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getJwt() {\n    return this.jwt_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setJwt(value) {\n    this.jwt_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSource() {\n    return this.source_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSource(value) {\n    this.source_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.jwt_, // field 1 - jwt\n        this.source_, // field 2 - source\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'EntitlementJwt';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass EntitlementsRequest {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?EntitlementJwt} */\n    this.usedEntitlement_ =\n      data[base] == null || data[base] == undefined\n        ? null\n        : new EntitlementJwt(data[base], includesLabel);\n\n    /** @private {?Timestamp} */\n    this.clientEventTime_ =\n      data[1 + base] == null || data[1 + base] == undefined\n        ? null\n        : new Timestamp(data[1 + base], includesLabel);\n\n    /** @private {?EntitlementSource} */\n    this.entitlementSource_ = data[2 + base] == null ? null : data[2 + base];\n\n    /** @private {?EntitlementResult} */\n    this.entitlementResult_ = data[3 + base] == null ? null : data[3 + base];\n\n    /** @private {?string} */\n    this.token_ = data[4 + base] == null ? null : data[4 + base];\n\n    /** @private {?boolean} */\n    this.isUserRegistered_ = data[5 + base] == null ? null : data[5 + base];\n  }\n\n  /**\n   * @return {?EntitlementJwt}\n   */\n  getUsedEntitlement() {\n    return this.usedEntitlement_;\n  }\n\n  /**\n   * @param {!EntitlementJwt} value\n   */\n  setUsedEntitlement(value) {\n    this.usedEntitlement_ = value;\n  }\n\n  /**\n   * @return {?Timestamp}\n   */\n  getClientEventTime() {\n    return this.clientEventTime_;\n  }\n\n  /**\n   * @param {!Timestamp} value\n   */\n  setClientEventTime(value) {\n    this.clientEventTime_ = value;\n  }\n\n  /**\n   * @return {?EntitlementSource}\n   */\n  getEntitlementSource() {\n    return this.entitlementSource_;\n  }\n\n  /**\n   * @param {!EntitlementSource} value\n   */\n  setEntitlementSource(value) {\n    this.entitlementSource_ = value;\n  }\n\n  /**\n   * @return {?EntitlementResult}\n   */\n  getEntitlementResult() {\n    return this.entitlementResult_;\n  }\n\n  /**\n   * @param {!EntitlementResult} value\n   */\n  setEntitlementResult(value) {\n    this.entitlementResult_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getToken() {\n    return this.token_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setToken(value) {\n    this.token_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getIsUserRegistered() {\n    return this.isUserRegistered_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setIsUserRegistered(value) {\n    this.isUserRegistered_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.usedEntitlement_ ? this.usedEntitlement_.toArray(includeLabel) : [], // field 1 - used_entitlement\n        this.clientEventTime_ ? this.clientEventTime_.toArray(includeLabel) : [], // field 2 - client_event_time\n        this.entitlementSource_, // field 3 - entitlement_source\n        this.entitlementResult_, // field 4 - entitlement_result\n        this.token_, // field 5 - token\n        this.isUserRegistered_, // field 6 - is_user_registered\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'EntitlementsRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass EntitlementsResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?string} */\n    this.jwt_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.swgUserToken_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getJwt() {\n    return this.jwt_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setJwt(value) {\n    this.jwt_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSwgUserToken() {\n    return this.swgUserToken_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSwgUserToken(value) {\n    this.swgUserToken_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.jwt_, // field 1 - jwt\n        this.swgUserToken_, // field 2 - swg_user_token\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'EntitlementsResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass EventParams {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?string} */\n    this.smartboxMessage_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.gpayTransactionId_ = data[1 + base] == null ? null : data[1 + base];\n\n    /** @private {?boolean} */\n    this.hadLogged_ = data[2 + base] == null ? null : data[2 + base];\n\n    /** @private {?string} */\n    this.sku_ = data[3 + base] == null ? null : data[3 + base];\n\n    /** @private {?string} */\n    this.oldTransactionId_ = data[4 + base] == null ? null : data[4 + base];\n\n    /** @private {?boolean} */\n    this.isUserRegistered_ = data[5 + base] == null ? null : data[5 + base];\n\n    /** @private {?string} */\n    this.subscriptionFlow_ = data[6 + base] == null ? null : data[6 + base];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSmartboxMessage() {\n    return this.smartboxMessage_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSmartboxMessage(value) {\n    this.smartboxMessage_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getGpayTransactionId() {\n    return this.gpayTransactionId_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setGpayTransactionId(value) {\n    this.gpayTransactionId_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getHadLogged() {\n    return this.hadLogged_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setHadLogged(value) {\n    this.hadLogged_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.sku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSku(value) {\n    this.sku_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getOldTransactionId() {\n    return this.oldTransactionId_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setOldTransactionId(value) {\n    this.oldTransactionId_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getIsUserRegistered() {\n    return this.isUserRegistered_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setIsUserRegistered(value) {\n    this.isUserRegistered_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSubscriptionFlow() {\n    return this.subscriptionFlow_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSubscriptionFlow(value) {\n    this.subscriptionFlow_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.smartboxMessage_, // field 1 - smartbox_message\n        this.gpayTransactionId_, // field 2 - gpay_transaction_id\n        this.hadLogged_, // field 3 - had_logged\n        this.sku_, // field 4 - sku\n        this.oldTransactionId_, // field 5 - old_transaction_id\n        this.isUserRegistered_, // field 6 - is_user_registered\n        this.subscriptionFlow_, // field 7 - subscription_flow\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'EventParams';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass FinishedLoggingResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.complete_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.error_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getComplete() {\n    return this.complete_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setComplete(value) {\n    this.complete_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setError(value) {\n    this.error_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.complete_, // field 1 - complete\n        this.error_, // field 2 - error\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'FinishedLoggingResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass LinkSaveTokenRequest {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?string} */\n    this.authCode_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.token_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getAuthCode() {\n    return this.authCode_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setAuthCode(value) {\n    this.authCode_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getToken() {\n    return this.token_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setToken(value) {\n    this.token_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.authCode_, // field 1 - auth_code\n        this.token_, // field 2 - token\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'LinkSaveTokenRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass LinkingInfoResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.requested_ = data[base] == null ? null : data[base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getRequested() {\n    return this.requested_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setRequested(value) {\n    this.requested_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.requested_, // field 1 - requested\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'LinkingInfoResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass SkuSelectedResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?string} */\n    this.sku_ = data[base] == null ? null : data[base];\n\n    /** @private {?string} */\n    this.oldSku_ = data[1 + base] == null ? null : data[1 + base];\n\n    /** @private {?boolean} */\n    this.oneTime_ = data[2 + base] == null ? null : data[2 + base];\n\n    /** @private {?string} */\n    this.playOffer_ = data[3 + base] == null ? null : data[3 + base];\n\n    /** @private {?string} */\n    this.oldPlayOffer_ = data[4 + base] == null ? null : data[4 + base];\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.sku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setSku(value) {\n    this.sku_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getOldSku() {\n    return this.oldSku_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setOldSku(value) {\n    this.oldSku_ = value;\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getOneTime() {\n    return this.oneTime_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setOneTime(value) {\n    this.oneTime_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getPlayOffer() {\n    return this.playOffer_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setPlayOffer(value) {\n    this.playOffer_ = value;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getOldPlayOffer() {\n    return this.oldPlayOffer_;\n  }\n\n  /**\n   * @param {string} value\n   */\n  setOldPlayOffer(value) {\n    this.oldPlayOffer_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.sku_, // field 1 - sku\n        this.oldSku_, // field 2 - old_sku\n        this.oneTime_, // field 3 - one_time\n        this.playOffer_, // field 4 - play_offer\n        this.oldPlayOffer_, // field 5 - old_play_offer\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'SkuSelectedResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass SmartBoxMessage {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.isClicked_ = data[base] == null ? null : data[base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getIsClicked() {\n    return this.isClicked_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setIsClicked(value) {\n    this.isClicked_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.isClicked_, // field 1 - is_clicked\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'SmartBoxMessage';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass SubscribeResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.subscribe_ = data[base] == null ? null : data[base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getSubscribe() {\n    return this.subscribe_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setSubscribe(value) {\n    this.subscribe_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.subscribe_, // field 1 - subscribe\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'SubscribeResponse';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass Timestamp {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?number} */\n    this.seconds_ = data[base] == null ? null : data[base];\n\n    /** @private {?number} */\n    this.nanos_ = data[1 + base] == null ? null : data[1 + base];\n  }\n\n  /**\n   * @return {?number}\n   */\n  getSeconds() {\n    return this.seconds_;\n  }\n\n  /**\n   * @param {number} value\n   */\n  setSeconds(value) {\n    this.seconds_ = value;\n  }\n\n  /**\n   * @return {?number}\n   */\n  getNanos() {\n    return this.nanos_;\n  }\n\n  /**\n   * @param {number} value\n   */\n  setNanos(value) {\n    this.nanos_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.seconds_, // field 1 - seconds\n        this.nanos_, // field 2 - nanos\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'Timestamp';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass ToastCloseRequest {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.close_ = data[base] == null ? null : data[base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getClose() {\n    return this.close_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setClose(value) {\n    this.close_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.close_, // field 1 - close\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'ToastCloseRequest';\n  }\n}\n\n/**\n * @implements {Message}\n */\nclass ViewSubscriptionsResponse {\n  /**\n   * @param {!Array<*>=} data\n   * @param {boolean=} includesLabel\n   */\n  constructor(data = [], includesLabel = true) {\n    const base = includesLabel ? 1 : 0;\n\n    /** @private {?boolean} */\n    this.native_ = data[base] == null ? null : data[base];\n  }\n\n  /**\n   * @return {?boolean}\n   */\n  getNative() {\n    return this.native_;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setNative(value) {\n    this.native_ = value;\n  }\n\n  /**\n   * @param {boolean} includeLabel\n   * @return {!Array<?>}\n   * @override\n   */\n  toArray(includeLabel = true) {\n    const arr = [\n        this.native_, // field 1 - native\n    ];\n    if (includeLabel) {\n      arr.unshift(this.label());\n    }\n    return arr;\n  }\n\n  /**\n   * @return {string}\n   * @override\n   */\n  label() {\n    return 'ViewSubscriptionsResponse';\n  }\n}\n\nconst PROTO_MAP = {\n  'AccountCreationRequest': AccountCreationRequest,\n  'AlreadySubscribedResponse': AlreadySubscribedResponse,\n  'AnalyticsContext': AnalyticsContext,\n  'AnalyticsEventMeta': AnalyticsEventMeta,\n  'AnalyticsRequest': AnalyticsRequest,\n  'EntitlementJwt': EntitlementJwt,\n  'EntitlementsRequest': EntitlementsRequest,\n  'EntitlementsResponse': EntitlementsResponse,\n  'EventParams': EventParams,\n  'FinishedLoggingResponse': FinishedLoggingResponse,\n  'LinkSaveTokenRequest': LinkSaveTokenRequest,\n  'LinkingInfoResponse': LinkingInfoResponse,\n  'SkuSelectedResponse': SkuSelectedResponse,\n  'SmartBoxMessage': SmartBoxMessage,\n  'SubscribeResponse': SubscribeResponse,\n  'Timestamp': Timestamp,\n  'ToastCloseRequest': ToastCloseRequest,\n  'ViewSubscriptionsResponse': ViewSubscriptionsResponse,\n};\n\n/**\n * Utility to deserialize a buffer\n * @param {!Array<*>} data\n * @return {!Message}\n */\nfunction deserialize(data) {\n  /** {?string} */\n  const key = data ? data[0] : null;\n  if (key) {\n    const ctor = PROTO_MAP[key];\n    if (ctor) {\n      return new ctor(data);\n    }\n  }\n  throw new Error('Deserialization failed for ' + data);\n}\n\n/**\n * @param {function(new: T)} messageType\n * @return {string}\n * @template T\n */\nfunction getLabel(messageType) {\n  const message = /** @type {!Message} */ (new messageType());\n  return message.label();\n}\n\nexport {\n  AccountCreationRequest,\n  AlreadySubscribedResponse,\n  AnalyticsContext,\n  AnalyticsEvent,\n  AnalyticsEventMeta,\n  AnalyticsRequest,\n  EntitlementJwt,\n  EntitlementResult,\n  EntitlementSource,\n  EntitlementsRequest,\n  EntitlementsResponse,\n  EventOriginator,\n  EventParams,\n  FinishedLoggingResponse,\n  LinkSaveTokenRequest,\n  LinkingInfoResponse,\n  Message,\n  SkuSelectedResponse,\n  SmartBoxMessage,\n  SubscribeResponse,\n  Timestamp,\n  ToastCloseRequest,\n  ViewSubscriptionsResponse,\n  deserialize,\n  getLabel,\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnalyticsContext,\n  AnalyticsEvent,\n  AnalyticsEventMeta,\n  AnalyticsRequest,\n  EventOriginator,\n  EventParams,\n  FinishedLoggingResponse,\n} from '../proto/api_messages';\nimport {ClientEventManager} from './client-event-manager';\nimport {ExperimentFlags} from './experiment-flags';\nimport {createElement} from '../utils/dom';\nimport {feUrl} from './services';\nimport {getCanonicalUrl} from '../utils/url';\nimport {getOnExperiments, isExperimentOn} from './experiments';\nimport {getSwgTransactionId, getUuid} from '../utils/string';\nimport {log} from '../utils/log';\nimport {parseQueryString, parseUrl} from '../utils/url';\nimport {serviceUrl} from './services';\nimport {setImportantStyles} from '../utils/style';\n\n/** @const {!Object<string, string>} */\nconst iframeStyles = {\n  opacity: '0',\n  position: 'absolute',\n  top: '-10px',\n  left: '-10px',\n  height: '1px',\n  width: '1px',\n};\n\n// The initial iframe load takes ~500 ms.  We will wait at least that long\n// before a page redirect.  Subsequent logs are much faster.  We will wait at\n// most 100 ms.\nconst MAX_FIRST_WAIT = 500;\nconst MAX_WAIT = 200;\n// If we logged and rapidly redirected, we will add a short delay in case\n// a message hasn't been transmitted yet.\nconst TIMEOUT_ERROR = 'AnalyticsService timed out waiting for a response';\n\n/**\n *\n * @param {!string} error\n */\nfunction createErrorResponse(error) {\n  const response = new FinishedLoggingResponse();\n  response.setComplete(false);\n  response.setError(error);\n  return response;\n}\n\nexport class AnalyticsService {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!./fetcher.Fetcher} fetcher\n   */\n  constructor(deps, fetcher) {\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = deps.doc();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_.getWin().document,\n      'iframe',\n      {}\n    ));\n    setImportantStyles(this.iframe_, iframeStyles);\n    this.doc_.getBody().appendChild(this.getElement());\n\n    /** @private @type {!boolean} */\n    this.everFinishedLog_ = false;\n\n    /**\n     * @private @const {!AnalyticsContext}\n     */\n    this.context_ = new AnalyticsContext();\n    this.setStaticContext_();\n\n    /** @private {?Promise<!web-activities/activity-ports.ActivityIframePort>} */\n    this.serviceReady_ = null;\n\n    /** @private {?Promise} */\n    this.lastAction_ = null;\n\n    /** @private @const {!ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n    this.eventManager_.registerEventListener(\n      this.handleClientEvent_.bind(this)\n    );\n\n    // This code creates a 'promise to log' that we can use to ensure all\n    // logging is finished prior to redirecting the page.\n    /** @private {!number} */\n    this.unfinishedLogs_ = 0;\n\n    /** @private {?function(boolean)} */\n    this.loggingResolver_ = null;\n\n    /** @private {?Promise} */\n    this.promiseToLog_ = null;\n\n    // If logging doesn't work don't force the user to wait\n    /** @private {!boolean} */\n    this.loggingBroken_ = false;\n\n    // If logging exceeds the timeouts (see const comments above) don't make\n    // the user wait too long.\n    /** @private {?number} */\n    this.timeout_ = null;\n  }\n\n  /**\n   * @param {string} transactionId\n   */\n  setTransactionId(transactionId) {\n    const oldTransactionId = this.context_.getTransactionId();\n    this.context_.setTransactionId(transactionId);\n    if (oldTransactionId != null && oldTransactionId != transactionId) {\n      const eventType = AnalyticsEvent.EVENT_NEW_TX_ID;\n      const eventParams = new EventParams();\n      eventParams.setOldTransactionId(oldTransactionId);\n      this.eventManager_.logSwgEvent(\n        eventType,\n        /* isFromUserAction= */ true,\n        eventParams\n      );\n    }\n  }\n\n  /**\n   * @return {string}\n   */\n  getTransactionId() {\n    return /** @type {string} */ (this.context_.getTransactionId());\n  }\n\n  /**\n   * @return {?string}\n   */\n  getSku() {\n    return this.context_.getSku();\n  }\n\n  /**\n   * @param {string} sku\n   */\n  setSku(sku) {\n    this.context_.setSku(sku);\n  }\n\n  /**\n   * @param {string} url\n   */\n  setUrl(url) {\n    this.context_.setUrl(url);\n  }\n\n  /**\n   * @param {!Array<string>} labels\n   */\n  addLabels(labels) {\n    if (labels && labels.length > 0) {\n      const newLabels = [].concat(this.context_.getLabelList());\n      labels.forEach((label) => {\n        if (newLabels.indexOf(label) == -1) {\n          newLabels.push(label);\n        }\n      });\n      this.context_.setLabelList(newLabels);\n    }\n  }\n\n  /**\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  getQueryString_() {\n    return this.doc_.getWin().location.search;\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  getReferrer_() {\n    return this.doc_.getWin().document.referrer;\n  }\n\n  /**\n   * @private\n   */\n  setStaticContext_() {\n    const context = this.context_;\n    // These values should all be available during page load.\n    if (\n      isExperimentOn(\n        this.doc_.getWin(),\n        ExperimentFlags.UPDATE_GOOGLE_TRANSACTION_ID\n      )\n    ) {\n      context.setTransactionId(getSwgTransactionId());\n    } else {\n      context.setTransactionId(getUuid());\n    }\n    context.setReferringOrigin(parseUrl(this.getReferrer_()).origin);\n    context.setClientVersion('SwG $internalRuntimeVersion$');\n    context.setUrl(getCanonicalUrl(this.doc_));\n\n    const utmParams = parseQueryString(this.getQueryString_());\n    const campaign = utmParams['utm_campaign'];\n    const medium = utmParams['utm_medium'];\n    const source = utmParams['utm_source'];\n    if (campaign) {\n      context.setUtmCampaign(campaign);\n    }\n    if (medium) {\n      context.setUtmMedium(medium);\n    }\n    if (source) {\n      context.setUtmSource(source);\n    }\n  }\n\n  /**\n   * @return {!Promise<!../components/activities.ActivityIframePort>}\n   */\n  start() {\n    if (!this.serviceReady_) {\n      // Please note that currently openIframe reads the current analytics\n      // context and that it may not contain experiments activated late during\n      // the publishers code lifecycle.\n      this.addLabels(getOnExperiments(this.doc_.getWin()));\n      this.serviceReady_ = this.activityPorts_\n        .openIframe(this.iframe_, feUrl('/serviceiframe'), null, true)\n        .then(\n          (port) => {\n            // Register a listener for the logging to code indicate it is\n            // finished logging.\n            port.on(FinishedLoggingResponse, this.afterLogging_.bind(this));\n            return port.whenReady().then(() => {\n              // The publisher should be done setting experiments but runtime\n              // will forward them here if they aren't.\n              this.addLabels(getOnExperiments(this.doc_.getWin()));\n              return port;\n            });\n          },\n          (message) => {\n            // If the port doesn't open register that logging is broken so\n            // nothing is just waiting.\n            this.loggingBroken_ = true;\n            this.afterLogging_(\n              createErrorResponse('Could not connect [' + message + ']')\n            );\n          }\n        );\n    }\n    return this.serviceReady_;\n  }\n\n  /**\n   * @param {boolean} isReadyToPay\n   */\n  setReadyToPay(isReadyToPay) {\n    this.context_.setReadyToPay(isReadyToPay);\n  }\n\n  /**\n   */\n  close() {\n    this.doc_.getBody().removeChild(this.getElement());\n  }\n\n  /**\n   * @return {!AnalyticsContext}\n   */\n  getContext() {\n    return this.context_;\n  }\n\n  /**\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   * @return {!AnalyticsRequest}\n   */\n  createLogRequest_(event) {\n    const meta = new AnalyticsEventMeta();\n    meta.setEventOriginator(event.eventOriginator);\n    meta.setIsFromUserAction(!!event.isFromUserAction);\n\n    const request = new AnalyticsRequest();\n    request.setEvent(/** @type {!AnalyticsEvent} */ (event.eventType));\n    request.setContext(this.context_);\n    request.setMeta(meta);\n    if (event.additionalParameters instanceof EventParams) {\n      request.setParams(event.additionalParameters);\n    } // Ignore event.additionalParameters.  It may have data we shouldn't log.\n    return request;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  shouldLogPublisherEvents_() {\n    return this.deps_.config().enableSwgAnalytics === true;\n  }\n\n  /**\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   * @return {boolean}\n   */\n  shouldAlwaysLogEvent_(event) {\n    /* AMP_CLIENT events are considered publisher events and we generally only\n     * log those if the publisher decided to enable publisher event logging for\n     * privacy purposes.  The page load event is not private and is necessary\n     * just so we know the user is in AMP, so we will log it regardless of\n     * configuration.\n     */\n    return (\n      event.eventType === AnalyticsEvent.IMPRESSION_PAGE_LOAD &&\n      event.eventOriginator === EventOriginator.AMP_CLIENT\n    );\n  }\n\n  /**\n   *  Listens for new events from the events manager and handles logging\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   */\n  handleClientEvent_(event) {\n    //this event is just used to communicate information internally.  It should\n    //not be reported to the SwG analytics service.\n    if (event.eventType === AnalyticsEvent.EVENT_SUBSCRIPTION_STATE) {\n      return;\n    }\n\n    // Permission should be asked from a privacy workgroup before this originator\n    // can be submitted to the analytics service.  It should most likely be treated\n    // as another kind of publisher event here though.\n    if (event.eventOriginator === EventOriginator.SHOWCASE_CLIENT) {\n      return;\n    }\n\n    if (\n      ClientEventManager.isPublisherEvent(event) &&\n      !this.shouldLogPublisherEvents_() &&\n      !this.shouldAlwaysLogEvent_(event)\n    ) {\n      return;\n    }\n    // Register we sent a log, the port will call this.afterLogging_ when done.\n    this.unfinishedLogs_++;\n    this.lastAction_ = this.start().then((port) => {\n      const analyticsRequest = this.createLogRequest_(event);\n      port.execute(analyticsRequest);\n      if (isExperimentOn(this.doc_.getWin(), ExperimentFlags.LOGGING_BEACON)) {\n        this.sendBeacon_(analyticsRequest);\n      }\n    });\n  }\n\n  /**\n   * This function is called by the iframe after it sends the log to the server.\n   * @param {../proto/api_messages.Message=} message\n   */\n  afterLogging_(message) {\n    const response = /** @type {!FinishedLoggingResponse} */ (message);\n    const success = (response && response.getComplete()) || false;\n    const error = (response && response.getError()) || 'Unknown logging Error';\n    const isTimeout = error === TIMEOUT_ERROR;\n\n    if (!success) {\n      log('Error when logging: ' + error);\n    }\n\n    this.unfinishedLogs_--;\n    if (!isTimeout) {\n      this.everFinishedLog_ = true;\n    }\n\n    // Nothing is waiting\n    if (this.loggingResolver_ === null) {\n      return;\n    }\n\n    if (this.unfinishedLogs_ === 0 || this.loggingBroken_ || isTimeout) {\n      if (this.timeout_ !== null) {\n        clearTimeout(this.timeout_);\n        this.timeout_ = null;\n      }\n      this.loggingResolver_(success);\n      this.promiseToLog_ = null;\n      this.loggingResolver_ = null;\n    }\n  }\n\n  /**\n   * Please note that logs sent after getLoggingPromise is called are not\n   * guaranteed to be finished when the promise is resolved.  You should call\n   * this function just prior to redirecting the page after SwG is finished\n   * logging.\n   * @return {!Promise}\n   */\n  getLoggingPromise() {\n    if (this.unfinishedLogs_ === 0 || this.loggingBroken_) {\n      return Promise.resolve(true);\n    }\n    if (this.promiseToLog_ === null) {\n      this.promiseToLog_ = new Promise((resolve) => {\n        this.loggingResolver_ = resolve;\n      });\n\n      // The promise above should not wait forever if things go wrong.  Let\n      // the user proceed!\n      const whenDone = this.afterLogging_.bind(this);\n      this.timeout_ = setTimeout(\n        () => {\n          this.timeout_ = null;\n          whenDone(createErrorResponse(TIMEOUT_ERROR));\n        },\n        this.everFinishedLog_ ? MAX_WAIT : MAX_FIRST_WAIT\n      );\n    }\n\n    return this.promiseToLog_;\n  }\n\n  /**\n   * A beacon is a rapid fire browser request that does not wait for a response\n   * from the server.  It is guaranteed to go out before the page redirects.\n   * @param {!AnalyticsRequest} analyticsRequest\n   */\n  sendBeacon_(analyticsRequest) {\n    const pubId = encodeURIComponent(\n      this.deps_.pageConfig().getPublicationId()\n    );\n    const url = serviceUrl('/publication/' + pubId + '/clientlogs');\n    this.fetcher_.sendBeacon(url, analyticsRequest);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AnalyticsEvent} from '../proto/api_messages';\nimport {SWG_I18N_STRINGS} from '../i18n/swg-strings';\nimport {SmartSubscriptionButtonApi, Theme} from './smart-button-api';\nimport {createElement} from '../utils/dom';\nimport {msg} from '../utils/i18n';\n\n/**\n * Properties:\n * - lang: Sets the button SVG and title. Default is \"en\".\n * - theme: \"light\" or \"dark\". Default is \"light\".\n *\n * @typedef {{\n *   options: (!../api/subscriptions.SmartButtonOptions|!../api/subscriptions.ButtonOptions),\n *   clickFun: !function(!Event=),\n * }} ButtonParams\n */\nexport let ButtonParams;\n\n/** @enum {string} */\nexport const ButtonAttributeValues = {\n  SUBSCRIPTION: 'subscription',\n  CONTRIBUTION: 'contribution',\n};\n\nconst BUTTON_INNER_HTML = `<img class=\"swg-button-v2-icon-$theme$\"></div>$textContent$`;\n\n/**\n * The button stylesheet can be found in the `/assets/swg-button.css`.\n * It's produced by the `gulp assets` task and deployed to\n * `https://news.google.com/swg/js/v1/swg-button.css`.\n */\nexport class ButtonApi {\n  /**\n   * @param {!../model/doc.Doc} doc\n   * @param {!Promise<!./runtime.ConfiguredRuntime>} configuredRuntimePromise\n   */\n  constructor(doc, configuredRuntimePromise) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Promise<!./runtime.ConfiguredRuntime>} */\n    this.configuredRuntimePromise_ = configuredRuntimePromise;\n  }\n\n  /**\n   */\n  init() {\n    const head = this.doc_.getHead();\n    if (!head) {\n      return;\n    }\n\n    const url = '$assets$/swg-button.css';\n    const existing = head.querySelector(`link[href=\"${url}\"]`);\n    if (existing) {\n      return;\n    }\n\n    // <link rel=\"stylesheet\" href=\"...\" type=\"text/css\">\n    head.appendChild(\n      createElement(this.doc_.getWin().document, 'link', {\n        'rel': 'stylesheet',\n        'type': 'text/css',\n        'href': url,\n      })\n    );\n  }\n\n  /**\n   * @param {!../api/subscriptions.ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {!Element}\n   */\n  create(optionsOrCallback, callback) {\n    const button = createElement(this.doc_.getWin().document, 'button', {});\n    return this.attach(button, optionsOrCallback, callback);\n  }\n\n  /**\n   * Attaches the Classic 'Subscribe With Google' button.\n   * @param {!Element} button\n   * @param {../api/subscriptions.ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {!Element}\n   */\n  attach(button, optionsOrCallback, callback) {\n    const options = this.setupButtonAndGetParams_(\n      button,\n      AnalyticsEvent.ACTION_SWG_BUTTON_CLICK,\n      optionsOrCallback,\n      callback\n    ).options;\n\n    const theme = options['theme'];\n    button.classList.add(`swg-button-${theme}`);\n    button.setAttribute('role', 'button');\n    if (options['lang']) {\n      button.setAttribute('lang', options['lang']);\n    }\n    button.setAttribute(\n      'title',\n      msg(SWG_I18N_STRINGS.SUBSCRIPTION_TITLE_LANG_MAP, button) || ''\n    );\n    this.logSwgEvent_(AnalyticsEvent.IMPRESSION_SWG_BUTTON);\n\n    return button;\n  }\n\n  /**\n   * Attaches the new subscribe button, for subscription product types.\n   * @param {!Element} button\n   * @param {../api/subscriptions.ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {!Element}\n   */\n  attachSubscribeButton(button, optionsOrCallback, callback) {\n    const options = this.setupButtonAndGetParams_(\n      button,\n      AnalyticsEvent.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK,\n      optionsOrCallback,\n      callback\n    ).options;\n\n    const theme = options['theme'];\n    button.classList.add(`swg-button-v2-${theme}`);\n    button.setAttribute('role', 'button');\n    if (options['lang']) {\n      button.setAttribute('lang', options['lang']);\n    }\n    button./*OK*/ innerHTML = BUTTON_INNER_HTML.replace(\n      '$theme$',\n      theme\n    ).replace(\n      '$textContent$',\n      msg(SWG_I18N_STRINGS.SUBSCRIPTION_TITLE_LANG_MAP, button) || ''\n    );\n    this.logSwgEvent_(AnalyticsEvent.IMPRESSION_SHOW_OFFERS_SWG_BUTTON);\n\n    return button;\n  }\n\n  /**\n   * Attaches the new contribute button, for contribution product types.\n   * @param {!Element} button\n   * @param {../api/subscriptions.ButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {!Element}\n   */\n  attachContributeButton(button, optionsOrCallback, callback) {\n    const options = this.setupButtonAndGetParams_(\n      button,\n      AnalyticsEvent.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK,\n      optionsOrCallback,\n      callback\n    ).options;\n\n    const theme = options['theme'];\n    button.classList.add(`swg-button-v2-${theme}`);\n    button.setAttribute('role', 'button');\n    if (options['lang']) {\n      button.setAttribute('lang', options['lang']);\n    }\n    button./*OK*/ innerHTML = BUTTON_INNER_HTML.replace(\n      '$theme$',\n      theme\n    ).replace(\n      '$textContent$',\n      msg(SWG_I18N_STRINGS.CONTRIBUTION_TITLE_LANG_MAP, button) || ''\n    );\n    this.logSwgEvent_(AnalyticsEvent.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON);\n\n    return button;\n  }\n\n  /**\n   * Attaches all buttons with the specified attribute set to any of the\n   * attribute values.\n   * @param {string} attribute\n   * @param {!Array<string>} attributeValues\n   * @param {../api/subscriptions.ButtonOptions} options\n   * @param {!Object<string, function()>} attributeValueToCallback\n   */\n  attachButtonsWithAttribute(\n    attribute,\n    attributeValues,\n    options,\n    attributeValueToCallback\n  ) {\n    attributeValues.forEach((attributeValue) => {\n      const elements = this.doc_\n        .getRootNode()\n        .querySelectorAll(`button[${attribute}=\"${attributeValue}\"]`);\n      for (let i = 0; i < elements.length; i++) {\n        if (attributeValue === ButtonAttributeValues.SUBSCRIPTION) {\n          this.attachSubscribeButton(\n            elements[i],\n            options,\n            attributeValueToCallback[attributeValue]\n          );\n        } else if (attributeValue === ButtonAttributeValues.CONTRIBUTION) {\n          this.attachContributeButton(\n            elements[i],\n            options,\n            attributeValueToCallback[attributeValue]\n          );\n        }\n      }\n    });\n  }\n\n  /**\n   * @param {!AnalyticsEvent} eventType\n   * @param {boolean=} isFromUserAction\n   */\n  logSwgEvent_(eventType, isFromUserAction) {\n    this.configuredRuntimePromise_.then((configuredRuntime) => {\n      configuredRuntime.eventManager().logSwgEvent(eventType, isFromUserAction);\n    });\n  }\n\n  /**\n   *\n   * @param {../api/subscriptions.ButtonOptions|../api/subscriptions.SmartButtonOptions|function()} optionsOrCallback\n   * @return {!../api/subscriptions.ButtonOptions|!../api/subscriptions.SmartButtonOptions}\n   * @private\n   */\n  getOptions_(optionsOrCallback) {\n    const options = /** @type {!../api/subscriptions.ButtonOptions|!../api/subscriptions.SmartButtonOptions} */ (optionsOrCallback &&\n    typeof optionsOrCallback != 'function'\n      ? optionsOrCallback\n      : {'theme': Theme.LIGHT});\n\n    const theme = options['theme'];\n    if (theme !== Theme.LIGHT && theme !== Theme.DARK) {\n      options['theme'] = Theme.LIGHT;\n    }\n    return options;\n  }\n\n  /**\n   *\n   * @param {?../api/subscriptions.ButtonOptions|?../api/subscriptions.SmartButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {function()|function(Event):boolean}\n   * @private\n   */\n  getCallback_(optionsOrCallback, callback) {\n    return /** @type {function()|function(Event):boolean} */ ((typeof optionsOrCallback ==\n    'function'\n      ? optionsOrCallback\n      : null) || callback);\n  }\n\n  /**\n   * @param {!Element} button\n   * @param {AnalyticsEvent} clickEvent\n   * @param {../api/subscriptions.SmartButtonOptions|function()|../api/subscriptions.ButtonOptions} optionsOrCallback\n   * @param {function()=} callbackFun\n   * @return {ButtonParams}\n   */\n  setupButtonAndGetParams_(button, clickEvent, optionsOrCallback, callbackFun) {\n    const options = this.getOptions_(optionsOrCallback);\n    const callback = this.getCallback_(optionsOrCallback, callbackFun);\n    const clickFun = (event) => {\n      this.logSwgEvent_(clickEvent, true);\n      if (typeof callback === 'function') {\n        callback(event);\n      }\n    };\n    button.addEventListener('click', clickFun);\n    return {options, clickFun};\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!Element} button\n   * @param {../api/subscriptions.SmartButtonOptions|function()} optionsOrCallback\n   * @param {function()=} callback\n   * @return {!Element}\n   */\n  attachSmartButton(deps, button, optionsOrCallback, callback) {\n    const params = this.setupButtonAndGetParams_(\n      button,\n      AnalyticsEvent.ACTION_SWG_BUTTON_CLICK,\n      optionsOrCallback,\n      callback\n    );\n    // Add required CSS class, if missing.\n    button.classList.add('swg-smart-button');\n    return new SmartSubscriptionButtonApi(\n      deps,\n      button,\n      params.options,\n      params.clickFun\n    ).start();\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {isCancelError} from '../utils/errors';\nimport {warn} from '../utils/log';\n\n/** @enum {number} */\nconst CallbackId = {\n  ENTITLEMENTS: 1,\n  SUBSCRIBE_REQUEST: 2,\n  PAYMENT_RESPONSE: 3,\n  LOGIN_REQUEST: 4,\n  LINK_PROGRESS: 5,\n  LINK_COMPLETE: 6,\n  FLOW_STARTED: 7,\n  FLOW_CANCELED: 8,\n};\n\n/**\n */\nexport class Callbacks {\n  /**\n   */\n  constructor() {\n    /** @private @const {!Object<CallbackId, function(*)>} */\n    this.callbacks_ = {};\n    /** @private @const {!Object<CallbackId, *>} */\n    this.resultBuffer_ = {};\n    /** @private {?Promise} */\n    this.paymentResponsePromise_ = null;\n  }\n\n  /**\n   * @param {function(!Promise<!../api/entitlements.Entitlements>)} callback\n   */\n  setOnEntitlementsResponse(callback) {\n    this.setCallback_(CallbackId.ENTITLEMENTS, callback);\n  }\n\n  /**\n   * @param {!Promise<!../api/entitlements.Entitlements>} promise\n   */\n  triggerEntitlementsResponse(promise) {\n    return this.trigger_(\n      CallbackId.ENTITLEMENTS,\n      promise.then((res) => res.clone())\n    );\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEntitlementsResponsePending() {\n    return !!this.resultBuffer_[CallbackId.ENTITLEMENTS];\n  }\n\n  /**\n   * @param {function(!../api/subscriptions.LoginRequest)} callback\n   */\n  setOnLoginRequest(callback) {\n    this.setCallback_(CallbackId.LOGIN_REQUEST, callback);\n  }\n\n  /**\n   * @param {!../api/subscriptions.LoginRequest} request\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLoginRequest(request) {\n    return this.trigger_(CallbackId.LOGIN_REQUEST, request);\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkProgress(callback) {\n    this.setCallback_(CallbackId.LINK_PROGRESS, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLinkProgress() {\n    return this.trigger_(CallbackId.LINK_PROGRESS, true);\n  }\n\n  /**\n   */\n  resetLinkProgress() {\n    this.resetCallback_(CallbackId.LINK_PROGRESS);\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkComplete(callback) {\n    this.setCallback_(CallbackId.LINK_COMPLETE, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLinkComplete() {\n    return this.trigger_(CallbackId.LINK_COMPLETE, true);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLinkCompletePending() {\n    return !!this.resultBuffer_[CallbackId.LINK_COMPLETE];\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnSubscribeRequest(callback) {\n    this.setCallback_(CallbackId.SUBSCRIBE_REQUEST, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerSubscribeRequest() {\n    return this.trigger_(CallbackId.SUBSCRIBE_REQUEST, true);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasSubscribeRequestCallback() {\n    return !!this.callbacks_[CallbackId.SUBSCRIBE_REQUEST];\n  }\n\n  /**\n   * @param {function(!Promise<!../api/subscribe-response.SubscribeResponse>)} callback\n   */\n  setOnSubscribeResponse(callback) {\n    warn(\n      `[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'`\n    );\n    this.setCallback_(CallbackId.PAYMENT_RESPONSE, callback);\n  }\n\n  /**\n   * @param {function(!Promise<!../api/subscribe-response.SubscribeResponse>)} callback\n   */\n  setOnContributionResponse(callback) {\n    warn(\n      `[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'`\n    );\n    this.setCallback_(CallbackId.PAYMENT_RESPONSE, callback);\n  }\n\n  /**\n   * @param {function(!Promise<!../api/subscribe-response.SubscribeResponse>)} callback\n   */\n  setOnPaymentResponse(callback) {\n    this.setCallback_(CallbackId.PAYMENT_RESPONSE, callback);\n  }\n\n  /**\n   * @param {!Promise<!../api/subscribe-response.SubscribeResponse>} responsePromise\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerPaymentResponse(responsePromise) {\n    this.paymentResponsePromise_ = responsePromise.then(\n      (res) => {\n        this.trigger_(\n          CallbackId.PAYMENT_RESPONSE,\n          Promise.resolve(res.clone())\n        );\n      },\n      (reason) => {\n        if (isCancelError(reason)) {\n          return;\n        }\n        throw reason;\n      }\n    );\n    return !!this.callbacks_[CallbackId.PAYMENT_RESPONSE];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasPaymentResponsePending() {\n    return !!this.resultBuffer_[CallbackId.PAYMENT_RESPONSE];\n  }\n\n  /**\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowStarted(callback) {\n    this.setCallback_(CallbackId.FLOW_STARTED, callback);\n  }\n\n  /**\n   * @param {string} flow\n   * @param {!Object=} data\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerFlowStarted(flow, data = {}) {\n    return this.trigger_(CallbackId.FLOW_STARTED, {\n      flow,\n      data,\n    });\n  }\n\n  /**\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowCanceled(callback) {\n    this.setCallback_(CallbackId.FLOW_CANCELED, callback);\n  }\n\n  /**\n   * @param {string} flow\n   * @param {!Object=} data\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerFlowCanceled(flow, data = {}) {\n    return this.trigger_(CallbackId.FLOW_CANCELED, {\n      flow,\n      data,\n    });\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {function(?)} callback\n   * @private\n   */\n  setCallback_(id, callback) {\n    if (this.callbacks_[id]) {\n      warn(\n        `[swg.js]: You have registered multiple callbacks for the same response.`\n      );\n    }\n    this.callbacks_[id] = callback;\n    // If result already exist, execute the callback right away.\n    if (id in this.resultBuffer_) {\n      this.executeCallback_(id, callback, this.resultBuffer_[id]);\n    }\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {*} data\n   * @return {boolean}\n   * @private\n   */\n  trigger_(id, data) {\n    this.resultBuffer_[id] = data;\n    const callback = this.callbacks_[id];\n    if (callback) {\n      this.executeCallback_(id, callback, data);\n    }\n    return !!callback;\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @private\n   */\n  resetCallback_(id) {\n    if (id in this.resultBuffer_) {\n      delete this.resultBuffer_[id];\n    }\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {function(*)} callback\n   * @param {*} data\n   * @private\n   */\n  executeCallback_(id, callback, data) {\n    // Always execute callbacks in a microtask.\n    Promise.resolve().then(() => {\n      callback(data);\n      this.resetCallback_(id);\n    });\n  }\n}\n","/**\n * Copyright 2021 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AutoPromptConfig} from '../model/auto-prompt-config';\nimport {ClientConfig} from '../model/client-config';\nimport {ClientTheme} from '../api/basic-subscriptions';\nimport {serviceUrl} from './services';\nimport {warn} from '../utils/log';\n\n/**\n * Manager of how the client should be configured. Fetches and stores\n * configuration details from the server.\n */\nexport class ClientConfigManager {\n  /**\n   * @param {string} publicationId\n   * @param {!./fetcher.Fetcher} fetcher\n   * @param {!../api/basic-subscriptions.ClientOptions=} clientOptions\n   */\n  constructor(publicationId, fetcher, clientOptions) {\n    /** @private @const {!../api/basic-subscriptions.ClientOptions} */\n    this.clientOptions_ = clientOptions || {};\n\n    /** @private @const {string} */\n    this.publicationId_ = publicationId;\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n\n    /** @private {?Promise<!ClientConfig>} */\n    this.responsePromise_ = null;\n  }\n\n  /**\n   * Fetches the client config from the server.\n   * @return {!Promise<!ClientConfig>}\n   */\n  fetchClientConfig() {\n    if (!this.publicationId_) {\n      throw new Error('fetchClientConfig requires publicationId');\n    }\n    if (!this.responsePromise_) {\n      this.responsePromise_ = this.fetch_();\n    }\n    return this.responsePromise_;\n  }\n\n  /**\n   * Gets the client config, if already requested. Otherwise returns a Promise\n   * with an empty ClientConfig.\n   * @return {!Promise<!ClientConfig>}\n   */\n  getClientConfig() {\n    return this.responsePromise_ || Promise.resolve(new ClientConfig());\n  }\n\n  /**\n   * Convenience method for retrieving the auto prompt portion of the client\n   * configuration.\n   * @return {!Promise<!../model/auto-prompt-config.AutoPromptConfig|undefined>}\n   */\n  getAutoPromptConfig() {\n    if (!this.responsePromise_) {\n      this.fetchClientConfig();\n    }\n    return this.responsePromise_.then(\n      (clientConfig) => clientConfig.autoPromptConfig\n    );\n  }\n\n  /**\n   * Gets the language the UI should be displayed in. See\n   * src/api/basic-subscriptions.ClientOptions.lang. This\n   * @return {string}\n   */\n  getLanguage() {\n    return this.clientOptions_.lang || 'en';\n  }\n\n  /**\n   * Gets the theme the UI should be displayed in. See\n   * src/api/basic-subscriptions.ClientOptions.theme.\n   * @return {!../api/basic-subscriptions.ClientTheme}\n   */\n  getTheme() {\n    return this.clientOptions_.theme || ClientTheme.LIGHT;\n  }\n\n  /**\n   * Fetches the client config from the server.\n   * @return {!Promise<!ClientConfig>}\n   */\n  fetch_() {\n    const url = serviceUrl(\n      '/publication/' +\n        encodeURIComponent(this.publicationId_) +\n        '/clientconfiguration'\n    );\n    return this.fetcher_.fetchCredentialedJson(url).then((json) => {\n      if (json.errorMessages && json.errorMessages.length > 0) {\n        json.errorMessages.forEach((errorMessage) => {\n          warn('SwG ClientConfigManager: ' + errorMessage);\n        });\n      }\n      return this.parseClientConfig_(json);\n    });\n  }\n\n  /**\n   * Parses the fetched config into the ClientConfig container object.\n   * @param {!Object} json\n   * @return {!ClientConfig}\n   */\n  parseClientConfig_(json) {\n    const paySwgVersion = json['paySwgVersion'];\n    const autoPromptConfigJson = json['autoPromptConfig'];\n    let autoPromptConfig = undefined;\n    if (autoPromptConfigJson) {\n      autoPromptConfig = new AutoPromptConfig(\n        autoPromptConfigJson.maxImpressionsPerWeek,\n        autoPromptConfigJson.clientDisplayTrigger?.displayDelaySeconds,\n        autoPromptConfigJson.explicitDismissalConfig?.backoffSeconds,\n        autoPromptConfigJson.explicitDismissalConfig?.maxDismissalsPerWeek,\n        autoPromptConfigJson.explicitDismissalConfig?.maxDismissalsResultingHideSeconds\n      );\n    }\n    return new ClientConfig(\n      autoPromptConfig,\n      paySwgVersion,\n      json['useUpdatedOfferFlows']\n    );\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AnalyticsEvent, EventOriginator} from '../proto/api_messages';\nimport {FilterResult} from '../api/client-event-manager-api';\nimport {isBoolean, isEnumValue, isFunction, isObject} from '../utils/types';\nimport {log} from '../utils/log';\n\n/**\n * Helper function to describe an issue with an event object\n * @param {!string} valueName\n * @param {?*} value\n * @returns {!string}\n */\nfunction createEventErrorMessage(valueName, value) {\n  return 'Event has an invalid ' + valueName + '(' + value + ')';\n}\n\n/**\n * Throws an error if the event is invalid.\n * @param {!../api/client-event-manager-api.ClientEvent} event\n */\nfunction validateEvent(event) {\n  if (!isObject(event)) {\n    throw new Error('Event must be a valid object');\n  }\n\n  if (!isEnumValue(AnalyticsEvent, event.eventType)) {\n    throw new Error(createEventErrorMessage('eventType', event.eventType));\n  }\n\n  if (!isEnumValue(EventOriginator, event.eventOriginator)) {\n    throw new Error(\n      createEventErrorMessage('eventOriginator', event.eventOriginator)\n    );\n  }\n\n  if (\n    !isObject(event.additionalParameters) &&\n    event.additionalParameters != null\n  ) {\n    throw new Error(\n      createEventErrorMessage(\n        'additionalParameters',\n        event.additionalParameters\n      )\n    );\n  }\n\n  if (event.isFromUserAction != null && !isBoolean(event.isFromUserAction)) {\n    throw new Error(\n      createEventErrorMessage('isFromUserAction', event.isFromUserAction)\n    );\n  }\n}\n\n/** @implements {../api/client-event-manager-api.ClientEventManagerApi} */\nexport class ClientEventManager {\n  /**\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   * @return {boolean}\n   */\n  static isPublisherEvent(event) {\n    return (\n      event.eventOriginator === EventOriginator.PROPENSITY_CLIENT ||\n      event.eventOriginator === EventOriginator.PUBLISHER_CLIENT ||\n      event.eventOriginator === EventOriginator.AMP_CLIENT\n    );\n  }\n\n  /**\n   *\n   * @param {!Promise} configuredPromise\n   */\n  constructor(configuredPromise) {\n    /** @private {!Array<function(!../api/client-event-manager-api.ClientEvent)>} */\n    this.listeners_ = [];\n\n    /** @private {!Array<function(!../api/client-event-manager-api.ClientEvent):!FilterResult>} */\n    this.filterers_ = [];\n\n    /** @private {?Promise} */\n    this.lastAction_ = null;\n\n    /** @private @const {!Promise} */\n    this.isReadyPromise_ = configuredPromise;\n  }\n\n  /**\n   * @overrides\n   */\n  registerEventListener(listener) {\n    if (!isFunction(listener)) {\n      throw new Error('Event manager listeners must be a function');\n    }\n    this.listeners_.push(listener);\n  }\n\n  /**\n   * @overrides\n   */\n  registerEventFilterer(filterer) {\n    if (!isFunction(filterer)) {\n      throw new Error('Event manager filterers must be a function');\n    }\n    this.filterers_.push(filterer);\n  }\n\n  /**\n   * @overrides\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   */\n  logEvent(event) {\n    validateEvent(event);\n    this.lastAction_ = this.isReadyPromise_.then(() => {\n      for (let filterer = 0; filterer < this.filterers_.length; filterer++) {\n        try {\n          if (this.filterers_[filterer](event) === FilterResult.CANCEL_EVENT) {\n            return Promise.resolve();\n          }\n        } catch (e) {\n          log(e);\n        }\n      }\n      for (let listener = 0; listener < this.listeners_.length; listener++) {\n        try {\n          this.listeners_[listener](event);\n        } catch (e) {\n          log(e);\n        }\n      }\n      return Promise.resolve();\n    });\n  }\n\n  /**\n   * Creates an event with the arguments provided and calls logEvent.\n   * @param {!AnalyticsEvent} eventType\n   * @param {?boolean=} isFromUserAction\n   * @param {../proto/api_messages.EventParams=} eventParams\n   */\n  logSwgEvent(eventType, isFromUserAction = false, eventParams = null) {\n    this.logEvent({\n      eventType,\n      eventOriginator: EventOriginator.SWG_CLIENT,\n      isFromUserAction,\n      additionalParameters: eventParams,\n    });\n  }\n\n  /** @return {!Promise<null>} */\n  getReadyPromise() {\n    return this.isReadyPromise_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {\n  AlreadySubscribedResponse,\n  SkuSelectedResponse,\n} from '../proto/api_messages';\nimport {PayStartFlow} from './pay-flow';\nimport {ProductType, SubscriptionFlows} from '../api/subscriptions';\nimport {feArgs, feUrl} from './services';\n\n/**\n * The class for Contributions flow.\n */\nexport class ContributionsFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./client-config-manager.ClientConfigManager} */\n    this.clientConfigManager_ = deps.clientConfigManager();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    const isClosable = (options && options.isClosable) || true;\n\n    /** @private @const {!Promise<!ActivityIframeView>} */\n    this.activityIframeViewPromise_ = this.getUrl_(\n      this.clientConfigManager_.getClientConfig()\n    ).then((url) => {\n      return new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl(url),\n        feArgs({\n          'productId': deps.pageConfig().getProductId(),\n          'publicationId': deps.pageConfig().getPublicationId(),\n          'productType': ProductType.UI_CONTRIBUTION,\n          'list': (options && options.list) || 'default',\n          'skus': (options && options.skus) || null,\n          'isClosable': isClosable,\n        }),\n        /* shouldFadeBody */ true\n      );\n    });\n  }\n\n  /**\n   * @param {AlreadySubscribedResponse} response\n   */\n  handleLinkRequest_(response) {\n    if (response.getSubscriberOrMember()) {\n      this.deps_.callbacks().triggerLoginRequest({\n        linkRequested: !!response.getLinkRequested(),\n      });\n    }\n  }\n\n  /**\n   * @param {SkuSelectedResponse} response\n   */\n  startPayFlow_(response) {\n    const sku = response.getSku();\n    const isOneTime = response.getOneTime();\n    if (sku) {\n      const /** @type {../api/subscriptions.SubscriptionRequest} */ contributionRequest = {\n          'skuId': sku,\n        };\n      if (isOneTime) {\n        contributionRequest['oneTime'] = isOneTime;\n      }\n      new PayStartFlow(\n        this.deps_,\n        contributionRequest,\n        ProductType.UI_CONTRIBUTION\n      ).start();\n    }\n  }\n\n  /**\n   * Starts the contributions flow or alreadyMember flow.\n   * @return {!Promise}\n   */\n  start() {\n    return this.activityIframeViewPromise_.then((activityIframeView) => {\n      // Start/cancel events.\n      this.deps_\n        .callbacks()\n        .triggerFlowStarted(SubscriptionFlows.SHOW_CONTRIBUTION_OPTIONS);\n      activityIframeView.onCancel(() => {\n        this.deps_\n          .callbacks()\n          .triggerFlowCanceled(SubscriptionFlows.SHOW_CONTRIBUTION_OPTIONS);\n      });\n      activityIframeView.on(\n        AlreadySubscribedResponse,\n        this.handleLinkRequest_.bind(this)\n      );\n      activityIframeView.on(SkuSelectedResponse, this.startPayFlow_.bind(this));\n\n      return this.dialogManager_.openView(activityIframeView);\n    });\n  }\n\n  /**\n   * Gets the URL that should be used for the activity iFrame view.\n   * @param {!Promise<../model/client-config.ClientConfig>} clientConfigPromise\n   * @return {!Promise<string>}\n   */\n  getUrl_(clientConfigPromise) {\n    return clientConfigPromise.then((clientConfig) => {\n      if (clientConfig.useUpdatedOfferFlows) {\n        return '/contributionoffersiframe';\n      } else {\n        return '/contributionsiframe';\n      }\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {AnalyticsEvent} from '../proto/api_messages';\nimport {DeferredAccountCreationResponse} from '../api/deferred-account-creation';\nimport {JwtHelper} from '../utils/jwt';\nimport {PayCompleteFlow} from './pay-flow';\nimport {PurchaseData, SubscribeResponse} from '../api/subscribe-response';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {UserData} from '../api/user-data';\nimport {feArgs, feUrl} from './services';\nimport {isCancelError} from '../utils/errors';\n\n/**\n * The flow to initiate deferred account process.\n * See `Subscriptions.completeDeferredAccountCreation` API.\n */\nexport class DeferredAccountFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?../api/deferred-account-creation.DeferredAccountCreationRequest} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n\n    /** @private {?Promise} */\n    this.openPromise_ = null;\n\n    /** @type {!../api/deferred-account-creation.DeferredAccountCreationRequest} */\n    const defaultOptions = {\n      entitlements: null,\n      consent: true,\n    };\n    /** @private @const {!../api/deferred-account-creation.DeferredAccountCreationRequest} */\n    this.options_ = Object.assign(defaultOptions, options || {});\n  }\n\n  /**\n   * Starts the deferred account flow.\n   * @return {!Promise<!DeferredAccountCreationResponse>}\n   */\n  start() {\n    const entitlements = this.options_.entitlements;\n\n    // For now, entitlements are required to be present and have the Google\n    // token. This is strictly not required for the implementation. But it's\n    // preferrable API-wise at this time.\n    if (!entitlements || !entitlements.getEntitlementForSource('google')) {\n      throw new Error('No entitlements with \"google\" source');\n    }\n\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.COMPLETE_DEFERRED_ACCOUNT_CREATION);\n\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/recoveriframe'),\n      feArgs({\n        'publicationId': this.deps_.pageConfig().getPublicationId(),\n        'productId': this.deps_.pageConfig().getProductId(),\n        'entitlements': (entitlements && entitlements.raw) || null,\n        'consent': this.options_.consent,\n      }),\n      /* shouldFadeBody */ true\n    );\n\n    this.openPromise_ = this.dialogManager_.openView(this.activityIframeView_);\n    return this.activityIframeView_.acceptResult().then(\n      (result) => {\n        // The consent part is complete.\n        return this.handleConsentResponse_(\n          /** @type {!Object} */ (result.data)\n        );\n      },\n      (reason) => {\n        if (isCancelError(reason)) {\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(\n              SubscriptionFlows.COMPLETE_DEFERRED_ACCOUNT_CREATION\n            );\n        } else {\n          this.dialogManager_.completeView(this.activityIframeView_);\n        }\n        throw reason;\n      }\n    );\n  }\n\n  /**\n   * @param {!Object} data\n   * @return {!DeferredAccountCreationResponse}\n   * @private\n   */\n  handleConsentResponse_(data) {\n    this.deps_.entitlementsManager().blockNextNotification();\n\n    // Parse the response.\n    const entitlementsJwt = data['entitlements'];\n    const idToken = data['idToken'];\n    const productType = data['productType'];\n    const entitlements = this.deps_\n      .entitlementsManager()\n      .parseEntitlements({'signedEntitlements': entitlementsJwt});\n    const userData = new UserData(\n      idToken,\n      /** @type {!Object} */ (new JwtHelper().decode(idToken))\n    );\n    const purchaseDataList = data['purchaseDataList']\n      ? data['purchaseDataList'].map(\n          (pd) => new PurchaseData(pd['data'], pd['signature'])\n        )\n      : [\n          // TODO(dvoytenko): cleanup/deprecate.\n          new PurchaseData(\n            data['purchaseData']['data'],\n            data['purchaseData']['signature']\n          ),\n        ];\n\n    // For now, we'll use the `PayCompleteFlow` as a \"creating account\" flow.\n    // But this can be eventually implemented by the same iframe.\n    const creatingFlow = new PayCompleteFlow(this.deps_);\n    const completeHandler = creatingFlow.complete.bind(creatingFlow);\n\n    const response = new DeferredAccountCreationResponse(\n      entitlements,\n      userData,\n      purchaseDataList,\n      completeHandler\n    );\n\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.ACTION_NEW_DEFERRED_ACCOUNT, true);\n\n    // Start the \"sync\" flow.\n    creatingFlow.start(\n      new SubscribeResponse(\n        '', // raw field doesn't matter in this case\n        purchaseDataList[0],\n        userData,\n        entitlements,\n        productType,\n        () => Promise.resolve() // completeHandler doesn't matter in this case\n      )\n    );\n    return response;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @interface */\nexport class DepsDef {\n  /**\n   * @return {!../model/doc.Doc}\n   */\n  doc() {}\n\n  /**\n   * @return {!Window}\n   */\n  win() {}\n\n  /**\n   * @return {!../api/subscriptions.Config}\n   */\n  config() {}\n\n  /**\n   * @return {!../model/page-config.PageConfig}\n   */\n  pageConfig() {}\n\n  /**\n   * @return {!../components/activities.ActivityPorts}\n   */\n  activities() {}\n\n  /**\n   * @return {!./pay-client.PayClient}\n   */\n  payClient() {}\n\n  /**\n   * @return {!../components/dialog-manager.DialogManager}\n   */\n  dialogManager() {}\n\n  /**\n   * @return {!./entitlements-manager.EntitlementsManager}\n   */\n  entitlementsManager() {}\n\n  /**\n   * @return {!./callbacks.Callbacks}\n   */\n  callbacks() {}\n\n  /**\n   * @return {!../runtime/storage.Storage}\n   */\n  storage() {}\n\n  /**\n   * @return {!../runtime/analytics-service.AnalyticsService}\n   */\n  analytics() {}\n\n  /**\n   * @return {!../runtime/jserror.JsError}\n   */\n  jserror() {}\n\n  /**\n   * @return {!../runtime/client-event-manager.ClientEventManager}\n   */\n  eventManager() {}\n\n  /**\n   * @return {!../runtime/client-config-manager.ClientConfigManager}\n   */\n  clientConfigManager() {}\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnalyticsEvent,\n  EntitlementJwt,\n  EntitlementResult,\n  EntitlementSource,\n  EntitlementsRequest,\n  EventOriginator,\n} from '../proto/api_messages';\nimport {Constants} from '../utils/constants';\nimport {\n  Entitlement,\n  Entitlements,\n  GOOGLE_METERING_SOURCE,\n} from '../api/entitlements';\nimport {\n  GetEntitlementsParamsExternalDef,\n  GetEntitlementsParamsInternalDef,\n} from '../api/subscriptions';\nimport {JwtHelper} from '../utils/jwt';\nimport {MeterClientTypes} from '../api/metering';\nimport {MeterToastApi} from './meter-toast-api';\nimport {Toast} from '../ui/toast';\nimport {addQueryParam, getCanonicalUrl, parseQueryString} from '../utils/url';\nimport {analyticsEventToEntitlementResult} from './event-type-mapping';\nimport {base64UrlEncodeFromBytes, utf8EncodeSync} from '../utils/bytes';\nimport {feArgs, feUrl} from '../runtime/services';\nimport {hash} from '../utils/string';\nimport {queryStringHasFreshGaaParams} from '../utils/gaa';\nimport {serviceUrl} from './services';\nimport {toTimestamp} from '../utils/date-utils';\nimport {warn} from '../utils/log';\n\nconst SERVICE_ID = 'subscribe.google.com';\nconst TOAST_STORAGE_KEY = 'toast';\nconst ENTS_STORAGE_KEY = 'ents';\nconst IS_READY_TO_PAY_STORAGE_KEY = 'isreadytopay';\n\n/**\n */\nexport class EntitlementsManager {\n  /**\n   * @param {!Window} win\n   * @param {!../model/page-config.PageConfig} pageConfig\n   * @param {!./fetcher.Fetcher} fetcher\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(win, pageConfig, fetcher, deps) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = pageConfig;\n\n    /** @private @const {string} */\n    this.publicationId_ = this.pageConfig_.getPublicationId();\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!JwtHelper} */\n    this.jwtHelper_ = new JwtHelper();\n\n    /** @private {?Promise<!Entitlements>} */\n    this.responsePromise_ = null;\n\n    /** @private {number} */\n    this.positiveRetries_ = 0;\n\n    /** @private {boolean} */\n    this.blockNextNotification_ = false;\n\n    /**\n     * String containing encoded metering parameters currently.\n     * We may expand this to contain more information in the future.\n     * @private {?string}\n     */\n    this.encodedParams_ = null;\n\n    /** @private @const {!./storage.Storage} */\n    this.storage_ = deps.storage();\n\n    /** @private @const {!../runtime/analytics-service.AnalyticsService} */\n    this.analyticsService_ = deps.analytics();\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = deps.config();\n\n    this.deps_\n      .eventManager()\n      .registerEventListener(this.possiblyPingbackOnClientEvent_.bind(this));\n  }\n\n  /**\n   * @param {boolean=} expectPositive\n   */\n  reset(expectPositive) {\n    this.responsePromise_ = null;\n    this.positiveRetries_ = Math.max(\n      this.positiveRetries_,\n      expectPositive ? 3 : 0\n    );\n    if (expectPositive) {\n      this.storage_.remove(ENTS_STORAGE_KEY);\n      this.storage_.remove(IS_READY_TO_PAY_STORAGE_KEY);\n    }\n  }\n\n  /**\n   * Clears all of the entitlements state and cache.\n   */\n  clear() {\n    this.responsePromise_ = null;\n    this.positiveRetries_ = 0;\n    this.unblockNextNotification();\n    this.storage_.remove(ENTS_STORAGE_KEY);\n    this.storage_.remove(TOAST_STORAGE_KEY);\n    this.storage_.remove(IS_READY_TO_PAY_STORAGE_KEY);\n  }\n\n  /**\n   * @param {!GetEntitlementsParamsExternalDef=} params\n   * @return {!Promise<!Entitlements>}\n   */\n  getEntitlements(params) {\n    // Remain backwards compatible by accepting\n    // `encryptedDocumentKey` string as a first param.\n    if (typeof params === 'string') {\n      // TODO: Delete the fallback if nobody needs it. Use a log to verify.\n      if (Date.now() > 1600289016959) {\n        // TODO: Remove the conditional check for this warning\n        // after the AMP extension is updated to pass an object.\n        warn(\n          `[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef.`\n        );\n      }\n\n      params = {\n        encryption: {encryptedDocumentKey: /**@type {string} */ (params)},\n      };\n    }\n\n    if (!this.responsePromise_) {\n      this.responsePromise_ = this.getEntitlementsFlow_(params);\n    }\n    return this.responsePromise_.then((response) => {\n      if (response.isReadyToPay != null) {\n        this.analyticsService_.setReadyToPay(response.isReadyToPay);\n      }\n      return response;\n    });\n  }\n\n  /**\n   * @param {string} raw\n   * @param {boolean=} isReadyToPay\n   * @return {boolean}\n   */\n  pushNextEntitlements(raw, isReadyToPay) {\n    const entitlements = this.getValidJwtEntitlements_(\n      raw,\n      /* requireNonExpired */ true,\n      isReadyToPay\n    );\n    if (entitlements && entitlements.enablesThis()) {\n      this.storage_.set(ENTS_STORAGE_KEY, raw);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Retrieves the 'gaa_n' parameter from the query string.\n   */\n  getGaaToken_() {\n    return parseQueryString(this.win_.location.search)['gaa_n'];\n  }\n\n  /**\n   * Sends a pingback that marks a metering entitlement as used.\n   * @param {!Entitlements} entitlements\n   */\n  consumeMeter_(entitlements) {\n    const entitlement = entitlements.getEntitlementForThis();\n    if (!entitlement || entitlement.source !== GOOGLE_METERING_SOURCE) {\n      return;\n    }\n    // Verify GAA params are present, otherwise bail since the pingback\n    // shouldn't happen on non-metering requests.\n    if (!queryStringHasFreshGaaParams(this.win_.location.search)) {\n      return;\n    }\n\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.EVENT_UNLOCKED_BY_METER, false);\n\n    const token = this.getGaaToken_();\n\n    const jwt = new EntitlementJwt();\n    jwt.setSource(entitlement.source);\n    jwt.setJwt(entitlement.subscriptionToken);\n    return this.postEntitlementsRequest_(\n      jwt,\n      EntitlementResult.UNLOCKED_METER,\n      EntitlementSource.GOOGLE_SHOWCASE_METERING_SERVICE,\n      token\n    );\n  }\n\n  /**\n   * Listens for events from the event manager and informs the server\n   * about publisher entitlements and non-consumable Google entitlements.\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   */\n  possiblyPingbackOnClientEvent_(event) {\n    // Verify GAA params are present, otherwise bail since the pingback\n    // shouldn't happen on non-metering requests.\n    if (!queryStringHasFreshGaaParams(this.win_.location.search)) {\n      return;\n    }\n\n    // A subset of analytics events are also an entitlement result\n    const result = analyticsEventToEntitlementResult(event.eventType);\n    if (!result) {\n      return;\n    }\n    let source = null;\n\n    switch (event.eventOriginator) {\n      // The indicates the publisher reported it via subscriptions.setShowcaseEntitlement\n      case EventOriginator.SHOWCASE_CLIENT:\n        source = EntitlementSource.PUBLISHER_ENTITLEMENT;\n        break;\n      case EventOriginator.SWG_CLIENT: // Fallthrough, these are the same\n      case EventOriginator.SWG_SERVER:\n        if (result == EntitlementResult.UNLOCKED_METER) {\n          // Meters from Google require a valid jwt, which is sent by\n          // an entitlement.\n          return;\n        }\n        source = EntitlementSource.GOOGLE_SUBSCRIBER_ENTITLEMENT;\n        break;\n      // Permission to pingback other sources was not requested\n      default:\n        return;\n    }\n    const token = this.getGaaToken_();\n    const isUserRegistered = event?.additionalParameters?.getIsUserRegistered?.();\n    this.postEntitlementsRequest_(\n      new EntitlementJwt(),\n      result,\n      source,\n      token,\n      isUserRegistered\n    );\n  }\n\n  // Informs the Entitlements server about the entitlement used\n  // to unlock the page.\n  postEntitlementsRequest_(\n    usedEntitlement,\n    entitlementResult,\n    entitlementSource,\n    optionalToken = '',\n    optionalIsUserRegistered = null\n  ) {\n    const message = new EntitlementsRequest();\n    message.setUsedEntitlement(usedEntitlement);\n    message.setClientEventTime(toTimestamp(Date.now()));\n    message.setEntitlementResult(entitlementResult);\n    message.setEntitlementSource(entitlementSource);\n    message.setToken(optionalToken);\n    if (typeof optionalIsUserRegistered === 'boolean') {\n      message.setIsUserRegistered(optionalIsUserRegistered);\n    }\n\n    let url =\n      '/publication/' +\n      encodeURIComponent(this.publicationId_) +\n      '/entitlements';\n    if (this.encodedParams_) {\n      url = addQueryParam(url, 'encodedParams', this.encodedParams_);\n    }\n\n    this.fetcher_.sendPost(serviceUrl(url), message);\n  }\n\n  /**\n   * @param {!GetEntitlementsParamsExternalDef=} params\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  getEntitlementsFlow_(params) {\n    return this.fetchEntitlementsWithCaching_(params).then((entitlements) => {\n      this.onEntitlementsFetched_(entitlements);\n      return entitlements;\n    });\n  }\n\n  /**\n   * @param {!GetEntitlementsParamsExternalDef=} params\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetchEntitlementsWithCaching_(params) {\n    return Promise.all([\n      this.storage_.get(ENTS_STORAGE_KEY),\n      this.storage_.get(IS_READY_TO_PAY_STORAGE_KEY),\n    ]).then((cachedValues) => {\n      const raw = cachedValues[0];\n      const irtp = cachedValues[1];\n      // Try cache first.\n      const needsDecryption = !!(params && params.encryption);\n      if (raw && !needsDecryption) {\n        const cached = this.getValidJwtEntitlements_(\n          raw,\n          /* requireNonExpired */ true,\n          irtpStringToBoolean(irtp)\n        );\n        if (cached && cached.enablesThis()) {\n          // Already have a positive response.\n          this.positiveRetries_ = 0;\n          return cached;\n        }\n      }\n      // If cache didn't match, perform fetch.\n      return this.fetchEntitlements_(params).then((ents) => {\n        // If the product is enabled by cacheable entitlements, store them in cache.\n        if (ents && ents.enablesThisWithCacheableEntitlements() && ents.raw) {\n          this.storage_.set(ENTS_STORAGE_KEY, ents.raw);\n        }\n        return ents;\n      });\n    });\n  }\n\n  /**\n   * @param {!GetEntitlementsParamsExternalDef=} params\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetchEntitlements_(params) {\n    // TODO(dvoytenko): Replace retries with consistent fetch.\n    let positiveRetries = this.positiveRetries_;\n    this.positiveRetries_ = 0;\n    const attempt = () => {\n      positiveRetries--;\n      return this.fetch_(params).then((entitlements) => {\n        if (entitlements.enablesThis() || positiveRetries <= 0) {\n          return entitlements;\n        }\n        return new Promise((resolve) => {\n          this.win_.setTimeout(() => {\n            resolve(attempt());\n          }, 550);\n        });\n      });\n    };\n    return attempt();\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setToastShown(value) {\n    this.storage_.set(TOAST_STORAGE_KEY, value ? '1' : '0');\n  }\n\n  /**\n   */\n  blockNextNotification() {\n    this.blockNextNotification_ = true;\n  }\n\n  /**\n   */\n  unblockNextNotification() {\n    this.blockNextNotification_ = false;\n  }\n\n  /**\n   * The JSON must either contain a \"signedEntitlements\" with JWT, or\n   * \"entitlements\" field with plain JSON object.\n   * @param {!Object} json\n   * @return {!Entitlements}\n   */\n  parseEntitlements(json) {\n    const isReadyToPay = json['isReadyToPay'];\n    if (isReadyToPay == null) {\n      this.storage_.remove(IS_READY_TO_PAY_STORAGE_KEY);\n    } else {\n      this.storage_.set(IS_READY_TO_PAY_STORAGE_KEY, String(isReadyToPay));\n    }\n    const signedData = json['signedEntitlements'];\n    const decryptedDocumentKey = json['decryptedDocumentKey'];\n    const swgUserToken = json['swgUserToken'];\n    if (signedData) {\n      const entitlements = this.getValidJwtEntitlements_(\n        signedData,\n        /* requireNonExpired */ false,\n        isReadyToPay,\n        decryptedDocumentKey\n      );\n      if (entitlements) {\n        this.saveSwgUserToken_(swgUserToken);\n        return entitlements;\n      }\n    } else {\n      const plainEntitlements = json['entitlements'];\n      if (plainEntitlements) {\n        this.saveSwgUserToken_(swgUserToken);\n        return this.createEntitlements_(\n          '',\n          plainEntitlements,\n          isReadyToPay,\n          decryptedDocumentKey\n        );\n      }\n    }\n    // Empty response.\n    return this.createEntitlements_('', [], isReadyToPay);\n  }\n\n  /**\n   * Persist swgUserToken in local storage if entitlements and swgUserToken exist\n   * @param {?string|undefined} swgUserToken\n   * @private\n   */\n  saveSwgUserToken_(swgUserToken) {\n    if (swgUserToken) {\n      this.storage_.set(Constants.USER_TOKEN, swgUserToken, true);\n    }\n  }\n\n  /**\n   * @param {string} raw\n   * @param {boolean} requireNonExpired\n   * @param {boolean=} isReadyToPay\n   * @param {?string=} decryptedDocumentKey\n   * @return {?Entitlements}\n   * @private\n   */\n  getValidJwtEntitlements_(\n    raw,\n    requireNonExpired,\n    isReadyToPay,\n    decryptedDocumentKey\n  ) {\n    try {\n      const jwt = this.jwtHelper_.decode(raw);\n      if (requireNonExpired) {\n        const now = Date.now();\n        const exp = jwt['exp'];\n        if (parseFloat(exp) * 1000 < now) {\n          return null;\n        }\n      }\n      const entitlementsClaim = jwt['entitlements'];\n      return (\n        (entitlementsClaim &&\n          this.createEntitlements_(\n            raw,\n            entitlementsClaim,\n            isReadyToPay,\n            decryptedDocumentKey\n          )) ||\n        null\n      );\n    } catch (e) {\n      // Ignore the error.\n      this.win_.setTimeout(() => {\n        throw e;\n      });\n    }\n    return null;\n  }\n\n  /**\n   * @param {string} raw\n   * @param {!Object|!Array<!Object>} json\n   * @param {boolean=} isReadyToPay\n   * @param {?string=} decryptedDocumentKey\n   * @return {!Entitlements}\n   * @private\n   */\n  createEntitlements_(raw, json, isReadyToPay, decryptedDocumentKey) {\n    return new Entitlements(\n      SERVICE_ID,\n      raw,\n      Entitlement.parseListFromJson(json),\n      this.pageConfig_.getProductId(),\n      this.ack_.bind(this),\n      this.consume_.bind(this),\n      isReadyToPay,\n      decryptedDocumentKey\n    );\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @private\n   */\n  onEntitlementsFetched_(entitlements) {\n    // Skip any notifications and toast if other flows are ongoing.\n    // TODO(dvoytenko): what's the right action when pay flow was canceled?\n    const blockNotification = this.blockNextNotification_;\n    this.blockNextNotification_ = false;\n    if (blockNotification) {\n      return;\n    }\n\n    // Notify on the received entitlements.\n    this.deps_\n      .callbacks()\n      .triggerEntitlementsResponse(Promise.resolve(entitlements));\n\n    const entitlement = entitlements.getEntitlementForThis();\n    if (!entitlement) {\n      this.deps_\n        .eventManager()\n        .logSwgEvent(AnalyticsEvent.EVENT_NO_ENTITLEMENTS, false);\n      return;\n    }\n    this.maybeShowToast_(entitlement);\n  }\n\n  /**\n   * @param {!Entitlement} entitlement\n   * @return {!Promise}\n   * @private\n   */\n  maybeShowToast_(entitlement) {\n    // Don't show toast for metering entitlements.\n    if (entitlement.source === GOOGLE_METERING_SOURCE) {\n      this.deps_\n        .eventManager()\n        .logSwgEvent(AnalyticsEvent.EVENT_HAS_METERING_ENTITLEMENTS, false);\n      return Promise.resolve();\n    }\n\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.EVENT_UNLOCKED_BY_SUBSCRIPTION, false);\n    // Check if storage bit is set. It's only set by the `Entitlements.ack` method.\n    return this.storage_.get(TOAST_STORAGE_KEY).then((value) => {\n      const toastWasShown = value === '1';\n      if (toastWasShown) {\n        return;\n      }\n\n      // Show toast.\n      const source = entitlement.source || GOOGLE_METERING_SOURCE;\n      return new Toast(\n        this.deps_,\n        feUrl('/toastiframe'),\n        feArgs({\n          'publicationId': this.publicationId_,\n          'source': source,\n        })\n      ).open();\n    });\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @private\n   */\n  ack_(entitlements) {\n    if (entitlements.getEntitlementForThis()) {\n      this.setToastShown(true);\n    }\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @param {?Function=} onCloseDialog Called after the user closes the dialog.\n   * @private\n   */\n  consume_(entitlements, onCloseDialog) {\n    if (entitlements.enablesThisWithGoogleMetering()) {\n      const onConsumeCallback = () => {\n        if (onCloseDialog) {\n          onCloseDialog();\n        }\n        this.consumeMeter_(entitlements);\n      };\n      const showToast = this.getShowToastFromEntitlements_(entitlements);\n      if (showToast === false) {\n        // If showToast is explicitly false, call onConsumeCallback directly.\n        return onConsumeCallback();\n      }\n      const meterToastApi = new MeterToastApi(this.deps_);\n      meterToastApi.setOnConsumeCallback(onConsumeCallback);\n      return meterToastApi.start();\n    }\n  }\n\n  /**\n   * Gets the `showToast` value (or null/undefined if unavailable) from\n   * the Google metering entitlement details in the input entitlements.\n   * @param {!Entitlements} entitlements\n   * @return {boolean|undefined}\n   * @private\n   */\n  getShowToastFromEntitlements_(entitlements) {\n    const entitlement = entitlements.getEntitlementForThis();\n    if (!entitlement || entitlement.source !== GOOGLE_METERING_SOURCE) {\n      return;\n    }\n    try {\n      const meteringJwt = this.jwtHelper_.decode(entitlement.subscriptionToken);\n      return meteringJwt['metering'] && meteringJwt['metering']['showToast'];\n    } catch (e) {\n      // Ignore decoding errors.\n      return;\n    }\n  }\n\n  /**\n   * @param {!GetEntitlementsParamsExternalDef=} params\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetch_(params) {\n    // Get swgUserToken from getEntitlements params\n    const swgUserTokenParam = params?.encryption?.swgUserToken;\n    // Get swgUserToken from local storage if it is not in getEntitlements params\n    const swgUserTokenPromise = swgUserTokenParam\n      ? Promise.resolve(swgUserTokenParam)\n      : this.storage_.get(Constants.USER_TOKEN, true);\n\n    let url =\n      '/publication/' +\n      encodeURIComponent(this.publicationId_) +\n      '/entitlements';\n\n    return Promise.all([\n      hash(getCanonicalUrl(this.deps_.doc())),\n      swgUserTokenPromise,\n    ])\n      .then((values) => {\n        const hashedCanonicalUrl = values[0];\n        const swgUserToken = values[1];\n\n        // Add encryption param.\n        if (params?.encryption) {\n          url = addQueryParam(\n            url,\n            'crypt',\n            params.encryption.encryptedDocumentKey\n          );\n        }\n\n        // Add swgUserToken param.\n        if (swgUserToken) {\n          url = addQueryParam(url, 'sut', swgUserToken);\n        }\n\n        // Add metering params.\n        if (\n          this.publicationId_ &&\n          params &&\n          params.metering &&\n          params.metering.state\n        ) {\n          /** @type {!GetEntitlementsParamsInternalDef} */\n          const encodableParams = {\n            metering: {\n              clientTypes: [MeterClientTypes.LICENSED_BY_GOOGLE],\n              owner: this.publicationId_,\n              resource: {\n                hashedCanonicalUrl,\n              },\n              state: {\n                id: params.metering.state.id,\n                attributes: [],\n              },\n            },\n          };\n\n          // Add attributes.\n          const standardAttributes = params.metering.state.standardAttributes;\n          if (standardAttributes) {\n            Object.keys(standardAttributes).forEach((key) => {\n              encodableParams.metering.state.attributes.push({\n                name: 'standard_' + key,\n                timestamp: standardAttributes[key].timestamp,\n              });\n            });\n          }\n          const customAttributes = params.metering.state.customAttributes;\n          if (customAttributes) {\n            Object.keys(customAttributes).forEach((key) => {\n              encodableParams.metering.state.attributes.push({\n                name: 'custom_' + key,\n                timestamp: customAttributes[key].timestamp,\n              });\n            });\n          }\n\n          // Encode params.\n          this.encodedParams_ = base64UrlEncodeFromBytes(\n            utf8EncodeSync(JSON.stringify(encodableParams))\n          );\n          url = addQueryParam(url, 'encodedParams', this.encodedParams_);\n        }\n\n        // Build URL.\n        return serviceUrl(url);\n      })\n      .then((url) => {\n        this.deps_\n          .eventManager()\n          .logSwgEvent(AnalyticsEvent.ACTION_GET_ENTITLEMENTS, false);\n        return this.fetcher_.fetchCredentialedJson(url);\n      })\n      .then((json) => {\n        if (json.errorMessages && json.errorMessages.length > 0) {\n          json.errorMessages.forEach((errorMessage) => {\n            warn('SwG Entitlements: ' + errorMessage);\n          });\n        }\n        return this.parseEntitlements(json);\n      });\n  }\n}\n\n/**\n * Convert String value of isReadyToPay\n * (from JSON or Cache) to a boolean value.\n * @param {string} value\n * @return {boolean|undefined}\n * @private\n */\nfunction irtpStringToBoolean(value) {\n  switch (value) {\n    case 'true':\n      return true;\n    case 'false':\n      return false;\n    default:\n      return undefined;\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AnalyticsEvent, EntitlementResult} from '../proto/api_messages';\nimport {Event} from '../api/logger-api';\nimport {\n  PublisherEntitlementEvent,\n  SubscriptionFlows,\n} from '../api/subscriptions';\n\n/** @const {!Object<string,AnalyticsEvent>} */\nconst PublisherEventToAnalyticsEvent = {\n  [Event.IMPRESSION_PAYWALL]: AnalyticsEvent.IMPRESSION_PAYWALL,\n  [Event.IMPRESSION_AD]: AnalyticsEvent.IMPRESSION_AD,\n  [Event.IMPRESSION_OFFERS]: AnalyticsEvent.IMPRESSION_OFFERS,\n  [Event.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:\n    AnalyticsEvent.ACTION_SUBSCRIPTIONS_LANDING_PAGE,\n  [Event.ACTION_OFFER_SELECTED]: AnalyticsEvent.ACTION_OFFER_SELECTED,\n  [Event.ACTION_PAYMENT_FLOW_STARTED]:\n    AnalyticsEvent.ACTION_PAYMENT_FLOW_STARTED,\n  [Event.ACTION_PAYMENT_COMPLETED]: AnalyticsEvent.ACTION_PAYMENT_COMPLETE,\n  [Event.EVENT_CUSTOM]: AnalyticsEvent.EVENT_CUSTOM,\n};\n\n/** @const {!Object<?AnalyticsEvent,?Event>} */\nconst AnalyticsEventToPublisherEvent = {\n  [AnalyticsEvent.UNKNOWN]: null,\n  [AnalyticsEvent.IMPRESSION_PAYWALL]: Event.IMPRESSION_PAYWALL,\n  [AnalyticsEvent.IMPRESSION_AD]: Event.IMPRESSION_AD,\n  [AnalyticsEvent.IMPRESSION_OFFERS]: Event.IMPRESSION_OFFERS,\n  [AnalyticsEvent.IMPRESSION_SUBSCRIBE_BUTTON]: null,\n  [AnalyticsEvent.IMPRESSION_SMARTBOX]: null,\n  [AnalyticsEvent.ACTION_SUBSCRIBE]: null,\n  [AnalyticsEvent.ACTION_PAYMENT_COMPLETE]: Event.ACTION_PAYMENT_COMPLETED,\n  [AnalyticsEvent.ACTION_ACCOUNT_CREATED]: null,\n  [AnalyticsEvent.ACTION_ACCOUNT_ACKNOWLEDGED]: null,\n  [AnalyticsEvent.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:\n    Event.ACTION_SUBSCRIPTIONS_LANDING_PAGE,\n  [AnalyticsEvent.ACTION_PAYMENT_FLOW_STARTED]:\n    Event.ACTION_PAYMENT_FLOW_STARTED,\n  [AnalyticsEvent.ACTION_OFFER_SELECTED]: Event.ACTION_OFFER_SELECTED,\n  [AnalyticsEvent.EVENT_PAYMENT_FAILED]: null,\n  [AnalyticsEvent.EVENT_CUSTOM]: Event.EVENT_CUSTOM,\n};\n\n/** @const {!Object<string,?Array<AnalyticsEvent>>} */\nconst ShowcaseEntitlemenntToAnalyticsEvents = {\n  // Events related to content being potentially unlockable\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_METER_OFFERED]: [\n    AnalyticsEvent.EVENT_HAS_METERING_ENTITLEMENTS,\n    AnalyticsEvent.EVENT_OFFERED_METER,\n  ],\n\n  // Events related to content being unlocked\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION]: [\n    AnalyticsEvent.EVENT_UNLOCKED_BY_SUBSCRIPTION,\n  ],\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_UNLOCKED_BY_METER]: [\n    AnalyticsEvent.EVENT_HAS_METERING_ENTITLEMENTS,\n    AnalyticsEvent.EVENT_UNLOCKED_BY_METER,\n  ],\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE]: [\n    AnalyticsEvent.EVENT_UNLOCKED_FREE_PAGE,\n  ],\n\n  // Events requiring user action to unlock content\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL]: [\n    AnalyticsEvent.EVENT_NO_ENTITLEMENTS,\n    AnalyticsEvent.IMPRESSION_REGWALL,\n    AnalyticsEvent.IMPRESSION_SHOWCASE_REGWALL,\n  ],\n\n  // Events requiring subscription to unlock content\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL]: [\n    AnalyticsEvent.EVENT_NO_ENTITLEMENTS,\n    AnalyticsEvent.IMPRESSION_PAYWALL,\n  ],\n  [PublisherEntitlementEvent.EVENT_SHOWCASE_INELIGIBLE_PAYWALL]: [\n    // TODO(b/181690059): Create showcase ineligible AnalyticsEvent\n    AnalyticsEvent.IMPRESSION_PAYWALL,\n  ],\n};\n\n/** @const {!Object<?AnalyticsEvent,?Event>} */\nconst AnalyticsEventToEntitlementResult = {\n  [AnalyticsEvent.IMPRESSION_REGWALL]: EntitlementResult.LOCKED_REGWALL,\n  [AnalyticsEvent.EVENT_UNLOCKED_BY_METER]: EntitlementResult.UNLOCKED_METER,\n  [AnalyticsEvent.EVENT_UNLOCKED_BY_SUBSCRIPTION]:\n    EntitlementResult.UNLOCKED_SUBSCRIBER,\n  [AnalyticsEvent.EVENT_UNLOCKED_FREE_PAGE]: EntitlementResult.UNLOCKED_FREE,\n  [AnalyticsEvent.IMPRESSION_PAYWALL]: EntitlementResult.LOCKED_PAYWALL,\n};\n\n/**\n * @param {!string} eventCategory\n * @param {!string} eventAction\n * @param {!string} eventLabel\n * @param {!boolean} nonInteraction\n * @returns {!Object}\n */\nconst createGoogleAnalyticsEvent = (\n  eventCategory,\n  eventAction,\n  eventLabel,\n  nonInteraction\n) => ({\n  eventCategory,\n  eventAction,\n  eventLabel,\n  nonInteraction,\n});\n\n/** @const {!Object<?AnalyticsEvent,?Object>} */\nexport const AnalyticsEventToGoogleAnalyticsEvent = {\n  [AnalyticsEvent.IMPRESSION_OFFERS]: createGoogleAnalyticsEvent(\n    'NTG paywall',\n    'paywall modal impression',\n    '',\n    true\n  ),\n  [AnalyticsEvent.ACTION_OFFER_SELECTED]: createGoogleAnalyticsEvent(\n    'NTG paywall',\n    'click',\n    '',\n    false\n  ),\n  [AnalyticsEvent.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK]: createGoogleAnalyticsEvent(\n    'NTG subscription',\n    'marketing modal click',\n    '',\n    false\n  ),\n  [AnalyticsEvent.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT]: createGoogleAnalyticsEvent(\n    'NTG subscription',\n    'marketing modal impression',\n    '',\n    true\n  ),\n  [AnalyticsEvent.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK]: createGoogleAnalyticsEvent(\n    'NTG membership',\n    'marketing modal click',\n    '',\n    false\n  ),\n  [AnalyticsEvent.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT]: createGoogleAnalyticsEvent(\n    'NTG membership',\n    'membership modal impression',\n    '',\n    true\n  ),\n};\n\n/** @const {!Object<?AnalyticsEvent,?Object>} */\nexport const SubscriptionSpecificAnalyticsEventToGoogleAnalyticsEvent = {\n  [AnalyticsEvent.ACTION_PAYMENT_COMPLETE]: createGoogleAnalyticsEvent(\n    'NTG subscription',\n    'submit',\n    'success',\n    false\n  ),\n};\n\n/** @const {!Object<?AnalyticsEvent,?Object>} */\nexport const ContributionSpecificAnalyticsEventToGoogleAnalyticsEvent = {\n  [AnalyticsEvent.ACTION_PAYMENT_COMPLETE]: createGoogleAnalyticsEvent(\n    'NTG membership',\n    'submit',\n    'success',\n    false\n  ),\n};\n\n/**\n * Converts a propensity event enum into an analytics event enum.\n * @param {!Event|string} propensityEvent\n * @returns {!AnalyticsEvent}\n */\nexport function publisherEventToAnalyticsEvent(propensityEvent) {\n  return PublisherEventToAnalyticsEvent[propensityEvent];\n}\n\n/**\n * Converts an analytics event enum into a propensity event enum.\n * @param {?AnalyticsEvent} analyticsEvent\n * @returns {?Event}\n */\nexport function analyticsEventToPublisherEvent(analyticsEvent) {\n  return AnalyticsEventToPublisherEvent[analyticsEvent];\n}\n\n/**\n * Converts a publisher entitlement event enum into an array analytics events.\n * @param {!PublisherEntitlementEvent|string} event\n * @returns {!Array<AnalyticsEvent>}\n */\nexport function publisherEntitlementEventToAnalyticsEvents(event) {\n  return ShowcaseEntitlemenntToAnalyticsEvents[event] || [];\n}\n\nexport function analyticsEventToEntitlementResult(event) {\n  return AnalyticsEventToEntitlementResult[event];\n}\n\n/**\n * Converts an analytics event enum into a Google Analytics event object.\n * @param {?AnalyticsEvent} event\n * @param {string} subscriptionFlow\n * @returns {?Object}\n */\nexport function analyticsEventToGoogleAnalyticsEvent(event, subscriptionFlow) {\n  let gaEvent = null;\n  if (subscriptionFlow) {\n    if (subscriptionFlow == SubscriptionFlows.SUBSCRIBE) {\n      gaEvent = SubscriptionSpecificAnalyticsEventToGoogleAnalyticsEvent[event];\n    } else if (subscriptionFlow == SubscriptionFlows.CONTRIBUTE) {\n      gaEvent = ContributionSpecificAnalyticsEventToGoogleAnalyticsEvent[event];\n    }\n  }\n  return gaEvent || AnalyticsEventToGoogleAnalyticsEvent[event];\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @enum {string}\n */\nexport const ExperimentFlags = {\n  /**\n   * Enables the feature that allows you to replace one subscription\n   * for another in the subscribe() API.\n   */\n  REPLACE_SUBSCRIPTION: 'replace-subscription',\n\n  /**\n   * Enables the contributions feature.\n   * DEPRECATED. This flag can be removed once not used by anyone.\n   */\n  CONTRIBUTIONS: 'contributions',\n\n  /**\n   * Enables the Propensity feature\n   */\n  PROPENSITY: 'propensity',\n\n  /**\n   * Enables the Smartbox feature.\n   */\n  SMARTBOX: 'smartbox',\n\n  /**\n   * Enables using new Activities APIs\n   */\n  HEJIRA: 'hejira',\n\n  /** Enables logging to both the new SwG Clearcut service and the pre-existing\n   *  Clearcut iframe while we verify the new logging system works.\n   *  Publishers should not activate this experiment.\n   */\n  LOGGING_BEACON: 'logging-beacon',\n\n  /** Enables googleTransactionID change. With the experiment on the ID is\n   *  changed from '<uuid>' to '<uuid>.swg'.\n   */\n  UPDATE_GOOGLE_TRANSACTION_ID: 'update-google-transaction-id',\n\n  /**\n   * Experiment flag for guarding changes to fix PayClient redirect flow.\n   */\n  PAY_CLIENT_REDIRECT: 'pay-client-redirect',\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ErrorUtils} from '../utils/errors';\nimport {parseQueryString} from '../utils/url';\n\n/**\n * @fileoverview\n *\n * Client-side experiments in SwG.\n *\n * The experiments can be set in a few different ways:\n *  1. By gulp build rules using `--experiments=${experimentsString}` argument.\n *  2. By `#swg.experiments=${experimentsString}` parameter in the URL's\n *     fragment.\n *  3. By `swg.configure({experiments: [array]})` call.\n *\n * The `${experimentsString}` is defined as following:\n *  - experimentString = (experimentSpec,)*\n *  - experimentSpec = experimentId | experimentId '=' num100 ('c')?\n *\n * Some examples:\n *  - `A,B` - defines two experiments \"A\" and \"B\" that will be turned on.\n *  - `A:100,B:100` - the same: \"A\" and \"B\" will be turned on.\n *  - `A:0` - the experiment \"A\" will be disabled.\n *  - `A:1` - enable the experiment \"A\" in 1% of impressions.\n *  - `A:10c` - enable the experiment \"A\" in 10% of impressions with 10%\n *    control. In this case, 20% of the impressions will be split into two\n *    categories: experiment and control. Notice, a control can be requested\n *    only for the fraction under 20%.\n */\n\n/**\n * @enum {string}\n */\nconst Selection = {\n  EXPERIMENT: 'e',\n  CONTROL: 'c',\n};\n\n/**\n * A comma-separated set of experiments.\n * @type {string}\n */\nlet experimentsString = '$experiments$';\n\n/**\n * A parsed map of experiments.\n * @type {?Object<string, boolean>}\n */\nlet experimentMap = null;\n\n/**\n * @param {string} s\n * @package Visible for testing only.\n */\nexport function setExperimentsStringForTesting(s) {\n  experimentsString = s;\n  experimentMap = null;\n}\n\n/**\n * Ensures that the experiments have been initialized and returns them.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperiments(win) {\n  if (!experimentMap) {\n    experimentMap = {};\n    let combinedExperimentString = experimentsString;\n    try {\n      const query = parseQueryString(win.location.hash);\n      const experimentStringFromHash = query['swg.experiments'];\n      if (experimentStringFromHash) {\n        combinedExperimentString += ',' + experimentStringFromHash;\n      }\n    } catch (e) {\n      // Ignore: experiment parsing cannot block runtime.\n      ErrorUtils.throwAsync(e);\n    }\n\n    // Format:\n    // - experimentString = (experimentSpec,)*\n    combinedExperimentString.split(',').forEach((s) => {\n      s = s.trim();\n      if (!s) {\n        return;\n      }\n      try {\n        parseSetExperiment(win, experimentMap, s);\n      } catch (e) {\n        // Ignore: experiment parsing cannot block runtime.\n        ErrorUtils.throwAsync(e);\n      }\n    });\n  }\n  return experimentMap;\n}\n\n/**\n * @param {!Window} win\n * @param {?Object<string, boolean>} experimentMap\n * @param {string} spec\n */\nfunction parseSetExperiment(win, experimentMap, spec) {\n  // Format:\n  // - experimentSpec = experimentId | experimentId '=' num100 ('c')?\n  let experimentId;\n  let fraction;\n  let control = false;\n  const eq = spec.indexOf(':');\n  if (eq == -1) {\n    experimentId = spec;\n    fraction = 100;\n    control = false;\n  } else {\n    experimentId = spec.substring(0, eq).trim();\n    spec = spec.substring(eq + 1);\n    if (spec.substring(spec.length - 1) == Selection.CONTROL) {\n      control = true;\n      spec = spec.substring(0, spec.length - 1);\n    }\n    fraction = parseInt(spec, 10);\n  }\n  if (isNaN(fraction)) {\n    throw new Error('invalid fraction');\n  }\n\n  // Calculate \"on\"/\"off\".\n  let on;\n  if (fraction > 99) {\n    // Explicitly \"on\".\n    on = true;\n  } else if (fraction < 1) {\n    // Explicitly \"off\".\n    on = false;\n  } else if (win.sessionStorage) {\n    // Fractional and possibly with the control.\n    // Note that:\n    // a. We can't do persistent experiments if storage is not available.\n    // b. We can't run control on more than 20%.\n    control = control && fraction <= 20;\n    try {\n      // Set fraction in the experiment to make it unlaunchable.\n      const storageKey =\n        'subscribe.google.com:e:' +\n        experimentId +\n        ':' +\n        fraction +\n        (control ? 'c' : '');\n      let selection = parseSelection(win.sessionStorage.getItem(storageKey));\n      if (!selection) {\n        // Is experiment/control range?\n        if (win.Math.random() * 100 <= fraction * (control ? 2 : 1)) {\n          const inExperiment = control ? win.Math.random() <= 0.5 : true;\n          selection = inExperiment ? Selection.EXPERIMENT : Selection.CONTROL;\n          win.sessionStorage.setItem(storageKey, selection);\n        }\n      }\n      on = !!selection;\n      if (selection == Selection.CONTROL) {\n        experimentId = 'c-' + experimentId;\n      }\n    } catch (e) {\n      // Ignore: experiment parsing cannot block runtime.\n      on = false;\n      ErrorUtils.throwAsync(e);\n    }\n  } else {\n    on = false;\n  }\n\n  experimentMap[experimentId] = on;\n}\n\n/**\n * @param {?string} s\n * @return {?Selection}\n */\nfunction parseSelection(s) {\n  // Do a simple if-then to inline the whole Selection enum.\n  return s == Selection.EXPERIMENT\n    ? Selection.EXPERIMENT\n    : s == Selection.CONTROL\n    ? Selection.CONTROL\n    : null;\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  return getExperiments(win)[experimentId] || false;\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean} on\n */\nexport function setExperiment(win, experimentId, on) {\n  getExperiments(win)[experimentId] = on;\n}\n\n/**\n * @return {!Array<string>}\n */\nexport function getOnExperiments(win) {\n  const experimentMap = getExperiments(win);\n  const experiments = [];\n  for (const experiment in experimentMap) {\n    if (experimentMap[experiment]) {\n      experiments.push(experiment);\n    }\n  }\n  return experiments;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Xhr} from '../utils/xhr';\nimport {parseJson} from '../utils/json';\nimport {serializeProtoMessageForUrl} from '../utils/url';\n\n/**\n * @interface\n */\nexport class Fetcher {\n  /**\n   * @param {string} unusedUrl\n   * @return {!Promise<!Object>}\n   */\n  fetchCredentialedJson(unusedUrl) {}\n\n  /**\n   * @param {string} unusedUrl\n   * @param {!../utils/xhr.FetchInitDef} unusedInit\n   * @return {!Promise<!../utils/xhr.FetchResponse>}\n   */\n  fetch(unusedUrl, unusedInit) {}\n\n  /**\n   * POST data to a URL endpoint, do not wait for a response.\n   * @param {!string} unusedUrl\n   * @param {!../proto/api_messages.Message} unusedData\n   */\n  sendBeacon(unusedUrl, unusedData) {}\n\n  /**\n   * POST data to a URL endpoint, get a Promise for a response\n   * @param {!string} unusedUrl\n   * @param {!../proto/api_messages.Message} unusedMessage\n   * @return {!Promise<!../utils/xhr.FetchResponse>}\n   */\n  sendPost(unusedUrl, unusedMessage) {}\n}\n\n/**\n * @implements {Fetcher}\n */\nexport class XhrFetcher {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Xhr} */\n    this.xhr_ = new Xhr(win);\n  }\n\n  /** @override */\n  fetchCredentialedJson(url) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      headers: {'Accept': 'text/plain, application/json'},\n      credentials: 'include',\n    });\n    return this.fetch(url, init).then((response) => {\n      return response.text().then((text) => {\n        // Remove \"\")]}'\\n\" XSSI prevention prefix in safe responses.\n        const cleanedText = text.replace(/^(\\)\\]\\}'\\n)/, '');\n        return parseJson(cleanedText);\n      });\n    });\n  }\n\n  /** @override */\n  sendPost(url, message) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\n      },\n      credentials: 'include',\n      body: 'f.req=' + serializeProtoMessageForUrl(message),\n    });\n    return this.fetch(url, init).then(\n      (response) => (response && response.json()) || {}\n    );\n  }\n\n  /** @override */\n  fetch(url, init) {\n    return this.xhr_.fetch(url, init);\n  }\n\n  /** @override */\n  sendBeacon(url, data) {\n    if (navigator.sendBeacon) {\n      const headers = {type: 'application/x-www-form-urlencoded;charset=UTF-8'};\n      const blob = new Blob(\n        ['f.req=' + serializeProtoMessageForUrl(data)],\n        headers\n      );\n      navigator.sendBeacon(url, blob);\n      return;\n    }\n    // Only newer browsers support beacon.  Fallback to standard XHR POST.\n    this.sendPost(url, data);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n */\nexport class JsError {\n  /**\n   * @param {!../model/doc.Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Promise} */\n    this.microTask_ = Promise.resolve();\n  }\n\n  /**\n   * @param {...*} var_args\n   * @return {!Promise}\n   */\n  error(var_args) {\n    const args = Array.prototype.slice.call(arguments, 0);\n    return this.microTask_.then(() => {\n      const error = createErrorVargs.apply(null, args);\n      if (error.reported) {\n        return;\n      }\n      const img = this.doc_.getWin().document.createElement('img');\n      img.src =\n        '$frontend$/_/SubscribewithgoogleClientUi/jserror' +\n        '?error=' +\n        encodeURIComponent(String(error)) +\n        '&script=' +\n        encodeURIComponent('$frontend$/swg/js/v1/swg.js') +\n        '&line=' +\n        (error.lineNumber || 1) +\n        '&trace=' +\n        encodeURIComponent(error.stack);\n      // Appending this image to DOM is not necessary.\n      error.reported = true;\n    });\n  }\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n */\nfunction createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error}\n */\nfunction duplicateErrorIfNecessary(error) {\n  const messageProperty = Object.getOwnPropertyDescriptor(error, 'message');\n  if (messageProperty && messageProperty.writable) {\n    return error;\n  }\n\n  const {message, stack} = error;\n  const e = new Error(message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = stack;\n  return e;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {\n  AnalyticsEvent,\n  LinkSaveTokenRequest,\n  LinkingInfoResponse,\n} from '../proto/api_messages';\nimport {SubscriptionFlows, WindowOpenMode} from '../api/subscriptions';\nimport {acceptPortResultData} from '../utils/activity-utils';\nimport {createCancelError, isCancelError} from '../utils/errors';\nimport {feArgs, feOrigin, feUrl} from './services';\n\nconst LINK_REQUEST_ID = 'swg-link';\n\n/**\n * The flow to link an existing publisher account to an existing google account.\n */\nexport class LinkbackFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = deps.pageConfig();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n  }\n\n  /**\n   * Starts the Link account flow.\n   * @param {{ampReaderId: (string|undefined)}=} params\n   * @return {!Promise}\n   */\n  start(params = {}) {\n    this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.LINK_ACCOUNT);\n    const forceRedirect =\n      this.deps_.config().windowOpenMode == WindowOpenMode.REDIRECT;\n    const args = params.ampReaderId\n      ? feArgs({\n          'publicationId': this.pageConfig_.getPublicationId(),\n          'ampReaderId': params.ampReaderId,\n        })\n      : feArgs({\n          'publicationId': this.pageConfig_.getPublicationId(),\n        });\n    const opener = this.activityPorts_.open(\n      LINK_REQUEST_ID,\n      feUrl('/linkbackstart'),\n      forceRedirect ? '_top' : '_blank',\n      args,\n      {}\n    );\n    this.deps_.eventManager().logSwgEvent(AnalyticsEvent.IMPRESSION_LINK);\n    this.dialogManager_.popupOpened(opener && opener.targetWin);\n    return Promise.resolve();\n  }\n}\n\n/**\n * The class for Link accounts flow.\n */\nexport class LinkCompleteFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  static configurePending(deps) {\n    /**\n     * Handler function.\n     * @param {!../components/activities.ActivityPortDef} port\n     */\n    function handler(port) {\n      deps.entitlementsManager().blockNextNotification();\n      deps.callbacks().triggerLinkProgress();\n      deps.dialogManager().popupClosed();\n      const promise = acceptPortResultData(\n        port,\n        feOrigin(),\n        /* requireOriginVerified */ false,\n        /* requireSecureChannel */ false\n      );\n      return promise.then(\n        (response) => {\n          deps\n            .eventManager()\n            .logSwgEvent(AnalyticsEvent.ACTION_LINK_CONTINUE, true);\n          const flow = new LinkCompleteFlow(deps, response);\n          flow.start();\n        },\n        (reason) => {\n          if (isCancelError(reason)) {\n            deps\n              .eventManager()\n              .logSwgEvent(AnalyticsEvent.ACTION_LINK_CANCEL, true);\n            deps\n              .callbacks()\n              .triggerFlowCanceled(SubscriptionFlows.LINK_ACCOUNT);\n          } else {\n            // The user chose to continue but there was an error.\n            deps\n              .eventManager()\n              .logSwgEvent(AnalyticsEvent.ACTION_LINK_CONTINUE, true);\n          }\n        }\n      );\n    }\n    deps.activities().onResult(LINK_REQUEST_ID, handler);\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?Object} response\n   */\n  constructor(deps, response) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!./entitlements-manager.EntitlementsManager} */\n    this.entitlementsManager_ = deps.entitlementsManager();\n\n    /** @private @const {!./callbacks.Callbacks} */\n    this.callbacks_ = deps.callbacks();\n\n    const index = (response && response['index']) || '0';\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/linkconfirmiframe', '/u/' + index),\n      feArgs({\n        'productId': deps.pageConfig().getProductId(),\n        'publicationId': deps.pageConfig().getPublicationId(),\n      }),\n      /* shouldFadeBody */ true\n    );\n\n    /** @private {?function()} */\n    this.completeResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.completePromise_ = new Promise((resolve) => {\n      this.completeResolver_ = resolve;\n    });\n  }\n\n  /**\n   * Starts the Link account flow.\n   * @return {!Promise}\n   */\n  start() {\n    const promise = this.activityIframeView_.acceptResultAndVerify(\n      feOrigin(),\n      /* requireOriginVerified */ true,\n      /* requireSecureChannel */ true\n    );\n    promise\n      .then((response) => {\n        this.complete_(response);\n      })\n      .catch((reason) => {\n        // Rethrow async.\n        setTimeout(() => {\n          throw reason;\n        });\n      })\n      .then(() => {\n        // The flow is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n      });\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.EVENT_GOOGLE_UPDATED, true);\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.IMPRESSION_GOOGLE_UPDATED, true);\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {?Object} response\n   * @private\n   */\n  complete_(response) {\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.ACTION_GOOGLE_UPDATED_CLOSE, true);\n    this.callbacks_.triggerLinkComplete();\n    this.callbacks_.resetLinkProgress();\n    this.entitlementsManager_.setToastShown(true);\n    this.entitlementsManager_.unblockNextNotification();\n    this.entitlementsManager_.reset((response && response['success']) || false);\n    if (response && response['entitlements']) {\n      this.entitlementsManager_.pushNextEntitlements(response['entitlements']);\n    }\n    this.completeResolver_();\n  }\n\n  /** @return {!Promise} */\n  whenComplete() {\n    return this.completePromise_;\n  }\n}\n\n/**\n * The flow to save subscription information from an existing publisher account\n * to an existing google account.  The accounts may or may not already be\n * linked.\n */\nexport class LinkSaveFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.SaveSubscriptionRequestCallback} callback\n   */\n  constructor(deps, callback) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {!../api/subscriptions.SaveSubscriptionRequestCallback} */\n    this.callback_ = callback;\n\n    /** @private {?Promise<!../api/subscriptions.SaveSubscriptionRequest>} */\n    this.requestPromise_ = null;\n\n    /** @private {?Promise} */\n    this.openPromise_ = null;\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n  }\n\n  /**\n   * @return {?Promise<!../api/subscriptions.SaveSubscriptionRequest>}\n   * @package Visible for testing.\n   */\n  getRequestPromise() {\n    return this.requestPromise_;\n  }\n\n  /**\n   * @private\n   */\n  complete_() {\n    this.dialogManager_.completeView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {!Object} result\n   * @return {!Promise<boolean>}\n   * @private\n   */\n  handleLinkSaveResponse_(result) {\n    // This flow is complete\n    this.complete_();\n    let startPromise;\n    let linkConfirm = null;\n    if (result['linked']) {\n      // When linking succeeds, start link confirmation flow\n      this.dialogManager_.popupClosed();\n      this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.LINK_ACCOUNT);\n      linkConfirm = new LinkCompleteFlow(this.deps_, result);\n      startPromise = linkConfirm.start();\n    } else {\n      startPromise = Promise.reject(createCancelError(this.win_, 'not linked'));\n    }\n    const completePromise = startPromise.then(() => {\n      this.deps_.callbacks().triggerLinkProgress();\n      return linkConfirm.whenComplete();\n    });\n\n    return completePromise.then(() => {\n      return true;\n    });\n  }\n\n  /**\n   * @param {LinkingInfoResponse} response\n   * @private\n   */\n  sendLinkSaveToken_(response) {\n    if (!response || !response.getRequested()) {\n      return;\n    }\n    this.requestPromise_ = new Promise((resolve) => resolve(this.callback_()))\n      .then((request) => {\n        const saveRequest = new LinkSaveTokenRequest();\n        if (request && request.token) {\n          if (request.authCode) {\n            throw new Error('Both authCode and token are available');\n          } else {\n            saveRequest.setToken(request.token);\n          }\n        } else if (request && request.authCode) {\n          saveRequest.setAuthCode(request.authCode);\n        } else {\n          throw new Error('Neither token or authCode is available');\n        }\n        this.activityIframeView_.execute(saveRequest);\n        return request;\n      })\n      .catch((reason) => {\n        // The flow is complete.\n        this.complete_();\n        throw reason;\n      });\n  }\n\n  /**\n   * @return {?Promise}\n   */\n  /**\n   * Starts the save subscription\n   * @return {!Promise}\n   */\n  start() {\n    const iframeArgs = this.activityPorts_.addDefaultArguments({\n      'isClosable': true,\n    });\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/linksaveiframe'),\n      iframeArgs,\n      /* shouldFadeBody */ false,\n      /* hasLoadingIndicator */ true\n    );\n    this.activityIframeView_.on(\n      LinkingInfoResponse,\n      this.sendLinkSaveToken_.bind(this)\n    );\n\n    this.openPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_,\n      /* hidden */ true\n    );\n    this.deps_\n      .eventManager()\n      .logSwgEvent(AnalyticsEvent.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE);\n    /** {!Promise<boolean>} */\n    return this.activityIframeView_\n      .acceptResultAndVerify(\n        feOrigin(),\n        /* requireOriginVerified */ true,\n        /* requireSecureChannel */ true\n      )\n      .then((result) => {\n        return this.handleLinkSaveResponse_(result);\n      })\n      .catch((reason) => {\n        // In case this flow wasn't complete, complete it here\n        this.complete_();\n        // Handle cancellation from user, link confirm start or completion here\n        if (isCancelError(reason)) {\n          this.deps_\n            .eventManager()\n            .logSwgEvent(\n              AnalyticsEvent.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL,\n              true\n            );\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(SubscriptionFlows.LINK_ACCOUNT);\n          return false;\n        }\n        throw reason;\n      });\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {AnalyticsEvent, EventOriginator} from '../proto/api_messages';\nimport {Event, SubscriptionState} from '../api/logger-api';\nimport {isBoolean, isEnumValue, isObject} from '../utils/types';\nimport {publisherEventToAnalyticsEvent} from './event-type-mapping';\n\n/**\n * @implements {../api/logger-api.LoggerApi}\n */\nexport class Logger {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!../api/client-event-manager-api.ClientEventManagerApi} */\n    this.eventManager_ = deps.eventManager();\n  }\n\n  /** @override */\n  sendSubscriptionState(state, jsonProducts) {\n    if (!isEnumValue(SubscriptionState, state)) {\n      throw new Error('Invalid subscription state provided');\n    }\n    if (\n      (SubscriptionState.SUBSCRIBER == state ||\n        SubscriptionState.PAST_SUBSCRIBER == state) &&\n      !jsonProducts\n    ) {\n      throw new Error(\n        'Entitlements must be provided for users with' +\n          ' active or expired subscriptions'\n      );\n    }\n    if (jsonProducts && !isObject(jsonProducts)) {\n      throw new Error('Entitlements must be an Object');\n    }\n    let productsOrSkus = null;\n    if (jsonProducts) {\n      productsOrSkus = JSON.stringify(jsonProducts);\n    }\n    this.eventManager_.logEvent({\n      eventType: AnalyticsEvent.EVENT_SUBSCRIPTION_STATE,\n      eventOriginator: EventOriginator.PUBLISHER_CLIENT,\n      isFromUserAction: null,\n      additionalParameters: {\n        state,\n        productsOrSkus,\n      },\n    });\n  }\n\n  /** @override */\n  sendEvent(userEvent) {\n    let data = null;\n    if (\n      !isEnumValue(Event, userEvent.name) ||\n      !publisherEventToAnalyticsEvent(userEvent.name)\n    ) {\n      throw new Error('Invalid user event provided(' + userEvent.name + ')');\n    }\n\n    if (userEvent.data) {\n      if (!isObject(userEvent.data)) {\n        throw new Error('Event data must be an Object(' + userEvent.data + ')');\n      } else {\n        data = Object.assign({}, data, userEvent.data);\n      }\n    }\n\n    if (isBoolean(userEvent.active)) {\n      if (!data) {\n        data = {};\n      }\n      Object.assign(data, {'is_active': userEvent.active});\n    } else if (userEvent.active != null) {\n      throw new Error('Event active must be a boolean');\n    }\n    this.eventManager_.logEvent({\n      eventType: publisherEventToAnalyticsEvent(userEvent.name),\n      eventOriginator: EventOriginator.PUBLISHER_CLIENT,\n      isFromUserAction: userEvent.active,\n      additionalParameters: data,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {feArgs, feUrl} from './services';\n\nexport class LoginNotificationApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/loginiframe'),\n      feArgs({\n        publicationId: deps.pageConfig().getPublicationId(),\n        productId: deps.pageConfig().getProductId(),\n        // No need to ask the user. Just tell them you're logging them in.\n        userConsent: false,\n      }),\n      /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Continues the Login flow (after waiting).\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_LOGIN_NOTIFICATION);\n\n    this.openViewPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_\n    );\n\n    return this.activityIframeView_.acceptResult().then(\n      () => {\n        // The consent part is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n      },\n      (reason) => {\n        this.dialogManager_.completeView(this.activityIframeView_);\n        throw reason;\n      }\n    );\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {feArgs, feUrl} from './services';\nimport {isCancelError} from '../utils/errors';\n\nexport class LoginPromptApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/loginiframe'),\n      feArgs({\n        publicationId: deps.pageConfig().getPublicationId(),\n        productId: deps.pageConfig().getProductId(),\n        // First ask the user if they want us to log them in.\n        userConsent: true,\n      }),\n      /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Prompts the user to login.\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_LOGIN_PROMPT);\n\n    this.openViewPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_\n    );\n\n    return this.activityIframeView_.acceptResult().then(\n      () => {\n        // The consent part is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n      },\n      (reason) => {\n        if (isCancelError(reason)) {\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(SubscriptionFlows.SHOW_LOGIN_PROMPT);\n        } else {\n          this.dialogManager_.completeView(this.activityIframeView_);\n        }\n        throw reason;\n      }\n    );\n  }\n}\n","/**\n * Copyright 2020 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {AnalyticsEvent} from '../proto/api_messages';\nimport {SubscriptionFlows} from '../api/subscriptions';\nimport {\n  ToastCloseRequest,\n  ViewSubscriptionsResponse,\n} from '../proto/api_messages';\nimport {feUrl} from './services';\nimport {isCancelError} from '../utils/errors';\nimport {setImportantStyles, setStyle} from '../utils/style';\nimport {warn} from '../utils/log';\n\nexport const IFRAME_BOX_SHADOW =\n  'rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px';\nexport const MINIMIZED_IFRAME_SIZE = '420px';\n\nexport class MeterToastApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    const iframeArgs = this.activityPorts_.addDefaultArguments({\n      isClosable: true,\n      hasSubscriptionCallback: deps.callbacks().hasSubscribeRequestCallback(),\n    });\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/metertoastiframe'),\n      iframeArgs,\n      /* shouldFadeBody */ false\n    );\n\n    /**\n     * Function this class calls when a user dismisses the toast to consume a free read.\n     * @private {?function()}\n     */\n    this.onConsumeCallback_ = null;\n\n    /**\n     * Boolean indicating whether or not the onConsumeCallback_ has been handled\n     * (either called or ignored). This is used to protect against unexpected\n     * cancellations not consuming a meter.\n     * @private {!boolean}\n     */\n    this.onConsumeCallbackHandled_ = false;\n\n    /** @private @const {!function()} */\n    this.sendCloseRequestFunction_ = () => {\n      const closeRequest = new ToastCloseRequest();\n      closeRequest.setClose(true);\n      this.activityIframeView_.execute(closeRequest);\n      this.removeCloseEventListener();\n\n      this.deps_\n        .eventManager()\n        .logSwgEvent(\n          AnalyticsEvent.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION,\n          true\n        );\n\n      if (this.onConsumeCallback_ && !this.onConsumeCallbackHandled_) {\n        this.onConsumeCallbackHandled_ = true;\n        this.onConsumeCallback_();\n      }\n    };\n\n    /** @private {?function()} */\n    this.scrollEventListener_ = null;\n  }\n\n  /**\n   * Shows the user the metering toast.\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_METER_TOAST);\n    this.activityIframeView_.on(\n      ViewSubscriptionsResponse,\n      this.startNativeFlow_.bind(this)\n    );\n    if (!this.deps_.callbacks().hasSubscribeRequestCallback()) {\n      const errorMessage =\n        '[swg.js]: `setOnNativeSubscribeRequest` has not been ' +\n        'set before starting the metering flow, so users will not be able to ' +\n        'subscribe from the metering dialog directly. Please call ' +\n        '`setOnNativeSubscribeRequest` with a subscription flow callback before ' +\n        'starting metering.';\n      warn(errorMessage);\n    }\n\n    this.dialogManager_\n      .handleCancellations(this.activityIframeView_)\n      .catch((reason) => {\n        // Possibly call onConsumeCallback on all dialog cancellations to ensure unexpected\n        // dialog closures don't give access without a meter consumed.\n        if (this.onConsumeCallback_ && !this.onConsumeCallbackHandled_) {\n          this.onConsumeCallbackHandled_ = true;\n          this.onConsumeCallback_();\n        }\n        // Don't throw on cancel errors since they happen when a user closes the toast,\n        // which is expected.\n        if (!isCancelError(reason)) {\n          // eslint-disable-next-line no-console\n          console /*OK*/\n            .error(\n              '[swg.js]: Error occurred during meter toast handling: ' + reason\n            );\n          throw reason;\n        }\n      });\n    return this.dialogManager_.openDialog().then((dialog) => {\n      this.setDialogBoxShadow_();\n      this.setLoadingViewWidth_();\n      return dialog.openView(this.activityIframeView_).then(() => {\n        // Allow closing of the iframe with any scroll or click event.\n        this.win_.addEventListener('click', this.sendCloseRequestFunction_);\n        this.win_.addEventListener(\n          'touchstart',\n          this.sendCloseRequestFunction_\n        );\n        this.win_.addEventListener('mousedown', this.sendCloseRequestFunction_);\n        // Making body's overflow property 'hidden' to prevent scrolling\n        // while swiping on the iframe only on mobile.\n        if (this.isMobile_()) {\n          const $body = this.win_.document.body;\n          setStyle($body, 'overflow', 'hidden');\n        } else {\n          let start, scrollTimeout;\n          this.scrollEventListener_ = () => {\n            start = start || this.win_./*REVIEW*/ pageYOffset;\n            this.win_.clearTimeout(scrollTimeout);\n            scrollTimeout = this.win_.setTimeout(() => {\n              // If the scroll is longer than 100, close the toast.\n              if (Math.abs(this.win_./*REVIEW*/ pageYOffset - start) > 100) {\n                this.sendCloseRequestFunction_();\n              }\n            }, 100);\n          };\n          this.win_.addEventListener('scroll', this.scrollEventListener_);\n        }\n        this.deps_\n          .eventManager()\n          .logSwgEvent(AnalyticsEvent.IMPRESSION_METER_TOAST);\n        this.deps_\n          .eventManager()\n          .logSwgEvent(AnalyticsEvent.EVENT_OFFERED_METER);\n      });\n    });\n  }\n\n  /**\n   * Sets a callback function this class calls when a user dismisses the toast to consume a free read.\n   * @param {function()} onConsumeCallback\n   */\n  setOnConsumeCallback(onConsumeCallback) {\n    this.onConsumeCallback_ = onConsumeCallback;\n  }\n\n  /**\n   * Removes the event listeners that close the iframe and make the body visible.\n   */\n  removeCloseEventListener() {\n    this.win_.removeEventListener('click', this.sendCloseRequestFunction_);\n    this.win_.removeEventListener('touchstart', this.sendCloseRequestFunction_);\n    this.win_.removeEventListener('mousedown', this.sendCloseRequestFunction_);\n    if (this.isMobile_()) {\n      const $body = this.win_.document.body;\n      setStyle($body, 'overflow', 'visible');\n    } else {\n      this.win_.removeEventListener('scroll', this.scrollEventListener_);\n    }\n  }\n\n  /**\n   * Changes the iframe box shadow to match desired specifications on mobile.\n   */\n  setDialogBoxShadow_() {\n    const mobileMediaQuery = this.win_.matchMedia(\n      '(max-width: 640px), (max-height: 640px)'\n    );\n    const element = this.dialogManager_.getDialog().getElement();\n    if (mobileMediaQuery.matches) {\n      setImportantStyles(element, {'box-shadow': IFRAME_BOX_SHADOW});\n    }\n    mobileMediaQuery.addListener((changed) => {\n      if (changed.matches) {\n        setImportantStyles(element, {'box-shadow': IFRAME_BOX_SHADOW});\n      } else {\n        setImportantStyles(element, {'box-shadow': ''});\n      }\n    });\n  }\n\n  /**\n   * Changes the size of the loading iframe on desktop to match the size of\n   * the meter toast iframe.\n   */\n  setLoadingViewWidth_() {\n    const desktopMediaQuery = this.win_.matchMedia(\n      '(min-width: 640px) and (min-height: 640px)'\n    );\n    if (desktopMediaQuery.matches) {\n      const element = this.dialogManager_\n        .getDialog()\n        .getLoadingView()\n        .getElement();\n      setImportantStyles(element, {\n        'width': MINIMIZED_IFRAME_SIZE,\n        'margin': 'auto',\n      });\n    }\n  }\n\n  /**\n   * @param {ViewSubscriptionsResponse} response\n   * @private\n   */\n  startNativeFlow_(response) {\n    if (response.getNative()) {\n      this.removeCloseEventListener();\n      // We shouldn't decrement the meter on redirects, so don't call onConsumeCallback.\n      this.onConsumeCallbackHandled_ = true;\n      this.deps_.callbacks().triggerSubscribeRequest();\n    }\n  }\n\n  /**\n   * Returns true if the window userAgent is a mobile platform.\n   * @private\n   */\n  isMobile_() {\n    return !!this.win_.navigator.userAgent.match(\n      /Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i\n    );\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {serviceUrl} from './services';\n\nexport class OffersApi {\n  /**\n   * @param {!../model/page-config.PageConfig} config\n   * @param {!./fetcher.Fetcher} fetcher\n   */\n  constructor(config, fetcher) {\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.config_ = config;\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n  }\n\n  /**\n   * @param {?string=} productId\n   * @return {!Promise<!Array<!../api/offer.Offer>>}\n   */\n  getOffers(productId = this.config_.getProductId()) {\n    if (!productId) {\n      throw new Error('getOffers requires productId in config or arguments');\n    }\n    return this.fetch_(productId);\n  }\n\n  /**\n   * @param {string} productId\n   * @return {!Promise<!Array<!../api/offer.Offer>>}\n   * @private\n   */\n  fetch_(productId) {\n    const url = serviceUrl(\n      '/publication/' +\n        encodeURIComponent(this.config_.getPublicationId()) +\n        '/offers' +\n        '?label=' +\n        encodeURIComponent(productId)\n    );\n    // TODO(dvoytenko): switch to a non-credentialed request after launch.\n    return this.fetcher_.fetchCredentialedJson(url).then((json) => {\n      return json['offers'] || [];\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {\n  AlreadySubscribedResponse,\n  EntitlementsResponse,\n  SkuSelectedResponse,\n  SubscribeResponse,\n  ViewSubscriptionsResponse,\n} from '../proto/api_messages';\nimport {AnalyticsEvent, EventParams} from '../proto/api_messages';\nimport {Constants} from '../utils/constants';\nimport {PayStartFlow} from './pay-flow';\nimport {ProductType, SubscriptionFlows} from '../api/subscriptions';\nimport {assert} from '../utils/log';\nimport {feArgs, feUrl} from './services';\n\n/**\n * @param {string} sku\n * @return {!EventParams}\n */\nfunction getEventParams(sku) {\n  return new EventParams([, , , , sku]);\n}\n\n/**\n * Offers view is closable when request was originated from 'AbbrvOfferFlow'\n * or from 'SubscribeOptionFlow'.\n */\nconst OFFERS_VIEW_CLOSABLE = true;\n\n// The value logged when the offers screen shows all available SKUs.\nconst ALL_SKUS = '*';\n\n/**\n * The class for Offers flow.\n */\nexport class OffersFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!./client-config-manager.ClientConfigManager} */\n    this.clientConfigManager_ = deps.clientConfigManager();\n\n    let isClosable = options && options.isClosable;\n    if (isClosable == undefined) {\n      isClosable = false; // Default is to hide Close button.\n    }\n\n    const feArgsObj = deps.activities().addDefaultArguments({\n      'showNative': deps.callbacks().hasSubscribeRequestCallback(),\n      'productType': ProductType.SUBSCRIPTION,\n      'list': (options && options.list) || 'default',\n      'skus': (options && options.skus) || null,\n      'isClosable': isClosable,\n    });\n\n    if (options && options.oldSku) {\n      feArgsObj['oldSku'] = options.oldSku;\n      assert(feArgsObj['skus'], 'Need a sku list if old sku is provided!');\n\n      // Remove old sku from offers if in list.\n      let skuList = feArgsObj['skus'];\n      const /** @type {string} */ oldSku = feArgsObj['oldSku'];\n      skuList = skuList.filter((sku) => sku !== oldSku);\n\n      assert(\n        skuList.length > 0,\n        'Sku list only contained offer user already has'\n      );\n      feArgsObj['skus'] = skuList;\n    }\n\n    // Redirect to payments if only one upgrade option is passed.\n    if (feArgsObj['skus'] && feArgsObj['skus'].length === 1) {\n      const sku = feArgsObj['skus'][0];\n      const /** @type {string|undefined} */ oldSku = feArgsObj['oldSku'];\n      // Update subscription triggers experimental flag if oldSku is passed,\n      // so we need to check for oldSku to decide if it needs to be sent.\n      // Otherwise we might accidentally block a regular subscription request.\n      if (oldSku) {\n        const skuSelectedResponse = new SkuSelectedResponse();\n        skuSelectedResponse.setSku(sku);\n        skuSelectedResponse.setOldSku(oldSku);\n        this.startPayFlow_(skuSelectedResponse);\n        return;\n      }\n    }\n\n    /** @private  @const {!Array<!string>} */\n    this.skus_ = feArgsObj['skus'] || [ALL_SKUS];\n\n    /** @private @const {!Promise<!ActivityIframeView>} */\n    this.activityIframeViewPromise_ = this.getUrl_(\n      this.clientConfigManager_.getClientConfig()\n    ).then((url) => {\n      return new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl(url),\n        feArgsObj,\n        /* shouldFadeBody */ true\n      );\n    });\n  }\n\n  /**\n   * @param {SkuSelectedResponse} response\n   * @private\n   */\n  startPayFlow_(response) {\n    const sku = response.getSku();\n    if (sku) {\n      const /** @type {../api/subscriptions.SubscriptionRequest} */ subscriptionRequest = {\n          'skuId': sku,\n        };\n      const oldSku = response.getOldSku();\n      if (oldSku) {\n        subscriptionRequest['oldSku'] = oldSku;\n        this.deps_.analytics().setSku(oldSku);\n      }\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.ACTION_OFFER_SELECTED,\n        true,\n        getEventParams(sku)\n      );\n      new PayStartFlow(this.deps_, subscriptionRequest).start();\n    }\n  }\n\n  /**\n   * @param {AlreadySubscribedResponse} response\n   * @private\n   */\n  handleLinkRequest_(response) {\n    if (response.getSubscriberOrMember()) {\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.ACTION_ALREADY_SUBSCRIBED,\n        true\n      );\n      this.deps_.callbacks().triggerLoginRequest({\n        linkRequested: !!response.getLinkRequested(),\n      });\n    }\n  }\n\n  /**\n   * @param {ViewSubscriptionsResponse} response\n   * @private\n   */\n  startNativeFlow_(response) {\n    if (response.getNative()) {\n      this.deps_.callbacks().triggerSubscribeRequest();\n    }\n  }\n\n  /**\n   * @param {!EntitlementsResponse} response\n   * @private\n   */\n  handleEntitlementsResponse_(response) {\n    const jwt = response.getJwt();\n    if (jwt) {\n      this.deps_.entitlementsManager().pushNextEntitlements(jwt);\n      const swgUserToken = response.getSwgUserToken();\n      if (swgUserToken) {\n        this.deps_.storage().set(Constants.USER_TOKEN, swgUserToken, true);\n      }\n    }\n  }\n\n  /**\n   * Starts the offers flow or alreadySubscribed flow.\n   * @return {!Promise}\n   */\n  start() {\n    if (this.activityIframeViewPromise_) {\n      return this.activityIframeViewPromise_.then((activityIframeView) => {\n        // So no error if skipped to payment screen.\n        // Start/cancel events.\n        // The second parameter is required by Propensity in AMP.\n        this.deps_\n          .callbacks()\n          .triggerFlowStarted(SubscriptionFlows.SHOW_OFFERS, {\n            skus: this.skus_,\n            source: 'SwG',\n          });\n        activityIframeView.onCancel(() => {\n          this.deps_\n            .callbacks()\n            .triggerFlowCanceled(SubscriptionFlows.SHOW_OFFERS);\n        });\n        activityIframeView.on(\n          SkuSelectedResponse,\n          this.startPayFlow_.bind(this)\n        );\n        activityIframeView.on(\n          AlreadySubscribedResponse,\n          this.handleLinkRequest_.bind(this)\n        );\n        activityIframeView.on(\n          ViewSubscriptionsResponse,\n          this.startNativeFlow_.bind(this)\n        );\n        activityIframeView.on(\n          EntitlementsResponse,\n          this.handleEntitlementsResponse_.bind(this)\n        );\n\n        return this.dialogManager_.openView(activityIframeView);\n      });\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Gets the URL that should be used for the activity iFrame view.\n   * @param {!Promise<../model/client-config.ClientConfig>} clientConfigPromise\n   * @return {!Promise<string>}\n   */\n  getUrl_(clientConfigPromise) {\n    return clientConfigPromise.then((clientConfig) => {\n      if (clientConfig.useUpdatedOfferFlows) {\n        return '/subscriptionoffersiframe';\n      } else {\n        return '/offersiframe';\n      }\n    });\n  }\n}\n\n/**\n * The class for subscribe option flow.\n */\nexport class SubscribeOptionFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      deps.win(),\n      this.activityPorts_,\n      feUrl('/optionsiframe'),\n      feArgs({\n        'publicationId': deps.pageConfig().getPublicationId(),\n        'productId': deps.pageConfig().getProductId(),\n        'list': (options && options.list) || 'default',\n        'skus': (options && options.skus) || null,\n        'isClosable': true,\n      }),\n      /* shouldFadeBody */ false\n    );\n  }\n\n  /**\n   * Starts the offers flow or alreadySubscribed flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_SUBSCRIBE_OPTION);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_\n        .callbacks()\n        .triggerFlowCanceled(SubscriptionFlows.SHOW_SUBSCRIBE_OPTION);\n    });\n    this.activityIframeView_.on(\n      SubscribeResponse,\n      this.maybeOpenOffersFlow_.bind(this)\n    );\n\n    this.activityIframeView_.acceptResult().then(\n      (result) => {\n        const data = result.data;\n        const response = new SubscribeResponse();\n        if (data['subscribe']) {\n          response.setSubscribe(true);\n        }\n        this.maybeOpenOffersFlow_(response);\n      },\n      (reason) => {\n        this.dialogManager_.completeView(this.activityIframeView_);\n        throw reason;\n      }\n    );\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.IMPRESSION_CLICK_TO_SHOW_OFFERS\n    );\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {SubscribeResponse} response\n   * @private\n   */\n  maybeOpenOffersFlow_(response) {\n    if (response.getSubscribe()) {\n      const options = this.options_ || {};\n      if (options.isClosable == undefined) {\n        options.isClosable = OFFERS_VIEW_CLOSABLE;\n      }\n      this.eventManager_.logSwgEvent(AnalyticsEvent.ACTION_VIEW_OFFERS, true);\n      new OffersFlow(this.deps_, options).start();\n    }\n  }\n}\n\n/**\n * The class for Abbreviated Offer flow.\n *\n */\nexport class AbbrvOfferFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest=} options\n   */\n  constructor(deps, options = {}) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/abbrvofferiframe'),\n      feArgs({\n        'publicationId': deps.pageConfig().getPublicationId(),\n        'productId': deps.pageConfig().getProductId(),\n        'showNative': deps.callbacks().hasSubscribeRequestCallback(),\n        'list': (options && options.list) || 'default',\n        'skus': (options && options.skus) || null,\n        'isClosable': true,\n      }),\n      /* shouldFadeBody */ false\n    );\n  }\n\n  /**\n   * @param {AlreadySubscribedResponse} response\n   * @private\n   */\n  handleLinkRequest_(response) {\n    if (response.getSubscriberOrMember()) {\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.ACTION_ALREADY_SUBSCRIBED,\n        true\n      );\n      this.deps_.callbacks().triggerLoginRequest({\n        linkRequested: !!response.getLinkRequested(),\n      });\n    }\n  }\n\n  /**\n   * Starts the offers flow\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_\n      .callbacks()\n      .triggerFlowStarted(SubscriptionFlows.SHOW_ABBRV_OFFER);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_\n        .callbacks()\n        .triggerFlowCanceled(SubscriptionFlows.SHOW_ABBRV_OFFER);\n    });\n\n    // If the user is already subscribed, trigger login flow\n    this.activityIframeView_.on(\n      AlreadySubscribedResponse,\n      this.handleLinkRequest_.bind(this)\n    );\n\n    // If result is due to requesting offers, redirect to offers flow\n    this.activityIframeView_.acceptResult().then((result) => {\n      if (result.data['viewOffers']) {\n        const options = this.options_ || {};\n        if (options.isClosable == undefined) {\n          options.isClosable = OFFERS_VIEW_CLOSABLE;\n        }\n        this.eventManager_.logSwgEvent(AnalyticsEvent.ACTION_VIEW_OFFERS, true);\n        new OffersFlow(this.deps_, options).start();\n        return;\n      }\n      if (result.data['native']) {\n        this.deps_.callbacks().triggerSubscribeRequest();\n        // The flow is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n        return;\n      }\n    });\n\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED\n    );\n\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ExperimentFlags} from './experiment-flags';\nimport {PaymentsAsyncClient} from '../../third_party/gpay/src/payjs_async';\nimport {Preconnect} from '../utils/preconnect';\nimport {bytesToString, stringToBytes} from '../utils/bytes';\nimport {createCancelError} from '../utils/errors';\nimport {feCached} from './services';\nimport {isExperimentOn} from './experiments';\n\nconst REDIRECT_STORAGE_KEY = 'subscribe.google.com:rk';\n\n/**\n * @typedef {{\n *   forceRedirect: (boolean|undefined),\n * }}\n */\nexport let PayOptionsDef;\n\n/**\n * @const {!Object<string, string>}\n * @package Visible for testing only.\n */\nexport const PAY_ORIGIN = {\n  'PRODUCTION': 'https://pay.google.com',\n  'SANDBOX': 'https://pay.sandbox.google.com',\n};\n\n/** @return {string} */\nfunction payUrl() {\n  return feCached(PAY_ORIGIN['$payEnvironment$'] + '/gp/p/ui/pay');\n}\n\n/**\n */\nexport class PayClient {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private {?function(!Promise<!PaymentData>)} */\n    this.responseCallback_ = null;\n\n    /** @private {?PaymentDataRequest} */\n    this.request_ = null;\n\n    /** @private {?Promise<!PaymentData>} */\n    this.response_ = null;\n\n    /** @private @const {!./analytics-service.AnalyticsService} */\n    this.analytics_ = deps.analytics();\n\n    /** @private @const {!RedirectVerifierHelper} */\n    this.redirectVerifierHelper_ = new RedirectVerifierHelper(this.win_);\n\n    /** @private {?PaymentsAsyncClient} */\n    this.client_ = null;\n\n    /** @private @const {!Preconnect} */\n    this.preconnect_ = new Preconnect(this.win_.document);\n\n    // If the page is started from a redirect, immediately initialize\n    // client to avoid dropping user state.\n    if (\n      isExperimentOn(this.win_, ExperimentFlags.PAY_CLIENT_REDIRECT) &&\n      this.pageIsInitializedFromPayRedirect_()\n    ) {\n      this.preconnect(this.preconnect_);\n      this.initializePaymentsClient_();\n    }\n\n    // Prepare new verifier pair.\n    this.redirectVerifierHelper_.prepare();\n\n    /** @private @const {!./client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n  }\n\n  /**\n   * @param {!PaymentOptions} options\n   * @param {string} googleTransactionId\n   * @param {function(!Promise<!PaymentData>)} handler\n   * @return {!PaymentsAsyncClient}\n   * @private\n   */\n  createClient_(options, googleTransactionId, handler) {\n    // Assign Google Transaction ID to PaymentsAsyncClient.googleTransactionId_\n    // so it can be passed to gpay_async.js and stored in payment clearcut log.\n    PaymentsAsyncClient.googleTransactionId_ = googleTransactionId;\n    return new PaymentsAsyncClient(\n      options,\n      handler,\n      /* useIframe */ false,\n      this.activityPorts_.getOriginalWebActivityPorts()\n    );\n  }\n\n  /**\n   * @param {!../utils/preconnect.Preconnect} pre\n   */\n  preconnect(pre) {\n    pre.prefetch(payUrl());\n    pre.prefetch(\n      'https://payments.google.com/payments/v4/js/integrator.js?ss=md'\n    );\n    pre.prefetch('https://clients2.google.com/gr/gr_full_2.0.6.js');\n  }\n\n  /**\n   * Initializes Payments client.\n   */\n  initializePaymentsClient_() {\n    this.client_ = this.createClient_(\n      /** @type {!PaymentOptions} */\n      ({\n        environment: '$payEnvironment$',\n        'i': {\n          'redirectKey': this.redirectVerifierHelper_.restoreKey(),\n        },\n      }),\n      this.analytics_.getTransactionId(),\n      this.handleResponse_.bind(this)\n    );\n  }\n\n  /**\n   * Detects if the window is started from a Pay redirect by\n   * checking window's hash for Web Activities information.\n   */\n  pageIsInitializedFromPayRedirect_() {\n    const hash = this.win_.location.hash;\n    const hasRedirectEncryptedCallbackData = /redirectEncryptedCallbackData/.test(\n      hash\n    );\n    const hasSwgRequest = /swgRequest/.test(hash);\n    return hasRedirectEncryptedCallbackData && hasSwgRequest;\n  }\n\n  /**\n   * @return {string}\n   */\n  getType() {\n    // TODO(alin04): remove once all references removed.\n    return 'PAYJS';\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentRequest\n   * @param {!PayOptionsDef=} options\n   */\n  start(paymentRequest, options = {}) {\n    this.request_ = paymentRequest;\n\n    if (!this.client_) {\n      this.preconnect(this.preconnect_);\n      this.initializePaymentsClient_();\n    }\n    if (options.forceRedirect) {\n      paymentRequest = Object.assign(paymentRequest, {\n        'forceRedirect': options.forceRedirect || false,\n      });\n    }\n    setInternalParam(\n      paymentRequest,\n      'disableNative',\n      // The page cannot be iframed at this time. May be relaxed later\n      // for AMP and similar contexts.\n      this.win_ != this.top_()\n    );\n    let resolver = null;\n    const promise = new Promise((resolve) => (resolver = resolve));\n    // Notice that the callback for verifier may execute asynchronously.\n    this.redirectVerifierHelper_.useVerifier((verifier) => {\n      if (verifier) {\n        setInternalParam(paymentRequest, 'redirectVerifier', verifier);\n      }\n      if (options.forceRedirect) {\n        const client = this.client_;\n        this.eventManager_.getReadyPromise().then(() => {\n          this.analytics_.getLoggingPromise().then(() => {\n            client.loadPaymentData(paymentRequest);\n            resolver(true);\n          });\n        });\n      } else {\n        this.client_.loadPaymentData(paymentRequest);\n        resolver(true);\n      }\n    });\n    return promise;\n  }\n\n  /**\n   * @param {function(!Promise<!PaymentData>)} callback\n   */\n  onResponse(callback) {\n    this.responseCallback_ = callback;\n    const response = this.response_;\n    if (response) {\n      Promise.resolve().then(() => {\n        if (response) {\n          callback(this.convertResponse_(response, this.request_));\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {!Promise<!PaymentData>} responsePromise\n   * @private\n   */\n  handleResponse_(responsePromise) {\n    this.response_ = responsePromise;\n    if (this.responseCallback_) {\n      this.responseCallback_(\n        this.convertResponse_(this.response_, this.request_)\n      );\n    }\n  }\n\n  /**\n   * @param {!Promise<!PaymentData>} response\n   * @param {?PaymentDataRequest} request\n   * @return {!Promise<!PaymentData>}\n   * @private\n   */\n  convertResponse_(response, request) {\n    return response\n      .then(\n        // Temporary client side solution to remember the\n        // input params. TODO: Remove this once server-side\n        // input preservation is done and is part of the response.\n        (res) => {\n          if (request) {\n            res['paymentRequest'] = request;\n          }\n          return res;\n        }\n      )\n      .catch((reason) => {\n        if (typeof reason == 'object' && reason['statusCode'] == 'CANCELED') {\n          const error = createCancelError(this.win_);\n          if (request) {\n            error['productType'] = /** @type {!PaymentDataRequest} */ (request)[\n              'i'\n            ]['productType'];\n          } else {\n            error['productType'] = null;\n          }\n          return Promise.reject(error);\n        }\n        return Promise.reject(reason);\n      });\n  }\n\n  /**\n   * @return {!Window}\n   * @private\n   */\n  top_() {\n    // Only exists for testing since it's not possible to override `window.top`.\n    return this.win_.top;\n  }\n}\n\n/**\n * @typedef {{\n *   key: string,\n *   verifier: string,\n * }}\n */\nlet RedirectVerifierPairDef;\n\n/**\n * This helper generates key/verifier pair for the redirect mode. When the\n * redirect mode is used, the encrypted payload is returned via nivigation URL.\n * This payload need to be decrypted and to avoid session fixation attacks, a\n * verifier has to be used. This redirect verifier is not the only session\n * verifier in use: we also use GAIA. However, we have to fallback to this\n * verifier when GAIA is not available.\n *\n * @package Visible for testing only.\n */\nexport class RedirectVerifierHelper {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {boolean} */\n    this.pairCreated_ = false;\n\n    /** @private {?RedirectVerifierPairDef} */\n    this.pair_ = null;\n\n    /** @private {?Promise<?RedirectVerifierPairDef>} */\n    this.pairPromise_ = null;\n  }\n\n  /**\n   * To avoid popup blockers, the key/verifier pair is created as soon as\n   * possible.\n   * @return {?Promise}\n   */\n  prepare() {\n    return this.getOrCreatePair_(() => {});\n  }\n\n  /**\n   * Calls the provided callback with the generated redirect verifier. This\n   * API is sync/async, which is a big anti-pattern. However, it's necessary\n   * to reduce the risk of popup blockers. If the verifier is already available\n   * (see `prepare` method), the callback will be called immediately and thus\n   * in the same event loop as the user action.\n   *\n   * The return verifier could be `null`. This could mean either that its\n   * generation failed, or if the platform doesn't support necessary APIs, such\n   * as Web Crypto. The redirect can still proceed and try to fallback on GAIA\n   * as a redirect verifier. The set of platforms where GAIA is not available\n   * and the redirect verifier cannot be created is negligible.\n   *\n   * The key corresponding to the returned verifier is stored in the session\n   * storage and can be later restored using `restoreKey` method.\n   *\n   * @param {function(?string)} callback\n   */\n  useVerifier(callback) {\n    this.getOrCreatePair_((pair) => {\n      if (pair) {\n        try {\n          this.win_.localStorage.setItem(REDIRECT_STORAGE_KEY, pair.key);\n        } catch (e) {\n          // If storage has failed, there's no point in using the verifer.\n          // However, there are other ways to recover the redirect, so it's\n          // not necessarily a fatal condition.\n          pair = null;\n        }\n      }\n      callback((pair && pair.verifier) || null);\n    });\n  }\n\n  /**\n   * Restores the redirect key from the session storage. The key may be null.\n   * @return {?string}\n   */\n  restoreKey() {\n    try {\n      return (\n        (this.win_.localStorage &&\n          this.win_.localStorage.getItem(REDIRECT_STORAGE_KEY)) ||\n        null\n      );\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * @param {function(?RedirectVerifierPairDef)} callback\n   * @return {?Promise}\n   * @private\n   */\n  getOrCreatePair_(callback) {\n    this.createPair_();\n    if (this.pairCreated_) {\n      // Already created.\n      callback(this.pair_);\n    } else if (this.pairPromise_) {\n      // Otherwise wait for it to be created.\n      this.pairPromise_.then((pair) => callback(pair));\n    }\n    return this.pairPromise_;\n  }\n\n  /**\n   * @private\n   */\n  createPair_() {\n    // Either already created or already started.\n    if (this.pairCreated_ || this.pairPromise_) {\n      return;\n    }\n\n    // Check that the platform can fully support verification. That means\n    // that it's expected to implement the following APIs:\n    // a. Local storage (localStorage);\n    // b. WebCrypto (crypto.subtle);\n    // c. Crypto random (crypto.getRandomValues);\n    // d. SHA284 (crypto.subtle.digest).\n    let supportsLocalStorage;\n    try {\n      supportsLocalStorage = !!this.win_.localStorage;\n    } catch (e) {\n      // Note: This can happen when cookies are disabled.\n      supportsLocalStorage = false;\n    }\n    const crypto = this.win_.crypto;\n    if (\n      supportsLocalStorage &&\n      crypto &&\n      crypto.getRandomValues &&\n      crypto.subtle &&\n      crypto.subtle.digest\n    ) {\n      this.pairPromise_ = new Promise((resolve, reject) => {\n        // 1. Use crypto random to create a 128-bit (16 byte) redirect key.\n        const keyBytes = new Uint8Array(16);\n        crypto.getRandomValues(keyBytes);\n\n        // 2. Encode key as base64.\n        const key = btoa(bytesToString(keyBytes));\n\n        // 3. Create a hash.\n        crypto.subtle.digest({name: 'SHA-384'}, stringToBytes(key)).then(\n          (buffer) => {\n            const verifier = btoa(\n              bytesToString(\n                new Uint8Array(/** @type {!ArrayBuffer} */ (buffer))\n              )\n            );\n            resolve({key, verifier});\n          },\n          (reason) => {\n            reject(reason);\n          }\n        );\n      })\n        .catch(() => {\n          // Ignore failures. A failure to create a redirect verifier is often\n          // recoverable.\n          return null;\n        })\n        .then((pair) => {\n          this.pairCreated_ = true;\n          this.pair_ = pair;\n          return pair;\n        });\n    } else {\n      // Not supported.\n      this.pairCreated_ = true;\n      this.pair_ = null;\n    }\n  }\n}\n\n/**\n * @param {!PaymentDataRequest} paymentRequest\n * @param {string} param\n * @param {*} value\n */\nfunction setInternalParam(paymentRequest, param, value) {\n  paymentRequest['i'] = Object.assign(paymentRequest['i'] || {}, {\n    [param]: value,\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * The Flow goes like this:\n * a. Start Payments\n * b. Complete Payments\n * c. Create Account\n * d. Acknowledge Account\n *\n * In other words, Flow = Payments + Account Creation.\n */\n\nimport {\n  AccountCreationRequest,\n  EntitlementsResponse,\n} from '../proto/api_messages';\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {AnalyticsEvent, EventParams} from '../proto/api_messages';\nimport {Constants} from '../utils/constants';\nimport {JwtHelper} from '../utils/jwt';\nimport {\n  ProductType,\n  SubscriptionFlows,\n  WindowOpenMode,\n} from '../api/subscriptions';\nimport {PurchaseData, SubscribeResponse} from '../api/subscribe-response';\nimport {UserData} from '../api/user-data';\nimport {feArgs, feUrl} from './services';\nimport {getPropertyFromJsonString, parseJson} from '../utils/json';\nimport {isCancelError} from '../utils/errors';\n\n/**\n * String values input by the publisher are mapped to the number values.\n * @type {!Object<string, number>}\n */\nexport const ReplaceSkuProrationModeMapping = {\n  // The replacement takes effect immediately, and the remaining time will\n  // be prorated and credited to the user. This is the current default\n  // behavior.\n  'IMMEDIATE_WITH_TIME_PRORATION': 1,\n};\n\nexport const RecurrenceMapping = {\n  'AUTO': 1,\n  'ONE_TIME': 2,\n};\n\n/**\n * @param {string} sku\n * @param {?string=} subscriptionFlow\n * @return {!EventParams}\n */\nfunction getEventParams(sku, subscriptionFlow = null) {\n  return new EventParams([, , , , sku, , , subscriptionFlow]);\n}\n\n/**\n * The flow to initiate payment process.\n */\nexport class PayStartFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.SubscriptionRequest} subscriptionRequest\n   * @param {!../api/subscriptions.ProductType} productType\n   */\n  constructor(\n    deps,\n    subscriptionRequest,\n    productType = ProductType.SUBSCRIPTION\n  ) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!./pay-client.PayClient} */\n    this.payClient_ = deps.payClient();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = deps.pageConfig();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!../api/subscriptions.SubscriptionRequest} */\n    this.subscriptionRequest_ = subscriptionRequest;\n\n    /**@private @const {!ProductType} */\n    this.productType_ = productType;\n\n    /** @private @const {!../runtime/analytics-service.AnalyticsService} */\n    this.analyticsService_ = deps.analytics();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!../runtime/client-config-manager.ClientConfigManager} */\n    this.clientConfigManager_ = deps.clientConfigManager();\n  }\n\n  /**\n   * Starts the payments flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Get the paySwgVersion for buyflow.\n    const promise = this.clientConfigManager_.getClientConfig();\n    return promise.then((clientConfig) => {\n      this.start_(clientConfig.paySwgVersion);\n    });\n  }\n\n  /**\n   * Starts the payments flow for the given version.\n   * @param {!string=} paySwgVersion\n   * @return {!Promise}\n   */\n  start_(paySwgVersion) {\n    // Add the 'publicationId' key to the subscriptionRequest_ object.\n    const swgPaymentRequest = Object.assign({}, this.subscriptionRequest_, {\n      'publicationId': this.pageConfig_.getPublicationId(),\n    });\n\n    if (paySwgVersion) {\n      swgPaymentRequest['swgVersion'] = paySwgVersion;\n    }\n\n    // Map the proration mode to the enum value (if proration exists).\n    const prorationMode = swgPaymentRequest['replaceSkuProrationMode'];\n    if (prorationMode) {\n      swgPaymentRequest['replaceSkuProrationMode'] =\n        ReplaceSkuProrationModeMapping[prorationMode];\n    } else if (swgPaymentRequest['oldSku']) {\n      swgPaymentRequest['replaceSkuProrationMode'] =\n        ReplaceSkuProrationModeMapping['IMMEDIATE_WITH_TIME_PRORATION'];\n    }\n    // Assign one-time recurrence enum if applicable\n    if (swgPaymentRequest['oneTime']) {\n      swgPaymentRequest['paymentRecurrence'] = RecurrenceMapping['ONE_TIME'];\n      delete swgPaymentRequest['oneTime'];\n    }\n\n    // Start/cancel events.\n    const flow =\n      this.productType_ == ProductType.UI_CONTRIBUTION\n        ? SubscriptionFlows.CONTRIBUTE\n        : SubscriptionFlows.SUBSCRIBE;\n\n    this.deps_.callbacks().triggerFlowStarted(flow, this.subscriptionRequest_);\n    if (swgPaymentRequest['oldSku']) {\n      this.analyticsService_.setSku(swgPaymentRequest['oldSku']);\n    }\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.ACTION_PAYMENT_FLOW_STARTED,\n      true,\n      getEventParams(swgPaymentRequest['skuId'])\n    );\n    PayCompleteFlow.waitingForPayClient_ = true;\n    this.payClient_.start(\n      /** @type {!PaymentDataRequest} */\n      ({\n        'apiVersion': 1,\n        'allowedPaymentMethods': ['CARD'],\n        'environment': '$payEnvironment$',\n        'playEnvironment': '$playEnvironment$',\n        'swg': swgPaymentRequest,\n        'i': {\n          'startTimeMs': Date.now(),\n          'productType': this.productType_,\n        },\n      }),\n      {\n        forceRedirect:\n          this.deps_.config().windowOpenMode == WindowOpenMode.REDIRECT,\n      }\n    );\n    return Promise.resolve();\n  }\n}\n\n/**\n * The flow for successful payments completion.\n */\nexport class PayCompleteFlow {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  static configurePending(deps) {\n    /** @const @type {./client-event-manager.ClientEventManager} */\n    const eventManager = deps.eventManager();\n\n    deps.payClient().onResponse((payPromise) => {\n      deps.entitlementsManager().blockNextNotification();\n      const flow = new PayCompleteFlow(deps);\n      const promise = validatePayResponse(\n        deps,\n        payPromise,\n        flow.complete.bind(flow)\n      );\n      deps.callbacks().triggerPaymentResponse(promise);\n      return promise.then(\n        (response) => {\n          const sku = parseSkuFromPurchaseDataSafe(response.purchaseData);\n          deps.analytics().setSku(sku || '');\n          eventManager.logSwgEvent(\n            AnalyticsEvent.ACTION_PAYMENT_COMPLETE,\n            true,\n            getEventParams(\n              sku || '',\n              response.productType == ProductType.UI_CONTRIBUTION\n                ? SubscriptionFlows.CONTRIBUTE\n                : SubscriptionFlows.SUBSCRIBE\n            )\n          );\n          flow.start(response);\n        },\n        (reason) => {\n          if (isCancelError(reason)) {\n            const productType = /** @type {!Object} */ (reason)['productType'];\n            const flow =\n              productType == ProductType.UI_CONTRIBUTION\n                ? SubscriptionFlows.CONTRIBUTE\n                : SubscriptionFlows.SUBSCRIBE;\n            deps.callbacks().triggerFlowCanceled(flow);\n            deps\n              .eventManager()\n              .logSwgEvent(AnalyticsEvent.ACTION_USER_CANCELED_PAYFLOW, true);\n          } else {\n            deps\n              .eventManager()\n              .logSwgEvent(AnalyticsEvent.EVENT_PAYMENT_FAILED, false);\n            deps.jserror().error('Pay failed', reason);\n            throw reason;\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise<!ActivityIframeView>} */\n    this.activityIframeViewPromise_ = null;\n\n    /** @private {?Promise} */\n    this.readyPromise_ = null;\n\n    /** @private @const {!../runtime/analytics-service.AnalyticsService} */\n    this.analyticsService_ = deps.analytics();\n\n    /** @private @const {!../runtime/client-event-manager.ClientEventManager} */\n    this.eventManager_ = deps.eventManager();\n\n    /** @private @const {!../runtime/client-config-manager.ClientConfigManager} */\n    this.clientConfigManager_ = deps.clientConfigManager();\n\n    /** @private {?string} */\n    this.sku_ = null;\n  }\n\n  /**\n   * Starts the payments completion flow.\n   * @param {{\n   *   productType: string,\n   *   oldSku: ?string,\n   *   paymentRecurrence: ?number,\n   * }} response\n   * @return {!Promise}\n   */\n  start(response) {\n    this.sku_ = parseSkuFromPurchaseDataSafe(response.purchaseData);\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.IMPRESSION_ACCOUNT_CHANGED,\n      true,\n      getEventParams(this.sku_ || '')\n    );\n    this.deps_.entitlementsManager().reset(true);\n    // TODO(dianajing): future-proof isOneTime flag\n    const args = {\n      'publicationId': this.deps_.pageConfig().getPublicationId(),\n      'productType': response['productType'],\n      'isSubscriptionUpdate': !!response['oldSku'],\n      'isOneTime': !!response['paymentRecurrence'],\n    };\n    // TODO(dvoytenko, #400): cleanup once entitlements is launched everywhere.\n    if (response.userData && response.entitlements) {\n      args['idToken'] = response.userData.idToken;\n      this.deps_\n        .entitlementsManager()\n        .pushNextEntitlements(response.entitlements.raw);\n      // Persist swgUserToken in local storage\n      if (response.swgUserToken) {\n        this.deps_\n          .storage()\n          .set(Constants.USER_TOKEN, response.swgUserToken, true);\n      }\n    } else {\n      args['loginHint'] = response.userData && response.userData.email;\n    }\n    return (this.activityIframeViewPromise_ = this.clientConfigManager_\n      .getClientConfig()\n      .then((clientConfig) => {\n        args['useUpdatedConfirmUi'] = clientConfig.useUpdatedOfferFlows;\n        return new ActivityIframeView(\n          this.win_,\n          this.activityPorts_,\n          feUrl('/payconfirmiframe'),\n          feArgs(args),\n          /* shouldFadeBody */ true\n        );\n      })\n      .then((activityIframeView) => {\n        activityIframeView.on(\n          EntitlementsResponse,\n          this.handleEntitlementsResponse_.bind(this)\n        );\n\n        activityIframeView.acceptResult().then(() => {\n          // The flow is complete.\n          this.dialogManager_.completeView(activityIframeView);\n        });\n\n        this.readyPromise_ = this.dialogManager_.openView(activityIframeView);\n        return activityIframeView;\n      }));\n  }\n\n  /**\n   * @param {!EntitlementsResponse} response\n   * @private\n   */\n  handleEntitlementsResponse_(response) {\n    const jwt = response.getJwt();\n    if (jwt) {\n      this.deps_.entitlementsManager().pushNextEntitlements(jwt);\n    }\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  complete() {\n    this.eventManager_.logSwgEvent(\n      AnalyticsEvent.ACTION_ACCOUNT_CREATED,\n      true,\n      getEventParams(this.sku_ || '')\n    );\n    this.deps_.entitlementsManager().unblockNextNotification();\n    return Promise.all([\n      this.activityIframeViewPromise_,\n      this.readyPromise_,\n    ]).then((values) => {\n      const activityIframeView = values[0];\n      const accountCompletionRequest = new AccountCreationRequest();\n      accountCompletionRequest.setComplete(true);\n      activityIframeView.execute(accountCompletionRequest);\n      return activityIframeView\n        .acceptResult()\n        .catch(() => {\n          // Ignore errors.\n        })\n        .then(() => {\n          this.eventManager_.logSwgEvent(\n            AnalyticsEvent.ACTION_ACCOUNT_ACKNOWLEDGED,\n            true,\n            getEventParams(this.sku_ || '')\n          );\n          this.deps_.entitlementsManager().setToastShown(true);\n        });\n    });\n  }\n}\n\n/** @private {boolean} */\nPayCompleteFlow.waitingForPayClient_ = false;\n\n/**\n * @param {!./deps.DepsDef} deps\n * @param {!Promise<!Object>} payPromise\n * @param {function():!Promise} completeHandler\n * @return {!Promise<!SubscribeResponse>}\n */\nfunction validatePayResponse(deps, payPromise, completeHandler) {\n  const wasRedirect = !PayCompleteFlow.waitingForPayClient_;\n  PayCompleteFlow.waitingForPayClient_ = false;\n  return payPromise.then((data) => {\n    // 1) We log against a random TX ID which is how we track a specific user\n    //    anonymously.\n    // 2) If there was a redirect to gPay, we may have lost our stored TX ID.\n    // 3) Pay service is supposed to give us the TX ID it logged against.\n    let eventType = AnalyticsEvent.UNKNOWN;\n    let eventParams = undefined;\n    if (typeof data !== 'object' || !data['googleTransactionId']) {\n      // If gPay doesn't give us a TX ID it means that something may\n      // be wrong.  If we previously logged then we are at least continuing to\n      // log against the same TX ID.  If we didn't previously log then we have\n      // lost all connection to the events that preceded the payment event and\n      // we at least want to know why that data was lost.\n      eventParams = new EventParams();\n      eventParams.setHadLogged(!wasRedirect);\n      eventType = AnalyticsEvent.EVENT_GPAY_NO_TX_ID;\n    } else {\n      const oldTxId = deps.analytics().getTransactionId();\n      const newTxId = data['googleTransactionId'];\n\n      if (wasRedirect) {\n        // This is the expected case for full redirects.  It may be happening\n        // unexpectedly at other times too though and we want to be aware of\n        // it if it does.\n        deps.analytics().setTransactionId(newTxId);\n        eventType = AnalyticsEvent.EVENT_GPAY_CANNOT_CONFIRM_TX_ID;\n      } else {\n        if (oldTxId === newTxId) {\n          // This is the expected case for non-redirect pay events\n          eventType = AnalyticsEvent.EVENT_CONFIRM_TX_ID;\n        } else {\n          // This is an unexpected case: gPay rejected our TX ID and created\n          // its own.  Log the gPay TX ID but keep our logging consistent.\n          eventParams = new EventParams();\n          eventParams.setGpayTransactionId(newTxId);\n          eventType = AnalyticsEvent.EVENT_CHANGED_TX_ID;\n        }\n      }\n    }\n    deps.eventManager().logSwgEvent(eventType, true, eventParams);\n    return parseSubscriptionResponse(deps, data, completeHandler);\n  });\n}\n\n/**\n * @param {!./deps.DepsDef} deps\n * @param {*} data\n * @param {function():!Promise} completeHandler\n * @return {!SubscribeResponse}\n */\nexport function parseSubscriptionResponse(deps, data, completeHandler) {\n  let swgData = null;\n  let raw = null;\n  let productType = ProductType.SUBSCRIPTION;\n  let oldSku = null;\n  let paymentRecurrence = null;\n\n  if (data) {\n    if (typeof data == 'string') {\n      raw = /** @type {string} */ (data);\n    } else {\n      // Assume it's a json object in the format:\n      // `{integratorClientCallbackData: \"...\"}` or `{swgCallbackData: \"...\"}`.\n      const json = /** @type {!Object} */ (data);\n      if ('swgCallbackData' in json) {\n        swgData = /** @type {!Object} */ (json['swgCallbackData']);\n      } else if ('integratorClientCallbackData' in json) {\n        raw = json['integratorClientCallbackData'];\n      }\n      if ('paymentRequest' in data) {\n        oldSku = (data['paymentRequest']['swg'] || {})['oldSku'];\n        paymentRecurrence = (data['paymentRequest']['swg'] || {})[\n          'paymentRecurrence'\n        ];\n        productType =\n          (data['paymentRequest']['i'] || {})['productType'] ||\n          ProductType.SUBSCRIPTION;\n      }\n    }\n  }\n  if (raw && !swgData) {\n    raw = atob(raw);\n    if (raw) {\n      const parsed = parseJson(raw);\n      swgData = parsed['swgCallbackData'];\n    }\n  }\n  if (!swgData) {\n    throw new Error('unexpected payment response');\n  }\n  raw = JSON.stringify(/** @type {!JsonObject} */ (swgData));\n  return new SubscribeResponse(\n    raw,\n    parsePurchaseData(swgData),\n    parseUserData(swgData),\n    parseEntitlements(deps, swgData),\n    productType,\n    completeHandler,\n    oldSku,\n    paymentRecurrence,\n    swgData['swgUserToken']\n  );\n}\n\n/**\n * @param {!Object} swgData\n * @return {!PurchaseData}\n */\nfunction parsePurchaseData(swgData) {\n  const raw = swgData['purchaseData'];\n  const signature = swgData['purchaseDataSignature'];\n  return new PurchaseData(raw, signature);\n}\n\n/**\n * @param {!Object} swgData\n * @return {?UserData}\n * @package Visible for testing.\n */\nexport function parseUserData(swgData) {\n  const idToken = swgData['idToken'];\n  if (!idToken) {\n    return null;\n  }\n  const jwt = /** @type {!Object} */ (new JwtHelper().decode(idToken));\n  return new UserData(idToken, jwt);\n}\n\n/**\n * @param {!./deps.DepsDef} deps\n * @param {!Object} swgData\n * @return {?../api/entitlements.Entitlements}\n * @package Visible for testing.\n */\nexport function parseEntitlements(deps, swgData) {\n  if (swgData['signedEntitlements']) {\n    return deps.entitlementsManager().parseEntitlements(swgData);\n  }\n  return null;\n}\n\n/**\n * @param {!PurchaseData} purchaseData\n * @return {?string}\n */\nfunction parseSkuFromPurchaseDataSafe(purchaseData) {\n  return /** @type {?string} */ (getPropertyFromJsonString(\n    purchaseData.raw,\n    'productId'\n  ) || null);\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  AnalyticsEvent,\n  EventOriginator,\n  EventParams,\n} from '../proto/api_messages';\nimport {addQueryParam} from '../utils/url';\nimport {adsUrl} from './services';\nimport {analyticsEventToPublisherEvent} from './event-type-mapping';\nimport {isBoolean, isObject} from '../utils/types';\n\n/**\n * Implements interface to Propensity server\n */\nexport class PropensityServer {\n  /**\n   * Page configuration is known when Propensity API\n   * is available, publication ID is therefore used\n   * in constructor for the server interface.\n   * @param {!Window} win\n   * @param {!./deps.DepsDef} deps\n   * @param {!./fetcher.Fetcher} fetcher\n   */\n  constructor(win, deps, fetcher) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n    /** @private @const {string} */\n    this.publicationId_ = this.deps_.pageConfig().getPublicationId();\n    /** @private {?string} */\n    this.clientId_ = null;\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n    /** @private @const {number} */\n    this.version_ = 1;\n\n    this.deps_\n      .eventManager()\n      .registerEventListener(this.handleClientEvent_.bind(this));\n  }\n\n  /**\n   * @private\n   * @return {string}\n   */\n  getDocumentCookie_() {\n    return this.win_.document.cookie;\n  }\n\n  /**\n   * Returns the client ID to be used.\n   * @return {?string}\n   * @private\n   */\n  getClientId_() {\n    if (!this.clientId_) {\n      // Match '__gads' (name of the cookie) dropped by Ads Tag.\n      const gadsmatch = this.getDocumentCookie_().match(\n        '(^|;)\\\\s*__gads\\\\s*=\\\\s*([^;]+)'\n      );\n      // Since the cookie will be consumed using decodeURIComponent(),\n      // use encodeURIComponent() here to match.\n      this.clientId_ = gadsmatch && encodeURIComponent(gadsmatch.pop());\n    }\n    return this.clientId_;\n  }\n\n  /**\n   * @private\n   * @param {string} url\n   * @return {string}\n   */\n  propensityUrl_(url) {\n    url = addQueryParam(url, 'u_tz', '240');\n    url = addQueryParam(url, 'v', String(this.version_));\n    const clientId = this.getClientId_();\n    if (clientId) {\n      url = addQueryParam(url, 'cookie', clientId);\n    }\n    url = addQueryParam(url, 'cdm', this.win_.location.hostname);\n    return url;\n  }\n\n  /**\n   * @param {string} state\n   * @param {?string} productsOrSkus\n   */\n  sendSubscriptionState(state, productsOrSkus) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      credentials: 'include',\n    });\n    let url = adsUrl('/subopt/data');\n    url = addQueryParam(url, 'states', this.publicationId_ + ':' + state);\n    if (productsOrSkus) {\n      url = addQueryParam(url, 'extrainfo', productsOrSkus);\n    }\n    return this.fetcher_.fetch(this.propensityUrl_(url), init);\n  }\n\n  /**\n   * @param {string} event\n   * @param {?string} context\n   * @private\n   */\n  sendEvent_(event, context) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      credentials: 'include',\n    });\n    let url = adsUrl('/subopt/data');\n    url = addQueryParam(url, 'events', this.publicationId_ + ':' + event);\n    if (context) {\n      url = addQueryParam(url, 'extrainfo', context);\n    }\n    return this.fetcher_.fetch(this.propensityUrl_(url), init);\n  }\n\n  /**\n   *\n   * @param {!../api/client-event-manager-api.ClientEvent} event\n   */\n  handleClientEvent_(event) {\n    // Propensity does not need this data and does not have the right to\n    // it at this time.  We can consider this if necessary in the future.\n    if (event.eventOriginator === EventOriginator.SHOWCASE_CLIENT) {\n      return;\n    }\n\n    /**\n     * Does a live check of the config because we don't know when publisher\n     * called to enable (it may be after a consent dialog).\n     */\n    if (\n      !this.deps_.config().enablePropensity &&\n      event.eventOriginator !== EventOriginator.PROPENSITY_CLIENT\n    ) {\n      return;\n    }\n\n    if (event.eventType === AnalyticsEvent.EVENT_SUBSCRIPTION_STATE) {\n      this.sendSubscriptionState(\n        event.additionalParameters['state'],\n        event.additionalParameters['productsOrSkus']\n      );\n      return;\n    }\n    const propEvent = analyticsEventToPublisherEvent(event.eventType);\n    if (propEvent == null) {\n      return;\n    }\n    let additionalParameters = event.additionalParameters;\n    // The EventParams object is private to SwG analytics.  Do not send.\n    if (additionalParameters instanceof EventParams) {\n      additionalParameters = undefined;\n    }\n    if (isBoolean(event.isFromUserAction)) {\n      if (!isObject(additionalParameters)) {\n        additionalParameters = {};\n      }\n      additionalParameters['is_active'] = event.isFromUserAction;\n    }\n    this.sendEvent_(\n      propEvent,\n      JSON.stringify(/** @type {?JsonObject} */ (additionalParameters))\n    );\n  }\n\n  /**\n   * @param {JsonObject} response\n   * @return {!../api/propensity-api.PropensityScore}\n   */\n  parsePropensityResponse_(response) {\n    let defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({});\n    if (!response['header']) {\n      defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({\n        header: {ok: false},\n        body: {error: 'No valid response'},\n      });\n      return defaultScore;\n    }\n    const status = response['header'];\n    let scoreDetails = undefined;\n    if (status['ok']) {\n      const scores = response['scores'];\n      scoreDetails = [];\n      for (let i = 0; i < scores.length; i++) {\n        const result = scores[i];\n        const scoreStatus = !!result['score'];\n        let scoreDetail;\n        if (scoreStatus) {\n          const value = /** @type {!../api/propensity-api.Score} */ ({\n            value: result['score'],\n            bucketed: result['score_type'] == 2,\n          });\n          scoreDetail = /** @type {!../api/propensity-api.Body} */ ({\n            product: result['product'],\n            score: value,\n          });\n        } else {\n          scoreDetail = /** @type {!../api/propensity-api.Body} */ ({\n            product: result['product'],\n            error: result['error_message'],\n          });\n        }\n        scoreDetails.push(scoreDetail);\n      }\n      if (scoreDetails) {\n        defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({\n          header: {ok: true},\n          body: {scores: scoreDetails},\n        });\n      }\n      return defaultScore;\n    }\n    defaultScore = /** @type {!../api/propensity-api.PropensityScore} */ ({\n      header: {ok: false},\n      body: {error: response['error']},\n    });\n    return defaultScore;\n  }\n  /**\n   * @param {string} referrer\n   * @param {string} type\n   * @return {?Promise<../api/propensity-api.PropensityScore>}\n   */\n  getPropensity(referrer, type) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      credentials: 'include',\n    });\n    const url =\n      adsUrl('/subopt/pts?products=') +\n      this.publicationId_ +\n      '&type=' +\n      type +\n      '&ref=' +\n      referrer;\n    return this.fetcher_\n      .fetch(this.propensityUrl_(url), init)\n      .then((result) => result.json())\n      .then((response) => {\n        return this.parsePropensityResponse_(response);\n      });\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as PropensityApi from '../api/propensity-api';\nimport {Event, SubscriptionState} from '../api/logger-api';\nimport {EventOriginator} from '../proto/api_messages';\nimport {PropensityServer} from './propensity-server';\nimport {isBoolean} from '../utils/types';\nimport {isEnumValue, isObject} from '../utils/types';\nimport {publisherEventToAnalyticsEvent} from './event-type-mapping';\n\n/**\n * @implements {PropensityApi.PropensityApi}\n */\nexport class Propensity {\n  /**\n   * @param {!Window} win\n   * @param {!./deps.DepsDef} deps\n   * @param {!./fetcher.Fetcher} fetcher\n   *\n   * IMPORTANT: deps may not be full initialized config and pageConfig are\n   * available immediately, other function should be gated on a ready promise.\n   * #TODO(jpettitt) switch refactor to take out the win and use deps to get win\n   */\n  constructor(win, deps, fetcher) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private {PropensityServer} */\n    this.propensityServer_ = new PropensityServer(win, deps, fetcher);\n\n    /** @private @const {!../api/client-event-manager-api.ClientEventManagerApi} */\n    this.eventManager_ = deps.eventManager();\n  }\n\n  /** @override */\n  sendSubscriptionState(state, jsonProducts) {\n    if (!Object.values(SubscriptionState).includes(state)) {\n      throw new Error('Invalid subscription state provided');\n    }\n    if (\n      (SubscriptionState.SUBSCRIBER == state ||\n        SubscriptionState.PAST_SUBSCRIBER == state) &&\n      !jsonProducts\n    ) {\n      throw new Error(\n        'Entitlements must be provided for users with' +\n          ' active or expired subscriptions'\n      );\n    }\n    if (jsonProducts && !isObject(jsonProducts)) {\n      throw new Error('Entitlements must be an Object');\n    }\n    let productsOrSkus = null;\n    if (jsonProducts) {\n      productsOrSkus = JSON.stringify(jsonProducts);\n    }\n    this.propensityServer_.sendSubscriptionState(state, productsOrSkus);\n  }\n\n  /** @override */\n  getPropensity(type) {\n    if (type && !Object.values(PropensityApi.PropensityType).includes(type)) {\n      throw new Error('Invalid propensity type requested');\n    }\n    if (!type) {\n      type = PropensityApi.PropensityType.GENERAL;\n    }\n    return this.propensityServer_.getPropensity(\n      this.win_.document.referrer,\n      type\n    );\n  }\n\n  /** @override */\n  sendEvent(userEvent) {\n    const analyticsEvent = publisherEventToAnalyticsEvent(userEvent.name);\n    let data = null;\n    if (!isEnumValue(Event, userEvent.name) || !analyticsEvent) {\n      throw new Error('Invalid user event provided(' + userEvent.name + ')');\n    }\n\n    if (userEvent.data) {\n      if (!isObject(userEvent.data)) {\n        throw new Error('Event data must be an Object(' + userEvent.data + ')');\n      } else {\n        data = {};\n        Object.assign(data, userEvent.data);\n      }\n    }\n\n    if (isBoolean(userEvent.active)) {\n      if (!data) {\n        data = {};\n      }\n      Object.assign(data, {'is_active': userEvent.active});\n    } else if (userEvent.active != null) {\n      throw new Error('Event active must be a boolean');\n    }\n\n    this.eventManager_.logEvent({\n      eventType: analyticsEvent,\n      eventOriginator: EventOriginator.PROPENSITY_CLIENT,\n      isFromUserAction: userEvent.active,\n      additionalParameters: data,\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AbbrvOfferFlow, OffersFlow, SubscribeOptionFlow} from './offers-flow';\nimport {ActivityPorts} from '../components/activities';\nimport {\n  AnalyticsEvent,\n  EventOriginator,\n  EventParams,\n} from '../proto/api_messages';\nimport {AnalyticsMode} from '../api/subscriptions';\nimport {AnalyticsService} from './analytics-service';\nimport {ButtonApi} from './button-api';\nimport {Callbacks} from './callbacks';\nimport {ClientConfigManager} from './client-config-manager';\nimport {ClientEventManager} from './client-event-manager';\nimport {ContributionsFlow} from './contributions-flow';\nimport {DeferredAccountFlow} from './deferred-account-flow';\nimport {DepsDef} from './deps';\nimport {DialogManager} from '../components/dialog-manager';\nimport {Doc, resolveDoc} from '../model/doc';\nimport {EntitlementsManager} from './entitlements-manager';\nimport {ExperimentFlags} from './experiment-flags';\nimport {Fetcher, XhrFetcher} from './fetcher';\nimport {JsError} from './jserror';\nimport {\n  LinkCompleteFlow,\n  LinkSaveFlow,\n  LinkbackFlow,\n} from './link-accounts-flow';\nimport {Logger} from './logger';\nimport {LoginNotificationApi} from './login-notification-api';\nimport {LoginPromptApi} from './login-prompt-api';\nimport {OffersApi} from './offers-api';\nimport {PageConfig} from '../model/page-config';\nimport {\n  PageConfigResolver,\n  getControlFlag,\n} from '../model/page-config-resolver';\nimport {PayClient} from './pay-client';\nimport {PayCompleteFlow, PayStartFlow} from './pay-flow';\nimport {Preconnect} from '../utils/preconnect';\nimport {\n  ProductType,\n  Subscriptions,\n  WindowOpenMode,\n  defaultConfig,\n} from '../api/subscriptions';\nimport {Propensity} from './propensity';\nimport {CSS as SWG_DIALOG} from '../../build/css/components/dialog.css';\nimport {Storage} from './storage';\nimport {WaitForSubscriptionLookupApi} from './wait-for-subscription-lookup-api';\nimport {assert} from '../utils/log';\nimport {debugLog} from '../utils/log';\nimport {injectStyleSheet, isLegacyEdgeBrowser} from '../utils/dom';\nimport {isBoolean} from '../utils/types';\nimport {isExperimentOn} from './experiments';\nimport {isSecure, wasReferredByGoogle} from '../utils/url';\nimport {parseUrl} from '../utils/url';\nimport {publisherEntitlementEventToAnalyticsEvents} from './event-type-mapping';\nimport {queryStringHasFreshGaaParams} from '../utils/gaa';\nimport {setExperiment} from './experiments';\nimport {warn} from '../utils/log';\n\nconst RUNTIME_PROP = 'SWG';\nconst RUNTIME_LEGACY_PROP = 'SUBSCRIPTIONS'; // MIGRATE\n\n/**\n * Reference to the runtime, for testing.\n * @private {!Runtime}\n */\nlet runtimeInstance_;\n\n/**\n * Returns runtime for testing if available. Throws if the runtime is not\n * initialized yet.\n * @visibleForTesting\n * @return {!Runtime}\n */\nexport function getRuntime() {\n  assert(runtimeInstance_, 'not initialized yet');\n  return runtimeInstance_;\n}\n\n/**\n * Installs SwG runtime.\n * @param {!Window} win\n */\nexport function installRuntime(win) {\n  // Only install the SwG runtime once.\n  if (win[RUNTIME_PROP] && !Array.isArray(win[RUNTIME_PROP])) {\n    return;\n  }\n\n  // Create a SwG runtime.\n  const runtime = new Runtime(win);\n\n  // Create a public version of the SwG runtime.\n  const publicRuntime = createPublicRuntime(runtime);\n\n  /**\n   * Executes a callback when SwG runtime is ready.\n   * @param {function(!Subscriptions)} callback\n   */\n  function callWhenRuntimeIsReady(callback) {\n    if (!callback) {\n      return;\n    }\n\n    runtime.whenReady().then(() => {\n      callback(publicRuntime);\n    });\n  }\n\n  // Queue up any callbacks the publication might have provided.\n  const waitingCallbacks = [].concat(\n    win[RUNTIME_PROP],\n    win[RUNTIME_LEGACY_PROP]\n  );\n  waitingCallbacks.forEach(callWhenRuntimeIsReady);\n\n  // If any more callbacks are `push`ed to the global SwG variables,\n  // they'll be queued up to receive the SwG runtime when it's ready.\n  win[RUNTIME_PROP] = win[RUNTIME_LEGACY_PROP] = {\n    push: callWhenRuntimeIsReady,\n  };\n\n  // Set variable for testing.\n  runtimeInstance_ = runtime;\n\n  // Kick off subscriptions flow.\n  runtime.startSubscriptionsFlowIfNeeded();\n}\n\n/**\n * @implements {Subscriptions}\n */\nexport class Runtime {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(win);\n\n    /** @private @const {!Promise} */\n    this.ready_ = Promise.resolve();\n\n    /** @private {?string} */\n    this.productOrPublicationId_ = null;\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = {};\n\n    /** @private {boolean} */\n    this.committed_ = false;\n\n    /** @private {?function((!ConfiguredRuntime|!Promise))} */\n    this.configuredResolver_ = null;\n\n    /** @private @const {!Promise<!ConfiguredRuntime>} */\n    this.configuredPromise_ = new Promise((resolve) => {\n      this.configuredResolver_ = resolve;\n    });\n\n    /** @private {?PageConfigResolver} */\n    this.pageConfigResolver_ = null;\n\n    /** @private @const {!ButtonApi} */\n    this.buttonApi_ = new ButtonApi(this.doc_, this.configuredPromise_);\n    this.buttonApi_.init(); // Injects swg-button stylesheet.\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.ready_;\n  }\n\n  /**\n   * @param {boolean} commit\n   * @return {!Promise<!ConfiguredRuntime>}\n   * @private\n   */\n  configured_(commit) {\n    if (!this.committed_ && commit) {\n      this.committed_ = true;\n      /** @type {!Promise<!PageConfig>} */\n      let pageConfigPromise;\n      if (this.productOrPublicationId_) {\n        pageConfigPromise = Promise.resolve(\n          new PageConfig(this.productOrPublicationId_, /* locked */ false)\n        );\n      } else {\n        this.pageConfigResolver_ = new PageConfigResolver(this.doc_);\n        pageConfigPromise = this.pageConfigResolver_\n          .resolveConfig()\n          .then((config) => {\n            this.pageConfigResolver_ = null;\n            return config;\n          });\n      }\n      pageConfigPromise.then(\n        (pageConfig) => {\n          this.configuredResolver_(\n            new ConfiguredRuntime(\n              this.doc_,\n              pageConfig,\n              /* integr */ {configPromise: this.configuredPromise_},\n              this.config_\n            )\n          );\n          this.configuredResolver_ = null;\n        },\n        (reason) => {\n          this.configuredResolver_(Promise.reject(reason));\n          this.configuredResolver_ = null;\n        }\n      );\n    } else if (commit && this.pageConfigResolver_) {\n      this.pageConfigResolver_.check();\n    }\n    return this.configuredPromise_;\n  }\n\n  /**\n   * Starts the subscription flow if it hasn't been started and the page is\n   * configured to start it automatically.\n   *\n   * @return {?Promise}\n   * @package\n   */\n  startSubscriptionsFlowIfNeeded() {\n    const control = getControlFlag(this.win_.document);\n    debugLog(control, 'mode');\n    if (control == 'manual') {\n      // \"Skipping automatic start because control flag is set to \"manual\".\n      return null;\n    }\n    return this.start();\n  }\n\n  /** @override */\n  init(productOrPublicationId) {\n    assert(!this.committed_, 'already configured');\n    this.productOrPublicationId_ = productOrPublicationId;\n\n    // Process the page's config.\n    this.configured_(true);\n  }\n\n  /** @override */\n  configure(config) {\n    // Accumulate config for startup.\n    Object.assign(this.config_, config);\n    return this.configured_(false).then((runtime) => runtime.configure(config));\n  }\n\n  /** @override */\n  start() {\n    return this.configured_(true).then((runtime) => runtime.start());\n  }\n\n  /** @override */\n  reset() {\n    return this.configured_(true).then((runtime) => runtime.reset());\n  }\n\n  /** @override */\n  clear() {\n    return this.configured_(true).then((runtime) => runtime.clear());\n  }\n\n  /** @override */\n  getEntitlements(params) {\n    return this.configured_(true).then((runtime) =>\n      runtime.getEntitlements(params)\n    );\n  }\n\n  /** @override */\n  setOnEntitlementsResponse(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnEntitlementsResponse(callback)\n    );\n  }\n\n  /** @override */\n  getOffers(options) {\n    return this.configured_(true).then((runtime) => runtime.getOffers(options));\n  }\n\n  /** @override */\n  showOffers(options) {\n    return this.configured_(true).then((runtime) =>\n      runtime.showOffers(options)\n    );\n  }\n\n  /** @override */\n  showUpdateOffers(options) {\n    return this.configured_(true).then((runtime) =>\n      runtime.showUpdateOffers(options)\n    );\n  }\n\n  /** @override */\n  showSubscribeOption(options) {\n    return this.configured_(true).then((runtime) =>\n      runtime.showSubscribeOption(options)\n    );\n  }\n\n  /** @override */\n  showAbbrvOffer(options) {\n    return this.configured_(true).then((runtime) =>\n      runtime.showAbbrvOffer(options)\n    );\n  }\n\n  /** @override */\n  showContributionOptions(options) {\n    return this.configured_(true).then((runtime) =>\n      runtime.showContributionOptions(options)\n    );\n  }\n\n  /** @override */\n  waitForSubscriptionLookup(accountPromise) {\n    return this.configured_(true).then((runtime) =>\n      runtime.waitForSubscriptionLookup(accountPromise)\n    );\n  }\n\n  /** @override */\n  setOnNativeSubscribeRequest(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnNativeSubscribeRequest(callback)\n    );\n  }\n\n  /** @override */\n  setOnSubscribeResponse(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnSubscribeResponse(callback)\n    );\n  }\n\n  /** @override */\n  subscribe(sku) {\n    return this.configured_(true).then((runtime) => runtime.subscribe(sku));\n  }\n\n  /** @override */\n  updateSubscription(subscriptionRequest) {\n    return this.configured_(true).then((runtime) =>\n      runtime.updateSubscription(subscriptionRequest)\n    );\n  }\n\n  /** @override */\n  setOnContributionResponse(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnContributionResponse(callback)\n    );\n  }\n\n  /** @override */\n  setOnPaymentResponse(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnPaymentResponse(callback)\n    );\n  }\n\n  /** @override */\n  contribute(skuOrSubscriptionRequest) {\n    return this.configured_(true).then((runtime) =>\n      runtime.contribute(skuOrSubscriptionRequest)\n    );\n  }\n\n  /** @override */\n  completeDeferredAccountCreation(options) {\n    return this.configured_(true).then((runtime) =>\n      runtime.completeDeferredAccountCreation(options)\n    );\n  }\n\n  /** @override */\n  setOnLoginRequest(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnLoginRequest(callback)\n    );\n  }\n\n  /** @override */\n  triggerLoginRequest(request) {\n    return this.configured_(false).then((runtime) =>\n      runtime.triggerLoginRequest(request)\n    );\n  }\n\n  /** @override */\n  setOnLinkComplete(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnLinkComplete(callback)\n    );\n  }\n\n  /** @override */\n  linkAccount(params = {}) {\n    return this.configured_(true).then((runtime) =>\n      runtime.linkAccount(params)\n    );\n  }\n\n  /** @override */\n  setOnFlowStarted(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnFlowStarted(callback)\n    );\n  }\n\n  /** @override */\n  setOnFlowCanceled(callback) {\n    return this.configured_(false).then((runtime) =>\n      runtime.setOnFlowCanceled(callback)\n    );\n  }\n\n  /** @override */\n  saveSubscription(saveSubscriptionRequestCallback) {\n    return this.configured_(true).then((runtime) => {\n      return runtime.saveSubscription(saveSubscriptionRequestCallback);\n    });\n  }\n\n  /** @override */\n  showLoginPrompt() {\n    return this.configured_(true).then((runtime) => {\n      return runtime.showLoginPrompt();\n    });\n  }\n\n  /** @override */\n  showLoginNotification() {\n    return this.configured_(true).then((runtime) => {\n      return runtime.showLoginNotification();\n    });\n  }\n\n  /** @override */\n  createButton(optionsOrCallback, callback) {\n    return this.buttonApi_.create(optionsOrCallback, callback);\n  }\n\n  /** @override */\n  attachSmartButton(button, optionsOrCallback, callback) {\n    return this.configured_(true).then((runtime) =>\n      runtime.attachSmartButton(button, optionsOrCallback, callback)\n    );\n  }\n\n  /** @override */\n  attachButton(button, optionsOrCallback, callback) {\n    return this.buttonApi_.attach(button, optionsOrCallback, callback);\n  }\n\n  /** @override */\n  getPropensityModule() {\n    return this.configured_(true).then((runtime) => {\n      return runtime.getPropensityModule();\n    });\n  }\n\n  /** @override */\n  getLogger() {\n    return this.configured_(true).then((runtime) => runtime.getLogger());\n  }\n\n  /** @override */\n  getEventManager() {\n    return this.configured_(true).then((runtime) => runtime.getEventManager());\n  }\n\n  /** @override */\n  setShowcaseEntitlement(entitlement) {\n    return this.configured_(true).then((runtime) =>\n      runtime.setShowcaseEntitlement(entitlement)\n    );\n  }\n\n  /** @override */\n  consumeShowcaseEntitlementJwt(showcaseEntitlementJwt, onCloseDialog) {\n    return this.configured_(true).then((runtime) =>\n      runtime.consumeShowcaseEntitlementJwt(\n        showcaseEntitlementJwt,\n        onCloseDialog\n      )\n    );\n  }\n\n  /** @override */\n  showBestAudienceAction() {\n    warn('Not implemented yet');\n  }\n}\n\n/**\n * @implements {DepsDef}\n * @implements {Subscriptions}\n */\nexport class ConfiguredRuntime {\n  /**\n   * @param {!Window|!Document|!Doc} winOrDoc\n   * @param {!../model/page-config.PageConfig} pageConfig\n   * @param {{\n   *     fetcher: (!Fetcher|undefined),\n   *     configPromise: (!Promise|undefined),\n   *   }=} integr\n   * @param {!../api/subscriptions.Config=} config\n   * @param {!{\n   *   lang: (string|undefined),\n   *   theme: (!../api/basic-subscriptions.ClientTheme|undefined),\n   *   }=} clientOptions\n   */\n  constructor(winOrDoc, pageConfig, integr, config, clientOptions) {\n    integr = integr || {};\n    integr.configPromise = integr.configPromise || Promise.resolve();\n\n    /** @private @const {!ClientEventManager} */\n    this.eventManager_ = new ClientEventManager(integr.configPromise);\n\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(winOrDoc);\n\n    /** @private @const {!Window} */\n    this.win_ = this.doc_.getWin();\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = defaultConfig();\n\n    if (isLegacyEdgeBrowser(this.win_)) {\n      // TODO(dvoytenko, b/120607343): Find a way to remove this restriction\n      // or move it to Web Activities.\n      this.config_.windowOpenMode = WindowOpenMode.REDIRECT;\n    }\n    if (config) {\n      this.configure_(config);\n    }\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = pageConfig;\n\n    /** @private @const {!Promise} */\n    this.documentParsed_ = this.doc_.whenReady();\n\n    /** @private @const {!JsError} */\n    this.jserror_ = new JsError(this.doc_);\n\n    /** @private @const {!Fetcher} */\n    this.fetcher_ = integr.fetcher || new XhrFetcher(this.win_);\n\n    /** @private @const {!Storage} */\n    this.storage_ = new Storage(this.win_);\n\n    /** @private @const {!DialogManager} */\n    this.dialogManager_ = new DialogManager(this.doc_);\n\n    /** @private @const {!Callbacks} */\n    this.callbacks_ = new Callbacks();\n\n    // WARNING: DepsDef ('this') is being progressively defined below.\n    // Constructors will crash if they rely on something that doesn't exist yet.\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = new ActivityPorts(this);\n\n    /** @private @const {!AnalyticsService} */\n    this.analyticsService_ = new AnalyticsService(this, this.fetcher_);\n    this.analyticsService_.start();\n\n    /** @private @const {!PayClient} */\n    this.payClient_ = new PayClient(this);\n\n    /** @private @const {!Logger} */\n    this.logger_ = new Logger(this);\n\n    /** @private @const {!EntitlementsManager} */\n    this.entitlementsManager_ = new EntitlementsManager(\n      this.win_,\n      this.pageConfig_,\n      this.fetcher_,\n      this // See note about 'this' above\n    );\n\n    /** @private @const {!ClientConfigManager} */\n    this.clientConfigManager_ = new ClientConfigManager(\n      pageConfig.getPublicationId(),\n      this.fetcher_,\n      clientOptions\n    );\n\n    /** @private @const {!Propensity} */\n    this.propensityModule_ = new Propensity(\n      this.win_,\n      this, // See note about 'this' above\n      this.fetcher_\n    );\n\n    // ALL CLEAR: DepsDef definition now complete.\n    this.eventManager_.logSwgEvent(AnalyticsEvent.IMPRESSION_PAGE_LOAD, false);\n\n    /** @private @const {!OffersApi} */\n    this.offersApi_ = new OffersApi(this.pageConfig_, this.fetcher_);\n\n    /** @private @const {!ButtonApi} */\n    this.buttonApi_ = new ButtonApi(this.doc_, Promise.resolve(this));\n\n    const preconnect = new Preconnect(this.win_.document);\n\n    preconnect.prefetch('$assets$/loader.svg');\n    preconnect.preconnect('https://www.gstatic.com/');\n    preconnect.preconnect('https://fonts.googleapis.com/');\n    preconnect.preconnect('https://www.google.com/');\n    LinkCompleteFlow.configurePending(this);\n    PayCompleteFlow.configurePending(this);\n\n    injectStyleSheet(this.doc_, SWG_DIALOG);\n\n    // Report redirect errors if any.\n    this.activityPorts_.onRedirectError((error) => {\n      this.analyticsService_.addLabels(['redirect']);\n      this.eventManager_.logSwgEvent(\n        AnalyticsEvent.EVENT_PAYMENT_FAILED,\n        false\n      );\n      this.jserror_.error('Redirect error', error);\n    });\n  }\n\n  /** @override */\n  doc() {\n    return this.doc_;\n  }\n\n  /** @override */\n  win() {\n    return this.win_;\n  }\n\n  /** @override */\n  pageConfig() {\n    return this.pageConfig_;\n  }\n\n  /** @override */\n  jserror() {\n    return this.jserror_;\n  }\n\n  /** @override */\n  activities() {\n    return this.activityPorts_;\n  }\n\n  /** @override */\n  payClient() {\n    return this.payClient_;\n  }\n\n  /** @override */\n  dialogManager() {\n    return this.dialogManager_;\n  }\n\n  /** @override */\n  entitlementsManager() {\n    return this.entitlementsManager_;\n  }\n\n  /** @override */\n  callbacks() {\n    return this.callbacks_;\n  }\n\n  /** @override */\n  storage() {\n    return this.storage_;\n  }\n\n  /** @override */\n  clientConfigManager() {\n    return this.clientConfigManager_;\n  }\n\n  /** @override */\n  analytics() {\n    return this.analyticsService_;\n  }\n\n  /** @override */\n  init() {\n    // Implemented by the `Runtime` class.\n  }\n\n  /** @override */\n  configure(config) {\n    // Indirected for constructor testing.\n    this.configure_(config);\n  }\n\n  /**\n   * @param {!../api/subscriptions.Config} config\n   * @private\n   */\n  configure_(config) {\n    // Validate first.\n    let error = '';\n    for (const k in config) {\n      const v = config[k];\n      switch (k) {\n        case 'windowOpenMode':\n          if (v != WindowOpenMode.AUTO && v != WindowOpenMode.REDIRECT) {\n            error = 'Unknown windowOpenMode: ' + v;\n          }\n          break;\n        case 'experiments':\n          v.forEach((experiment) => setExperiment(this.win_, experiment, true));\n          if (this.analytics()) {\n            // If analytics service isn't set up yet, then it will get the\n            // experiments later.\n            this.analytics().addLabels(v);\n          }\n          break;\n        case 'analyticsMode':\n          if (v != AnalyticsMode.DEFAULT && v != AnalyticsMode.IMPRESSIONS) {\n            error = 'Unknown analytics mode: ' + v;\n          }\n          break;\n        case 'enableSwgAnalytics':\n          if (!isBoolean(v)) {\n            error = 'Unknown enableSwgAnalytics value: ' + v;\n          }\n          break;\n        case 'enablePropensity':\n          if (!isBoolean(v)) {\n            error = 'Unknown enablePropensity value: ' + v;\n          }\n          break;\n        default:\n          error = 'Unknown config property: ' + k;\n      }\n    }\n    // Throw error string if it's not null\n    assert(!error, error || undefined);\n    // Assign.\n    Object.assign(this.config_, config);\n  }\n\n  /** @override */\n  config() {\n    return this.config_;\n  }\n\n  /** @override */\n  reset() {\n    this.entitlementsManager_.reset();\n    this.dialogManager_.completeAll();\n  }\n\n  /** @override */\n  clear() {\n    this.entitlementsManager_.clear();\n    this.dialogManager_.completeAll();\n  }\n\n  /** @override */\n  start() {\n    // No need to run entitlements without a product or for an unlocked page.\n    if (!this.pageConfig_.getProductId() || !this.pageConfig_.isLocked()) {\n      return Promise.resolve();\n    }\n    this.getEntitlements();\n  }\n\n  /** @override */\n  getEntitlements(params) {\n    return this.entitlementsManager_\n      .getEntitlements(params)\n      .then((entitlements) => {\n        // Auto update internal things tracking the user's current SKU.\n        if (entitlements) {\n          try {\n            const skus = entitlements.entitlements.map(\n              (entitlement) =>\n                entitlement.getSku() || 'unknown subscriptionToken'\n            );\n            if (skus.length > 0) {\n              this.analyticsService_.setSku(skus.join(','));\n            }\n          } catch (ex) {}\n        }\n        return entitlements.clone();\n      });\n  }\n\n  /** @override */\n  setOnEntitlementsResponse(callback) {\n    this.callbacks_.setOnEntitlementsResponse(callback);\n  }\n\n  /** @override */\n  getOffers(options) {\n    return this.offersApi_.getOffers(options && options.productId);\n  }\n\n  /** @override */\n  showOffers(options) {\n    return this.documentParsed_.then(() => {\n      const errorMessage =\n        'The showOffers() method cannot be used to update a subscription. ' +\n        'Use the showUpdateOffers() method instead.';\n      assert(options ? !options['oldSku'] : true, errorMessage);\n      const flow = new OffersFlow(this, options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showUpdateOffers(options) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.REPLACE_SUBSCRIPTION),\n      'Not yet launched!'\n    );\n    return this.documentParsed_.then(() => {\n      const errorMessage =\n        'The showUpdateOffers() method cannot be used for new subscribers. ' +\n        'Use the showOffers() method instead.';\n      assert(options ? !!options['oldSku'] : false, errorMessage);\n      const flow = new OffersFlow(this, options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showSubscribeOption(options) {\n    return this.documentParsed_.then(() => {\n      const flow = new SubscribeOptionFlow(this, options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showAbbrvOffer(options) {\n    return this.documentParsed_.then(() => {\n      const flow = new AbbrvOfferFlow(this, options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showContributionOptions(options) {\n    return this.documentParsed_.then(() => {\n      const flow = new ContributionsFlow(this, options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  waitForSubscriptionLookup(accountPromise) {\n    return this.documentParsed_.then(() => {\n      const wait = new WaitForSubscriptionLookupApi(this, accountPromise);\n      return wait.start();\n    });\n  }\n\n  /** @override */\n  setOnLoginRequest(callback) {\n    this.callbacks_.setOnLoginRequest(callback);\n  }\n\n  /** @override */\n  triggerLoginRequest(request) {\n    this.callbacks_.triggerLoginRequest(request);\n  }\n\n  /** @override */\n  setOnLinkComplete(callback) {\n    this.callbacks_.setOnLinkComplete(callback);\n  }\n\n  /** @override */\n  linkAccount(params = {}) {\n    return this.documentParsed_.then(() => {\n      return new LinkbackFlow(this).start(params);\n    });\n  }\n\n  /** @override */\n  saveSubscription(saveSubscriptionRequestCallback) {\n    return this.documentParsed_.then(() => {\n      return new LinkSaveFlow(this, saveSubscriptionRequestCallback).start();\n    });\n  }\n\n  /** @override */\n  showLoginPrompt() {\n    return this.documentParsed_.then(() => {\n      return new LoginPromptApi(this).start();\n    });\n  }\n\n  /** @override */\n  showLoginNotification() {\n    return this.documentParsed_.then(() => {\n      return new LoginNotificationApi(this).start();\n    });\n  }\n\n  /** @override */\n  setOnNativeSubscribeRequest(callback) {\n    this.callbacks_.setOnSubscribeRequest(callback);\n  }\n\n  /** @override */\n  setOnSubscribeResponse(callback) {\n    this.callbacks_.setOnSubscribeResponse(callback);\n  }\n\n  /** @override */\n  setOnPaymentResponse(callback) {\n    this.callbacks_.setOnPaymentResponse(callback);\n  }\n\n  /** @override */\n  subscribe(sku) {\n    const errorMessage =\n      'The subscribe() method can only take a sku as its parameter; ' +\n      'for subscription updates please use the updateSubscription() method';\n    assert(typeof sku === 'string', errorMessage);\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(this, {'skuId': sku}).start();\n    });\n  }\n\n  /** @override */\n  updateSubscription(subscriptionRequest) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.REPLACE_SUBSCRIPTION),\n      'Not yet launched!'\n    );\n    const errorMessage =\n      'The updateSubscription() method should be used for subscription ' +\n      'updates; for new subscriptions please use the subscribe() method';\n    assert(\n      subscriptionRequest ? subscriptionRequest['oldSku'] : false,\n      errorMessage\n    );\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(this, subscriptionRequest).start();\n    });\n  }\n\n  /** @override */\n  setOnContributionResponse(callback) {\n    this.callbacks_.setOnContributionResponse(callback);\n  }\n\n  /** @override */\n  contribute(skuOrSubscriptionRequest) {\n    /** @type {!../api/subscriptions.SubscriptionRequest} */\n    const request =\n      typeof skuOrSubscriptionRequest == 'string'\n        ? {'skuId': skuOrSubscriptionRequest}\n        : skuOrSubscriptionRequest;\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(\n        this,\n        request,\n        ProductType.UI_CONTRIBUTION\n      ).start();\n    });\n  }\n\n  /** @override */\n  completeDeferredAccountCreation(options) {\n    return this.documentParsed_.then(() => {\n      return new DeferredAccountFlow(this, options || null).start();\n    });\n  }\n\n  /** @override */\n  setOnFlowStarted(callback) {\n    this.callbacks_.setOnFlowStarted(callback);\n  }\n\n  /** @override */\n  setOnFlowCanceled(callback) {\n    this.callbacks_.setOnFlowCanceled(callback);\n  }\n\n  /** @override */\n  createButton(optionsOrCallback, callback) {\n    // This is a minor duplication to allow this code to be sync.\n    return this.buttonApi_.create(optionsOrCallback, callback);\n  }\n\n  /** @override */\n  attachButton(button, optionsOrCallback, callback) {\n    // This is a minor duplication to allow this code to be sync.\n    this.buttonApi_.attach(button, optionsOrCallback, callback);\n  }\n\n  /** @override */\n  attachSmartButton(button, optionsOrCallback, callback) {\n    assert(\n      isExperimentOn(this.win_, ExperimentFlags.SMARTBOX),\n      'Not yet launched!'\n    );\n    this.buttonApi_.attachSmartButton(\n      this,\n      button,\n      optionsOrCallback,\n      callback\n    );\n  }\n\n  /** @override */\n  getPropensityModule() {\n    return Promise.resolve(this.propensityModule_);\n  }\n\n  /**\n   * This one exists as an internal helper so SwG logging doesn't require a promise.\n   * @return {!ClientEventManager}\n   */\n  eventManager() {\n    return this.eventManager_;\n  }\n\n  /**\n   * This one exists as a public API so publishers can subscribe to SwG events.\n   * @override */\n  getEventManager() {\n    return Promise.resolve(this.eventManager_);\n  }\n\n  /** @override */\n  getLogger() {\n    return Promise.resolve(this.logger_);\n  }\n\n  /** @override */\n  setShowcaseEntitlement(entitlement) {\n    if (\n      !entitlement ||\n      !isSecure(this.win().location) ||\n      !wasReferredByGoogle(parseUrl(this.win().document.referrer)) ||\n      !queryStringHasFreshGaaParams(this.win().location.search)\n    ) {\n      return Promise.resolve();\n    }\n\n    const eventsToLog =\n      publisherEntitlementEventToAnalyticsEvents(entitlement.entitlement) || [];\n    const params = new EventParams();\n    params.setIsUserRegistered(entitlement.isUserRegistered);\n\n    for (let i = 0; i < eventsToLog.length; i++) {\n      this.eventManager().logEvent({\n        eventType: eventsToLog[i],\n        eventOriginator: EventOriginator.SHOWCASE_CLIENT,\n        isFromUserAction: false,\n        additionalParameters: params,\n      });\n    }\n\n    return Promise.resolve();\n  }\n\n  /** @override */\n  consumeShowcaseEntitlementJwt(showcaseEntitlementJwt, onCloseDialog) {\n    const entitlements = this.entitlementsManager().parseEntitlements({\n      signedEntitlements: showcaseEntitlementJwt,\n    });\n    entitlements.consume(onCloseDialog);\n  }\n\n  /** @override */\n  showBestAudienceAction() {\n    warn('Not implemented yet');\n  }\n}\n\n/**\n * @param {!Runtime} runtime\n * @return {!Subscriptions}\n */\nfunction createPublicRuntime(runtime) {\n  return /** @type {!Subscriptions} */ ({\n    init: runtime.init.bind(runtime),\n    configure: runtime.configure.bind(runtime),\n    start: runtime.start.bind(runtime),\n    reset: runtime.reset.bind(runtime),\n    clear: runtime.clear.bind(runtime),\n    getEntitlements: runtime.getEntitlements.bind(runtime),\n    linkAccount: runtime.linkAccount.bind(runtime),\n    showLoginPrompt: runtime.showLoginPrompt.bind(runtime),\n    showLoginNotification: runtime.showLoginNotification.bind(runtime),\n    getOffers: runtime.getOffers.bind(runtime),\n    showOffers: runtime.showOffers.bind(runtime),\n    showUpdateOffers: runtime.showUpdateOffers.bind(runtime),\n    showAbbrvOffer: runtime.showAbbrvOffer.bind(runtime),\n    showSubscribeOption: runtime.showSubscribeOption.bind(runtime),\n    showContributionOptions: runtime.showContributionOptions.bind(runtime),\n    waitForSubscriptionLookup: runtime.waitForSubscriptionLookup.bind(runtime),\n    subscribe: runtime.subscribe.bind(runtime),\n    updateSubscription: runtime.updateSubscription.bind(runtime),\n    contribute: runtime.contribute.bind(runtime),\n    completeDeferredAccountCreation: runtime.completeDeferredAccountCreation.bind(\n      runtime\n    ),\n    setOnEntitlementsResponse: runtime.setOnEntitlementsResponse.bind(runtime),\n    setOnLoginRequest: runtime.setOnLoginRequest.bind(runtime),\n    triggerLoginRequest: runtime.triggerLoginRequest.bind(runtime),\n    setOnLinkComplete: runtime.setOnLinkComplete.bind(runtime),\n    setOnNativeSubscribeRequest: runtime.setOnNativeSubscribeRequest.bind(\n      runtime\n    ),\n    setOnPaymentResponse: runtime.setOnPaymentResponse.bind(runtime),\n    setOnSubscribeResponse: runtime.setOnSubscribeResponse.bind(runtime),\n    setOnContributionResponse: runtime.setOnContributionResponse.bind(runtime),\n    setOnFlowStarted: runtime.setOnFlowStarted.bind(runtime),\n    setOnFlowCanceled: runtime.setOnFlowCanceled.bind(runtime),\n    saveSubscription: runtime.saveSubscription.bind(runtime),\n    createButton: runtime.createButton.bind(runtime),\n    attachButton: runtime.attachButton.bind(runtime),\n    attachSmartButton: runtime.attachSmartButton.bind(runtime),\n    getPropensityModule: runtime.getPropensityModule.bind(runtime),\n    getLogger: runtime.getLogger.bind(runtime),\n    getEventManager: runtime.getEventManager.bind(runtime),\n    setShowcaseEntitlement: runtime.setShowcaseEntitlement.bind(runtime),\n    consumeShowcaseEntitlementJwt: runtime.consumeShowcaseEntitlementJwt.bind(\n      runtime\n    ),\n    showBestAudienceAction: runtime.showBestAudienceAction.bind(runtime),\n  });\n}\n\n/**\n * @protected\n */\nexport function getSubscriptionsClassForTesting() {\n  return Subscriptions;\n}\n\n/**\n * @protected\n */\nexport function getFetcherClassForTesting() {\n  return Fetcher;\n}\n\n/** @package Visible for testing only. */\nexport function getDocClassForTesting() {\n  return Doc;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {addQueryParam, parseQueryString, parseUrl} from '../utils/url';\n\n/**\n * Have to put these in the map to avoid compiler optimization. Due to\n * optimization issues, this map only allows property-style keys. E.g. \"hr1\",\n * as opposed to \"1hr\".\n * @type {!Object<string, number>}\n * @package Visible for testing only.\n */\nexport const CACHE_KEYS = {\n  'nocache': 1,\n  'hr1': 3600000, // 1hr = 1000 * 60 * 60\n  'hr12': 43200000, // 12hr = 1000 * 60 * 60 * 12\n};\n\n/**\n * @return {string}\n */\nexport function feOrigin() {\n  return parseUrl('$frontend$').origin;\n}\n\n/**\n * @param {string} url Relative URL, e.g. \"/service1\".\n * @return {string} The complete URL.\n */\nexport function serviceUrl(url) {\n  return '$frontend$/swg/_/api/v1' + url;\n}\n\n/**\n * @param {string} url  Relative URL, e.g. \"/service1\".\n * @return {string} The complete URL.\n */\nexport function adsUrl(url) {\n  return '$adsServer$' + url;\n}\n\n/**\n * @param {string} url Relative URL, e.g. \"/offersiframe\".\n * @param {string=} prefix\n * @param {Object<string, string>=} params List of extra params to append to the URL.\n * @return {string} The complete URL.\n */\nexport function feUrl(url, prefix = '', params) {\n  // Add cache param.\n  url = feCached('$frontend$' + prefix + '/swg/_/ui/v1' + url);\n\n  // Optionally add jsmode param. This allows us to test against \"aggressively\" compiled Boq JS.\n  const query = parseQueryString(self.location.hash);\n  const boqJsMode = query['swg.boqjsmode'];\n  if (boqJsMode !== undefined) {\n    url = addQueryParam(url, 'jsmode', boqJsMode);\n  }\n\n  for (const param in params) {\n    url = addQueryParam(url, param, params[param]);\n  }\n\n  return url;\n}\n\n/**\n * @param {string} url FE URL.\n * @return {string} The complete URL including cache param.\n */\nexport function feCached(url) {\n  return addQueryParam(url, '_', cacheParam('$frontendCache$'));\n}\n\n/**\n * @param {!Object<string, ?>} args\n * @return {!Object<string, ?>}\n */\nexport function feArgs(args) {\n  return Object.assign(args, {\n    '_client': 'SwG $internalRuntimeVersion$',\n  });\n}\n\n/**\n * @param {string} cacheKey\n * @return {string}\n * @package Visible for testing only.\n */\nexport function cacheParam(cacheKey) {\n  let period = CACHE_KEYS[cacheKey];\n  if (period == null) {\n    period = 1;\n  }\n  if (period === 0) {\n    return '_';\n  }\n  const now = Date.now();\n  return String(period <= 1 ? now : Math.floor(now / period));\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {SmartBoxMessage} from '../proto/api_messages';\nimport {createElement} from '../utils/dom';\nimport {feArgs, feUrl} from './services';\nimport {setImportantStyles} from '../utils/style';\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n};\n\n/**\n * @enum {string}\n */\nexport const Theme = {\n  LIGHT: 'light',\n  DARK: 'dark',\n};\n\n/**\n * The class for Smart button Api.\n */\nexport class SmartSubscriptionButtonApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!Element} button\n   * @param {!../api/subscriptions.SmartButtonOptions} options\n   * @param {function(!Event=)=} callback\n   */\n  constructor(deps, button, options, callback) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!Document} */\n    this.doc_ = this.win_.document;\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_,\n      'iframe',\n      iframeAttributes\n    ));\n\n    /** @private @const {!Element} */\n    this.button_ = button;\n\n    /** @private {!../api/subscriptions.SmartButtonOptions} */\n    this.options_ = options;\n\n    /** @private @const */\n    this.callback_ = callback;\n\n    /** @private @const {string} */\n    this.src_ = feUrl('/smartboxiframe');\n\n    const frontendArguments = {\n      'productId': this.deps_.pageConfig().getProductId(),\n      'publicationId': this.deps_.pageConfig().getPublicationId(),\n      'theme': (this.options_ && this.options_.theme) || 'light',\n      'lang': (this.options_ && this.options_.lang) || 'en',\n    };\n    const messageTextColor = this.options_ && this.options_.messageTextColor;\n    if (messageTextColor) {\n      frontendArguments['messageTextColor'] = messageTextColor;\n    }\n\n    /** @private @const {!Object} */\n    this.args_ = feArgs(frontendArguments);\n  }\n\n  /**\n   * @param {SmartBoxMessage} smartBoxMessage\n   */\n  handleSmartBoxClick_(smartBoxMessage) {\n    if (smartBoxMessage && smartBoxMessage.getIsClicked()) {\n      if (!this.callback_) {\n        throw new Error('No callback!');\n      }\n      this.callback_();\n\n      return;\n    }\n  }\n\n  /**\n   * Make a call to build button content and listens for the 'click' message.\n   * @return {!Element}\n   */\n  start() {\n    setImportantStyles(this.iframe_, {\n      'opacity': 1,\n      'position': 'absolute',\n      'top': 0,\n      'bottom': 0,\n      'left': 0,\n      'height': '100%',\n      'right': 0,\n      'width': '100%',\n    });\n    this.button_.appendChild(this.iframe_);\n    const args = this.activityPorts_.addDefaultArguments(this.args_);\n    this.activityPorts_\n      .openIframe(this.iframe_, this.src_, args)\n      .then((port) => {\n        port.on(SmartBoxMessage, this.handleSmartBoxClick_.bind(this));\n      });\n    return this.iframe_;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst PREFIX = 'subscribe.google.com';\n\n/**\n * This class is responsible for the storage of data in session storage. If\n * you're looking to store data in local storage, see\n * src/runtime/local-storage.LocalStorage.\n */\nexport class Storage {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Object<string, !Promise<?string>>} */\n    this.values_ = {};\n  }\n\n  /**\n   * @param {string} key\n   * @param {boolean=} useLocalStorage\n   * @return {!Promise<?string>}\n   */\n  get(key, useLocalStorage = false) {\n    if (!this.values_[key]) {\n      this.values_[key] = new Promise((resolve) => {\n        const storage = useLocalStorage\n          ? this.win_.localStorage\n          : this.win_.sessionStorage;\n        if (storage) {\n          try {\n            resolve(storage.getItem(storageKey(key)));\n          } catch (e) {\n            // Ignore error.\n            resolve(null);\n          }\n        } else {\n          resolve(null);\n        }\n      });\n    }\n    return this.values_[key];\n  }\n\n  /**\n   * @param {string} key\n   * @param {string} value\n   * @param {boolean=} useLocalStorage\n   * @return {!Promise}\n   */\n  set(key, value, useLocalStorage = false) {\n    this.values_[key] = Promise.resolve(value);\n    return new Promise((resolve) => {\n      const storage = useLocalStorage\n        ? this.win_.localStorage\n        : this.win_.sessionStorage;\n      if (storage) {\n        try {\n          storage.setItem(storageKey(key), value);\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n      resolve();\n    });\n  }\n\n  /**\n   * @param {string} key\n   * @param {boolean=} useLocalStorage\n   * @return {!Promise}\n   */\n  remove(key, useLocalStorage = false) {\n    delete this.values_[key];\n    return new Promise((resolve) => {\n      const storage = useLocalStorage\n        ? this.win_.localStorage\n        : this.win_.sessionStorage;\n      if (storage) {\n        try {\n          storage.removeItem(storageKey(key));\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n      resolve();\n    });\n  }\n}\n\n/**\n * @param {string} key\n * @return {string}\n */\nfunction storageKey(key) {\n  return PREFIX + ':' + key;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActivityIframeView} from '../ui/activity-iframe-view';\nimport {DeferredAccountCreationResponse} from '../api/deferred-account-creation';\nimport {feArgs, feUrl} from './services';\n\nconst NO_PROMISE_ERR = 'No account promise provided';\n\nexport class WaitForSubscriptionLookupApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?Promise} accountPromise\n   */\n  constructor(deps, accountPromise) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private {!Promise} */\n    this.accountPromise_ = accountPromise || Promise.reject(NO_PROMISE_ERR);\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n      this.win_,\n      this.activityPorts_,\n      feUrl('/waitforsubscriptionlookupiframe'),\n      feArgs({\n        publicationId: deps.pageConfig().getPublicationId(),\n        productId: deps.pageConfig().getProductId(),\n      }),\n      /* shouldFadeBody */ true,\n      /* hasLoadingIndicator */ true\n    );\n  }\n\n  /**\n   * Starts the Login Flow.\n   * @return {!Promise}\n   */\n  start() {\n    this.openViewPromise_ = this.dialogManager_.openView(\n      this.activityIframeView_\n    );\n\n    return this.accountPromise_.then(\n      (account) => {\n        // Account was found.\n        this.dialogManager_.completeView(this.activityIframeView_);\n        return account;\n      },\n      (reason) => {\n        this.dialogManager_.completeView(this.activityIframeView_);\n        throw reason;\n      }\n    );\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Message} from '../proto/api_messages'; // eslint-disable-line no-unused-vars\nimport {View} from '../components/view';\nimport {acceptPortResultData} from '../utils/activity-utils';\nimport {createElement} from '../utils/dom';\nimport {isCancelError} from '../utils/errors';\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n};\n\n/**\n * Class to build and render Activity iframe view.\n */\nexport class ActivityIframeView extends View {\n  /**\n   * @param {!Window} win\n   * @param {!../components/activities.ActivityPorts} activityPorts\n   * @param {string} src\n   * @param {!Object<string, ?>=} args\n   * @param {boolean=} shouldFadeBody\n   * @param {boolean=} hasLoadingIndicator\n   */\n  constructor(\n    win,\n    activityPorts,\n    src,\n    args,\n    shouldFadeBody = false,\n    hasLoadingIndicator = false\n  ) {\n    super();\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Document} */\n    this.doc_ = this.win_.document;\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_,\n      'iframe',\n      iframeAttributes\n    ));\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = activityPorts;\n\n    /** @private @const {string} */\n    this.src_ = src;\n\n    /** @private @const {!Object<string, ?>} */\n    this.args_ = args || {};\n\n    /** @private @const {boolean} */\n    this.shouldFadeBody_ = shouldFadeBody;\n\n    /** @private @const {boolean} */\n    this.hasLoadingIndicator_ = hasLoadingIndicator;\n\n    /** @private {?../components/activities.ActivityIframePort} */\n    this.port_ = null;\n\n    /**\n     * @private\n     * {?function<!web-activities/activity-ports.ActivityIframePort|!Promise>}\n     */\n    this.portResolver_ = null;\n\n    /**\n     * @private @const\n     * {!Promise<!web-activities/activity-ports.ActivityIframePort>}\n     */\n    this.portPromise_ = new Promise((resolve) => {\n      this.portResolver_ = resolve;\n    });\n  }\n\n  /** @override */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /** @override */\n  init(dialog) {\n    return this.activityPorts_\n      .openIframe(this.iframe_, this.src_, this.args_)\n      .then((port) => this.onOpenIframeResponse_(port, dialog));\n  }\n\n  /**\n   * Returns if document should fade for this view.\n   * @return {boolean}\n   */\n  shouldFadeBody() {\n    return this.shouldFadeBody_;\n  }\n\n  /**\n   * Returns if the view shows loading indicator.\n   * @return {boolean}\n   */\n  hasLoadingIndicator() {\n    return this.hasLoadingIndicator_;\n  }\n\n  /**\n   * @param {!../components/activities.ActivityIframePort} port\n   * @param {!../components/dialog.Dialog} dialog\n   * @return {!Promise}\n   */\n  onOpenIframeResponse_(port, dialog) {\n    this.port_ = port;\n    this.portResolver_(port);\n\n    this.port_.onResizeRequest((height) => {\n      dialog.resizeView(this, height);\n    });\n\n    return this.port_.whenReady();\n  }\n\n  /**\n   * @return {!Promise<!../components/activities.ActivityIframePort>}\n   * @private\n   */\n  getPortPromise_() {\n    return this.portPromise_;\n  }\n\n  /**\n   * @param {!function(new: T)}  message\n   * @param {function(?)} callback\n   * @template T\n   */\n  on(message, callback) {\n    this.getPortPromise_().then((port) => {\n      port.on(message, callback);\n    });\n  }\n\n  /**\n   * @param {!../proto/api_messages.Message} request\n   */\n  execute(request) {\n    this.getPortPromise_().then((port) => {\n      port.execute(request);\n    });\n  }\n\n  /**\n   * Accepts results from the caller.\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {\n    return this.getPortPromise_().then((port) => port.acceptResult());\n  }\n\n  /**\n   * Accepts results from the caller and verifies origin.\n   * @param {string} requireOrigin\n   * @param {boolean} requireOriginVerified\n   * @param {boolean} requireSecureChannel\n   * @return {!Promise<!Object>}\n   */\n  acceptResultAndVerify(\n    requireOrigin,\n    requireOriginVerified,\n    requireSecureChannel\n  ) {\n    return this.getPortPromise_().then((port) => {\n      return acceptPortResultData(\n        port,\n        requireOrigin,\n        requireOriginVerified,\n        requireSecureChannel\n      );\n    });\n  }\n\n  /**\n   * Completes the flow.\n   * @return {!Promise}\n   */\n  whenComplete() {\n    return this.acceptResult();\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  onCancel(callback) {\n    this.acceptResult().catch((reason) => {\n      if (isCancelError(reason)) {\n        callback();\n      }\n      throw reason;\n    });\n  }\n\n  /** @override */\n  resized() {\n    if (this.port_) {\n      this.port_.resized();\n    }\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from '../utils/dom';\n\n/**\n * Loading indicator class. Builds the loading indicator view to be injected in\n * parent element <iframe class=\"swg-dialog\"> element. Provides methods to\n * show/hide loading indicator.\n */\nexport class LoadingView {\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.loadingContainer_ = createElement(\n      this.doc_,\n      'swg-loading-container',\n      {}\n    );\n\n    /** @private @const {!Element} */\n    this.loading_ = createElement(this.doc_, 'swg-loading', {});\n    this.loadingContainer_.appendChild(this.loading_);\n\n    this.loadingContainer_.style.setProperty('display', 'none', 'important');\n\n    // Build the animated loading indicator.\n    this.buildLoadingIndicator_();\n  }\n\n  /**\n   * Gets the populated loading container.\n   * @return {!Element}\n   */\n  getElement() {\n    return this.loadingContainer_;\n  }\n\n  /**\n   * Shows the loading indicator within the container element.\n   */\n  show() {\n    this.loadingContainer_.style.removeProperty('display');\n  }\n\n  /**\n   * Hides the loading indicator within the container element.\n   */\n  hide() {\n    this.loadingContainer_.style.setProperty('display', 'none', 'important');\n  }\n\n  /**\n   * Populates the loading indivicator. The populated element\n   * can be added in any view, when required.\n   * @private\n   */\n  buildLoadingIndicator_() {\n    const loadingContainer = this.loading_;\n\n    const loadingIndicatorTopContainer = createElement(\n      this.doc_,\n      'swg-loading-animate',\n      {}\n    );\n    loadingContainer.appendChild(loadingIndicatorTopContainer);\n\n    const loadingIndicatorChildContainer = createElement(\n      this.doc_,\n      'swg-loading-image',\n      {}\n    );\n    loadingIndicatorTopContainer.appendChild(loadingIndicatorChildContainer);\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from '../utils/dom';\nimport {resetStyles, setImportantStyles} from '../utils/style';\nimport {transition} from '../utils/animation';\n\n/** @const {!Object<string, string|number>} */\nexport const toastImportantStyles = {\n  'height': 0,\n};\n\n/** @typedef {{\n *    text: string,\n *    action: ({label: string, handler: function()}|undefined)\n *  }}\n */\nexport let ToastSpecDef;\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n  'class': 'swg-toast',\n};\n\n/**\n * The class Notification toast.\n */\nexport class Toast {\n  /**\n   * @param {!../runtime/deps.DepsDef} deps\n   * @param {string} src\n   * @param {!Object<string, ?>} args\n   */\n  constructor(deps, src, args) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = deps.doc();\n\n    /** @private @const {!../components/activities.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {string} */\n    this.src_ = src;\n\n    /** @private @const {!Object<string, ?>} */\n    this.args_ = args;\n\n    /** @private {?Promise} */\n    this.animating_ = null;\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = /** @type {!HTMLIFrameElement} */ (createElement(\n      this.doc_.getWin().document,\n      'iframe',\n      iframeAttributes\n    ));\n\n    setImportantStyles(this.iframe_, toastImportantStyles);\n\n    /** @private @const {!Promise} */\n    this.ready_ = new Promise((resolve) => {\n      this.iframe_.onload = resolve;\n    });\n  }\n\n  /**\n   * Returns the iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * Opens the notification toast.\n   * @return {!Promise}\n   */\n  open() {\n    this.doc_.getBody().appendChild(this.iframe_); // Fires onload.\n    return this.buildToast_();\n  }\n\n  /**\n   * Builds the content of the iframe. On load, animates the toast.\n   */\n  buildToast_() {\n    const toastDurationSeconds = 7;\n    return this.activityPorts_\n      .openIframe(this.iframe_, this.src_, this.args_)\n      .then((port) => {\n        return port.whenReady();\n      })\n      .then(() => {\n        resetStyles(this.iframe_, ['height']);\n\n        this.animate_(() => {\n          setImportantStyles(this.iframe_, {\n            'transform': 'translateY(100%)',\n            'opactiy': 1,\n            'visibility': 'visible',\n          });\n          return transition(\n            this.iframe_,\n            {\n              'transform': 'translateY(0)',\n              'opacity': 1,\n              'visibility': 'visible',\n            },\n            400,\n            'ease-out'\n          );\n        });\n\n        // Close the Toast after the specified duration.\n        this.doc_.getWin().setTimeout(() => {\n          this.close();\n        }, (toastDurationSeconds + 1) * 1000);\n      });\n  }\n\n  /**\n   * @param {function():!Promise} callback\n   * @return {!Promise}\n   * @private\n   */\n  animate_(callback) {\n    const wait = this.animating_ || Promise.resolve();\n    return (this.animating_ = wait\n      .then(\n        () => {\n          return callback();\n        },\n        () => {\n          // Ignore errors to make sure animations don't get stuck.\n        }\n      )\n      .then(() => {\n        this.animating_ = null;\n      }));\n  }\n\n  /**\n   * Closes the toast.\n   * @return {!Promise}\n   */\n  close() {\n    return this.animate_(() => {\n      // Remove the toast from the DOM after animation is complete.\n      this.doc_.getWin().setTimeout(() => {\n        this.doc_.getBody().removeChild(this.iframe_);\n        return Promise.resolve();\n      }, 500);\n\n      return transition(\n        this.iframe_,\n        {\n          'transform': 'translateY(100%)',\n          'opacity': 1,\n          'visibility': 'visible',\n        },\n        400,\n        'ease-out'\n      );\n    });\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {!../components/activities.ActivityPortDef} port\n * @param {string} requireOrigin\n * @param {boolean} requireOriginVerified\n * @param {boolean} requireSecureChannel\n * @return {!Promise<!Object>}\n */\nexport function acceptPortResultData(\n  port,\n  requireOrigin,\n  requireOriginVerified,\n  requireSecureChannel\n) {\n  return port.acceptResult().then((result) => {\n    if (\n      result.origin != requireOrigin ||\n      (requireOriginVerified && !result.originVerified) ||\n      (requireSecureChannel && !result.secureChannel)\n    ) {\n      throw new Error('channel mismatch');\n    }\n    return result.data;\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {setImportantStyles} from './style';\n\n/**\n * Returns a promise which is resolved after the given duration of animation\n * @param {!Element} el - Element to be observed.\n * @param {!Object<string, string|number>} props - properties to be animated.\n * @param {number} durationMillis - duration of animation.\n * @param {string} curve - transition function for the animation.\n * @return {!Promise} Promise which resolves once the animation is done playing.\n */\nexport function transition(el, props, durationMillis, curve) {\n  const win = el.ownerDocument.defaultView;\n  const previousTransitionValue = el.style.transition || '';\n  return new Promise((resolve) => {\n    win.setTimeout(() => {\n      win.setTimeout(resolve, durationMillis);\n      const tr = `${durationMillis}ms ${curve}`;\n      setImportantStyles(\n        el,\n        Object.assign(\n          {\n            'transition': `transform ${tr}, opacity ${tr}`,\n          },\n          props\n        )\n      );\n    });\n  }).then(() => {\n    setImportantStyles(el, {\n      'transition': previousTransitionValue,\n    });\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './log';\n\n/**\n * Character mapping from base64url to base64.\n * @const {!Object<string, string>}\n */\nconst base64UrlDecodeSubs = {'-': '+', '_': '/'};\n\n/**\n * Character mapping from base64 to base64url.\n * @const {!Object<string, string>}\n */\nconst base64UrlEncodeSubs = {'+': '-', '/': '_', '=': ''};\n\n/**\n * Converts a string which holds 8-bit code points, such as the result of atob,\n * into a Uint8Array with the corresponding bytes.\n * If you have a string of characters, you probably want to be using utf8Encode.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function stringToBytes(str) {\n  const bytes = new Uint8Array(str.length);\n  for (let i = 0; i < str.length; i++) {\n    const charCode = str.charCodeAt(i);\n    assert(charCode <= 255, 'Characters must be in range [0,255]');\n    bytes[i] = charCode;\n  }\n  return bytes;\n}\n\n/**\n * Converts a 8-bit bytes array into a string\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function bytesToString(bytes) {\n  // Intentionally avoids String.fromCharCode.apply so we don't suffer a\n  // stack overflow. #10495, https://jsperf.com/bytesToString-2\n  const array = new Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = String.fromCharCode(bytes[i]);\n  }\n  return array.join('');\n}\n\n/**\n * Interpret a byte array as a UTF-8 string.\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function utf8DecodeSync(bytes) {\n  if (typeof TextDecoder !== 'undefined') {\n    return new TextDecoder('utf-8').decode(bytes);\n  }\n  const asciiString = bytesToString(new Uint8Array(bytes));\n  return decodeURIComponent(escape(asciiString));\n}\n\n/**\n * Turn a string into UTF-8 bytes.\n * @param {string} string\n * @return {!Uint8Array}\n */\nexport function utf8EncodeSync(string) {\n  if (typeof TextEncoder !== 'undefined') {\n    return new TextEncoder('utf-8').encode(string);\n  }\n  return stringToBytes(unescape(encodeURIComponent(string)));\n}\n\n/**\n * Converts a string which is in base64url encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function base64UrlDecodeToBytes(str) {\n  const encoded = atob(str.replace(/[-_]/g, (ch) => base64UrlDecodeSubs[ch]));\n  return stringToBytes(encoded);\n}\n\n/**\n * Converts a bytes array into base64url encoded string.\n * base64url is defined in RFC 4648. It is sometimes referred to as \"web safe\".\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function base64UrlEncodeFromBytes(bytes) {\n  const str = bytesToString(bytes);\n  return btoa(str).replace(/[+/=]/g, (ch) => base64UrlEncodeSubs[ch]);\n}\n","/**\n * Copyright 2021 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst Constants = {};\n\n/**\n * Local storage key for swgUserToken.\n *\n * @const {string}\n */\nConstants.USER_TOKEN = 'USER_TOKEN';\n\nexport {Constants};\n","/**\n * Copyright 2020 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Timestamp} from '../proto/api_messages';\n\n/**\n * @param {!number} millis\n * @return {!Timestamp}\n */\nexport function toTimestamp(millis) {\n  return new Timestamp(\n    [Math.floor(millis / 1000), (millis % 1000) * 1000000],\n    false\n  );\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {!Document} doc\n * @return {string}\n */\nfunction getReadyState(doc) {\n  return /** @type {string} */ (doc['readyState']);\n}\n\n/**\n * Whether the document is ready.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isDocumentReady(doc) {\n  const readyState = getReadyState(doc);\n  return readyState != 'loading' && readyState != 'uninitialized';\n}\n\n/**\n * Whether the document has loaded all the css and sub-resources.\n * @param {!Document} doc\n * @return {boolean}\n */\nfunction isDocumentComplete(doc) {\n  return getReadyState(doc) == 'complete';\n}\n\n/**\n * Calls the callback when document is ready.\n * @param {!Document} doc\n * @param {function(!Document)} callback\n */\nexport function onDocumentReady(doc, callback) {\n  onDocumentState(doc, isDocumentReady, callback);\n}\n\n/**\n * Calls the callback once when document's state satisfies the condition.\n * @param {!Document} doc\n * @param {function(!Document):boolean} condition\n * @param {function(!Document)} callback\n */\nfunction onDocumentState(doc, condition, callback) {\n  if (condition(doc)) {\n    // Execute callback right now.\n    callback(doc);\n    return;\n  }\n\n  // Execute callback (once!) after condition is satisfied.\n  let callbackHasExecuted = false;\n  const readyListener = () => {\n    if (condition(doc) && !callbackHasExecuted) {\n      callback(doc);\n      callbackHasExecuted = true;\n      doc.removeEventListener('readystatechange', readyListener);\n    }\n  };\n  doc.addEventListener('readystatechange', readyListener);\n}\n\n/**\n * Returns a promise that is resolved when document is ready.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nexport function whenDocumentReady(doc) {\n  return new Promise((resolve) => {\n    onDocumentReady(doc, resolve);\n  });\n}\n\n/**\n * Returns a promise that is resolved when document is complete.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nexport function whenDocumentComplete(doc) {\n  return new Promise((resolve) => {\n    onDocumentState(doc, isDocumentComplete, resolve);\n  });\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './log';\nimport {setStyles} from './style';\n\n/** @const @enum{string} */\nexport const styleLinkAttrs = {\n  'rel': 'stylesheet',\n  'type': 'text/css',\n};\n\n/** @const {string} */\nexport const styleType = 'text/css';\n\n/** @const {string} */\nexport const styleExistsQuerySelector = 'link[rel=stylesheet][href]';\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!Object<string, string|number|boolean|!Object<string, string|number|boolean>>} attributes\n * @return {!Element} updated element.\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    if (attr == 'style') {\n      setStyles(\n        element,\n        /** @type {!Object<string, string|boolean|number>} */\n        (attributes[attr])\n      );\n    } else {\n      element.setAttribute(\n        attr,\n        /** @type {string|boolean|number} */ (attributes[attr])\n      );\n    }\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!Object<string, string>} attributes\n * @param {?(string|!Node|!ArrayLike<!Node>|!Array<!Node>)=} content\n * @return {!Element} created element.\n */\nexport function createElement(doc, tagName, attributes, content) {\n  const element = doc.createElement(tagName);\n  addAttributesToElement(element, attributes);\n  if (content != null) {\n    if (typeof content == 'string') {\n      element.textContent = content;\n    } else if (content.nodeType) {\n      element.appendChild(/** @type {!Node} */ (content));\n    } else if ('length' in content) {\n      for (let i = 0; i < content.length; i++) {\n        element.appendChild(content[i]);\n      }\n    } else {\n      assert(false, 'Unsupported content: %s', content);\n    }\n  }\n  return element;\n}\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n/**\n * Removes all children from the parent element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  parent.textContent = '';\n}\n\n/**\n * Injects the provided styles in the HEAD section of the document.\n * @param {!../model/doc.Doc} doc The document object.\n * @param {string} styleText The style string.\n * @return {!Element}\n */\nexport function injectStyleSheet(doc, styleText) {\n  const styleElement = createElement(doc.getWin().document, 'style', {\n    'type': styleType,\n  });\n  styleElement.textContent = styleText;\n  doc.getHead().appendChild(styleElement);\n  return styleElement;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node=} stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while (\n    (currentElement = currentElement.parentNode) &&\n    currentElement != stopNode\n  );\n  return false;\n}\n\n/**\n * Polyfill of the `Node.isConnected` API. See\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected.\n * @param {!Node} node\n * @return {boolean}\n */\nexport function isConnected(node) {\n  // Ensure that node is attached if specified. This check uses a new and\n  // fast `isConnected` API and thus only checked on platforms that have it.\n  // See https://www.chromestatus.com/feature/5676110549352448.\n  if ('isConnected' in node) {\n    return node['isConnected'];\n  }\n  // Polyfill.\n  const root = node.ownerDocument && node.ownerDocument.documentElement;\n  return (root && root.contains(node)) || false;\n}\n\n/**\n * Returns true if current browser is a legacy version of Edge.\n *\n * Starting in January 2020, new versions of Edge will use the Chromium engine.\n * These versions won't include the word \"Edge\" in their useragent.\n * Instead, they'll include the word \"Edg\".\n * So far, it seems safe to avoid detecting these new versions of Edge.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isLegacyEdgeBrowser(win) {\n  const nav = win.navigator;\n  return /Edge/i.test(nav && nav.userAgent);\n}\n","/**\n * Copyright 2020 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const AMP_USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error}\n */\nfunction duplicateErrorIfNecessary(error) {\n  const messageProperty = Object.getOwnPropertyDescriptor(error, 'message');\n  if (messageProperty && messageProperty.writable) {\n    return error;\n  }\n\n  const {message, stack} = error;\n  const e = new Error(message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n */\nfunction createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n/** Helper class for throwing standardized errors. */\nexport class ErrorLogger {\n  /**\n   * Constructor.\n   *\n   * opt_suffix will be appended to error message to identify the type of the\n   * error message. We can't rely on the error object to pass along the type\n   * because some browsers do not have this param in its window.onerror API.\n   * See:\n   * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n   *\n   * @param {string=} opt_suffix\n   */\n  constructor(opt_suffix = '') {\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix;\n  }\n\n  /**\n   * Modifies an error before reporting, such as to add metadata.\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) === -1) {\n        error.message = this.suffix_;\n      }\n    }\n  }\n\n  /**\n   * Creates an error.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(\n      null,\n      Array.prototype.slice.call(arguments)\n    );\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true. Used for\n   * expected failure states (ex. incorrect configuration, localStorage\n   * unavailable due to browser settings, etc.) as opposed to unexpected\n   * breakages/failures.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(\n      null,\n      Array.prototype.slice.call(arguments)\n    );\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error.\n   * @param {...*} var_args\n   * @throws {!Error}\n   */\n  error(var_args) {\n    throw this.createError.apply(this, arguments);\n  }\n\n  /**\n   * Throws an error and marks with an expected property.\n   * @param {...*} var_args\n   * @throws {!Error}\n   */\n  expectedError(var_args) {\n    throw this.createExpectedError.apply(this, arguments);\n  }\n}\n\nconst userLogger = new ErrorLogger(\n  self.__AMP_TOP ? AMP_USER_ERROR_SENTINEL : ''\n);\nconst devLogger = new ErrorLogger();\n\nexport const user = () => userLogger;\nexport const dev = () => devLogger;\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst {\n  createAbortError,\n  isAbortError,\n} = require('web-activities/activity-ports');\n\n/**\n * Whether the specified error is an AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {*} error\n * @return {boolean}\n */\nexport function isCancelError(error) {\n  return isAbortError(error);\n}\n\n/**\n * Creates or emulates a DOMException of AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {!Window} win\n * @param {string=} message\n * @return {!DOMException}\n */\nexport function createCancelError(win, message) {\n  return createAbortError(win, message);\n}\n\n/**\n * A set of error utilities combined in a class to allow easy stubbing in tests.\n */\nexport class ErrorUtils {\n  /**\n   * @param {!Error} error\n   */\n  static throwAsync(error) {\n    setTimeout(() => {\n      throw error;\n    });\n  }\n}\n","/**\n * Copyright 2020 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// PLEASE DO NOT HOST THIS FILE YOURSELF. DOING SO WILL BREAK THINGS.\n//\n// Publishers should load this file from:\n// https://news.google.com/swg/js/v1/swg-gaa.js\n//\n// Thanks!\n\nimport {I18N_STRINGS} from '../i18n/strings';\nimport {getLanguageCodeFromElement, msg} from './i18n';\n// eslint-disable-next-line no-unused-vars\nimport {Subscriptions} from '../api/subscriptions';\nimport {addQueryParam, parseQueryString} from './url';\nimport {parseJson} from './json';\nimport {setImportantStyles} from './style';\nimport {warn} from './log';\n\n// Load types for Closure compiler.\nimport '../model/doc';\n\n/** Stamp for post messages. */\nexport const POST_MESSAGE_STAMP = 'swg-gaa-post-message-stamp';\n\n/** Introduction command for post messages. */\nexport const POST_MESSAGE_COMMAND_INTRODUCTION = 'introduction';\n\n/** User command for post messages. */\nexport const POST_MESSAGE_COMMAND_USER = 'user';\n\n/** Error command for post messages. */\nexport const POST_MESSAGE_COMMAND_ERROR = 'error';\n\n/** ID for the Google Sign-In iframe element. */\nexport const GOOGLE_SIGN_IN_IFRAME_ID = 'swg-google-sign-in-iframe';\n\n/** ID for the Google Sign-In button element. */\nconst GOOGLE_SIGN_IN_BUTTON_ID = 'swg-google-sign-in-button';\n\n/** ID for the Publisher sign-in button element. */\nconst PUBLISHER_SIGN_IN_BUTTON_ID = 'swg-publisher-sign-in-button';\n\n/** ID for the Regwall container element. */\nexport const REGWALL_CONTAINER_ID = 'swg-regwall-container';\n\n/** ID for the Regwall dialog element. */\nexport const REGWALL_DIALOG_ID = 'swg-regwall-dialog';\n\n/** ID for the Regwall title element. */\nexport const REGWALL_TITLE_ID = 'swg-regwall-title';\n\n/**\n * HTML for the metering regwall dialog, where users can sign in with Google.\n * The script creates a dialog based on this HTML.\n *\n * The HTML includes an iframe that loads the Google Sign-In button.\n * This iframe can live on a different origin.\n */\nconst REGWALL_HTML = `\n<style>\n  .gaa-metering-regwall--dialog-spacer,\n  .gaa-metering-regwall--dialog,\n  .gaa-metering-regwall--logo,\n  .gaa-metering-regwall--title,\n  .gaa-metering-regwall--description,\n  .gaa-metering-regwall--description strong,\n  .gaa-metering-regwall--iframe,\n  .gaa-metering-regwall--publisher-no-thanks-button {\n    all: initial;\n    box-sizing: border-box;\n    font-family: Roboto, arial, sans-serif;\n  }\n\n  .gaa-metering-regwall--dialog-spacer {\n    bottom: 0;\n    display: block;\n    position: fixed;\n    width: 100%;\n  }\n\n  @keyframes slideUp {\n    from {transform: translate(0, 200px);}\n    to {transform: translate(0, 0);}\n  }\n\n  .gaa-metering-regwall--dialog {\n    animation: slideUp 0.5s;\n    background: white;\n    border-radius: 12px 12px 0 0;\n    box-shadow: 0px -2px 6px rgba(0, 0, 0, 0.3);\n    display: block;\n    margin: 0 auto;\n    max-width: 100%;\n    padding: 24px 20px;\n    width: 410px;\n  }\n\n  .gaa-metering-regwall--logo {\n    display: block;\n    margin: 0 auto 24px;\n  }\n\n  .gaa-metering-regwall--title {\n    color: #000;\n    display: block;\n    font-size: 16px;\n    margin: 0 0 8px;\n  }\n  \n  .gaa-metering-regwall--description {\n    color: #646464;\n    display: block;\n    font-size: 14px;\n    line-height: 19px;\n    margin: 0 0 30px;\n  }\n\n  .gaa-metering-regwall--description strong {\n    color: #646464;\n    font-size: 14px;\n    line-height: 19px;\n    font-weight: bold;\n  }\n\n  .gaa-metering-regwall--iframe {\n    border: none;\n    display: block;\n    height: 36px;\n    margin: 0 0 30px;\n    width: 100%;\n  }\n\n  .gaa-metering-regwall--line {\n    background-color: #ddd;\n    display: block;\n    height: 1px;\n    margin: 0 0 24px;\n  }\n\n  .gaa-metering-regwall--publisher-sign-in-button,\n  .gaa-metering-regwall--publisher-no-thanks-button {\n    color: #1967d2;\n    display: block;\n    cursor: pointer;\n    font-size: 12px;\n  }\n\n  .gaa-metering-regwall--publisher-sign-in-button {\n  }\n\n  .gaa-metering-regwall--publisher-no-thanks-button {\n    display: none;\n    float: right;\n  }\n\n  .gaa-metering-regwall--google-sign-in-button {\n    height: 36px;\n    margin: 0 auto 30px;\n  }\n\n  .gaa-metering-regwall--google-sign-in-button > div {\n    animation: swgGoogleSignInButtonfadeIn 0.32s;\n  }\n\n  @keyframes swgGoogleSignInButtonfadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n</style>\n\n<div class=\"gaa-metering-regwall--dialog-spacer\">\n  <div role=\"dialog\" aria-modal=\"true\" class=\"gaa-metering-regwall--dialog\" id=\"${REGWALL_DIALOG_ID}\" aria-labelledby=\"${REGWALL_TITLE_ID}\">\n    <img alt=\"Google\" class=\"gaa-metering-regwall--logo\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDc0IDI0Ij48cGF0aCBmaWxsPSIjNDI4NUY0IiBkPSJNOS4yNCA4LjE5djIuNDZoNS44OGMtLjE4IDEuMzgtLjY0IDIuMzktMS4zNCAzLjEtLjg2Ljg2LTIuMiAxLjgtNC41NCAxLjgtMy42MiAwLTYuNDUtMi45Mi02LjQ1LTYuNTRzMi44My02LjU0IDYuNDUtNi41NGMxLjk1IDAgMy4zOC43NyA0LjQzIDEuNzZMMTUuNCAyLjVDMTMuOTQgMS4wOCAxMS45OCAwIDkuMjQgMCA0LjI4IDAgLjExIDQuMDQuMTEgOXM0LjE3IDkgOS4xMyA5YzIuNjggMCA0LjctLjg4IDYuMjgtMi41MiAxLjYyLTEuNjIgMi4xMy0zLjkxIDIuMTMtNS43NSAwLS41Ny0uMDQtMS4xLS4xMy0xLjU0SDkuMjR6Ii8+PHBhdGggZmlsbD0iI0VBNDMzNSIgZD0iTTI1IDYuMTljLTMuMjEgMC01LjgzIDIuNDQtNS44MyA1LjgxIDAgMy4zNCAyLjYyIDUuODEgNS44MyA1LjgxczUuODMtMi40NiA1LjgzLTUuODFjMC0zLjM3LTIuNjItNS44MS01LjgzLTUuODF6bTAgOS4zM2MtMS43NiAwLTMuMjgtMS40NS0zLjI4LTMuNTIgMC0yLjA5IDEuNTItMy41MiAzLjI4LTMuNTJzMy4yOCAxLjQzIDMuMjggMy41MmMwIDIuMDctMS41MiAzLjUyLTMuMjggMy41MnoiLz48cGF0aCBmaWxsPSIjNDI4NUY0IiBkPSJNNTMuNTggNy40OWgtLjA5Yy0uNTctLjY4LTEuNjctMS4zLTMuMDYtMS4zQzQ3LjUzIDYuMTkgNDUgOC43MiA0NSAxMmMwIDMuMjYgMi41MyA1LjgxIDUuNDMgNS44MSAxLjM5IDAgMi40OS0uNjIgMy4wNi0xLjMyaC4wOXYuODFjMCAyLjIyLTEuMTkgMy40MS0zLjEgMy40MS0xLjU2IDAtMi41My0xLjEyLTIuOTMtMi4wN2wtMi4yMi45MmMuNjQgMS41NCAyLjMzIDMuNDMgNS4xNSAzLjQzIDIuOTkgMCA1LjUyLTEuNzYgNS41Mi02LjA1VjYuNDloLTIuNDJ2MXptLTIuOTMgOC4wM2MtMS43NiAwLTMuMS0xLjUtMy4xLTMuNTIgMC0yLjA1IDEuMzQtMy41MiAzLjEtMy41MiAxLjc0IDAgMy4xIDEuNSAzLjEgMy41NC4wMSAyLjAzLTEuMzYgMy41LTMuMSAzLjV6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNSIgZD0iTTM4IDYuMTljLTMuMjEgMC01LjgzIDIuNDQtNS44MyA1LjgxIDAgMy4zNCAyLjYyIDUuODEgNS44MyA1LjgxczUuODMtMi40NiA1LjgzLTUuODFjMC0zLjM3LTIuNjItNS44MS01LjgzLTUuODF6bTAgOS4zM2MtMS43NiAwLTMuMjgtMS40NS0zLjI4LTMuNTIgMC0yLjA5IDEuNTItMy41MiAzLjI4LTMuNTJzMy4yOCAxLjQzIDMuMjggMy41MmMwIDIuMDctMS41MiAzLjUyLTMuMjggMy41MnoiLz48cGF0aCBmaWxsPSIjMzRBODUzIiBkPSJNNTggLjI0aDIuNTF2MTcuNTdINTh6Ii8+PHBhdGggZmlsbD0iI0VBNDMzNSIgZD0iTTY4LjI2IDE1LjUyYy0xLjMgMC0yLjIyLS41OS0yLjgyLTEuNzZsNy43Ny0zLjIxLS4yNi0uNjZjLS40OC0xLjMtMS45Ni0zLjctNC45Ny0zLjctMi45OSAwLTUuNDggMi4zNS01LjQ4IDUuODEgMCAzLjI2IDIuNDYgNS44MSA1Ljc2IDUuODEgMi42NiAwIDQuMi0xLjYzIDQuODQtMi41N2wtMS45OC0xLjMyYy0uNjYuOTYtMS41NiAxLjYtMi44NiAxLjZ6bS0uMTgtNy4xNWMxLjAzIDAgMS45MS41MyAyLjIgMS4yOGwtNS4yNSAyLjE3YzAtMi40NCAxLjczLTMuNDUgMy4wNS0zLjQ1eiIvPjwvc3ZnPg==\" />\n\n    <div class=\"gaa-metering-regwall--title\" id=\"${REGWALL_TITLE_ID}\" tabindex=\"0\">$SHOWCASE_REGWALL_TITLE$</div>\n\n    <div class=\"gaa-metering-regwall--description\">\n      $SHOWCASE_REGWALL_DESCRIPTION$\n    </div>\n\n    <iframe\n        id=\"${GOOGLE_SIGN_IN_IFRAME_ID}\"\n        class=\"gaa-metering-regwall--iframe\"\n        src=\"$iframeUrl$\">\n    </iframe>\n\n    <div class=\"gaa-metering-regwall--line\"></div>\n\n    <a\n        id=\"${PUBLISHER_SIGN_IN_BUTTON_ID}\"\n        class=\"gaa-metering-regwall--publisher-sign-in-button\"\n        tabindex=\"0\"\n        href=\"#\">\n      $SHOWCASE_REGWALL_PUBLISHER_SIGN_IN_BUTTON$\n    </a>\n  </div>\n</div>\n`;\n\n/** Styles for the Google Sign-In button iframe. */\nconst GOOGLE_SIGN_IN_IFRAME_STYLES = `\nbody {\n  margin: 0;\n  overflow: hidden;\n}\n#${GOOGLE_SIGN_IN_BUTTON_ID} {\n  margin: 0 auto;\n}\n#${GOOGLE_SIGN_IN_BUTTON_ID} > div {\n  animation: fadeIn 0.32s;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n#${GOOGLE_SIGN_IN_BUTTON_ID} .abcRioButton.abcRioButtonBlue {\n  background-color: #1A73E8;\n  box-shadow: none;\n  -webkit-box-shadow: none;\n  border-radius: 4px;\n  width: 100% !important;\n}\n#${GOOGLE_SIGN_IN_BUTTON_ID} .abcRioButton.abcRioButtonBlue .abcRioButtonIcon {\n  display: none;\n}\n/** Hides default \"Sign in with Google\" text. */\n#${GOOGLE_SIGN_IN_BUTTON_ID} .abcRioButton.abcRioButtonBlue .abcRioButtonContents span[id^=not_signed_] {\n  font-size: 0 !important;\n}\n/** Renders localized \"Sign in with Google\" text instead. */\n#${GOOGLE_SIGN_IN_BUTTON_ID} .abcRioButton.abcRioButtonBlue .abcRioButtonContents span[id^=not_signed_]::before {\n  content: '$SHOWCASE_REGWALL_GOOGLE_SIGN_IN_BUTTON$';\n  font-size: 15px;\n}\n`;\n\n/**\n * User object that Publisher JS receives after users sign in.\n * @typedef {{\n *   idToken: string,\n *   name: string,\n *   givenName: string,\n *   familyName: string,\n *   imageUrl: string,\n *   email: string,\n * }} GaaUserDef\n */\nexport let GaaUserDef;\n\n/**\n * GoogleUser object that Google Sign-In returns after users sign in.\n * https://developers.google.com/identity/sign-in/web/reference#googleusergetbasicprofile\n * @typedef {{\n *   getAuthResponse: function(): {id_token: string},\n *   getBasicProfile: function(): {\n *     getName: function(): string,\n *     getGivenName: function(): string,\n *     getFamilyName: function(): string,\n *     getImageUrl: function(): string,\n *     getEmail: function(): string,\n *   },\n * }} GoogleUserDef\n */\nexport let GoogleUserDef;\n\n/**\n * Returns true if the query string contains fresh Google Article Access (GAA) params.\n * @param {string} queryString\n * @return {boolean}\n */\nexport function queryStringHasFreshGaaParams(queryString) {\n  const params = parseQueryString(queryString);\n\n  // Verify GAA params exist.\n  if (\n    !params['gaa_at'] ||\n    !params['gaa_n'] ||\n    !params['gaa_sig'] ||\n    !params['gaa_ts']\n  ) {\n    return false;\n  }\n\n  // Verify timestamp isn't stale.\n  const expirationTimestamp = parseInt(params['gaa_ts'], 16);\n  const currentTimestamp = Date.now() / 1000;\n  if (expirationTimestamp < currentTimestamp) {\n    return false;\n  }\n\n  return true;\n}\n\n/** Renders Google Article Access (GAA) Metering Regwall. */\nexport class GaaMeteringRegwall {\n  /**\n   * Returns a promise for a Google Sign-In user object.\n   * https://developers.google.com/identity/sign-in/web/reference#googleusergetbasicprofile\n   *\n   * This method opens a metering regwall dialog,\n   * where users can sign in with Google.\n   * @nocollapse\n   * @param {{ iframeUrl: string }} params\n   * @return {!Promise<!GaaUserDef>}\n   */\n  static show({iframeUrl}) {\n    const queryString = GaaUtils.getQueryString();\n    if (!queryStringHasFreshGaaParams(queryString)) {\n      const errorMessage =\n        '[swg-gaa.js:GaaMeteringRegwall.show]: URL needs fresh GAA params.';\n      warn(errorMessage);\n      return Promise.reject(errorMessage);\n    }\n\n    GaaMeteringRegwall.render_({iframeUrl});\n    GaaMeteringRegwall.sendIntroMessageToGsiIframe_({iframeUrl});\n    return GaaMeteringRegwall.getGaaUser_()\n      .then((gaaUser) => {\n        GaaMeteringRegwall.remove_();\n        return gaaUser;\n      })\n      .catch((err) => {\n        // Close the Regwall, since the flow failed.\n        GaaMeteringRegwall.remove_();\n\n        // Rethrow error.\n        throw err;\n      });\n  }\n\n  /**\n   * Signs out of Google Sign-In.\n   * This is useful for developers who are testing their\n   * SwG integrations.\n   * @nocollapse\n   * @return {!Promise}\n   */\n  static signOut() {\n    return configureGoogleSignIn().then(() =>\n      self.gapi.auth2.getAuthInstance().signOut()\n    );\n  }\n\n  /**\n   * Renders the Regwall.\n   * @private\n   * @nocollapse\n   * @param {{ iframeUrl: string }} params\n   */\n  static render_({iframeUrl}) {\n    const languageCode = getLanguageCodeFromElement(self.document.body);\n\n    // Tell the iframe which language to render.\n    iframeUrl = addQueryParam(iframeUrl, 'lang', languageCode);\n\n    const containerEl = /** @type {!HTMLDivElement} */ (self.document.createElement(\n      'div'\n    ));\n    containerEl.id = REGWALL_CONTAINER_ID;\n    setImportantStyles(containerEl, {\n      'all': 'unset',\n      'background-color': 'rgba(32, 33, 36, 0.6)',\n      'border': 'none',\n      'bottom': '0',\n      'height': '100%',\n      'left': '0',\n      'opacity': '0',\n      'position': 'fixed',\n      'right': '0',\n      'transition': 'opacity 0.5s',\n      'top': '0',\n      'width': '100%',\n      'z-index': 2147483646,\n    });\n    containerEl./*OK*/ innerHTML = REGWALL_HTML.replace(\n      '$iframeUrl$',\n      iframeUrl\n    )\n      .replace(\n        '$SHOWCASE_REGWALL_TITLE$',\n        msg(I18N_STRINGS['SHOWCASE_REGWALL_TITLE'], languageCode)\n      )\n      .replace(\n        '$SHOWCASE_REGWALL_DESCRIPTION$',\n        msg(I18N_STRINGS['SHOWCASE_REGWALL_DESCRIPTION'], languageCode)\n      )\n      .replace(\n        '$SHOWCASE_REGWALL_PUBLISHER_SIGN_IN_BUTTON$',\n        msg(\n          I18N_STRINGS['SHOWCASE_REGWALL_PUBLISHER_SIGN_IN_BUTTON'],\n          languageCode\n        )\n      );\n    containerEl.querySelector('ph')./*OK*/ innerHTML =\n      '<strong>' +\n      GaaMeteringRegwall.getPublisherNameFromPageConfig_() +\n      '</strong>';\n    self.document.body.appendChild(containerEl);\n    /** @suppress {suspiciousCode} */\n    containerEl.offsetHeight; // Trigger a repaint (to prepare the CSS transition).\n    setImportantStyles(containerEl, {'opacity': 1});\n    GaaMeteringRegwall.addClickListenerOnPublisherSignInButton_();\n\n    // Focus on the title after the dialog animates in.\n    // This helps people using screenreaders.\n    const dialogEl = self.document.getElementById(REGWALL_DIALOG_ID);\n    dialogEl.addEventListener('animationend', () => {\n      const titleEl = self.document.getElementById(REGWALL_TITLE_ID);\n      titleEl.focus();\n    });\n  }\n\n  /**\n   * Gets publisher name from page config.\n   * @private\n   * @nocollapse\n   * @return {string}\n   */\n  static getPublisherNameFromPageConfig_() {\n    const ldJsonElements = self.document.querySelectorAll(\n      'script[type=\"application/ld+json\"]'\n    );\n\n    for (let i = 0; i < ldJsonElements.length; i++) {\n      const ldJsonElement = ldJsonElements[i];\n      const ldJson = /** @type {?{ publisher: ?{ name: string } }} */ (parseJson(\n        ldJsonElement.textContent\n      ));\n      if (ldJson?.publisher?.name) {\n        return ldJson.publisher.name;\n      }\n    }\n\n    throw new Error('Article needs JSON-LD with a publisher name.');\n  }\n\n  /**\n   * Adds a click listener on the publisher sign-in button.\n   * @private\n   * @nocollapse\n   */\n  static addClickListenerOnPublisherSignInButton_() {\n    self.document\n      .getElementById(PUBLISHER_SIGN_IN_BUTTON_ID)\n      .addEventListener('click', (e) => {\n        e.preventDefault();\n        (self.SWG = self.SWG || []).push((subscriptions) => {\n          /** @type {!Subscriptions} */ (subscriptions).triggerLoginRequest({\n            linkRequested: false,\n          });\n        });\n      });\n  }\n\n  /**\n   * Returns the GAA user, after the user signs in.\n   * @private\n   * @nocollapse\n   * @return {!Promise<!GoogleUserDef>}\n   */\n  static getGaaUser_() {\n    // Listen for GAA user.\n    return new Promise((resolve, reject) => {\n      self.addEventListener('message', (e) => {\n        if (e.data.stamp === POST_MESSAGE_STAMP) {\n          if (e.data.command === POST_MESSAGE_COMMAND_USER) {\n            // Pass along GAA user.\n            resolve(e.data.gaaUser);\n          }\n\n          if (e.data.command === POST_MESSAGE_COMMAND_ERROR) {\n            // Reject promise due to Google Sign-In error.\n            reject('Google Sign-In could not render');\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * Sends intro post message to Google Sign-In iframe.\n   * @private\n   * @nocollapse\n   * @param {{ iframeUrl: string }} params\n   */\n  static sendIntroMessageToGsiIframe_({iframeUrl}) {\n    // Introduce this window to the publisher's Google Sign-In iframe.\n    // This lets the iframe send post messages back to this window.\n    // Without the introduction, the iframe wouldn't have a reference to this window.\n    const googleSignInIframe = /** @type {!HTMLIFrameElement} */ (self.document.getElementById(\n      GOOGLE_SIGN_IN_IFRAME_ID\n    ));\n    googleSignInIframe.onload = () => {\n      googleSignInIframe.contentWindow.postMessage(\n        {\n          stamp: POST_MESSAGE_STAMP,\n          command: POST_MESSAGE_COMMAND_INTRODUCTION,\n        },\n        new URL(iframeUrl).origin\n      );\n    };\n  }\n\n  /**\n   * Removes the Regwall.\n   * @private\n   * @nocollapse\n   */\n  static remove_() {\n    const regwallContainer = self.document.getElementById(REGWALL_CONTAINER_ID);\n    if (regwallContainer) {\n      regwallContainer.remove();\n    }\n  }\n}\n\nexport class GaaGoogleSignInButton {\n  /**\n   * Renders the Google Sign-In button.\n   * @nocollapse\n   * @param {{ allowedOrigins: !Array<string> }} params\n   */\n  static show({allowedOrigins}) {\n    // Optionally grab language code from URL.\n    const queryString = GaaUtils.getQueryString();\n    const queryParams = parseQueryString(queryString);\n    const languageCode = queryParams['lang'] || 'en';\n\n    // Apply iframe styles.\n    const styleEl = self.document.createElement('style');\n    styleEl./*OK*/ innerText = GOOGLE_SIGN_IN_IFRAME_STYLES.replace(\n      '$SHOWCASE_REGWALL_GOOGLE_SIGN_IN_BUTTON$',\n      msg(I18N_STRINGS['SHOWCASE_REGWALL_GOOGLE_SIGN_IN_BUTTON'], languageCode)\n    );\n    self.document.head.appendChild(styleEl);\n\n    // Promise a function that sends messages to the parent frame.\n    // Note: A function is preferable to a reference to the parent frame\n    // because referencing the parent frame outside of the 'message' event\n    // handler throws an Error. A function defined within the handler can\n    // effectively save a reference to the parent frame though.\n    const sendMessageToParentFnPromise = new Promise((resolve) => {\n      self.addEventListener('message', (e) => {\n        if (\n          allowedOrigins.indexOf(e.origin) !== -1 &&\n          e.data.stamp === POST_MESSAGE_STAMP &&\n          e.data.command === POST_MESSAGE_COMMAND_INTRODUCTION\n        ) {\n          resolve((message) => {\n            e.source.postMessage(message, e.origin);\n          });\n        }\n      });\n    });\n\n    function sendErrorMessageToParent() {\n      sendMessageToParentFnPromise.then((sendMessageToParent) => {\n        sendMessageToParent({\n          stamp: POST_MESSAGE_STAMP,\n          command: POST_MESSAGE_COMMAND_ERROR,\n        });\n      });\n    }\n\n    // Validate origins.\n    for (let i = 0; i < allowedOrigins.length; i++) {\n      const allowedOrigin = allowedOrigins[i];\n      const url = new URL(allowedOrigin);\n\n      const isOrigin = url.origin === allowedOrigin;\n      const protocolIsValid =\n        url.protocol === 'http:' || url.protocol === 'https:';\n      const isValidOrigin = isOrigin && protocolIsValid;\n\n      if (!isValidOrigin) {\n        warn(\n          `[swg-gaa.js:GaaGoogleSignInButton.show]: You specified an invalid origin: ${allowedOrigin}`\n        );\n        sendErrorMessageToParent();\n        return;\n      }\n    }\n\n    // Render the Google Sign-In button.\n    configureGoogleSignIn()\n      .then(\n        // Promise credentials.\n        () =>\n          new Promise((resolve) => {\n            // Render the Google Sign-In button.\n            const buttonEl = self.document.createElement('div');\n            buttonEl.id = GOOGLE_SIGN_IN_BUTTON_ID;\n            buttonEl.tabIndex = 0;\n            self.document.body.appendChild(buttonEl);\n            self.gapi.signin2.render(GOOGLE_SIGN_IN_BUTTON_ID, {\n              'longtitle': true,\n              'onsuccess': resolve,\n              'prompt': 'select_account',\n              'scope': 'profile email',\n              'theme': 'dark',\n            });\n          })\n      )\n      .then((googleUser) => {\n        // Gather GAA user details.\n        const basicProfile = /** @type {!GoogleUserDef} */ (googleUser).getBasicProfile();\n        /** @type {!GaaUserDef} */\n        const gaaUser = {\n          idToken: /** @type {!GoogleUserDef} */ (googleUser).getAuthResponse()\n            .id_token,\n          name: basicProfile.getName(),\n          givenName: basicProfile.getGivenName(),\n          familyName: basicProfile.getFamilyName(),\n          imageUrl: basicProfile.getImageUrl(),\n          email: basicProfile.getEmail(),\n        };\n\n        // Send GAA user to parent frame.\n        sendMessageToParentFnPromise.then((sendMessageToParent) => {\n          sendMessageToParent({\n            stamp: POST_MESSAGE_STAMP,\n            command: POST_MESSAGE_COMMAND_USER,\n            gaaUser,\n          });\n        });\n      })\n      .catch(sendErrorMessageToParent);\n  }\n}\n\n/**\n * Loads the Google Sign-In API.\n *\n * This function is used in two places.\n * 1. The publisher's Google Sign-In iframe.\n * 2. (Optional) Demos that allow users to sign out.\n *\n * @return {!Promise}\n */\nfunction configureGoogleSignIn() {\n  // Wait for Google Sign-In API.\n  return (\n    new Promise((resolve) => {\n      const apiCheckInterval = setInterval(() => {\n        if (!!self.gapi) {\n          clearInterval(apiCheckInterval);\n          resolve();\n        }\n      }, 50);\n    })\n      // Load Auth2 module.\n      .then(() => new Promise((resolve) => self.gapi.load('auth2', resolve)))\n      // Specify \"redirect\" mode. It plays nicer with webviews.\n      .then(\n        () =>\n          // Only initialize Google Sign-In once.\n          self.gapi.auth2.getAuthInstance() || self.gapi.auth2.init()\n      )\n  );\n}\n\nexport class GaaUtils {\n  /**\n   * Returns query string from current URL.\n   * Tests can override this method to return different URLs.\n   * @return {string}\n   */\n  static getQueryString() {\n    return self.location.search;\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** English is the default language. */\nconst DEFAULT_LANGUAGE_CODE = 'en';\n\n/**\n * Gets a message for a given language code, from a map of messages.\n * @param {!Object<string, string>} map\n * @param {?string|?Element} languageCodeOrElement\n * @return {?string}\n */\nexport function msg(map, languageCodeOrElement) {\n  const defaultMsg = map[DEFAULT_LANGUAGE_CODE];\n\n  // Verify params.\n  if (typeof map !== 'object' || !languageCodeOrElement) {\n    return defaultMsg;\n  }\n\n  // Get language code.\n  let languageCode =\n    typeof languageCodeOrElement === 'string'\n      ? languageCodeOrElement\n      : getLanguageCodeFromElement(languageCodeOrElement);\n\n  // Normalize language code.\n  languageCode = languageCode.toLowerCase();\n  languageCode = languageCode.replace(/_/g, '-');\n\n  // Search for a message matching the language code.\n  // If a message can't be found, try again with a less specific language code.\n  const languageCodeSegments = languageCode.split('-');\n  while (languageCodeSegments.length) {\n    const key = languageCodeSegments.join('-');\n    if (key in map) {\n      return map[key];\n    }\n\n    // Simplify language code.\n    // Ex: \"en-US-SF\" => \"en-US\"\n    languageCodeSegments.pop();\n  }\n\n  // There was an attempt.\n  return defaultMsg;\n}\n\n/**\n * Gets a language code (ex: \"en-US\") from a given Element.\n * @param {!Element} element\n * @return {string}\n */\nexport function getLanguageCodeFromElement(element) {\n  if (element.lang) {\n    // Get language from element itself.\n    return element.lang;\n  }\n\n  if (element.ownerDocument && element.ownerDocument.documentElement.lang) {\n    // Get language from element's document.\n    return element.ownerDocument.documentElement.lang;\n  }\n\n  // There was an attempt.\n  return DEFAULT_LANGUAGE_CODE;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */ (JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (onFailed) {\n      onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Converts the passed string into a JSON object (if possible) and returns the\n * value of the propertyName on that object.\n * @param {string} jsonString\n * @param {string} propertyName\n * @return {*}\n */\nexport function getPropertyFromJsonString(jsonString, propertyName) {\n  const json = tryParseJson(jsonString);\n  return (json && json[propertyName]) || null;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {base64UrlDecodeToBytes, utf8DecodeSync} from './bytes';\nimport {tryParseJson} from './json';\n\n/**\n * @typedef {{\n *   header: (?JsonObject|undefined),\n *   payload: (?JsonObject|undefined),\n *   verifiable: string,\n *   sig: string,\n * }}\n */\nlet JwtTokenInternalDef;\n\n/**\n * Provides helper methods to decode and verify JWT tokens.\n */\nexport class JwtHelper {\n  constructor() {}\n\n  /**\n   * Decodes JWT token and returns its payload.\n   * @param {string} encodedToken\n   * @return {?JsonObject|undefined}\n   */\n  decode(encodedToken) {\n    return this.decodeInternal_(encodedToken).payload;\n  }\n\n  /**\n   * @param {string} encodedToken\n   * @return {!JwtTokenInternalDef}\n   * @private\n   */\n  decodeInternal_(encodedToken) {\n    // See https://jwt.io/introduction/\n    /**\n     * Throws error about invalid token.\n     */\n    function invalidToken() {\n      throw new Error(`Invalid token: \"${encodedToken}\"`);\n    }\n\n    // Encoded token has three parts: header.payload.sig\n    // Note! The padding is not allowed by JWT spec:\n    // http://self-issued.info/docs/draft-goland-json-web-token-00.html#rfc.section.5\n    const parts = encodedToken.split('.');\n    if (parts.length != 3) {\n      invalidToken();\n    }\n    const headerUtf8Bytes = base64UrlDecodeToBytes(parts[0]);\n    const payloadUtf8Bytes = base64UrlDecodeToBytes(parts[1]);\n    return {\n      header: tryParseJson(utf8DecodeSync(headerUtf8Bytes), invalidToken),\n      payload: tryParseJson(utf8DecodeSync(payloadUtf8Bytes), invalidToken),\n      verifiable: `${parts[0]}.${parts[1]}`,\n      sig: parts[2],\n    };\n  }\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Debug logger, only log message if #swg.log=1\n * @param {...*} var_args [decription]\n */\n\n/* eslint-disable */\n\nexport function debugLog(var_args) {\n  if (/swg.debug=1/.test(self.location.hash)) {\n    const logArgs = Array.prototype.slice.call(arguments, 0);\n    logArgs.unshift('[Subscriptions]');\n    log.apply(log, logArgs);\n  }\n}\n\n/**\n * @param  {...*} var_args [description]\n */\nexport function log(var_args) {\n  console.log.apply(console, arguments);\n}\n\n/**\n * @param  {...*} var_args [description]\n */\nexport function warn(var_args) {\n  console.warn.apply(console, arguments);\n}\n\n/**\n * Throws an error if the first argument isn't trueish.\n *\n * Supports argument substitution into the message via %s placeholders.\n *\n * Throws an error object that has two extra properties:\n * - associatedElement: This is the first element provided in the var args.\n *   It can be used for improved display of error messages.\n * - messageArray: The elements of the substituted message as non-stringified\n *   elements in an array. When e.g. passed to console.error this yields\n *   native displays of things like HTML elements.\n *\n * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n *     not evaluate to true.\n * @param {string=} message The assertion message\n * @param {...*} var_args Arguments substituted into %s in the message.\n * @return {T} The value of shouldBeTrueish.\n * @template T\n */\nexport function assert(shouldBeTrueish, message, var_args) {\n  let firstElement;\n  if (!shouldBeTrueish) {\n    message = message || 'Assertion failed';\n    const splitMessage = message.split('%s');\n    const first = splitMessage.shift();\n    let formatted = first;\n    const messageArray = [];\n    pushIfNonEmpty(messageArray, first);\n    for (let i = 2; i < arguments.length; i++) {\n      const val = arguments[i];\n      if (val && val.tagName) {\n        firstElement = val;\n      }\n      const nextConstant = splitMessage.shift();\n      messageArray.push(val);\n      pushIfNonEmpty(messageArray, nextConstant.trim());\n      formatted += toString(val) + nextConstant;\n    }\n    const e = new Error(formatted);\n    e.fromAssert = true;\n    e.associatedElement = firstElement;\n    e.messageArray = messageArray;\n    throw e;\n  }\n  return shouldBeTrueish;\n}\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a map-like object.\n * If initial is provided, copies its own properties into the\n * newly created object.\n * @param {Object=} initial This should typically be an object literal.\n * @return {!Object}\n * @template T\n */\nexport function map(initial) {\n  const obj = Object.create(null);\n  if (initial) {\n    Object.assign(obj, initial);\n  }\n  return obj;\n}\n\n/**\n * Implements `Array.find()` method that's not yet available in all browsers.\n *\n * @param {?Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} predicate\n * @return {?T}\n * @template T\n */\nexport function findInArray(array, predicate) {\n  if (!array) {\n    return null;\n  }\n  const len = array.length || 0;\n  if (len > 0) {\n    for (let i = 0; i < len; i++) {\n      const other = array[i];\n      if (predicate(other, i, array)) {\n        return other;\n      }\n    }\n  }\n  return null;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElement} from './dom';\n\nexport class Preconnect {\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @param {string} url\n   */\n  preconnect(url) {\n    this.pre_(url, 'preconnect');\n  }\n\n  /**\n   * @param {string} url\n   */\n  dnsPrefetch(url) {\n    this.pre_(url, 'dns-prefetch');\n  }\n\n  /**\n   * @param {string} url\n   */\n  prefetch(url) {\n    this.pre_(url, 'preconnect prefetch');\n  }\n\n  /**\n   * @param {string} url\n   * @param {string} as\n   */\n  preload(url, as) {\n    this.pre_(url, 'preconnect preload', as);\n  }\n\n  /**\n   * @param {string} url\n   * @param {string} rel\n   * @param {?string=} as\n   * @private\n   */\n  pre_(url, rel, as) {\n    // <link rel=\"prefetch\" href=\"...\" as=\"\">\n    const linkEl = createElement(this.doc_, 'link', {\n      'rel': rel,\n      'href': url,\n    });\n    if (as) {\n      linkEl.setAttribute('as', as);\n    }\n    this.doc_.head.appendChild(linkEl);\n  }\n}\n","/**\n * Copyright 2019 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns an array of random values.  The length of the array is numInts.  Each\n * int will be >= 0 and < maxVal.\n * @param {!number} numInts\n * @param {!number} maxVal\n */\nexport function getRandomInts(numInts, maxVal) {\n  // Ensure array type is appropriate for the max value (performance)\n  const arr =\n    maxVal < 256\n      ? new Uint8Array(numInts)\n      : maxVal < 32768\n      ? new Uint16Array(numInts)\n      : new Uint32Array(numInts);\n\n  const isIE = !!self['msCrypto'];\n  const localCrypto = isIE ? self['msCrypto'] : self.crypto;\n  if (localCrypto && localCrypto.getRandomValues) {\n    localCrypto.getRandomValues(arr);\n    for (let i = arr.length - 1; i > -1; i--) {\n      arr[i] = arr[i] % maxVal;\n    }\n  } else {\n    // For older browsers\n    for (let i = arr.length - 1; i > -1; i--) {\n      arr[i] = Math.floor(Math.random() * maxVal);\n    }\n  }\n\n  return arr;\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getRandomInts} from './random';\nimport {utf8EncodeSync} from './bytes';\n\nconst CHARS = '0123456789ABCDEF';\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes removed and character after to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {!function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, maxIterations = 1) {\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const length = str.length;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = (hash * 33) ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n\n/**\n * Ensures the passed value is safe to use for character 19 per rfc4122,\n * sec. 4.1.5.  \"Sets the high bits of clock sequence\".\n * @param {!number} v\n */\nfunction getChar19(v) {\n  return CHARS[(v & 0x3) | 0x8];\n}\n\n/**\n * The returned identifier will always be an 8 digit valid hexidecimal number\n * and will be unique for each MS within a given month.\n * @return {string}\n */\nfunction getMonthlyTimeIdentifier() {\n  const hexTime = Date.now().toString(16);\n  return hexTime.substring(hexTime.length - 8).toUpperCase();\n}\n\n/**\n * Generates a RFC 4122 V4 UUID. Ex: \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\n * The first 8 digits are unique for the millisecond of the month.  The rest\n * are randomly generated.\n */\nexport function getUuid() {\n  let uuid = getMonthlyTimeIdentifier() + '-';\n  let rIndex = 0;\n  const rands = getRandomInts(23, 16);\n  for (let i = 9; i < 36; i++) {\n    switch (i) {\n      case 13:\n      case 18:\n      case 23:\n        uuid += '-';\n        break;\n      case 14:\n        uuid += '4';\n        break;\n      case 19:\n        uuid += getChar19(rands[rIndex++]);\n        break;\n      default:\n        uuid += CHARS[rands[rIndex++]];\n        break;\n    }\n  }\n  return uuid;\n}\n\nexport function getSwgTransactionId() {\n  return getUuid() + '.swg';\n}\n\n/**\n * Returns a string whose length matches the length of format.\n * @param {string} str\n * @param {string} format\n * @return {string}\n */\nfunction padString(str, format) {\n  return (format + str).slice(-format.length);\n}\n\nconst PADDING = '00000000';\nfunction toHex(buffer) {\n  const hexCodes = [];\n  const view = new DataView(buffer);\n  for (let i = 0; i < view.byteLength; i += 4) {\n    // toString(16) will give the hex representation of the number without padding\n    const stringValue = view.getUint32(i).toString(16);\n    hexCodes.push(padString(stringValue, PADDING));\n  }\n  return hexCodes.join('');\n}\n\n/**\n * Returns a hexadecimal 128 character string that is the\n * SHA-512 hash of the passed string.\n * @param {string} stringToHash\n * @return {!Promise<string>}\n */\nexport function hash(stringToHash) {\n  const crypto = self.crypto || self.msCrypto;\n  const subtle = crypto.subtle;\n  return subtle\n    .digest('SHA-512', utf8EncodeSync(stringToHash))\n    .then((digest) => toHex(digest));\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './object.js';\nimport {startsWith} from './string';\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n/**\n * Default styles to be set for top level friendly iframe.\n * Some attributes are not included such as height, left, margin-left; since\n * these attributes are updated by @media queries and having these values\n * defined here as !important does not work on IE/edge browsers.\n * @const {!Object<string, string|number>}\n */\nexport const defaultStyles = {\n  'align-content': 'normal',\n  'animation': 'none',\n  'align-items': 'normal',\n  'align-self': 'auto',\n  'alignment-baseline': 'auto',\n  'backface-visibility': 'hidden',\n  'background-clip': 'border-box',\n  'background-image': 'none',\n  'baseline-shift': '0',\n  'block-size': 'auto',\n  'border': 'none',\n  'border-collapse': 'separate',\n  'bottom': '0',\n  'box-sizing': 'border-box',\n  'break-after': 'auto',\n  'break-before': 'auto',\n  'break-inside': 'auto',\n  'buffered-rendering': 'auto',\n  'caption-side': 'top',\n  'caret-color': 'rgb(51, 51, 51)',\n  'clear': 'none',\n  'color': 'rgb(51, 51, 51)',\n  'color-rendering': 'auto',\n  'column-count': 'auto',\n  'column-fill': 'balance',\n  'column-gap': 'normal',\n  'column-rule-color': 'rgb(51, 51, 51)',\n  'column-rule-style': 'none',\n  'column-rule-width': '0',\n  'column-span': 'none',\n  'column-width': 'auto',\n  'contain': 'none',\n  'counter-increment': 'none',\n  'counter-reset': 'none',\n  'cursor': 'auto',\n  'direction': 'inherit',\n  'display': 'block',\n  'empty-cells': 'show',\n  'filter': 'none',\n  'flex': 'none', // flex-grow, flex-shrink, and flex-basis.\n  'flex-flow': 'row nowrap', // flex-direction, flex-wrap.\n  'float': 'none',\n  'flood-color': 'rgb(0, 0, 0)',\n  'flood-opacity': '1',\n  'font': 'none',\n  'font-size': 'medium',\n  'font-family': '',\n  'height': 'auto',\n  'hyphens': 'manual',\n  'image-rendering': 'auto',\n  'inline-size': '', // Setting to 'auto' will not allow override.\n  'isolation': 'auto',\n  'justify-content': 'normal',\n  'justify-items': 'normal',\n  'justify-self': 'auto',\n  'letter-spacing': 'normal',\n  'lighting-color': 'rgb(255, 255, 255)',\n  'line-break': 'auto',\n  'line-height': 'normal',\n  'margin-bottom': '0',\n  'mask': 'none',\n  'max-block-size': 'none',\n  'max-height': 'none',\n  'max-inline-size': 'none',\n  'max-width': 'none',\n  'min-block-size': 'none',\n  'min-height': '0',\n  'min-inline-size': '0',\n  'min-width': '0',\n  'mix-blend-mode': 'normal',\n  'object-fit': 'fill', // Important for Safari browser.\n  'offset-distance': 'none', // Chrome only (Experimental).\n  'offset-path': 'none', // Chrome only (Experimental).\n  'offset-rotate': 'auto 0deg', // Chrome only (Experimental).\n  'opacity': '1',\n  'order': '0',\n  'orphans': '2',\n  'outline': 'none',\n  'overflow-anchor': 'auto',\n  'overflow-wrap': 'normal',\n  'overflow': 'visible',\n  'padding': '0',\n  'page': '',\n  'perspective': 'none',\n  'pointer-events': 'auto',\n  'position': 'static',\n  'quotes': '',\n  'resize': 'none',\n  'right': '0',\n  'scroll-behavior': 'auto',\n  'tab-size': '8', // Only Chrome, Safari (Experimental).\n  'table-layout': 'auto',\n  'text-align': 'start',\n  'text-align-last': 'auto',\n  'text-anchor': 'start',\n  'text-combine-upright': 'none',\n  'text-decoration': 'none',\n  'text-indent': '0',\n  'text-orientation': 'mixed',\n  'text-overflow': 'clip',\n  'text-rendering': 'auto',\n  'text-shadow': 'none',\n  'text-size-adjust': 'auto',\n  'text-transform': 'none',\n  'text-underline-position': 'auto',\n  'top': 'auto',\n  'touch-action': 'auto',\n  'transform': 'none',\n  'transition': 'none 0s ease 0s',\n  'unicode-bidi': 'normal',\n  'user-select': 'auto',\n  'vector-effect': 'none',\n  'vertical-align': 'baseline',\n  'visibility': 'visible',\n  'white-space': 'normal',\n  'widows': '2',\n  'word-break': 'normal',\n  'word-spacing': '0',\n  'word-wrap': 'normal',\n  'writing-mode': 'horizontal-tb',\n  'zoom': '1',\n  'z-index': 'auto',\n};\n\n/** @const {string} */\nexport const googleFontsUrl =\n  'https://fonts.googleapis.com/css?family=Google+Sans';\n\n/**\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, string|number>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n      getVendorJsPropertyName(styles, k),\n      styles[k].toString(),\n      'important'\n    );\n  }\n}\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {Element} element\n * @param {string} property\n * @param {?string|number|boolean} value\n * @param {string=} units\n * @param {boolean=} bypassCache\n */\nexport function setStyle(element, property, value, units, bypassCache) {\n  const propertyName = getVendorJsPropertyName(\n    element.style,\n    property,\n    bypassCache\n  );\n  if (propertyName) {\n    element.style[propertyName] = /** @type {string} */ (units\n      ? value + units\n      : value);\n  }\n}\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, bypassCache) {\n  const propertyName = getVendorJsPropertyName(\n    element.style,\n    property,\n    bypassCache\n  );\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, ?string|number|boolean>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} display\n */\nexport function toggle(element, display) {\n  if (display === undefined) {\n    display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', display ? '' : 'none');\n}\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return value + 'px';\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} y\n * @return {string}\n */\nexport function translate(x, y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof y == 'number') {\n    y = px(y);\n  }\n  return `translate(${x}, ${y})`;\n}\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n    /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g,\n    '($1,$2,$3, 1)'\n  );\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */ (win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */ (style) || map();\n}\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach((prop) => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n\n/**\n * Resets all the styles of an element to a given value. Defaults to null.\n * The valid values are 'inherit', 'initial', 'unset' or null.\n * @param {!Element} element\n */\nexport function resetAllStyles(element) {\n  setImportantStyles(element, defaultStyles);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  const str = Object.prototype.toString.call(value);\n  return str === '[object Object]';\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * True if the value is a function.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * True if the value is either true or false.\n * @param {?*} value\n * @return {boolean}\n */\nexport function isBoolean(value) {\n  return typeof value === 'boolean';\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {warn} from './log';\n\n// NOTE: This regex was copied from SwG's AMP extension. https://github.com/ampproject/amphtml/blob/c23bf281f817a2ee5df73f6fd45e9f4b71bb68b6/extensions/amp-subscriptions-google/0.1/amp-subscriptions-google.js#L56\nconst GOOGLE_DOMAIN_RE = /(^|\\.)google\\.(com?|[a-z]{2}|com?\\.[a-z]{2}|cat)$/;\n\n/**\n  @typedef {{\n    href: string,\n    protocol: string,\n    host: string,\n    hostname: string,\n    port: string,\n    pathname: string,\n    search: string,\n    hash: string,\n    origin: string,\n  }}\n  */\nlet LocationDef;\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {Object<string, !LocationDef>}\n */\nlet cache;\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (Array.isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @return {!LocationDef}\n */\nexport function parseUrl(url) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = Object.create(null));\n  }\n\n  const fromCache = cache[url];\n  if (fromCache) {\n    return fromCache;\n  }\n\n  const info = parseUrlWithA(a, url);\n\n  return (cache[url] = info);\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @return {!LocationDef}\n */\nfunction parseUrlWithA(a, url) {\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  /** @type {!LocationDef} */\n  const info = {\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: '', // Set below.\n  };\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if (\n    (info.protocol == 'http:' && info.port == 80) ||\n    (info.protocol == 'https:' && info.port == 443)\n  ) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n  return info;\n}\n\n/**\n * Parses and builds Object of URL query string.\n * @param {string} query The URL query string.\n * @return {!Object<string, string>}\n */\nexport function parseQueryString(query) {\n  if (!query) {\n    return {};\n  }\n  return (/^[?#]/.test(query) ? query.slice(1) : query)\n    .split('&')\n    .reduce((params, param) => {\n      const item = param.split('=');\n      try {\n        const key = decodeURIComponent(item[0] || '');\n        const value = decodeURIComponent(item[1] || '');\n        if (key) {\n          params[key] = value;\n        }\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        warn(`SwG could not parse a URL query param: ${item[0]}`);\n      }\n      return params;\n    }, {});\n}\n\n/**\n * Adds a parameter to a query string.\n * @param {string} url\n * @param {string} param\n * @param {string} value\n * @return {string}\n */\nexport function addQueryParam(url, param, value) {\n  const queryIndex = url.indexOf('?');\n  const fragmentIndex = url.indexOf('#');\n  let fragment = '';\n  if (fragmentIndex != -1) {\n    fragment = url.substring(fragmentIndex);\n    url = url.substring(0, fragmentIndex);\n  }\n  if (queryIndex == -1) {\n    url += '?';\n  } else if (queryIndex < url.length - 1) {\n    url += '&';\n  }\n  url += encodeURIComponent(param) + '=' + encodeURIComponent(value);\n  return url + fragment;\n}\n\n/**\n * @param {!../proto/api_messages.Message} message\n * @return {string}\n */\nexport function serializeProtoMessageForUrl(message) {\n  return JSON.stringify(message.toArray(false));\n}\n\n/**\n * Returns the Url including the path and search, without fregment.\n * @param {string} url\n * @return {string}\n */\nexport function getHostUrl(url) {\n  const locationHref = parseUrl(url);\n  return locationHref.origin + locationHref.pathname + locationHref.search;\n}\n\n/**\n * @param {!../model/doc.Doc} doc\n * @return {string}\n */\nexport function getCanonicalUrl(doc) {\n  const node = doc.getRootNode().querySelector(\"link[rel='canonical']\");\n  return (node && node.href) || '';\n}\n\nconst PARSED_URL = parseUrl(self.window.location.href);\nconst PARSED_REFERRER = parseUrl(self.document.referrer);\n\n/**\n * True for Google domains\n * @param {LocationDef=} parsedUrl Defaults to the current page's URL\n * @return {boolean}\n */\nfunction isGoogleDomain(parsedUrl) {\n  parsedUrl = parsedUrl || PARSED_URL;\n  return GOOGLE_DOMAIN_RE.test(parsedUrl.hostname);\n}\n\n/**\n * True for HTTPS URLs\n * @param {LocationDef=} parsedUrl Defaults to the current page's URL\n * @return {boolean}\n */\nexport function isSecure(parsedUrl) {\n  parsedUrl = parsedUrl || PARSED_URL;\n  return parsedUrl.protocol === 'https' || parsedUrl.protocol === 'https:';\n}\n\n/**\n * True when the page is rendered within a secure Google application or\n * was linked to from a secure Google domain.\n * @param {LocationDef=} parsedReferrer Defaults to the current page's referrer\n * @return {boolean}\n */\nexport function wasReferredByGoogle(parsedReferrer) {\n  parsedReferrer = parsedReferrer || PARSED_REFERRER;\n  return isSecure(parsedReferrer) && isGoogleDomain(parsedReferrer);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './log';\nimport {parseJson} from './json';\nimport {parseUrl} from './url';\nimport {utf8EncodeSync} from './bytes';\n\n/**\n * The \"init\" argument of the Fetch API. Currently, only \"credentials: include\"\n * is implemented.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * @typedef {{\n *   body: (!FormData|string|undefined),\n *   credentials: (string|undefined),\n *   headers: (!Object|undefined),\n *   method: (string|undefined),\n *   responseType: (string)\n * }}\n */\nexport let FetchInitDef;\n\n/** @private @const {!Array<string>} */\nconst allowedMethods_ = ['GET', 'POST'];\n\n/** @private @enum {number} Allowed fetch responses. */\nconst allowedFetchTypes_ = {\n  document: 1,\n  text: 2,\n};\n\n/**\n * A class that polyfills Fetch API.\n */\nexport class Xhr {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Window} */\n    this.win = win;\n  }\n\n  /**\n   * We want to call `fetch_` unbound from any context since it could\n   * be either the native fetch or our polyfill.\n   *\n   * @param {string} input\n   * @param {!FetchInitDef} init\n   * @return {!Promise<!FetchResponse>|!Promise<!Response>}\n   * @private\n   */\n  fetch_(input, init) {\n    // TODO(avimehta): Should the requests go through when page is not visible?\n    assert(typeof input == 'string', 'Only URL supported: %s', input);\n    // In particular, Firefox does not tolerate `null` values for\n    // `credentials`.\n    const creds = init.credentials;\n    assert(\n      creds === undefined || creds == 'include' || creds == 'omit',\n      'Only credentials=include|omit support: %s',\n      creds\n    );\n    // Fallback to xhr polyfill since `fetch` api does not support\n    // responseType = 'document'. We do this so we don't have to do any parsing\n    // and document construction on the UI thread which would be expensive.\n    if (init.responseType == 'document') {\n      return fetchPolyfill(input, init);\n    }\n    return (this.win.fetch || fetchPolyfill).apply(null, arguments);\n  }\n\n  /**\n   * @param {string} input URL\n   * @param {?FetchInitDef} init Fetch options object.\n   * @return {!Promise<!FetchResponse>}\n   */\n  fetch(input, init) {\n    init = setupInit(init);\n    return this.fetch_(input, init)\n      .catch((reason) => {\n        /*\n         * If the domain is not valid for SwG we return 404 without\n         * CORS headers and the browser throws a CORS error.\n         * We include some helpful text in the message to point the\n         * publisher towards the real problem.\n         */\n        const targetOrigin = parseUrl(input).origin;\n        throw new Error(\n          `XHR Failed fetching (${targetOrigin}/...): (Note: a CORS error above may indicate that this domain is not configured for Subscribe with Google)`,\n          reason && reason.message\n        );\n      })\n      .then((response) => assertSuccess(response));\n  }\n}\n\n/**\n * Normalized method name by uppercasing.\n * @param {string|undefined} method\n * @return {string}\n * @private\n */\nfunction normalizeMethod_(method) {\n  if (method === undefined) {\n    return 'GET';\n  }\n  method = method.toUpperCase();\n\n  assert(\n    allowedMethods_.includes(method),\n    'Only one of %s is currently allowed. Got %s',\n    allowedMethods_.join(', '),\n    method\n  );\n\n  return method;\n}\n\n/**\n * Sets up and normalizes the FetchInitDef\n *\n * @param {?FetchInitDef=} init Fetch options object.\n * @param {string=} accept The HTTP Accept header value.\n * @return {!FetchInitDef}\n */\nfunction setupInit(init, accept) {\n  init = init || /** @type {FetchInitDef} */ ({});\n  init.method = normalizeMethod_(init.method);\n  init.headers = init.headers || {};\n  if (accept) {\n    init.headers['Accept'] = accept;\n  }\n  return init;\n}\n\n/**\n * A minimal polyfill of Fetch API. It only polyfills what we currently use.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * Notice that the \"fetch\" method itself is not exported as that would require\n * us to immediately support a much wide API.\n *\n * @param {string} input\n * @param {!FetchInitDef} init\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function fetchPolyfill(input, init) {\n  return new Promise(function (resolve, reject) {\n    const xhr = createXhrRequest(init.method || 'GET', input);\n\n    if (init.credentials == 'include') {\n      xhr.withCredentials = true;\n    }\n\n    if (init.responseType in allowedFetchTypes_) {\n      xhr.responseType = init.responseType;\n    }\n\n    if (init.headers) {\n      Object.keys(init.headers).forEach(function (header) {\n        xhr.setRequestHeader(header, init.headers[header]);\n      });\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n        return;\n      }\n      if (xhr.status < 100 || xhr.status > 599) {\n        xhr.onreadystatechange = null;\n        reject(new Error(`Unknown HTTP status ${xhr.status}`));\n        return;\n      }\n\n      // TODO(dvoytenko): This is currently simplified: we will wait for the\n      // whole document loading to complete. This is fine for the use cases\n      // we have now, but may need to be reimplemented later.\n      if (xhr.readyState == /* COMPLETE */ 4) {\n        resolve(new FetchResponse(xhr));\n      }\n    };\n    xhr.onerror = () => {\n      reject(new Error('Network failure'));\n    };\n    xhr.onabort = () => {\n      reject(new Error('Request aborted'));\n    };\n\n    if (init.method == 'POST') {\n      xhr.send(init.body);\n    } else {\n      xhr.send();\n    }\n  });\n}\n\n/**\n * @param {string} method\n * @param {string} url\n * @return {!XMLHttpRequest}\n * @private\n */\nfunction createXhrRequest(method, url) {\n  const xhr = new XMLHttpRequest();\n  if ('withCredentials' in xhr) {\n    xhr.open(method, url, true);\n  } else {\n    throw new Error('CORS is not supported');\n  }\n  return xhr;\n}\n\n/**\n * If 415 or in the 5xx range.\n * @param {number} status\n */\nfunction isRetriable(status) {\n  return status == 415 || (status >= 500 && status < 600);\n}\n\n/**\n * Returns the response if successful or otherwise throws an error.\n * @param {!FetchResponse} response\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function assertSuccess(response) {\n  return new Promise((resolve) => {\n    if (response.ok) {\n      return resolve(response);\n    }\n\n    const {status} = response;\n    const err = new Error(`HTTP error ${status}`);\n    err.retriable = isRetriable(status);\n    // TODO(@jridgewell, #9448): Callers who need the response should\n    // skip processing.\n    err.response = response;\n    throw err;\n  });\n}\n\n/**\n * Response object in the Fetch API.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n */\nexport class FetchResponse {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n\n    /** @const {number} */\n    this.status = this.xhr_.status;\n\n    /** @const {boolean} */\n    this.ok = this.status >= 200 && this.status < 300;\n\n    /** @const {!FetchResponseHeaders} */\n    this.headers = new FetchResponseHeaders(xhr);\n\n    /** @type {boolean} */\n    this.bodyUsed = false;\n\n    /** @type {?ReadableStream} */\n    this.body = null;\n  }\n\n  /**\n   * Create a copy of the response and return it.\n   * @return {!FetchResponse}\n   */\n  clone() {\n    assert(!this.bodyUsed, 'Body already used');\n    return new FetchResponse(this.xhr_);\n  }\n\n  /**\n   * Drains the response and returns the text.\n   * @return {!Promise<string>}\n   * @private\n   */\n  drainText_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    return Promise.resolve(this.xhr_.responseText);\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * text.\n   * @return {!Promise<string>}\n   */\n  text() {\n    return this.drainText_();\n  }\n\n  /**\n   * Drains the response and returns the JSON object.\n   * @return {!Promise<!JsonObject>}\n   */\n  json() {\n    return /** @type {!Promise<!JsonObject>} */ (this.drainText_().then(\n      parseJson\n    ));\n  }\n\n  /**\n   * Reads the xhr responseXML.\n   * @return {!Promise<!Document>}\n   * @private\n   */\n  document_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    assert(\n      this.xhr_.responseXML,\n      'responseXML should exist. Make sure to return ' +\n        'Content-Type: text/html header.'\n    );\n    return /** @type {!Promise<!Document>} */ (Promise.resolve(\n      assert(this.xhr_.responseXML)\n    ));\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * ArrayBuffer.\n   * @return {!Promise<!ArrayBuffer>}\n   */\n  arrayBuffer() {\n    return /** @type {!Promise<!ArrayBuffer>} */ (this.drainText_().then(\n      utf8EncodeSync\n    ));\n  }\n}\n\n/**\n * Provides access to the response headers as defined in the Fetch API.\n * @private Visible for testing.\n */\nexport class FetchResponseHeaders {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n  }\n\n  /**\n   * @param {string} name\n   * @return {?string}\n   */\n  get(name) {\n    return this.xhr_.getResponseHeader(name);\n  }\n\n  /**\n   * @param {string} name\n   * @return {boolean}\n   */\n  has(name) {\n    return this.xhr_.getResponseHeader(name) != null;\n  }\n}\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MAX_Z_INDEX = 2147483647;\n\nconst Constants = {};\n\n/**\n * Supported environments.\n *\n * @enum {string}\n */\nConstants.Environment = {\n  LOCAL: 'LOCAL',\n  PREPROD: 'PREPROD',\n  PRODUCTION: 'PRODUCTION',\n  SANDBOX: 'SANDBOX',\n  TEST: 'TEST',\n  TIN: 'TIN',\n};\n\n/**\n * Supported payment methods.\n *\n * @enum {string}\n */\nConstants.PaymentMethod = {\n  CARD: 'CARD',\n  TOKENIZED_CARD: 'TOKENIZED_CARD',\n  UPI: 'UPI',\n};\n\n/**\n * Auth methods.\n *\n * @enum {string}\n */\nConstants.AuthMethod = {\n  CRYPTOGRAM_3DS: 'CRYPTOGRAM_3DS',\n  PAN_ONLY: 'PAN_ONLY',\n};\n\n/**\n * Returned result status.\n *\n * @enum {string}\n */\nConstants.ResponseStatus = {\n  CANCELED: 'CANCELED',\n  DEVELOPER_ERROR: 'DEVELOPER_ERROR',\n};\n\n/**\n * Supported total price status.\n *\n * @enum {string}\n */\nConstants.TotalPriceStatus = {\n  ESTIMATED: 'ESTIMATED',\n  FINAL: 'FINAL',\n  NOT_CURRENTLY_KNOWN: 'NOT_CURRENTLY_KNOWN',\n};\n\n/**\n * Supported Google Pay payment button type.\n *\n * @enum {string}\n */\nConstants.ButtonType = {\n  SHORT: 'short',\n  LONG: 'long',\n};\n\n/**\n * Supported button colors.\n *\n * @enum {string}\n */\nConstants.ButtonColor = {\n  DEFAULT: 'default',  // Currently defaults to black.\n  BLACK: 'black',\n  WHITE: 'white',\n};\n\n/**\n * Id attributes.\n *\n * @enum {string}\n */\nConstants.Id = {\n  POPUP_WINDOW_CONTAINER: 'popup-window-container',\n};\n\n/** @const {string} */\nConstants.STORAGE_KEY_PREFIX = 'google.payments.api.storage';\n\n/** @const {string} */\nConstants.IS_READY_TO_PAY_RESULT_KEY =\n    Constants.STORAGE_KEY_PREFIX + '.isreadytopay.result';\n\n/** @const {string} */\nConstants.UPI_CAN_MAKE_PAYMENT_CACHE_KEY =\n    Constants.STORAGE_KEY_PREFIX + '.upi.canMakePaymentCache';\n\n\nConstants.CLASS_PREFIX = 'google-payments-';\nConstants.IFRAME_ACTIVE_CONTAINER_CLASS =\n    `${Constants.CLASS_PREFIX}activeContainer`;\nConstants.IFRAME_CONTAINER_CLASS = `${Constants.CLASS_PREFIX}dialogContainer`;\nConstants.IFRAME_STYLE_CENTER_CLASS = `${Constants.CLASS_PREFIX}dialogCenter`;\nConstants.IFRAME_STYLE_CLASS = `${Constants.CLASS_PREFIX}dialog`;\n\nConstants.IFRAME_STYLE = `\n.${Constants.IFRAME_STYLE_CLASS} {\n    animation: none 0s ease 0s 1 normal none running;\n    background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n    background-blend-mode: normal;\n    border: 0 none #333;\n    border-radius: 8px 8px 0 0;\n    border-collapse: separate;\n    bottom: 0;\n    box-shadow: #808080 0 3px 0 0, #808080 0 0 22px;\n    box-sizing: border-box;\n    letter-spacing: normal;\n    max-height: 100%;\n    overflow: visible;\n    position: fixed;\n    width: 100%;\n    z-index: ${MAX_Z_INDEX};\n    -webkit-appearance: none;\n    left: 0;\n}\n@media (min-width: 480px) {\n  .${Constants.IFRAME_STYLE_CLASS} {\n    width: 480px !important;\n    left: -240px !important;\n    margin-left: calc(100vw - 100vw / 2) !important;\n  }\n}\n.${Constants.IFRAME_CONTAINER_CLASS} {\n  background-color: rgba(0,0,0,0.26);\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n}\n.iframeContainer {\n  -webkit-overflow-scrolling: touch;\n}\n`;\n\nConstants.IFRAME_STYLE_CENTER = `\n.${Constants.IFRAME_STYLE_CENTER_CLASS} {\n  animation: none 0s ease 0s 1 normal none running;\n  background-blend-mode: normal;\n  background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n  border-collapse: separate;\n  border-radius: 8px;\n  border: 0px none #333;\n  bottom: auto;\n  box-shadow: #808080 0 0 22px;\n  box-sizing: border-box;\n  left: -240px;\n  letter-spacing: normal;\n  margin-left: calc(100vw - 100vw / 2) !important;\n  max-height: 90%;\n  overflow: visible;\n  position: absolute;\n  top: 100%;\n  transform: scale(0.8);\n  width: 480px;\n  z-index: ${MAX_Z_INDEX};\n  -webkit-appearance: none;\n}\n@media (min-height: 667px) {\n  .${Constants.IFRAME_STYLE_CENTER_CLASS} {\n    max-height: 600px;\n  }\n}\n.${Constants.IFRAME_ACTIVE_CONTAINER_CLASS} {\n  top: 50%;\n  transform: scale(1.0) translateY(-50%);\n}\n`;\n\nConstants.GPAY_BUTTON_WITH_CARD_INFO_IMAGE =\n    'background-image: url(https://pay.google.com/gp/p/generate_gpay_btn_img);';\n\nConstants.BUTTON_LOCALE_TO_MIN_WIDTH = {\n  'en': 152,\n  'bg': 163,\n  'cs': 192,\n  'de': 183,\n  'es': 183,\n  'fr': 183,\n  'hr': 157,\n  'id': 186,\n  'ja': 148,\n  'ko': 137,\n  'ms': 186,\n  'nl': 167,\n  'pl': 182,\n  'pt': 193,\n  'ru': 206,\n  'sk': 157,\n  'sl': 211,\n  'sr': 146,\n  'tr': 161,\n  'uk': 207,\n  'zh': 156,\n};\n\n/**\n * Name of the graypane.\n *\n * @const {string}\n */\nConstants.GPAY_GRAYPANE = 'gpay-graypane';\n\n/**\n * Class used for the gpay button.\n *\n * @const {string}\n */\nConstants.GPAY_BUTTON_CLASS = 'gpay-button';\n\nConstants.BUTTON_STYLE = `\n.${Constants.GPAY_BUTTON_CLASS} {\n  background-origin: content-box;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border: 0px;\n  border-radius: 4px;\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n  cursor: pointer;\n  height: 40px;\n  min-height: 40px;\n  padding: 11px 24px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black {\n  background-color: #000;\n  box-shadow: none;\n  padding: 12px 24px 10px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white {\n  background-color: #fff;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg);\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/light_gpay.svg);\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black.active {\n  background-color: #5f6368;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.black.hover {\n  background-color: #3c4043;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.active {\n  background-color: #fff;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.focus {\n  box-shadow: #e8e8e8 0 1px 1px 0, #e8e8e8 0 1px 3px;\n}\n\n.${Constants.GPAY_BUTTON_CLASS}.white.hover {\n  background-color: #f8f8f8;\n}\n`;\n\nConstants.GPAY_BUTTON_WITH_OFFER_ICON_ADDITIONAL_STYLE = 'position: relative;';\n\nConstants.GPAY_OFFER_ICON_CLASS = 'gpay-offer-icon';\n\nConstants.GPAY_OFFER_ICON_SVG =\n    \"<svg width=\\\"20px\\\" height=\\\"20px\\\" viewBox=\\\"0 0 20 20\\\" \" +\n    \"version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\" +\n    \"\\\"http://www.w3.org/1999/xlink\\\" class=\\\"gpay-offer-icon\\\"><defs><path d=\\\"M19.41,9.58 L10.41,0.58 \" +\n    \"C10.05,0.22 9.55,0 9,0 L2,0 C0.9,0 0,0.9 0,2 L0,9 C0,9.55 0.22,10.05 \" +\n    \"0.59,10.42 L9.59,19.42 C9.95,19.78 10.45,20 11,20 C11.55,20 12.05,19.78 \" +\n    \"12.41,19.41 L19.41,12.41 C19.78,12.05 20,11.55 20,11 C20,10.45 19.77,\" +\n    \"9.94 19.41,9.58 Z\\\" id=\\\"path-1\\\"></path></defs><g id=\\\"buttons_10.05\\\"\" +\n    \" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\" +\n    \"<g id=\\\"Artboard\\\" transform=\\\"translate(-40.000000, -43.000000)\\\">\" +\n    \"<g id=\\\"Group-3\\\" transform=\\\"translate(40.000000, 43.000000)\\\">\" +\n    \"<g id=\\\"Group-2-Copy-2\\\"><g id=\\\"Group-Copy\\\"><g id=\\\"ic_loyalty_24px\\\">\" +\n    \"<mask id=\\\"mask-2\\\" fill=\\\"white\\\"><use xlink:href=\\\"#path-1\\\"></use>\" +\n    \"</mask><use id=\\\"gpay-Shape\\\" fill=\\\"#FF6100\\\" fill-rule=\\\"nonzero\\\" \" +\n    \"xlink:href=\\\"#path-1\\\"></use><path d=\\\"M3.5,5 C2.67,5 2,4.33 2,3.5 C2,\" +\n    \"2.67 2.67,2 3.5,2 C4.33,2 5,2.67 5,3.5 C5,4.33 4.33,5 3.5,5 Z\\\" \" +\n    \"id=\\\"Path\\\" fill=\\\"#FFFFFF\\\" fill-rule=\\\"nonzero\\\" mask=\\\"url(#mask-2)\\\">\" +\n    \"</path></g></g></g><g id=\\\"Group-13-Copy-7\\\" transform=\\\"translate\" +\n    \"(6.000000, 6.000000)\\\" fill=\\\"#FFFFFF\\\" fill-rule=\\\"nonzero\\\">\" +\n    \"<g id=\\\"Group-13-Copy-2\\\"><path d=\\\"M2.15217391,4.55172414 C0.963561082,\" +\n    \"4.55172414 1.99840144e-14,3.53278598 1.99840144e-14,2.27586207 \" +\n    \"C1.99840144e-14,1.01893816 0.963561082,6.30606678e-14 2.15217391,6.\" +\n    \"30606678e-14 C3.34078674,6.30606678e-14 4.30434783,1.01893816 4.30434783,\" +\n    \"2.27586207 C4.30434783,3.53278598 3.34078674,4.55172414 2.15217391,\" +\n    \"4.55172414 Z M2.15217391,3.31034483 C2.69245247,3.31034483 3.13043478,2.\" +\n    \"84719112 3.13043478,2.27586207 C3.13043478,1.70453302 2.69245247,\" +\n    \"1.24137931 2.15217391,1.24137931 C1.61189535,1.24137931 1.17391304,1\" +\n    \".70453302 1.17391304,2.27586207 C1.17391304,2.84719112 1.61189535,3.\" +\n    \"31034483 2.15217391,3.31034483 Z\\\" id=\\\"Combined-Shape\\\"></path>\" +\n    \"<path d=\\\"M6.84782609,9 C5.65921326,9 4.69565217,7.98106184 4.69565217,\" +\n    \"6.72413793 C4.69565217,5.46721402 5.65921326,4.44827586 6.84782609,\" +\n    \"4.44827586 C8.03643892,4.44827586 9,5.46721402 9,6.72413793 C9,7.98106184\" +\n    \" 8.03643892,9 6.84782609,9 Z M6.84782609,7.75862069 C7.38810465,\" +\n    \"7.75862069 7.82608696,7.29546698 7.82608696,6.72413793 C7.82608696\" +\n    \",6.15280888 7.38810465,5.68965517 6.84782609,5.68965517 C6.30754753,\" +\n    \"5.68965517 5.86956522,6.15280888 5.86956522,6.72413793 C5.86956522,\" +\n    \"7.29546698 6.30754753,7.75862069 6.84782609,7.75862069 Z\\\" \" +\n    \"id=\\\"Combined-Shape\\\"></path><polygon id=\\\"Rectangle\\\" \" +\n    \"transform=\\\"translate(4.497720, 4.541938) rotate(34.000000) \" +\n    \"translate(-4.497720, -4.541938) \\\" points=\\\"3.77901778 -0.202295978 \" +\n    \"4.9740273 -0.171019161 5.21642263 9.28617278 4.02141311 9.25489596\\\">\" +\n    \"</polygon></g></g></g></g></g></svg>\";\n\nConstants.GPAY_OFFER_ICON_STYLE = `\n.${Constants.GPAY_OFFER_ICON_CLASS} {\n  position: absolute;\n  right: -5px;\n  top: -5px;\n}\n\n#ic_loyalty_24px use.hover {\n  fill: #FC853B;\n}\n`;\n\nConstants.GPAY_OFFER_DESCRIPTION_CLASS = 'gpay-offer-description';\n\nConstants.GPAY_OFFER_DESCRIPTION_STYLE = `\n@import url(//fonts.googleapis.com/css?family=Google+Sans:500);\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS} {\n  text-align: center;\n  font: 10px 'Google Sans';\n  margin-top: 2px;\n  margin-bottom: 0px;\n}\n\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS}.gpay-btn-clicked {\n  color: #3C4043;\n}\n\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${Constants.GPAY_OFFER_DESCRIPTION_CLASS}.long {\n  min-width: 152px;\n  width: 240px;\n}\n`;\n\n/**\n * Class used for the new gpay button with card info (last 4 digits, card net).\n *\n * @const {string}\n */\nConstants.GPAY_BUTTON_CARD_INFO_CLASS = 'gpay-card-info-btn';\n\nConstants.GPAY_BUTTON_CARD_INFO_BUTTON_STYLE = `\n  .${Constants.GPAY_BUTTON_CARD_INFO_CLASS} {\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border: 0px;\n    border-radius: 4px;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor: pointer;\n    height: 40px;\n    min-height: 40px;\n    padding: 11px 24px;\n    background-color: #000;\n    box-shadow: none;\n    padding: 9px 24px 10px;\n    min-width: 190px;\n    width: 240px;\n  }\n\n  .${Constants.GPAY_BUTTON_CARD_INFO_CLASS}.active {\n    background-color: #5f6368;\n  }\n\n  .${Constants.GPAY_BUTTON_CARD_INFO_CLASS}.hover {\n    background-color: #3c4043;\n  }\n  `;\n\n\n/**\n * Trusted domain for secure context validation\n *\n * @const {string}\n */\nConstants.TRUSTED_DOMAIN = '.google.com';\n\nexport {Constants};\n\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\n\n/**\n * Injects the provided style sheet to the document head.\n * @param {string} styleText The stylesheet to be injected.\n * @return {!Element}\n */\nfunction injectStyleSheet(styleText) {\n  const styleElement = document.createElement('style');\n  styleElement.type = 'text/css';\n  styleElement.textContent = styleText;\n  document.head.appendChild(styleElement);\n  return styleElement;\n}\n\n/**\n * Injects the pay with google iframe.\n * @param {string} iframeClassName The classname of the iFrame wrapper.\n * @return {!{container: !Element, iframe:!HTMLIFrameElement}}\n */\nfunction injectIframe(iframeClassName) {\n  const container = document.createElement('div');\n  container.classList.add(Constants.IFRAME_CONTAINER_CLASS);\n  const iframeContainer = document.createElement('div');\n  iframeContainer.classList.add('iframeContainer');\n  /** @private @const {!HTMLIFrameElement} */\n  const iframe =\n      /** @type {!HTMLIFrameElement} */ (document.createElement('iframe'));\n  iframe.classList.add(iframeClassName);\n  iframe.setAttribute('frameborder', '0');\n  iframe.setAttribute('scrolling', 'no');\n  iframeContainer.appendChild(iframe);\n  container.appendChild(iframeContainer);\n  document.body.appendChild(container);\n  return {'container': container, 'iframe': iframe};\n}\n\nexport {\n  injectStyleSheet,\n  injectIframe,\n};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\n\nconst MAX_Z_INDEX = 2147483647;\n\n\nclass Graypane {\n\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.element_ = doc.createElement(Constants.GPAY_GRAYPANE);\n    setImportantStyles(this.element_, {\n      'z-index': MAX_Z_INDEX,\n      'display': 'none',\n      'position': 'fixed',\n      'top': 0,\n      'right': 0,\n      'bottom': 0,\n      'left': 0,\n      'background-color': 'rgba(32, 33, 36, .6)',\n    });\n\n    /** @private {?Window} */\n    this.popupWindow_ = null;\n\n    this.element_.addEventListener('click', () => {\n      if (this.popupWindow_) {\n        try {\n          this.popupWindow_.focus();\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n    });\n  }\n\n  /**\n   * Shows the graypane.\n   * @param {?Window|undefined} popupWindow\n   * @return {!Promise}\n   */\n  show(popupWindow) {\n    this.popupWindow_ = popupWindow || null;\n    this.doc_.body.appendChild(this.element_);\n    setImportantStyles(this.element_, {\n      'display': 'block',\n      'opacity': 0,\n    });\n    return transition(this.element_, {\n      'opacity': 1,\n    }, 300, 'ease-out');\n  }\n\n  /**\n   * Hides the graypane.\n   * @return {!Promise|undefined}\n   */\n  hide() {\n    this.popupWindow_ = null;\n    if (!this.element_.parentElement) {\n      // Has already been removed or haven't been even added to DOM.\n      // This could be possible after redirect.\n      return;\n    }\n    return transition(this.element_, {\n      'opacity': 0,\n    }, 300, 'ease-out').then(() => {\n      setImportantStyles(this.element_, {'display': 'none'});\n      this.doc_.body.removeChild(this.element_);\n    });\n  }\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n *\n * The `!important` styles are used to avoid accidental specificity overrides\n * from the 3p page's stylesheet.\n *\n * @param {!Element} element\n * @param {!Object<string, string|number>} styles\n */\nfunction setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(k, styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Returns a promise which is resolved after the given duration of animation\n * @param {!Element} el - Element to be observed.\n * @param {!Object<string, string|number>} props - properties to be animated.\n * @param {number} durationMillis - duration of animation.\n * @param {string} curve - transition function for the animation.\n * @return {!Promise} Promise which resolves once the animation is done playing.\n */\nfunction transition(el, props, durationMillis, curve) {\n  const win = el.ownerDocument.defaultView;\n  const previousTransitionValue = el.style.transition || '';\n  return new Promise(resolve => {\n    win.setTimeout(() => {\n      win.setTimeout(resolve, durationMillis);\n      const tr = `${durationMillis}ms ${curve}`;\n      setImportantStyles(el, Object.assign({\n        'transition': `transform ${tr}, opacity ${tr}`,\n      }, props));\n    });\n  }).then(() => {\n    // Stop transition and make sure that the final properties get set.\n    setImportantStyles(el, Object.assign({\n      'transition': previousTransitionValue,\n    }, props));\n  });\n}\n\n\nexport {Graypane};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\nimport {PostMessageService} from './post_message_service.js';\n\n/**\n * Supported interactions between iframe and merchant page.\n *\n * @enum {number}\n */\n// Next Id: 10\nconst PostMessageEventType = {\n  IS_READY_TO_PAY: 6,\n  LOG_BUTTON_CLICK: 5,\n  LOG_IS_READY_TO_PAY_API: 0,\n  LOG_LOAD_PAYMENT_DATA_API: 1,\n  LOG_RENDER_BUTTON: 2,\n  LOG_INITIALIZE_PAYMENTS_CLIENT: 9,\n  LOG_PAY_FRAME_REQUESTED: 15,\n  LOG_PAY_FRAME_LOADED: 16,\n  LOG_PAY_FRAME_LOADED_WITH_ALL_JS: 17,\n  LOG_INLINE_PAYMENT_WIDGET_INITIALIZE: 4,\n  LOG_INLINE_PAYMENT_WIDGET_SUBMIT: 3,\n  LOG_INLINE_PAYMENT_WIDGET_DISPLAYED: 7,\n  LOG_INLINE_PAYMENT_WIDGET_HIDDEN: 8,\n};\n\n/**\n * Types of buy flow activity modes.\n *\n * @enum {number}\n */\nconst BuyFlowActivityMode = {\n  UNKNOWN_MODE: 0,\n  IFRAME: 1,\n  POPUP: 2,\n  REDIRECT: 3,\n  ANDROID_NATIVE: 4,\n  PAYMENT_HANDLER: 5,\n};\n\n/**\n * Types of buy flow activity modes.\n *\n * @enum {number}\n */\nconst PublicErrorCode = {\n  UNKNOWN_ERROR_TYPE: 0,\n  INTERNAL_ERROR: 1,\n  DEVELOPER_ERROR: 2,\n  BUYER_ACCOUNT_ERROR: 3,\n  MERCHANT_ACCOUNT_ERROR: 4,\n  UNSUPPORTED_API_VERSION: 5,\n  BUYER_CANCEL: 6,\n};\n\n/**\n * The presentation mode of the buy flow\n *\n * @enum {number}\n */\nconst BuyFlowMode = {\n  PAY_WITH_GOOGLE: 5,\n  SUBSCRIBE_WITH_GOOGLE: 6,\n};\n\n/**\n * Iframe used for logging and prefetching.\n *\n * @type {?Element}\n */\nlet iframe = null;\n\n/** @type {?PostMessageService} */\nlet postMessageService = null;\n\n/** @type {?string} */\nlet environment = null;\n\n/** @type {?string} */\nlet googleTransactionId = null;\n\n/** @type {number} */\nlet originTimeMs = Date.now();\n\n/** @type {?BuyFlowActivityMode} */\nlet buyFlowActivityMode = null;\n\n/** @type {boolean} */\nlet iframeLoaded = false;\n\n/** @type {!Array<!Object>} */\nlet buffer = [];\n\nclass PayFrameHelper {\n  /**\n   * Creates a hidden iframe for logging and appends it to the top level\n   * document.\n   */\n  static load() {\n    if (iframe) {\n      return;\n    }\n    const initOptions =\n        /** @type {!PaymentOptions} */ (window['gpayInitParams']) || {};\n    environment = initOptions.environment || Constants.Environment.PRODUCTION;\n    iframe = document.createElement('iframe');\n    // Pass in origin because document.referrer inside iframe is empty in\n    // certain cases\n    // Can be replaced by iframe.src=... in non Google context.\n    iframe.src = PayFrameHelper.getIframeUrl_(\n            window.location.origin,\n            initOptions.merchantInfo && initOptions.merchantInfo.merchantId);\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_PAY_FRAME_REQUESTED,\n      'clientLatencyStartMs': Date.now(),\n    });\n    iframe.height = '0';\n    iframe.width = '0';\n    iframe.style.display = 'none';\n    iframe.style.visibility = 'hidden';\n    iframe.onload = function() {\n      PayFrameHelper.postMessage({\n        'eventType': PostMessageEventType.LOG_PAY_FRAME_LOADED_WITH_ALL_JS,\n        'clientLatencyStartMs': Date.now(),\n      });\n      PayFrameHelper.iframeLoaded();\n    };\n    // If the body is already loaded, just append the iframe. Otherwise, we wait\n    // until the DOM has loaded to append the iframe, otherwise document.body is\n    // null.\n    if (document.body) {\n      PayFrameHelper.initialize_();\n    } else {\n      document.addEventListener(\n          'DOMContentLoaded', () => PayFrameHelper.initialize_());\n    }\n  }\n\n  /**\n   * Appends the iframe to the DOM and updates the post message service.\n   * @private\n   */\n  static initialize_() {\n    document.body.appendChild(iframe);\n    postMessageService = new PostMessageService(iframe.contentWindow);\n  }\n\n  /**\n   * Sends a message to the iframe and wait for a response.\n   * Uses the responseHandler specified only if the responseType is a match.\n   *\n   * @param {!Object} data\n   * @param {!PostMessageEventType} eventType\n   * @param {string} responseType\n   * @param {function(!Event)} responseHandler\n   */\n  static sendAndWaitForResponse(\n      data, eventType, responseType, responseHandler) {\n    function callback(event) {\n      if (event.data[responseType]) {\n        responseHandler(event);\n        // We only want to process the response from the payframe once.\n        // so stop listening to the event once processed.\n        PayFrameHelper.removeMessageEventListener_(callback);\n      }\n    }\n\n    PayFrameHelper.addMessageEventListener_(callback);\n\n    const postMessageData = Object.assign({'eventType': eventType}, data);\n    PayFrameHelper.postMessage(postMessageData);\n  }\n\n  /**\n   * Add an event listener for listening to messages received.\n   *\n   * @param {function(!Event)} callback\n   * @private\n   */\n  static addMessageEventListener_(callback) {\n    window.addEventListener('message', callback);\n  }\n\n  /**\n   * Remove the event listener for listening to messages.\n   *\n   * @param {function(!Event)} callback\n   * @private\n   */\n  static removeMessageEventListener_(callback) {\n    window.removeEventListener('message', callback);\n  }\n\n  /**\n   * Posts a message to the iframe with the given data.\n   *\n   * @param {!Object} data\n   */\n  static postMessage(data) {\n    if (!iframeLoaded) {\n      buffer.push(data);\n      return;\n    }\n    const postMessageData = Object.assign(\n        {\n          'buyFlowActivityMode': buyFlowActivityMode,\n          'googleTransactionId': googleTransactionId,\n          'originTimeMs': originTimeMs,\n        },\n        data);\n    postMessageService.postMessage(\n        postMessageData, PayFrameHelper.getIframeOrigin_());\n  }\n\n  /**\n   * Sets the activity mode.\n   *\n   * @param {!BuyFlowActivityMode} mode\n   */\n  static setBuyFlowActivityMode(mode) {\n    buyFlowActivityMode = mode;\n  }\n\n  /**\n   * Sets the google transaction id.\n   *\n   * @param {string} txnId\n   */\n  static setGoogleTransactionId(txnId) {\n    googleTransactionId = txnId;\n  }\n\n  /**\n   * Sets the originTimeMs. To be used only for tests.\n   *\n   * @param {number} originTimeMsTemp\n   */\n  static setOriginTimeMs(originTimeMsTemp) {\n    originTimeMs = originTimeMsTemp;\n  }\n\n  /**\n   * Override postMessageService for testing.\n   *\n   * @param {!PostMessageService} messageService\n   */\n  static setPostMessageService(messageService) {\n    postMessageService = messageService;\n  }\n\n  /**\n   * Clears the singleton variables.\n   */\n  static reset() {\n    iframe = null;\n    buffer.length = 0;\n    iframeLoaded = false;\n    buyFlowActivityMode = null;\n  }\n\n  /**\n   * Sets whether the iframe has been loaded or not.\n   *\n   * @param {boolean} loaded\n   */\n  static setIframeLoaded(loaded) {\n    iframeLoaded = loaded;\n  }\n\n  /**\n   * Called whenever the iframe is loaded.\n   */\n  static iframeLoaded() {\n    iframeLoaded = true;\n    buffer.forEach(function(data) {\n      PayFrameHelper.postMessage(data);\n    });\n    buffer.length = 0;\n  }\n\n  /**\n   * Returns the events that have been buffered.\n   *\n   * @return {!Array<!Object>}\n   */\n  static getBuffer() {\n    return buffer;\n  }\n\n  /**\n   * Mocks the iframe as an arbitrary html element instead of actually injecting\n   * it for testing.\n   */\n  static injectIframeForTesting() {\n    PayFrameHelper.reset();\n    iframe = document.createElement('p');\n    PayFrameHelper.iframeLoaded();\n  }\n\n  /**\n   * Returns the payframe origin based on the environment.\n   *\n   * @return {string}\n   * @private\n   */\n  static getIframeOrigin_() {\n    let iframeUrl = 'https://pay';\n    if (environment == Constants.Environment.SANDBOX) {\n      iframeUrl += '.sandbox';\n    } else if (environment == Constants.Environment.PREPROD) {\n      iframeUrl += '-preprod.sandbox';\n    }\n    return iframeUrl + '.google.com';\n  }\n\n  /**\n   * Returns the payframe URL based on the environment.\n   *\n   * @param {string} origin The origin that is opening the payframe.\n   * @param {string|null=} merchantId The merchant id.\n   * @return {string}\n   * @private\n   */\n  static getIframeUrl_(origin, merchantId) {\n    // TrustedResourceUrl header needs to start with https or '//'.\n    const iframeUrl = `https://pay${environment == Constants.Environment.PREPROD ?\n             '-preprod.sandbox' :\n             environment == Constants.Environment.SANDBOX ? '.sandbox' : ''}.google.com/gp/p/ui/payframe?origin=${origin}&mid=%{merchantId}`;\n    return iframeUrl;\n  }\n}\n\nexport {\n  BuyFlowActivityMode,\n  BuyFlowMode,\n  PayFrameHelper,\n  PostMessageEventType,\n  PublicErrorCode,\n};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BuyFlowActivityMode,\n  BuyFlowMode,\n  PayFrameHelper,\n  PostMessageEventType,\n  PublicErrorCode,\n} from './pay_frame_helper.js';\nimport {Constants} from './constants.js';\nimport {PaymentsClientDelegateInterface} from './payments_client_delegate_interface.js';\nimport {PaymentsRequestDelegate} from './payments_request_delegate.js';\nimport {PaymentsWebActivityDelegate} from './payments_web_activity_delegate.js';\nimport {UpiHandler} from './upi_handler.js';\nimport {\n  apiV2DoesMerchantSupportSpecifiedCardType,\n  chromeSupportsPaymentHandler,\n  chromeSupportsPaymentRequest,\n  doesMerchantSupportOnlyTokenizedCards,\n  getUpiPaymentMethod,\n  validateIsReadyToPayRequest,\n  validatePaymentDataRequest,\n  validatePaymentOptions,\n  validateSecureContext,\n} from './validator.js';\n\nconst {ActivityPorts} = require('web-activities/activity-ports');\n\nimport {createGoogleTransactionId} from './utils.js';\n\nconst TRUSTED_DOMAINS = [\n  'actions.google.com',\n  'amp-actions.sandbox.google.com',\n  'amp-actions-staging.sandbox.google.com',\n  'amp-actions-autopush.sandbox.google.com',\n  'payments.developers.google.com',\n  'payments.google.com',\n];\n\n/**\n * The client for interacting with the Google Payment APIs.\n * <p>\n * The async refers to the fact that this client supports redirects\n * when using webactivties.\n * <p>\n * If you are using this be sure that this is what you want.\n * <p>\n * In almost all cases PaymentsClient is the better client to use because\n * it exposes a promises based api which is easier to deal with.\n * @final\n */\nclass PaymentsAsyncClient {\n  /**\n   * @param {!PaymentOptions} paymentOptions\n   * @param {function(!Promise<!PaymentData>)} onPaymentResponse\n   * @param {boolean=} useIframe\n   * @param {!ActivityPorts=} activities Can be used to provide a shared\n   *   activities manager. By default, the new manager is created.\n   */\n  constructor(paymentOptions, onPaymentResponse, useIframe, activities) {\n    this.onPaymentResponse_ = onPaymentResponse;\n\n    validatePaymentOptions(paymentOptions);\n\n    /** @private {?number} */\n    this.loadPaymentDataApiStartTimeMs_ = null;\n\n    /** @private @const {string} */\n    this.environment_ =\n      paymentOptions.environment || Constants.Environment.TEST;\n    if (!PaymentsAsyncClient.googleTransactionId_) {\n      PaymentsAsyncClient.googleTransactionId_ = /** @type {string} */ (this.isInTrustedDomain_() &&\n      paymentOptions['i'] &&\n      paymentOptions['i']['googleTransactionId']\n        ? paymentOptions['i']['googleTransactionId']\n        : createGoogleTransactionId(this.environment_));\n    }\n\n    /** @private @const {!PaymentOptions} */\n    this.paymentOptions_ = paymentOptions;\n\n    /** @private @const {!PaymentsClientDelegateInterface} */\n    this.webActivityDelegate_ = new PaymentsWebActivityDelegate(\n      this.environment_,\n      PaymentsAsyncClient.googleTransactionId_,\n      useIframe,\n      activities,\n      paymentOptions['i'] && paymentOptions['i']['redirectKey']\n    );\n\n    /** @private {number} */\n    this.buyFlowMode_ = BuyFlowMode.PAY_WITH_GOOGLE;\n\n    const paymentRequestSupported = chromeSupportsPaymentRequest();\n    // TODO: Remove the temporary hack that disable payments\n    // request for inline flow.\n    /** @private @const {?PaymentsClientDelegateInterface} */\n    this.delegate_ =\n      paymentRequestSupported && !useIframe\n        ? new PaymentsRequestDelegate(this.environment_)\n        : this.webActivityDelegate_;\n\n    this.upiHandler_ = new UpiHandler();\n\n    this.webActivityDelegate_.onResult(this.onResult_.bind(this));\n    this.delegate_.onResult(this.onResult_.bind(this));\n\n    // Load PayFrameHelper upon client construction.\n    PayFrameHelper.load();\n\n    // If web delegate is used anyway then this is overridden in the web\n    // activity delegate when load payment data is called.\n    if (chromeSupportsPaymentHandler()) {\n      PayFrameHelper.setBuyFlowActivityMode(\n        BuyFlowActivityMode.PAYMENT_HANDLER\n      );\n    } else if (paymentRequestSupported) {\n      PayFrameHelper.setBuyFlowActivityMode(BuyFlowActivityMode.ANDROID_NATIVE);\n    }\n\n    PayFrameHelper.setGoogleTransactionId(\n      PaymentsAsyncClient.googleTransactionId_\n    );\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_INITIALIZE_PAYMENTS_CLIENT,\n      'clientLatencyStartMs': Date.now(),\n    });\n\n    window.addEventListener('message', (event) =>\n      this.handleMessageEvent_(event)\n    );\n  }\n\n  /**\n   * Check whether the user can make payments using the Payment API.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   */\n  isReadyToPay(isReadyToPayRequest) {\n    // Merge with paymentOptions, preferring values from isReadyToPayRequest\n    if (isReadyToPayRequest) {\n      isReadyToPayRequest = Object.assign(\n        {},\n        this.paymentOptions_,\n        isReadyToPayRequest\n      );\n    }\n    const startTimeMs = Date.now();\n    /** @type {?string} */\n    const errorMessage =\n      validateSecureContext() ||\n      validateIsReadyToPayRequest(isReadyToPayRequest);\n    if (errorMessage) {\n      return new Promise((resolve, reject) => {\n        PaymentsAsyncClient.logDevErrorToConsole_('isReadyToPay', errorMessage);\n        PayFrameHelper.postMessage({\n          'eventType': PostMessageEventType.LOG_IS_READY_TO_PAY_API,\n          'error': PublicErrorCode.DEVELOPER_ERROR,\n        });\n        reject({\n          'statusCode': Constants.ResponseStatus.DEVELOPER_ERROR,\n          'statusMessage': errorMessage,\n        });\n      });\n    }\n\n    const isReadyToPayPromise = this.isReadyToPay_(isReadyToPayRequest);\n\n    isReadyToPayPromise.then((response) => {\n      PayFrameHelper.postMessage({\n        'eventType': PostMessageEventType.LOG_IS_READY_TO_PAY_API,\n        'clientLatencyStartMs': startTimeMs,\n        'isReadyToPayApiResponse': response,\n      });\n      return response;\n    });\n    return isReadyToPayPromise;\n  }\n\n  /**\n   * Actual implementation of isReadyToPay in a private method so that\n   * we can add callbacks to the promise to measure latencies.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   * @private\n   */\n  isReadyToPay_(isReadyToPayRequest) {\n    if (this.upiHandler_.isUpiRequest(isReadyToPayRequest)) {\n      return this.upiHandler_.isReadyToPay(isReadyToPayRequest);\n    }\n    if (\n      chromeSupportsPaymentRequest() &&\n      !isNativeDisabledInRequest(isReadyToPayRequest)\n    ) {\n      if (isReadyToPayRequest.apiVersion >= 2) {\n        return this.isReadyToPayApiV2ForChromePaymentRequest_(\n          isReadyToPayRequest\n        );\n      } else {\n        // This is the apiVersion 1 branch.\n        // If the merchant supports only Tokenized cards then just rely on\n        // delegate to give us the result.\n        // This will need to change once b/78519188 is fixed.\n        const webPromise = this.webActivityDelegate_.isReadyToPay(\n          isReadyToPayRequest\n        );\n        const nativePromise = this.delegate_.isReadyToPay(isReadyToPayRequest);\n        if (\n          doesMerchantSupportOnlyTokenizedCards(isReadyToPayRequest) &&\n          !chromeSupportsPaymentHandler()\n        ) {\n          return nativePromise;\n        }\n        // Return webIsReadyToPay only if delegateIsReadyToPay has been\n        // executed.\n        return nativePromise.then(() => webPromise);\n      }\n    }\n    const webPromise = this.webActivityDelegate_.isReadyToPay(\n      isReadyToPayRequest\n    );\n    return webPromise;\n  }\n\n  /**\n   * Handle is ready to pay for api v2.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   * @private\n   */\n  isReadyToPayApiV2ForChromePaymentRequest_(isReadyToPayRequest) {\n    let defaultPromise = Promise.resolve({'result': false});\n    if (isReadyToPayRequest.existingPaymentMethodRequired) {\n      defaultPromise = Promise.resolve({\n        'result': false,\n        'paymentMethodPresent': false,\n      });\n    }\n\n    let nativePromise = defaultPromise;\n    if (\n      apiV2DoesMerchantSupportSpecifiedCardType(\n        isReadyToPayRequest,\n        Constants.AuthMethod.CRYPTOGRAM_3DS\n      )\n    ) {\n      // If the merchant supports tokenized cards.\n      // Make a separate call to gms core to check if the user isReadyToPay\n      // with just tokenized cards. We can't pass in PAN_ONLY here\n      // because gms core always returns true for PAN_ONLY.\n      // Leave other payment methods as is.\n      const nativeRtpRequest /** @type {!IsReadyToPayRequest} */ = JSON.parse(\n        JSON.stringify(isReadyToPayRequest)\n      );\n      for (let i = 0; i < nativeRtpRequest.allowedPaymentMethods.length; i++) {\n        if (\n          nativeRtpRequest.allowedPaymentMethods[i].type ==\n          Constants.PaymentMethod.CARD\n        ) {\n          nativeRtpRequest.allowedPaymentMethods[i].parameters[\n            'allowedAuthMethods'\n          ] = [Constants.AuthMethod.CRYPTOGRAM_3DS];\n        }\n      }\n\n      nativePromise = this.delegate_.isReadyToPay(nativeRtpRequest);\n    }\n\n    let webPromise = defaultPromise;\n    if (\n      apiV2DoesMerchantSupportSpecifiedCardType(\n        isReadyToPayRequest,\n        Constants.AuthMethod.PAN_ONLY\n      )\n    ) {\n      webPromise = this.webActivityDelegate_.isReadyToPay(isReadyToPayRequest);\n    }\n\n    // Update session storage with payment handler canMakePayment result but\n    // rely on web delegate for actual response\n    if (chromeSupportsPaymentHandler()) {\n      return nativePromise.then(() => webPromise);\n    }\n\n    return nativePromise.then((nativeResult) => {\n      if ((nativeResult && nativeResult['result']) == true) {\n        return nativeResult;\n      }\n      return webPromise;\n    });\n  }\n\n  /**\n   * Prefetch paymentData to speed up loadPaymentData call. Note the provided\n   * paymentDataRequest should exactly be the same as provided in\n   * loadPaymentData to make the loadPaymentData call fast since current\n   * web flow prefetching is based on the full request parameters.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   */\n  prefetchPaymentData(paymentDataRequest) {\n    /** @type {?string} */\n    const errorMessage =\n      validateSecureContext() || validatePaymentDataRequest(paymentDataRequest);\n    if (errorMessage) {\n      PaymentsAsyncClient.logDevErrorToConsole_(\n        'prefetchPaymentData',\n        errorMessage\n      );\n      return;\n    }\n    this.assignInternalParams_(paymentDataRequest);\n    if (\n      chromeSupportsPaymentRequest() &&\n      !isNativeDisabledInRequest(paymentDataRequest)\n    ) {\n      this.delegate_.prefetchPaymentData(paymentDataRequest);\n    } else {\n      // For non chrome supports always use the hosting page.\n      this.webActivityDelegate_.prefetchPaymentData(paymentDataRequest);\n    }\n  }\n\n  /**\n   * Request PaymentData, which contains necessary infomartion to complete a\n   * payment.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   */\n  loadPaymentData(paymentDataRequest) {\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_BUTTON_CLICK,\n    });\n    const errorMessage =\n      validateSecureContext() || validatePaymentDataRequest(paymentDataRequest);\n    this.buyFlowMode_ =\n      paymentDataRequest && paymentDataRequest.swg\n        ? BuyFlowMode.SUBSCRIBE_WITH_GOOGLE\n        : BuyFlowMode.PAY_WITH_GOOGLE;\n    if (errorMessage) {\n      this.onPaymentResponse_(\n        new Promise((resolve, reject) => {\n          PayFrameHelper.postMessage({\n            'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n            'error': PublicErrorCode.DEVELOPER_ERROR,\n            'buyFlowMode': this.buyFlowMode_,\n          });\n          PaymentsAsyncClient.logDevErrorToConsole_(\n            'loadPaymentData',\n            errorMessage\n          );\n          reject({\n            'statusCode': Constants.ResponseStatus.DEVELOPER_ERROR,\n            'statusMessage': errorMessage,\n          });\n        })\n      );\n      return;\n    }\n\n    // Handler for UPI PaymentMethod\n    // Currently we don't support UPI along with other payment methods, if\n    // UPI is in payment methods then we assume it is UPI only.\n    const upiPaymentMethod = getUpiPaymentMethod(paymentDataRequest);\n    if (upiPaymentMethod) {\n      this.upiHandler_.loadPaymentData(\n        paymentDataRequest,\n        upiPaymentMethod,\n        this.onResult_.bind(this)\n      );\n      return;\n    }\n\n    this.loadPaymentDataApiStartTimeMs_ = Date.now();\n    this.assignInternalParams_(paymentDataRequest);\n    // We want to fall back to the web delegate if payment handler is supported\n    // and isReadyToPay bit is not explicitly set to true (fallback to web if\n    // isReadyToPay wasn't called for PH)\n    if (\n      chromeSupportsPaymentHandler() ||\n      isNativeDisabledInRequest(paymentDataRequest)\n    ) {\n      this.webActivityDelegate_.loadPaymentData(paymentDataRequest);\n    } else {\n      this.delegate_.loadPaymentData(paymentDataRequest);\n    }\n  }\n\n  /**\n   * Log developer error to console.\n   *\n   * @param {string} apiName\n   * @param {?string} errorMessage\n   * @private\n   */\n  static logDevErrorToConsole_(apiName, errorMessage) {\n    console.error('DEVELOPER_ERROR in ' + apiName + ' : ' + errorMessage);\n  }\n\n  /**\n   * Return a <div> element containing a Google Pay payment button.\n   *\n   * @param {!ButtonOptions=} options\n   * @return {!Element}\n   */\n  createButton(options = {}) {\n    const button = null;\n    // Only log if button was created successfully\n    const startTimeMs = Date.now();\n    PayFrameHelper.postMessage({\n      'eventType': PostMessageEventType.LOG_RENDER_BUTTON,\n      'clientLatencyStartMs': startTimeMs,\n    });\n    return button;\n  }\n\n  /**\n   * @param {!Event} e postMessage event from the AMP page.\n   * @private\n   */\n  handleMessageEvent_(e) {\n    if (this.isInTrustedDomain_()) {\n      // Only handles the event right now if loaded in trusted domain.\n      if (e.data['name'] === 'logPaymentData') {\n        PayFrameHelper.postMessage(e.data['data']);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @return {boolean}\n   */\n  isInTrustedDomain_() {\n    return TRUSTED_DOMAINS.indexOf(window.location.hostname) != -1;\n  }\n\n  /**\n   * Called when load payment data result is returned. This triggers the payment\n   * response callback passed to the client.\n   *\n   * @private\n   */\n  onResult_(response) {\n    response\n      .then((result) => {\n        PayFrameHelper.postMessage({\n          'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n          'clientLatencyStartMs': this.loadPaymentDataApiStartTimeMs_,\n          'buyFlowMode': this.buyFlowMode_,\n        });\n      })\n      .catch((result) => {\n        if (result['errorCode']) {\n          PayFrameHelper.postMessage({\n            'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n            'error': /** @type {!PublicErrorCode} */ (result['errorCode']),\n            'buyFlowMode': this.buyFlowMode_,\n          });\n        } else {\n          // If user closes window we don't get a error code\n          PayFrameHelper.postMessage({\n            'eventType': PostMessageEventType.LOG_LOAD_PAYMENT_DATA_API,\n            'error': PublicErrorCode.BUYER_CANCEL,\n            'buyFlowMode': this.buyFlowMode_,\n          });\n        }\n      });\n    this.onPaymentResponse_(response);\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {!PaymentDataRequest}\n   * @private\n   */\n  assignInternalParams_(paymentDataRequest) {\n    const internalParam = {\n      'startTimeMs': Date.now(),\n      'googleTransactionId': PaymentsAsyncClient.googleTransactionId_,\n    };\n    paymentDataRequest['i'] = paymentDataRequest['i']\n      ? Object.assign(internalParam, paymentDataRequest['i'])\n      : internalParam;\n    return paymentDataRequest;\n  }\n}\n\n/** @type {?string} */\nPaymentsAsyncClient.googleTransactionId_;\n\n/**\n * Whether the request specifies that the native support has to be disabled.\n *\n * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n * @return {boolean}\n */\nfunction isNativeDisabledInRequest(request) {\n  return (request['i'] && request['i']['disableNative']) === true;\n}\n\nexport {PaymentsAsyncClient};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * An interface which captures what we need to start up buyflow across surfaces.\n * @interface\n */\nclass PaymentsClientDelegateInterface {\n  /**\n   * Check whether the user can make payments using the Payment API.\n   *\n   * @param {!IsReadyToPayRequest} isReadyToPayRequest\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   */\n  isReadyToPay(isReadyToPayRequest) {}\n\n  /**\n   * Prefetch paymentData to speed up loadPaymentData call. Note the provided\n   * paymentDataRequest should exactly be the same as provided in\n   * loadPaymentData to make the loadPaymentData call fast.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   */\n  prefetchPaymentData(paymentDataRequest) {}\n\n  /**\n   * Request PaymentData, which contains necessary infomartion to complete a\n   * payment.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   */\n  loadPaymentData(paymentDataRequest) {}\n\n  /**\n   * @param {function(!Promise<!PaymentData>)} callback\n   */\n  onResult(callback) {}\n}\n\nexport {PaymentsClientDelegateInterface};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Description of this file.\n */\nimport {Constants} from './constants.js';\nimport {PaymentsClientDelegateInterface} from './payments_client_delegate_interface.js';\n\n/**\n * An implementation of PaymentsClientDelegateInterface that leverages payment\n * request.\n * @implements {PaymentsClientDelegateInterface}\n */\nclass PaymentsRequestDelegate {\n  /**\n   * @param {string} environment\n   */\n  constructor(environment) {\n    this.environment_ = environment;\n\n    /** @private {?function(!Promise<!PaymentData>)} */\n    this.callback_ = null;\n  }\n\n  /** @override */\n  onResult(callback) {\n    this.callback_ = callback;\n  }\n\n  /** @override */\n  isReadyToPay(isReadyToPayRequest) {\n    /** @type{!PaymentRequest} */\n    const paymentRequest = this.createPaymentRequest_(isReadyToPayRequest);\n    return new Promise((resolve, reject) => {\n      paymentRequest.canMakePayment()\n          .then(result => {\n            window.sessionStorage.setItem(\n                Constants.IS_READY_TO_PAY_RESULT_KEY, result.toString());\n            const response = {'result': result};\n            if (isReadyToPayRequest.apiVersion >= 2 &&\n                isReadyToPayRequest.existingPaymentMethodRequired) {\n              // For apiVersion 2, we always use native to only check for\n              // tokenized cards.\n              // For tokenized cards native always does a presence check so\n              // we can say that if canMakePayment is true for native for\n              // tokenizedCards then the user has a payment method which is\n              // present.\n              response['paymentMethodPresent'] = result;\n            }\n            resolve(response);\n          })\n          .catch(function(err) {\n            if (window.sessionStorage.getItem(\n                    Constants.IS_READY_TO_PAY_RESULT_KEY)) {\n              resolve({\n                'result': window.sessionStorage.getItem(\n                              Constants.IS_READY_TO_PAY_RESULT_KEY) == 'true'\n              });\n            } else {\n              resolve({'result': false});\n            }\n          });\n    });\n  }\n\n  /** @override */\n  prefetchPaymentData(paymentDataRequest) {\n    // Creating PaymentRequest instance will call\n    // Gcore isReadyToPay internally which will prefetch tempaltes.\n    this.createPaymentRequest_(\n        paymentDataRequest, this.environment_,\n        paymentDataRequest.transactionInfo.currencyCode,\n        paymentDataRequest.transactionInfo.totalPrice);\n  }\n\n  /** @override */\n  loadPaymentData(paymentDataRequest) {\n    this.loadPaymentDataThroughPaymentRequest_(paymentDataRequest);\n  }\n\n  /**\n   * Create PaymentRequest instance.\n   *\n   * @param {!IsReadyToPayRequest|!PaymentDataRequest} request The necessary information to check if user is\n   *     ready to pay or to support a payment from merchants.\n   * @param {?string=} environment (optional)\n   * @param {?string=} currencyCode (optional)\n   * @param {?string=} totalPrice (optional)\n   * @return {!PaymentRequest} PaymentRequest instance.\n   * @private\n   */\n  createPaymentRequest_(request, environment, currencyCode, totalPrice) {\n    let data = {};\n    if (request) {\n      data = JSON.parse(JSON.stringify(request));\n    }\n\n    // Only set the apiVersion if the merchant doesn't set it.\n    if (!data['apiVersion']) {\n      data['apiVersion'] = 1;\n    }\n\n    // Add allowedPaymentMethods for swg to get through gms core validation.\n    if (data['swg']) {\n      data['allowedPaymentMethods'] = [Constants.PaymentMethod.CARD];\n    }\n\n    if (environment && environment == Constants.Environment.TEST) {\n      data['environment'] = environment;\n    }\n\n    const supportedInstruments = [{\n      'supportedMethods': ['https://google.com/pay'],\n      'data': data,\n    }];\n\n    const details = {\n      'total': {\n        'label': 'Estimated Total Price',\n        'amount': {\n          // currency and value are required fields in PaymentRequest, but these\n          // fields will never be used since PaymentRequest UI is skipped when\n          // we're the only payment method, so default to some value to by pass\n          // this requirement.\n          'currency': currencyCode || 'USD',\n          'value': totalPrice || '0',\n        }\n      }\n    };\n\n    return new PaymentRequest(supportedInstruments, details);\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   * @private\n   */\n  loadPaymentDataThroughPaymentRequest_(paymentDataRequest) {\n    const currencyCode = (paymentDataRequest.transactionInfo &&\n                          paymentDataRequest.transactionInfo.currencyCode) ||\n        undefined;\n    const totalPrice = (paymentDataRequest.transactionInfo &&\n                        paymentDataRequest.transactionInfo.totalPrice) ||\n        undefined;\n    const paymentRequest = this.createPaymentRequest_(\n        paymentDataRequest, this.environment_, currencyCode, totalPrice);\n    this.callback_(\n        /** @type{!Promise<!PaymentData>} */\n        (paymentRequest.show()\n             .then(\n                 /**\n                  * @param {!PaymentResponse} paymentResponse\n                  * @return {!PaymentData}\n                  */\n                 (paymentResponse) => {\n                   // Should be called to dismiss any remaining UI\n                   paymentResponse.complete('success');\n                   return paymentResponse.details;\n                 })\n             .catch(function(err) {\n               err['statusCode'] = Constants.ResponseStatus.CANCELED;\n               throw err;\n             })));\n  }\n}\n\nexport {PaymentsRequestDelegate};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BuyFlowActivityMode,\n  PayFrameHelper,\n  PostMessageEventType,\n} from './pay_frame_helper.js';\nimport {Constants} from './constants.js';\nimport {Graypane} from './graypane.js';\nimport {PaymentsClientDelegateInterface} from './payments_client_delegate_interface.js';\nimport {doesMerchantSupportOnlyTokenizedCards} from './validator.js';\nimport {injectIframe, injectStyleSheet} from './element_injector.js';\n\nconst {\n  ActivityPort,\n  ActivityPorts,\n  ActivityIframePort,\n} = require('web-activities/activity-ports');\n\nconst GPAY_ACTIVITY_REQUEST = 'GPAY';\nconst IFRAME_CLOSE_DURATION_IN_MS = 250;\nconst IFRAME_SHOW_UP_DURATION_IN_MS = 250;\nconst IFRAME_SMOOTH_HEIGHT_TRANSITION = `height ${IFRAME_SHOW_UP_DURATION_IN_MS}ms`;\nconst ERROR_PREFIX = 'Error: ';\n\n/**\n * Supported browser user agent keys.\n *\n * @enum {string}\n */\nconst BrowserUserAgent = {\n  CHROME: 'Chrome',\n  FIREFOX: 'Firefox',\n  SAFARI: 'Safari',\n};\n\n/**\n * Resizing payload including resize height and transition style.\n *\n * @typedef {{\n *   height: string,\n *   transition: string,\n * }}\n */\nlet ResizePayload;\n\n/**\n * An implementation of PaymentsClientDelegateInterface that uses the custom\n * hosting page along with web activities to actually get to the hosting page.\n * @implements {PaymentsClientDelegateInterface}\n */\nclass PaymentsWebActivityDelegate {\n  /**\n   * @param {string} environment\n   * @param {string} googleTransactionId\n   * @param {boolean=} useIframe\n   * @param {!ActivityPorts=} activities Can be used to provide a shared\n   *   activities manager. By default, the new manager is created.\n   * @param {?string=} redirectKey The redirect key used for redirect mode.\n   */\n  constructor(\n    environment,\n    googleTransactionId,\n    useIframe,\n    activities,\n    redirectKey\n  ) {\n    this.environment_ = environment;\n    /** @private @const {boolean} */\n\n    /** @const {!ActivityPorts} */\n    this.activities = activities || new ActivityPorts(window);\n    /** @const @private {!Graypane} */\n    this.graypane_ = new Graypane(window.document);\n    /** @private {?function(!Promise<!PaymentData>)} */\n    this.callback_ = null;\n    /**\n     * @private {?{\n     *             container: !Element,\n     *             iframe:!HTMLIFrameElement,\n     *             request:!PaymentDataRequest,\n     *             dataPromise:?Promise<!PaymentData>}}\n     */\n    this.prefetchedObjects_ = null;\n    /** @private {boolean} */\n    this.shouldHandleResizing_ = false;\n    /** @private {?ActivityIframePort} */\n    this.port_ = null;\n    /** @private {?function(!Promise<void>)} */\n    this.dismissPromiseResolver_ = null;\n    /** @const @private {string} */\n    this.googleTransactionId_ = googleTransactionId;\n    /** @const @private {?string} */\n    this.redirectKey_ = redirectKey || null;\n\n    /**\n     * @private {?ResizePayload}\n     */\n    this.savedResizePayload_ = null;\n\n    // Only install dialog styles when iframing is allowed.\n    if (null) {\n      injectStyleSheet(Constants.IFRAME_STYLE);\n      if (null) {\n        injectStyleSheet(Constants.IFRAME_STYLE_CENTER);\n      }\n    }\n  }\n\n  /** @override */\n  onResult(callback) {\n    if (this.callback_) {\n      return;\n    }\n    this.callback_ = callback;\n    this.activities.onResult(\n      GPAY_ACTIVITY_REQUEST,\n      this.onActivityResult_.bind(this)\n    );\n  }\n\n  /**\n   * @param {!ActivityPort} port\n   * @private\n   */\n  onActivityResult_(port) {\n    // Hide the graypane.\n    this.graypane_.hide();\n    // Only verified origins are allowed.\n    this.callback_(\n      port.acceptResult().then(\n        (result) => {\n          // Origin must always match: popup, iframe or redirect.\n          if (result.origin != this.getOrigin_()) {\n            throw new Error('channel mismatch');\n          }\n          const data = /** @type {!PaymentData} */ (result.data);\n          if (data['redirectEncryptedCallbackData']) {\n            PayFrameHelper.setBuyFlowActivityMode(BuyFlowActivityMode.REDIRECT);\n            return this.fetchRedirectResponse_(\n              data['redirectEncryptedCallbackData']\n            ).then((decrypedJson) => {\n              // Merge other non-encrypted fields into the final response.\n              const clone = Object.assign({}, data);\n              delete clone['redirectEncryptedCallbackData'];\n              return Object.assign(clone, decrypedJson);\n            });\n          }\n          // Unencrypted data supplied: must be a verified and secure channel.\n          if (!result.originVerified || !result.secureChannel) {\n            throw new Error('channel mismatch');\n          }\n          return data;\n        },\n        (error) => {\n          // TODO: Log the original and the inferred error to eye3.\n          const originalError = error['message'];\n          let inferredError = error['message'];\n          try {\n            // Try to parse the error message to a structured error, if it's\n            // not possible, fallback to use the error message string.\n            inferredError = JSON.parse(\n              originalError.substring(ERROR_PREFIX.length)\n            );\n          } catch (e) {}\n          if (\n            inferredError['statusCode'] &&\n            ['DEVELOPER_ERROR', 'MERCHANT_ACCOUNT_ERROR'].indexOf(\n              inferredError['statusCode']\n            ) == -1\n          ) {\n            inferredError = {\n              'statusCode': 'CANCELED',\n            };\n          }\n          if (inferredError == 'AbortError') {\n            inferredError = {\n              'statusCode': 'CANCELED',\n            };\n          }\n          return Promise.reject(inferredError);\n        }\n      )\n    );\n  }\n\n  /**\n   * @param {string} redirectEncryptedCallbackData\n   * @return {!PaymentData}\n   * @private\n   */\n  fetchRedirectResponse_(redirectEncryptedCallbackData) {\n    // This method has to rely on the legacy XHR API because the redirect\n    // functionality is, in part, aimed at older browsers.\n    return new Promise((resolve, reject) => {\n      const url = this.getDecryptionUrl_();\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', url, true);\n      if ('withCredentials' in xhr) {\n        // It's fine to proceed in a non-redirect mode because redirectVerifier\n        // plays the part of CORS propagation.\n        xhr.withCredentials = true;\n      }\n\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n          return;\n        }\n        if (xhr.status < 100 || xhr.status > 599) {\n          xhr.onreadystatechange = null;\n          reject(new Error(`Unknown HTTP status ${xhr.status}`));\n          return;\n        }\n        if (xhr.readyState == /* COMPLETE */ 4) {\n          try {\n            resolve(JSON.parse(xhr.responseText));\n          } catch (e) {\n            // JSON parsing error is expected here.\n            reject(e);\n          }\n        }\n      };\n      xhr.onerror = () => {\n        reject(new Error('Network failure'));\n      };\n      xhr.onabort = () => {\n        reject(new Error('Request aborted'));\n      };\n\n      // Send POST.\n      xhr.send(redirectEncryptedCallbackData);\n    });\n  }\n\n  /** @override */\n  isReadyToPay(isReadyToPayRequest) {\n    return new Promise((resolve, reject) => {\n      if (doesMerchantSupportOnlyTokenizedCards(isReadyToPayRequest)) {\n        resolve({'result': false});\n        return;\n      }\n      const userAgent = window.navigator.userAgent;\n      const isIosGsa =\n        userAgent.indexOf('GSA/') > 0 &&\n        userAgent.indexOf(BrowserUserAgent.SAFARI) > 0;\n      // pop up in IGSA doesn't work.\n      if (isIosGsa && !null) {\n        resolve({'result': false});\n        return;\n      }\n      const isFirefoxIos = userAgent.indexOf('FxiOS') > 0;\n      if (isFirefoxIos) {\n        resolve({'result': false});\n        return;\n      }\n      const isSupported =\n        userAgent.indexOf(BrowserUserAgent.CHROME) > 0 ||\n        userAgent.indexOf(BrowserUserAgent.FIREFOX) > 0 ||\n        userAgent.indexOf(BrowserUserAgent.SAFARI) > 0;\n      if (\n        isSupported &&\n        isReadyToPayRequest.apiVersion >= 2 &&\n        isReadyToPayRequest.existingPaymentMethodRequired\n      ) {\n        isReadyToPayRequest.environment = this.environment_;\n        PayFrameHelper.sendAndWaitForResponse(\n          isReadyToPayRequest,\n          PostMessageEventType.IS_READY_TO_PAY,\n          'isReadyToPayResponse',\n          function (event) {\n            const response = {\n              'result': isSupported,\n            };\n            if (isReadyToPayRequest.existingPaymentMethodRequired) {\n              response['paymentMethodPresent'] =\n                event.data['isReadyToPayResponse'] == 'READY_TO_PAY';\n            }\n            resolve(response);\n          }\n        );\n      } else {\n        resolve({'result': isSupported});\n      }\n    });\n  }\n\n  /** @override */\n  prefetchPaymentData(paymentDataRequest) {\n    // Only handles prefetch for iframe for now.\n    if (!null) {\n      return;\n    }\n    const containerAndFrame = this.injectIframe_(paymentDataRequest);\n    const paymentDataPromise = this.openIframe_(\n      containerAndFrame['container'],\n      containerAndFrame['iframe'],\n      paymentDataRequest\n    );\n    this.prefetchedObjects_ = {\n      'container': containerAndFrame['container'],\n      'iframe': containerAndFrame['iframe'],\n      'request': paymentDataRequest,\n      'dataPromise': paymentDataPromise,\n    };\n  }\n\n  /** @override */\n  loadPaymentData(paymentDataRequest) {\n    if (!paymentDataRequest.swg) {\n      // Only set the apiVersion if the merchant is not setting it.\n      if (!paymentDataRequest.apiVersion) {\n        paymentDataRequest.apiVersion = 1;\n      }\n    }\n    paymentDataRequest.environment = this.environment_;\n    if (null) {\n      PayFrameHelper.setBuyFlowActivityMode(BuyFlowActivityMode.IFRAME);\n      // TODO: Compare the request with prefetched request.\n      let containerAndFrame;\n      let paymentDataPromise;\n      if (this.prefetchedObjects_) {\n        // Rendering prefetched frame and container.\n        containerAndFrame = this.prefetchedObjects_;\n        paymentDataPromise = this.prefetchedObjects_['dataPromise'];\n        this.prefetchedObjects_ = null;\n      } else {\n        containerAndFrame = this.injectIframe_(paymentDataRequest);\n        paymentDataPromise = this.openIframe_(\n          containerAndFrame['container'],\n          containerAndFrame['iframe'],\n          paymentDataRequest\n        );\n      }\n      this.showContainerAndIframeWithAnimation_(\n        containerAndFrame['container'],\n        containerAndFrame['iframe'],\n        paymentDataRequest\n      );\n      history.pushState({}, '', '');\n      const onPopState = (e) => {\n        e.preventDefault();\n        this.backButtonHandler_(containerAndFrame);\n        window.removeEventListener('popstate', onPopState);\n      };\n      window.addEventListener('popstate', onPopState);\n      const dismissPromise = new Promise((resolve) => {\n        this.dismissPromiseResolver_ = resolve;\n      });\n      this.callback_(Promise.race([paymentDataPromise, dismissPromise]));\n      return;\n    }\n    PayFrameHelper.setBuyFlowActivityMode(\n      paymentDataRequest['forceRedirect']\n        ? BuyFlowActivityMode.REDIRECT\n        : BuyFlowActivityMode.POPUP\n    );\n    const opener = this.activities.open(\n      GPAY_ACTIVITY_REQUEST,\n      this.getHostingPageUrl_(),\n      this.getRenderMode_(paymentDataRequest),\n      paymentDataRequest,\n      {'width': 600, 'height': 600}\n    );\n    this.graypane_.show(opener && opener.targetWin);\n  }\n\n  /**\n   * Returns the render mode whether need to force redirect.\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {string}\n   * @private\n   */\n  getRenderMode_(paymentDataRequest) {\n    return paymentDataRequest['forceRedirect'] ? '_top' : 'gp-js-popup';\n  }\n\n  /**\n   * Returns the server origin based on the environment.\n   *\n   * @private\n   * @return {string}\n   */\n  getOrigin_() {\n    if (this.environment_ == Constants.Environment.LOCAL) {\n      return '';\n    }\n\n    let baseDomain;\n    if (this.environment_ == Constants.Environment.PREPROD) {\n      baseDomain = 'pay-preprod.sandbox';\n    } else if (this.environment_ == Constants.Environment.SANDBOX) {\n      baseDomain = 'pay.sandbox';\n    } else {\n      baseDomain = 'pay';\n    }\n    return 'https://' + baseDomain + '.google.com';\n  }\n\n  /**\n   * Returns the base path based on the environment.\n   *\n   * @private\n   * @return {string} The base path\n   */\n  getBasePath_() {\n    return this.getOrigin_() + '/gp/p';\n  }\n\n  /**\n   * Returns the decryption url to be used to decrypt the encrypted payload.\n   *\n   * @private\n   * @return {string} The decryption url\n   */\n  getDecryptionUrl_() {\n    let url = this.getBasePath_() + '/apis/buyflow/process';\n    if (this.redirectKey_) {\n      url += '?rk=' + encodeURIComponent(this.redirectKey_);\n    }\n    return url;\n  }\n\n  /**\n   * Returns the hosting page url.\n   *\n   * @private\n   * @return {string} The hosting page url\n   */\n  getHostingPageUrl_() {\n    // In Tin tests, the hosting page is requested from\n    // /testing/buyflow/merchantdemo.html and is accessed relatively since the\n    // base path is unknown ahead of time.\n    if (this.environment_ == Constants.Environment.TIN) {\n      // There is no /gp/p prefix since multilogin prefixes is broken in Tin:\n      // http://yaqs/4912322941550592\n      return '/ui/pay';\n    }\n    return this.getBasePath_() + '/ui/pay';\n  }\n\n  /**\n   * Returns the iframe pwg url to be used to be used for amp.\n   *\n   * @param {string} environment\n   * @param {string} origin\n   * @return {string} The iframe url\n   */\n  getIframeUrl(environment, origin) {\n    // TODO: These should be compile time constants and not dependent\n    // on the environment.\n    let iframeUrl = `https://pay.google.com/gp/p/ui/pay?origin=${origin}`;\n    if (\n      environment == Constants.Environment.SANDBOX ||\n      environment == Constants.Environment.PREPROD\n    ) {\n      iframeUrl = `https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=${origin}`;\n    }\n    return iframeUrl;\n  }\n\n  /**\n   * Close iframe with animation.\n   *\n   * @param {!Element} container\n   * @param {!HTMLIFrameElement} iframe\n   * @private\n   */\n  removeIframeAndContainer_(container, iframe) {\n    const transitionStyle = 'all ' + IFRAME_CLOSE_DURATION_IN_MS + 'ms ease 0s';\n    this.setTransition_(iframe, transitionStyle);\n    iframe.height = '0px';\n    // TODO: This should be replaced by listening to TransitionEnd event\n    setTimeout(() => {\n      if (container.parentNode) {\n        container.parentNode.removeChild(container);\n      }\n    }, IFRAME_CLOSE_DURATION_IN_MS);\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {{container: !Element, iframe:!HTMLIFrameElement}}\n   * @private\n   */\n  injectIframe_(paymentDataRequest) {\n    const containerAndFrame = injectIframe(\n      this.isVerticalCenterExperimentEnabled_(paymentDataRequest)\n        ? Constants.IFRAME_STYLE_CENTER_CLASS\n        : Constants.IFRAME_STYLE_CLASS\n    );\n    const iframe = containerAndFrame['iframe'];\n    const container = containerAndFrame['container'];\n    container.addEventListener(\n      'click',\n      this.closeActionHandler_.bind(this, containerAndFrame)\n    );\n    // Hide iframe and disable resize at initialize.\n    container.style.display = 'none';\n    iframe.style.display = 'none';\n    iframe.height = '0px';\n    const transitionStyle =\n      'all ' + IFRAME_SHOW_UP_DURATION_IN_MS + 'ms ease 0s';\n    this.setTransition_(iframe, transitionStyle);\n    this.shouldHandleResizing_ = false;\n    return containerAndFrame;\n  }\n\n  /**\n   * Handler when back button is triggered, should dismiss iframe if present.\n   * @param {{container: !Element, iframe:!HTMLIFrameElement}} containerAndFrame\n   * @private\n   */\n  backButtonHandler_(containerAndFrame) {\n    this.dismissIframe_(containerAndFrame);\n  }\n\n  /**\n   * Handler when close action is triggered, will pop history state to close\n   * the iframe.\n   * @param {{container: !Element, iframe:!HTMLIFrameElement}} containerAndFrame\n   * @private\n   */\n  closeActionHandler_(containerAndFrame) {\n    if (containerAndFrame['container'].parentNode) {\n      // Close action only when container is still attached to the page.\n      history.back();\n    }\n  }\n\n  /**\n   * @param {{container: !Element, iframe:!HTMLIFrameElement}} containerAndFrame\n   * @private\n   */\n  dismissIframe_(containerAndFrame) {\n    // Dismiss iframe only when container is still attached in the page.\n    if (containerAndFrame['container'].parentNode) {\n      // TODO: Think about whether this could be just hide instead of\n      // disconnect and remove, the tricky part is how to handle the case where\n      // payment data request is not the same.\n      this.dismissPromiseResolver_(Promise.reject({'errorCode': 'CANCELED'}));\n      this.removeIframeAndContainer_(\n        containerAndFrame['container'],\n        containerAndFrame['iframe']\n      );\n      this.port_ && this.port_.disconnect();\n    }\n  }\n\n  /**\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {boolean}\n   * @private\n   */\n  isVerticalCenterExperimentEnabled_(paymentDataRequest) {\n    return (\n      null &&\n      paymentDataRequest['i'] &&\n      paymentDataRequest['i'].renderContainerCenter\n    );\n  }\n\n  /**\n   * @param {!Element} container\n   * @param {!HTMLIFrameElement} iframe\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @private\n   */\n  showContainerAndIframeWithAnimation_(container, iframe, paymentDataRequest) {\n    container.style.display = 'block';\n    iframe.style.display = 'block';\n    setTimeout(() => {\n      // Hard code the apprx height here, it will be resize to expected height\n      // later.\n      iframe.height = '280px';\n      if (this.isVerticalCenterExperimentEnabled_(paymentDataRequest)) {\n        iframe.classList.add(Constants.IFRAME_ACTIVE_CONTAINER_CLASS);\n      }\n      // TODO: This should be handles properly by listening to\n      // TransitionEnd event.\n      setTimeout(() => {\n        this.shouldHandleResizing_ = true;\n        // TODO: Add browser test that catches this.\n        if (this.savedResizePayload_) {\n          this.setTransition_(iframe, this.savedResizePayload_['transition']);\n          iframe.height = this.savedResizePayload_['height'];\n          this.savedResizePayload_ = null;\n        }\n      }, IFRAME_SHOW_UP_DURATION_IN_MS);\n    }, 1);\n  }\n\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} transitionStyle\n   * @private\n   */\n  setTransition_(iframe, transitionStyle) {\n    iframe.style.setProperty('transition', transitionStyle);\n    // For safari.\n    iframe.style.setProperty('-webkit-transition', transitionStyle);\n  }\n\n  /**\n   * Use WebActivitiy to open iframe that's in given container.\n   *\n   * @param {!Element} container\n   * @param {!HTMLIFrameElement} iframe\n   * @param {!PaymentDataRequest} paymentDataRequest\n   * @return {!Promise<!PaymentData>}\n   * @private\n   */\n  openIframe_(container, iframe, paymentDataRequest) {\n    if (!paymentDataRequest.swg) {\n      if (!paymentDataRequest.apiVersion) {\n        paymentDataRequest.apiVersion = 1;\n      }\n    }\n    paymentDataRequest.environment = this.environment_;\n    let iframeLoadStartTime;\n    const trustedUrl = this.getIframeUrl(\n      this.environment_,\n      window.location.origin\n    );\n    return this.activities\n      .openIframe(iframe, trustedUrl, paymentDataRequest)\n      .then((port) => {\n        // Handle custom resize message.\n        this.port_ = port;\n        port.onMessage((payload) => {\n          if (payload['type'] !== 'resize' || !this.shouldHandleResizing_) {\n            // Save the resize event later after initial animation is finished\n            this.savedResizePayload_ = {\n              'height': payload['height'],\n              'transition': payload['transition'],\n            };\n            return;\n          }\n          // b/111310899: Smooth out initial iFrame loading\n          if (!iframeLoadStartTime) {\n            iframeLoadStartTime = Date.now();\n          }\n          if (\n            Date.now() <\n            iframeLoadStartTime + IFRAME_SHOW_UP_DURATION_IN_MS\n          ) {\n            this.setTransition_(\n              iframe,\n              payload['transition'] + ', ' + IFRAME_SMOOTH_HEIGHT_TRANSITION\n            );\n          } else {\n            this.setTransition_(iframe, payload['transition']);\n          }\n          iframe.height = payload['height'];\n        });\n        return /** @type {!Promise<!Object>} */ (port.acceptResult());\n      })\n      .then(\n        /**\n         * @param {!Object} result\n         * @return {!PaymentData}\n         */\n        (result) => {\n          this.removeIframeAndContainer_(container, iframe);\n          // This is only for popping the state we pushed earlier.\n          history.back();\n          const data = /** @type {!PaymentData} */ (result['data']);\n          return data;\n        },\n        (error) => {\n          this.removeIframeAndContainer_(container, iframe);\n          // This is only for popping the state we pushed earlier.\n          history.back();\n          return Promise.reject(error);\n        }\n      );\n  }\n}\n\nexport {PaymentsWebActivityDelegate};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Service wrapping window.parent.postMessage. This enables\n * window.postMessage to be swapped out in unit tests.\n */\nclass PostMessageService {\n  constructor(window) {\n    /** @private @const {!Window} */\n    this.window_ = window;\n  }\n\n  /**\n   * Passthrough to Window#postMessage. See Window#postMessage DOM API\n   * documentation for more information about arguments.\n   *\n   * @param {!Object} message\n   * @param {string} targetOrigin\n   */\n  postMessage(message, targetOrigin) {\n    this.window_.postMessage(message, targetOrigin);\n  }\n}\n\nexport {PostMessageService};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\nimport {PublicErrorCode} from './pay_frame_helper.js';\nimport {getUpiPaymentMethod} from './validator.js';\n\nclass UpiHandler {\n  constructor() {}\n\n  /**\n   * Returns upi payment method object if it exists in allowed payment methods\n   * or null if it doesn't\n   *\n   * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n   * @return {boolean}\n   */\n  isUpiRequest(request) {\n    return !!getUpiPaymentMethod(request);\n  }\n\n  /**\n   * Returns upi payment method object if it exists in allowed payment methods\n   * or null if it doesn't\n   *\n   * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n   * @return {!Promise} The promise will contain the boolean result and error\n   *     message when possible.\n   */\n  isReadyToPay(request) {\n    // Always return true for UPI if api version is 2 and chrome supports\n    // payment request\n    if (getUpiPaymentMethod(request)) {\n      if (request.existingPaymentMethodRequired) {\n        return Promise.resolve({'result': true, 'paymentMethodPresent': true});\n      } else {\n        return Promise.resolve({'result': true});\n      }\n    }\n    throw new Error('No Upi payment method found in handler');\n  }\n\n  /**\n   * Request payment data when payment method is UPI\n   *\n   * @param {!PaymentDataRequest} paymentDataRequest Provides necessary\n   *     information to support a payment.\n   * @param {!Object} upiPaymentMethod UPI paymentmethod in\n   *     allowedPaymentMethods array.\n   * @param {!Function} onResultCallback Function to call when everything is\n   *     done.\n   */\n  loadPaymentData(paymentDataRequest, upiPaymentMethod, onResultCallback) {\n    const parameters = upiPaymentMethod['parameters'];\n    const transactionInfo = paymentDataRequest['transactionInfo'];\n    const supportedInstruments = null ?\n        [{\n          // This is the url for Tez teamfood release.\n          'supportedMethods': ['https://pwp-server.appspot.com/pay-teamfood'],\n          'data': {\n            'pa': 'redbus@axisbank',\n            'pn': parameters['payeeName'],\n            'tr': parameters['transactionReferenceId'],\n            'url': parameters['referenceUrl'],\n            'mc': '4131',\n            'tn': 'Purchase in Merchant',\n          },\n        }] :\n        [{\n          'supportedMethods': ['https://tez.google.com/pay'],\n          'data': {\n            'pa': parameters['payeeVpa'],\n            'pn': parameters['payeeName'],\n            'tr': parameters['transactionReferenceId'],\n            'url': parameters['referenceUrl'],\n            'mc': parameters['mcc'],\n            'tn': transactionInfo['transactionNote'],\n          },\n        }];\n\n    if (parameters['transactionId']) {\n      supportedInstruments[0]['data']['tid'] = parameters['transactionId'];\n    }\n\n    const details = {\n      'total': {\n        'label': 'Total',\n        'amount': {\n          'currency': transactionInfo['currencyCode'],\n          'value': transactionInfo['totalPrice'],\n        },\n      },\n      'displayItems': [{\n        'label': 'Original Amount',\n        'amount': {\n          'currency': transactionInfo['currencyCode'],\n          'value': transactionInfo['totalPrice'],\n        },\n      }],\n    };\n\n    let request = new PaymentRequest(supportedInstruments, details);\n\n    onResultCallback(\n        this.checkCanMakePayment_(request)\n            .then(result => {\n              if (result) {\n                return this.showUi_(request);\n              } else {\n                return this.redirectToGooglePlay_();\n              }\n            })\n            .then(paymentData => {\n              return this.processData_(\n                  paymentData, paymentDataRequest, upiPaymentMethod);\n            })\n            .catch(error => {\n              error['statusCode'] = Constants.ResponseStatus.CANCELED;\n              return Promise.reject(error);\n            }));\n  }\n\n  /**\n   * Show the Tez payment request UI.\n   *\n   * @private\n   * @param {!PaymentRequest} request The payment request object.\n   * @return {!Promise<!PaymentData>} A promise containing payment response.\n   */\n  showUi_(request) {\n    return request.show().then(paymentResponse => {\n      paymentResponse.complete('success');\n      return paymentResponse.details;\n    });\n  }\n\n  /**\n   * Checks whether can make a payment with Tez on this device.\n   *\n   * @private\n   * @param {!PaymentRequest} request The payment request object.\n   * @return {!Promise<boolean>} a promise containing the result of whether can\n   *     make payment.\n   */\n  checkCanMakePayment_(request) {\n    // Checks canMakePayment cache, and use the cache result if it exists.\n    const cacheResult =\n        window.sessionStorage.getItem(Constants.UPI_CAN_MAKE_PAYMENT_CACHE_KEY);\n    if (cacheResult) {\n      return Promise.resolve(cacheResult === 'true');\n    }\n\n    // Feature detect canMakePayment().\n    if (!request.canMakePayment) {\n      return Promise.resolve(true);\n    }\n\n    let canMakePaymentPromise = request.canMakePayment();\n\n    return canMakePaymentPromise.then(result => {\n      // Store the result in cache if the result is true to avoid quota error\n      // caused by querying multiple times with different data.\n      // Doesn't store false because if we do so, user will be redirected to\n      // Google Play again after installing Google Pay if Chrome is not closed.\n      if (result) {\n        window.sessionStorage.setItem(\n            Constants.UPI_CAN_MAKE_PAYMENT_CACHE_KEY, result.toString());\n      }\n      return result;\n    });\n  }\n\n  /**\n   * Redirect user to Google Pay app in Google Play store\n   *\n   * @private\n   * @returns {!Promise<!Object>} Rejected promise with error message\n   */\n  redirectToGooglePlay_() {\n    window.location.replace(\n        null ?\n            'https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user.teamfood ' :  // NOLINT\n            'https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user');  // NOLINT\n    return Promise.reject(\n        {'errorMessage': 'Cannot redirect to Tez page in Google Play.'});\n  }\n\n  /**\n   * Convert Tez payment data to GPay payment data if payment succeeded, or\n   * reject if payment failed\n   *\n   * @private\n   * @param {!PaymentData} tezPaymentData The payment data object from Tez.\n   * @param {!PaymentDataRequest} paymentDataRequest The payment data request.\n   * @param {!Object} upiPaymentMethod UPI paymentmethod in\n   * allowedPaymentMethods array\n   * @returns {!Promise<PaymentData>} A promise containing payment data or\n   *     error message.\n   */\n  processData_(tezPaymentData, paymentDataRequest, upiPaymentMethod) {\n    const tezResponse = JSON.parse(tezPaymentData['tezResponse']);\n    if (tezResponse['Status'] === 'FAILURE') {\n      let error;\n      switch (tezResponse['responseCode']) {\n        case 'ZM':\n          // payment failure due to invalid MPIN\n          error = {\n            'errorCode': PublicErrorCode.BUYER_ACCOUNT_ERROR,\n            'errorMessage': 'Payment failure due to invalid MPIN.'\n          };\n          break;\n        case 'Z9':\n          // payment failure due to insufficient funds\n          error = {\n            'errorCode': PublicErrorCode.BUYER_ACCOUNT_ERROR,\n            'errorMessage': 'Payment failure due to insufficient funds.'\n          };\n          break;\n        case '91':\n          // payment failure due to transaction timeout or connection issue\n          error = {\n            'errorCode': PublicErrorCode.INTERNAL_ERROR,\n            'errorMessage':\n                'Payment failure due to transaction timeout or connection' +\n                ' issue.'\n          };\n          break;\n        default:\n          // payment failure due to user cancel or other issues\n          error = {'errorMessage': 'Payment cancelled.'};\n      }\n      return Promise.reject(error);\n    }\n\n    const signedMessage = {\n      'paymentMethodType': 'UPI',\n      'payeeVpa': upiPaymentMethod['parameters']['payeeVpa'],\n      'status': tezResponse['Status'],\n      'transactionReferenceId':\n          upiPaymentMethod['parameters']['transactionReferenceId'],\n      'transactionId': upiPaymentMethod['parameters']['transactionId'] ?\n          upiPaymentMethod['parameters']['transactionId'] :\n          tezResponse['txnId'],\n      'transactionInfo': paymentDataRequest['transactionInfo'],\n    };\n\n    let paymentData = {\n      'apiVersion': paymentDataRequest['apiVersion'],\n      'apiVersionMinor': paymentDataRequest['apiVersionMinor'],\n      'paymentMethodData': {\n        'type': upiPaymentMethod['type'],\n        'tokenizationData': {\n          'type': 'DIRECT',\n          'token': {\n            'protocolVersion': 'ECv1',\n            // TODO: Verify that response comes from tez and\n            // add signature and encrypt signed message here\n            'signature': '',\n            'signedMessage': signedMessage\n          }\n        }\n      }\n    };\n    return Promise.resolve(paymentData);\n  }\n}\n\nexport {UpiHandler};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport uuid from '../third_party/random_uuid/Random.uuid.js';\n\n/**\n * Returns a google transaction id.\n *\n * @param {string} environment\n * @return {string}\n */\nfunction createGoogleTransactionId(environment) {\n  return uuid.uuidFast() + '.' + environment;\n}\n\nexport {createGoogleTransactionId};\n","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Constants} from './constants.js';\n\n/**\n * @return {boolean} true if this version of Chrome supports PaymentHandler.\n */\nfunction chromeSupportsPaymentHandler() {\n  // Check if feature is enabled for user\n  if (typeof google == 'undefined' ||\n      !null) {\n    return false;\n  }\n\n  // Payment handler isn't supported on mobile\n  const mobilePlatform = window.navigator.userAgent.match(\n      /Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i);\n  if (mobilePlatform != null) {\n    return false;\n  }\n\n  const chromeVersion = window.navigator.userAgent.match(/Chrome\\/([0-9]+)\\./i);\n  return 'PaymentRequest' in window && chromeVersion != null &&\n      Number(chromeVersion[1]) >= 68 &&\n      window.navigator.vendor == 'Google Inc.';\n}\n\n/**\n * @return {boolean} true if this version of Chrome supports PaymentRequest.\n */\nfunction chromeSupportsPaymentRequest() {\n  // Opera uses chrome as rendering engine and sends almost the exact same\n  // user agent as chrome thereby fooling us on android.\n  const isOpera = window.navigator.userAgent.indexOf('OPR/') != -1;\n  if (isOpera) {\n    return false;\n  }\n  if (chromeSupportsPaymentHandler()) {\n    return true;\n  }\n\n  const androidPlatform = window.navigator.userAgent.match(/Android/i);\n  const chromeVersion = window.navigator.userAgent.match(/Chrome\\/([0-9]+)\\./i);\n  return androidPlatform != null && 'PaymentRequest' in window &&\n      // Make sure skipping PaymentRequest UI when only one PaymentMethod is\n      // supported (starts on Google Chrome 59).\n      window.navigator.vendor == 'Google Inc.' && chromeVersion != null &&\n      Number(chromeVersion[1]) >= 59;\n}\n\n/**\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n *\n * @return {boolean} true if the merchant only supports tokenized cards.\n */\nfunction doesMerchantSupportOnlyTokenizedCards(isReadyToPayRequest) {\n  if (isReadyToPayRequest.apiVersion >= 2) {\n    const allowedAuthMethods =\n        extractAllowedAuthMethodsForCards_(isReadyToPayRequest);\n    if (allowedAuthMethods && allowedAuthMethods.length == 1 &&\n        allowedAuthMethods[0] == Constants.AuthMethod.CRYPTOGRAM_3DS) {\n      return true;\n    }\n  }\n  return isReadyToPayRequest.allowedPaymentMethods.length == 1 &&\n      isReadyToPayRequest.allowedPaymentMethods[0] ==\n      Constants.PaymentMethod.TOKENIZED_CARD;\n}\n\n/**\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @param {Constants.AuthMethod} apiV2AuthMethod\n *\n * @return {boolean} true if the merchant supports pan cards.\n */\nfunction apiV2DoesMerchantSupportSpecifiedCardType(\n    isReadyToPayRequest, apiV2AuthMethod) {\n  if (isReadyToPayRequest.apiVersion >= 2) {\n    const allowedAuthMethods =\n        extractAllowedAuthMethodsForCards_(isReadyToPayRequest);\n    if (allowedAuthMethods && allowedAuthMethods.includes(apiV2AuthMethod)) {\n      return true;\n    }\n    return false;\n  }\n  return false;\n}\n\n/**\n * Validate if is secure context. Returns null if context is secure, otherwise\n * return error message.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\n *\n * @return {?string} null if current context is secure, otherwise return error\n * message.\n */\nfunction validateSecureContext() {\n  if (window.location.hostname.endsWith(Constants.TRUSTED_DOMAIN)) {\n    // This is for local development.\n    return null;\n  }\n  if (window.isSecureContext === undefined) {\n    // Browser not support isSecureContext, figure out a way to validate this\n    // for the unsupported browser.\n    return null;\n  }\n  return window.isSecureContext ?\n      null :\n      'Google Pay APIs should be called in secure context!';\n}\n\n/**\n * Validate PaymentOptions.\n *\n * @param {!PaymentOptions} paymentOptions\n */\nfunction validatePaymentOptions(paymentOptions) {\n  if (paymentOptions.environment &&\n      !Object.values(Constants.Environment)\n           .includes(paymentOptions.environment)) {\n    throw new Error(\n        'Parameter environment in PaymentOptions can optionally be set to ' +\n        'PRODUCTION, otherwise it defaults to TEST. ' + paymentOptions.environment);\n  }\n}\n\n/**\n * Validate IsReadyToPayRequest.\n *\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @return {?string} errorMessage if the request is invalid.\n */\nfunction validateIsReadyToPayRequest(isReadyToPayRequest) {\n  if (!isReadyToPayRequest) {\n    return 'isReadyToPayRequest must be set!';\n  } else if (isReadyToPayRequest.apiVersion >= 2) {\n    if (!('apiVersionMinor' in isReadyToPayRequest)) {\n      return 'apiVersionMinor must be set!';\n    }\n    if (!isReadyToPayRequest.allowedPaymentMethods ||\n        !Array.isArray(isReadyToPayRequest.allowedPaymentMethods) ||\n        isReadyToPayRequest.allowedPaymentMethods.length == 0) {\n      return 'for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods';\n    }\n    for (var i = 0; i < isReadyToPayRequest.allowedPaymentMethods.length; i++) {\n      let allowedPaymentMethod = isReadyToPayRequest.allowedPaymentMethods[i];\n      if (allowedPaymentMethod['type'] == Constants.PaymentMethod.CARD) {\n        if (!allowedPaymentMethod['parameters']) {\n          return 'Field parameters must be setup in each allowedPaymentMethod';\n        }\n        var allowedCardNetworks =\n            allowedPaymentMethod['parameters']['allowedCardNetworks'];\n        if (!allowedCardNetworks || !Array.isArray(allowedCardNetworks) ||\n            allowedCardNetworks.length == 0) {\n          return 'allowedCardNetworks must be setup in parameters for type CARD';\n        }\n        var allowedAuthMethods =\n            allowedPaymentMethod['parameters']['allowedAuthMethods'];\n        if (!allowedAuthMethods || !Array.isArray(allowedAuthMethods) ||\n            allowedAuthMethods.length == 0 ||\n            !allowedAuthMethods.every(isAuthMethodValid)) {\n          return 'allowedAuthMethods must be setup in parameters for type \\'CARD\\' ' +\n              ' and must contain \\'CRYPTOGRAM_3DS\\' and/or \\'PAN_ONLY\\'';\n        }\n      }\n    }\n    return null;\n  } else if (\n      !isReadyToPayRequest.allowedPaymentMethods ||\n      !Array.isArray(isReadyToPayRequest.allowedPaymentMethods) ||\n      isReadyToPayRequest.allowedPaymentMethods.length == 0 ||\n      !isReadyToPayRequest.allowedPaymentMethods.every(isPaymentMethodValid)) {\n    return 'allowedPaymentMethods must be set to an array containing \\'CARD\\' ' +\n        'and/or \\'TOKENIZED_CARD\\'!';\n  }\n  return null;\n}\n\n/**\n * Validate the payment method.\n *\n * @param {string} paymentMethod\n * @return {boolean} if the current payment method is valid.\n */\nfunction isPaymentMethodValid(paymentMethod) {\n  return Object.values(Constants.PaymentMethod).includes(paymentMethod);\n}\n\n/**\n * Validate the auth method.\n *\n * @param {string} authMethod\n * @return {boolean} if the current auth method is valid.\n */\nfunction isAuthMethodValid(authMethod) {\n  return Object.values(Constants.AuthMethod).includes(authMethod);\n}\n\n/**\n * Validate PaymentDataRequest.\n *\n * @param {!PaymentDataRequest} paymentDataRequest\n * @return {?string} errorMessage if the request is invalid.\n */\nfunction validatePaymentDataRequest(paymentDataRequest) {\n  if (!paymentDataRequest) {\n    return 'paymentDataRequest must be set!';\n  }\n  if (paymentDataRequest.swg) {\n    return validatePaymentDataRequestForSwg(paymentDataRequest.swg);\n  } else if (!paymentDataRequest.transactionInfo) {\n    return 'transactionInfo must be set!';\n  } else if (!paymentDataRequest.transactionInfo.currencyCode) {\n    return 'currencyCode in transactionInfo must be set!';\n  } else if (\n      !paymentDataRequest.transactionInfo.totalPriceStatus ||\n      !Object.values(Constants.TotalPriceStatus)\n           .includes(paymentDataRequest.transactionInfo.totalPriceStatus)) {\n    return 'totalPriceStatus in transactionInfo must be set to one of' +\n        ' NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!';\n  } else if (\n      paymentDataRequest.transactionInfo.totalPriceStatus !==\n          'NOT_CURRENTLY_KNOWN' &&\n      !paymentDataRequest.transactionInfo.totalPrice) {\n    return 'totalPrice in transactionInfo must be set when' +\n        ' totalPriceStatus is ESTIMATED or FINAL!';\n  }\n\n  // Validate payment data request for UPI payment method\n  const allowedPaymentMethod = getUpiPaymentMethod(paymentDataRequest);\n  if (allowedPaymentMethod) {\n    if (!allowedPaymentMethod['parameters']) {\n      return 'parameters must be set in allowedPaymentMethod!';\n    }\n\n    var parameters = allowedPaymentMethod['parameters'];\n    if (!parameters['payeeVpa']) {\n      return 'payeeVpa in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['payeeName']) {\n      return 'payeeName in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['referenceUrl']) {\n      return 'referenceUrl in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['mcc']) {\n      return 'mcc in allowedPaymentMethod parameters must be set!';\n    } else if (!parameters['transactionReferenceId']) {\n      return 'transactionReferenceId in allowedPaymentMethod parameters' +\n          ' must be set!';\n    }\n\n    if (paymentDataRequest['transactionInfo']['currencyCode'] !== 'INR') {\n      return 'currencyCode in transactionInfo must be set to INR!';\n    } else if (\n        paymentDataRequest['transactionInfo']['totalPriceStatus'] !== 'FINAL') {\n      return 'totalPriceStatus in transactionInfo must be set to FINAL!';\n    } else if (!paymentDataRequest['transactionInfo']['transactionNote']) {\n      return 'transactionNote in transactionInfo must be set!';\n    }\n  }\n  return null;\n}\n\n/**\n * Returns upi payment method object if it exists in allowed payment methods\n * or null if it doesn't\n *\n * @param {!IsReadyToPayRequest|!PaymentDataRequest} request\n * @return {?Object}\n */\nfunction getUpiPaymentMethod(request) {\n  if (!chromeSupportsPaymentRequest() || request.apiVersion < 2 ||\n      !request.allowedPaymentMethods) {\n    return null;\n  }\n  return getAllowedPaymentMethodForType_(request, Constants.PaymentMethod.UPI);\n}\n\n/**\n * Validate parameters for swg.\n *\n * @param {?SwgParameters} swgParameters\n * @return {?string} errorMessage if the request is invalid.\n */\nfunction validatePaymentDataRequestForSwg(swgParameters) {\n  if (!swgParameters) {\n    return 'Swg parameters must be provided';\n  }\n  if (!swgParameters.skuId || !swgParameters.publicationId) {\n    return 'Both skuId and publicationId must be provided';\n  }\n  return null;\n}\n\n/**\n * Returns the allowedAuthMethods for a card from the request.\n *\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @return {?Array<string>}\n * @private\n */\nfunction extractAllowedAuthMethodsForCards_(isReadyToPayRequest) {\n  if (isReadyToPayRequest.allowedPaymentMethods) {\n    const allowedPaymentMethod = getAllowedPaymentMethodForType_(\n        isReadyToPayRequest, Constants.PaymentMethod.CARD);\n    if (allowedPaymentMethod && allowedPaymentMethod.parameters) {\n      return allowedPaymentMethod.parameters['allowedAuthMethods'];\n    }\n  }\n  return null;\n}\n\n/**\n * @param {!IsReadyToPayRequest} isReadyToPayRequest\n * @param {string} paymentMethodType\n * @return {?PaymentMethod} Return first payment method for the given type,\n *     return null if not found.\n * @private\n */\nfunction getAllowedPaymentMethodForType_(\n    isReadyToPayRequest, paymentMethodType) {\n  for (var i = 0; i < isReadyToPayRequest.allowedPaymentMethods.length; i++) {\n    const allowedPaymentMethod = isReadyToPayRequest.allowedPaymentMethods[i];\n    if (allowedPaymentMethod.type == paymentMethodType) {\n      return allowedPaymentMethod;\n    }\n  }\n  return null;\n}\n\nexport {\n  apiV2DoesMerchantSupportSpecifiedCardType,\n  chromeSupportsPaymentHandler,\n  chromeSupportsPaymentRequest,\n  doesMerchantSupportOnlyTokenizedCards,\n  getUpiPaymentMethod,\n  isPaymentMethodValid,\n  validateIsReadyToPayRequest,\n  validatePaymentOptions,\n  validatePaymentDataRequest,\n  validateSecureContext\n};\n","/** @license\nMath.uuid.js (v1.4)\nhttp://www.broofa.com\nmailto:robert@broofa.com\nCopyright (c) 2010 Robert Kieffer\nDual licensed under the MIT and GPL licenses.\n*/\n\n/*\n * Generate a random uuid.\n *\n * USAGE: Math.uuid(length, radix)\n *   length - the desired number of characters\n *   radix  - the number of allowable values for each character.\n *\n * EXAMPLES:\n *   // No arguments  - returns RFC4122, version 4 ID\n *   >>> Math.uuid()\n *   \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\n *\n *   // One argument - returns ID of the specified length\n *   >>> Math.uuid(15)     // 15 character ID (default base=62)\n *   \"VcydxgltxrVZSTV\"\n *\n *   // Two arguments - returns ID of the specified length, and radix. (Radix must be <= 62)\n *   >>> Math.uuid(8, 2)  // 8 character ID (base=2)\n *   \"01001010\"\n *   >>> Math.uuid(8, 10) // 8 character ID (base=10)\n *   \"47473046\"\n *   >>> Math.uuid(8, 16) // 8 character ID (base=16)\n *   \"098F4D35\"\n */\n\nexport default class Random_uuid {};\n  // Private array of chars to use\n  var CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n\n  Random_uuid.uuid = function (len, radix) {\n    var chars = CHARS, uuid = [], i;\n    radix = radix || chars.length;\n\n    if (len) {\n      // Compact form\n      for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random()*radix];\n    } else {\n      // rfc4122, version 4 form\n      var r;\n\n      // rfc4122 requires these characters\n      uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n      uuid[14] = '4';\n\n      // Fill in random data.  At i==19 set the high bits of clock sequence as\n      // per rfc4122, sec. 4.1.5\n      for (i = 0; i < 36; i++) {\n        if (!uuid[i]) {\n          r = 0 | Math.random()*16;\n          uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\n        }\n      }\n    }\n\n    return uuid.join('');\n  };\n\n  // A more performant, but slightly bulkier, RFC4122v4 solution.  We boost performance\n  // by minimizing calls to random()\n  Random_uuid.uuidFast = function() {\n    var chars = CHARS, uuid = new Array(36), rnd=0, r;\n    for (var i = 0; i < 36; i++) {\n      if (i==8 || i==13 ||  i==18 || i==23) {\n        uuid[i] = '-';\n      } else if (i==14) {\n        uuid[i] = '4';\n      } else {\n        if (rnd <= 0x02) rnd = 0x2000000 + (Math.random()*0x1000000)|0;\n        r = rnd & 0xf;\n        rnd = rnd >> 4;\n        uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\n      }\n    }\n    return uuid.join('');\n  };\n\n  // A more compact, but less performant, RFC4122v4 solution:\n  Random_uuid.uuidCompact = function() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  };\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9jc3MvY29tcG9uZW50cy9kaWFsb2cuY3NzLmpzIiwiYnVpbGQvY3NzL3VpL3VpLmNzcy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlLXBqcy9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLmpzIiwic3JjL2FwaS9iYXNpYy1zdWJzY3JpcHRpb25zLmpzIiwic3JjL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuanMiLCJzcmMvYXBpL2RlZmVycmVkLWFjY291bnQtY3JlYXRpb24uanMiLCJzcmMvYXBpL2VudGl0bGVtZW50cy5qcyIsInNyYy9hcGkvbG9nZ2VyLWFwaS5qcyIsInNyYy9hcGkvbWV0ZXJpbmcuanMiLCJzcmMvYXBpL29mZmVyLmpzIiwic3JjL2FwaS9wcm9wZW5zaXR5LWFwaS5qcyIsInNyYy9hcGkvc3Vic2NyaWJlLXJlc3BvbnNlLmpzIiwic3JjL2FwaS9zdWJzY3JpcHRpb25zLmpzIiwic3JjL2FwaS91c2VyLWRhdGEuanMiLCJzcmMvY29tcG9uZW50cy9hY3Rpdml0aWVzLmpzIiwic3JjL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuanMiLCJzcmMvY29tcG9uZW50cy9kaWFsb2cuanMiLCJzcmMvY29tcG9uZW50cy9mcmllbmRseS1pZnJhbWUuanMiLCJzcmMvY29tcG9uZW50cy9ncmF5cGFuZS5qcyIsInNyYy9jb21wb25lbnRzL3ZpZXcuanMiLCJzcmMvaTE4bi9zdHJpbmdzLmpzIiwic3JjL2kxOG4vc3dnLXN0cmluZ3MuanMiLCJzcmMvbWFpbi5qcyIsInNyYy9tb2RlbC9hdXRvLXByb21wdC1jb25maWcuanMiLCJzcmMvbW9kZWwvY2xpZW50LWNvbmZpZy5qcyIsInNyYy9tb2RlbC9kb2MuanMiLCJzcmMvbW9kZWwvcGFnZS1jb25maWctcmVzb2x2ZXIuanMiLCJzcmMvbW9kZWwvcGFnZS1jb25maWcuanMiLCJzcmMvcG9seWZpbGxzLmpzIiwic3JjL3BvbHlmaWxscy9hcnJheS1pbmNsdWRlcy5qcyIsInNyYy9wb2x5ZmlsbHMvZG9jdW1lbnQtY29udGFpbnMuanMiLCJzcmMvcG9seWZpbGxzL2RvbXRva2VubGlzdC10b2dnbGUuanMiLCJzcmMvcG9seWZpbGxzL21hdGgtc2lnbi5qcyIsInNyYy9wb2x5ZmlsbHMvb2JqZWN0LWFzc2lnbi5qcyIsInNyYy9wb2x5ZmlsbHMvb2JqZWN0LXZhbHVlcy5qcyIsInNyYy9wb2x5ZmlsbHMvcHJvbWlzZS5qcyIsInNyYy9wcm90by9hcGlfbWVzc2FnZXMuanMiLCJzcmMvcnVudGltZS9hbmFseXRpY3Mtc2VydmljZS5qcyIsInNyYy9ydW50aW1lL2J1dHRvbi1hcGkuanMiLCJzcmMvcnVudGltZS9jYWxsYmFja3MuanMiLCJzcmMvcnVudGltZS9jbGllbnQtY29uZmlnLW1hbmFnZXIuanMiLCJzcmMvcnVudGltZS9jbGllbnQtZXZlbnQtbWFuYWdlci5qcyIsInNyYy9ydW50aW1lL2NvbnRyaWJ1dGlvbnMtZmxvdy5qcyIsInNyYy9ydW50aW1lL2RlZmVycmVkLWFjY291bnQtZmxvdy5qcyIsInNyYy9ydW50aW1lL2RlcHMuanMiLCJzcmMvcnVudGltZS9lbnRpdGxlbWVudHMtbWFuYWdlci5qcyIsInNyYy9ydW50aW1lL2V2ZW50LXR5cGUtbWFwcGluZy5qcyIsInNyYy9ydW50aW1lL2V4cGVyaW1lbnQtZmxhZ3MuanMiLCJzcmMvcnVudGltZS9leHBlcmltZW50cy5qcyIsInNyYy9ydW50aW1lL2ZldGNoZXIuanMiLCJzcmMvcnVudGltZS9qc2Vycm9yLmpzIiwic3JjL3J1bnRpbWUvbGluay1hY2NvdW50cy1mbG93LmpzIiwic3JjL3J1bnRpbWUvbG9nZ2VyLmpzIiwic3JjL3J1bnRpbWUvbG9naW4tbm90aWZpY2F0aW9uLWFwaS5qcyIsInNyYy9ydW50aW1lL2xvZ2luLXByb21wdC1hcGkuanMiLCJzcmMvcnVudGltZS9tZXRlci10b2FzdC1hcGkuanMiLCJzcmMvcnVudGltZS9vZmZlcnMtYXBpLmpzIiwic3JjL3J1bnRpbWUvb2ZmZXJzLWZsb3cuanMiLCJzcmMvcnVudGltZS9wYXktY2xpZW50LmpzIiwic3JjL3J1bnRpbWUvcGF5LWZsb3cuanMiLCJzcmMvcnVudGltZS9wcm9wZW5zaXR5LXNlcnZlci5qcyIsInNyYy9ydW50aW1lL3Byb3BlbnNpdHkuanMiLCJzcmMvcnVudGltZS9ydW50aW1lLmpzIiwic3JjL3J1bnRpbWUvc2VydmljZXMuanMiLCJzcmMvcnVudGltZS9zbWFydC1idXR0b24tYXBpLmpzIiwic3JjL3J1bnRpbWUvc3RvcmFnZS5qcyIsInNyYy9ydW50aW1lL3dhaXQtZm9yLXN1YnNjcmlwdGlvbi1sb29rdXAtYXBpLmpzIiwic3JjL3VpL2FjdGl2aXR5LWlmcmFtZS12aWV3LmpzIiwic3JjL3VpL2xvYWRpbmctdmlldy5qcyIsInNyYy91aS90b2FzdC5qcyIsInNyYy91dGlscy9hY3Rpdml0eS11dGlscy5qcyIsInNyYy91dGlscy9hbmltYXRpb24uanMiLCJzcmMvdXRpbHMvYnl0ZXMuanMiLCJzcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwic3JjL3V0aWxzL2RhdGUtdXRpbHMuanMiLCJzcmMvdXRpbHMvZG9jdW1lbnQtcmVhZHkuanMiLCJzcmMvdXRpbHMvZG9tLmpzIiwic3JjL3V0aWxzL2Vycm9yLWxvZ2dlci5qcyIsInNyYy91dGlscy9lcnJvcnMuanMiLCJzcmMvdXRpbHMvZ2FhLmpzIiwic3JjL3V0aWxzL2kxOG4uanMiLCJzcmMvdXRpbHMvanNvbi5qcyIsInNyYy91dGlscy9qd3QuanMiLCJzcmMvdXRpbHMvbG9nLmpzIiwic3JjL3V0aWxzL29iamVjdC5qcyIsInNyYy91dGlscy9wcmVjb25uZWN0LmpzIiwic3JjL3V0aWxzL3JhbmRvbS5qcyIsInNyYy91dGlscy9zdHJpbmcuanMiLCJzcmMvdXRpbHMvc3R5bGUuanMiLCJzcmMvdXRpbHMvdHlwZXMuanMiLCJzcmMvdXRpbHMvdXJsLmpzIiwic3JjL3V0aWxzL3hoci5qcyIsInRoaXJkX3BhcnR5L2dwYXkvc3JjL2NvbnN0YW50cy5qcyIsInRoaXJkX3BhcnR5L2dwYXkvc3JjL2VsZW1lbnRfaW5qZWN0b3IuanMiLCJ0aGlyZF9wYXJ0eS9ncGF5L3NyYy9ncmF5cGFuZS5qcyIsInRoaXJkX3BhcnR5L2dwYXkvc3JjL3BheV9mcmFtZV9oZWxwZXIuanMiLCJ0aGlyZF9wYXJ0eS9ncGF5L3NyYy9wYXlqc19hc3luYy5qcyIsInRoaXJkX3BhcnR5L2dwYXkvc3JjL3BheW1lbnRzX2NsaWVudF9kZWxlZ2F0ZV9pbnRlcmZhY2UuanMiLCJ0aGlyZF9wYXJ0eS9ncGF5L3NyYy9wYXltZW50c19yZXF1ZXN0X2RlbGVnYXRlLmpzIiwidGhpcmRfcGFydHkvZ3BheS9zcmMvcGF5bWVudHNfd2ViX2FjdGl2aXR5X2RlbGVnYXRlLmpzIiwidGhpcmRfcGFydHkvZ3BheS9zcmMvcG9zdF9tZXNzYWdlX3NlcnZpY2UuanMiLCJ0aGlyZF9wYXJ0eS9ncGF5L3NyYy91cGlfaGFuZGxlci5qcyIsInRoaXJkX3BhcnR5L2dwYXkvc3JjL3V0aWxzLmpzIiwidGhpcmRfcGFydHkvZ3BheS9zcmMvdmFsaWRhdG9yLmpzIiwidGhpcmRfcGFydHkvZ3BheS90aGlyZF9wYXJ0eS9yYW5kb21fdXVpZC9SYW5kb20udXVpZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FPLElBQU0sR0FBRyxHQUFHLHU0QkFBWjs7Ozs7Ozs7OztBQ0FBLElBQU0sR0FBRyxHQUFHLCsyQ0FBWjs7OztBQ0FQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Z0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQzl3REE7O0FBQ0E7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7SUFDYSxrQjs7Ozs7Ozs7QUFDWDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNFLGtCQUFLLE1BQUwsRUFBYSxDQUFFO0FBRWY7QUFDRjtB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Rk0sTUFFQTtBQUNMLFVBQUksR0FBRyxJQUFJLElBQVgsRUFBaUIsR0FBRyxHQUFHLFlBQWEsSUFBSSxDQUFDLE1BQUwsS0FBYyxTQUEzQixHQUFzQyxDQUE1QztBQUNqQixNQUFBLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBVjtBQUNBLE1BQUEsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFiO0FBQ0EsTUFBQSxJQUFJLENBQUMsQ0FBRCxDQUFKLEdBQVUsS0FBSyxDQUFFLENBQUMsSUFBSSxFQUFOLEdBQWEsQ0FBQyxHQUFHLEdBQUwsR0FBWSxHQUF4QixHQUE4QixDQUEvQixDQUFmO0FBQ0Q7QUFDRjs7QUFDRCxTQUFPLElBQUksQ0FBQyxJQUFMLENBQVUsRUFBVixDQUFQO0FBQ0QsQ0FmRCxDLENBaUJBOzs7QUFDQSxXQUFXLENBQUMsV0FBWixHQUEwQixZQUFXO0FBQ25DLFNBQU8sdUNBQXVDLE9BQXZDLENBQStDLE9BQS9DLEVBQXdELFVBQVMsQ0FBVCxFQUFZO0FBQ3pFLFFBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFMLEtBQWMsRUFBZCxHQUFpQixDQUF6QjtBQUFBLFFBQTRCLENBQUMsR0FBRyxDQUFDLElBQUksR0FBTCxHQUFXLENBQVgsR0FBZ0IsQ0FBQyxHQUFDLEdBQUYsR0FBTSxHQUF0RDtBQUNBLFdBQU8sQ0FBQyxDQUFDLFFBQUYsQ0FBVyxFQUFYLENBQVA7QUFDRCxHQUhNLENBQVA7QUFJRCxDQUxEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGNvbnN0IENTUyA9IFwiLnN3Zy1kaWFsb2csLnN3Zy10b2FzdHtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50O2JveC1zaXppbmc6Ym9yZGVyLWJveH0uc3dnLXRvYXN0e2JvcmRlcjpub25lIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7bWF4LWhlaWdodDo0NnB4IWltcG9ydGFudDtwb3NpdGlvbjpmaXhlZCFpbXBvcnRhbnQ7ei1pbmRleDoyMTQ3NDgzNjQ3IWltcG9ydGFudH1AbWVkaWEgKG1heC1oZWlnaHQ6NjQwcHgpLChtYXgtd2lkdGg6NjQwcHgpey5zd2ctZGlhbG9nLC5zd2ctdG9hc3R7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czo4cHghaW1wb3J0YW50O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDFweCAxcHggcmdiYSg2MCw2NCw2NywuMyksMCAxcHggNHB4IDFweCByZ2JhKDYwLDY0LDY3LC4xNSkhaW1wb3J0YW50O2xlZnQ6LTI0MHB4IWltcG9ydGFudDttYXJnaW4tbGVmdDo1MHZ3IWltcG9ydGFudDt3aWR0aDo0ODBweCFpbXBvcnRhbnR9fUBtZWRpYSAobWluLXdpZHRoOjY0MHB4KSBhbmQgKG1pbi1oZWlnaHQ6NjQwcHgpey5zd2ctZGlhbG9ne2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudDtsZWZ0Oi0zMTVweCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6NTB2dyFpbXBvcnRhbnQ7d2lkdGg6NjMwcHghaW1wb3J0YW50fS5zd2ctdG9hc3R7bGVmdDowIWltcG9ydGFudH19QG1lZGlhIChtYXgtd2lkdGg6NDgwcHgpey5zd2ctZGlhbG9nLC5zd2ctdG9hc3R7bGVmdDowIWltcG9ydGFudDttYXJnaW4tbGVmdDowIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudH19XFxuLyojIHNvdXJjZVVSTD0vLi9zcmMvY29tcG9uZW50cy9kaWFsb2cuY3NzKi9cIjsiLCJleHBvcnQgY29uc3QgQ1NTID0gXCJib2R5e21hcmdpbjowO3BhZGRpbmc6MH1zd2ctY29udGFpbmVyLHN3Zy1sb2FkaW5nLHN3Zy1sb2FkaW5nLWFuaW1hdGUsc3dnLWxvYWRpbmctaW1hZ2V7ZGlzcGxheTpibG9ja31zd2ctbG9hZGluZy1jb250YWluZXJ7LW1zLWZsZXgtYWxpZ246Y2VudGVyIWltcG9ydGFudDstbXMtZmxleC1wYWNrOmNlbnRlciFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7anVzdGlmeS1jb250ZW50OmNlbnRlciFpbXBvcnRhbnQ7bWFyZ2luLXRvcDo1cHghaW1wb3J0YW50O21pbi1oZWlnaHQ6MTQ4cHghaW1wb3J0YW50O3dpZHRoOjEwMCUhaW1wb3J0YW50O3otaW5kZXg6MjE0NzQ4MzY0NyFpbXBvcnRhbnR9QG1lZGlhIChtaW4taGVpZ2h0OjYzMHB4KSwobWluLXdpZHRoOjYzMHB4KXtzd2ctbG9hZGluZy1jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6OHB4IWltcG9ydGFudDtib3gtc2hhZG93OjAgMXB4IDFweCByZ2JhKDYwLDY0LDY3LC4zKSwwIDFweCA0cHggMXB4IHJnYmEoNjAsNjQsNjcsLjE1KSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MzVweCFpbXBvcnRhbnQ7d2lkdGg6NTYwcHghaW1wb3J0YW50fX1zd2ctbG9hZGluZ3thbmltYXRpb246bXNwaW4tcm90YXRlIDE1NjguNjNtcyBsaW5lYXIgaW5maW5pdGU7aGVpZ2h0OjM2cHg7b3ZlcmZsb3c6aGlkZGVuO3dpZHRoOjM2cHg7ei1pbmRleDoyMTQ3NDgzNjQ3IWltcG9ydGFudH1zd2ctbG9hZGluZy1hbmltYXRle2FuaW1hdGlvbjptc3Bpbi1yZXZyb3QgNTMzMm1zIHN0ZXBzKDQpIGluZmluaXRlfXN3Zy1sb2FkaW5nLWltYWdle2FuaW1hdGlvbjpzd2ctbG9hZGluZy1maWxtIDUzMzJtcyBzdGVwcygzMjQpIGluZmluaXRlO2JhY2tncm91bmQtaW1hZ2U6dXJsKCRhc3NldHMkL2xvYWRlci5zdmcpO2JhY2tncm91bmQtc2l6ZToxMDAlO2hlaWdodDozNnB4O3dpZHRoOjExNjY0cHh9QGtleWZyYW1lcyBzd2ctbG9hZGluZy1maWxtezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfXRve3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMTY2NHB4KX19QGtleWZyYW1lcyBtc3Bpbi1yb3RhdGV7MCV7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3t0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QGtleWZyYW1lcyBtc3Bpbi1yZXZyb3R7MCV7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3t0cmFuc2Zvcm06cm90YXRlKC0xdHVybil9fVxcbi8qIyBzb3VyY2VVUkw9Ly4vc3JjL3VpL3VpLmNzcyovXCI7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBFUzYvUHJvbWlzZXMgQSsgUHJvbWlzZSBpbnN0YW5jZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZnVuY3Rpb24oKj0pLCBmdW5jdGlvbiAoKj0pKX0gcmVzb2x2ZXJcbiAqL1xuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDb25zdHJ1Y3RvciBQcm9taXNlIHJlcXVpcmVzIGBuZXdgJyk7XG4gIH1cbiAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ011c3QgcGFzcyByZXNvbHZlciBmdW5jdGlvbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9zdGF0ZSA9IFBlbmRpbmdQcm9taXNlO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7Kn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX3ZhbHVlID0gW107XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5faXNDaGFpbkVuZCA9IHRydWU7XG5cbiAgZG9SZXNvbHZlKFxuICAgIHRoaXMsXG4gICAgYWRvcHRlcih0aGlzLCBGdWxmaWxsZWRQcm9taXNlKSxcbiAgICBhZG9wdGVyKHRoaXMsIFJlamVjdGVkUHJvbWlzZSksXG4gICAgeyB0aGVuOiByZXNvbHZlciB9XG4gICk7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFB1YmxpYyBJbnN0YW5jZSBNZXRob2RzXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHByb21pc2UgaW5zdGFuY2UgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIHJlc3VsdCBvZiB0aGlzIHByb21pc2VcbiAqIGFzIGlucHV0cyB0byB0aGUgb25GdWxmaWxsZWQgb3Igb25SZWplY3RlZCBjYWxsYmFja3MuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25GdWxmaWxsZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uUmVqZWN0ZWRcbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIG9uRnVsZmlsbGVkID0gaXNGdW5jdGlvbihvbkZ1bGZpbGxlZCkgPyBvbkZ1bGZpbGxlZCA6IHZvaWQgMDtcbiAgb25SZWplY3RlZCA9IGlzRnVuY3Rpb24ob25SZWplY3RlZCkgPyBvblJlamVjdGVkIDogdm9pZCAwO1xuXG4gIGlmIChvbkZ1bGZpbGxlZCB8fCBvblJlamVjdGVkKSB7XG4gICAgdGhpcy5faXNDaGFpbkVuZCA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuX3N0YXRlKFxuICAgIHRoaXMuX3ZhbHVlLFxuICAgIG9uRnVsZmlsbGVkLFxuICAgIG9uUmVqZWN0ZWRcbiAgKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBwcm9taXNlIHRoYXQgd2lsbCBoYW5kbGUgdGhlIHJlamVjdGVkIHN0YXRlIG9mIHRoaXMgcHJvbWlzZS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvblJlamVjdGVkXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24ob25SZWplY3RlZCkge1xuICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgb25SZWplY3RlZCk7XG59O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQdWJsaWMgU3RhdGljIE1ldGhvZHNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdWxmaWxsZWQgUHJvbWlzZSBvZiB2YWx1ZS4gSWYgdmFsdWUgaXMgaXRzZWxmIGEgdGhlbi1hYmxlLFxuICogcmVzb2x2ZXMgd2l0aCB0aGUgdGhlbi1hYmxlJ3MgdmFsdWUuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHsqPX0gdmFsdWVcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2U7XG5cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSAmJiB2YWx1ZSBpbnN0YW5jZW9mIHRoaXMpIHtcbiAgICBwcm9taXNlID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHJlamVjdGVkIFByb21pc2Ugb2YgcmVhc29uLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7Kj19IHJlYXNvblxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihfLCByZWplY3QpIHtcbiAgICByZWplY3QocmVhc29uKTtcbiAgfSk7XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aXRoIGFuIGFycmF5IG9mIHRoZSB2YWx1ZXMgb2YgdGhlXG4gKiBwYXNzZWQgaW4gcHJvbWlzZXMuIElmIGFueSBwcm9taXNlIHJlamVjdHMsIHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGxcbiAqIHJlamVjdC5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyFBcnJheTxQcm9taXNlfCo+fSBwcm9taXNlc1xuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBsZW5ndGggPSBwcm9taXNlcy5sZW5ndGg7XG4gICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJlc29sdmUodmFsdWVzKTtcbiAgICB9XG5cbiAgICBlYWNoKHByb21pc2VzLCBmdW5jdGlvbihwcm9taXNlLCBpbmRleCkge1xuICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKC0tbGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICB9LCByZWplY3QpO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIG9yIHJlamVjdCBiYXNlZCBvbiB0aGUgZmlyc3RcbiAqIHJlc29sdmVkIG9yIHJlamVjdGVkIHByb21pc2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHshQXJyYXk8UHJvbWlzZXwqPn0gcHJvbWlzZXNcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShwcm9taXNlc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxudmFyIG9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24gPSBmdW5jdGlvbihyZWFzb24sIHByb21pc2UpIHtcbiAgdGhyb3cgcmVhc29uO1xufTtcblxuLyoqXG4gKiBBbiBpbnRlcm5hbCB1c2Ugc3RhdGljIGZ1bmN0aW9uLlxuICovXG5Qcm9taXNlLl9vdmVycmlkZVVuaGFuZGxlZEV4Y2VwdGlvbkhhbmRsZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gIG9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24gPSBoYW5kbGVyO1xufTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHJpdmF0ZSBmdW5jdGlvbnNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIFRoZSBGdWxmaWxsZWQgUHJvbWlzZSBzdGF0ZS4gQ2FsbHMgb25GdWxmaWxsZWQgd2l0aCB0aGUgcmVzb2x2ZWQgdmFsdWUgb2ZcbiAqIHRoaXMgcHJvbWlzZSwgY3JlYXRpbmcgYSBuZXcgcHJvbWlzZS5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvbkZ1bGZpbGxlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvIGF2b2lkIGEgcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgRnVsZmlsbGVkIHN0YXRlIGZyb20gdGhlXG4gKiAgICAgUGVuZGluZyBzdGF0ZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gRnVsZmlsbGVkUHJvbWlzZSh2YWx1ZSwgb25GdWxmaWxsZWQsIHVudXNlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvbkZ1bGZpbGxlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIEZ1bGZpbGxlZFByb21pc2UsIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25GdWxmaWxsZWQsIHZhbHVlKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBSZWplY3RlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvblJlamVjdGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvIGF2b2lkIGEgcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSByZWFzb24gVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHJlamVjdGlvbiByZWFzb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSBvblJlamVjdGVkXG4gKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZCBBIGRlZmVycmVkIG9iamVjdCB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzXG4gKiAgICAgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy4gSXQgSVMgTk9UIHBhc3NlZCB3aGVuIGNhbGxlZCBmcm9tXG4gKiAgICAgUHJvbWlzZSN0aGVuIHRvIHNhdmUgYW4gb2JqZWN0IGluc3RhbmNlIChzaW5jZSB3ZSBtYXkgcmV0dXJuIHRoZSBjdXJyZW50XG4gKiAgICAgcHJvbWlzZSkuIEl0IElTIHBhc3NlZCBpbiB3aGVuIGFkb3B0aW5nIHRoZSBSZWplY3RlZCBzdGF0ZSBmcm9tIHRoZVxuICogICAgIFBlbmRpbmcgc3RhdGUuXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cbmZ1bmN0aW9uIFJlamVjdGVkUHJvbWlzZShyZWFzb24sIHVudXNlZCwgb25SZWplY3RlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvblJlamVjdGVkKSB7XG4gICAgZGVmZXJyZWRBZG9wdChkZWZlcnJlZCwgUmVqZWN0ZWRQcm9taXNlLCByZWFzb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICBkZWZlcih0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBvblJlamVjdGVkLCByZWFzb24pKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogVGhlIFBlbmRpbmcgUHJvbWlzZSBzdGF0ZS4gRXZlbnR1YWxseSBjYWxscyBvbkZ1bGZpbGxlZCBvbmNlIHRoZSBwcm9taXNlIGhhc1xuICogcmVzb2x2ZWQsIG9yIG9uUmVqZWN0ZWQgb25jZSB0aGUgcHJvbWlzZSByZWplY3RzLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkIGFuZCBubyBvblJlamVjdGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG9cbiAqIGF2b2lkIGEgcHJvbWlzZSBpbnN0YW5jZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9IFRoZSBjdXJyZW50IHByb21pc2VcbiAqIEBwYXJhbSB7Kj19IHF1ZXVlIFRoZSBjdXJyZW50IHByb21pc2UncyBwZW5kaW5nIHByb21pc2VzIHF1ZXVlLlxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSBvbkZ1bGZpbGxlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSBvblJlamVjdGVkXG4gKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZCBBIGRlZmVycmVkIG9iamVjdCB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzXG4gKiAgICAgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy4gSXQgSVMgTk9UIHBhc3NlZCB3aGVuIGNhbGxlZCBmcm9tXG4gKiAgICAgUHJvbWlzZSN0aGVuIHRvIHNhdmUgYW4gb2JqZWN0IGluc3RhbmNlIChzaW5jZSB3ZSBtYXkgcmV0dXJuIHRoZSBjdXJyZW50XG4gKiAgICAgcHJvbWlzZSkuIEl0IElTIHBhc3NlZCBpbiB3aGVuIGFkb3B0aW5nIHRoZSBQZW5kaW5nIHN0YXRlIGZyb20gdGhlXG4gKiAgICAgUGVuZGluZyBzdGF0ZSBvZiBhbm90aGVyIHByb21pc2UuXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cbmZ1bmN0aW9uIFBlbmRpbmdQcm9taXNlKHF1ZXVlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFkZWZlcnJlZCkge1xuICAgIGlmICghb25GdWxmaWxsZWQgJiYgIW9uUmVqZWN0ZWQpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICBxdWV1ZS5wdXNoKHtcbiAgICBkZWZlcnJlZDogZGVmZXJyZWQsXG4gICAgb25GdWxmaWxsZWQ6IG9uRnVsZmlsbGVkIHx8IGRlZmVycmVkLnJlc29sdmUsXG4gICAgb25SZWplY3RlZDogb25SZWplY3RlZCB8fCBkZWZlcnJlZC5yZWplY3RcbiAgfSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBkZWZlcnJlZCBpbnN0YW5jZSB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzIHJlc29sdmUgYW5kXG4gKiByZWplY3QgZnVuY3Rpb25zLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEZWZlcnJlZChQcm9taXNlKSB7XG4gIHZhciBkZWZlcnJlZCA9IHRoaXM7XG4gIC8qKiBAdHlwZSB7IVByb21pc2V9ICovXG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8qKiBAdHlwZSB7ZnVuY3Rpb24oKj0pfSAqL1xuICAgIGRlZmVycmVkLnJlc29sdmUgPSByZXNvbHZlO1xuXG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbigqPSl9ICovXG4gICAgZGVmZXJyZWQucmVqZWN0ID0gcmVqZWN0O1xuICB9KTtcbiAgcmV0dXJuIGRlZmVycmVkO1xufVxuXG4vKipcbiAqIFRyYW5zaXRpb25zIHRoZSBzdGF0ZSBvZiBwcm9taXNlIHRvIGFub3RoZXIgc3RhdGUuIFRoaXMgaXMgb25seSBldmVyIGNhbGxlZFxuICogb24gd2l0aCBhIHByb21pc2UgdGhhdCBpcyBjdXJyZW50bHkgaW4gdGhlIFBlbmRpbmcgc3RhdGUuXG4gKlxuICogQHBhcmFtIHshUHJvbWlzZX0gcHJvbWlzZVxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9IHN0YXRlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICovXG5mdW5jdGlvbiBhZG9wdChwcm9taXNlLCBzdGF0ZSwgdmFsdWUsIGFkb3B0ZWUpIHtcbiAgdmFyIHF1ZXVlID0gcHJvbWlzZS5fdmFsdWU7XG4gIHByb21pc2UuX3N0YXRlID0gc3RhdGU7XG4gIHByb21pc2UuX3ZhbHVlID0gdmFsdWU7XG5cbiAgaWYgKGFkb3B0ZWUgJiYgc3RhdGUgPT09IFBlbmRpbmdQcm9taXNlKSB7XG4gICAgYWRvcHRlZS5fc3RhdGUodmFsdWUsIHZvaWQgMCwgdm9pZCAwLCB7XG4gICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgcmVzb2x2ZTogdm9pZCAwLFxuICAgICAgcmVqZWN0OiB2b2lkIDBcbiAgICB9KTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbmV4dCA9IHF1ZXVlW2ldO1xuICAgIHByb21pc2UuX3N0YXRlKFxuICAgICAgdmFsdWUsXG4gICAgICBuZXh0Lm9uRnVsZmlsbGVkLFxuICAgICAgbmV4dC5vblJlamVjdGVkLFxuICAgICAgbmV4dC5kZWZlcnJlZFxuICAgICk7XG4gIH1cbiAgcXVldWUubGVuZ3RoID0gMDtcblxuICAvLyBJZiB3ZSdyZSBhZG9wdGluZyBhbm90aGVyIHByb21pc2UsIGl0J3Mgbm90IHRoZSBlbmQgb2YgdGhlIHByb21pc2UgY2hhaW4sXG4gIC8vIHRoZSBuZXcgcHJvbWlzZSBpcy5cbiAgaWYgKGFkb3B0ZWUpIHtcbiAgICBhZG9wdGVlLl9pc0NoYWluRW5kID0gZmFsc2U7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgaWYgdGhpcyByZWplY3RlZCBwcm9taXNlIHdpbGwgYmUgXCJoYW5kbGVkXCIuXG4gIGlmIChzdGF0ZSA9PT0gUmVqZWN0ZWRQcm9taXNlICYmIHByb21pc2UuX2lzQ2hhaW5FbmQpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHByb21pc2UuX2lzQ2hhaW5FbmQpIHtcbiAgICAgICAgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbih2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHBhcnRpYWwgYXBwbGljYXRpb24gb2YgYWRvcHQuXG4gKlxuICogQHBhcmFtIHshUHJvbWlzZX0gcHJvbWlzZVxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9IHN0YXRlXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKj0pfVxuICovXG5mdW5jdGlvbiBhZG9wdGVyKHByb21pc2UsIHN0YXRlKSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGFkb3B0KHByb21pc2UsIHN0YXRlLCB2YWx1ZSk7XG4gIH07XG59XG5cbi8qKlxuICogVXBkYXRlcyBhIGRlZmVycmVkIHByb21pc2VzIHN0YXRlLiBOZWNlc3NhcnkgZm9yIHVwZGF0aW5nIGFuIGFkb3B0aW5nXG4gKiBwcm9taXNlJ3Mgc3RhdGUgd2hlbiB0aGUgYWRvcHRlZSByZXNvbHZlcy5cbiAqXG4gKiBAcGFyYW0gez9EZWZlcnJlZH0gZGVmZXJyZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfSBzdGF0ZVxuICogQHBhcmFtIHsqPX0gdmFsdWVcbiAqL1xuZnVuY3Rpb24gZGVmZXJyZWRBZG9wdChkZWZlcnJlZCwgc3RhdGUsIHZhbHVlKSB7XG4gIGlmIChkZWZlcnJlZCkge1xuICAgIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgICBwcm9taXNlLl9zdGF0ZSA9IHN0YXRlO1xuICAgIHByb21pc2UuX3ZhbHVlID0gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBBIG5vLW9wIGZ1bmN0aW9uIHRvIHByZXZlbnQgZG91YmxlIHJlc29sdmluZy5cbiAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8qKlxuICogVGVzdHMgaWYgZm4gaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7Kn0gZm5cbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGZuKSB7XG4gIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbic7XG59XG5cbi8qKlxuICogVGVzdHMgaWYgZm4gaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaik7XG59XG5cbi8qKlxuICogSXRlcmF0ZXMgb3ZlciBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXksIGNhbGxpbmcgdGhlIGl0ZXJhdG9yIHdpdGggdGhlXG4gKiBlbGVtZW50IGFuZCBpdHMgaW5kZXguXG4gKlxuICogQHBhcmFtIHshQXJyYXl9IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0sbnVtYmVyKX0gaXRlcmF0b3JcbiAqL1xuZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBpdGVyYXRvcikge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcbiAgICBpdGVyYXRvcihjb2xsZWN0aW9uW2ldLCBpKTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYXR0ZW1wdCB0byByZXNvbHZlIHRoZSBkZWZlcnJlZCB3aXRoIHRoZSByZXR1cm5cbiAqIG9mIGZuLiBJZiBhbnkgZXJyb3IgaXMgcmFpc2VkLCByZWplY3RzIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHshRGVmZXJyZWR9IGRlZmVycmVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KX0gZm5cbiAqIEBwYXJhbSB7Kn0gYXJnXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX1cbiAqL1xuZnVuY3Rpb24gdHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgZm4sIGFyZykge1xuICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG4gIHZhciByZXNvbHZlID0gZGVmZXJyZWQucmVzb2x2ZTtcbiAgdmFyIHJlamVjdCA9IGRlZmVycmVkLnJlamVjdDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgcmVzdWx0ID0gZm4oYXJnKTtcbiAgICAgIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHJlc3VsdCwgcmVzdWx0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFF1ZXVlcyBhbmQgZXhlY3V0ZXMgbXVsdGlwbGUgZGVmZXJyZWQgZnVuY3Rpb25zIG9uIGFub3RoZXIgcnVuIGxvb3AuXG4gKi9cbnZhciBkZWZlciA9IChmdW5jdGlvbigpIHtcbiAgLyoqXG4gICAqIERlZmVycyBmbiB0byBhbm90aGVyIHJ1biBsb29wLlxuICAgKi9cbiAgdmFyIHNjaGVkdWxlRmx1c2g7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucG9zdE1lc3NhZ2UpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZsdXNoKTtcbiAgICBzY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoJ21hY3JvLXRhc2snLCAnKicpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgc2NoZWR1bGVGbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmbHVzaCwgMCk7XG4gICAgfTtcbiAgfVxuXG4gIHZhciBxdWV1ZSA9IG5ldyBBcnJheSgxNik7XG4gIHZhciBsZW5ndGggPSAwO1xuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBmbiA9IHF1ZXVlW2ldO1xuICAgICAgcXVldWVbaV0gPSBudWxsO1xuICAgICAgZm4oKTtcbiAgICB9XG4gICAgbGVuZ3RoID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuXG4gICAqL1xuICBmdW5jdGlvbiBkZWZlcihmbikge1xuICAgIGlmIChsZW5ndGggPT09IDApIHsgc2NoZWR1bGVGbHVzaCgpOyB9XG4gICAgcXVldWVbbGVuZ3RoKytdID0gZm47XG4gIH1cblxuICByZXR1cm4gZGVmZXI7XG59KSgpO1xuXG4vKipcbiAqIFRoZSBQcm9taXNlIHJlc29sdXRpb24gcHJvY2VkdXJlLlxuICogaHR0cHM6Ly9naXRodWIuY29tL3Byb21pc2VzLWFwbHVzL3Byb21pc2VzLXNwZWMjdGhlLXByb21pc2UtcmVzb2x1dGlvbi1wcm9jZWR1cmVcbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KX0gcmVzb2x2ZVxuICogQHBhcmFtIHtmdW5jdGlvbigqPSl9IHJlamVjdFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHsqPX0gY29udGV4dFxuICovXG5mdW5jdGlvbiBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCB2YWx1ZSwgY29udGV4dCkge1xuICB2YXIgX3JlamVjdCA9IHJlamVjdDtcbiAgdmFyIHRoZW47XG4gIHZhciBfcmVzb2x2ZTtcbiAgdHJ5IHtcbiAgICBpZiAodmFsdWUgPT09IHByb21pc2UpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBmdWxmaWxsIHByb21pc2Ugd2l0aCBpdHNlbGYnKTtcbiAgICB9XG4gICAgdmFyIGlzT2JqID0gaXNPYmplY3QodmFsdWUpO1xuICAgIGlmIChpc09iaiAmJiB2YWx1ZSBpbnN0YW5jZW9mIHByb21pc2UuY29uc3RydWN0b3IpIHtcbiAgICAgIGFkb3B0KHByb21pc2UsIHZhbHVlLl9zdGF0ZSwgdmFsdWUuX3ZhbHVlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpc09iaiAmJiAodGhlbiA9IHZhbHVlLnRoZW4pICYmIGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgIF9yZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgX3Jlc29sdmUgPSBfcmVqZWN0ID0gbm9vcDtcbiAgICAgICAgZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgdmFsdWUsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgICBfcmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIF9yZXNvbHZlID0gX3JlamVjdCA9IG5vb3A7XG4gICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgfTtcbiAgICAgIHRoZW4uY2FsbChcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgZnVuY3Rpb24odmFsdWUpIHsgX3Jlc29sdmUodmFsdWUpOyB9LFxuICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgX3JlamVjdChyZWFzb24pOyB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBfcmVqZWN0KGUpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBXZWIgQWN0aXZpdGllcyBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAvKiogVmVyc2lvbjogMS4yNCAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKmVzbGludCBuby11bnVzZWQtdmFyczogMCovXG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBBY3Rpdml0eU1vZGUgPSB7XG4gIElGUkFNRTogJ2lmcmFtZScsXG4gIFBPUFVQOiAncG9wdXAnLFxuICBSRURJUkVDVDogJ3JlZGlyZWN0Jyxcbn07XG5cblxuLyoqXG4gKiBUaGUgcmVzdWx0IGNvZGUgdXNlZCBmb3IgYEFjdGl2aXR5UmVzdWx0YC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmNvbnN0IEFjdGl2aXR5UmVzdWx0Q29kZSA9IHtcbiAgT0s6ICdvaycsXG4gIENBTkNFTEVEOiAnY2FuY2VsZWQnLFxuICBGQUlMRUQ6ICdmYWlsZWQnLFxufTtcblxuXG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWN0aXZpdHkuIFRoZSBhY3Rpdml0eSBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIHRoaXMgb2JqZWN0XG4gKiBmb3IgYSBzdWNjZXNzZnVsIHJlc3VsdCwgYSBjYW5jZWxhdGlvbiBvciBhIGZhaWx1cmUuXG4gKiBAc3RydWN0XG4gKi9cbmNsYXNzIEFjdGl2aXR5UmVzdWx0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UmVzdWx0Q29kZX0gY29kZVxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHshQWN0aXZpdHlNb2RlfSBtb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5cbiAgICogQHBhcmFtIHtib29sZWFufSBvcmlnaW5WZXJpZmllZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNlY3VyZUNoYW5uZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvZGUsIGRhdGEsIG1vZGUsIG9yaWdpbiwgb3JpZ2luVmVyaWZpZWQsIHNlY3VyZUNoYW5uZWwpIHtcbiAgICAvKiogQGNvbnN0IHshQWN0aXZpdHlSZXN1bHRDb2RlfSAqL1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgLyoqIEBjb25zdCB7Kn0gKi9cbiAgICB0aGlzLmRhdGEgPSBjb2RlID09IEFjdGl2aXR5UmVzdWx0Q29kZS5PSyA/IGRhdGEgOiBudWxsO1xuICAgIC8qKiBAY29uc3QgeyFBY3Rpdml0eU1vZGV9ICovXG4gICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLm9yaWdpblZlcmlmaWVkID0gb3JpZ2luVmVyaWZpZWQ7XG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnNlY3VyZUNoYW5uZWwgPSBzZWN1cmVDaGFubmVsO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5vayA9IGNvZGUgPT0gQWN0aXZpdHlSZXN1bHRDb2RlLk9LO1xuICAgIC8qKiBAY29uc3Qgez9FcnJvcn0gKi9cbiAgICB0aGlzLmVycm9yID0gY29kZSA9PSBBY3Rpdml0eVJlc3VsdENvZGUuRkFJTEVEID9cbiAgICAgICAgbmV3IEVycm9yKFN0cmluZyhkYXRhKSB8fCAnJykgOlxuICAgICAgICBudWxsO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgYWN0aXZpdHkgcmVxdWVzdCB0aGF0IGRpZmZlcmVudCB0eXBlcyBvZiBob3N0cyBjYW4gYmUgc3RhcnRlZCB3aXRoLlxuICogQHR5cGVkZWYge3tcbiAqICAgcmVxdWVzdElkOiBzdHJpbmcsXG4gKiAgIHJldHVyblVybDogc3RyaW5nLFxuICogICBhcmdzOiA/T2JqZWN0LFxuICogICBvcmlnaW46IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgb3JpZ2luVmVyaWZpZWQ6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5sZXQgQWN0aXZpdHlSZXF1ZXN0O1xuXG5cbi8qKlxuICogVGhlIGFjdGl2aXR5IFwib3BlblwiIG9wdGlvbnMgdXNlZCBmb3IgcG9wdXBzIGFuZCByZWRpcmVjdHMuXG4gKlxuICogLSByZXR1cm5Vcmw6IG92ZXJyaWRlIHRoZSByZXR1cm4gVVJMLiBCeSBkZWZhdWx0LCB0aGUgY3VycmVudCBVUkwgd2lsbCBiZVxuICogICB1c2VkLlxuICogLSBza2lwUmVxdWVzdEluVXJsOiByZW1vdmVzIHRoZSBhY3Rpdml0eSByZXF1ZXN0IGZyb20gdGhlIFVSTCwgaW4gY2FzZVxuICogICByZWRpcmVjdCBpcyB1c2VkLiBCeSBkZWZhdWx0LCB0aGUgYWN0aXZpdHkgcmVxdWVzdCBpcyBhcHBlbmRlZCB0byB0aGVcbiAqICAgYWN0aXZpdHkgVVJMLiBUaGlzIG9wdGlvbiBjYW4gYmUgdXNlZCBpZiB0aGUgYWN0aXZpdHkgcmVxdWVzdCBpcyBwYXNzZWRcbiAqICAgdG8gdGhlIGFjdGl2aXR5IGJ5IHNvbWUgYWx0ZXJuYXRpdmUgbWVhbnMuXG4gKiAtIGRpc2FibGVSZWRpcmVjdEZhbGxiYWNrOiBkaXNhbGxvd3MgcG9wdXAgZmFsbGJhY2sgdG8gcmVkaXJlY3QuIEJ5IGRlZmF1bHRcbiAqICAgdGhlIHJlZGlyZWN0IGZhbGxiYWNrIGlzIGFsbG93ZWQuIFRoaXMgb3B0aW9uIGhhcyB0byBiZSB1c2VkIHZlcnkgY2FyZWZ1bGx5XG4gKiAgIGJlY2F1c2UgdGhlcmUgYXJlIG1hbnkgdXNlciBhZ2VudHMgdGhhdCBtYXkgZmFpbCB0byBvcGVuIGEgcG9wdXAgYW5kIGl0XG4gKiAgIHdvbid0IGJlIGFsd2F5cyBwb3NzaWJsZSBmb3IgdGhlIG9wZW5lciB3aW5kb3cgdG8gZXZlbiBiZSBhd2FyZSBvZiBzdWNoXG4gKiAgIGZhaWx1cmVzLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHJldHVyblVybDogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBza2lwUmVxdWVzdEluVXJsOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogICBkaXNhYmxlUmVkaXJlY3RGYWxsYmFjazogKGJvb2xlYW58dW5kZWZpbmVkKSxcbiAqICAgd2lkdGg6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqICAgaGVpZ2h0OiAobnVtYmVyfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5sZXQgQWN0aXZpdHlPcGVuT3B0aW9ucztcblxuXG4vKipcbiAqIEFjdGl2aXR5IGNsaWVudC1zaWRlIGJpbmRpbmcuIFRoZSBwb3J0IHByb3ZpZGVzIGxpbWl0ZWQgd2F5cyB0byBjb21tdW5pY2F0ZVxuICogd2l0aCB0aGUgYWN0aXZpdHkgYW5kIHJlY2VpdmUgc2lnbmFscyBhbmQgcmVzdWx0cyBmcm9tIGl0LiBOb3QgZXZlcnkgdHlwZVxuICogb2YgYWN0aXZpdHkgZXhwb3NlcyBhIHBvcnQuXG4gKlxuICogQGludGVyZmFjZVxuICovXG5jbGFzcyBBY3Rpdml0eVBvcnQge1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtb2RlIG9mIHRoZSBhY3Rpdml0eTogaWZyYW1lLCBwb3B1cCBvciByZWRpcmVjdC5cbiAgICogQHJldHVybiB7IUFjdGl2aXR5TW9kZX1cbiAgICovXG4gIGdldE1vZGUoKSB7fVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIHRoZSByZXN1bHQgd2hlbiByZWFkeS4gVGhlIGNsaWVudCBzaG91bGQgdmVyaWZ5IHRoZSBhY3Rpdml0eSdzXG4gICAqIG1vZGUsIG9yaWdpbiwgdmVyaWZpY2F0aW9uIGFuZCBzZWN1cmUgY2hhbm5lbCBmbGFncyBiZWZvcmUgZGVjaWRpbmdcbiAgICogd2hldGhlciBvciBub3QgdG8gdHJ1c3QgdGhlIHJlc3VsdC5cbiAgICpcbiAgICogUmV0dXJucyB0aGUgcHJvbWlzZSB0aGF0IHlpZWxkcyB3aGVuIHRoZSBhY3Rpdml0eSBoYXMgYmVlbiBjb21wbGV0ZWQgYW5kXG4gICAqIGVpdGhlciBhIHJlc3VsdCwgYSBjYW5jZWxhdGlvbiBvciBhIGZhaWx1cmUgaGFzIGJlZW4gcmV0dXJuZWQuXG4gICAqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eVJlc3VsdD59XG4gICAqL1xuICBhY2NlcHRSZXN1bHQoKSB7fVxufVxuXG5cbi8qKlxuICogQWN0aXZpdHkgY2xpZW50LXNpZGUgYmluZGluZyBmb3IgbWVzc2FnaW5nLlxuICpcbiAqIFdoZXRoZXIgdGhlIGhvc3QgY2FuIG9yIGNhbm5vdCByZWNlaXZlIGEgbWVzc2FnZSBkZXBlbmRzIG9uIHRoZSB0eXBlIG9mXG4gKiBob3N0IGFuZCBpdHMgc3RhdGUuIEVuc3VyZSB0aGF0IHRoZSBjb2RlIGhhcyBhbiBhbHRlcm5hdGl2ZSBwYXRoIGlmXG4gKiBtZXNzYWdpbmcgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmNsYXNzIEFjdGl2aXR5TWVzc2FnaW5nUG9ydCB7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRhcmdldCB3aW5kb3cgd2hlcmUgaG9zdCBpcyBsb2FkZWQuIE1heSBiZSB1bmF2YWlsYWJsZS5cbiAgICogQHJldHVybiB7P1dpbmRvd31cbiAgICovXG4gIGdldFRhcmdldFdpbigpIHt9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgaG9zdC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSBwYXlsb2FkXG4gICAqL1xuICBtZXNzYWdlKHBheWxvYWQpIHt9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSB0aGUgaG9zdC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uTWVzc2FnZShjYWxsYmFjaykge31cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjb21tdW5pY2F0aW9uIGNoYW5uZWwgb3IgcmV0dXJucyBhbiBleGlzdGluZyBvbmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X25hbWVcbiAgICogQHJldHVybiB7IVByb21pc2U8IU1lc3NhZ2VQb3J0Pn1cbiAgICovXG4gIG1lc3NhZ2VDaGFubmVsKG9wdF9uYW1lKSB7fVxufVxuXG5cblxuLyoqIERPTUV4Y2VwdGlvbi5BQk9SVF9FUlIgbmFtZSAqL1xuY29uc3QgQUJPUlRfRVJSX05BTUUgPSAnQWJvcnRFcnJvcic7XG5cbi8qKiBET01FeGNlcHRpb24uQUJPUlRfRVJSID0gMjAgKi9cbmNvbnN0IEFCT1JUX0VSUl9DT0RFID0gMjA7XG5cbi8qKiBAdHlwZSB7P0hUTUxBbmNob3JFbGVtZW50fSAqL1xubGV0IGFSZXNvbHZlcjtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxTdHJpbmdcbiAqIEByZXR1cm4geyFIVE1MQW5jaG9yRWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gcGFyc2VVcmwodXJsU3RyaW5nKSB7XG4gIGlmICghYVJlc29sdmVyKSB7XG4gICAgYVJlc29sdmVyID0gLyoqIEB0eXBlIHshSFRNTEFuY2hvckVsZW1lbnR9ICovIChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuICB9XG4gIGFSZXNvbHZlci5ocmVmID0gdXJsU3RyaW5nO1xuICByZXR1cm4gLyoqIEB0eXBlIHshSFRNTEFuY2hvckVsZW1lbnR9ICovIChhUmVzb2x2ZXIpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshTG9jYXRpb258IVVSTHwhSFRNTEFuY2hvckVsZW1lbnR9IGxvY1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRPcmlnaW4obG9jKSB7XG4gIGlmIChsb2Mub3JpZ2luKSB7XG4gICAgcmV0dXJuIGxvYy5vcmlnaW47XG4gIH1cbiAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIG9yaWdpbiBpcyBub3JtYWxpemVkLiBTcGVjaWZpY2FsbHkgb24gSUUsIGhvc3Qgc29tZXRpbWVzXG4gIC8vIGluY2x1ZGVzIHRoZSBkZWZhdWx0IHBvcnQsIHdoaWNoIGlzIG5vdCBwZXIgc3RhbmRhcmQuXG4gIGNvbnN0IHByb3RvY29sID0gbG9jLnByb3RvY29sO1xuICBsZXQgaG9zdCA9IGxvYy5ob3N0O1xuICBpZiAocHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaG9zdC5pbmRleE9mKCc6NDQzJykgPT0gaG9zdC5sZW5ndGggLSA0KSB7XG4gICAgaG9zdCA9IGhvc3QucmVwbGFjZSgnOjQ0MycsICcnKTtcbiAgfSBlbHNlIGlmIChwcm90b2NvbCA9PSAnaHR0cDonICYmIGhvc3QuaW5kZXhPZignOjgwJykgPT0gaG9zdC5sZW5ndGggLSAzKSB7XG4gICAgaG9zdCA9IGhvc3QucmVwbGFjZSgnOjgwJywgJycpO1xuICB9XG4gIHJldHVybiBwcm90b2NvbCArICcvLycgKyBob3N0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRPcmlnaW5Gcm9tVXJsKHVybFN0cmluZykge1xuICByZXR1cm4gZ2V0T3JpZ2luKHBhcnNlVXJsKHVybFN0cmluZykpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVGcmFnbWVudCh1cmxTdHJpbmcpIHtcbiAgY29uc3QgaW5kZXggPSB1cmxTdHJpbmcuaW5kZXhPZignIycpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICByZXR1cm4gdXJsU3RyaW5nO1xuICB9XG4gIHJldHVybiB1cmxTdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4KTtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyBhbmQgYnVpbGRzIE9iamVjdCBvZiBVUkwgcXVlcnkgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IFRoZSBVUkwgcXVlcnkgc3RyaW5nLlxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnkpIHtcbiAgaWYgKCFxdWVyeSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICByZXR1cm4gKC9eWz8jXS8udGVzdChxdWVyeSkgPyBxdWVyeS5zbGljZSgxKSA6IHF1ZXJ5KVxuICAgICAgLnNwbGl0KCcmJylcbiAgICAgIC5yZWR1Y2UoKHBhcmFtcywgcGFyYW0pID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHBhcmFtLnNwbGl0KCc9Jyk7XG4gICAgICAgIGNvbnN0IGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzBdIHx8ICcnKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoaXRlbVsxXSB8fCAnJyk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICB9LCB7fSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmcgIEEgcXVlcnkgc3RyaW5nIGluIHRoZSBmb3JtIG9mIFwiYT1iJmM9ZFwiLiBDb3VsZFxuICogICBiZSBvcHRpb25hbGx5IHByZWZpeGVkIHdpdGggXCI/XCIgb3IgXCIjXCIuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW0gVGhlIHBhcmFtIHRvIGdldCBmcm9tIHRoZSBxdWVyeSBzdHJpbmcuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtKHF1ZXJ5U3RyaW5nLCBwYXJhbSkge1xuICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZylbcGFyYW1dO1xufVxuXG5cbi8qKlxuICogQWRkIGEgcXVlcnktbGlrZSBwYXJhbWV0ZXIgdG8gdGhlIGZyYWdtZW50IHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFkZEZyYWdtZW50UGFyYW0odXJsLCBwYXJhbSwgdmFsdWUpIHtcbiAgcmV0dXJuIHVybCArXG4gICAgICAodXJsLmluZGV4T2YoJyMnKSA9PSAtMSA/ICcjJyA6ICcmJykgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmcgIEEgcXVlcnkgc3RyaW5nIGluIHRoZSBmb3JtIG9mIFwiYT1iJmM9ZFwiLiBDb3VsZFxuICogICBiZSBvcHRpb25hbGx5IHByZWZpeGVkIHdpdGggXCI/XCIgb3IgXCIjXCIuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW0gVGhlIHBhcmFtIHRvIHJlbW92ZSBmcm9tIHRoZSBxdWVyeSBzdHJpbmcuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVRdWVyeVBhcmFtKHF1ZXJ5U3RyaW5nLCBwYXJhbSkge1xuICBpZiAoIXF1ZXJ5U3RyaW5nKSB7XG4gICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xuICB9XG4gIGNvbnN0IHNlYXJjaCA9IGVuY29kZVVSSUNvbXBvbmVudChwYXJhbSkgKyAnPSc7XG4gIGxldCBpbmRleCA9IC0xO1xuICBkbyB7XG4gICAgaW5kZXggPSBxdWVyeVN0cmluZy5pbmRleE9mKHNlYXJjaCwgaW5kZXgpO1xuICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgY29uc3QgcHJldiA9IGluZGV4ID4gMCA/IHF1ZXJ5U3RyaW5nLnN1YnN0cmluZyhpbmRleCAtIDEsIGluZGV4KSA6ICcnO1xuICAgICAgaWYgKHByZXYgPT0gJycgfHwgcHJldiA9PSAnPycgfHwgcHJldiA9PSAnIycgfHwgcHJldiA9PSAnJicpIHtcbiAgICAgICAgbGV0IGVuZCA9IHF1ZXJ5U3RyaW5nLmluZGV4T2YoJyYnLCBpbmRleCArIDEpO1xuICAgICAgICBpZiAoZW5kID09IC0xKSB7XG4gICAgICAgICAgZW5kID0gcXVlcnlTdHJpbmcubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXJ5U3RyaW5nID1cbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nLnN1YnN0cmluZygwLCBpbmRleCkgK1xuICAgICAgICAgICAgcXVlcnlTdHJpbmcuc3Vic3RyaW5nKGVuZCArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICB9XG4gIH0gd2hpbGUgKGluZGV4ICE9IC0xICYmIGluZGV4IDwgcXVlcnlTdHJpbmcubGVuZ3RoKTtcbiAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshQWN0aXZpdHlSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHNlcmlhbGl6ZVJlcXVlc3QocmVxdWVzdCkge1xuICBjb25zdCBtYXAgPSB7XG4gICAgJ3JlcXVlc3RJZCc6IHJlcXVlc3QucmVxdWVzdElkLFxuICAgICdyZXR1cm5VcmwnOiByZXF1ZXN0LnJldHVyblVybCxcbiAgICAnYXJncyc6IHJlcXVlc3QuYXJncyxcbiAgfTtcbiAgaWYgKHJlcXVlc3Qub3JpZ2luICE9PSB1bmRlZmluZWQpIHtcbiAgICBtYXBbJ29yaWdpbiddID0gcmVxdWVzdC5vcmlnaW47XG4gIH1cbiAgaWYgKHJlcXVlc3Qub3JpZ2luVmVyaWZpZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIG1hcFsnb3JpZ2luVmVyaWZpZWQnXSA9IHJlcXVlc3Qub3JpZ2luVmVyaWZpZWQ7XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG1hcCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyp9IGVycm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Fib3J0RXJyb3IoZXJyb3IpIHtcbiAgaWYgKCFlcnJvciB8fCB0eXBlb2YgZXJyb3IgIT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChlcnJvclsnbmFtZSddID09PSBBQk9SVF9FUlJfTkFNRSk7XG59XG5cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGVtdWxhdGVzIGEgRE9NRXhjZXB0aW9uIG9mIEFib3J0RXJyb3IgdHlwZS5cbiAqIFNlZSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNhYm9ydGVycm9yLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2VcbiAqIEByZXR1cm4geyFET01FeGNlcHRpb259XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUFib3J0RXJyb3Iod2luLCBvcHRfbWVzc2FnZSkge1xuICBjb25zdCBtZXNzYWdlID0gJ0Fib3J0RXJyb3InICsgKG9wdF9tZXNzYWdlID8gJzogJyArIG9wdF9tZXNzYWdlIDogJycpO1xuICBsZXQgZXJyb3IgPSBudWxsO1xuICBpZiAodHlwZW9mIHdpblsnRE9NRXhjZXB0aW9uJ10gPT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIFRPRE8oZHZveXRlbmtvKTogcmVtb3ZlIHR5cGVjYXN0IG9uY2UgZXh0ZXJucyBhcmUgZml4ZWQuXG4gICAgY29uc3QgY29uc3RyID0gLyoqIEB0eXBlIHtmdW5jdGlvbihuZXc6RE9NRXhjZXB0aW9uLCBzdHJpbmcsIHN0cmluZyl9ICovIChcbiAgICAgICAgd2luWydET01FeGNlcHRpb24nXSk7XG4gICAgdHJ5IHtcbiAgICAgIGVycm9yID0gbmV3IGNvbnN0cihtZXNzYWdlLCBBQk9SVF9FUlJfTkFNRSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JlLiBJbiBwYXJ0aWN1bGFyLCBgbmV3IERPTUV4Y2VwdGlvbigpYCBmYWlscyBpbiBFZGdlLlxuICAgIH1cbiAgfVxuICBpZiAoIWVycm9yKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiByZW1vdmUgdHlwZWNhc3Qgb25jZSBleHRlcm5zIGFyZSBmaXhlZC5cbiAgICBjb25zdCBjb25zdHIgPSAvKiogQHR5cGUge2Z1bmN0aW9uKG5ldzpET01FeGNlcHRpb24sIHN0cmluZyl9ICovIChcbiAgICAgICAgRXJyb3IpO1xuICAgIGVycm9yID0gbmV3IGNvbnN0cihtZXNzYWdlKTtcbiAgICBlcnJvci5uYW1lID0gQUJPUlRfRVJSX05BTUU7XG4gICAgZXJyb3IuY29kZSA9IEFCT1JUX0VSUl9DT0RFO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuXG4vKipcbiAqIFJlc29sdmVzIHRoZSBhY3Rpdml0eSByZXN1bHQgYXMgYSBwcm9taXNlOlxuICogIC0gYE9LYCByZXN1bHQgaXMgeWllbGRlZCBhcyB0aGUgcHJvbWlzZSdzIHBheWxvYWQ7XG4gKiAgLSBgQ0FOQ0VMYCByZXN1bHQgaXMgcmVqZWN0ZWQgd2l0aCB0aGUgYEFib3J0RXJyb3JgO1xuICogIC0gYEZBSUxFRGAgcmVzdWx0IGlzIHJlamVjdGVkIHdpdGggdGhlIGVtYmVkZGVkIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFBY3Rpdml0eVJlc3VsdH0gcmVzdWx0XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCghQWN0aXZpdHlSZXN1bHR8IVByb21pc2UpKX0gcmVzb2x2ZXJcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZVJlc3VsdCh3aW4sIHJlc3VsdCwgcmVzb2x2ZXIpIHtcbiAgaWYgKHJlc3VsdC5vaykge1xuICAgIHJlc29sdmVyKHJlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZXJyb3IgPSByZXN1bHQuZXJyb3IgfHwgY3JlYXRlQWJvcnRFcnJvcih3aW4pO1xuICAgIGVycm9yLmFjdGl2aXR5UmVzdWx0ID0gcmVzdWx0O1xuICAgIHJlc29sdmVyKFByb21pc2UucmVqZWN0KGVycm9yKSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0llQnJvd3Nlcih3aW4pIHtcbiAgLy8gTVNJRSBhbmQgVHJpZGVudCBhcmUgdHlwaWNhbCB1c2VyIGFnZW50cyBmb3IgSUUgYnJvd3NlcnMuXG4gIGNvbnN0IG5hdiA9IHdpbi5uYXZpZ2F0b3I7XG4gIHJldHVybiAvVHJpZGVudHxNU0lFfElFTW9iaWxlL2kudGVzdChuYXYgJiYgbmF2LnVzZXJBZ2VudCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNFZGdlQnJvd3Nlcih3aW4pIHtcbiAgY29uc3QgbmF2ID0gd2luLm5hdmlnYXRvcjtcbiAgcmV0dXJuIC9FZGdlL2kudGVzdChuYXYgJiYgbmF2LnVzZXJBZ2VudCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFFcnJvcn0gZVxuICovXG5mdW5jdGlvbiB0aHJvd0FzeW5jKGUpIHtcbiAgc2V0VGltZW91dCgoKSA9PiB7dGhyb3cgZTt9KTtcbn1cblxuXG4vKipcbiAqIFBvbHlmaWxsIG9mIHRoZSBgTm9kZS5pc0Nvbm5lY3RlZGAgQVBJLiBTZWVcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL2lzQ29ubmVjdGVkLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNOb2RlQ29ubmVjdGVkKG5vZGUpIHtcbiAgLy8gRW5zdXJlIHRoYXQgbm9kZSBpcyBhdHRhY2hlZCBpZiBzcGVjaWZpZWQuIFRoaXMgY2hlY2sgdXNlcyBhIG5ldyBhbmRcbiAgLy8gZmFzdCBgaXNDb25uZWN0ZWRgIEFQSSBhbmQgdGh1cyBvbmx5IGNoZWNrZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBpdC5cbiAgLy8gU2VlIGh0dHBzOi8vd3d3LmNocm9tZXN0YXR1cy5jb20vZmVhdHVyZS81Njc2MTEwNTQ5MzUyNDQ4LlxuICBpZiAoJ2lzQ29ubmVjdGVkJyBpbiBub2RlKSB7XG4gICAgcmV0dXJuIG5vZGVbJ2lzQ29ubmVjdGVkJ107XG4gIH1cbiAgLy8gUG9seWZpbGwuXG4gIGNvbnN0IHJvb3QgPSBub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgcmV0dXJuIChyb290ICYmIHJvb3QuY29udGFpbnMobm9kZSkpIHx8IGZhbHNlO1xufVxuXG5cblxuY29uc3QgU0VOVElORUwgPSAnX19BQ1RJVklUSUVTX18nO1xuXG5cbi8qKlxuICogVGhlIG1lc3NlbmdlciBoZWxwZXIgZm9yIGFjdGl2aXR5J3MgcG9ydCBhbmQgaG9zdC5cbiAqL1xuY2xhc3MgTWVzc2VuZ2VyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshV2luZG93fGZ1bmN0aW9uKCk6P1dpbmRvd30gdGFyZ2V0T3JDYWxsYmFja1xuICAgKiBAcGFyYW0gez9zdHJpbmd9IHRhcmdldE9yaWdpblxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVpcmVUYXJnZXRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgdGFyZ2V0T3JDYWxsYmFjaywgdGFyZ2V0T3JpZ2luLCByZXF1aXJlVGFyZ2V0KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fGZ1bmN0aW9uKCk6P1dpbmRvd30gKi9cbiAgICB0aGlzLnRhcmdldE9yQ2FsbGJhY2tfID0gdGFyZ2V0T3JDYWxsYmFjaztcblxuICAgIC8qKlxuICAgICAqIE1heSBzdGFydCBhcyB1bmtub3duIChgbnVsbGApIHVudGlsIHJlY2VpdmVkIGluIHRoZSBmaXJzdCBtZXNzYWdlLlxuICAgICAqIEBwcml2YXRlIHs/c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IHRhcmdldE9yaWdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5yZXF1aXJlVGFyZ2V0XyA9IHJlcXVpcmVUYXJnZXQ7XG5cbiAgICAvKiogQHByaXZhdGUgez9XaW5kb3d9ICovXG4gICAgdGhpcy50YXJnZXRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmFjY2VwdHNDaGFubmVsXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/TWVzc2FnZVBvcnR9ICovXG4gICAgdGhpcy5wb3J0XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbihzdHJpbmcsID9PYmplY3QpfSAqL1xuICAgIHRoaXMub25Db21tYW5kXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbighT2JqZWN0KX0gKi9cbiAgICB0aGlzLm9uQ3VzdG9tTWVzc2FnZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgez9PYmplY3Q8c3RyaW5nLCAhQ2hhbm5lbEhvbGRlcj59XG4gICAgICovXG4gICAgdGhpcy5jaGFubmVsc18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMuYm91bmRIYW5kbGVFdmVudF8gPSB0aGlzLmhhbmRsZUV2ZW50Xy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbm5lY3QgdGhlIHBvcnQgdG8gdGhlIGhvc3Qgb3IgdmljZSB2ZXJzYS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsID9PYmplY3QpfSBvbkNvbW1hbmRcbiAgICovXG4gIGNvbm5lY3Qob25Db21tYW5kKSB7XG4gICAgaWYgKHRoaXMub25Db21tYW5kXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhbHJlYWR5IGNvbm5lY3RlZCcpO1xuICAgIH1cbiAgICB0aGlzLm9uQ29tbWFuZF8gPSBvbkNvbW1hbmQ7XG4gICAgdGhpcy53aW5fLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kSGFuZGxlRXZlbnRfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0IG1lc3Nlbmdlci5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKHRoaXMub25Db21tYW5kXykge1xuICAgICAgdGhpcy5vbkNvbW1hbmRfID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLnBvcnRfKSB7XG4gICAgICAgIGNsb3NlUG9ydCh0aGlzLnBvcnRfKTtcbiAgICAgICAgdGhpcy5wb3J0XyA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLndpbl8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRIYW5kbGVFdmVudF8pO1xuICAgICAgaWYgKHRoaXMuY2hhbm5lbHNfKSB7XG4gICAgICAgIGZvciAoY29uc3QgayBpbiB0aGlzLmNoYW5uZWxzXykge1xuICAgICAgICAgIGNvbnN0IGNoYW5uZWxPYmogPSB0aGlzLmNoYW5uZWxzX1trXTtcbiAgICAgICAgICBpZiAoY2hhbm5lbE9iai5wb3J0MSkge1xuICAgICAgICAgICAgY2xvc2VQb3J0KGNoYW5uZWxPYmoucG9ydDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbm5lbE9iai5wb3J0Mikge1xuICAgICAgICAgICAgY2xvc2VQb3J0KGNoYW5uZWxPYmoucG9ydDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5uZWxzXyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgbWVzc2VuZ2VyIGhhcyBiZWVuIGNvbm5lY3RlZCBhbHJlYWR5LlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0T3JpZ2luXyAhPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1lc3NhZ2luZyB0YXJnZXQuIE9ubHkgYXZhaWxhYmxlIHdoZW4gY29ubmVjdGlvbiBoYXMgYmVlblxuICAgKiBlc3RhYmxpaHNlZC5cbiAgICogQHJldHVybiB7IVdpbmRvd31cbiAgICovXG4gIGdldFRhcmdldCgpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmdldE9wdGlvbmFsVGFyZ2V0XygpO1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/V2luZG93fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0T3B0aW9uYWxUYXJnZXRfKCkge1xuICAgIGlmICh0aGlzLm9uQ29tbWFuZF8gJiYgIXRoaXMudGFyZ2V0Xykge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldE9yQ2FsbGJhY2tfID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy50YXJnZXRfID0gdGhpcy50YXJnZXRPckNhbGxiYWNrXygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YXJnZXRfID0gLyoqIEB0eXBlIHshV2luZG93fSAqLyAodGhpcy50YXJnZXRPckNhbGxiYWNrXyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRhcmdldF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbWVzc2FnaW5nIG9yaWdpbi4gT25seSBhdmFpbGFibGUgd2hlbiBjb25uZWN0aW9uIGhhcyBiZWVuXG4gICAqIGVzdGFibGloc2VkLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRUYXJnZXRPcmlnaW4oKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0T3JpZ2luXyA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0T3JpZ2luXztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaG9zdCBzZW5kcyB0aGlzIG1lc3NhZ2UgdG8gdGhlIGNsaWVudCB0byBpbmRpY2F0ZSB0aGF0IGl0J3MgcmVhZHkgdG9cbiAgICogc3RhcnQgY29tbXVuaWNhdGluZy4gVGhlIGNsaWVudCBpcyBleHBlY3RlZCB0byByZXNwb25kIGJhY2sgd2l0aCB0aGVcbiAgICogXCJzdGFydFwiIGNvbW1hbmQuIFNlZSBgc2VuZFN0YXJ0Q29tbWFuZGAgbWV0aG9kLlxuICAgKi9cbiAgc2VuZENvbm5lY3RDb21tYW5kKCkge1xuICAgIC8vIFRPRE8oZHZveXRlbmtvKTogTWVzc2FnZUNoYW5uZWwgaXMgY3JpdGljYWxseSBuZWNlc3NhcnkgZm9yIElFL0VkZ2UsXG4gICAgLy8gc2luY2Ugd2luZG93IG1lc3NhZ2luZyBkb2Vzbid0IGFsd2F5cyB3b3JrLiBJdCdzIGFsc28gcHJlZmVycmVkIGFzIGFuIEFQSVxuICAgIC8vIGZvciBvdGhlciBicm93c2VyczogaXQncyBuZXdlciwgY2xlYW5lciBhbmQgYXJndWFibHkgbW9yZSBzZWN1cmUuXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgYnJvd3NlcnMgY3VycmVudGx5IGRvIG5vdCBwcm9wYWdhdGUgdXNlciBnZXN0dXJlcyB2aWFcbiAgICAvLyBNZXNzYWdlQ2hhbm5lbCwgb25seSB2aWEgd2luZG93IG1lc3NhZ2luZy4gVGhpcyBzaG91bGQgYmUgcmUtZW5hYmxlZFxuICAgIC8vIG9uY2UgYnJvd3NlcnMgZml4IHVzZXIgZ2VzdHVyZSBwcm9wYWdhdGlvbi5cbiAgICAvLyBTZWU6XG4gICAgLy8gU2FmYXJpOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTg2NTkzXG4gICAgLy8gQ2hyb21lOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD04NTE0OTNcbiAgICAvLyBGaXJlZm94OiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDY5NDIyXG4gICAgY29uc3QgYWNjZXB0c0NoYW5uZWwgPSBpc0llQnJvd3Nlcih0aGlzLndpbl8pIHx8IGlzRWRnZUJyb3dzZXIodGhpcy53aW5fKTtcbiAgICB0aGlzLnNlbmRDb21tYW5kKCdjb25uZWN0JywgeydhY2NlcHRzQ2hhbm5lbCc6IGFjY2VwdHNDaGFubmVsfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNsaWVudCBzZW5kcyB0aGlzIG1lc3NhZ2UgdG8gdGhlIGhvc3QgdXBvbiByZWNlaXZpbmcgdGhlIFwiY29ubmVjdFwiXG4gICAqIG1lc3NhZ2UgdG8gc3RhcnQgdGhlIG1haW4gY29tbXVuaWNhdGlvbiBjaGFubmVsLiBBcyBhIHBheWxvYWQsIHRoZSBtZXNzYWdlXG4gICAqIHdpbGwgY29udGFpbiB0aGUgcHJvdmlkZWQgc3RhcnQgYXJndW1lbnRzLlxuICAgKiBAcGFyYW0gez9PYmplY3R9IGFyZ3NcbiAgICovXG4gIHNlbmRTdGFydENvbW1hbmQoYXJncykge1xuICAgIGxldCBjaGFubmVsID0gbnVsbDtcbiAgICBpZiAodGhpcy5hY2NlcHRzQ2hhbm5lbF8gJiYgdHlwZW9mIHRoaXMud2luXy5NZXNzYWdlQ2hhbm5lbCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjaGFubmVsID0gbmV3IHRoaXMud2luXy5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgIH1cbiAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgdGhpcy5zZW5kQ29tbWFuZCgnc3RhcnQnLCBhcmdzLCBbY2hhbm5lbC5wb3J0Ml0pO1xuICAgICAgLy8gSXQncyBjcml0aWNhbCB0byBzd2l0Y2ggdG8gcG9ydCBtZXNzYWdpbmcgb25seSBhZnRlciBcInN0YXJ0XCIgaGFzIGJlZW5cbiAgICAgIC8vIHNlbnQuIE90aGVyd2lzZSwgaXQgd29uJ3QgYmUgZGVsaXZlcmVkLlxuICAgICAgdGhpcy5zd2l0Y2hUb0NoYW5uZWxfKGNoYW5uZWwucG9ydDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRDb21tYW5kKCdzdGFydCcsIGFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyB0aGUgc3BlY2lmaWVkIGNvbW1hbmQgZnJvbSB0aGUgcG9ydCB0byB0aGUgaG9zdCBvciB2aWNlIHZlcnNhLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY21kXG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9wYXlsb2FkXG4gICAqIEBwYXJhbSB7P0FycmF5PX0gb3B0X3RyYW5zZmVyXG4gICAqL1xuICBzZW5kQ29tbWFuZChjbWQsIG9wdF9wYXlsb2FkLCBvcHRfdHJhbnNmZXIpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgJ3NlbnRpbmVsJzogU0VOVElORUwsXG4gICAgICAnY21kJzogY21kLFxuICAgICAgJ3BheWxvYWQnOiBvcHRfcGF5bG9hZCB8fCBudWxsLFxuICAgIH07XG4gICAgaWYgKHRoaXMucG9ydF8pIHtcbiAgICAgIHRoaXMucG9ydF8ucG9zdE1lc3NhZ2UoZGF0YSwgb3B0X3RyYW5zZmVyIHx8IHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgICAvLyBPbmx5IFwiY29ubmVjdFwiIGNvbW1hbmQgaXMgYWxsb3dlZCB0byB1c2UgYHRhcmdldE9yaWdpbiA9PSAnKidgXG4gICAgICBjb25zdCB0YXJnZXRPcmlnaW4gPVxuICAgICAgICAgIGNtZCA9PSAnY29ubmVjdCcgP1xuICAgICAgICAgICh0aGlzLnRhcmdldE9yaWdpbl8gIT0gbnVsbCA/IHRoaXMudGFyZ2V0T3JpZ2luXyA6ICcqJykgOlxuICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0T3JpZ2luKCk7XG4gICAgICB0YXJnZXQucG9zdE1lc3NhZ2UoZGF0YSwgdGFyZ2V0T3JpZ2luLCBvcHRfdHJhbnNmZXIgfHwgdW5kZWZpbmVkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gcGF5bG9hZFxuICAgKi9cbiAgY3VzdG9tTWVzc2FnZShwYXlsb2FkKSB7XG4gICAgdGhpcy5zZW5kQ29tbWFuZCgnbXNnJywgcGF5bG9hZCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gcmVjZWl2ZSBtZXNzYWdlcyBmcm9tIHRoZSBjbGllbnQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIU9iamVjdCl9IGNhbGxiYWNrXG4gICAqL1xuICBvbkN1c3RvbU1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLm9uQ3VzdG9tTWVzc2FnZV8gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9uYW1lXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFNZXNzYWdlUG9ydD59XG4gICAqL1xuICBzdGFydENoYW5uZWwob3B0X25hbWUpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0X25hbWUgfHwgJyc7XG4gICAgY29uc3QgY2hhbm5lbE9iaiA9IHRoaXMuZ2V0Q2hhbm5lbE9ial8obmFtZSk7XG4gICAgaWYgKCFjaGFubmVsT2JqLnBvcnQxKSB7XG4gICAgICBjb25zdCBjaGFubmVsID0gbmV3IHRoaXMud2luXy5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgY2hhbm5lbE9iai5wb3J0MSA9IGNoYW5uZWwucG9ydDE7XG4gICAgICBjaGFubmVsT2JqLnBvcnQyID0gY2hhbm5lbC5wb3J0MjtcbiAgICAgIGNoYW5uZWxPYmoucmVzb2x2ZXIoY2hhbm5lbE9iai5wb3J0MSk7XG4gICAgfVxuICAgIGlmIChjaGFubmVsT2JqLnBvcnQyKSB7XG4gICAgICAvLyBOb3QgeWV0IHNlbnQuXG4gICAgICB0aGlzLnNlbmRDb21tYW5kKCdjbnNldCcsIHsnbmFtZSc6IG5hbWV9LCBbY2hhbm5lbE9iai5wb3J0Ml0pO1xuICAgICAgY2hhbm5lbE9iai5wb3J0MiA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBjaGFubmVsT2JqLnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbmFtZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhTWVzc2FnZVBvcnQ+fVxuICAgKi9cbiAgYXNrQ2hhbm5lbChvcHRfbmFtZSkge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRfbmFtZSB8fCAnJztcbiAgICBjb25zdCBjaGFubmVsT2JqID0gdGhpcy5nZXRDaGFubmVsT2JqXyhuYW1lKTtcbiAgICBpZiAoIWNoYW5uZWxPYmoucG9ydDEpIHtcbiAgICAgIHRoaXMuc2VuZENvbW1hbmQoJ2NuZ2V0JywgeyduYW1lJzogbmFtZX0pO1xuICAgIH1cbiAgICByZXR1cm4gY2hhbm5lbE9iai5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7IU1lc3NhZ2VQb3J0fSBwb3J0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZWNlaXZlQ2hhbm5lbF8obmFtZSwgcG9ydCkge1xuICAgIGNvbnN0IGNoYW5uZWxPYmogPSB0aGlzLmdldENoYW5uZWxPYmpfKG5hbWUpO1xuICAgIGNoYW5uZWxPYmoucG9ydDEgPSBwb3J0O1xuICAgIGNoYW5uZWxPYmoucmVzb2x2ZXIocG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IUNoYW5uZWxIb2xkZXJ9XG4gICAqL1xuICBnZXRDaGFubmVsT2JqXyhuYW1lKSB7XG4gICAgaWYgKCF0aGlzLmNoYW5uZWxzXykge1xuICAgICAgdGhpcy5jaGFubmVsc18gPSB7fTtcbiAgICB9XG4gICAgbGV0IGNoYW5uZWxPYmogPSB0aGlzLmNoYW5uZWxzX1tuYW1lXTtcbiAgICBpZiAoIWNoYW5uZWxPYmopIHtcbiAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgcmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgfSk7XG4gICAgICBjaGFubmVsT2JqID0ge1xuICAgICAgICBwb3J0MTogbnVsbCxcbiAgICAgICAgcG9ydDI6IG51bGwsXG4gICAgICAgIHJlc29sdmVyLFxuICAgICAgICBwcm9taXNlLFxuICAgICAgfTtcbiAgICAgIHRoaXMuY2hhbm5lbHNfW25hbWVdID0gY2hhbm5lbE9iajtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5uZWxPYmo7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTWVzc2FnZVBvcnR9IHBvcnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN3aXRjaFRvQ2hhbm5lbF8ocG9ydCkge1xuICAgIGlmICh0aGlzLnBvcnRfKSB7XG4gICAgICBjbG9zZVBvcnQodGhpcy5wb3J0Xyk7XG4gICAgfVxuICAgIHRoaXMucG9ydF8gPSBwb3J0O1xuICAgIHRoaXMucG9ydF8ub25tZXNzYWdlID0gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgICBjb25zdCBjbWQgPSBkYXRhICYmIGRhdGFbJ2NtZCddO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IGRhdGEgJiYgZGF0YVsncGF5bG9hZCddIHx8IG51bGw7XG4gICAgICBpZiAoY21kKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlQ29tbWFuZF8oY21kLCBwYXlsb2FkLCBldmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBFdmVuIHRob3VnaCBhbGwgbWVzc2FnaW5nIHdpbGwgc3dpdGNoIHRvIHBvcnRzLCB0aGUgd2luZG93LWJhc2VkIG1lc3NhZ2VcbiAgICAvLyBsaXN0ZW5lciB3aWxsIGJlIHByZXNlcnZlZCBqdXN0IGluIGNhc2UgdGhlIGhvc3QgaXMgcmVmcmVzaGVkIGFuZCBuZWVkc1xuICAgIC8vIGFub3RoZXIgY29ubmVjdGlvbi5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFNZXNzYWdlRXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVFdmVudF8oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5yZXF1aXJlVGFyZ2V0XyAmJiB0aGlzLmdldE9wdGlvbmFsVGFyZ2V0XygpICE9IGV2ZW50LnNvdXJjZSkge1xuICAgICAgLy8gV2hlbiB0YXJnZXQgaXMgcmVxdWlyZWQsIGNvbmZpcm0gaXQgYWdhaW5zdCB0aGUgZXZlbnQuc291cmNlLiBUaGlzXG4gICAgICAvLyBpcyBub3JtYWxseSBvbmx5IG5lZWRlZCBmb3IgcG9ydHMgd2hlcmUgYSBzaW5nbGUgd2luZG93IGNhbiBpbmNsdWRlXG4gICAgICAvLyBtdWx0aXBsZSBpZnJhbWVzIHRvIG1hdGNoIHRoZSBldmVudCB0byBhIHNwZWNpZmljIGlmcmFtZS4gT3RoZXJ3aXNlLFxuICAgICAgLy8gdGhlIG9yaWdpbiBjaGVja3MgYmVsb3cgYXJlIHN1ZmZpY2llbnQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuICAgIGlmICghZGF0YSB8fCBkYXRhWydzZW50aW5lbCddICE9IFNFTlRJTkVMKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNtZCA9IGRhdGFbJ2NtZCddO1xuICAgIGlmICh0aGlzLnBvcnRfICYmIGNtZCAhPSAnY29ubmVjdCcgJiYgY21kICE9ICdzdGFydCcpIHtcbiAgICAgIC8vIE1lc3NhZ2luZyBjaGFubmVsIGhhcyBhbHJlYWR5IHRha2VuIG92ZXIuIEhvd2V2ZXIsIHRoZSBcImNvbm5lY3RcIiBhbmRcbiAgICAgIC8vIFwic3RhcnRcIiBjb21tYW5kcyBhcmUgYWxsb3dlZCB0byBwcm9jZWVkIGluIGNhc2UgcmUtY29ubmVjdGlvbiBpc1xuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvcmlnaW4gPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGV2ZW50Lm9yaWdpbik7XG4gICAgY29uc3QgcGF5bG9hZCA9IGRhdGFbJ3BheWxvYWQnXSB8fCBudWxsO1xuICAgIGlmICh0aGlzLnRhcmdldE9yaWdpbl8gPT0gbnVsbCAmJiBjbWQgPT0gJ3N0YXJ0Jykge1xuICAgICAgdGhpcy50YXJnZXRPcmlnaW5fID0gb3JpZ2luO1xuICAgIH1cbiAgICBpZiAodGhpcy50YXJnZXRPcmlnaW5fID09IG51bGwgJiYgZXZlbnQuc291cmNlKSB7XG4gICAgICBpZiAodGhpcy5nZXRPcHRpb25hbFRhcmdldF8oKSA9PSBldmVudC5zb3VyY2UpIHtcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5fID0gb3JpZ2luO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBOb3RpY2UgdGhhdCBldmVudC5zb3VyY2UgbWF5IGRpZmZlciBmcm9tIHRoZSB0YXJnZXQgYmVjYXVzZSBvZlxuICAgIC8vIGZyaWVuZGx5LWlmcmFtZSBpbnRlcm1lZGlhcmllcy5cbiAgICBpZiAob3JpZ2luICE9IHRoaXMudGFyZ2V0T3JpZ2luXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZUNvbW1hbmRfKGNtZCwgcGF5bG9hZCwgZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbWRcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7IU1lc3NhZ2VFdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbW1hbmRfKGNtZCwgcGF5bG9hZCwgZXZlbnQpIHtcbiAgICBpZiAoY21kID09ICdjb25uZWN0Jykge1xuICAgICAgaWYgKHRoaXMucG9ydF8pIHtcbiAgICAgICAgLy8gSW4gY2FzZSB0aGUgcG9ydCBoYXMgYWxyZWFkeSBiZWVuIG9wZW4gLSBjbG9zZSBpdCB0byByZW9wZW4gaXRcbiAgICAgICAgLy8gYWdhaW4gbGF0ZXIuXG4gICAgICAgIGNsb3NlUG9ydCh0aGlzLnBvcnRfKTtcbiAgICAgICAgdGhpcy5wb3J0XyA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLmFjY2VwdHNDaGFubmVsXyA9IHBheWxvYWQgJiYgcGF5bG9hZFsnYWNjZXB0c0NoYW5uZWwnXSB8fCBmYWxzZTtcbiAgICAgIHRoaXMub25Db21tYW5kXyhjbWQsIHBheWxvYWQpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdzdGFydCcpIHtcbiAgICAgIGNvbnN0IHBvcnQgPSBldmVudC5wb3J0cyAmJiBldmVudC5wb3J0c1swXTtcbiAgICAgIGlmIChwb3J0KSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVG9DaGFubmVsXyhwb3J0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMub25Db21tYW5kXyhjbWQsIHBheWxvYWQpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdtc2cnKSB7XG4gICAgICBpZiAodGhpcy5vbkN1c3RvbU1lc3NhZ2VfICE9IG51bGwgJiYgcGF5bG9hZCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMub25DdXN0b21NZXNzYWdlXyhwYXlsb2FkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAnY25nZXQnKSB7XG4gICAgICBjb25zdCBuYW1lID0gcGF5bG9hZFsnbmFtZSddO1xuICAgICAgdGhpcy5zdGFydENoYW5uZWwobmFtZSk7XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ2Nuc2V0Jykge1xuICAgICAgY29uc3QgbmFtZSA9IHBheWxvYWRbJ25hbWUnXTtcbiAgICAgIGNvbnN0IHBvcnQgPSBldmVudC5wb3J0c1swXTtcbiAgICAgIHRoaXMucmVjZWl2ZUNoYW5uZWxfKG5hbWUsIC8qKiBAdHlwZSB7IU1lc3NhZ2VQb3J0fSAqLyAocG9ydCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uQ29tbWFuZF8oY21kLCBwYXlsb2FkKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU1lc3NhZ2VQb3J0fSBwb3J0XG4gKi9cbmZ1bmN0aW9uIGNsb3NlUG9ydChwb3J0KSB7XG4gIHRyeSB7XG4gICAgcG9ydC5jbG9zZSgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWdub3JlLlxuICB9XG59XG5cblxuXG5cbi8qKlxuICogVGhlIGBBY3Rpdml0eVBvcnRgIGltcGxlbWVudGF0aW9uIGZvciB0aGUgaWZyYW1lIGNhc2UuIFVubGlrZSBvdGhlciB0eXBlc1xuICogb2YgYWN0aXZpdGllcywgaWZyYW1lLWJhc2VkIGFjdGl2aXRpZXMgYXJlIGFsd2F5cyBjb25uZWN0ZWQgYW5kIGNhbiByZWFjdFxuICogdG8gc2l6ZSByZXF1ZXN0cy5cbiAqXG4gKiBAaW1wbGVtZW50cyB7QWN0aXZpdHlQb3J0fVxuICogQGltcGxlbWVudHMge0FjdGl2aXR5TWVzc2FnaW5nUG9ydH1cbiAqL1xuY2xhc3MgQWN0aXZpdHlJZnJhbWVQb3J0IHtcblxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZnJhbWUsIHVybCwgb3B0X2FyZ3MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gaWZyYW1lO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnVybF8gPSB1cmw7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P09iamVjdH0gKi9cbiAgICB0aGlzLmFyZ3NfID0gb3B0X2FyZ3MgfHwgbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gLyoqIEB0eXBlIHshV2luZG93fSAqLyAodGhpcy5pZnJhbWVfLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IGdldE9yaWdpbkZyb21VcmwodXJsKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5jb25uZWN0ZWRSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5jb25uZWN0ZWRQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5jb25uZWN0ZWRSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLnJlYWR5UmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucmVhZHlQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5yZWFkeVJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigoIUFjdGl2aXR5UmVzdWx0fCFQcm9taXNlKSl9ICovXG4gICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IUFjdGl2aXR5UmVzdWx0Pn0gKi9cbiAgICB0aGlzLnJlc3VsdFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbihudW1iZXIpfSAqL1xuICAgIHRoaXMub25SZXNpemVSZXF1ZXN0XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5yZXF1ZXN0ZWRIZWlnaHRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFNZXNzZW5nZXJ9ICovXG4gICAgdGhpcy5tZXNzZW5nZXJfID0gbmV3IE1lc3NlbmdlcihcbiAgICAgICAgdGhpcy53aW5fLFxuICAgICAgICAoKSA9PiB0aGlzLmlmcmFtZV8uY29udGVudFdpbmRvdyxcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5fLFxuICAgICAgICAvKiByZXF1aXJlVGFyZ2V0ICovIHRydWUpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRNb2RlKCkge1xuICAgIHJldHVybiBBY3Rpdml0eU1vZGUuSUZSQU1FO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXRzIHVudGlsIHRoZSBhY3Rpdml0eSBwb3J0IGlzIGNvbm5lY3RlZCB0byB0aGUgaG9zdC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjb25uZWN0KCkge1xuICAgIGlmICghaXNOb2RlQ29ubmVjdGVkKHRoaXMuaWZyYW1lXykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaWZyYW1lIG11c3QgYmUgaW4gRE9NJyk7XG4gICAgfVxuICAgIHRoaXMubWVzc2VuZ2VyXy5jb25uZWN0KHRoaXMuaGFuZGxlQ29tbWFuZF8uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5pZnJhbWVfLnNyYyA9IHRoaXMudXJsXztcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0ZWRQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0IHRoZSBhY3Rpdml0eSBiaW5kaW5nIGFuZCBjbGVhbnVwIGxpc3RlbmVycy5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XG4gICAgdGhpcy5tZXNzZW5nZXJfLmRpc2Nvbm5lY3QoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0UmVzdWx0KCkge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdFByb21pc2VfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRUYXJnZXRXaW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXy5jb250ZW50V2luZG93IHx8IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG1lc3NhZ2UocGF5bG9hZCkge1xuICAgIHRoaXMubWVzc2VuZ2VyXy5jdXN0b21NZXNzYWdlKHBheWxvYWQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLm1lc3Nlbmdlcl8ub25DdXN0b21NZXNzYWdlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbWVzc2FnZUNoYW5uZWwob3B0X25hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzZW5nZXJfLmFza0NoYW5uZWwob3B0X25hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgeWllbGRzIHdoZW4gdGhlIGlmcmFtZSBpcyByZWFkeSB0byBiZSBpbnRlcmFjdGVkXG4gICAqIHdpdGguXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2hlblJlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLnJlYWR5UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayB0byBoYW5kbGUgcmVzaXplIHJlcXVlc3RzLiBPbmNlIHN1Y2Nlc3NmdWxseSByZXNpemVkLFxuICAgKiBlbnN1cmUgdG8gY2FsbCBgcmVzaXplZCgpYCBtZXRob2QuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyKX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzaXplUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHRoaXMub25SZXNpemVSZXF1ZXN0XyA9IGNhbGxiYWNrO1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMucmVxdWVzdGVkSGVpZ2h0XyAhPSBudWxsKSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMucmVxdWVzdGVkSGVpZ2h0Xyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2lnbmFscyBiYWNrIHRvIHRoZSBhY3Rpdml0eSBpbXBsZW1lbnRhdGlvbiB0aGF0IHRoZSBjbGllbnQgaGFzIHVwZGF0ZWRcbiAgICogdGhlIGFjdGl2aXR5J3Mgc2l6ZS5cbiAgICovXG4gIHJlc2l6ZWQoKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5pZnJhbWVfLm9mZnNldEhlaWdodDtcbiAgICB0aGlzLm1lc3Nlbmdlcl8uc2VuZENvbW1hbmQoJ3Jlc2l6ZWQnLCB7J2hlaWdodCc6IGhlaWdodH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbWRcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVDb21tYW5kXyhjbWQsIHBheWxvYWQpIHtcbiAgICBpZiAoY21kID09ICdjb25uZWN0Jykge1xuICAgICAgLy8gRmlyc3QgZXZlciBtZXNzYWdlLiBJbmRpY2F0ZXMgdGhhdCB0aGUgcmVjZWl2ZXIgaXMgbGlzdGVuaW5nLlxuICAgICAgdGhpcy5jb25uZWN0ZWRfID0gdHJ1ZTtcbiAgICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kU3RhcnRDb21tYW5kKHRoaXMuYXJnc18pO1xuICAgICAgdGhpcy5jb25uZWN0ZWRSZXNvbHZlcl8oKTtcbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAncmVzdWx0Jykge1xuICAgICAgLy8gVGhlIGxhc3QgbWVzc2FnZS4gSW5kaWNhdGVzIHRoYXQgdGhlIHJlc3VsdCBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgIGlmICh0aGlzLnJlc3VsdFJlc29sdmVyXykge1xuICAgICAgICBjb25zdCBjb2RlID0gLyoqIEB0eXBlIHshQWN0aXZpdHlSZXN1bHRDb2RlfSAqLyAocGF5bG9hZFsnY29kZSddKTtcbiAgICAgICAgY29uc3QgZGF0YSA9XG4gICAgICAgICAgICBjb2RlID09IEFjdGl2aXR5UmVzdWx0Q29kZS5GQUlMRUQgP1xuICAgICAgICAgICAgbmV3IEVycm9yKHBheWxvYWRbJ2RhdGEnXSB8fCAnJykgOlxuICAgICAgICAgICAgcGF5bG9hZFsnZGF0YSddO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQWN0aXZpdHlSZXN1bHQoXG4gICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIEFjdGl2aXR5TW9kZS5JRlJBTUUsXG4gICAgICAgICAgICB0aGlzLm1lc3Nlbmdlcl8uZ2V0VGFyZ2V0T3JpZ2luKCksXG4gICAgICAgICAgICAvKiBvcmlnaW5WZXJpZmllZCAqLyB0cnVlLFxuICAgICAgICAgICAgLyogc2VjdXJlQ2hhbm5lbCAqLyB0cnVlKTtcbiAgICAgICAgcmVzb2x2ZVJlc3VsdCh0aGlzLndpbl8sIHJlc3VsdCwgdGhpcy5yZXN1bHRSZXNvbHZlcl8pO1xuICAgICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG4gICAgICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kQ29tbWFuZCgnY2xvc2UnKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ3JlYWR5Jykge1xuICAgICAgaWYgKHRoaXMucmVhZHlSZXNvbHZlcl8pIHtcbiAgICAgICAgdGhpcy5yZWFkeVJlc29sdmVyXygpO1xuICAgICAgICB0aGlzLnJlYWR5UmVzb2x2ZXJfID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAncmVzaXplJykge1xuICAgICAgdGhpcy5yZXF1ZXN0ZWRIZWlnaHRfID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXlsb2FkWydoZWlnaHQnXSk7XG4gICAgICBpZiAodGhpcy5vblJlc2l6ZVJlcXVlc3RfKSB7XG4gICAgICAgIHRoaXMub25SZXNpemVSZXF1ZXN0Xyh0aGlzLnJlcXVlc3RlZEhlaWdodF8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cblxuXG4vKipcbiAqIFRoZSBgQWN0aXZpdHlQb3J0YCBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIHN0YW5kYWxvbmUgd2luZG93IGFjdGl2aXR5XG4gKiBjbGllbnQgZXhlY3V0ZWQgYXMgYSBwb3B1cC5cbiAqXG4gKiBAaW1wbGVtZW50cyB7QWN0aXZpdHlQb3J0fVxuICogQGltcGxlbWVudHMge0FjdGl2aXR5TWVzc2FnaW5nUG9ydH1cbiAqL1xuY2xhc3MgQWN0aXZpdHlXaW5kb3dQb3J0IHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICogQHBhcmFtIHs/QWN0aXZpdHlPcGVuT3B0aW9ucz19IG9wdF9vcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIG9wdF9hcmdzLCBvcHRfb3B0aW9ucykge1xuICAgIGNvbnN0IGlzVmFsaWRUYXJnZXQgPVxuICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgKHRhcmdldCA9PSAnX2JsYW5rJyB8fCB0YXJnZXQgPT0gJ190b3AnIHx8IHRhcmdldFswXSAhPSAnXycpO1xuICAgIGlmICghaXNWYWxpZFRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb25seSBhbGxvd2VkIHRhcmdldHMgYXJlIFwiX2JsYW5rXCIsIFwiX3RvcFwiJyArXG4gICAgICAgICAgJyBhbmQgbmFtZSB0YXJnZXRzJyk7XG4gICAgfVxuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucmVxdWVzdElkXyA9IHJlcXVlc3RJZDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy51cmxfID0gdXJsO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLm9wZW5UYXJnZXRfID0gdGFyZ2V0O1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9PYmplY3R9ICovXG4gICAgdGhpcy5hcmdzXyA9IG9wdF9hcmdzIHx8IG51bGw7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFjdGl2aXR5T3Blbk9wdGlvbnN9ICovXG4gICAgdGhpcy5vcHRpb25zXyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbm5lY3RlZFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigoIUFjdGl2aXR5UmVzdWx0fCFQcm9taXNlKSl9ICovXG4gICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IUFjdGl2aXR5UmVzdWx0Pn0gKi9cbiAgICB0aGlzLnJlc3VsdFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9XaW5kb3d9ICovXG4gICAgdGhpcy50YXJnZXRXaW5fID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9NZXNzZW5nZXJ9ICovXG4gICAgdGhpcy5tZXNzZW5nZXJfID0gbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0TW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5vcGVuVGFyZ2V0XyA9PSAnX3RvcCcgP1xuICAgICAgICBBY3Rpdml0eU1vZGUuUkVESVJFQ1QgOlxuICAgICAgICBBY3Rpdml0eU1vZGUuUE9QVVA7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIGFjdGl2aXR5IGluIGEgd2luZG93LCBlaXRoZXIgYXMgYSBwb3B1cCBvciB2aWEgcmVkaXJlY3QuXG4gICAqXG4gICAqIFJldHVybnMgdGhlIHByb21pc2UgdGhhdCB3aWxsIHlpZWxkIHdoZW4gdGhlIHdpbmRvdyByZXR1cm5zIG9yIGNsb3NlZC5cbiAgICogTm90aWNlLCB0aGF0IHRoaXMgcHJvbWlzZSBtYXkgbmV2ZXIgY29tcGxldGUgaWYgXCJyZWRpcmVjdFwiIG1vZGUgd2FzIHVzZWQuXG4gICAqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgb3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcGVuSW50ZXJuYWxfKCk7XG4gIH1cblxuICAvKipcbiAgICogV2FpdHMgdW50aWwgdGhlIGFjdGl2aXR5IHBvcnQgaXMgY29ubmVjdGVkIHRvIHRoZSBob3N0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5Db25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCB0aGUgYWN0aXZpdHkgYmluZGluZyBhbmQgY2xlYW51cCBsaXN0ZW5lcnMuXG4gICAqL1xuICBkaXNjb25uZWN0KCkge1xuICAgIGlmICh0aGlzLmhlYXJ0YmVhdEludGVydmFsXykge1xuICAgICAgdGhpcy53aW5fLmNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRJbnRlcnZhbF8pO1xuICAgICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbF8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5tZXNzZW5nZXJfKSB7XG4gICAgICB0aGlzLm1lc3Nlbmdlcl8uZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5tZXNzZW5nZXJfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0V2luXykge1xuICAgICAgLy8gVHJ5IHRvIGNsb3NlIHRoZSBwb3B1cCB3aW5kb3cuIFRoZSBob3N0IHdpbGwgYWxzbyB0cnkgdG8gZG8gdGhlIHNhbWUuXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnRhcmdldFdpbl8uY2xvc2UoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWdub3JlLlxuICAgICAgfVxuICAgICAgdGhpcy50YXJnZXRXaW5fID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8gPSBudWxsO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRUYXJnZXRXaW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0V2luXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0UmVzdWx0KCkge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdFByb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgaG9zdC5cbiAgICogV2hldGhlciB0aGUgaG9zdCBjYW4gb3IgY2Fubm90IHJlY2VpdmUgYSBtZXNzYWdlIGRlcGVuZHMgb24gdGhlIHR5cGUgb2ZcbiAgICogaG9zdCBhbmQgaXRzIHN0YXRlLiBFbnN1cmUgdGhhdCB0aGUgY29kZSBoYXMgYW4gYWx0ZXJuYXRpdmUgcGF0aCBpZlxuICAgKiBtZXNzYWdpbmcgaXMgbm90IGF2YWlsYWJsZS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBtZXNzYWdlKHBheWxvYWQpIHtcbiAgICB0aGlzLm1lc3Nlbmdlcl8uY3VzdG9tTWVzc2FnZShwYXlsb2FkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byByZWNlaXZlIG1lc3NhZ2VzIGZyb20gdGhlIGhvc3QuXG4gICAqIFdoZXRoZXIgdGhlIGhvc3QgY2FuIG9yIGNhbm5vdCByZWNlaXZlIGEgbWVzc2FnZSBkZXBlbmRzIG9uIHRoZSB0eXBlIG9mXG4gICAqIGhvc3QgYW5kIGl0cyBzdGF0ZS4gRW5zdXJlIHRoYXQgdGhlIGNvZGUgaGFzIGFuIGFsdGVybmF0aXZlIHBhdGggaWZcbiAgICogbWVzc2FnaW5nIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5tZXNzZW5nZXJfLm9uQ3VzdG9tTWVzc2FnZShjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjb21tdW5pY2F0aW9uIGNoYW5uZWwgb3IgcmV0dXJucyBhbiBleGlzdGluZyBvbmUuXG4gICAqIFdoZXRoZXIgdGhlIGhvc3QgY2FuIG9yIGNhbm5vdCByZWNlaXZlIGEgbWVzc2FnZSBkZXBlbmRzIG9uIHRoZSB0eXBlIG9mXG4gICAqIGhvc3QgYW5kIGl0cyBzdGF0ZS4gRW5zdXJlIHRoYXQgdGhlIGNvZGUgaGFzIGFuIGFsdGVybmF0aXZlIHBhdGggaWZcbiAgICogbWVzc2FnaW5nIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbWVzc2FnZUNoYW5uZWwob3B0X25hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzZW5nZXJfLmFza0NoYW5uZWwob3B0X25hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHdyYXBzIGFyb3VuZCB3aW5kb3cncyBvcGVuIG1ldGhvZC4gSXQgZmlyc3QgdHJpZXMgdG8gZXhlY3V0ZVxuICAgKiBgb3BlbmAgY2FsbCB3aXRoIHRoZSBwcm92aWRlZCB0YXJnZXQgYW5kIGlmIGl0IGZhaWxzLCBpdCByZXRyaWVzIHRoZSBjYWxsXG4gICAqIHdpdGggdGhlIGBfdG9wYCB0YXJnZXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGdpdmVuIHRoYXQgaW4gc29tZSBlbWJlZGRpbmdcbiAgICogc2NlbmFyaW9zLCBzdWNoIGFzIGlPUycgV0tXZWJWaWV3LCBuYXZpZ2F0aW9uIHRvIGBfYmxhbmtgIGFuZCBvdGhlciB0YXJnZXRzXG4gICAqIGlzIGJsb2NrZWQgYnkgZGVmYXVsdC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvcGVuSW50ZXJuYWxfKCkge1xuICAgIGNvbnN0IGZlYXR1cmVzU3RyID0gdGhpcy5idWlsZEZlYXR1cmVzXygpO1xuXG4gICAgLy8gUHJvdGVjdGl2ZWx5LCB0aGUgVVJMIHdpbGwgY29udGFpbiB0aGUgcmVxdWVzdCBwYXlsb2FkLCB1bmxlc3MgZXhwbGljaXRseVxuICAgIC8vIGRpcmVjdGVkIG5vdCB0byB2aWEgYHNraXBSZXF1ZXN0SW5VcmxgIG9wdGlvbi5cbiAgICBsZXQgdXJsID0gdGhpcy51cmxfO1xuICAgIGlmICghdGhpcy5vcHRpb25zXy5za2lwUmVxdWVzdEluVXJsKSB7XG4gICAgICBjb25zdCByZXR1cm5VcmwgPVxuICAgICAgICAgIHRoaXMub3B0aW9uc18ucmV0dXJuVXJsIHx8XG4gICAgICAgICAgcmVtb3ZlRnJhZ21lbnQodGhpcy53aW5fLmxvY2F0aW9uLmhyZWYpO1xuICAgICAgY29uc3QgcmVxdWVzdFN0cmluZyA9IHNlcmlhbGl6ZVJlcXVlc3Qoe1xuICAgICAgICByZXF1ZXN0SWQ6IHRoaXMucmVxdWVzdElkXyxcbiAgICAgICAgcmV0dXJuVXJsLFxuICAgICAgICBhcmdzOiB0aGlzLmFyZ3NfLFxuICAgICAgfSk7XG4gICAgICB1cmwgPSBhZGRGcmFnbWVudFBhcmFtKHVybCwgJ19fV0FfXycsIHJlcXVlc3RTdHJpbmcpO1xuICAgIH1cblxuICAgIC8vIE9wZW4gdGhlIHdpbmRvdy5cbiAgICBsZXQgdGFyZ2V0V2luO1xuICAgIGxldCBvcGVuVGFyZ2V0ID0gdGhpcy5vcGVuVGFyZ2V0XztcbiAgICAvLyBJRSBkb2VzIG5vdCBzdXBwb3J0IENPUlMgcG9wdXBzIC0gdGhlIHBvcHVwIGhhcyB0byBmYWxsYmFjayB0byByZWRpcmVjdFxuICAgIC8vIG1vZGUuXG4gICAgaWYgKG9wZW5UYXJnZXQgIT0gJ190b3AnKSB7XG4gICAgICBpZiAoaXNJZUJyb3dzZXIodGhpcy53aW5fKSkge1xuICAgICAgICBvcGVuVGFyZ2V0ID0gJ190b3AnO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBUcnkgZmlyc3Qgd2l0aCB0aGUgc3BlY2lmaWVkIHRhcmdldC4gSWYgd2UncmUgaW5zaWRlIHRoZSBXS1dlYlZpZXcgb3JcbiAgICAvLyBhIHNpbWlsYXIgZW52aXJvbm1lbnRzLCB0aGlzIG1ldGhvZCBpcyBleHBlY3RlZCB0byBmYWlsIGJ5IGRlZmF1bHQgZm9yXG4gICAgLy8gYWxsIHRhcmdldHMgZXhjZXB0IGBfdG9wYC5cbiAgICB0cnkge1xuICAgICAgdGFyZ2V0V2luID0gdGhpcy53aW5fLm9wZW4odXJsLCBvcGVuVGFyZ2V0LCBmZWF0dXJlc1N0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JlLlxuICAgIH1cbiAgICAvLyBUaGVuIHRyeSB3aXRoIGBfdG9wYCB0YXJnZXQuXG4gICAgaWYgKCF0YXJnZXRXaW4gJiZcbiAgICAgICAgb3BlblRhcmdldCAhPSAnX3RvcCcgJiZcbiAgICAgICAgIXRoaXMub3B0aW9uc18uZGlzYWJsZVJlZGlyZWN0RmFsbGJhY2spIHtcbiAgICAgIG9wZW5UYXJnZXQgPSAnX3RvcCc7XG4gICAgICB0cnkge1xuICAgICAgICB0YXJnZXRXaW4gPSB0aGlzLndpbl8ub3Blbih1cmwsIG9wZW5UYXJnZXQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUuXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgdGhlIHRhcmdldCB3aW5kb3cuXG4gICAgaWYgKHRhcmdldFdpbikge1xuICAgICAgdGhpcy50YXJnZXRXaW5fID0gdGFyZ2V0V2luO1xuICAgICAgaWYgKG9wZW5UYXJnZXQgIT0gJ190b3AnKSB7XG4gICAgICAgIHRoaXMuc2V0dXBQb3B1cF8oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNjb25uZWN0V2l0aEVycm9yXyhuZXcgRXJyb3IoJ2ZhaWxlZCB0byBvcGVuIHdpbmRvdycpKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gcmVzdWx0IHByb21pc2UsIGV2ZW4gdGhvdWdoIGl0IG1heSBuZXZlciBjb21wbGV0ZS5cbiAgICByZXR1cm4gdGhpcy5yZXN1bHRQcm9taXNlXy5jYXRjaCgoKSA9PiB7XG4gICAgICAvLyBJZ25vcmUuIENhbGwgdG8gdGhlIGBhY2NlcHRSZXN1bHQoKWAgc2hvdWxkIGZhaWwgaWYgbmVlZGVkLlxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkRmVhdHVyZXNfKCkge1xuICAgIC8vIFRoZSBtYXggd2lkdGggYW5kIGhlaWdodHMgYXJlIGNhbGN1bGF0ZWQgYXMgZm9sbG93aW5nOlxuICAgIC8vIE1heFNpemUgPSBBdmFpbFNpemUgLSBDb250cm9sc1NpemVcbiAgICAvLyBDb250cm9sc1NpemUgPSBPdXRlclNpemUgLSBJbm5lclNpemVcbiAgICBjb25zdCBzY3JlZW4gPSB0aGlzLndpbl8uc2NyZWVuO1xuICAgIGNvbnN0IGF2YWlsV2lkdGggPSBzY3JlZW4uYXZhaWxXaWR0aCB8fCBzY3JlZW4ud2lkdGg7XG4gICAgY29uc3QgYXZhaWxIZWlnaHQgPSBzY3JlZW4uYXZhaWxIZWlnaHQgfHwgc2NyZWVuLmhlaWdodDtcbiAgICBjb25zdCBpc1RvcCA9IHRoaXMuaXNUb3BXaW5kb3dfKCk7XG4gICAgY29uc3QgaXNFZGdlID0gaXNFZGdlQnJvd3Nlcih0aGlzLndpbl8pO1xuICAgIC8vIExpbWl0IGNvbnRyb2xzIHRvIDEwMHB4IHdpZHRoIGFuZCBoZWlnaHQuIE5vdGljZSB0aGF0IGl0J3Mgb25seVxuICAgIC8vIHBvc3NpYmxlIHRvIGNhbGN1bGF0ZSBjb250cm9scyBzaXplIGluIHRoZSB0b3Agd2luZG93LCBub3QgaW4gaWZyYW1lcy5cbiAgICAvLyBOb3RpY2UgdGhhdCB0aGUgRWRnZSBiZWhhdmlvciBpcyBzb21ld2hhdCB1bmlxdWUuIElmIHdlIGNhbid0IGZpbmQgdGhlXG4gICAgLy8gcmlnaHQgd2lkdGgvaGVpZ2h0LCBpdCB3aWxsIGxhdW5jaCBpbiB0aGUgZnVsbC1zY3JlZW4uIE90aGVyIGJyb3dzZXJzXG4gICAgLy8gZGVhbCB3aXRoIHN1Y2ggY2FzZXMgbW9yZSBncmFjZWZ1bGx5LlxuICAgIGNvbnN0IGNvbnRyb2xzV2lkdGggPVxuICAgICAgICBpc1RvcCAmJiB0aGlzLndpbl8ub3V0ZXJXaWR0aCA+IHRoaXMud2luXy5pbm5lcldpZHRoID9cbiAgICAgICAgTWF0aC5taW4oMTAwLCB0aGlzLndpbl8ub3V0ZXJXaWR0aCAtIHRoaXMud2luXy5pbm5lcldpZHRoKSA6XG4gICAgICAgIChpc0VkZ2UgPyAxMDAgOiAwKTtcbiAgICBjb25zdCBjb250cm9sc0hlaWdodCA9XG4gICAgICAgIGlzVG9wICYmIHRoaXMud2luXy5vdXRlckhlaWdodCA+IHRoaXMud2luXy5pbm5lckhlaWdodCA/XG4gICAgICAgIE1hdGgubWluKDEwMCwgdGhpcy53aW5fLm91dGVySGVpZ2h0IC0gdGhpcy53aW5fLmlubmVySGVpZ2h0KSA6XG4gICAgICAgIChpc0VkZ2UgPyAxMDAgOiAwKTtcbiAgICAvLyBXaXRoIGFsbCB0aGUgYWRqdXN0bWVudHMsIGF0IGxlYXN0IDUwJSBvZiB0aGUgYXZhaWxhYmxlIHdpZHRoL2hlaWdodFxuICAgIC8vIHNob3VsZCBiZSBtYWRlIGF2YWlsYWJsZSB0byBhIHBvcHVwLlxuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoYXZhaWxXaWR0aCAtIGNvbnRyb2xzV2lkdGgsIGF2YWlsV2lkdGggKiAwLjUpO1xuICAgIGNvbnN0IG1heEhlaWdodCA9IE1hdGgubWF4KGF2YWlsSGVpZ2h0IC0gY29udHJvbHNIZWlnaHQsIGF2YWlsSGVpZ2h0ICogMC41KTtcbiAgICBsZXQgdyA9IE1hdGguZmxvb3IoTWF0aC5taW4oNjAwLCBtYXhXaWR0aCAqIDAuOSkpO1xuICAgIGxldCBoID0gTWF0aC5mbG9vcihNYXRoLm1pbig2MDAsIG1heEhlaWdodCAqIDAuOSkpO1xuICAgIGlmICh0aGlzLm9wdGlvbnNfLndpZHRoKSB7XG4gICAgICB3ID0gTWF0aC5taW4odGhpcy5vcHRpb25zXy53aWR0aCwgbWF4V2lkdGgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zXy5oZWlnaHQpIHtcbiAgICAgIGggPSBNYXRoLm1pbih0aGlzLm9wdGlvbnNfLmhlaWdodCwgbWF4SGVpZ2h0KTtcbiAgICB9XG4gICAgY29uc3QgeCA9IE1hdGguZmxvb3IoKHNjcmVlbi53aWR0aCAtIHcpIC8gMik7XG4gICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKHNjcmVlbi5oZWlnaHQgLSBoKSAvIDIpO1xuICAgIGNvbnN0IGZlYXR1cmVzID0ge1xuICAgICAgJ2hlaWdodCc6IGgsXG4gICAgICAnd2lkdGgnOiB3LFxuICAgICAgJ3Jlc2l6YWJsZSc6ICd5ZXMnLFxuICAgICAgJ3Njcm9sbGJhcnMnOiAneWVzJyxcbiAgICB9O1xuICAgIC8vIERvIG5vdCBzZXQgbGVmdC90b3AgaW4gRWRnZTogaXQgZmFpbHMuXG4gICAgaWYgKCFpc0VkZ2UpIHtcbiAgICAgIGZlYXR1cmVzWydsZWZ0J10gPSB4O1xuICAgICAgZmVhdHVyZXNbJ3RvcCddID0geTtcbiAgICB9XG4gICAgbGV0IGZlYXR1cmVzU3RyID0gJyc7XG4gICAgZm9yIChjb25zdCBmIGluIGZlYXR1cmVzKSB7XG4gICAgICBpZiAoZmVhdHVyZXNTdHIpIHtcbiAgICAgICAgZmVhdHVyZXNTdHIgKz0gJywnO1xuICAgICAgfVxuICAgICAgZmVhdHVyZXNTdHIgKz0gYCR7Zn09JHtmZWF0dXJlc1tmXX1gO1xuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZXNTdHI7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgb25seSBleGlzdHMgdG8gbWFrZSBpZnJhbWUvdG9wIGVtdWxhdGlvbiBwb3NzaWJsZSBpbiB0ZXN0cy5cbiAgICogT3RoZXJ3aXNlIGB3aW5kb3cudG9wYCBjYW5ub3QgYmUgb3ZlcnJpZGRlbi5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzVG9wV2luZG93XygpIHtcbiAgICByZXR1cm4gdGhpcy53aW5fID09IHRoaXMud2luXy50b3A7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc2V0dXBQb3B1cF8oKSB7XG4gICAgLy8gS2VlcCBhbGl2ZSB0byBjYXRjaCB0aGUgd2luZG93IGNsb3NpbmcsIHdoaWNoIHdvdWxkIGluZGljYXRlXG4gICAgLy8gXCJjYW5jZWxcIiBzaWduYWwuXG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbF8gPSB0aGlzLndpbl8uc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja18oLyogZGVsYXlDYW5jZWwgKi8gdHJ1ZSk7XG4gICAgfSwgNTAwKTtcblxuICAgIC8vIFN0YXJ0IHVwIG1lc3NhZ2luZy4gVGhlIG1lc3NhZ2luZyBpcyBleHBsaWNpdGx5IGFsbG93ZWQgdG8gcHJvY2VlZFxuICAgIC8vIHdpdGhvdXQgb3JpZ2luIGNoZWNrIGIvYyBhbGwgYXJndW1lbnRzIGhhdmUgYWxyZWFkeSBiZWVuIHBhc3NlZCBpblxuICAgIC8vIHRoZSBVUkwgYW5kIHNwZWNpYWwgaGFuZGxpbmcgaXMgZW5mb3JjZWQgd2hlbiByZXN1bHQgaXMgZGVsaXZlcmVkLlxuICAgIHRoaXMubWVzc2VuZ2VyXyA9IG5ldyBNZXNzZW5nZXIoXG4gICAgICAgIHRoaXMud2luXyxcbiAgICAgICAgLyoqIEB0eXBlIHshV2luZG93fSAqLyAodGhpcy50YXJnZXRXaW5fKSxcbiAgICAgICAgLyogdGFyZ2V0T3JpZ2luICovIG51bGwsXG4gICAgICAgIC8qIHJlcXVpcmVUYXJnZXQgKi8gdHJ1ZSk7XG4gICAgdGhpcy5tZXNzZW5nZXJfLmNvbm5lY3QodGhpcy5oYW5kbGVDb21tYW5kXy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGVsYXlDYW5jZWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNoZWNrXyhvcHRfZGVsYXlDYW5jZWwpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0V2luXyB8fCB0aGlzLnRhcmdldFdpbl8uY2xvc2VkKSB7XG4gICAgICBpZiAodGhpcy5oZWFydGJlYXRJbnRlcnZhbF8pIHtcbiAgICAgICAgdGhpcy53aW5fLmNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRJbnRlcnZhbF8pO1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IG51bGw7XG4gICAgICB9XG4gICAgICAvLyBHaXZlIGEgY2hhbmNlIGZvciB0aGUgcmVzdWx0IHRvIGFycml2ZSwgYnV0IG90aGVyd2lzZSBjb25zaWRlciB0aGVcbiAgICAgIC8vIHJlc3BvbmNlIHRvIGJlIGVtcHR5LlxuICAgICAgdGhpcy53aW5fLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMucmVzdWx0XyhBY3Rpdml0eVJlc3VsdENvZGUuQ0FOQ0VMRUQsIC8qIGRhdGEgKi8gbnVsbCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RXaXRoRXJyb3JfKGUpO1xuICAgICAgICB9XG4gICAgICB9LCBvcHRfZGVsYXlDYW5jZWwgPyAzMDAwIDogMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVycm9yfSByZWFzb25cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRpc2Nvbm5lY3RXaXRoRXJyb3JfKHJlYXNvbikge1xuICAgIGlmICh0aGlzLnJlc3VsdFJlc29sdmVyXykge1xuICAgICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8oUHJvbWlzZS5yZWplY3QocmVhc29uKSk7XG4gICAgfVxuICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UmVzdWx0Q29kZX0gY29kZVxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc3VsdF8oY29kZSwgZGF0YSkge1xuICAgIGlmICh0aGlzLnJlc3VsdFJlc29sdmVyXykge1xuICAgICAgY29uc3QgaXNDb25uZWN0ZWQgPSB0aGlzLm1lc3Nlbmdlcl8uaXNDb25uZWN0ZWQoKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBY3Rpdml0eVJlc3VsdChcbiAgICAgICAgICBjb2RlLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgQWN0aXZpdHlNb2RlLlBPUFVQLFxuICAgICAgICAgIGlzQ29ubmVjdGVkID9cbiAgICAgICAgICAgICAgdGhpcy5tZXNzZW5nZXJfLmdldFRhcmdldE9yaWdpbigpIDpcbiAgICAgICAgICAgICAgZ2V0T3JpZ2luRnJvbVVybCh0aGlzLnVybF8pLFxuICAgICAgICAgIC8qIG9yaWdpblZlcmlmaWVkICovIGlzQ29ubmVjdGVkLFxuICAgICAgICAgIC8qIHNlY3VyZUNoYW5uZWwgKi8gaXNDb25uZWN0ZWQpO1xuICAgICAgcmVzb2x2ZVJlc3VsdCh0aGlzLndpbl8sIHJlc3VsdCwgdGhpcy5yZXN1bHRSZXNvbHZlcl8pO1xuICAgICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5tZXNzZW5nZXJfKSB7XG4gICAgICB0aGlzLm1lc3Nlbmdlcl8uc2VuZENvbW1hbmQoJ2Nsb3NlJyk7XG4gICAgfVxuICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbWRcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVDb21tYW5kXyhjbWQsIHBheWxvYWQpIHtcbiAgICBpZiAoY21kID09ICdjb25uZWN0Jykge1xuICAgICAgLy8gRmlyc3QgZXZlciBtZXNzYWdlLiBJbmRpY2F0ZXMgdGhhdCB0aGUgcmVjZWl2ZXIgaXMgbGlzdGVuaW5nLlxuICAgICAgdGhpcy5tZXNzZW5nZXJfLnNlbmRTdGFydENvbW1hbmQodGhpcy5hcmdzXyk7XG4gICAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXygpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdyZXN1bHQnKSB7XG4gICAgICAvLyBUaGUgbGFzdCBtZXNzYWdlLiBJbmRpY2F0ZXMgdGhhdCB0aGUgcmVzdWx0IGhhcyBiZWVuIHJlY2VpdmVkLlxuICAgICAgY29uc3QgY29kZSA9IC8qKiBAdHlwZSB7IUFjdGl2aXR5UmVzdWx0Q29kZX0gKi8gKHBheWxvYWRbJ2NvZGUnXSk7XG4gICAgICBjb25zdCBkYXRhID1cbiAgICAgICAgICBjb2RlID09IEFjdGl2aXR5UmVzdWx0Q29kZS5GQUlMRUQgP1xuICAgICAgICAgIG5ldyBFcnJvcihwYXlsb2FkWydkYXRhJ10gfHwgJycpIDpcbiAgICAgICAgICBwYXlsb2FkWydkYXRhJ107XG4gICAgICB0aGlzLnJlc3VsdF8oY29kZSwgZGF0YSk7XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ2NoZWNrJykge1xuICAgICAgdGhpcy53aW5fLnNldFRpbWVvdXQoKCkgPT4gdGhpcy5jaGVja18oKSwgMjAwKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZnJhZ21lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAqIEByZXR1cm4gez9BY3Rpdml0eVBvcnR9XG4gKi9cbmZ1bmN0aW9uIGRpc2NvdmVyUmVkaXJlY3RQb3J0KHdpbiwgZnJhZ21lbnQsIHJlcXVlc3RJZCkge1xuICAvLyBUcnkgdG8gZmluZCB0aGUgcmVzdWx0IGluIHRoZSBmcmFnbWVudC5cbiAgY29uc3QgcGFyYW1OYW1lID0gJ19fV0FfUkVTX18nO1xuICBjb25zdCBmcmFnbWVudFBhcmFtID0gZ2V0UXVlcnlQYXJhbShmcmFnbWVudCwgcGFyYW1OYW1lKTtcbiAgaWYgKCFmcmFnbWVudFBhcmFtKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcmVzcG9uc2UgPSAvKiogQHR5cGUgez9PYmplY3R9ICovIChKU09OLnBhcnNlKGZyYWdtZW50UGFyYW0pKTtcbiAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZVsncmVxdWVzdElkJ10gIT0gcmVxdWVzdElkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBSZW1vdmUgdGhlIGZvdW5kIHBhcmFtIGZyb20gdGhlIGZyYWdtZW50LlxuICBjb25zdCBjbGVhbkZyYWdtZW50ID0gcmVtb3ZlUXVlcnlQYXJhbSh3aW4ubG9jYXRpb24uaGFzaCwgcGFyYW1OYW1lKSB8fCAnJztcbiAgaWYgKGNsZWFuRnJhZ21lbnQgIT0gd2luLmxvY2F0aW9uLmhhc2gpIHtcbiAgICBpZiAod2luLmhpc3RvcnkgJiYgd2luLmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB3aW4uaGlzdG9yeS5yZXBsYWNlU3RhdGUod2luLmhpc3Rvcnkuc3RhdGUsICcnLCBjbGVhbkZyYWdtZW50KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWdub3JlLlxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNvZGUgPSByZXNwb25zZVsnY29kZSddO1xuICBjb25zdCBkYXRhID0gcmVzcG9uc2VbJ2RhdGEnXTtcbiAgY29uc3Qgb3JpZ2luID0gcmVzcG9uc2VbJ29yaWdpbiddO1xuICBjb25zdCByZWZlcnJlck9yaWdpbiA9IHdpbi5kb2N1bWVudC5yZWZlcnJlciAmJlxuICAgICAgZ2V0T3JpZ2luRnJvbVVybCh3aW4uZG9jdW1lbnQucmVmZXJyZXIpO1xuICBjb25zdCBvcmlnaW5WZXJpZmllZCA9IG9yaWdpbiA9PSByZWZlcnJlck9yaWdpbjtcbiAgcmV0dXJuIG5ldyBBY3Rpdml0eVdpbmRvd1JlZGlyZWN0UG9ydChcbiAgICAgIHdpbixcbiAgICAgIGNvZGUsXG4gICAgICBkYXRhLFxuICAgICAgb3JpZ2luLFxuICAgICAgb3JpZ2luVmVyaWZpZWQpO1xufVxuXG5cbi8qKlxuICogVGhlIGBBY3Rpdml0eVBvcnRgIGltcGxlbWVudGF0aW9uIGZvciB0aGUgc3RhbmRhbG9uZSB3aW5kb3cgYWN0aXZpdHlcbiAqIGNsaWVudCBleGVjdXRlZCBhcyBhIHBvcHVwLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtBY3Rpdml0eVBvcnR9XG4gKi9cbmNsYXNzIEFjdGl2aXR5V2luZG93UmVkaXJlY3RQb3J0IHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshQWN0aXZpdHlSZXN1bHRDb2RlfSBjb2RlXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0T3JpZ2luXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdGFyZ2V0T3JpZ2luVmVyaWZpZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgY29kZSwgZGF0YSwgdGFyZ2V0T3JpZ2luLCB0YXJnZXRPcmlnaW5WZXJpZmllZCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eVJlc3VsdENvZGV9ICovXG4gICAgdGhpcy5jb2RlXyA9IGNvZGU7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Kn0gKi9cbiAgICB0aGlzLmRhdGFfID0gZGF0YTtcbiAgICAvKiogQHByaXZhdGUge3N0cmluZ30gKi9cbiAgICB0aGlzLnRhcmdldE9yaWdpbl8gPSB0YXJnZXRPcmlnaW47XG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luVmVyaWZpZWRfID0gdGFyZ2V0T3JpZ2luVmVyaWZpZWQ7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldE1vZGUoKSB7XG4gICAgcmV0dXJuIEFjdGl2aXR5TW9kZS5SRURJUkVDVDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0UmVzdWx0KCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBY3Rpdml0eVJlc3VsdChcbiAgICAgICAgdGhpcy5jb2RlXyxcbiAgICAgICAgdGhpcy5kYXRhXyxcbiAgICAgICAgQWN0aXZpdHlNb2RlLlJFRElSRUNULFxuICAgICAgICB0aGlzLnRhcmdldE9yaWdpbl8sXG4gICAgICAgIHRoaXMudGFyZ2V0T3JpZ2luVmVyaWZpZWRfLFxuICAgICAgICAvKiBzZWN1cmVDaGFubmVsICovIGZhbHNlKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICByZXNvbHZlUmVzdWx0KHRoaXMud2luXywgcmVzdWx0LCByZXNvbHZlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cblxuXG4vKipcbiAqIFRoZSBwYWdlLWxldmVsIGFjdGl2aXRpZXMgbWFuYWdlciBwb3J0cy4gVGhpcyBjbGFzcyBpcyBpbnRlbmRlZCB0byBiZSB1c2VkXG4gKiBhcyBhIHNpbmdsZXRvbi4gSXQgY2FuIHN0YXJ0IGFjdGl2aXRpZXMgb2YgYWxsIG1vZGVzOiBpZnJhbWUsIHBvcHVwLCBhbmRcbiAqIHJlZGlyZWN0LlxuICovXG5jbGFzcyBBY3Rpdml0eVBvcnRzIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnZlcnNpb24gPSAnMS4yNCc7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmZyYWdtZW50XyA9IHdpbi5sb2NhdGlvbi5oYXNoO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIUFycmF5PGZ1bmN0aW9uKCFBY3Rpdml0eVBvcnQpPj59XG4gICAgICovXG4gICAgdGhpcy5yZXF1ZXN0SGFuZGxlcnNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0IGJ1ZmZlciBpcyBpbmRleGVkIGJ5IGByZXF1ZXN0SWRgLlxuICAgICAqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsICFBY3Rpdml0eVBvcnQ+fVxuICAgICAqL1xuICAgIHRoaXMucmVzdWx0QnVmZmVyXyA9IHt9O1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oIUVycm9yKX0gKi9cbiAgICB0aGlzLnJlZGlyZWN0RXJyb3JSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHshUHJvbWlzZTwhRXJyb3I+fSAqL1xuICAgIHRoaXMucmVkaXJlY3RFcnJvclByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnJlZGlyZWN0RXJyb3JSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGFuIGFjdGl2aXR5IHdpdGhpbiB0aGUgc3BlY2lmaWVkIGlmcmFtZS5cbiAgICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgKi9cbiAgb3BlbklmcmFtZShpZnJhbWUsIHVybCwgb3B0X2FyZ3MpIHtcbiAgICBjb25zdCBwb3J0ID0gbmV3IEFjdGl2aXR5SWZyYW1lUG9ydChpZnJhbWUsIHVybCwgb3B0X2FyZ3MpO1xuICAgIHJldHVybiBwb3J0LmNvbm5lY3QoKS50aGVuKCgpID0+IHBvcnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGFuIGFjdGl2aXR5IGluIGEgc2VwYXJhdGUgd2luZG93LiBUaGUgcmVzdWx0IHdpbGwgYmUgZGVsaXZlcmVkXG4gICAqIHRvIHRoZSBgb25SZXN1bHRgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBUaGUgYWN0aXZpdHkgY2FuIGJlIG9wZW5lZCBpbiB0d28gbW9kZXM6IFwicG9wdXBcIiBhbmQgXCJyZWRpcmVjdFwiLiBUaGlzXG4gICAqIGRlcGVuZHMgb24gdGhlIGB0YXJnZXRgIHZhbHVlLCBidXQgYWxzbyBvbiB0aGUgYnJvd3Nlci9lbnZpcm9ubWVudC5cbiAgICpcbiAgICogVGhlIGFsbG93ZWQgYHRhcmdldGAgdmFsdWVzIGFyZSBgX2JsYW5rYCwgYF90b3BgIGFuZCBuYW1lIHRhcmdldHMuIFRoZVxuICAgKiBgX3NlbGZgLCBgX3BhcmVudGAgYW5kIHNpbWlsYXIgdGFyZ2V0cyBhcmUgbm90IGFsbG93ZWQuXG4gICAqXG4gICAqIFRoZSBgX3RvcGAgdGFyZ2V0IGluZGljYXRlcyB0aGF0IHRoZSBhY3Rpdml0eSBzaG91bGQgYmUgb3BlbmVkIGFzIGFcbiAgICogXCJyZWRpcmVjdFwiLCB3aGlsZSBvdGhlciB0YXJnZXRzIGluZGljYXRlIHRoYXQgdGhlIGFjdGl2aXR5IHNob3VsZCBiZVxuICAgKiBvcGVuZWQgYXMgYSBwb3B1cC4gVGhlIGFjdGl2aXR5IGNsaWVudCB3aWxsIHRyeSB0byBob25vciB0aGUgcmVxdWVzdGVkXG4gICAqIHRhcmdldC4gSG93ZXZlciwgaXQncyBub3QgYWx3YXlzIHBvc3NpYmxlLiBTb21lIGVudmlyb25tZW50cyBkbyBub3RcbiAgICogYWxsb3cgcG9wdXBzIGFuZCB0aGV5IGVpdGhlciBmb3JjZSByZWRpcmVjdCBvciBmYWlsIHRoZSB3aW5kb3cgb3BlblxuICAgKiByZXF1ZXN0LiBJbiB0aGlzIGNhc2UsIHRoZSBhY3Rpdml0eSB3aWxsIHRyeSB0byBmYWxsYmFjayB0byB0aGUgXCJyZWRpcmVjdFwiXG4gICAqIG1vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0XG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEBwYXJhbSB7P0FjdGl2aXR5T3Blbk9wdGlvbnM9fSBvcHRfb3B0aW9uc1xuICAgKiBAcmV0dXJuIHt7dGFyZ2V0V2luOiA/V2luZG93fX1cbiAgICovXG4gIG9wZW4ocmVxdWVzdElkLCB1cmwsIHRhcmdldCwgb3B0X2FyZ3MsIG9wdF9vcHRpb25zKSB7XG4gICAgY29uc3QgcG9ydCA9IHRoaXMub3Blbldpbl8ocmVxdWVzdElkLCB1cmwsIHRhcmdldCwgb3B0X2FyZ3MsIG9wdF9vcHRpb25zKTtcbiAgICByZXR1cm4ge3RhcmdldFdpbjogcG9ydC5nZXRUYXJnZXRXaW4oKX07XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gYWN0aXZpdHkgaW4gYSBzZXBhcmF0ZSB3aW5kb3cgYW5kIHRyaWVzIHRvIHNldHVwIG1lc3NhZ2luZyB3aXRoXG4gICAqIHRoaXMgd2luZG93LlxuICAgKlxuICAgKiBTZWUgYG9wZW4oKWAgbWV0aG9kIGZvciBtb3JlIGRldGFpbHMsIGluY2x1ZGluZyBgb25SZXN1bHRgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBvcHRfYXJnc1xuICAgKiBAcGFyYW0gez9BY3Rpdml0eU9wZW5PcHRpb25zPX0gb3B0X29wdGlvbnNcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5TWVzc2FnaW5nUG9ydD59XG4gICAqL1xuICBvcGVuV2l0aE1lc3NhZ2luZyhyZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpIHtcbiAgICBjb25zdCBwb3J0ID0gdGhpcy5vcGVuV2luXyhyZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpO1xuICAgIHJldHVybiBwb3J0LndoZW5Db25uZWN0ZWQoKS50aGVuKCgpID0+IHBvcnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgY2FsbGJhY2sgZm9yIHRoZSByZXN1bHQgb2YgdGhlIGFjdGl2aXR5IG9wZW5lZCB3aXRoIHRoZVxuICAgKiBzcGVjaWZpZWQgYHJlcXVlc3RJZGAgKHNlZSB0aGUgYG9wZW4oKWAgbWV0aG9kKS4gVGhlIGNhbGxiYWNrIGlzIGFcbiAgICogZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNpbmdsZSBgQWN0aXZpdHlQb3J0YCBhcmd1bWVudC4gVGhlIGNsaWVudFxuICAgKiBjYW4gdXNlIHRoaXMgb2JqZWN0IHRvIHZlcmlmeSB0aGUgcG9ydCB1c2luZyBpdCdzIG9yaWdpbiwgdmVyaWZpZWQgYW5kXG4gICAqIHNlY3VyZSBjaGFubmVsIGZsYWdzLiBUaGVuIHRoZSBjbGllbnQgY2FuIGNhbGxcbiAgICogYEFjdGl2aXR5UG9ydC5hY2NlcHRSZXN1bHQoKWAgbWV0aG9kIHRvIGFjY2VwdCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBUaGUgYWN0aXZpdHkgcmVzdWx0IGlzIGhhbmRsZWQgdmlhIGEgc2VwYXJhdGUgY2FsbGJhY2sgYmVjYXVzZSBvZiBhXG4gICAqIHBvc3NpYmxlIHJlZGlyZWN0LiBTbyB1c2Ugb2YgZGlyZWN0IGNhbGxiYWNrcyBhbmQvb3IgcHJvbWlzZXMgaXMgbm90XG4gICAqIHBvc3NpYmxlIGluIHRoYXQgY2FzZS5cbiAgICpcbiAgICogQSB0eXBpY2FsIGltcGxlbWVudGF0aW9uIHdvdWxkIGxvb2sgbGlrZTpcbiAgICogYGBgXG4gICAqIHBvcnRzLm9uUmVzdWx0KCdyZXF1ZXN0MScsIGZ1bmN0aW9uKHBvcnQpIHtcbiAgICogICBwb3J0LmFjY2VwdFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAqICAgICAvLyBPbmx5IHZlcmlmaWVkIG9yaWdpbnMgYXJlIGFsbG93ZWQuXG4gICAqICAgICBpZiAocmVzdWx0Lm9yaWdpbiA9PSBleHBlY3RlZE9yaWdpbiAmJlxuICAgKiAgICAgICAgIHJlc3VsdC5vcmlnaW5WZXJpZmllZCAmJlxuICAgKiAgICAgICAgIHJlc3VsdC5zZWN1cmVDaGFubmVsKSB7XG4gICAqICAgICAgIGhhbmRsZVJlc3VsdEZvclJlcXVlc3QxKHJlc3VsdCk7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqIH0pXG4gICAqXG4gICAqIHBvcnRzLm9wZW4oJ3JlcXVlc3QxJywgcmVxdWVzdDFVcmwsICdfYmxhbmsnKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbighQWN0aXZpdHlQb3J0KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzdWx0KHJlcXVlc3RJZCwgY2FsbGJhY2spIHtcbiAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLnJlcXVlc3RIYW5kbGVyc19bcmVxdWVzdElkXTtcbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICBoYW5kbGVycyA9IFtdO1xuICAgICAgdGhpcy5yZXF1ZXN0SGFuZGxlcnNfW3JlcXVlc3RJZF0gPSBoYW5kbGVycztcbiAgICB9XG4gICAgaGFuZGxlcnMucHVzaChjYWxsYmFjayk7XG5cbiAgICAvLyBDb25zdW1lIGF2YWlsYWJsZSByZXN1bHQuXG4gICAgY29uc3QgYXZhaWxhYmxlUmVzdWx0ID0gdGhpcy5kaXNjb3ZlclJlc3VsdF8ocmVxdWVzdElkKTtcbiAgICBpZiAoYXZhaWxhYmxlUmVzdWx0KSB7XG4gICAgICB0aGlzLmNvbnN1bWVSZXN1bHRfKGF2YWlsYWJsZVJlc3VsdCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFcnJvcil9IGhhbmRsZXJcbiAgICovXG4gIG9uUmVkaXJlY3RFcnJvcihoYW5kbGVyKSB7XG4gICAgdGhpcy5yZWRpcmVjdEVycm9yUHJvbWlzZV8udGhlbihoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBvcHRfYXJnc1xuICAgKiBAcGFyYW0gez9BY3Rpdml0eU9wZW5PcHRpb25zPX0gb3B0X29wdGlvbnNcbiAgICogQHJldHVybiB7IUFjdGl2aXR5V2luZG93UG9ydH1cbiAgICovXG4gIG9wZW5XaW5fKHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIG9wdF9hcmdzLCBvcHRfb3B0aW9ucykge1xuICAgIGNvbnN0IHBvcnQgPSBuZXcgQWN0aXZpdHlXaW5kb3dQb3J0KFxuICAgICAgICB0aGlzLndpbl8sIHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIG9wdF9hcmdzLCBvcHRfb3B0aW9ucyk7XG4gICAgcG9ydC5vcGVuKCkudGhlbigoKSA9PiB7XG4gICAgICAvLyBBd2FpdCByZXN1bHQgaWYgcG9zc2libGUuIE5vdGljZSB0aGF0IHdoZW4gZmFsbGluZyBiYWNrIHRvIFwicmVkaXJlY3RcIixcbiAgICAgIC8vIHRoZSByZXN1bHQgd2lsbCBuZXZlciBhcnJpdmUgdGhyb3VnaCB0aGlzIHBvcnQuXG4gICAgICB0aGlzLmNvbnN1bWVSZXN1bHRBbGxfKHJlcXVlc3RJZCwgcG9ydCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBvcnQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcmV0dXJuIHs/QWN0aXZpdHlQb3J0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzY292ZXJSZXN1bHRfKHJlcXVlc3RJZCkge1xuICAgIGxldCBwb3J0ID0gdGhpcy5yZXN1bHRCdWZmZXJfW3JlcXVlc3RJZF07XG4gICAgaWYgKCFwb3J0ICYmIHRoaXMuZnJhZ21lbnRfKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwb3J0ID0gZGlzY292ZXJSZWRpcmVjdFBvcnQoXG4gICAgICAgICAgICB0aGlzLndpbl8sIHRoaXMuZnJhZ21lbnRfLCByZXF1ZXN0SWQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvd0FzeW5jKGUpO1xuICAgICAgICB0aGlzLnJlZGlyZWN0RXJyb3JSZXNvbHZlcl8oZSk7XG4gICAgICB9XG4gICAgICBpZiAocG9ydCkge1xuICAgICAgICB0aGlzLnJlc3VsdEJ1ZmZlcl9bcmVxdWVzdElkXSA9IHBvcnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb3J0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UG9ydH0gcG9ydFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFBY3Rpdml0eVBvcnQpfSBjYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3VtZVJlc3VsdF8ocG9ydCwgY2FsbGJhY2spIHtcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKHBvcnQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHshQWN0aXZpdHlQb3J0fSBwb3J0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdW1lUmVzdWx0QWxsXyhyZXF1ZXN0SWQsIHBvcnQpIHtcbiAgICAvLyBGaW5kIGFuZCBleGVjdXRlIGhhbmRsZXJzLlxuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5yZXF1ZXN0SGFuZGxlcnNfW3JlcXVlc3RJZF07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge1xuICAgICAgICB0aGlzLmNvbnN1bWVSZXN1bHRfKHBvcnQsIGhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEJ1ZmZlciB0aGUgcmVzdWx0IGZvciBjYWxsYmFja3MgdGhhdCBtYXkgYXJyaXZlIGluIHRoZSBmdXR1cmUuXG4gICAgdGhpcy5yZXN1bHRCdWZmZXJfW3JlcXVlc3RJZF0gPSBwb3J0O1xuICB9XG59XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQWN0aXZpdHlQb3J0cyxcbiAgQWN0aXZpdHlJZnJhbWVQb3J0LFxuICBBY3Rpdml0eU1lc3NhZ2luZ1BvcnQsXG4gIEFjdGl2aXR5TW9kZSxcbiAgQWN0aXZpdHlPcGVuT3B0aW9ucyxcbiAgQWN0aXZpdHlQb3J0LFxuICBBY3Rpdml0eVJlcXVlc3QsXG4gIEFjdGl2aXR5UmVzdWx0LFxuICBBY3Rpdml0eVJlc3VsdENvZGUsXG4gIEFjdGl2aXR5V2luZG93UG9ydCxcbiAgY3JlYXRlQWJvcnRFcnJvcixcbiAgaXNBYm9ydEVycm9yLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMjAgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtFbnRpdGxlbWVudHN9IGZyb20gJy4vZW50aXRsZW1lbnRzJztcbmltcG9ydCB7U3Vic2NyaWJlUmVzcG9uc2V9IGZyb20gJy4vc3Vic2NyaWJlLXJlc3BvbnNlJztcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIHVzZXJzIG9mIHRoZSBiYXNpYyB0aWVyIG9mIFN1YnNjcmliZSB3aXRoIEdvb2dsZS5cbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2ljU3Vic2NyaXB0aW9ucyB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgYmFzaWMgc3Vic2NyaXB0aW9ucyBydW50aW1lLiBUaGlzIGluY2x1ZGVzIHNldHRpbmcgb2YgdGhlXG4gICAqIHNwZWNpZmllZCBwYXJhbSB2YWx1ZXMgaW4gdGhlIEpTT04tTEQgbWFya3VwIG9mIHRoZSBwYWdlLCBzZXRzIHVwIGFueSBTd0dcbiAgICogYnV0dG9ucyB3aXRoIGF0dHJpYnV0ZSAnc3dnLXN0YW5kYXJkLWJ1dHRvbicsIGFuZCBpbnNlcnRzIGEgU3dHIHByb21wdCBmb3JcbiAgICogY29udHJpYnV0aW9ucy9zdWJzY3JpcHRpb25zLiBJZiB0aGUgZmllbGRzIHNwZWNpZmllZCBpbiB0aGUgcGFyYW1zIGFyZVxuICAgKiBhbHJlYWR5IHNwZWNpZmllZCBpbiB0aGUgSlNPTi1MRCBtYXJrdXAgb24gdGhlIHBhZ2UsIHRoZSBleGlzdGluZyB2YWx1ZXNcbiAgICogd2lsbCBiZSBwcmVzZXJ2ZWQsIGFuZCB0aGUgdmFsdWVzIHdpdGhpbiBpbml0IHdpbGwgYmUgaWdub3JlZC5cbiAgICogQHBhcmFtIHt7XG4gICAqICAgdHlwZTogKHN0cmluZ3whQXJyYXk8c3RyaW5nPiksXG4gICAqICAgaXNBY2Nlc3NpYmxlRm9yRnJlZTogYm9vbGVhbixcbiAgICogICBpc1BhcnRPZlR5cGU6IChzdHJpbmd8IUFycmF5PHN0cmluZz4pLFxuICAgKiAgIGlzUGFydE9mUHJvZHVjdElkOiBzdHJpbmcsXG4gICAqICAgYXV0b1Byb21wdFR5cGU6IChBdXRvUHJvbXB0VHlwZXx1bmRlZmluZWQpLFxuICAgKiAgIGNsaWVudE9wdGlvbnM6IChDbGllbnRPcHRpb25zfHVuZGVmaW5lZCksXG4gICAqIH09fSBwYXJhbXNcbiAgICovXG4gIGluaXQocGFyYW1zKSB7fVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGVudGl0bGVtZW50IGNoZWNrIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCFFbnRpdGxlbWVudHM+KX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcGF5bWVudCBjb21wbGV0ZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHNldE9uUGF5bWVudFJlc3BvbnNlKGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBPcGVuIENoZWNrRW50aXRsZW1lbnRzVmlldyB0byBsZXQgdXNlcnMgbG9nIGluIEdvb2dsZSBhbmQgY2hlY2sgdGhlaXIgZW50aXRsZW1lbnRzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFMb2dpblJlcXVlc3QpfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2V0T25Mb2dpblJlcXVlc3QoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5kIGRpc3BsYXlzIGEgU3dHIHN1YnNjcmlwdGlvbiBvciBjb250cmlidXRpb24gcHJvbXB0LCB3aGVyZSB0aGVcbiAgICogcHJvbXB0IHR5cGUgaXMgZGV0ZXJtaW5lZCBieSB0aGUgcGFyYW1ldGVycyBwYXNzZWQgaW4gdG8gaW5pdC4gSWYgdGhlIGF1dG9cbiAgICogcHJvbXB0IGlzIGRldGVybWluZWQgdG8gaGF2ZSBiZWVuIGFscmVhZHkgc2V0IHVwLCB0aGUgc2V0dXAgcG9ydGlvbiBvZiB0aGVcbiAgICogZnVuY3Rpb24gd2lsbCBiZSBza2lwcGVkLCBhbmQgdGhlIHByb21wdCB3aWxsIGJlIGRpc3BsYXllZC4gVGhlXG4gICAqIGF1dG9Qcm9tcHRUeXBlIHNwZWNpZmllcyB3aGljaCB0eXBlIG9mIHByb21wdCBzaG91bGQgYmUgZGlzcGxheWVkIChzZWVcbiAgICogQXV0b1Byb21wdFR5cGUgYmVsb3cpLiBUaGUgYWx3YXlzU2hvdyBwYXJhbWV0ZXIgaXMgYW4gb3B0aW9uIHRvIGZvcmNlIHNob3dcbiAgICogdGhlIHByb21wdCwgcmVnYXJkbGVzcyBvZiBhbnkgZGlzcGxheSBydWxlcy4gVGhpcyBwYXJhbWV0ZXIgaXMgaW50ZW5kZWQgZm9yXG4gICAqIHByZXZpZXcgcHVycG9zZXMuXG4gICAqIEBwYXJhbSB7e1xuICAgKiAgIGF1dG9Qcm9tcHRUeXBlOiAoIUF1dG9Qcm9tcHRUeXBlfHVuZGVmaW5lZCksXG4gICAqICAgYWx3YXlzU2hvdzogKGJvb2xlYW58dW5kZWZpbmVkKSxcbiAgICogfX0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyB7IVByb21pc2V9XG4gICAqL1xuICBzZXR1cEFuZFNob3dBdXRvUHJvbXB0KG9wdGlvbnMpIHt9XG5cbiAgLyoqXG4gICAqIERpc21pc3NlcyBhbnkgU3dHIFVJIGN1cnJlbnRseSBkaXNwbGF5ZWQuIEludGVuZGVkIHRvIGJlIHVzZWQgZm9yIHByZXZpZXdcbiAgICogcHVycG9zZXMuXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBkaXNtaXNzU3dnVUkoKSB7fVxufVxuXG4vKiogQGVudW0ge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBBdXRvUHJvbXB0VHlwZSA9IHtcbiAgTk9ORTogJ25vbmUnLFxuICBDT05UUklCVVRJT046ICdjb250cmlidXRpb24nLFxuICBTVUJTQ1JJUFRJT046ICdzdWJzY3JpcHRpb24nLFxufTtcblxuLyoqXG4gKiBPcHRpb25zIGZvciBjb25maWd1cmluZyBhbGwgY2xpZW50IFVJLlxuICogUHJvcGVydGllczpcbiAqIC0gbGFuZzogU2V0cyB0aGUgYnV0dG9uIGFuZCBwcm9tcHQgbGFudWdhZ2UuIERlZmF1bHQgaXMgXCJlblwiLlxuICogLSB0aGVtZTogXCJsaWdodFwiIG9yIFwiZGFya1wiLiBEZWZhdWx0IGlzIFwibGlnaHRcIi5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICB0aGVtZTogKENsaWVudFRoZW1lfHVuZGVmaW5lZCksXG4gKiAgIGxhbmc6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgQ2xpZW50T3B0aW9ucztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBsaW5rUmVxdWVzdGVkOiBib29sZWFuLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBMb2dpblJlcXVlc3Q7XG5cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IENsaWVudFRoZW1lID0ge1xuICBMSUdIVDogJ2xpZ2h0JyxcbiAgREFSSzogJ2RhcmsnLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTkgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBbmFseXRpY3NFdmVudCwgRXZlbnRPcmlnaW5hdG9yfSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuXG4vKiogQGVudW0ge251bWJlcn0gICovXG5leHBvcnQgY29uc3QgRmlsdGVyUmVzdWx0ID0ge1xuICAvKiogVGhlIGV2ZW50IGlzIGFsbG93ZWQgdG8gcHJvY2VlZCB0byB0aGUgbGlzdGVuZXJzLiAqL1xuICBQUk9DRVNTX0VWRU5UOiAwLFxuICAvKiogVGhlIGV2ZW50IGlzIGNhbmNlbGVkIGFuZCB0aGUgbGlzdGVuZXJzIGFyZSBub3QgaW5mb3JtZWQgYWJvdXQgaXQuICovXG4gIENBTkNFTF9FVkVOVDogMSxcbn07XG5cbi8qKlxuICogRGVmaW5lcyBhIGNsaWVudCBldmVudCBpbiBTd0dcbiAqIFByb3BlcnRpZXM6XG4gKiAtIGV2ZW50VHlwZTogUmVxdWlyZWQuIFRoZSBBbmFseXRpY3NFdmVudCB0eXBlIHRoYXQgb2NjdXJyZWQuXG4gKiAtIGV2ZW50T3JpZ2luYXRvcjogUmVxdWlyZWQuICBUaGUgY29kZWJhc2UgdGhhdCBpbml0aWF0ZWQgdGhlIGV2ZW50LlxuICogLSBpc0Zyb21Vc2VyQWN0aW9uOiBPcHRpb25hbC4gIFRydWUgaWYgdGhlIHVzZXIgdG9vayBhbiBhY3Rpb24gdG8gZ2VuZXJhdGVcbiAqICAgdGhlIGV2ZW50LlxuICogLSBhZGRpdGlvbmFsUGFyYW1ldGVyczogT3B0aW9uYWwuICBBIEpTT04gb2JqZWN0IHRvIHN0b3JlIGdlbmVyaWMgZGF0YS5cbiAqXG4gKiAgQHR5cGVkZWYge3tcbiAqICAgIGV2ZW50VHlwZTogP0FuYWx5dGljc0V2ZW50LFxuICogICAgZXZlbnRPcmlnaW5hdG9yOiAhRXZlbnRPcmlnaW5hdG9yLFxuICogICAgaXNGcm9tVXNlckFjdGlvbjogP2Jvb2xlYW4sXG4gKiAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogP09iamVjdCxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgQ2xpZW50RXZlbnQ7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50RXZlbnRNYW5hZ2VyQXBpIHtcbiAgLyoqXG4gICAqIENhbGwgdGhpcyBmdW5jdGlvbiB0byBsb2cgYW4gZXZlbnQuIFRoZSByZWdpc3RlcmVkIGxpc3RlbmVycyB3aWxsIGJlXG4gICAqIGludm9rZWQgdW5sZXNzIHRoZSBldmVudCBpcyBmaWx0ZXJlZC5cbiAgICogQHBhcmFtIHshZnVuY3Rpb24oIUNsaWVudEV2ZW50KX0gbGlzdGVuZXJcbiAgICovXG4gIHJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcikge31cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBmaWx0ZXJlciBmb3IgZXZlbnRzIGlmIHlvdSBuZWVkIHRvIHBvdGVudGlhbGx5IHByZXZlbnQgdGhlXG4gICAqIGxpc3RlbmVycyBmcm9tIGhlYXJpbmcgYWJvdXQgaXQuICBBIGZpbHRlcmVyIHNob3VsZCByZXR1cm5cbiAgICogRmlsdGVyUmVzdWx0LkNBTkNFTF9FVkVOVCB0byBwcmV2ZW50IGxpc3RlbmVycyBmcm9tIGhlYXJpbmcgYWJvdXQgdGhlXG4gICAqIGV2ZW50LlxuICAgKiBAcGFyYW0geyFmdW5jdGlvbighQ2xpZW50RXZlbnQpOkZpbHRlclJlc3VsdH0gZmlsdGVyZXJcbiAgICovXG4gIHJlZ2lzdGVyRXZlbnRGaWx0ZXJlcihmaWx0ZXJlcikge31cblxuICAvKipcbiAgICogQ2FsbCB0aGlzIGZ1bmN0aW9uIHRvIGxvZyBhbiBldmVudC4gIEl0IHdpbGwgaW1tZWRpYXRlbHkgdGhyb3cgYW4gZXJyb3IgaWZcbiAgICogdGhlIGV2ZW50IGlzIGludmFsaWQuICBJdCB3aWxsIHRoZW4gYXN5bmNocm9ub3VzbHkgY2FsbCB0aGUgZmlsdGVyZXJzIGFuZFxuICAgKiBzdG9wIHRoZSBldmVudCBpZiBhIGZpbHRlcmVyIGNhbmNlbHMgaXQuICBBZnRlciB0aGF0LCBpdCB3aWxsIGNhbGwgZWFjaFxuICAgKiBsaXN0ZW5lciBhc3luY2hyb25vdXNseS5cbiAgICogQHBhcmFtIHshQ2xpZW50RXZlbnR9IGV2ZW50XG4gICAqL1xuICBsb2dFdmVudChldmVudCkge31cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtFbnRpdGxlbWVudHN9IGZyb20gJy4vZW50aXRsZW1lbnRzJztcbmltcG9ydCB7UHVyY2hhc2VEYXRhfSBmcm9tICcuL3N1YnNjcmliZS1yZXNwb25zZSc7XG5pbXBvcnQge1VzZXJEYXRhfSBmcm9tICcuL3VzZXItZGF0YSc7XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gZW50aXRsZW1lbnRzIC0gdGhlIGN1cnJlbnQgZW50aXRsZW1lbnRzLlxuICogLSBjb25zZW50IC0gd2hldGhlciB0byBhc2sgdGhlIHVzZXIgZm9yIGFjY291bnQgY3JlYXRpb24gY29uc2VudC5cbiAqICAgRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgZW50aXRsZW1lbnRzOiAoP0VudGl0bGVtZW50c3x1bmRlZmluZWQpLFxuICogICBjb25zZW50OiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3Q7XG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbnRpdGxlbWVudHN9IGVudGl0bGVtZW50c1xuICAgKiBAcGFyYW0geyFVc2VyRGF0YX0gdXNlckRhdGFcbiAgICogQHBhcmFtIHshQXJyYXk8IVB1cmNoYXNlRGF0YT59IHB1cmNoYXNlRGF0YUxpc3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjb21wbGV0ZUhhbmRsZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGVudGl0bGVtZW50cywgdXNlckRhdGEsIHB1cmNoYXNlRGF0YUxpc3QsIGNvbXBsZXRlSGFuZGxlcikge1xuICAgIC8qKiBAY29uc3QgeyFFbnRpdGxlbWVudHN9ICovXG4gICAgdGhpcy5lbnRpdGxlbWVudHMgPSBlbnRpdGxlbWVudHM7XG4gICAgLyoqIEBjb25zdCB7IVVzZXJEYXRhfSAqL1xuICAgIHRoaXMudXNlckRhdGEgPSB1c2VyRGF0YTtcbiAgICAvKiogQGNvbnN0IHshQXJyYXk8IVB1cmNoYXNlRGF0YT59ICovXG4gICAgdGhpcy5wdXJjaGFzZURhdGFMaXN0ID0gcHVyY2hhc2VEYXRhTGlzdDtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IGRlcHJlY2F0ZS5cbiAgICAvKiogQGNvbnN0IHshUHVyY2hhc2VEYXRhfSAqL1xuICAgIHRoaXMucHVyY2hhc2VEYXRhID0gcHVyY2hhc2VEYXRhTGlzdFswXTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbigpOiFQcm9taXNlfSAqL1xuICAgIHRoaXMuY29tcGxldGVIYW5kbGVyXyA9IGNvbXBsZXRlSGFuZGxlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZShcbiAgICAgIHRoaXMuZW50aXRsZW1lbnRzLFxuICAgICAgdGhpcy51c2VyRGF0YSxcbiAgICAgIHRoaXMucHVyY2hhc2VEYXRhTGlzdCxcbiAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyX1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdlbnRpdGxlbWVudHMnOiB0aGlzLmVudGl0bGVtZW50cy5qc29uKCksXG4gICAgICAndXNlckRhdGEnOiB0aGlzLnVzZXJEYXRhLmpzb24oKSxcbiAgICAgICdwdXJjaGFzZURhdGFMaXN0JzogdGhpcy5wdXJjaGFzZURhdGFMaXN0Lm1hcCgocGQpID0+IHBkLmpzb24oKSksXG4gICAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IGRlcHJlY2F0ZS5cbiAgICAgICdwdXJjaGFzZURhdGEnOiB0aGlzLnB1cmNoYXNlRGF0YS5qc29uKCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3MgdGhlIHJlY2VpdmluZyBzaXRlIHRvIGNvbXBsZXRlL2Fja25vd2xlZGdlIHRoYXQgaXQgcmVnaXN0ZXJlZFxuICAgKiB0aGUgc3Vic2NyaXB0aW9uIGluZm8uIFRoZSB0eXBpY2FsIGFjdGlvbiB3b3VsZCBiZSB0byBjcmVhdGUgYW5cbiAgICogYWNjb3VudCAob3IgbWF0Y2ggYW4gZXhpc3Rpbmcgb25lKSBhbmQgYXNzb2NpYXRlZCB0aGUgc3Vic2NyaXB0aW9uIHdpdGhcbiAgICogdGhhdCBhY2NvdW50LlxuICAgKlxuICAgKiBTd0cgd2lsbCBkaXNwbGF5IHByb2dyZXNzIGluZGljYXRvciB1bnRpbCB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYW5kXG4gICAqIHVwb24gcmVjZWl2aW5nIHRoaXMgY2FsbCB3aWxsIHNob3cgdGhlIGNvbmZpcm1hdGlvbiB0byB0aGUgdXNlci5cbiAgICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2Qgd2lsbCB5aWVsZCBvbmNlIHRoZSB1c2VyIGNsb3Nlc1xuICAgKiB0aGUgY29uZmlybWF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGNvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBsZXRlSGFuZGxlcl8oKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2ZpbmRJbkFycmF5fSBmcm9tICcuLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtnZXRQcm9wZXJ0eUZyb21Kc29uU3RyaW5nfSBmcm9tICcuLi91dGlscy9qc29uJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuLyoqIFNvdXJjZSBmb3IgR29vZ2xlLXByb3ZpZGVkIG1ldGVyaW5nIGVudGl0bGVtZW50cy4gKi9cbmV4cG9ydCBjb25zdCBHT09HTEVfTUVURVJJTkdfU09VUkNFID0gJ2dvb2dsZTptZXRlcmluZyc7XG5cbi8qKlxuICogVGhlIGhvbGRlciBvZiB0aGUgZW50aXRsZW1lbnRzIGZvciBhIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBFbnRpdGxlbWVudHMge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0geyFBcnJheTwhRW50aXRsZW1lbnQ+fSBlbnRpdGxlbWVudHNcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBjdXJyZW50UHJvZHVjdFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbnRpdGxlbWVudHMpfSBhY2tIYW5kbGVyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVudGl0bGVtZW50cywgP0Z1bmN0aW9uPSl9IGNvbnN1bWVIYW5kbGVyXG4gICAqIEBwYXJhbSB7P2Jvb2xlYW58dW5kZWZpbmVkfSBpc1JlYWR5VG9QYXlcbiAgICogQHBhcmFtIHs/c3RyaW5nfHVuZGVmaW5lZH0gZGVjcnlwdGVkRG9jdW1lbnRLZXlcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNlcnZpY2UsXG4gICAgcmF3LFxuICAgIGVudGl0bGVtZW50cyxcbiAgICBjdXJyZW50UHJvZHVjdCxcbiAgICBhY2tIYW5kbGVyLFxuICAgIGNvbnN1bWVIYW5kbGVyLFxuICAgIGlzUmVhZHlUb1BheSxcbiAgICBkZWNyeXB0ZWREb2N1bWVudEtleVxuICApIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5yYXcgPSByYXc7XG4gICAgLyoqIEBjb25zdCB7IUFycmF5PCFFbnRpdGxlbWVudD59ICovXG4gICAgdGhpcy5lbnRpdGxlbWVudHMgPSBlbnRpdGxlbWVudHM7XG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzUmVhZHlUb1BheSA9IGlzUmVhZHlUb1BheSB8fCBmYWxzZTtcbiAgICAvKiogQGNvbnN0IHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuZGVjcnlwdGVkRG9jdW1lbnRLZXkgPSBkZWNyeXB0ZWREb2N1bWVudEtleSB8fCBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnByb2R1Y3RfID0gY3VycmVudFByb2R1Y3Q7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oIUVudGl0bGVtZW50cyl9ICovXG4gICAgdGhpcy5hY2tIYW5kbGVyXyA9IGFja0hhbmRsZXI7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oIUVudGl0bGVtZW50cywgP0Z1bmN0aW9uPSl9ICovXG4gICAgdGhpcy5jb25zdW1lSGFuZGxlcl8gPSBjb25zdW1lSGFuZGxlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnRzfVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBFbnRpdGxlbWVudHMoXG4gICAgICB0aGlzLnNlcnZpY2UsXG4gICAgICB0aGlzLnJhdyxcbiAgICAgIHRoaXMuZW50aXRsZW1lbnRzLm1hcCgoZW50KSA9PiBlbnQuY2xvbmUoKSksXG4gICAgICB0aGlzLnByb2R1Y3RfLFxuICAgICAgdGhpcy5hY2tIYW5kbGVyXyxcbiAgICAgIHRoaXMuY29uc3VtZUhhbmRsZXJfLFxuICAgICAgdGhpcy5pc1JlYWR5VG9QYXksXG4gICAgICB0aGlzLmRlY3J5cHRlZERvY3VtZW50S2V5XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ3NlcnZpY2UnOiB0aGlzLnNlcnZpY2UsXG4gICAgICAnZW50aXRsZW1lbnRzJzogdGhpcy5lbnRpdGxlbWVudHMubWFwKChpdGVtKSA9PiBpdGVtLmpzb24oKSksXG4gICAgICAnaXNSZWFkeVRvUGF5JzogdGhpcy5pc1JlYWR5VG9QYXksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgYXJ0aWNsZSBpcyB1bmxvY2tlZCBieSBhXG4gICAqIGNhY2hlYWJsZSBlbnRpdGxlbWVudC4gTWV0ZXJpbmcgZW50aXRsZW1lbnRzIGFyZW4ndCBjYWNoZWFibGUsXG4gICAqIGJlY2F1c2UgZWFjaCBtZXRlcmluZyBlbnRpdGxlbWVudCBpcyBtZWFudCB0byBiZSB1c2VkIGZvciBvbmUgYXJ0aWNsZS5cbiAgICogU3Vic2NyaXB0aW9uIGVudGl0bGVtZW50cyBhcmUgY2FjaGVhYmxlLCBiZWNhdXNlIHN1YnNjcmlwdGlvbiBlbnRpdGxlbWVudHNcbiAgICogYXJlIG1lYW50IHRvIGJlIHVzZWQgYWNyb3NzIG11bHRpcGxlIGFydGljbGVzIG9uIGEgcHVibGljYXRpb24uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlbmFibGVzVGhpc1dpdGhDYWNoZWFibGVFbnRpdGxlbWVudHMoKSB7XG4gICAgY29uc3QgZW50aXRsZW1lbnQgPSB0aGlzLmdldEVudGl0bGVtZW50Rm9yVGhpcygpO1xuICAgIHJldHVybiAhIWVudGl0bGVtZW50ICYmIGVudGl0bGVtZW50LnNvdXJjZSAhPT0gR09PR0xFX01FVEVSSU5HX1NPVVJDRTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgYXJ0aWNsZSBpcyB1bmxvY2tlZCBieSBhXG4gICAqIEdvb2dsZSBtZXRlcmluZyBlbnRpdGxlbWVudC4gVGhlc2UgZW50aXRsZW1lbnRzIGNvbWVcbiAgICogZnJvbSBHb29nbGUgTmV3cyBJbnRpYXRpdmUncyBsaWNlbnNpbmcgcHJvZ3JhbSB0byBzdXBwb3J0IG5ld3MuXG4gICAqIGh0dHBzOi8vd3d3LmJsb2cuZ29vZ2xlL291dHJlYWNoLWluaXRpYXRpdmVzL2dvb2dsZS1uZXdzLWluaXRpYXRpdmUvbGljZW5zaW5nLXByb2dyYW0tc3VwcG9ydC1uZXdzLWluZHVzdHJ5LS9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuYWJsZXNUaGlzV2l0aEdvb2dsZU1ldGVyaW5nKCkge1xuICAgIGNvbnN0IGVudGl0bGVtZW50ID0gdGhpcy5nZXRFbnRpdGxlbWVudEZvclRoaXMoKTtcbiAgICByZXR1cm4gISFlbnRpdGxlbWVudCAmJiBlbnRpdGxlbWVudC5zb3VyY2UgPT09IEdPT0dMRV9NRVRFUklOR19TT1VSQ0U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzb3VyY2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuYWJsZXNUaGlzKHNvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLmVuYWJsZXModGhpcy5wcm9kdWN0Xywgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZW5hYmxlc0FueShzb3VyY2UpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW50aXRsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZW50aXRsZW1lbnRzW2ldLnByb2R1Y3RzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgKCFzb3VyY2UgfHwgc291cmNlID09IHRoaXMuZW50aXRsZW1lbnRzW2ldLnNvdXJjZSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlc2UgZW50aXRsZW1lbnRzIGVuYWJsZSB0aGUgc3BlY2lmaWVkIHByb2R1Y3QsIG9wdGlvbmFsbHkgYWxzb1xuICAgKiByZXN0cmljdGluZyB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHByb2R1Y3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzb3VyY2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuYWJsZXMocHJvZHVjdCwgc291cmNlKSB7XG4gICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhIXRoaXMuZ2V0RW50aXRsZW1lbnRGb3IocHJvZHVjdCwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZyBlbnRpdGxlbWVudCBmb3IgdGhlIGN1cnJlbnQgcHJvZHVjdCxcbiAgICogb3B0aW9uYWxseSBhbHNvIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgc291cmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZVxuICAgKiBAcmV0dXJuIHs/RW50aXRsZW1lbnR9XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudEZvclRoaXMoc291cmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RW50aXRsZW1lbnRGb3IodGhpcy5wcm9kdWN0Xywgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZyBlbnRpdGxlbWVudCBmb3IgdGhlIHNwZWNpZmllZCBwcm9kdWN0LFxuICAgKiBvcHRpb25hbGx5IGFsc28gbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBzb3VyY2UuXG4gICAqXG4gICAqIFJldHVybnMgbm9uLW1ldGVyaW5nIGVudGl0bGVtZW50cyBpZiBwb3NzaWJsZSwgdG8gYXZvaWQgY29uc3VtaW5nXG4gICAqIG1ldGVyZWQgcmVhZHMgdW5uZWNlc3NhcmlseS5cbiAgICpcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBwcm9kdWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc291cmNlXG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudH1cbiAgICovXG4gIGdldEVudGl0bGVtZW50Rm9yKHByb2R1Y3QsIHNvdXJjZSkge1xuICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgLy8gUmVxdWlyZSBhIHByb2R1Y3QgSUQuXG4gICAgICB3YXJuKFxuICAgICAgICAnU3dHIG5lZWRzIHRoaXMgYXJ0aWNsZSB0byBkZWZpbmUgYSBwcm9kdWN0IElEIChlLmcuIGV4YW1wbGUuY29tOnByZW1pdW0pLiBBcnRpY2xlcyBjYW4gZGVmaW5lIGEgcHJvZHVjdCBJRCB1c2luZyBKU09OK0xELiBTd0cgY2FuIGNoZWNrIGVudGl0bGVtZW50cyBhZnRlciB0aGlzIGFydGljbGUgZGVmaW5lcyBhIHByb2R1Y3QgSUQuJ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFByZWZlciBzdWJzY3JpcHRpb24gZW50aXRsZW1lbnRzIG92ZXIgbWV0ZXJpbmcgZW50aXRsZW1lbnRzLlxuICAgIC8vIE1ldGVyaW5nIGVudGl0bGVtZW50cyBhcmUgYSBsaW1pdGVkIHJlc291cmNlLiBXaGVuIGEgbWV0ZXJpbmcgZW50aXRsZW1lbnRcbiAgICAvLyB1bmxvY2tzIGFuIGFydGljbGUsIHRoYXQgZGVwbGV0ZXMgdGhlIHVzZXIncyByZW1haW5pbmcgXCJmcmVlIHJlYWRzXCIuXG4gICAgLy8gU3Vic2NyaXB0aW9uIGVudGl0bGVtZW50cyBhcmUgKm5vdCogZGVwbGV0ZWQgd2hlbiB0aGV5IHVubG9jayBhcnRpY2xlcy5cbiAgICAvLyBUaGV5IGFyZSBlc3NlbnRpYWxseSB1bmxpbWl0ZWQgaWYgdGhlIHN1YnNjcmlwdGlvbiByZW1haW5zIHZhbGlkLlxuICAgIC8vIEZvciB0aGlzIHJlYXNvbiwgc3Vic2NyaXB0aW9uIGVudGl0bGVtZW50cyBhcmUgcHJlZmVycmVkLlxuICAgIGNvbnN0IGVudGl0bGVtZW50c1RoYXRVbmxvY2tBcnRpY2xlID0gdGhpcy5lbnRpdGxlbWVudHMuZmlsdGVyKFxuICAgICAgKGVudGl0bGVtZW50KSA9PlxuICAgICAgICBlbnRpdGxlbWVudC5lbmFibGVzKHByb2R1Y3QpICYmXG4gICAgICAgICghc291cmNlIHx8IHNvdXJjZSA9PT0gZW50aXRsZW1lbnQuc291cmNlKVxuICAgICk7XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb25FbnRpdGxlbWVudCA9IGZpbmRJbkFycmF5KFxuICAgICAgZW50aXRsZW1lbnRzVGhhdFVubG9ja0FydGljbGUsXG4gICAgICAoZW50aXRsZW1lbnQpID0+IGVudGl0bGVtZW50LnNvdXJjZSAhPT0gR09PR0xFX01FVEVSSU5HX1NPVVJDRVxuICAgICk7XG5cbiAgICBjb25zdCBtZXRlcmluZ0VudGl0bGVtZW50ID0gZmluZEluQXJyYXkoXG4gICAgICBlbnRpdGxlbWVudHNUaGF0VW5sb2NrQXJ0aWNsZSxcbiAgICAgIChlbnRpdGxlbWVudCkgPT4gZW50aXRsZW1lbnQuc291cmNlID09PSBHT09HTEVfTUVURVJJTkdfU09VUkNFXG4gICAgKTtcblxuICAgIHJldHVybiBzdWJzY3JpcHRpb25FbnRpdGxlbWVudCB8fCBtZXRlcmluZ0VudGl0bGVtZW50IHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZW50aXRsZW1lbnQgZm9yIHRoZSBzcGVjaWZpZWQgc291cmNlIHcvb1xuICAgKiBtYXRjaGluZyBhbnkgc3BlY2lmaWMgcHJvZHVjdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VcbiAgICogQHJldHVybiB7P0VudGl0bGVtZW50fVxuICAgKi9cbiAgZ2V0RW50aXRsZW1lbnRGb3JTb3VyY2Uoc291cmNlKSB7XG4gICAgaWYgKHRoaXMuZW50aXRsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnRpdGxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuZW50aXRsZW1lbnRzW2ldLnN1YnNjcmlwdGlvblRva2VuICYmXG4gICAgICAgICAgc291cmNlID09IHRoaXMuZW50aXRsZW1lbnRzW2ldLnNvdXJjZVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGxlbWVudHNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQSAzcCBzaXRlIHNob3VsZCBjYWxsIHRoaXMgbWV0aG9kIHRvIGFja25vd2xlZGdlIHRoYXQgaXQgXCJzYXdcIiBhbmRcbiAgICogXCJ1bmRlcnN0b29kXCIgZW50aXRsZW1lbnRzLlxuICAgKi9cbiAgYWNrKCkge1xuICAgIHRoaXMuYWNrSGFuZGxlcl8odGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQSAzcCBzaXRlIHNob3VsZCBjYWxsIHRoaXMgbWV0aG9kIHRvIGNvbnN1bWUgYSBHb29nbGUgbWV0ZXJpbmcgZW50aXRsZW1lbnQuXG4gICAqIFdoZW4gYSBtZXRlcmluZyBlbnRpdGxlbWVudCBpcyBjb25zdW1lZCwgU3dHIHNob3dzIHRoZSB1c2VyIGEgbWV0ZXJpbmcgZGlhbG9nLlxuICAgKiBXaGVuIHRoZSB1c2VyIGNsb3NlcyB0aGUgZGlhbG9nLCBTd0cgZGVwbGV0ZXMgb25lIG9mIHRoZSB1c2VyJ3MgcmVtYWluaW5nXG4gICAqIFwiZnJlZSByZWFkc1wiLlxuICAgKiBAcGFyYW0gez9GdW5jdGlvbj19IG9uQ2xvc2VEaWFsb2cgQ2FsbGVkIGFmdGVyIHRoZSB1c2VyIGNsb3NlcyB0aGUgZGlhbG9nLlxuICAgKi9cbiAgY29uc3VtZShvbkNsb3NlRGlhbG9nKSB7XG4gICAgdGhpcy5jb25zdW1lSGFuZGxlcl8odGhpcywgb25DbG9zZURpYWxvZyk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgc2luZ2xlIGVudGl0bGVtZW50IG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEVudGl0bGVtZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gcHJvZHVjdHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvblRva2VuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UsIHByb2R1Y3RzLCBzdWJzY3JpcHRpb25Ub2tlbikge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvKiogQGNvbnN0IHshQXJyYXk8c3RyaW5nPn0gKi9cbiAgICB0aGlzLnByb2R1Y3RzID0gcHJvZHVjdHM7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uVG9rZW4gPSBzdWJzY3JpcHRpb25Ub2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnR9XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50KFxuICAgICAgdGhpcy5zb3VyY2UsXG4gICAgICB0aGlzLnByb2R1Y3RzLnNsaWNlKDApLFxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25Ub2tlblxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdzb3VyY2UnOiB0aGlzLnNvdXJjZSxcbiAgICAgICdwcm9kdWN0cyc6IHRoaXMucHJvZHVjdHMsXG4gICAgICAnc3Vic2NyaXB0aW9uVG9rZW4nOiB0aGlzLnN1YnNjcmlwdGlvblRva2VuLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBwcm9kdWN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlbmFibGVzKHByb2R1Y3QpIHtcbiAgICBpZiAoIXByb2R1Y3QpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gV2lsZGNhcmQgYWxsb3dzIHRoaXMgcHJvZHVjdC5cbiAgICBjb25zdCBlcSA9IHByb2R1Y3QuaW5kZXhPZignOicpO1xuICAgIGlmIChcbiAgICAgIGVxICE9IC0xICYmXG4gICAgICB0aGlzLnByb2R1Y3RzLmluY2x1ZGVzKHByb2R1Y3Quc3Vic3RyaW5nKDAsIGVxICsgMSkgKyAnKicpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvZHVjdHMuaW5jbHVkZXMocHJvZHVjdCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBqc29uXG4gICAqIEByZXR1cm4geyFFbnRpdGxlbWVudH1cbiAgICovXG4gIHN0YXRpYyBwYXJzZUZyb21Kc29uKGpzb24pIHtcbiAgICBpZiAoIWpzb24pIHtcbiAgICAgIGpzb24gPSB7fTtcbiAgICB9XG4gICAgY29uc3Qgc291cmNlID0ganNvblsnc291cmNlJ10gfHwgJyc7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBqc29uWydwcm9kdWN0cyddIHx8IFtdO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvblRva2VuID0ganNvblsnc3Vic2NyaXB0aW9uVG9rZW4nXTtcbiAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50KHNvdXJjZSwgcHJvZHVjdHMsIHN1YnNjcmlwdGlvblRva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgSlNPTiBpcyBleHBlY3RlZCBpbiBvbmUgb2YgdGhlIGZvcm1zOlxuICAgKiAtIFNpbmdsZSBlbnRpdGxlbWVudDogYHtwcm9kdWN0czogW10sIC4uLn1gLlxuICAgKiAtIEEgbGlzdCBvZiBlbnRpdGxlbWVudHM6IGBbe3Byb2R1Y3RzOiBbXSwgLi4ufSwgey4uLn1dYC5cbiAgICogQHBhcmFtIHshT2JqZWN0fCFBcnJheTwhT2JqZWN0Pn0ganNvblxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUVudGl0bGVtZW50Pn1cbiAgICovXG4gIHN0YXRpYyBwYXJzZUxpc3RGcm9tSnNvbihqc29uKSB7XG4gICAgY29uc3QganNvbkxpc3QgPSBBcnJheS5pc0FycmF5KGpzb24pXG4gICAgICA/IC8qKiBAdHlwZSB7IUFycmF5PE9iamVjdD59ICovIChqc29uKVxuICAgICAgOiBbanNvbl07XG4gICAgcmV0dXJuIGpzb25MaXN0Lm1hcCgoanNvbikgPT4gRW50aXRsZW1lbnQucGFyc2VGcm9tSnNvbihqc29uKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgU0tVIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVudGl0bGVtZW50LlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0U2t1KCkge1xuICAgIGlmICh0aGlzLnNvdXJjZSAhPT0gJ2dvb2dsZScpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBza3UgPSAvKiogQHR5cGUgez9zdHJpbmd9ICovIChnZXRQcm9wZXJ0eUZyb21Kc29uU3RyaW5nKFxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25Ub2tlbixcbiAgICAgICdwcm9kdWN0SWQnXG4gICAgKSB8fCBudWxsKTtcbiAgICBpZiAoIXNrdSkge1xuICAgICAgd2FybignVW5hYmxlIHRvIHJldHJpZXZlIFNLVSBmcm9tIFN3RyBzdWJzY3JpcHRpb24gdG9rZW4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHNrdTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBTdWJzY3JpcHRpb25TdGF0ZSA9IHtcbiAgLy8gdXNlcidzIHN1YnNjcmlwdGlvbiBzdGF0ZSBub3Qga25vd24uXG4gIFVOS05PV046ICd1bmtub3duJyxcbiAgLy8gdXNlciBpcyBub3QgYSBzdWJzY3JpYmVyLlxuICBOT05fU1VCU0NSSUJFUjogJ25vbl9zdWJzY3JpYmVyJyxcbiAgLy8gdXNlciBpcyBhIHN1YnNjcmliZXIuXG4gIFNVQlNDUklCRVI6ICdzdWJzY3JpYmVyJyxcbiAgLy8gdXNlcidzIHN1YnNjcmlwdGlvbiBoYXMgZXhwaXJlZC5cbiAgUEFTVF9TVUJTQ1JJQkVSOiAncGFzdF9zdWJzY3JpYmVyJyxcbn07XG5cbi8qKlxuICogU3Vic2NyaXB0aW9uIHJlbGF0ZWQgZXZlbnRzLiBMaXN0ZWQgYmVsb3cgYXJlIGVudW0gc3RyaW5ncyB0aGF0XG4gKiByZXByZXNlbnQgZXZlbnRzIHJlbGF0ZWQgdG8gU3Vic2NyaXB0aW9uIGZsb3cuIEV2ZW50IHBhcmFtZXRlcnNcbiAqIHRoYXQgcHJvdmlkZSBtb3JlIGNvbnRleHQgYWJvdXQgdGhlIGV2ZW50IGFyZSBzZW50IGFzIGEgSlNPTlxuICogYmxvY2sgb2YgZGVwdGggMSBpbiB0aGUgc2VuZEV2ZW50KCkgQVBJIGNhbGwuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgRXZlbnQgPSB7XG4gIC8qKlxuICAgKiBJTVBSRVNTSU9OX1BBWVdBTEwgZXZlbnQuXG4gICAqIFVzZXIgaGl0cyBhIHBheXdhbGwuXG4gICAqIEV2ZXJ5IGltcHJlc3Npb24gc2hvdWxkIGJlIHF1YWxpZmllZCBhcyBhY3RpdmUgb3IgcGFzc2l2ZS5cbiAgICogVGhlIGZpZWxkICdhY3RpdmUnIG9mIFByb3BlbnNpdHlFdmVudCwgd2hpY2ggY2FycmllcyB0aGlzXG4gICAqIGV2ZW50LCBtdXN0IGJlIHNldCB0byB0cnVlIG9yIGZhbHNlIHRvIGluZGljYXRlIHRoaXMuXG4gICAqIElmIHRoZSB1c2VyIGhhcyBydW4gb3V0IG9mIG1ldGVyaW5nLCBhbmQgdGhhdOKAmXMgd2h5IHdhcyBzaG93blxuICAgKiBhIHBheXdhbGwsIHRoYXQgd291bGQgYmUgYSBwYXNzaXZlIGltcHJlc3Npb24gb2YgdGhlIHBheXdhbGwuXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiBjb25zdCBwcm9wZW5zaXR5RXZlbnQgPSB7XG4gICAqICBuYW1lOiAncGF5d2FsbCcsXG4gICAqICBhY3RpdmU6IGZhbHNlLFxuICAgKiB9XG4gICAqL1xuICBJTVBSRVNTSU9OX1BBWVdBTEw6ICdwYXl3YWxsJyxcbiAgLyoqXG4gICAqIElNUFJFU1NJT05fQUQgZXZlbnQuXG4gICAqIFVzZXIgaGFzIGJlZW4gc2hvd24gYSBzdWJzY3JpcHRpb24gYWQuXG4gICAqIEV2ZXJ5IGltcHJlc3Npb24gc2hvdWxkIGJlIHF1YWxpZmllZCBhcyBhY3RpdmUgb3IgcGFzc2l2ZS5cbiAgICogVGhlIGZpZWxkICdhY3RpdmUnIG9mIFByb3BlbnNpdHlFdmVudCwgd2hpY2ggY2FycmllcyB0aGlzXG4gICAqIGV2ZW50LCBtdXN0IGJlIHNldCB0byB0cnVlIG9yIGZhbHNlIHRvIGluZGljYXRlIHRoaXMuXG4gICAqIFRoZSBKU09OIGJsb2NrIGNhbiBwcm92aWRlIHRoZSBuYW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gYWRcbiAgICogY3JlYXRpdmUgb3IgY2FtcGFpZ24uIEFkIGltcHJlc3Npb25zIGFyZSB1c3VhbGx5IHBhc3NpdmUuXG4gICAqIGNvbnN0IHByb3BlbnNpdHlFdmVudCA9IHtcbiAgICogICBuYW1lOiAnYWRfc2hvd24nLFxuICAgKiAgIGFjdGl2ZTogZmFsc2UsXG4gICAqICAgZGF0YTogeydhZF9uYW1lJzogJ2ZhbGxfYWQnfVxuICAgKiB9XG4gICAqL1xuICBJTVBSRVNTSU9OX0FEOiAnYWRfc2hvd24nLFxuICAvKipcbiAgICogSU1QUkVTU0lPTl9PRkZFUlMgZXZlbnQuXG4gICAqIFVzZXIgaGFzIGJlZW4gc2hvd24gYSBsaXN0IG9mIGF2YWlsYWJsZSBvZmZlcnMgZm9yIHN1YnNjcmlwdGlvbi5cbiAgICogRXZlcnkgaW1wcmVzc2lvbiBzaG91bGQgYmUgcXVhbGlmaWVkIGFzIGFjdGl2ZSBvciBwYXNzaXZlLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgb3IgZmFsc2UgdG8gaW5kaWNhdGUgdGhpcy5cbiAgICogVGhlIEpTT04gYmxvY2sgY2FuIHByb3ZpZGUgYSBsaXN0IG9mIHByb2R1Y3RzIGRpc3BsYXllZCxcbiAgICogYW5kIHRoZSBzb3VyY2UgdG8gaW5kaWNhdGUgd2h5IHRoZSB1c2VyIHdhcyBzaG93biB0aGUgb2ZmZXIuXG4gICAqIE5vdGU6IHNvdXJjZSBpcyBub3QgdGhlIHNhbWUgYXMgcmVmZXJyZXIuXG4gICAqIEluIHRoZSBjYXNlcyBiZWxvdywgdGhlIHVzZXIgdG9vayBhY3Rpb24gYmVmb3JlIHNlZWluZyB0aGUgb2ZmZXJzLFxuICAgKiBhbmQgdGhlcmVmb3JlIGNvbnNpZGVyZWQgYWN0aXZlIGltcHJlc3Npb24uXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiBjb25zdCBwcm9wZW5zaXR5RXZlbnQgPSB7XG4gICAqICAgbmFtZTogJ29mZmVyc19zaG93bicsXG4gICAqICAgYWN0aXZlOiB0cnVlLFxuICAgKiAgIGRhdGE6IHsnb2ZmZXJzJzogWydiYXNpYy1tb250aGx5JywgJ3ByZW1pdW0td2Vla2x5J10sXG4gICAqICAgICAgICAgICAnc291cmNlJzogJ2FkLWNsaWNrJ31cbiAgICogfVxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdvZmZlcnNfc2hvd24nLFxuICAgKiAgIGFjdGl2ZTogdHJ1ZSxcbiAgICogICBkYXRhOiB7J29mZmVycyc6IFsnYmFzaWMtbW9udGhseScsICdwcmVtaXVtLXdlZWtseSddLFxuICAgKiAgICAgICAgICAgJ3NvdXJjZSc6IOKAmG5hdmlnYXRlLXRvLW9mZmVycy1wYWdl4oCZfVxuICAgKiB9XG4gICAqIElmIHRoZSB1c2VyIHdhcyBzaG93biB0aGUgb2ZmZXJzIGFzIGEgcmVzdWx0IG9mIHBheXdhbGwgbWV0ZXJpbmdcbiAgICogZXhwaXJhdGlvbiwgaXQgaXMgY29uc2lkZXJlZCBhIHBhc3NpdmUgaW1wcmVzc2lvbi5cbiAgICogRm9yIGV4YW1wbGU6XG4gICAqIGNvbnN0IHByb3BlbnNpdHlFdmVudCA9IHtcbiAgICogICBuYW1lOiAnb2ZmZXJzX3Nob3duJyxcbiAgICogICBhY3RpdmU6IGZhbHNlLFxuICAgKiAgIGRhdGE6IHsnb2ZmZXJzJzogWydiYXNpYy1tb250aGx5JywgJ3ByZW1pdW0td2Vla2x5J10sXG4gICAqICAgICAgICAgICAnc291cmNlJzog4oCYcGF5d2FsbC1tZXRlcmluZy1leHBpcmVk4oCZfVxuICAgKiB9XG4gICAqL1xuICBJTVBSRVNTSU9OX09GRkVSUzogJ29mZmVyc19zaG93bicsXG4gIC8qKlxuICAgKiBBQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0UgZXZlbnQuXG4gICAqIFVzZXIgaGFzIHRha2VuIHRoZSBhY3Rpb24gdG8gYXJyaXZlIGF0IGEgbGFuZGluZyBwYWdlIG9mIHRoZVxuICAgKiBzdWJzY3JpcHRpb24gd29ya2Zsb3cuIFRoZSBsYW5kaW5nIHBhZ2Ugc2hvdWxkIHNhdGlzZnkgb25lIG9mXG4gICAqIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhbmQgaGVuY2UgYmUgYSBwYXJ0IG9mIHRoZSBmdW5uZWwgdG9cbiAgICogZ2V0IHRoZSB1c2VyIHRvIHN1YnNjcmliZTpcbiAgICogLSBoYXZlIGEgYnV0dG9uIHRvIG5hdmlnYXRlIHRoZSB1c2VyIHRvIGFuIG9mZmVycyBwYWdlLCAoaW5cbiAgICogICB0aGlzIGNhc2UsIHRoZSBuZXh0IGV2ZW50IHdpbGwgYmUgSU1QUkVTU0lPTl9PRkZFUlMsIHdpdGhcbiAgICogICBwYXJhbWV0ZXIgJ3NvdXJjZScgYXMgc3Vic2NyaXB0aW9ucy1sYW5kaW5nLXBhZ2UgYW5kXG4gICAqICAgJ2lzX2FjdGl2ZScgc2V0IHRvIHRydWUpLFxuICAgKiAtIHNob3cgb2ZmZXJzIHRoZSB1c2VyIGNhbiBzZWxlY3QsIChpbiB0aGlzIGNhc2UsIHRoZSBuZXh0XG4gICAqICAgZXZlbnQgd2lsbCBiZSBJTVBSRVNTSU9OX09GRkVSUywgd2l0aCBhIHBhcmFtZXRlciAnc291cmNlJ1xuICAgKiAgIGFzIG5hdmlnYXRlLXRvLW9mZmVycy1wYWdlIGFuZCAnaXNfYWN0aXZlJyBzZXQgdG8gdHJ1ZSksXG4gICAqIC0gcHJvdmlkZSBhIHdheSB0byBzdGFydCB0aGUgcGF5bWVudCBmbG93IGZvciBhIHNwZWNpZmljIG9mZmVyLlxuICAgKiAgIChpbiB0aGlzIGNhc2UsIHRoZSBuZXh0IGV2ZW50IHdpbGwgYmUgQUNUSU9OX09GRkVSX1NFTEVDVEVEXG4gICAqICAgb3IgQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVEIGRlcGVuZGluZyBvbiBpZiB0aGF0IGJ1dHRvblxuICAgKiAgIHRvb2sgdGhlIHVzZXIgdG8gYSBjaGVja291dCBwYWdlIG9uIHRoZSBwdWJsaXNoZXJzIHNpdGUgb3JcbiAgICogICBkaXJlY3RseSBzdGFydGVkIHRoZSBwYXltZW50IGZsb3cpLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgc2luY2UgdGhpcyBpcyBhIHVzZXIgYWN0aW9uLlxuICAgKiBUaGUgSlNPTiBibG9jayB3aXRoIHRoaXMgZXZlbnQgY2FuIHByb3ZpZGUgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICAgKiBzdWNoIGFzIHRoZSBzb3VyY2UsIGluZGljYXRpbmcgd2hhdCBjYXVzZWQgdGhlIHVzZXIgdG8gbmF2aWdhdGVcbiAgICogdG8gdGhpcyBwYWdlLlxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdzdWJzY3JpcHRpb25zX2xhbmRpbmdfcGFnZScsXG4gICAqICAgYWN0aXZlOiB0cnVlLFxuICAgKiAgIGRhdGE6IHsnc291cmNlJzogJ21hcmtldGluZ192aWFfZW1haWwnfVxuICAgKiB9XG4gICAqL1xuICBBQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0U6ICdzdWJzY3JpcHRpb25zX2xhbmRpbmdfcGFnZScsXG4gIC8qKlxuICAgKiBBQ1RJT05fT0ZGRVJfU0VMRUNURUQgZXZlbnQuXG4gICAqIFVzZXIgaGFzIHNlbGVjdGVkIGFuIG9mZmVyLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgc2luY2UgdGhpcyBpcyBhIHVzZXIgYWN0aW9uLlxuICAgKiBUaGUgSlNPTiBibG9jayBjYW4gcHJvdmlkZSB0aGUgcHJvZHVjdCBzZWxlY3RlZC5cbiAgICogRm9yIGV4YW1wbGU6IHtcbiAgICogICBuYW1lOiAnb2ZmZXJfc2VsZWN0ZWQnLFxuICAgKiAgIGFjdGl2ZTogdHJ1ZSxcbiAgICogICBkYXRhOiB7cHJvZHVjdCc6ICdiYXNpYy1tb250aGx5J31cbiAgICogfVxuICAgKiBXaGVuIG9mZmVyIHNlbGVjdGlvbiBzdGFydHMgdGhlIHBheW1lbnQgZmxvdyBkaXJlY3RseSxcbiAgICogdXNlIHRoZSBuZXh0IGV2ZW50IEFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRCBpbnN0ZWFkLlxuICAgKi9cbiAgQUNUSU9OX09GRkVSX1NFTEVDVEVEOiAnb2ZmZXJfc2VsZWN0ZWQnLFxuICAvKipcbiAgICogQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVEIGV2ZW50LlxuICAgKiBVc2VyIGhhcyBzdGFydGVkIHBheW1lbnQgZmxvdy5cbiAgICogVGhlIGZpZWxkICdhY3RpdmUnIG9mIFByb3BlbnNpdHlFdmVudCwgd2hpY2ggY2FycmllcyB0aGlzXG4gICAqIGV2ZW50LCBtdXN0IGJlIHNldCB0byB0cnVlIHNpbmNlIHRoaXMgaXMgYSB1c2VyIGFjdGlvbi5cbiAgICogVGhlIEpTT04gYmxvY2sgY2FuIHByb3ZpZGUgdGhlIHByb2R1Y3Qgc2VsZWN0ZWQuXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiBjb25zdCBwcm9wZW5zaXR5RXZlbnQgPSB7XG4gICAqICAgbmFtZTogJ3BheW1lbnRfZmxvd19zdGFydGVkJyxcbiAgICogICBhY3RpdmU6IHRydWUsXG4gICAqICAgZGF0YToge3Byb2R1Y3QnOiAnYmFzaWMtbW9udGhseSd9XG4gICAqIH1cbiAgICovXG4gIEFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRDogJ3BheW1lbnRfZmxvd19zdGFydCcsXG4gIC8qKlxuICAgKiBBQ1RJT05fUEFZTUVOVF9DT01QTEVURUQuXG4gICAqIFVzZXIgaGFzIG1hZGUgdGhlIHBheW1lbnQgZm9yIGEgc3Vic2NyaXB0aW9uLlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgc2luY2UgdGhpcyBpcyBhIHVzZXIgYWN0aW9uLlxuICAgKiBUaGUgSlNPTiBibG9jayBjYW4gcHJvdmlkZSB0aGUgcHJvZHVjdCB1c2VyIHBhaWQgZm9yLlxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdwYXltZW50X2NvbXBsZXRlJyxcbiAgICogICBhY3RpdmU6IHRydWUsXG4gICAqICAgZGF0YToge3Byb2R1Y3QnOiAnYmFzaWMtbW9udGhseSd9XG4gICAqIH1cbiAgICovXG4gIEFDVElPTl9QQVlNRU5UX0NPTVBMRVRFRDogJ3BheW1lbnRfY29tcGxldGUnLFxuICAvKipcbiAgICogRVZFTlRfQ1VTVE9NOiBjdXN0b20gcHVibGlzaGVyIGV2ZW50LlxuICAgKiBUaGUgZmllbGQgJ2FjdGl2ZScgb2YgUHJvcGVuc2l0eUV2ZW50LCB3aGljaCBjYXJyaWVzIHRoaXNcbiAgICogZXZlbnQsIG11c3QgYmUgc2V0IHRvIHRydWUgb3IgZmFsc2UgZGVwZW5kaW5nIG9uIGlmIHRoZSBldmVudFxuICAgKiB3YXMgZ2VuZXJhdGVkIGFzIGEgcmVzdWx0IG9mIGEgdXNlciBhY3Rpb24uXG4gICAqIFRoZSBKU09OIGJsb2NrIGNhbiBwcm92aWRlIHRoZSBldmVudCBuYW1lIGZvciB0aGUgY3VzdG9tIGV2ZW50LlxuICAgKiBGb3IgZXhhbXBsZTpcbiAgICogY29uc3QgcHJvcGVuc2l0eUV2ZW50ID0ge1xuICAgKiAgIG5hbWU6ICdjdXN0b20nLFxuICAgKiAgIGFjdGl2ZTogdHJ1ZSxcbiAgICogICBkYXRhOiB7XG4gICAqICAgICAnZXZlbnRfbmFtZSc6ICdzb2NpYWxfc2hhcmUnLFxuICAgKiAgICAgJ3BsYXRmb3JtX3VzZWQnOiAnd2hhdHNhcHAnXG4gICAqICAgfVxuICAgKiAgfVxuICAgKi9cbiAgRVZFTlRfQ1VTVE9NOiAnY3VzdG9tJyxcbn07XG5cbi8qKlxuICogUHJvcGVuc2l0eSBFdmVudFxuICogUHJvcGVydGllczpcbiAqIC0gbmFtZTogUmVxdWlyZWQuIE5hbWUgc2hvdWxkIGJlIHZhbGlkIHN0cmluZyBpbiB0aGUgRXZlbnRcbiAqICAgICAgICAgZW51bSB3aXRoaW4gc3JjL2FwaS9sb2dnZXItYXBpLmpzLlxuICogLSBhY3RpdmU6IFJlcXVpcmVkLiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlciB0aGVcbiAqICAgICAgICAgdXNlciB0b29rIHNvbWUgYWN0aW9uIHRvIHBhcnRpY2lwYXRlIGluIHRoZSBmbG93XG4gKiAgICAgICAgIHRoYXQgZ2VuZXJhdGVkIHRoaXMgZXZlbnQuIEZvciBpbXByZXNzaW9uIGV2ZW50LFxuICogICAgICAgICB0aGlzIGlzIHNldCB0byB0cnVlIGlmIGlzX2FjdGl2ZSBmaWVsZCB3b3VsZCBiZVxuICogICAgICAgICBzZXQgdG8gdHJ1ZSwgYXMgZGVzY3JpYmVkIGluIGRvY3VtZW50YXRpb24gZm9yXG4gKiAgICAgICAgIGVudW0gRXZlbnQuIE90aGVyd2lzZSwgc2V0IHRoaXMgZmllbGQgdG8gZmFsc2UuXG4gKiAgICAgICAgIEZvciBhY3Rpb24gZXZlbnRzLCB0aGlzIGZpZWxkIG11c3QgYWx3YXlzIGJlIHNldFxuICogICAgICAgICB0byB0cnVlLiBUaGUgY2FsbGVyIG11c3QgYWx3YXlzIHNldCB0aGlzIGZpZWxkLlxuICogLSBkYXRhOiBPcHRpb25hbC4gSlNPTiBibG9jayBvZiBkZXB0aCAnMScgcHJvdmlkZXMgZXZlbnRcbiAqICAgICAgICAgcGFyYW1ldGVycy4gVGhlIGd1aWRlbGluZSB0byBjcmVhdGUgdGhpcyBKU09OIGJsb2NrXG4gKiAgICAgICAgIHRoYXQgZGVzY3JpYmVzIHRoZSBldmVudCBpcyBwcm92aWRlZCBhZ2FpbnN0IGVhY2hcbiAqICAgICAgICAgZW51bSBsaXN0ZWQgaW4gdGhlIEV2ZW50IGVudW0gYWJvdmUuXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gKiAgICBuYW1lOiBzdHJpbmcsXG4gKiAgICBhY3RpdmU6IGJvb2xlYW4sXG4gKiAgICBkYXRhOiA/SnNvbk9iamVjdCxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgUHVibGlzaGVyRXZlbnQ7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VyQXBpIHtcbiAgLyoqXG4gICAqIFNlbmQgYSBidXktZmxvdyBldmVudCB0aGF0IG9jY3VycmVkIG9uIHRoZSBwdWJsaXNoZXIncyBzaXRlIHRvIEdvb2dsZS4gIFRoZVxuICAgKiB1bHRpbWF0ZSBkZXN0aW5hdGlvbiBpcyBjb250cm9sbGVkIGJ5IGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuICBQdWJsaXNoZXJcbiAgICogY29uZmlndXJhdGlvbiBhdmFpbGFibGU6XG4gICAqICAgZW5hYmxlUHJvcGVuc2l0eSAtIFNlbmRzIGRhdGEgdG8gdGhlIFByb3BlbnNpdHkgdG8gU3Vic2NyaWJlIGFkcyBzZXJ2ZXIuXG4gICAqICAgZW5hYmxlU3dnQW5hbHl0aWNzIC0gU2VuZHMgZGF0YSB0byBHb29nbGUncyBhbmFseXRpY3Mgc2VydmVyIGZvciBidXktZmxvd1xuICAgKiAgICAgY29tcGFyaXNvbiBwdXJwb3Nlcy5cbiAgICogQHBhcmFtIHshUHVibGlzaGVyRXZlbnR9IHVzZXJFdmVudFxuICAgKi9cbiAgc2VuZEV2ZW50KHVzZXJFdmVudCkge31cblxuICAvKipcbiAgICogU2VuZCB1c2VyIHN1YnNjcmlwdGlvbiBzdGF0ZSB1cG9uIGluaXRpYWwgZGlzY292ZXJ5LlxuICAgKiBBIHVzZXIgbWF5IGhhdmUgYWN0aXZlIHN1YnNjcmlwdGlvbnMgdG8gc29tZSBwcm9kdWN0c1xuICAgKiBhbmQgZXhwaXJlZCBzdWJzY3JpcHRpb25zIHRvIG90aGVycy4gTWFrZSBvbmUgQVBJIGNhbGxcbiAgICogcGVyIHN1YnNjcmlwdGlvbiBzdGF0ZSBhbmQgcHJvdmlkZSBhIGNvcnJlc3BvbmRpbmdcbiAgICogbGlzdCBvZiBwcm9kdWN0cyB3aXRoIGEganNvbiBvYmplY3Qgb2YgZGVwdGggMS5cbiAgICogRm9yIGV4YW1wbGU6XG4gICAqICAgICB7J3Byb2R1Y3QnOiBbJ3Byb2R1Y3QxJywgJ3Byb2R1Y3QyJ119XG4gICAqIEVhY2ggY2FsbCB0byB0aGlzIEFQSSBzaG91bGQgaGF2ZSB0aGUgZmlyc3QgYXJndW1lbnRcbiAgICogYXMgYSB2YWxpZCBzdHJpbmcgZnJvbSB0aGUgZW51bSBTdWJzY3JpcHRpb25TdGF0ZS5cbiAgICogQHBhcmFtIHtTdWJzY3JpcHRpb25TdGF0ZX0gc3RhdGVcbiAgICogQHBhcmFtIHs/SnNvbk9iamVjdH0ganNvblByb2R1Y3RzXG4gICAqL1xuICBzZW5kU3Vic2NyaXB0aW9uU3RhdGUoc3RhdGUsIGpzb25Qcm9kdWN0cykge31cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEBlbnVtIHtudW1iZXJ9ICAqL1xuZXhwb3J0IGNvbnN0IE1ldGVyQ2xpZW50VHlwZXMgPSB7XG4gIC8qKiBNZXRlciBjbGllbnQgdHlwZSBmb3IgY29udGVudCBsaWNlbnNlZCBieSBHb29nbGUuICovXG4gIExJQ0VOU0VEX0JZX0dPT0dMRTogMSxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBPZmZlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBza3VJZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcmljZVxuICAgKi9cbiAgY29uc3RydWN0b3Ioc2t1SWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpY2UpIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5za3VJZCA9IHNrdUlkO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgKiBhcyBMb2dnZXJBcGkgZnJvbSAnLi9sb2dnZXItYXBpJztcblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgUHJvcGVuc2l0eVR5cGUgPSB7XG4gIC8vIFByb3BlbnNpdHkgc2NvcmUgZm9yIGEgdXNlciB0byBzdWJzY3JpYmUgdG8gYSBwdWJsaWNhdGlvbi5cbiAgR0VORVJBTDogJ2dlbmVyYWwnLFxuICAvLyBQcm9wZW5zaXR5IHNjb3JlIHdoZW4gYmxvY2tlZCBhY2Nlc3MgdG8gY29udGVudCBieSBwYXl3YWxsLlxuICBQQVlXQUxMOiAncGF5d2FsbCcsXG59O1xuXG4vKipcbiAqIFRoZSBQcm9wZW5zaXR5IFNjb3JlXG4gKiAtIHZhbHVlOiBSZXF1aXJlZC4gQSBudW1iZXIgdGhhdCBpbmRpY2F0ZXMgdGhlIHByb3BlbnNpdHkgdG8gc3Vic2NyaWJlLlxuICogLSBidWNrZXRlZDogUmVxdWlyZWQuIEluZGljYXRlcyBpZiB0aGUgc2NvcmUgaXMgYSByYXcgc2NvcmUgWzEtMTAwXSBvciBidWNrZXRlZFsxLTIwXS5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICB2YWx1ZTogbnVtYmVyLFxuICogICBidWNrZXRlZDogYm9vbGVhbixcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgU2NvcmU7XG5cbi8qKlxuICogUHJvcGVuc2l0eSBTY29yZSBEZXRhaWxcbiAqIFByb3BlcnRpZXM6XG4gKiAtIHByb2R1Y3Q6IFJlcXVpcmVkLiBJbmRpY2F0ZXMgdGhlIHB1YmxpY2F0aW9uX2lkOnByb2R1Y3RfaWQgZm9yIHdoaWNoIHRoZSBzY29yZSBpcyBwcm92aWRlZC5cbiAqIC0gc2NvcmU6IE9wdGlvbmFsLiBXaGVuIHNjb3JlIGlzIGF2YWlsYWJsZSwgdGhpcyBmaWVsZCBjb250YWlucyB0aGUgcHJvcGVuc2l0eSBzY29yZSBmb3IgdGhpcyBwcm9kdWN0LlxuICogLSBlcnJvcjogT3B0aW9uYWwuIFdoZW4gbm8gc2NvcmUgaXMgYXZhaWFsYmxlLCBhIHN0cmluZyBwcm92aWRlcyB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICBwcm9kdWN0OiBzdHJpbmcsXG4gKiAgIHNjb3JlOiA/U2NvcmUsXG4gKiAgIGVycm9yOiA/c3RyaW5nLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBTY29yZURldGFpbDtcblxuLyoqXG4gKiBUaGUgQm9keSBmaWVsZCBvZiB0aGUgUHJvcGVuc2l0eSBTY29yZS5cbiAqIFByb3BlcnRpZXM6XG4gKiAtIHNjb3JlczogT3B0aW9uYWwsIGFuIGFycmF5IG9mIHNjb3Jlcy4gV2hlbiBoZWFkZXIgaW5kaWNhdGVzIHNvLCBhdGxlYXN0IG9uZSBzY29yZSBpcyBhdmFpbGFibGUuXG4gKiAtIGVycm9yOiBPcHRpb25hbCwgc3RyaW5nIGRlc2NyaWJpbmcgd2h5LCBpZiBubyBzY29yZXMgd2VyZSBwcm92aWRlZCBieSB0aGUgc2VydmVyLlxuICpcbiAqICBAdHlwZWRlZiB7e1xuICogICAgc2NvcmVzOiA/QXJyYXk8U2NvcmVEZXRhaWw+LFxuICogICAgZXJyb3I6ID9zdHJpbmcsXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEJvZHk7XG5cbi8qKlxuICogVGhlIEhlYWRlciBvZiB0aGUgUHJvcGVuc2l0eSBTY29yZS5cbiAqIFByb3BlcnRpZXM6XG4gKiAtIG9rOiBSZXF1aXJlZC4gdHJ1ZSwgaWYgcHJvcGVuc2l0eSBzY29yZSBpcyBhdmFpbGFibGUsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiAgQHR5cGVkZWYge3tcbiAqICAgIG9rOiBib29sZWFuLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBIZWFkZXI7XG5cbi8qKlxuICogVGhlIFByb3BlbnNpdHkgU2NvcmUuXG4gKiBQcm9wZXJ0aWVzOlxuICogLSBoZWFkZXI6IFJlcXVpcmVkLiBQcm92aWRlcyB0aGUgaGVhZGVyIG9mIHRoZSBTY29yZSByZXNwb25zZS5cbiAqIC0gYm9keTogUmVxdWlyZWQuIFByb3ZpZGVzIHRoZSBib2R5IG9mIHRoZSBTY29yZSByZXNwb25zZS5cbiAqXG4gKiAgQHR5cGVkZWYge3tcbiAqICAgIGhlYWRlcjogSGVhZGVyLFxuICogICAgYm9keTogQm9keSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgUHJvcGVuc2l0eVNjb3JlO1xuXG4vKipcbiAqIFByb3BlbnNpdHkgRXZlbnRcbiAqICAgUGxlYXNlIG5vdGUgdGhhdCB0aGUgcHJpbWFyeSBkZWZpdGlvbiBvZiB0aGlzIG9iamVjdCBoYXMgY2hhbmdlZCB0b1xuICogICBQdWJsaXNoZXJFdmVudCBhbmQgaXMgZGVmaW5lZCBpbiBsb2dnZXItYXBpLmpzLiAgVGhlc2UgdHdvIG9iamVjdFxuICogICBkZWZpbml0aW9ucyBhcmUgaWRlbnRpY2FsLlxuICogUHJvcGVydGllczpcbiAqIC0gbmFtZTogUmVxdWlyZWQuIE5hbWUgc2hvdWxkIGJlIHZhbGlkIHN0cmluZyBpbiB0aGUgRXZlbnRcbiAqICAgICAgICAgZW51bSB3aXRoaW4gc3JjL2FwaS9sb2dnZXItYXBpLmpzLlxuICogLSBhY3RpdmU6IFJlcXVpcmVkLiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlciB0aGVcbiAqICAgICAgICAgdXNlciB0b29rIHNvbWUgYWN0aW9uIHRvIHBhcnRpY2lwYXRlIGluIHRoZSBmbG93XG4gKiAgICAgICAgIHRoYXQgZ2VuZXJhdGVkIHRoaXMgZXZlbnQuIEZvciBpbXByZXNzaW9uIGV2ZW50LFxuICogICAgICAgICB0aGlzIGlzIHNldCB0byB0cnVlIGlmIGlzX2FjdGl2ZSBmaWVsZCB3b3VsZCBiZVxuICogICAgICAgICBzZXQgdG8gdHJ1ZSwgYXMgZGVzY3JpYmVkIGluIGRvY3VtZW50YXRpb24gZm9yXG4gKiAgICAgICAgIGVudW0gRXZlbnQuIE90aGVyd2lzZSwgc2V0IHRoaXMgZmllbGQgdG8gZmFsc2UuXG4gKiAgICAgICAgIEZvciBhY3Rpb24gZXZlbnRzLCB0aGlzIGZpZWxkIG11c3QgYWx3YXlzIGJlIHNldFxuICogICAgICAgICB0byB0cnVlLiBUaGUgY2FsbGVyIG11c3QgYWx3YXlzIHNldCB0aGlzIGZpZWxkLlxuICogLSBkYXRhOiBPcHRpb25hbC4gSlNPTiBibG9jayBvZiBkZXB0aCAnMScgcHJvdmlkZXMgZXZlbnRcbiAqICAgICAgICAgcGFyYW1ldGVycy4gVGhlIGd1aWRlbGluZSB0byBjcmVhdGUgdGhpcyBKU09OIGJsb2NrXG4gKiAgICAgICAgIHRoYXQgZGVzY3JpYmVzIHRoZSBldmVudCBpcyBwcm92aWRlZCBhZ2FpbnN0IGVhY2hcbiAqICAgICAgICAgZW51bSBsaXN0ZWQgaW4gdGhlIEV2ZW50IGVudW0gYWJvdmUuXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gKiAgICBuYW1lOiBzdHJpbmcsXG4gKiAgICBhY3RpdmU6IGJvb2xlYW4sXG4gKiAgICBkYXRhOiA/SnNvbk9iamVjdCxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgUHJvcGVuc2l0eUV2ZW50O1xuXG4vKlxuICogUGxlYXNlIG5vdGUgdGhhdCB0aGUgZGVmaW5pdGlvbnMgb2YgRXZlbnQgYW5kIFN1YnNjcmlwdGlvblN0YXRlIGhhdmUgbW92ZWRcbiAqIHRvIGxvZ2dlci1hcGkuanMuICBUaGlzIGlzIG5vdyB0aGUgcHJlZmVycmVkIGludGVyZmFjZSB0byB1c2UgZm9yIGxvZ2dpbmdcbiAqIHB1Ymxpc2hlciBldmVudHMgYW5kIHNldHRpbmcgdGhlIHVzZXIncyBjdXJyZW50IHN1YnNjcmlwdGlvbiBzdGF0ZS5cbiAqIFByb3BlbnNpdHkgd2lsbCBjb250aW51ZSB0byBmdW5jdGlvbiBhcyBhbiBldmVudCBsb2dnZXIgdW50aWwgd2UgYXJlIGNlcnRhaW5cbiAqIG5vIHB1Ymxpc2hlcnMgYXJlIGFjdGl2ZWx5IHVzaW5nIGl0IHRvIGxvZyBldmVudHMuXG4gKi9cbmV4cG9ydCBjb25zdCBFdmVudCA9IExvZ2dlckFwaS5FdmVudDtcbmV4cG9ydCBjb25zdCBTdWJzY3JpcHRpb25TdGF0ZSA9IExvZ2dlckFwaS5TdWJzY3JpcHRpb25TdGF0ZTtcblxuLyoqXG4gKiBAZXh0ZW5kcyB7TG9nZ2VyQXBpLkxvZ2dlckFwaX1cbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlbnNpdHlBcGkgZXh0ZW5kcyBMb2dnZXJBcGkuTG9nZ2VyQXBpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgcHJvcGVuc2l0eSBvZiBhIHVzZXIgdG8gc3Vic2NyaWJlIGJhc2VkIG9uIHRoZSB0eXBlLlxuICAgKiBUaGUgYXJndW1lbnQgc2hvdWxkIGJlIGEgdmFsaWQgc3RyaW5nIGZyb20gUHJvcGVuc2l0eVR5cGUuXG4gICAqIElmIG5vIHR5cGUgaXMgcHJvdmlkZWQsIEdFTkVSQUwgc2NvcmUgaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7UHJvcGVuc2l0eVR5cGU9fSB0eXBlXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPCFQcm9wZW5zaXR5U2NvcmU+fVxuICAgKi9cbiAgZ2V0UHJvcGVuc2l0eSh0eXBlKSB7fVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0VudGl0bGVtZW50c30gZnJvbSAnLi9lbnRpdGxlbWVudHMnO1xuaW1wb3J0IHtVc2VyRGF0YX0gZnJvbSAnLi91c2VyLWRhdGEnO1xuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIFN1YnNjcmliZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshUHVyY2hhc2VEYXRhfSBwdXJjaGFzZURhdGFcbiAgICogQHBhcmFtIHs/VXNlckRhdGF9IHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7P0VudGl0bGVtZW50c30gZW50aXRsZW1lbnRzXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gcHJvZHVjdFR5cGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjb21wbGV0ZUhhbmRsZXJcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gb2xkU2t1XG4gICAqIEBwYXJhbSB7P3N0cmluZz19IHN3Z1VzZXJUb2tlblxuICAgKiBAcGFyYW0gez9udW1iZXI9fSBwYXltZW50UmVjdXJyZW5jZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcmF3LFxuICAgIHB1cmNoYXNlRGF0YSxcbiAgICB1c2VyRGF0YSxcbiAgICBlbnRpdGxlbWVudHMsXG4gICAgcHJvZHVjdFR5cGUsXG4gICAgY29tcGxldGVIYW5kbGVyLFxuICAgIG9sZFNrdSA9IG51bGwsXG4gICAgc3dnVXNlclRva2VuID0gbnVsbCxcbiAgICBwYXltZW50UmVjdXJyZW5jZSA9IG51bGxcbiAgKSB7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucmF3ID0gcmF3O1xuICAgIC8qKiBAY29uc3QgeyFQdXJjaGFzZURhdGF9ICovXG4gICAgdGhpcy5wdXJjaGFzZURhdGEgPSBwdXJjaGFzZURhdGE7XG4gICAgLyoqIEBjb25zdCB7P1VzZXJEYXRhfSAqL1xuICAgIHRoaXMudXNlckRhdGEgPSB1c2VyRGF0YTtcbiAgICAvKiogQGNvbnN0IHs/RW50aXRsZW1lbnRzfSAqL1xuICAgIHRoaXMuZW50aXRsZW1lbnRzID0gZW50aXRsZW1lbnRzO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnByb2R1Y3RUeXBlID0gcHJvZHVjdFR5cGU7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbXBsZXRlSGFuZGxlcl8gPSBjb21wbGV0ZUhhbmRsZXI7XG4gICAgLyoqIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLm9sZFNrdSA9IG9sZFNrdTtcbiAgICAvKiogQGNvbnN0IHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuc3dnVXNlclRva2VuID0gc3dnVXNlclRva2VuO1xuICAgIC8qKiBAY29uc3Qgez9udW1iZXJ9ICovXG4gICAgdGhpcy5wYXltZW50UmVjdXJyZW5jZSA9IHBheW1lbnRSZWN1cnJlbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFTdWJzY3JpYmVSZXNwb25zZX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgU3Vic2NyaWJlUmVzcG9uc2UoXG4gICAgICB0aGlzLnJhdyxcbiAgICAgIHRoaXMucHVyY2hhc2VEYXRhLFxuICAgICAgdGhpcy51c2VyRGF0YSxcbiAgICAgIHRoaXMuZW50aXRsZW1lbnRzLFxuICAgICAgdGhpcy5wcm9kdWN0VHlwZSxcbiAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyXyxcbiAgICAgIHRoaXMub2xkU2t1LFxuICAgICAgdGhpcy5zd2dVc2VyVG9rZW5cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAncHVyY2hhc2VEYXRhJzogdGhpcy5wdXJjaGFzZURhdGEuanNvbigpLFxuICAgICAgJ3VzZXJEYXRhJzogdGhpcy51c2VyRGF0YSA/IHRoaXMudXNlckRhdGEuanNvbigpIDogbnVsbCxcbiAgICAgICdlbnRpdGxlbWVudHMnOiB0aGlzLmVudGl0bGVtZW50cyA/IHRoaXMuZW50aXRsZW1lbnRzLmpzb24oKSA6IG51bGwsXG4gICAgICAnb2xkU2t1JzogdGhpcy5vbGRTa3UsXG4gICAgICAncHJvZHVjdFR5cGUnOiB0aGlzLnByb2R1Y3RUeXBlLFxuICAgICAgJ3N3Z1VzZXJUb2tlbic6IHRoaXMuc3dnVXNlclRva2VuLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQWxsb3dzIHRoZSByZWNlaXZpbmcgc2l0ZSB0byBjb21wbGV0ZS9hY2tub3dsZWRnZSB0aGF0IGl0IHJlZ2lzdGVyZWRcbiAgICogdGhlIHN1YnNjcmlwdGlvbiBwdXJjaGFzZS4gVGhlIHR5cGljYWwgYWN0aW9uIHdvdWxkIGJlIHRvIGNyZWF0ZSBhblxuICAgKiBhY2NvdW50IChvciBtYXRjaCBhbiBleGlzdGluZyBvbmUpIGFuZCBhc3NvY2lhdGVkIHRoZSBwdXJjaGFzZSB3aXRoXG4gICAqIHRoYXQgYWNjb3VudC5cbiAgICpcbiAgICogU3dHIHdpbGwgZGlzcGxheSBwcm9ncmVzcyBpbmRpY2F0b3IgdW50aWwgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGFuZFxuICAgKiB1cG9uIHJlY2VpdmluZyB0aGlzIGNhbGwgd2lsbCBzaG93IHRoZSBjb25maXJtYXRpb24gdG8gdGhlIHVzZXIuXG4gICAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIHdpbGwgeWllbGQgb25jZSB0aGUgdXNlciBjbG9zZXNcbiAgICogdGhlIGNvbmZpcm1hdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wbGV0ZUhhbmRsZXJfKCk7XG4gIH1cbn1cblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXJjaGFzZURhdGEge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc2lnbmF0dXJlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyYXcsIHNpZ25hdHVyZSkge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5kYXRhID0gcmF3O1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNpZ25hdHVyZSA9IHNpZ25hdHVyZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHVyY2hhc2VEYXRhfVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBQdXJjaGFzZURhdGEodGhpcy5yYXcsIHRoaXMuc2lnbmF0dXJlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2RhdGEnOiB0aGlzLnJhdyxcbiAgICAgICdzaWduYXR1cmUnOiB0aGlzLnNpZ25hdHVyZSxcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q2xpZW50RXZlbnRNYW5hZ2VyQXBpfSBmcm9tICcuL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaSc7XG5pbXBvcnQge1xuICBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3QsXG4gIERlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2UsXG59IGZyb20gJy4vZGVmZXJyZWQtYWNjb3VudC1jcmVhdGlvbic7XG5pbXBvcnQge0VudGl0bGVtZW50c30gZnJvbSAnLi9lbnRpdGxlbWVudHMnO1xuaW1wb3J0IHtMb2dnZXJBcGl9IGZyb20gJy4vbG9nZ2VyLWFwaSc7XG5pbXBvcnQge09mZmVyfSBmcm9tICcuL29mZmVyJztcbmltcG9ydCB7UHJvcGVuc2l0eUFwaX0gZnJvbSAnLi9wcm9wZW5zaXR5LWFwaSc7XG5pbXBvcnQge1N1YnNjcmliZVJlc3BvbnNlfSBmcm9tICcuL3N1YnNjcmliZS1yZXNwb25zZSc7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9ucyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbGx5IGluaXRpYWxpemVzIHRoZSBzdWJzY3JpcHRpb25zIHJ1bnRpbWUgd2l0aCBwdWJsaWNhdGlvbiBvclxuICAgKiBwcm9kdWN0IElELiBJZiBub3QgY2FsbGVkLCB0aGUgcnVudGltZSB3aWxsIGxvb2sgZm9yIHRoZSBpbml0aWFsaXphdGlvblxuICAgKiBwYXJhbWV0ZXJzIGluIHRoZSBwYWdlJ3MgbWFya3VwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZHVjdE9yUHVibGljYXRpb25JZFxuICAgKi9cbiAgaW5pdChwcm9kdWN0T3JQdWJsaWNhdGlvbklkKSB7fVxuXG4gIC8qKlxuICAgKiBPcHRpb25hbGx5IGNvbmZpZ3VyZXMgdGhlIHJ1bnRpbWUgd2l0aCBub24tZGVmYXVsdCBwcm9wZXJ0aWVzLiBTZWVcbiAgICogYENvbmZpZ2AgZGVmaW5pdGlvbiBmb3IgZGV0YWlscy5cbiAgICogQHBhcmFtIHshQ29uZmlnfSBjb25maWdcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIGNvbmZpZ3VyZShjb25maWcpIHt9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgZW50aXRsZW1lbnQgZmxvdy5cbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHN0YXJ0KCkge31cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBlbnRpdGxlbWVudHMgdGhhdCBjYW4gYmUgZmV0Y2hlZCBhZ2Fpbi5cbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHJlc2V0KCkge31cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBlbnRpdGxlbWVudHMgYW5kIGNsZWFycyBhbGwgb2YgdGhlIGNhY2hlcy5cbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIGNsZWFyKCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHshR2V0RW50aXRsZW1lbnRzUGFyYW1zRXh0ZXJuYWxEZWY9fSBwYXJhbXNcbiAgICogQHJldHVybiB7IVByb21pc2U8IUVudGl0bGVtZW50cz59XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudHMocGFyYW1zKSB7fVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN1YnNjcmliZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhRW50aXRsZW1lbnRzPil9IGNhbGxiYWNrXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBzZXRPbkVudGl0bGVtZW50c1Jlc3BvbnNlKGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc2V0IG9mIG9mZmVycy5cbiAgICogQHBhcmFtIHt7XG4gICAqICAgcHJvZHVjdElkOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gICAqIH09fSBvcHRpb25zXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBcnJheTwhT2ZmZXI+Pn1cbiAgICovXG4gIGdldE9mZmVycyhvcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIE9mZmVycyBmbG93LlxuICAgKiBAcGFyYW0geyFPZmZlcnNSZXF1ZXN0PX0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2hvd09mZmVycyhvcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIE9mZmVycyBmbG93IGZvciBhIHN1YnNjcmlwdGlvbiB1cGRhdGUuXG4gICAqIEBwYXJhbSB7IU9mZmVyc1JlcXVlc3Q9fSBvcHRpb25zXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBzaG93VXBkYXRlT2ZmZXJzKG9wdGlvbnMpIHt9XG5cbiAgLyoqXG4gICAqIFNob3cgc3Vic2NyaXB0aW9uIG9wdGlvbi5cbiAgICogQHBhcmFtIHshT2ZmZXJzUmVxdWVzdD19IG9wdGlvbnNcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHNob3dTdWJzY3JpYmVPcHRpb24ob3B0aW9ucykge31cblxuICAvKipcbiAgICogU2hvdyBhYmJyZXZpYXRlZCBvZmZlcnMuXG4gICAqIEBwYXJhbSB7IU9mZmVyc1JlcXVlc3Q9fSBvcHRpb25zXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBzaG93QWJicnZPZmZlcihvcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBTaG93IGNvbnRyaWJ1dGlvbiBvcHRpb25zIGZvciB0aGUgdXNlcnMgdG8gc2VsZWN0IGZyb20uXG4gICAqIFRoZSBvcHRpb25zIGFyZSBncm91cGVkIHRvZ2V0aGVyIGJ5IHBlcmlvZHMgKFdlZWtseSwgTW9udGhseSwgZXRjLikuXG4gICAqIFVzZXIgY2FuIHNlbGVjdCB0aGUgYW1vdW50IHRvIGNvbnRyaWJ1dGUgdG8gZnJvbSBhdmFpbGFibGUgb3B0aW9uc1xuICAgKiB0byB0aGUgcHVibGlzaGVyLiBUaGVzZSBvcHRpb25zIGFyZSBiYXNlZCBvbiB0aGUgU0tVcyBkZWZpbmVkIGluIHRoZSBQbGF5XG4gICAqIGNvbnNvbGUgZm9yIGEgZ2l2ZW4gcHVibGljYXRpb24uXG4gICAqIEVhY2ggU0tVIGhhcyBBbW91bnQsIFBlcmlvZCwgU0tVSWQgYW5kIG90aGVyIGF0dHJpYnV0ZXMuXG4gICAqIEBwYXJhbSB7IU9mZmVyc1JlcXVlc3Q9fSBvcHRpb25zXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBzaG93Q29udHJpYnV0aW9uT3B0aW9ucyhvcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgbmF0aXZlIHN1YnNjcmliZSByZXF1ZXN0LiBTZXR0aW5nIHRoaXMgY2FsbGJhY2tcbiAgICogdHJpZ2dlcnMgdGhlIFwibmF0aXZlXCIgb3B0aW9uIGluIHRoZSBvZmZlcnMgZmxvdy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2V0T25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0KGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN1YnNjcmliZSBjb21wbGV0ZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHNldE9uU3Vic2NyaWJlUmVzcG9uc2UoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBzdWJzY3JpcHRpb24gcHVyY2hhc2UgZmxvdy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc3Vic2NyaWJlKHNrdSkge31cblxuICAvKipcbiAgICogU3RhcnRzIHN1YnNjcmlwdGlvbiBwdXJjaGFzZSBmbG93LlxuICAgKiBAcGFyYW0ge1N1YnNjcmlwdGlvblJlcXVlc3R9IHN1YnNjcmlwdGlvblJlcXVlc3RcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHVwZGF0ZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25SZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvbnRyaWJ1dGlvbiBjb21wbGV0ZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcGF5bWVudCBjb21wbGV0ZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIHNldE9uUGF5bWVudFJlc3BvbnNlKGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgY29udHJpYnV0aW9ucyBwdXJjaGFzZSBmbG93LlxuICAgKiBAcGFyYW0ge3N0cmluZ3xTdWJzY3JpcHRpb25SZXF1ZXN0fSBza3VPclN1YnNjcmlwdGlvblJlcXVlc3RcbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIGNvbnRyaWJ1dGUoc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIGRlZmVycmVkIGFjY291bnQgY3JlYXRpb24gZmxvdy5cbiAgICogU2VlIGBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3RgIGZvciBtb3JlIGRldGFpbHMuXG4gICAqIEBwYXJhbSB7P0RlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdD19IG9wdGlvbnNcbiAgICogQHJldHVybiB7IVByb21pc2U8IURlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2U+fVxuICAgKi9cbiAgY29tcGxldGVEZWZlcnJlZEFjY291bnRDcmVhdGlvbihvcHRpb25zKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFMb2dpblJlcXVlc3QpfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2V0T25Mb2dpblJlcXVlc3QoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUxvZ2luUmVxdWVzdH0gcmVxdWVzdFxuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgdHJpZ2dlckxvZ2luUmVxdWVzdChyZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIGxvZ2luIHByb21wdCBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHNob3dMb2dpblByb21wdCgpIHt9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgbG9naW4gbm90aWZpY2F0aW9uIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc2hvd0xvZ2luTm90aWZpY2F0aW9uKCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2V0T25MaW5rQ29tcGxldGUoY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2V9IGFjY291bnRQcm9taXNlIFB1Ymxpc2hlcidzIHByb21pc2UgdG8gbG9va3VwIGFjY291bnQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cChhY2NvdW50UHJvbWlzZSkge31cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBBY2NvdW50IGxpbmtpbmcgZmxvdy5cbiAgICogVE9ETyhkcGFyaWtoKTogZGVjaWRlIGlmIGl0J3Mgb25seSBleHBvc2VkIGZvciB0ZXN0aW5nIG9yIFBST0QgcHVycG9zZXMuXG4gICAqIEBwYXJhbSB7e2FtcFJlYWRlcklkOiAoc3RyaW5nfHVuZGVmaW5lZCl9PX0gcGFyYW1zXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBsaW5rQWNjb3VudChwYXJhbXMpIHt9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIHRoZSBjbGllbnQgdGhhdCBhIGZsb3cgaGFzIGJlZW4gc3RhcnRlZC4gVGhlIG5hbWUgb2YgdGhlIGZsb3dcbiAgICogaXMgcGFzc2VkIGFzIHRoZSBjYWxsYmFjayBhcmd1bWVudC4gVGhlIGZsb3cgbmFtZSBjb3JyZXNwb25kcyB0byB0aGVcbiAgICogbWV0aG9kIG5hbWUgaW4gdGhpcyBpbnRlcmZhY2UsIHN1Y2ggYXMgXCJzaG93T2ZmZXJzXCIsIG9yIFwic3Vic2NyaWJlXCIuXG4gICAqIFNlZSBgU3Vic2NyaXB0aW9uRmxvd3NgIGZvciB0aGUgZnVsbCBsaXN0LlxuICAgKlxuICAgKiBBbHNvIHNlZSBgc2V0T25GbG93Q2FuY2VsZWRgIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbih7Zmxvdzogc3RyaW5nLCBkYXRhOiAhT2JqZWN0fSl9IGNhbGxiYWNrXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBzZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyB0aGUgY2xpZW50IHRoYXQgYSBmbG93IGhhcyBiZWVuIGNhbmNlbGVkLiBUaGUgbmFtZSBvZiB0aGUgZmxvd1xuICAgKiBpcyBwYXNzZWQgYXMgdGhlIGNhbGxiYWNrIGFyZ3VtZW50LiBUaGUgZmxvdyBuYW1lIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgKiBtZXRob2QgbmFtZSBpbiB0aGlzIGludGVyZmFjZSwgc3VjaCBhcyBcInNob3dPZmZlcnNcIiwgb3IgXCJzdWJzY3JpYmVcIi5cbiAgICogU2VlIGBTdWJzY3JpcHRpb25GbG93c2AgZm9yIHRoZSBmdWxsIGxpc3QuXG4gICAqXG4gICAqIE5vdGljZSB0aGF0IHNvbWUgb2YgdGhlIGZsb3dzLCBzdWNoIGFzIFwic3Vic2NyaWJlXCIsIGNvdWxkIGFkZGl0aW9uYWxseVxuICAgKiBoYXZlIHRoZWlyIG93biBcImNhbmNlbFwiIGV2ZW50cy5cbiAgICpcbiAgICogQWxzbyBzZWUgYHNldE9uRmxvd1N0YXJ0ZWRgIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbih7Zmxvdzogc3RyaW5nLCBkYXRhOiAhT2JqZWN0fSl9IGNhbGxiYWNrXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBzZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaykge31cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBzYXZlIHN1YnNjcmlwdGlvbnMgZmxvdy5cbiAgICogQHBhcmFtIHshU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFja30gcmVxdWVzdENhbGxiYWNrXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBhIHByb21pc2UgaW5kaWNhdGluZyBmbG93IGlzIHN0YXJ0ZWRcbiAgICovXG4gIHNhdmVTdWJzY3JpcHRpb24ocmVxdWVzdENhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVsZW1lbnQgd2l0aCB0aGUgU3dHIGJ1dHRvbiBzdHlsZSBhbmQgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgKiBUaGUgZGVmYXVsdCB0aGVtZSBpcyBcImxpZ2h0XCIuXG4gICAqXG4gICAqIEBwYXJhbSB7IUJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBjcmVhdGVCdXR0b24ob3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgU3dHIGJ1dHRvbiBzdHlsZSBhbmQgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIHRvIGFuIGV4aXN0aW5nXG4gICAqIERPTSBlbGVtZW50LiBUaGUgZGVmYXVsdCB0aGVtZSBpcyBcImxpZ2h0XCIuXG4gICAqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGJ1dHRvblxuICAgKiBAcGFyYW0geyFCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IGNhbGxiYWNrXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBhdHRhY2hCdXR0b24oYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHt9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIHNtYXJ0QnV0dG9uIGVsZW1lbnQgYW5kIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICogVGhlIGRlZmF1bHQgdGhlbWUgaXMgXCJsaWdodFwiLlxuICAgKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBidXR0b25cbiAgICogQHBhcmFtIHshU21hcnRCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IGNhbGxiYWNrXG4gICAqIEByZXR1cm4gez99XG4gICAqL1xuICBhdHRhY2hTbWFydEJ1dHRvbihidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge31cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBwcm9wZW5zaXR5IG1vZHVsZSB0aGF0IHByb3ZpZGVzIEFQSXMgdG9cbiAgICogZ2V0IHByb3BlbnNpdHkgc2NvcmVzIGJhc2VkIG9uIHVzZXIgc3RhdGUgYW5kIGV2ZW50c1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxQcm9wZW5zaXR5QXBpPn1cbiAgICovXG4gIGdldFByb3BlbnNpdHlNb2R1bGUoKSB7fVxuXG4gIC8qKiBAcmV0dXJuIHshUHJvbWlzZTxMb2dnZXJBcGk+fSAqL1xuICBnZXRMb2dnZXIoKSB7fVxuXG4gIC8qKiBAcmV0dXJuIHshUHJvbWlzZTxDbGllbnRFdmVudE1hbmFnZXJBcGk+fSAqL1xuICBnZXRFdmVudE1hbmFnZXIoKSB7fVxuXG4gIC8qKlxuICAgKiBQdWJsaXNoZXJzIHBhcnRpY2lwYXRpbmcgaW4gU2hvd2Nhc2Ugc2hvdWxkIGNhbGwgdGhpcyB3aXRoIHRoZWlyIG93biBlbnRpdGxlbWVudHNcbiAgICogYW5kIGVudGl0bGVtZW50IHJlbGF0ZWQgVUkgZXZlbnRzLiAgU3dHIHdpbGwgYXV0b21hdGljYWxseSBkbyB0aGlzIGZvciBHb29nbGVcbiAgICogc291cmNlZCBzdWJzY3JpcHRpb25zIGFuZCBtZXRlcnMuXG4gICAqIEBwYXJhbSB7IVB1Ymxpc2hlckVudGl0bGVtZW50fSBlbnRpdGxlbWVudFxuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2V0U2hvd2Nhc2VFbnRpdGxlbWVudChlbnRpdGxlbWVudCkge31cblxuICAvKipcbiAgICogUHVibGlzaGVycywgd2hvIGJvdGggKDEpIHBhcnRpY2lwYXRlIGluIFNob3djYXNlIGFuZCAoMikgdXNlIHNlcnZlci1zaWRlIHBheXdhbGxzLFxuICAgKiBzaG91bGQgY2FsbCB0aGlzIG1ldGhvZCB0byBjb25zdW1lIFNob3djYXNlIGVudGl0bGVtZW50cy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNob3djYXNlRW50aXRsZW1lbnRKd3RcbiAgICogQHBhcmFtIHs/RnVuY3Rpb249fSBvbkNsb3NlRGlhbG9nIENhbGxlZCBhZnRlciB0aGUgdXNlciBjbG9zZXMgdGhlIGRpYWxvZy5cbiAgICogQHJldHVybiB7P31cbiAgICovXG4gIGNvbnN1bWVTaG93Y2FzZUVudGl0bGVtZW50Snd0KHNob3djYXNlRW50aXRsZW1lbnRKd3QsIG9uQ2xvc2VEaWFsb2cpIHt9XG5cbiAgLyoqXG4gICAqIEludGVsbGlnZW50bHkgcmV0dXJucyB0aGUgbW9zdCBpbnRlcmVzdGluZyBhY3Rpb24gdG8gdGhlXG4gICAqIHJlYWRlciBiYXNlZCBvbiBkaWZmZXJlbnQgZGlmZmVyZW50IHVzZXIgc3RhdHVzLiBGb3JcbiAgICogaW5zdGFuY2UsIGEgbmV3IHVzZXIgbWF5IGdldCBmcmVlIG1ldGVyaW5nIGJ5IHNpbXBseVxuICAgKiBjbGlja2luZyAnZm9sbG93LXB1Ymxpc2hlcicgYWN0aW9uLCBhbmQgYSBmcmVxdWVudGx5XG4gICAqIHZpc2l0aW5nIHVzZXIgbWF5IGJlIHNob3duIGEgJ2NyZWF0aW5nIGFuIGFjY291bnQnIGFjdGlvbi5cbiAgICogVE9ETyhtb29uYm9uZyk6IEltcGxlbWVudCB0aGlzIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHs/fVxuICAgKi9cbiAgc2hvd0Jlc3RBdWRpZW5jZUFjdGlvbigpIHt9XG59XG5cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFB1Ymxpc2hlckVudGl0bGVtZW50RXZlbnQgPSB7XG4gIC8vIEV2ZW50cyBpbmRpY2F0aW5nIGNvbnRlbnQgY291bGQgcG90ZW50aWFsbHkgYmUgdW5sb2NrZWRcbiAgRVZFTlRfU0hPV0NBU0VfTUVURVJfT0ZGRVJFRDogJ0VWRU5UX1NIT1dDQVNFX01FVEVSX09GRkVSRUQnLCAvLyBUaGlzIGV2ZW50IGlzIG9ubHkgcmVxdWlyZWQgaWYgdGhlIHVzZXIgY2FuIGNob29zZSBub3QgdG8gdXNlIGEgcHVibGlzaGVyIG1ldGVyXG5cbiAgLy8gRXZlbnRzIGluZGljYXRpbmcgY29udGVudCB3YXMgdW5sb2NrZWRcbiAgRVZFTlRfU0hPV0NBU0VfVU5MT0NLRURfQllfU1VCU0NSSVBUSU9OOlxuICAgICdFVkVOVF9TSE9XQ0FTRV9VTkxPQ0tFRF9CWV9TVUJTQ1JJUFRJT04nLCAvLyBQdWJsaXNoZXIgbWFuYWdlZCBzdWJzY3JpcHRpb25zIG9ubHlcbiAgRVZFTlRfU0hPV0NBU0VfVU5MT0NLRURfQllfTUVURVI6ICdFVkVOVF9TSE9XQ0FTRV9VTkxPQ0tFRF9CWV9NRVRFUicsIC8vIFB1Ymxpc2hlciBtYW5hZ2VkIG1ldGVycyBvbmx5XG4gIEVWRU5UX1NIT1dDQVNFX1VOTE9DS0VEX0ZSRUVfUEFHRTogJ0VWRU5UX1NIT1dDQVNFX1VOTE9DS0VEX0ZSRUVfUEFHRScsIC8vIFdoZW4gdGhlIGFydGljbGUgaXMgZnJlZSBmb3IgYW55IHJlYXNvbiAobGVhZCBhcnRpY2xlLCBldGMpXG5cbiAgLy8gRXZlbnRzIGluZGljYXRpbmcgdGhlIHVzZXIgbXVzdCB0YWtlIGFjdGlvbiB0byB2aWV3IGNvbnRlbnRcbiAgRVZFTlRfU0hPV0NBU0VfTk9fRU5USVRMRU1FTlRTX1JFR1dBTEw6XG4gICAgJ0VWRU5UX1NIT1dDQVNFX05PX0VOVElUTEVNRU5UU19SRUdXQUxMJywgLy8gV2hlbiB0aGUgdXNlciBtdXN0IHJlZ2lzdGVyIChvciBsb2cgaW4pIHRvIHZpZXcgdGhlIGFydGljbGVcblxuICAvLyBFdmVudHMgaW5kaWNhdGluZyB0aGUgdXNlciBtdXN0IHN1YnNjcmliZSB0byB2aWV3IGNvbnRlbnRcbiAgRVZFTlRfU0hPV0NBU0VfSU5FTElHSUJMRV9QQVlXQUxMOiAnRVZFTlRfU0hPV0NBU0VfSU5FTElHSUJMRV9QQVlXQUxMJywgLy8gV2hlbiB0aGUgdXNlciBpcyBub3QgZWxpZ2libGUgZm9yIHNob3djYXNlIGVudGl0bGVtZW50c1xuICBFVkVOVF9TSE9XQ0FTRV9OT19FTlRJVExFTUVOVFNfUEFZV0FMTDpcbiAgICAnRVZFTlRfU0hPV0NBU0VfTk9fRU5USVRMRU1FTlRTX1BBWVdBTEwnLCAvLyBXaGVuIHRoZSB1c2VyIGhhcyBubyByZW1haW5pbmcgc2hvd2Nhc2UgZW50aXRsZW1lbnRzXG59O1xuXG4vKipcbiAqIFB1Ymxpc2hlckVudGl0bGVtZW50XG4gKiAgIEluIG9yZGVyIHRvIHBhcnRpY2lwYXRlIGluIE5ld3MgU2hvd2Nhc2UsIHB1Ymxpc2hlcnMgbXVzdCByZXBvcnQgaW5mb3JtYXRpb24gYWJvdXQgdGhlaXIgZW50aXRsZW1lbnRzLlxuICogUHJvcGVydGllczpcbiAqIC0gaXNVc2VyUmVnaXN0ZXJlZDogSXMgdGhlIHVzZXIgcmVnaXN0ZXJlZCBjdXJyZW50bHk/XG4gKiAtIGVudGl0bGVtZW50OiBQdWJsaXNoZXIgZW50aXRsZW1lbnQgZXZlbnQgdHlwZS5cbiAqICBAdHlwZWRlZiB7e1xuICogICAgaXNVc2VyUmVnaXN0ZXJlZDogICFib29sZWFuLFxuICogICAgZW50aXRsZW1lbnQ6ICFQdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50LFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBQdWJsaXNoZXJFbnRpdGxlbWVudDtcblxuLyoqIEBlbnVtIHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgU3Vic2NyaXB0aW9uRmxvd3MgPSB7XG4gIFNIT1dfT0ZGRVJTOiAnc2hvd09mZmVycycsXG4gIFNIT1dfU1VCU0NSSUJFX09QVElPTjogJ3Nob3dTdWJzY3JpYmVPcHRpb24nLFxuICBTSE9XX0FCQlJWX09GRkVSOiAnc2hvd0FiYnJ2T2ZmZXInLFxuICBTSE9XX0NPTlRSSUJVVElPTl9PUFRJT05TOiAnc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMnLFxuICBTVUJTQ1JJQkU6ICdzdWJzY3JpYmUnLFxuICBDT05UUklCVVRFOiAnY29udHJpYnV0ZScsXG4gIENPTVBMRVRFX0RFRkVSUkVEX0FDQ09VTlRfQ1JFQVRJT046ICdjb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uJyxcbiAgTElOS19BQ0NPVU5UOiAnbGlua0FjY291bnQnLFxuICBTSE9XX0xPR0lOX1BST01QVDogJ3Nob3dMb2dpblByb21wdCcsXG4gIFNIT1dfTE9HSU5fTk9USUZJQ0FUSU9OOiAnc2hvd0xvZ2luTm90aWZpY2F0aW9uJyxcbiAgU0hPV19NRVRFUl9UT0FTVDogJ3Nob3dNZXRlclRvYXN0Jyxcbn07XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzOlxuICogLSB3aW5kb3dPcGVuTW9kZSAtIGVpdGhlciBcImF1dG9cIiBvciBcInJlZGlyZWN0XCIuIFRoZSBcInJlZGlyZWN0XCIgdmFsdWUgd2lsbFxuICogICBmb3JjZSByZWRpcmVjdCBmbG93IGZvciBhbnkgd2luZG93Lm9wZW4gb3BlcmF0aW9uLCBpbmNsdWRpbmcgcGF5bWVudHMuXG4gKiAgIFRoZSBcImF1dG9cIiB2YWx1ZSBlaXRoZXIgdXNlcyBhIHJlZGlyZWN0IG9yIGEgcG9wdXAgZmxvdyBkZXBlbmRpbmcgb25cbiAqICAgd2hhdCdzIHBvc3NpYmxlIG9uIGEgc3BlY2lmaWMgZW52aXJvbm1lbnQuIERlZmF1bHRzIHRvIFwiYXV0b1wiLlxuICogLSBlbmFibGVTd2dBbmFseXRpY3MgLSBpZiBzZXQgdG8gdHJ1ZSB0aGVuIGV2ZW50cyBsb2dnZWQgYnkgdGhlIHB1Ymxpc2hlcidzXG4gKiAgIGNsaWVudCB3aWxsIGJlIHNlbnQgdG8gR29vZ2xlJ3MgU3dHIGFuYWx5dGljcyBzZXJ2aWNlLiAgVGhpcyBpbmZvcm1hdGlvbiBpc1xuICogICB1c2VkIHRvIGNvbXBhcmUgdGhlIGVmZmVjdGl2ZW5lc3Mgb2YgR29vZ2xlJ3MgYnV5LWZsb3cgZXZlbnRzIHRvIHRob3NlXG4gKiAgIGdlbmVyYXRlZCBieSB0aGUgcHVibGlzaGVyJ3MgY2xpZW50IGNvZGUuICBUaGlzIGluY2x1ZGVzIGV2ZW50cyBzZW50IHRvXG4gKiAgIGJvdGggUHJvcGVuc2l0eUFwaSBhbmQgTG9nZ2VyQXBpLlxuICogLSBlbmFibGVQcm9wZW5zaXR5IC0gSWYgdHJ1ZSBldmVudHMgZnJvbSB0aGUgbG9nZ2VyIGFwaSBhcmUgc2VudCB0byB0aGVcbiAqICAgcHJvcGVuc2l0eSBzZXJ2ZXIuICBOb3RlIGV2ZW50cyBmcm9tIHRoZSBsZWdhY3kgcHJvcGVuc2l0eSBlbmRwb2ludCBhcmVcbiAqICAgYWx3YXlzIHNlbnQuXG4gKiBAdHlwZWRlZiB7e1xuICogICBleHBlcmltZW50czogKCFBcnJheTxzdHJpbmc+fHVuZGVmaW5lZCksXG4gKiAgIHdpbmRvd09wZW5Nb2RlOiAoIVdpbmRvd09wZW5Nb2RlfHVuZGVmaW5lZCksXG4gKiAgIGFuYWx5dGljc01vZGU6ICghQW5hbHl0aWNzTW9kZXx1bmRlZmluZWQpLFxuICogICBlbmFibGVTd2dBbmFseXRpY3M6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGVuYWJsZVByb3BlbnNpdHk6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IENvbmZpZztcblxuLyoqXG4gKiBQYXJhbXMgZm9yIEdldEVudGl0bGVtZW50cyByZXF1ZXN0cyB0byBTd0cgQ2xpZW50LlxuICogc3dnLWpzIGNvbnN0cnVjdHMgb2JqZWN0cyBvZiB0aGlzIHR5cGUsIGJ1dCBwdWJsaXNoZXIgSlMgd29uJ3QuXG4gKiBzd2ctanMgY29udmVydHMgdGhlc2UgcGFyYW1zIHRvIGEgQmFzZTY0IEpTT04gc3RyaW5nXG4gKiBiZWZvcmUgc2VuZGluZyB0aGVtIHRvIFN3RyBDbGllbnQuXG4gKiBAdHlwZWRlZiB7e1xuICogICBtZXRlcmluZzogKCFHZXRFbnRpdGxlbWVudHNNZXRlcmluZ1BhcmFtc0ludGVybmFsfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEdldEVudGl0bGVtZW50c1BhcmFtc0ludGVybmFsRGVmO1xuXG4vKipcbiAqIEVuY3J5cHRpb24gcGFyYW1zIGZvciBHZXRFbnRpdGxlbWVudHMgcmVxdWVzdHMuXG4gKiBAdHlwZWRlZiB7e1xuICogICBlbmNyeXB0ZWREb2N1bWVudEtleTogc3RyaW5nLFxuICogICBzd2dVc2VyVG9rZW46IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgR2V0RW50aXRsZW1lbnRzRW5jcnlwdGlvblBhcmFtcztcblxuLyoqXG4gKiBNZXRlcmluZyBwYXJhbXMgZm9yIEdldEVudGl0bGVtZW50cyByZXF1ZXN0cyB0byBTd0cgQ2xpZW50LlxuICogc3dnLWpzIGNvbnN0cnVjdHMgb2JqZWN0cyBvZiB0aGlzIHR5cGUsIGJ1dCBwdWJsaXNoZXIgSlMgd29uJ3QuXG4gKiBAdHlwZWRlZiB7e1xuICogICBjbGllbnRUeXBlczogIUFycmF5PG51bWJlcj4sXG4gKiAgIG93bmVyOiBzdHJpbmcsXG4gKiAgIHN0YXRlOiB7XG4gKiAgICAgaWQ6IHN0cmluZyxcbiAqICAgICBhdHRyaWJ1dGVzOiAhQXJyYXk8e1xuICogICAgICAgbmFtZTogc3RyaW5nLFxuICogICAgICAgdGltZXN0YW1wOiBudW1iZXIsXG4gKiAgICAgfT4sXG4gKiAgIH0sXG4gKiAgIHJlc291cmNlOiB7XG4gKiAgICAgaGFzaGVkQ2Fub25pY2FsVXJsOiBzdHJpbmcsXG4gKiAgIH0sXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEdldEVudGl0bGVtZW50c01ldGVyaW5nUGFyYW1zSW50ZXJuYWw7XG5cbi8qKlxuICogUGFyYW1zIGZvciBgZ2V0RW50aXRsZW1lbnRzYCBjYWxscyBmcm9tIHB1Ymxpc2hlciBKUy5cbiAqIHN3Zy1qcyBjb252ZXJ0cyBvYmplY3RzIG9mIHRoaXMgdHlwZSB0byBHZXRFbnRpdGxlbWVudHNQYXJhbXNJbnRlcm5hbC5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGVuY3J5cHRpb246ICghR2V0RW50aXRsZW1lbnRzRW5jcnlwdGlvblBhcmFtc3x1bmRlZmluZWQpLFxuICogICBtZXRlcmluZzogKCFHZXRFbnRpdGxlbWVudHNNZXRlcmluZ1BhcmFtc0V4dGVybmFsfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEdldEVudGl0bGVtZW50c1BhcmFtc0V4dGVybmFsRGVmO1xuXG4vKipcbiAqIFBhcmFtcyBmb3IgYGdldEVudGl0bGVtZW50c2AgY2FsbHMgZnJvbSBwdWJsaXNoZXIgSlMuXG4gKiBzd2ctanMgY29udmVydHMgb2JqZWN0cyBvZiB0aGlzIHR5cGUgdG8gR2V0RW50aXRsZW1lbnRzTWV0ZXJpbmdQYXJhbXNJbnRlcm5hbC5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGNsaWVudFR5cGVzOiAhQXJyYXk8bnVtYmVyPixcbiAqICAgb3duZXI6IHN0cmluZyxcbiAqICAgc3RhdGU6IHtcbiAqICAgICBpZDogc3RyaW5nLFxuICogICAgIHN0YW5kYXJkQXR0cmlidXRlczogIU9iamVjdDxzdHJpbmcsIHtcbiAqICAgICAgIHRpbWVzdGFtcDogbnVtYmVyLFxuICogICAgIH0+LFxuICogICAgIGN1c3RvbUF0dHJpYnV0ZXM6ICFPYmplY3Q8c3RyaW5nLCB7XG4gKiAgICAgICB0aW1lc3RhbXA6IG51bWJlcixcbiAqICAgICB9PixcbiAqICAgfSxcbiAqICAgcmVzb3VyY2U6IHtcbiAqICAgICBoYXNoZWRDYW5vbmljYWxVcmw6IHN0cmluZyxcbiAqICAgfSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgR2V0RW50aXRsZW1lbnRzTWV0ZXJpbmdQYXJhbXNFeHRlcm5hbDtcblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgQW5hbHl0aWNzTW9kZSA9IHtcbiAgREVGQVVMVDogMCxcbiAgSU1QUkVTU0lPTlM6IDEsXG59O1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBXaW5kb3dPcGVuTW9kZSA9IHtcbiAgQVVUTzogJ2F1dG8nLFxuICBSRURJUkVDVDogJ3JlZGlyZWN0Jyxcbn07XG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlID0ge1xuICAvLyBUaGUgcmVwbGFjZW1lbnQgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5LCBhbmQgdGhlIHJlbWFpbmluZyB0aW1lIHdpbGxcbiAgLy8gYmUgcHJvcmF0ZWQgYW5kIGNyZWRpdGVkIHRvIHRoZSB1c2VyLiBUaGlzIGlzIHRoZSBjdXJyZW50IGRlZmF1bHRcbiAgLy8gYmVoYXZpb3IuXG4gIElNTUVESUFURV9XSVRIX1RJTUVfUFJPUkFUSU9OOiAnSU1NRURJQVRFX1dJVEhfVElNRV9QUk9SQVRJT04nLFxufTtcblxuLyoqXG4gKiBUaGUgT2ZmZXJzL0NvbnRyaWJ1dGlvbnMgVUkgaXMgcmVuZGVyZWQgZGlmZmVyZW50bHkgYmFzZWQgb24gdGhlXG4gKiBQcm9kdWN0VHlwZS4gVGhlIFByb2R1Y3RUeXBlIHBhcmFtZXRlciBpcyBwYXNzZWQgdG8gdGhlIFBheW1lbnRzIGZsb3csIGFuZFxuICogdGhlbiBwYXNzZWQgYmFjayB0byB0aGUgUGF5bWVudHMgY29uZmlybWF0aW9uIHBhZ2UgdG8gcmVuZGVyIG1lc3NhZ2VzL3RleHRcbiAqIGJhc2VkIG9uIHRoZSBQcm9kdWN0VHlwZS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBQcm9kdWN0VHlwZSA9IHtcbiAgU1VCU0NSSVBUSU9OOiAnU1VCU0NSSVBUSU9OJyxcbiAgVUlfQ09OVFJJQlVUSU9OOiAnVUlfQ09OVFJJQlVUSU9OJyxcbn07XG5cbi8qKlxuICogQHJldHVybiB7IUNvbmZpZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRDb25maWcoKSB7XG4gIHJldHVybiB7XG4gICAgd2luZG93T3Blbk1vZGU6IFdpbmRvd09wZW5Nb2RlLkFVVE8sXG4gICAgYW5hbHl0aWNzTW9kZTogQW5hbHl0aWNzTW9kZS5ERUZBVUxULFxuICAgIGVuYWJsZVN3Z0FuYWx5dGljczogZmFsc2UsXG4gICAgZW5hYmxlUHJvcGVuc2l0eTogZmFsc2UsXG4gIH07XG59XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gc2t1cyAtIGEgbGlzdCBvZiBTS1VzIHRvIHJldHVybiBmcm9tIHRoZSBkZWZpbmVkIG9yIGRlZmF1bHQgbGlzdC4gVGhlXG4gKiAgIG9yZGVyIGlzIHByZXNlcnZlZC5cbiAqIC0gbGlzdCAtIGEgcHJlZGVmaW5lZCBsaXN0IG9mIFNLVXMuIFVzZSBvZiB0aGlzIHByb3BlcnR5IGlzIHVuY29tbW9uLlxuICogICBQb3NzaWJsZSB2YWx1ZXMgYXJlIFwiZGVmYXVsdFwiIGFuZCBcImFtcFwiLiBEZWZhdWx0IGlzIFwiZGVmYXVsdFwiLlxuICogLSBpc0Nsb3NhYmxlIC0gYSBib29sZWFuIHZhbHVlIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzIGNsb3NhYmxlLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHNrdXM6ICghQXJyYXk8c3RyaW5nPnx1bmRlZmluZWQpLFxuICogICBsaXN0OiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGlzQ2xvc2FibGU6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IE9mZmVyc1JlcXVlc3Q7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgbGlua1JlcXVlc3RlZDogYm9vbGVhbixcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgTG9naW5SZXF1ZXN0O1xuXG4vKipcbiAqIFByb3BlcnRpZXM6XG4gKiAtIG9uZSBhbmQgb25seSBvbmUgb2YgXCJ0b2tlblwiIG9yIFwiYXV0aENvZGVcIlxuICogQXV0aENvZGUgcmVmZXJlbmNlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hY3Rpb25zL2lkZW50aXR5L29hdXRoMi1jb2RlLWZsb3dcbiAqIFRva2VuIHJlZmVyZW5jZTogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWN0aW9ucy9pZGVudGl0eS9vYXV0aDItaW1wbGljaXQtZmxvd1xuICogQHR5cGVkZWYge3tcbiAqICAgdG9rZW46IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgYXV0aENvZGU6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3Q7XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIHJldHJpZXZpbmcgc3Vic2NyaXB0aW9uIHJlcXVlc3RcbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKTooIVByb21pc2U8U2F2ZVN1YnNjcmlwdGlvblJlcXVlc3Q+IHwgIVNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0KX0gU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFja1xuICovXG5leHBvcnQgbGV0IFNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2s7XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gbGFuZzogU2V0cyB0aGUgYnV0dG9uIFNWRyBhbmQgdGl0bGUuIERlZmF1bHQgaXMgXCJlblwiLlxuICogLSB0aGVtZTogXCJsaWdodFwiIG9yIFwiZGFya1wiLiBEZWZhdWx0IGlzIFwibGlnaHRcIi5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICB0aGVtZTogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBsYW5nOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEJ1dHRvbk9wdGlvbnM7XG5cbi8qKlxuICogUHJvcGVydGllczpcbiAqIC0gbGFuZzogU2V0cyB0aGUgYnV0dG9uIFNWRyBhbmQgdGl0bGUuIERlZmF1bHQgaXMgXCJlblwiLlxuICogLSB0aGVtZTogXCJsaWdodFwiIG9yIFwiZGFya1wiLiBEZWZhdWx0IGlzIFwibGlnaHRcIi5cbiAqIC0gbWVzc2FnZVRleHRDb2xvcjogT3ZlcnJpZGVzIHRoZW1lIGNvbG9yIGZvciBtZXNzYWdlIHRleHQuIChleDogXCIjMDlmXCIpXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgdGhlbWU6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgbGFuZzogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBtZXNzYWdlVGV4dENvbG9yOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFNtYXJ0QnV0dG9uT3B0aW9ucztcblxuLyoqXG4gKiBQcm9wZXJ0aWVzOlxuICogLSBza3U6IFJlcXVpcmVkLiBTa3UgdG8gYWRkIHRvIHRoZSB1c2VyJ3Mgc3Vic2NyaXB0aW9ucy5cbiAqIC0gb2xkU2t1OiBPcHRpb25hbC4gVGhpcyBpcyBpZiB5b3Ugd2FudCB0byByZXBsYWNlIG9uZSBza3Ugd2l0aCBhbm90aGVyLiBGb3JcbiAqICBleGFtcGxlLCBpZiBhIHVzZXIgd2FudHMgdG8gdXBncmFkZSBvciBkb3duZ3JhZGUgdGhlaXIgY3VycmVudCBzdWJzY3JpcHRpb24uXG4gKiAtIHByb3JhdGlvbk1vZGU6IE9wdGlvbmFsLiBXaGVuIHJlcGxhY2luZyBhIHN1YnNjcmlwdGlvbiB5b3UgY2FuIGRlY2lkZSBvbiBhXG4gKiAgc3BlY2lmaWMgcHJvcmF0aW9uIG1vZGUgdG8gY2hhcmdlIHRoZSB1c2VyLlxuICogIFRoZSBkZWZhdWx0IGlzIElNTUVESUFURV9XSVRIX1RJTUVfUFJPUkFUSU9OLlxuICogLSBvbmVUaW1lOiBPcHRpb25hbC4gV2hlbiBhIHVzZXIgY2hvb3NlcyBhIGNvbnRyaWJ1dGlvbiwgdGhleSBoYXZlIHRoZSBvcHRpb25cbiAqICB0byBtYWtlIGl0IG5vbi1yZWN1cnJpbmcuXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gKiAgICBza3VJZDogc3RyaW5nLFxuICogICAgb2xkU2t1OiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgICByZXBsYWNlU2t1UHJvcmF0aW9uTW9kZTogKFJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlfHVuZGVmaW5lZCksXG4gKiAgICBvbmVUaW1lOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBTdWJzY3JpcHRpb25SZXF1ZXN0O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJEYXRhIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFRva2VuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZGF0YVxuICAgKi9cbiAgY29uc3RydWN0b3IoaWRUb2tlbiwgZGF0YSkge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmlkVG9rZW4gPSBpZFRva2VuO1xuICAgIC8qKiBAY29uc3QgeyFPYmplY3R9ICovXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcblxuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmlkID0gZGF0YVsnc3ViJ107XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZW1haWwgPSBkYXRhWydlbWFpbCddO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gZGF0YVsnZW1haWxfdmVyaWZpZWQnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5uYW1lID0gZGF0YVsnbmFtZSddO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmdpdmVuTmFtZSA9IGRhdGFbJ2dpdmVuX25hbWUnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5mYW1pbHlOYW1lID0gZGF0YVsnZmFtaWx5X25hbWUnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5waWN0dXJlVXJsID0gZGF0YVsncGljdHVyZSddO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFVc2VyRGF0YX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgVXNlckRhdGEodGhpcy5pZFRva2VuLCB0aGlzLmRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnaWQnOiB0aGlzLmlkLFxuICAgICAgJ2VtYWlsJzogdGhpcy5lbWFpbCxcbiAgICAgICdlbWFpbFZlcmlmaWVkJzogdGhpcy5lbWFpbFZlcmlmaWVkLFxuICAgICAgJ25hbWUnOiB0aGlzLm5hbWUsXG4gICAgICAnZ2l2ZW5OYW1lJzogdGhpcy5naXZlbk5hbWUsXG4gICAgICAnZmFtaWx5TmFtZSc6IHRoaXMuZmFtaWx5TmFtZSxcbiAgICAgICdwaWN0dXJlVXJsJzogdGhpcy5waWN0dXJlVXJsLFxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTkgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7XG4gIEFuYWx5dGljc1JlcXVlc3QsXG4gIEV2ZW50T3JpZ2luYXRvcixcbiAgZGVzZXJpYWxpemUsXG4gIGdldExhYmVsLFxufSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuXG5jb25zdCB7XG4gIEFjdGl2aXR5SWZyYW1lUG9ydDogV2ViQWN0aXZpdHlJZnJhbWVQb3J0LFxuICBBY3Rpdml0eVBvcnRzOiBXZWJBY3Rpdml0eVBvcnRzLFxufSA9IHJlcXVpcmUoJ3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzJyk7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgQWN0aXZpdHlQb3J0RGVmIHtcbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVJlc3VsdD59XG4gICAqL1xuICBhY2NlcHRSZXN1bHQoKSB7fVxufVxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpdml0eVBvcnQgZXh0ZW5kcyBBY3Rpdml0eVBvcnREZWYge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgbW9kZSBvZiB0aGUgYWN0aXZpdHk6IGlmcmFtZSwgcG9wdXAgb3IgcmVkaXJlY3QuXG4gICAqIEByZXR1cm4geyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eU1vZGV9XG4gICAqL1xuICBnZXRNb2RlKCkge31cblxuICAvKipcbiAgICogQWNjZXB0cyB0aGUgcmVzdWx0IHdoZW4gcmVhZHkuIFRoZSBjbGllbnQgc2hvdWxkIHZlcmlmeSB0aGUgYWN0aXZpdHknc1xuICAgKiBtb2RlLCBvcmlnaW4sIHZlcmlmaWNhdGlvbiBhbmQgc2VjdXJlIGNoYW5uZWwgZmxhZ3MgYmVmb3JlIGRlY2lkaW5nXG4gICAqIHdoZXRoZXIgb3Igbm90IHRvIHRydXN0IHRoZSByZXN1bHQuXG4gICAqXG4gICAqIFJldHVybnMgdGhlIHByb21pc2UgdGhhdCB5aWVsZHMgd2hlbiB0aGUgYWN0aXZpdHkgaGFzIGJlZW4gY29tcGxldGVkIGFuZFxuICAgKiBlaXRoZXIgYSByZXN1bHQsIGEgY2FuY2VsYXRpb24gb3IgYSBmYWlsdXJlIGhhcyBiZWVuIHJldHVybmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlSZXN1bHQ+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgeWllbGRzIHdoZW4gdGhlIGlmcmFtZSBpcyByZWFkeSB0byBiZSBpbnRlcmFjdGVkXG4gICAqIHdpdGguXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2hlblJlYWR5KCkge31cblxuICAvKipcbiAgICogV2FpdHMgdW50aWwgdGhlIGFjdGl2aXR5IHBvcnQgaXMgY29ubmVjdGVkIHRvIHRoZSBob3N0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGNvbm5lY3QoKSB7fVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0IHRoZSBhY3Rpdml0eSBiaW5kaW5nIGFuZCBjbGVhbnVwIGxpc3RlbmVycy5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7fVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRvIGhhbmRsZSByZXNpemUgcmVxdWVzdHMuIE9uY2Ugc3VjY2Vzc2Z1bGx5IHJlc2l6ZWQsXG4gICAqIGVuc3VyZSB0byBjYWxsIGByZXNpemVkKClgIG1ldGhvZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIpfSB1bnVzZWRDYWxsYmFja1xuICAgKi9cbiAgb25SZXNpemVSZXF1ZXN0KHVudXNlZENhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZX0gdW51c2VkUmVxdWVzdFxuICAgKi9cbiAgZXhlY3V0ZSh1bnVzZWRSZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFmdW5jdGlvbihuZXc6IFQpfSB1bnVzZWRNZXNzYWdlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0KX0gdW51c2VkQ2FsbGJhY2tcbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIG9uKHVudXNlZE1lc3NhZ2UsIHVudXNlZENhbGxiYWNrKSB7fVxuXG4gIC8qKlxuICAgKiBTaWduYWxzIGJhY2sgdG8gdGhlIGFjdGl2aXR5IGltcGxlbWVudGF0aW9uIHRoYXQgdGhlIGNsaWVudCBoYXMgdXBkYXRlZFxuICAgKiB0aGUgYWN0aXZpdHkncyBzaXplLlxuICAgKi9cbiAgcmVzaXplZCgpIHt9XG59XG4vKipcbiAqIEBpbXBsZW1lbnRzIHtBY3Rpdml0eVBvcnREZWZ9XG4gKi9cbmNsYXNzIEFjdGl2aXR5UG9ydERlcHJlY2F0ZWQge1xuICAvKipcbiAgICogQHBhcmFtIHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0fSBwb3J0XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwb3J0KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydH0gKi9cbiAgICB0aGlzLnBvcnRfID0gcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlSZXN1bHQ+fVxuICAgKi9cbiAgYWNjZXB0UmVzdWx0KCkge1xuICAgIHJldHVybiB0aGlzLnBvcnRfLmFjY2VwdFJlc3VsdCgpO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge0FjdGl2aXR5UG9ydERlZn1cbiAqL1xuZXhwb3J0IGNsYXNzIEFjdGl2aXR5SWZyYW1lUG9ydCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHshLi4vcnVudGltZS9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gYXJnc1xuICAgKi9cbiAgY29uc3RydWN0b3IoaWZyYW1lLCB1cmwsIGRlcHMsIGFyZ3MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlJZnJhbWVQb3J0fSAqL1xuICAgIHRoaXMuaWZyYW1lUG9ydF8gPSBuZXcgV2ViQWN0aXZpdHlJZnJhbWVQb3J0KGlmcmFtZSwgdXJsLCBhcmdzKTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgZnVuY3Rpb24oIS4uL3Byb3RvL2FwaV9tZXNzYWdlcy5NZXNzYWdlKT59ICovXG4gICAgdGhpcy5jYWxsYmFja01hcF8gPSB7fTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgey4uL3J1bnRpbWUvZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgeWllbGRzIHdoZW4gdGhlIGlmcmFtZSBpcyByZWFkeSB0byBiZSBpbnRlcmFjdGVkXG4gICAqIHdpdGguXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2hlblJlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZVBvcnRfLndoZW5SZWFkeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXRzIHVudGlsIHRoZSBhY3Rpdml0eSBwb3J0IGlzIGNvbm5lY3RlZCB0byB0aGUgaG9zdC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZVBvcnRfLmNvbm5lY3QoKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIEF0dGFjaCBhIGNhbGxiYWNrIHRvIHJlY2VpdmUgbWVzc2FnZXMgYWZ0ZXIgY29ubmVjdGlvbiBjb21wbGV0ZVxuICAgICAgdGhpcy5pZnJhbWVQb3J0Xy5vbk1lc3NhZ2UoKGRhdGEpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBkYXRhICYmIGRhdGFbJ1JFU1BPTlNFJ107XG4gICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNhbGxiYWNrTWFwX1tyZXNwb25zZVswXV07XG4gICAgICAgIGlmIChjYikge1xuICAgICAgICAgIGNiKGRlc2VyaWFsaXplKHJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5kZXBzXyAmJiB0aGlzLmRlcHNfLmV2ZW50TWFuYWdlcigpKSB7XG4gICAgICAgIHRoaXMub24oQW5hbHl0aWNzUmVxdWVzdCwgKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICBjb25zdCBhbmFseXRpY3NSZXF1ZXN0ID0gLyoqIEB0eXBlIHtBbmFseXRpY3NSZXF1ZXN0fSAqLyAocmVxdWVzdCk7XG4gICAgICAgICAgdGhpcy5kZXBzXy5ldmVudE1hbmFnZXIoKS5sb2dFdmVudCh7XG4gICAgICAgICAgICBldmVudFR5cGU6IGFuYWx5dGljc1JlcXVlc3QuZ2V0RXZlbnQoKSxcbiAgICAgICAgICAgIGV2ZW50T3JpZ2luYXRvcjogRXZlbnRPcmlnaW5hdG9yLlNXR19TRVJWRVIsXG4gICAgICAgICAgICBpc0Zyb21Vc2VyQWN0aW9uOiBhbmFseXRpY3NSZXF1ZXN0LmdldE1ldGEoKS5nZXRJc0Zyb21Vc2VyQWN0aW9uKCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogYW5hbHl0aWNzUmVxdWVzdC5nZXRQYXJhbXMoKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCB0aGUgYWN0aXZpdHkgYmluZGluZyBhbmQgY2xlYW51cCBsaXN0ZW5lcnMuXG4gICAqL1xuICBkaXNjb25uZWN0KCkge1xuICAgIHRoaXMuaWZyYW1lUG9ydF8uZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1vZGUgb2YgdGhlIGFjdGl2aXR5OiBpZnJhbWUsIHBvcHVwIG9yIHJlZGlyZWN0LlxuICAgKiBAcmV0dXJuIHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlNb2RlfVxuICAgKi9cbiAgZ2V0TW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVQb3J0Xy5nZXRNb2RlKCk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyB0aGUgcmVzdWx0IHdoZW4gcmVhZHkuIFRoZSBjbGllbnQgc2hvdWxkIHZlcmlmeSB0aGUgYWN0aXZpdHknc1xuICAgKiBtb2RlLCBvcmlnaW4sIHZlcmlmaWNhdGlvbiBhbmQgc2VjdXJlIGNoYW5uZWwgZmxhZ3MgYmVmb3JlIGRlY2lkaW5nXG4gICAqIHdoZXRoZXIgb3Igbm90IHRvIHRydXN0IHRoZSByZXN1bHQuXG4gICAqXG4gICAqIFJldHVybnMgdGhlIHByb21pc2UgdGhhdCB5aWVsZHMgd2hlbiB0aGUgYWN0aXZpdHkgaGFzIGJlZW4gY29tcGxldGVkIGFuZFxuICAgKiBlaXRoZXIgYSByZXN1bHQsIGEgY2FuY2VsYXRpb24gb3IgYSBmYWlsdXJlIGhhcyBiZWVuIHJldHVybmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlSZXN1bHQ+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVQb3J0Xy5hY2NlcHRSZXN1bHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRvIGhhbmRsZSByZXNpemUgcmVxdWVzdHMuIE9uY2Ugc3VjY2Vzc2Z1bGx5IHJlc2l6ZWQsXG4gICAqIGVuc3VyZSB0byBjYWxsIGByZXNpemVkKClgIG1ldGhvZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIpfSBjYWxsYmFja1xuICAgKi9cbiAgb25SZXNpemVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lUG9ydF8ub25SZXNpemVSZXF1ZXN0KGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZX0gcmVxdWVzdFxuICAgKi9cbiAgZXhlY3V0ZShyZXF1ZXN0KSB7XG4gICAgdGhpcy5pZnJhbWVQb3J0Xy5tZXNzYWdlKHsnUkVRVUVTVCc6IHJlcXVlc3QudG9BcnJheSgpfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshZnVuY3Rpb24obmV3OiBUKX0gbWVzc2FnZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pfSBjYWxsYmFja1xuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgb24obWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICBsZXQgbGFiZWwgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBsYWJlbCA9IGdldExhYmVsKG1lc3NhZ2UpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAvLyBUaHJvd24gaWYgbWVzc2FnZSBpcyBub3QgYSBwcm90byBvYmplY3QgYW5kIGhhcyBubyBsYWJlbFxuICAgICAgbGFiZWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoIWxhYmVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZGF0YSB0eXBlJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNhbGxiYWNrTWFwX1tsYWJlbF0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0eXBlIG9yIGR1cGxpY2F0ZSBjYWxsYmFjayBmb3IgJywgbGFiZWwpO1xuICAgIH1cbiAgICB0aGlzLmNhbGxiYWNrTWFwX1tsYWJlbF0gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBTaWduYWxzIGJhY2sgdG8gdGhlIGFjdGl2aXR5IGltcGxlbWVudGF0aW9uIHRoYXQgdGhlIGNsaWVudCBoYXMgdXBkYXRlZFxuICAgKiB0aGUgYWN0aXZpdHkncyBzaXplLlxuICAgKi9cbiAgcmVzaXplZCgpIHtcbiAgICB0aGlzLmlmcmFtZVBvcnRfLnJlc2l6ZWQoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQWN0aXZpdHlQb3J0cyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9ydW50aW1lL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBuZXcgV2ViQWN0aXZpdHlQb3J0cyhkZXBzLndpbigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNsaWVudCB2ZXJzaW9uLCBwdWJsaWNhdGlvbiwgcHJvZHVjdCBhbmQgbG9nZ2luZyBjb250ZXh0IGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBhcmdzXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBhZGREZWZhdWx0QXJndW1lbnRzKGFyZ3MpIHtcbiAgICBjb25zdCBkZXBzID0gdGhpcy5kZXBzXztcbiAgICBjb25zdCBwYWdlQ29uZmlnID0gZGVwcy5wYWdlQ29uZmlnKCk7XG4gICAgY29uc3QgY29udGV4dCA9IGRlcHMuYW5hbHl0aWNzKCkuZ2V0Q29udGV4dCgpO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKFxuICAgICAge1xuICAgICAgICAnYW5hbHl0aWNzQ29udGV4dCc6IGNvbnRleHQudG9BcnJheSgpLFxuICAgICAgICAncHVibGljYXRpb25JZCc6IHBhZ2VDb25maWcuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAncHJvZHVjdElkJzogcGFnZUNvbmZpZy5nZXRQcm9kdWN0SWQoKSxcbiAgICAgICAgJ19jbGllbnQnOiAnU3dHICRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCcsXG4gICAgICAgICdzdXBwb3J0c0V2ZW50TWFuYWdlcic6IHRydWUsXG4gICAgICB9LFxuICAgICAgYXJncyB8fCB7fVxuICAgICk7XG4gIH1cblxuICAvKlxuICAgKiBTdGFydCBhbiBhY3Rpdml0eSB3aXRoaW4gdGhlIHNwZWNpZmllZCBpZnJhbWUuXG4gICAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBhcmdzXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgKi9cbiAgb3BlbkFjdGl2aXR5SWZyYW1lUG9ydF8oaWZyYW1lLCB1cmwsIGFyZ3MpIHtcbiAgICBjb25zdCBhY3Rpdml0eVBvcnQgPSBuZXcgQWN0aXZpdHlJZnJhbWVQb3J0KGlmcmFtZSwgdXJsLCB0aGlzLmRlcHNfLCBhcmdzKTtcbiAgICByZXR1cm4gYWN0aXZpdHlQb3J0LmNvbm5lY3QoKS50aGVuKCgpID0+IGFjdGl2aXR5UG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gYWN0aXZpdHkgd2l0aGluIHRoZSBzcGVjaWZpZWQgaWZyYW1lLlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gYXJnc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhZGREZWZhdWx0QXJndW1lbnRzXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgKi9cbiAgb3BlbklmcmFtZShpZnJhbWUsIHVybCwgYXJncywgYWRkRGVmYXVsdEFyZ3VtZW50cyA9IGZhbHNlKSB7XG4gICAgaWYgKGFkZERlZmF1bHRBcmd1bWVudHMpIHtcbiAgICAgIGFyZ3MgPSB0aGlzLmFkZERlZmF1bHRBcmd1bWVudHMoYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wZW5BY3Rpdml0eUlmcmFtZVBvcnRfKGlmcmFtZSwgdXJsLCBhcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhbiBhY3Rpdml0eSBpbiBhIHNlcGFyYXRlIHdpbmRvdy4gVGhlIHJlc3VsdCB3aWxsIGJlIGRlbGl2ZXJlZFxuICAgKiB0byB0aGUgYG9uUmVzdWx0YCBjYWxsYmFjay5cbiAgICpcbiAgICogVGhlIGFjdGl2aXR5IGNhbiBiZSBvcGVuZWQgaW4gdHdvIG1vZGVzOiBcInBvcHVwXCIgYW5kIFwicmVkaXJlY3RcIi4gVGhpc1xuICAgKiBkZXBlbmRzIG9uIHRoZSBgdGFyZ2V0YCB2YWx1ZSwgYnV0IGFsc28gb24gdGhlIGJyb3dzZXIvZW52aXJvbm1lbnQuXG4gICAqXG4gICAqIFRoZSBhbGxvd2VkIGB0YXJnZXRgIHZhbHVlcyBhcmUgYF9ibGFua2AsIGBfdG9wYCBhbmQgbmFtZSB0YXJnZXRzLiBUaGVcbiAgICogYF9zZWxmYCwgYF9wYXJlbnRgIGFuZCBzaW1pbGFyIHRhcmdldHMgYXJlIG5vdCBhbGxvd2VkLlxuICAgKlxuICAgKiBUaGUgYF90b3BgIHRhcmdldCBpbmRpY2F0ZXMgdGhhdCB0aGUgYWN0aXZpdHkgc2hvdWxkIGJlIG9wZW5lZCBhcyBhXG4gICAqIFwicmVkaXJlY3RcIiwgd2hpbGUgb3RoZXIgdGFyZ2V0cyBpbmRpY2F0ZSB0aGF0IHRoZSBhY3Rpdml0eSBzaG91bGQgYmVcbiAgICogb3BlbmVkIGFzIGEgcG9wdXAuIFRoZSBhY3Rpdml0eSBjbGllbnQgd2lsbCB0cnkgdG8gaG9ub3IgdGhlIHJlcXVlc3RlZFxuICAgKiB0YXJnZXQuIEhvd2V2ZXIsIGl0J3Mgbm90IGFsd2F5cyBwb3NzaWJsZS4gU29tZSBlbnZpcm9ubWVudHMgZG8gbm90XG4gICAqIGFsbG93IHBvcHVwcyBhbmQgdGhleSBlaXRoZXIgZm9yY2UgcmVkaXJlY3Qgb3IgZmFpbCB0aGUgd2luZG93IG9wZW5cbiAgICogcmVxdWVzdC4gSW4gdGhpcyBjYXNlLCB0aGUgYWN0aXZpdHkgd2lsbCB0cnkgdG8gZmFsbGJhY2sgdG8gdGhlIFwicmVkaXJlY3RcIlxuICAgKiBtb2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBhcmdzXG4gICAqIEBwYXJhbSB7P3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5T3Blbk9wdGlvbnM9fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGFkZERlZmF1bHRBcmd1bWVudHNcbiAgICogQHJldHVybiB7e3RhcmdldFdpbjogP1dpbmRvd319XG4gICAqL1xuICBvcGVuKHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIGFyZ3MsIG9wdGlvbnMsIGFkZERlZmF1bHRBcmd1bWVudHMgPSBmYWxzZSkge1xuICAgIGlmIChhZGREZWZhdWx0QXJndW1lbnRzKSB7XG4gICAgICBhcmdzID0gdGhpcy5hZGREZWZhdWx0QXJndW1lbnRzKGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eVBvcnRzXy5vcGVuKHJlcXVlc3RJZCwgdXJsLCB0YXJnZXQsIGFyZ3MsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgY2FsbGJhY2sgZm9yIHRoZSByZXN1bHQgb2YgdGhlIGFjdGl2aXR5IG9wZW5lZCB3aXRoIHRoZVxuICAgKiBzcGVjaWZpZWQgYHJlcXVlc3RJZGAgKHNlZSB0aGUgYG9wZW4oKWAgbWV0aG9kKS4gVGhlIGNhbGxiYWNrIGlzIGFcbiAgICogZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNpbmdsZSBgQWN0aXZpdHlQb3J0YCBhcmd1bWVudC4gVGhlIGNsaWVudFxuICAgKiBjYW4gdXNlIHRoaXMgb2JqZWN0IHRvIHZlcmlmeSB0aGUgcG9ydCB1c2luZyBpdCdzIG9yaWdpbiwgdmVyaWZpZWQgYW5kXG4gICAqIHNlY3VyZSBjaGFubmVsIGZsYWdzLiBUaGVuIHRoZSBjbGllbnQgY2FuIGNhbGxcbiAgICogYEFjdGl2aXR5UG9ydC5hY2NlcHRSZXN1bHQoKWAgbWV0aG9kIHRvIGFjY2VwdCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBUaGUgYWN0aXZpdHkgcmVzdWx0IGlzIGhhbmRsZWQgdmlhIGEgc2VwYXJhdGUgY2FsbGJhY2sgYmVjYXVzZSBvZiBhXG4gICAqIHBvc3NpYmxlIHJlZGlyZWN0LiBTbyB1c2Ugb2YgZGlyZWN0IGNhbGxiYWNrcyBhbmQvb3IgcHJvbWlzZXMgaXMgbm90XG4gICAqIHBvc3NpYmxlIGluIHRoYXQgY2FzZS5cbiAgICpcbiAgICogQSB0eXBpY2FsIGltcGxlbWVudGF0aW9uIHdvdWxkIGxvb2sgbGlrZTpcbiAgICogYGBgXG4gICAqIHBvcnRzLm9uUmVzdWx0KCdyZXF1ZXN0MScsIGZ1bmN0aW9uKHBvcnQpIHtcbiAgICogICBwb3J0LmFjY2VwdFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAqICAgICAvLyBPbmx5IHZlcmlmaWVkIG9yaWdpbnMgYXJlIGFsbG93ZWQuXG4gICAqICAgICBpZiAocmVzdWx0Lm9yaWdpbiA9PSBleHBlY3RlZE9yaWdpbiAmJlxuICAgKiAgICAgICAgIHJlc3VsdC5vcmlnaW5WZXJpZmllZCAmJlxuICAgKiAgICAgICAgIHJlc3VsdC5zZWN1cmVDaGFubmVsKSB7XG4gICAqICAgICAgIGhhbmRsZVJlc3VsdEZvclJlcXVlc3QxKHJlc3VsdCk7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqIH0pXG4gICAqXG4gICAqIHBvcnRzLm9wZW4oJ3JlcXVlc3QxJywgcmVxdWVzdDFVcmwsICdfYmxhbmsnKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbighQWN0aXZpdHlQb3J0RGVmKX0gY2FsbGJhY2tcbiAgICovXG4gIG9uUmVzdWx0KHJlcXVlc3RJZCwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLm9uUmVzdWx0KHJlcXVlc3RJZCwgKHBvcnQpID0+IHtcbiAgICAgIGNhbGxiYWNrKG5ldyBBY3Rpdml0eVBvcnREZXByZWNhdGVkKHBvcnQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFcnJvcil9IGhhbmRsZXJcbiAgICovXG4gIG9uUmVkaXJlY3RFcnJvcihoYW5kbGVyKSB7XG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXy5vblJlZGlyZWN0RXJyb3IoaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9XG4gICAqL1xuICBnZXRPcmlnaW5hbFdlYkFjdGl2aXR5UG9ydHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlQb3J0c187XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtEaWFsb2d9IGZyb20gJy4vZGlhbG9nJztcbmltcG9ydCB7R3JheXBhbmV9IGZyb20gJy4vZ3JheXBhbmUnO1xuaW1wb3J0IHtpc0NhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuXG5jb25zdCBQT1BVUF9aX0lOREVYID0gMjE0NzQ4MzY0NztcblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIHRoZSB0b3AgbGV2ZWwgZGlhbG9nLlxuICogQGZpbmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBEaWFsb2dNYW5hZ2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RGlhbG9nfSAqL1xuICAgIHRoaXMuZGlhbG9nXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPCFEaWFsb2c+fSAqL1xuICAgIHRoaXMub3BlblByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFHcmF5cGFuZX0gKi9cbiAgICB0aGlzLnBvcHVwR3JheXBhbmVfID0gbmV3IEdyYXlwYW5lKGRvYywgUE9QVVBfWl9JTkRFWCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9XaW5kb3d9ICovXG4gICAgdGhpcy5wb3B1cFdpbl8gPSBudWxsO1xuXG4gICAgdGhpcy5wb3B1cEdyYXlwYW5lXy5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wb3B1cFdpbl8pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnBvcHVwV2luXy5mb2N1cygpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaGlkZGVuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFEaWFsb2c+fVxuICAgKi9cbiAgb3BlbkRpYWxvZyhoaWRkZW4gPSBmYWxzZSkge1xuICAgIGlmICghdGhpcy5vcGVuUHJvbWlzZV8pIHtcbiAgICAgIHRoaXMuZGlhbG9nXyA9IG5ldyBEaWFsb2codGhpcy5kb2NfKTtcbiAgICAgIHRoaXMub3BlblByb21pc2VfID0gdGhpcy5kaWFsb2dfLm9wZW4oaGlkZGVuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3BlblByb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vdmlldy5WaWV3fSB2aWV3XG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGhpZGRlblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIG9wZW5WaWV3KHZpZXcsIGhpZGRlbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5oYW5kbGVDYW5jZWxsYXRpb25zKHZpZXcpO1xuICAgIHJldHVybiB0aGlzLm9wZW5EaWFsb2coaGlkZGVuKS50aGVuKChkaWFsb2cpID0+IGRpYWxvZy5vcGVuVmlldyh2aWV3KSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBjYW5jZWxsYXRpb25zIChleDogdXNlciBjbGlja3MgY2xvc2UgYnV0dG9uIG9uIGRpYWxvZykuXG4gICAqIEBwYXJhbSB7IS4vdmlldy5WaWV3fSB2aWV3XG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgaGFuZGxlQ2FuY2VsbGF0aW9ucyh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcud2hlbkNvbXBsZXRlKCkuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgaWYgKGlzQ2FuY2VsRXJyb3IocmVhc29uKSkge1xuICAgICAgICB0aGlzLmNvbXBsZXRlVmlldyh2aWV3KTtcbiAgICAgIH1cbiAgICAgIHRocm93IHJlYXNvbjtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez8uL3ZpZXcuVmlld30gdmlld1xuICAgKi9cbiAgY29tcGxldGVWaWV3KHZpZXcpIHtcbiAgICAvLyBHaXZlIGEgc21hbGwgYW1vdW50IG9mIHRpbWUgZm9yIGFub3RoZXIgdmlldyB0byB0YWtlIG92ZXIgdGhlIGRpYWxvZy5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmRpYWxvZ18gJiYgdGhpcy5kaWFsb2dfLmdldEN1cnJlbnRWaWV3KCkgPT0gdmlldykge1xuICAgICAgICB0aGlzLmNsb3NlXygpO1xuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICAvKipcbiAgICovXG4gIGNvbXBsZXRlQWxsKCkge1xuICAgIGlmICh0aGlzLmRpYWxvZ18pIHtcbiAgICAgIHRoaXMuY2xvc2VfKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnBvcHVwR3JheXBhbmVfLmlzQXR0YWNoZWQoKSkge1xuICAgICAgdGhpcy5wb3B1cEdyYXlwYW5lXy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHs/RGlhbG9nfVxuICAgKi9cbiAgZ2V0RGlhbG9nKCkge1xuICAgIHJldHVybiB0aGlzLmRpYWxvZ187XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgY2xvc2VfKCkge1xuICAgIHRoaXMuZGlhbG9nXy5jbG9zZSgpO1xuICAgIHRoaXMuZGlhbG9nXyA9IG51bGw7XG4gICAgdGhpcy5vcGVuUHJvbWlzZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P1dpbmRvd3x1bmRlZmluZWR9IHRhcmdldFdpblxuICAgKi9cbiAgcG9wdXBPcGVuZWQodGFyZ2V0V2luKSB7XG4gICAgdGhpcy5wb3B1cFdpbl8gPSB0YXJnZXRXaW4gfHwgbnVsbDtcbiAgICBpZiAoIXRoaXMucG9wdXBHcmF5cGFuZV8uaXNBdHRhY2hlZCgpKSB7XG4gICAgICB0aGlzLnBvcHVwR3JheXBhbmVfLmF0dGFjaCgpO1xuICAgIH1cbiAgICB0aGlzLnBvcHVwR3JheXBhbmVfLnNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgcG9wdXBDbG9zZWQoKSB7XG4gICAgdGhpcy5wb3B1cFdpbl8gPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnBvcHVwR3JheXBhbmVfLmhpZGUoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUuXG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q1NTIGFzIERJQUxPR19DU1N9IGZyb20gJy4uLy4uL2J1aWxkL2Nzcy91aS91aS5jc3MnO1xuaW1wb3J0IHtGcmllbmRseUlmcmFtZX0gZnJvbSAnLi9mcmllbmRseS1pZnJhbWUnO1xuaW1wb3J0IHtHcmF5cGFuZX0gZnJvbSAnLi9ncmF5cGFuZSc7XG5pbXBvcnQge0xvYWRpbmdWaWV3fSBmcm9tICcuLi91aS9sb2FkaW5nLXZpZXcnO1xuaW1wb3J0IHtcbiAgY3JlYXRlRWxlbWVudCxcbiAgaW5qZWN0U3R5bGVTaGVldCxcbiAgcmVtb3ZlQ2hpbGRyZW4sXG4gIHJlbW92ZUVsZW1lbnQsXG59IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge3Jlc29sdmVEb2N9IGZyb20gJy4uL21vZGVsL2RvYyc7XG5pbXBvcnQge3NldEltcG9ydGFudFN0eWxlcywgc2V0U3R5bGVzfSBmcm9tICcuLi91dGlscy9zdHlsZSc7XG5pbXBvcnQge3RyYW5zaXRpb259IGZyb20gJy4uL3V0aWxzL2FuaW1hdGlvbic7XG5cbmNvbnN0IFpfSU5ERVggPSAyMTQ3NDgzNjQ3O1xuXG4vKipcbiAqIERlZmF1bHQgaWZyYW1lIGltcG9ydGFudCBzdHlsZXMuXG4gKiBOb3RlOiBUaGUgaWZyYW1lIHJlc3BvbnNpdmVuZXNzIG1lZGlhIHF1ZXJ5IHN0eWxlIGlzIGluamVjdGVkIGluIHRoZVxuICogcHVibGlzaGVyJ3MgcGFnZSBzaW5jZSBzdHlsZSBhdHRyaWJ1dGUgY2FuIG5vdCBpbmNsdWRlIG1lZGlhIHF1ZXJ5LlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59XG4gKi9cbmNvbnN0IHJvb3RFbGVtZW50SW1wb3J0YW50U3R5bGVzID0ge1xuICAnbWluLWhlaWdodCc6ICc1MHB4JyxcbiAgJ2JvcmRlcic6ICdub25lJyxcbiAgJ2Rpc3BsYXknOiAnYmxvY2snLFxuICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAnei1pbmRleCc6IFpfSU5ERVgsXG4gICdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLFxufTtcblxuLyoqXG4gKiBSZXNldCB2aWV3IHN0eWxlcy5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+fVxuICovXG5jb25zdCByZXNldFZpZXdTdHlsZXMgPSB7XG4gICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICd0b3AnOiAnMCcsXG4gICdsZWZ0JzogJzAnLFxuICAncmlnaHQnOiAnMCcsXG4gICdib3R0b20nOiAnMCcsXG4gICdvcGFjaXR5JzogMCxcbiAgLyogVGhlc2UgbGluZXMgYXJlIGEgd29yayBhcm91bmQgdG8gdGhpcyBpc3N1ZSBpbiBpT1M6ICAgICAqL1xuICAvKiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU1MTk4ICAgICAgICAgICovXG4gICdoZWlnaHQnOiAwLFxuICAnbWF4LWhlaWdodCc6ICcxMDAlJyxcbiAgJ21heC13aWR0aCc6ICcxMDAlJyxcbiAgJ21pbi1oZWlnaHQnOiAnMTAwJScsXG4gICdtaW4td2lkdGgnOiAnMTAwJScsXG4gICd3aWR0aCc6IDAsXG59O1xuXG4vKipcbiAqIFBvc2l0aW9uIG9mIHRoZSBkaWFsb2cuXG4gKiBAY29uc3QgQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgUG9zaXRpb25BdCA9IHtcbiAgQk9UVE9NOiAnQk9UVE9NJyxcbiAgVE9QOiAnVE9QJyxcbiAgRkxPQVQ6ICdGTE9BVCcsXG4gIEZVTEw6ICdGVUxMJyxcbn07XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciB0aGUgdG9wIGxldmVsIGRpYWxvZy5cbiAqIEBmaW5hbFxuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRpYWxvZyBmb3IgdGhlIHByb3ZpZGVkIGRvYy5cbiAgICogQHBhcmFtIHshLi4vbW9kZWwvZG9jLkRvY30gZG9jXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gaW1wb3J0YW50U3R5bGVzXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gc3R5bGVzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MsIGltcG9ydGFudFN0eWxlcyA9IHt9LCBzdHlsZXMgPSB7fSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFGcmllbmRseUlmcmFtZX0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSBuZXcgRnJpZW5kbHlJZnJhbWUoZG9jLmdldFdpbigpLmRvY3VtZW50LCB7XG4gICAgICAnY2xhc3MnOiAnc3dnLWRpYWxvZycsXG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshR3JheXBhbmV9ICovXG4gICAgdGhpcy5ncmF5cGFuZV8gPSBuZXcgR3JheXBhbmUoZG9jLCBaX0lOREVYIC0gMSk7XG5cbiAgICBjb25zdCBtb2RpZmllZEltcG9ydGFudFN0eWxlcyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7fSxcbiAgICAgIHJvb3RFbGVtZW50SW1wb3J0YW50U3R5bGVzLFxuICAgICAgaW1wb3J0YW50U3R5bGVzXG4gICAgKTtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5pZnJhbWVfLmdldEVsZW1lbnQoKSwgbW9kaWZpZWRJbXBvcnRhbnRTdHlsZXMpO1xuXG4gICAgc2V0U3R5bGVzKHRoaXMuaWZyYW1lXy5nZXRFbGVtZW50KCksIHN0eWxlcyk7XG5cbiAgICAvKiogQHByaXZhdGUge0xvYWRpbmdWaWV3fSAqL1xuICAgIHRoaXMubG9hZGluZ1ZpZXdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5jb250YWluZXJfID0gbnVsbDsgLy8gRGVwZW5kcyBvbiBjb25zdHJ1Y3RlZCBkb2N1bWVudCBpbnNpZGUgaWZyYW1lLlxuXG4gICAgLyoqIEBwcml2YXRlIHs/Li92aWV3LlZpZXd9ICovXG4gICAgdGhpcy52aWV3XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMuYW5pbWF0aW5nXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5oaWRkZW5fID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez8uL3ZpZXcuVmlld30gKi9cbiAgICB0aGlzLnByZXZpb3VzUHJvZ3Jlc3NWaWV3XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy51c2VGaXhlZExheWVyXyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBkaWFsb2cgYW5kIGJ1aWxkcyB0aGUgaWZyYW1lIGNvbnRhaW5lci5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gaGlkZGVuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFEaWFsb2c+fVxuICAgKi9cbiAgb3BlbihoaWRkZW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lXztcbiAgICBpZiAoaWZyYW1lLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYWxyZWFkeSBvcGVuZWQnKTtcbiAgICB9XG5cbiAgICAvLyBBdHRhY2guXG4gICAgdGhpcy5kb2NfLmdldEJvZHkoKS5hcHBlbmRDaGlsZChpZnJhbWUuZ2V0RWxlbWVudCgpKTsgLy8gRmlyZXMgb25sb2FkLlxuXG4gICAgdGhpcy5ncmF5cGFuZV8uYXR0YWNoKCk7XG5cbiAgICBpZiAoaGlkZGVuKSB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoaWZyYW1lLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAndmlzaWJpbGl0eSc6ICdoaWRkZW4nLFxuICAgICAgICAnb3BhY2l0eSc6IDAsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuaGlkZGVuXyA9IGhpZGRlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zaG93XygpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVzZUZpeGVkTGF5ZXJfKSB7XG4gICAgICByZXR1cm4gdGhpcy5kb2NfXG4gICAgICAgIC5hZGRUb0ZpeGVkTGF5ZXIoaWZyYW1lLmdldEVsZW1lbnQoKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gaWZyYW1lLndoZW5SZWFkeSgpKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5idWlsZElmcmFtZV8oKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpZnJhbWUud2hlblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuYnVpbGRJZnJhbWVfKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIHRoZSBpZnJhbWUgd2l0aCB0aGUgc3R5bGluZyBhZnRlciBpZnJhbWUgaXMgbG9hZGVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYnVpbGRJZnJhbWVfKCkge1xuICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lXztcbiAgICBjb25zdCBpZnJhbWVCb2R5ID0gaWZyYW1lLmdldEJvZHkoKTtcbiAgICBjb25zdCBpZnJhbWVEb2MgPSAvKiogQHR5cGUgeyFIVE1MRG9jdW1lbnR9ICovICh0aGlzLmlmcmFtZV8uZ2V0RG9jdW1lbnQoKSk7XG5cbiAgICAvLyBJbmplY3QgR29vZ2xlIGZvbnRzIGluIDxIRUFEPiBzZWN0aW9uIG9mIHRoZSBpZnJhbWUuXG4gICAgaW5qZWN0U3R5bGVTaGVldChyZXNvbHZlRG9jKGlmcmFtZURvYyksIERJQUxPR19DU1MpO1xuXG4gICAgLy8gQWRkIExvYWRpbmcgaW5kaWNhdG9yLlxuICAgIHRoaXMubG9hZGluZ1ZpZXdfID0gbmV3IExvYWRpbmdWaWV3KGlmcmFtZURvYyk7XG4gICAgaWZyYW1lQm9keS5hcHBlbmRDaGlsZCh0aGlzLmxvYWRpbmdWaWV3Xy5nZXRFbGVtZW50KCkpO1xuXG4gICAgLy8gQ29udGFpbmVyIGZvciBhbGwgZHluYW1pYyBjb250ZW50LCBpbmNsdWRpbmcgM1AgaWZyYW1lLlxuICAgIHRoaXMuY29udGFpbmVyXyA9IGNyZWF0ZUVsZW1lbnQoaWZyYW1lRG9jLCAnc3dnLWNvbnRhaW5lcicsIHt9KTtcbiAgICBpZnJhbWVCb2R5LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyXyk7XG4gICAgdGhpcy5zZXRQb3NpdGlvbl8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGRpYWxvZy5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjbG9zZShhbmltYXRlZCA9IHRydWUpIHtcbiAgICBsZXQgYW5pbWF0aW5nO1xuICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgYW5pbWF0aW5nID0gdGhpcy5hbmltYXRlXygoKSA9PiB7XG4gICAgICAgIHRoaXMuZ3JheXBhbmVfLmhpZGUoLyogYW5pbWF0ZSAqLyB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zaXRpb24oXG4gICAgICAgICAgdGhpcy5nZXRFbGVtZW50KCksXG4gICAgICAgICAge1xuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKDEwMCUpJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIDMwMCxcbiAgICAgICAgICAnZWFzZS1vdXQnXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYW5pbWF0aW5nID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiBhbmltYXRpbmcudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBpZnJhbWVFbCA9IHRoaXMuaWZyYW1lXy5nZXRFbGVtZW50KCk7XG4gICAgICBpZnJhbWVFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZUVsKTtcblxuICAgICAgdGhpcy5yZW1vdmVQYWRkaW5nVG9IdG1sXygpO1xuICAgICAgdGhpcy5ncmF5cGFuZV8uZGVzdHJveSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvbnRhaW5lciB3aXRoaW4gdGhlIGRpYWxvZy5cbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBnZXRDb250YWluZXIoKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcl8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IG9wZW5lZCB5ZXQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhdHRhY2hlZCBpZnJhbWUgaW5zdGFuY2UuXG4gICAqIEByZXR1cm4geyFGcmllbmRseUlmcmFtZX1cbiAgICovXG4gIGdldElmcmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIElmcmFtZSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHshSFRNTElGcmFtZUVsZW1lbnR9XG4gICAqL1xuICBnZXRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZV8uZ2V0RWxlbWVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIExvYWRpbmdWaWV3IGZvciB0aGlzIGRpYWxvZy5cbiAgICogQHJldHVybiB7TG9hZGluZ1ZpZXd9XG4gICAqL1xuICBnZXRMb2FkaW5nVmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkaW5nVmlld187XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNpdGlvbnMgdG8gdGhlIG5leHQgdmlldy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVudHJ5VHJhbnNpdGlvblRvTmV4dFZpZXdfKCkge1xuICAgIGlmICh0aGlzLnZpZXdfICYmIHRoaXMudmlld18uaGFzTG9hZGluZ0luZGljYXRvcigpKSB7XG4gICAgICAvLyBUZW1wb3JhcmlseSBjYWNoZSB0aGUgb2xkIHZpZXcuXG4gICAgICB0aGlzLnByZXZpb3VzUHJvZ3Jlc3NWaWV3XyA9IHRoaXMudmlld187XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpbmNlIGxvYWRpbmcgaW5kaWNhdG9yIHdpbGwgYmUgc2hvd24sIHJlbW92ZSBjb250ZW50cyBvZiBvbGQgdmlldy5cbiAgICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMuZ2V0Q29udGFpbmVyKCkpO1xuICAgICAgLy8gV2hlbiBsb2FkaW5nIGluZGljYXRvciB3YXMgbm90IGRpc3BsYXllZCBpbiB0aGUgcHJldmlvdXMgdmlldyxcbiAgICAgIC8vIGxvYWRpbmcgaW5kaWNhdG9yIG11c3QgYmUgZGlzcGxheWVkIHdoaWxlIHRyYW5zaXRpb25pbmcgdG8gbmV3IHZpZXcuXG4gICAgICB0aGlzLmxvYWRpbmdWaWV3Xy5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zaXRpb24gb3V0IG9mIGFuIG9sZCB2aWV3LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhpdFRyYW5zaXRpb25Gcm9tT2xkVmlld18oKSB7XG4gICAgLy8gSWYgcHJldmlvdXMgdmlldyBpcyBzdGlsbCBhcm91bmQsIHJlbW92ZSBpdC5cbiAgICBpZiAodGhpcy5wcmV2aW91c1Byb2dyZXNzVmlld18pIHtcbiAgICAgIHJlbW92ZUVsZW1lbnQodGhpcy5wcmV2aW91c1Byb2dyZXNzVmlld18uZ2V0RWxlbWVudCgpKTtcbiAgICAgIHRoaXMucHJldmlvdXNQcm9ncmVzc1ZpZXdfID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2FkaW5nVmlld18uaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHs/Li92aWV3LlZpZXd9ICovXG4gIGdldEN1cnJlbnRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBnaXZlbiB2aWV3IGFuZCByZW1vdmVzIGV4aXN0aW5nIHZpZXcgZnJvbSB0aGUgRE9NIGlmIGFueS5cbiAgICogQHBhcmFtIHshLi92aWV3LlZpZXd9IHZpZXdcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvcGVuVmlldyh2aWV3KSB7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHZpZXcuZ2V0RWxlbWVudCgpLCByZXNldFZpZXdTdHlsZXMpO1xuICAgIHRoaXMuZW50cnlUcmFuc2l0aW9uVG9OZXh0Vmlld18oKTtcblxuICAgIHRoaXMudmlld18gPSB2aWV3O1xuICAgIHRoaXMuZ2V0Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodmlldy5nZXRFbGVtZW50KCkpO1xuXG4gICAgLy8gSWYgdGhlIGN1cnJlbnQgdmlldyBzaG91bGQgZmFkZSB0aGUgcGFyZW50IGRvY3VtZW50LlxuICAgIGlmICh2aWV3LnNob3VsZEZhZGVCb2R5KCkgJiYgIXRoaXMuaGlkZGVuXykge1xuICAgICAgdGhpcy5ncmF5cGFuZV8uc2hvdygvKiBhbmltYXRlICovIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3LmluaXQodGhpcykudGhlbigoKSA9PiB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXModmlldy5nZXRFbGVtZW50KCksIHtcbiAgICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5oaWRkZW5fKSB7XG4gICAgICAgIGlmICh2aWV3LnNob3VsZEZhZGVCb2R5KCkpIHtcbiAgICAgICAgICB0aGlzLmdyYXlwYW5lXy5zaG93KC8qIGFuaW1hdGVkICovIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvd18oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhpdFRyYW5zaXRpb25Gcm9tT2xkVmlld18oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBpZnJhbWUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzaG93XygpIHtcbiAgICB0aGlzLmFuaW1hdGVfKCgpID0+IHtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICAnb3BhY3RpeSc6IDEsXG4gICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCksXG4gICAgICAgIHtcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgICAgfSxcbiAgICAgICAgMzAwLFxuICAgICAgICAnZWFzZS1vdXQnXG4gICAgICApO1xuICAgIH0pO1xuICAgIHRoaXMuaGlkZGVuXyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIGRpYWxvZyBjb250YWluZXIuXG4gICAqIEBwYXJhbSB7IS4vdmlldy5WaWV3fSB2aWV3XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7P1Byb21pc2V9XG4gICAqL1xuICByZXNpemVWaWV3KHZpZXcsIGhlaWdodCwgYW5pbWF0ZWQgPSB0cnVlKSB7XG4gICAgaWYgKHRoaXMudmlld18gIT0gdmlldykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5ld0hlaWdodCA9IHRoaXMuZ2V0TWF4QWxsb3dlZEhlaWdodF8oaGVpZ2h0KTtcblxuICAgIGxldCBhbmltYXRpbmc7XG4gICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICBjb25zdCBvbGRIZWlnaHQgPSB0aGlzLmdldEVsZW1lbnQoKS5vZmZzZXRIZWlnaHQ7XG4gICAgICBpZiAobmV3SGVpZ2h0ID49IG9sZEhlaWdodCkge1xuICAgICAgICAvLyBFeHBhbmQuXG4gICAgICAgIGFuaW1hdGluZyA9IHRoaXMuYW5pbWF0ZV8oKCkgPT4ge1xuICAgICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAgICAgJ2hlaWdodCc6IGAke25ld0hlaWdodH1weGAsXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZVkoJHtuZXdIZWlnaHQgLSBvbGRIZWlnaHR9cHgpYCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDMwMCxcbiAgICAgICAgICAgICdlYXNlLW91dCdcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENvbGxhcHNlLlxuICAgICAgICBhbmltYXRpbmcgPSB0aGlzLmFuaW1hdGVfKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZVkoJHtvbGRIZWlnaHQgLSBuZXdIZWlnaHR9cHgpYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAzMDAsXG4gICAgICAgICAgICAnZWFzZS1vdXQnXG4gICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAgICAgICAnaGVpZ2h0JzogYCR7bmV3SGVpZ2h0fXB4YCxcbiAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKDApJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICdoZWlnaHQnOiBgJHtuZXdIZWlnaHR9cHhgLFxuICAgICAgfSk7XG4gICAgICBhbmltYXRpbmcgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuaW1hdGluZy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlUGFkZGluZ1RvSHRtbF8oaGVpZ2h0KTtcbiAgICAgIHZpZXcucmVzaXplZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhbmltYXRlXyhjYWxsYmFjaykge1xuICAgIGNvbnN0IHdhaXQgPSB0aGlzLmFuaW1hdGluZ18gfHwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgcmV0dXJuICh0aGlzLmFuaW1hdGluZ18gPSB3YWl0XG4gICAgICAudGhlbihcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9ycyB0byBtYWtlIHN1cmUgYW5pbWF0aW9ucyBkb24ndCBnZXQgc3R1Y2suXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5hbmltYXRpbmdfID0gbnVsbDtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1heGltdW0gYWxsb3dlZCBoZWlnaHQgZm9yIGN1cnJlbnQgdmlld3BvcnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TWF4QWxsb3dlZEhlaWdodF8oaGVpZ2h0KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKGhlaWdodCwgdGhpcy5kb2NfLmdldFdpbigpLi8qT0sqLyBpbm5lckhlaWdodCAqIDAuOSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZWxlbWVudCdzIGhlaWdodC5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0SGVpZ2h0XygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KCkub2Zmc2V0SGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBkaWFsb2cuIEN1cnJlbnRseSAnQk9UVE9NJyBpcyBzZXQgYnkgZGVmYXVsdC5cbiAgICovXG4gIHNldFBvc2l0aW9uXygpIHtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5nZXRFbGVtZW50KCksIHRoaXMuZ2V0UG9zaXRpb25TdHlsZV8oKSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRoZSBwYWRkaW5nIHRvIHRoZSBjb250YWluaW5nIHBhZ2Ugc28gYXMgdG8gbm90IGhpZGUgdGhlIGNvbnRlbnRcbiAgICogYmVoaW5kIHRoZSBwb3B1cCwgaWYgcmVuZGVyZWQgYXQgdGhlIGJvdHRvbS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG5ld0hlaWdodFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlUGFkZGluZ1RvSHRtbF8obmV3SGVpZ2h0KSB7XG4gICAgaWYgKHRoaXMuaW5mZXJQb3NpdGlvbl8oKSA9PSBQb3NpdGlvbkF0LkJPVFRPTSkge1xuICAgICAgY29uc3QgYm90dG9tUGFkZGluZyA9IG5ld0hlaWdodCArIDIwOyAvLyBBZGQgc29tZSBleHRyYSBwYWRkaW5nLlxuICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSB0aGlzLmRvY18uZ2V0Um9vdEVsZW1lbnQoKTtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhodG1sRWxlbWVudCwge1xuICAgICAgICAncGFkZGluZy1ib3R0b20nOiBgJHtib3R0b21QYWRkaW5nfXB4YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHByZXZpb3VseSBhZGRlZCBib3R0b20gcGFkZGluZyBmcm9tIHRoZSBkb2N1bWVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZVBhZGRpbmdUb0h0bWxfKCkge1xuICAgIHRoaXMuZG9jXy5nZXRSb290RWxlbWVudCgpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBkaWFsb2cuIEN1cnJlbnRseSBkaWFsb2cgaXMgcG9zaXRpb25lZCBhdFxuICAgKiB0aGUgYm90dG9tIG9ubHkuIFRoaXMgY291bGQgY2hhbmdlIGluIGZ1dHVyZSB0byBhZGp1c3QgdGhlIGRpYWxvZyBwb3NpdGlvblxuICAgKiBiYXNlZCBvbiB0aGUgc2NyZWVuIHNpemUuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluZmVyUG9zaXRpb25fKCkge1xuICAgIHJldHVybiBQb3NpdGlvbkF0LkJPVFRPTTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdHlsZXMgcmVxdWlyZWQgdG8gcG9zdGlvbiB0aGUgZGlhbG9nLlxuICAgKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRQb3NpdGlvblN0eWxlXygpIHtcbiAgICBjb25zdCBkaWFsb2dQb3NpdGlvbiA9IHRoaXMuaW5mZXJQb3NpdGlvbl8oKTtcbiAgICBzd2l0Y2ggKGRpYWxvZ1Bvc2l0aW9uKSB7XG4gICAgICBjYXNlIFBvc2l0aW9uQXQuQk9UVE9NOlxuICAgICAgICByZXR1cm4geydib3R0b20nOiAwfTtcbiAgICAgIGNhc2UgUG9zaXRpb25BdC5UT1A6XG4gICAgICAgIHJldHVybiB7J3RvcCc6IDB9O1xuICAgICAgY2FzZSBQb3NpdGlvbkF0LkZMT0FUOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgICAgICAgJ3RvcCc6ICc1MCUnLFxuICAgICAgICAgICdsZWZ0JzogJzUwJScsXG4gICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknLFxuICAgICAgICB9O1xuICAgICAgY2FzZSBQb3NpdGlvbkF0LkZVTEw6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnLFxuICAgICAgICAgICd0b3AnOiAwLFxuICAgICAgICAgICdib3R0b20nOiAwLFxuICAgICAgICB9O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHsnYm90dG9tJzogMH07XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRWxlbWVudCwgaXNDb25uZWN0ZWR9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge3Jlc2V0QWxsU3R5bGVzfSBmcm9tICcuLi91dGlscy9zdHlsZSc7XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nfG51bWJlcj59ICovXG5jb25zdCBmcmllbmRseUlmcmFtZUF0dHJpYnV0ZXMgPSB7XG4gICdmcmFtZWJvcmRlcic6IDAsXG4gICdzY3JvbGxpbmcnOiAnbm8nLFxuICAnc3JjJzogJ2Fib3V0OmJsYW5rJyxcbn07XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBidWlsZGluZyBmcmllbmRseSBpZnJhbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBGcmllbmRseUlmcmFtZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gYXR0cnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYywgYXR0cnMgPSB7fSkge1xuICAgIGNvbnN0IG1lcmdlZEF0dHJzID0gT2JqZWN0LmFzc2lnbih7fSwgZnJpZW5kbHlJZnJhbWVBdHRyaWJ1dGVzLCBhdHRycyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gLyoqIEB0eXBlIHshSFRNTElGcmFtZUVsZW1lbnR9ICovIChjcmVhdGVFbGVtZW50KFxuICAgICAgZG9jLFxuICAgICAgJ2lmcmFtZScsXG4gICAgICBtZXJnZWRBdHRyc1xuICAgICkpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIG5ldyBpZnJhbWUgZG9lcyBub3QgaW5oZXJpdCBhbnkgQ1NTIHN0eWxlcy5cbiAgICByZXNldEFsbFN0eWxlcyh0aGlzLmlmcmFtZV8pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeV8gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5pZnJhbWVfLm9ubG9hZCA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogV2hlbiBwcm9taXNlIGlzIHJlc29sdmVkLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkeV87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaWZyYW1lIGVsZW1lbnQuXG4gICAqIEByZXR1cm4geyFIVE1MSUZyYW1lRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkb2N1bWVudCBvYmplY3Qgb2YgdGhlIGlmcmFtZSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHshRG9jdW1lbnR9XG4gICAqL1xuICBnZXREb2N1bWVudCgpIHtcbiAgICBjb25zdCBkb2MgPVxuICAgICAgdGhpcy5nZXRFbGVtZW50KCkuY29udGVudERvY3VtZW50IHx8XG4gICAgICAodGhpcy5nZXRFbGVtZW50KCkuY29udGVudFdpbmRvdyAmJlxuICAgICAgICB0aGlzLmdldEVsZW1lbnQoKS5jb250ZW50V2luZG93LmRvY3VtZW50KTtcblxuICAgIGlmICghZG9jKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBsb2FkZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBib2R5IG9mIHRoZSBpZnJhbWUuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgZ2V0Qm9keSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshRWxlbWVudH0gKi8gKHRoaXMuZ2V0RG9jdW1lbnQoKS5ib2R5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBpZnJhbWUgaXMgY29ubmVjdGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIGlzQ29ubmVjdGVkKHRoaXMuZ2V0RWxlbWVudCgpKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge3NldEltcG9ydGFudFN0eWxlc30gZnJvbSAnLi4vdXRpbHMvc3R5bGUnO1xuaW1wb3J0IHt0cmFuc2l0aW9ufSBmcm9tICcuLi91dGlscy9hbmltYXRpb24nO1xuXG5leHBvcnQgY2xhc3MgR3JheXBhbmUge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vbW9kZWwvZG9jLkRvY30gZG9jXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6SW5kZXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYywgekluZGV4KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5mYWRlQmFja2dyb3VuZF8gPSB0aGlzLmRvY19cbiAgICAgIC5nZXRXaW4oKVxuICAgICAgLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N3Zy1wb3B1cC1iYWNrZ3JvdW5kJyk7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7XG4gICAgICAnei1pbmRleCc6IHpJbmRleCxcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxuICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICd0b3AnOiAwLFxuICAgICAgJ3JpZ2h0JzogMCxcbiAgICAgICdib3R0b20nOiAwLFxuICAgICAgJ2xlZnQnOiAwLFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgzMiwgMzMsIDM2LCAuNiknLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5mYWRlQmFja2dyb3VuZF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQXR0YWNoZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5mYWRlQmFja2dyb3VuZF8ucGFyZW50Tm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgZ3JheXBhbmUgdG8gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgYXR0YWNoKCkge1xuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkuYXBwZW5kQ2hpbGQodGhpcy5mYWRlQmFja2dyb3VuZF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGFjaGVzIHRoZSBncmF5cGFuZSB0byB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkucmVtb3ZlQ2hpbGQodGhpcy5mYWRlQmFja2dyb3VuZF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3dzIHRoZSBncmF5cGFuZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7IVByb21pc2V8dW5kZWZpbmVkfVxuICAgKi9cbiAgc2hvdyhhbmltYXRlZCA9IHRydWUpIHtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5mYWRlQmFja2dyb3VuZF8sIHtcbiAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJyxcbiAgICAgICdvcGFjaXR5JzogYW5pbWF0ZWQgPyAwIDogMSxcbiAgICB9KTtcbiAgICBpZiAoYW5pbWF0ZWQpIHtcbiAgICAgIHJldHVybiB0cmFuc2l0aW9uKFxuICAgICAgICB0aGlzLmZhZGVCYWNrZ3JvdW5kXyxcbiAgICAgICAge1xuICAgICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgICAgfSxcbiAgICAgICAgMzAwLFxuICAgICAgICAnZWFzZS1vdXQnXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgZ3JheXBhbmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGFuaW1hdGVkXG4gICAqIEByZXR1cm4geyFQcm9taXNlfHVuZGVmaW5lZH1cbiAgICovXG4gIGhpZGUoYW5pbWF0ZWQgPSB0cnVlKSB7XG4gICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICByZXR1cm4gdHJhbnNpdGlvbihcbiAgICAgICAgdGhpcy5mYWRlQmFja2dyb3VuZF8sXG4gICAgICAgIHtcbiAgICAgICAgICAnb3BhY2l0eSc6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIDMwMCxcbiAgICAgICAgJ2Vhc2Utb3V0J1xuICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7J2Rpc3BsYXknOiAnbm9uZSd9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5mYWRlQmFja2dyb3VuZF8sIHsnZGlzcGxheSc6ICdub25lJ30pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogYWJzdHJhY3QgVmlldyBDbGFzcy4gVXNlZCB0byByZW5kZXIgdGhlIGNvbnRlbnQgd2l0aGluIHRoZSBEaWFsb2cuIFRoZVxuICogZXh0ZW5kZWQgY2xhc3MgaGFzIGFjdHVhbCBjb250ZW50LlxuICogQGFic3RyYWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3IHtcbiAgLyoqXG4gICAqIEVtcHR5IGNvbnN0cnVjdG9yLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpZnJhbWUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGlhbG9nLkRpYWxvZ30gdW51c2VkRGlhbG9nXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGluaXQodW51c2VkRGlhbG9nKSB7fVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSBjb250ZW50LlxuICAgKi9cbiAgcmVzaXplZCgpIHtcbiAgICAvLyBEbyBub3RoaW5nIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGlmIG5lZWRlZC5cbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHQgdGhlIHJlc3VsdC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgd2hlbkNvbXBsZXRlKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBzaG91bGRGYWRlQm9keSgpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgaGFzTG9hZGluZ0luZGljYXRvcigpIHt9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIE5PVEU6IFBsZWFzZSBkb24ndCBlZGl0IHRoaXMgZmlsZSBkaXJlY3RseSFcbi8vICAgVGhpcyBkb2N1bWVudCBkZXNjcmliZXMgaG93IHRvIGNoYW5nZSBpMThuIHN0cmluZ3MgaW4gc3dnLWpzOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFGTUVLSl9UbWpIaHFPTjBrckU0eGhEYlRFajBJMERudnp4TXpCMmNXVVdBL2VkaXQ/cmVzb3VyY2VrZXk9MC1UUTdoUE96QUQ0aFg4eDlQZndlR1NnI2hlYWRpbmc9aC5xOWdpN3Q0aDF0eWpcblxuZXhwb3J0IGNvbnN0IEkxOE5fU1RSSU5HUyA9IHtcbiAgJ1NIT1dDQVNFX1JFR1dBTExfVElUTEUnOiB7XG4gICAgJ2RlJzogJ0ltbWVyIGd1dCBpbmZvcm1pZXJ0IG1pdCBHb29nbGUnLFxuICAgICdlbic6ICdHZXQgbW9yZSB3aXRoIEdvb2dsZScsXG4gICAgJ2VzLWFyJzogJ0Rpc2ZydXRhIG3DoXMgYXJ0w61jdWxvcyBjb24gR29vZ2xlJyxcbiAgICAnZnInOiAnUGx1cyBkZSBjb250ZW51cyBhdmVjIEdvb2dsZScsXG4gICAgJ3B0LWJyJzogJ1ZlamEgbWFpcyBjb20gbyBHb29nbGUnLFxuICB9LFxuICAnU0hPV0NBU0VfUkVHV0FMTF9ERVNDUklQVElPTic6IHtcbiAgICAnZGUnOlxuICAgICAgJzxzdHJvbmc+PC9zdHJvbmc+RGllc2VyIEluaGFsdCBpc3Qgbm9ybWFsZXJ3ZWlzZSBrb3N0ZW5wZmxpY2h0aWcuIEdvb2dsZSBnZXfDpGhydCBkaXIgamVkb2NoIGtvc3RlbmxvcyBadWdyaWZmIGF1ZiBkaWVzZW4gQXJ0aWtlbCB1bmQgYW5kZXJlIEluaGFsdGUsIHdlbm4gZHUgZGljaCBtaXQgZGVpbmVtIEdvb2dsZS1Lb250byBiZWkgPHBoIG5hbWU9XCJQVUJMSUNBVElPTlwiPjxleD5BUCBOZXdzPC9leD57cHVibGljYXRpb259PC9waD4gcmVnaXN0cmllcnN0LicsXG4gICAgJ2VuJzpcbiAgICAgICc8c3Ryb25nPjwvc3Ryb25nPlRoaXMgY29udGVudCB1c3VhbGx5IHJlcXVpcmVzIHBheW1lbnQsIGJ1dCBHb29nbGUgaXMgZ2l2aW5nIHlvdSBmcmVlIGFjY2VzcyB0byB0aGlzIGFydGljbGUgYW5kIG1vcmUgd2hlbiB5b3UgcmVnaXN0ZXIgd2l0aCA8cGggbmFtZT1cIlBVQkxJQ0FUSU9OXCI+PGV4PkFQIE5ld3M8L2V4PntwdWJsaWNhdGlvbn08L3BoPiB1c2luZyB5b3VyIEdvb2dsZSBBY2NvdW50LicsXG4gICAgJ2VzLWFyJzpcbiAgICAgICc8c3Ryb25nPjwvc3Ryb25nPk5vcm1hbG1lbnRlLCBlcyBuZWNlc2FyaW8gcGFnYXIgcGFyYSB2ZXIgZXN0ZSBjb250ZW5pZG8sIHBlcm8gR29vZ2xlIHRlIG9mcmVjZSBhY2Nlc28gZ3JhdHVpdG8gYSBlc3RlIHkgb3Ryb3MgYXJ0w61jdWxvcyBzaSB0ZSByZWdpc3RyYXMgZW4gPHBoIG5hbWU9XCJQVUJMSUNBVElPTlwiPjxleD5BUCBOZXdzPC9leD57cHVibGljYXRpb259PC9waD4gY29uIHR1IEN1ZW50YSZuYnNwO2RlJm5ic3A7R29vZ2xlLicsXG4gICAgJ2ZyJzpcbiAgICAgICc8c3Ryb25nPjwvc3Ryb25nPkNlIGNvbnRlbnUgZXN0IGfDqW7DqXJhbGVtZW50IHBheWFudCwgbWFpcyB2b3VzIHBvdXZleiBsaXJlIGNldCBhcnRpY2xlIGV0IGRcXCdhdXRyZXMgY29udGVudXMgZ3JhdHVpdGVtZW50IGdyw6JjZSDDoCBHb29nbGUgZW4gdm91cyBpbnNjcml2YW50IHN1ciA8cGggbmFtZT1cIlBVQkxJQ0FUSU9OXCI+PGV4PkFQIE5ld3M8L2V4PntwdWJsaWNhdGlvbn08L3BoPiBhdmVjIHZvdHJlIGNvbXB0ZSBHb29nbGUuJyxcbiAgICAncHQtYnInOlxuICAgICAgJzxzdHJvbmc+PC9zdHJvbmc+Tm9ybWFsbWVudGUsIMOpIHByZWNpc28gcGFnYXIgcG9yIGVzdGUgY29udGXDumRvLiBQb3LDqW0sIGJhc3RhIHZvY8OqIHNlIHJlZ2lzdHJhciBuYSBwdWJsaWNhw6fDo28gPHBoIG5hbWU9XCJQVUJMSUNBVElPTlwiPjxleD5BUCBOZXdzPC9leD57cHVibGljYXRpb259PC9waD4gdXNhbmRvIHN1YSBDb250YSBkbyBHb29nbGUgcGFyYSB0ZXIgYWNlc3NvIGdyYXR1aXRvIGEgZXN0YSBtYXTDqXJpYSBlIG11aXRvIG1haXMuJyxcbiAgfSxcbiAgJ1NIT1dDQVNFX1JFR1dBTExfUFVCTElTSEVSX1NJR05fSU5fQlVUVE9OJzoge1xuICAgICdkZSc6ICdEdSBoYXN0IGJlcmVpdHMgZWluIEtvbnRvPycsXG4gICAgJ2VuJzogJ0FscmVhZHkgaGF2ZSBhbiBhY2NvdW50PycsXG4gICAgJ2VzLWFyJzogJ8K/WWEgdGllbmVzIHVuYSBjdWVudGE/JyxcbiAgICAnZnInOiAnVm91cyBhdmV6IGTDqWrDoCB1biBjb21wdGUmbmJzcDs/JyxcbiAgICAncHQtYnInOiAnSsOhIHRlbSB1bWEgY29udGE/JyxcbiAgfSxcbiAgJ1NIT1dDQVNFX1JFR1dBTExfR09PR0xFX1NJR05fSU5fQlVUVE9OJzoge1xuICAgICdkZSc6ICfDnGJlciBHb29nbGUgYW5tZWxkZW4nLFxuICAgICdlbic6ICdTaWduIGluIHdpdGggR29vZ2xlJyxcbiAgICAnZXMtYXInOiAnQWNjZWRlciBjb24gR29vZ2xlJyxcbiAgICAnZnInOiAnU2UgY29ubmVjdGVyIGF2ZWMgR29vZ2xlJyxcbiAgICAncHQtYnInOiAnRmF6ZXIgbG9naW4gY29tIG8gR29vZ2xlJyxcbiAgfSxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDIxIFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFdoeSBpcyB0aGVyZSBhIHN0cmluZ3MuanMgYW5kIGEgc3dnLXN0cmluZ3MuanMsIHlvdSBhc2s/IHN0cmluZ3MuanMgaXMgYVxuLy8gZ2VuZXJhdGVkIGZpbGUsIGN1cnJlbnRseSB1c2VkIGZvciBnYWEgYnVpbGRzLiBUaGlzIGZpbGUgaXMgdXNlZCBmb3Igc3dnIGFuZFxuLy8gc3dnLWJhc2ljIGJ1aWxkcywgYW5kIGlzIGN1cnJlbnRseSBtYW51YWxseSB1cGRhdGVkLlxuLy8gVE9ETyhzdGVsbGFjaHVpKTogRmlndXJlIG91dCBpZiB0aGV5IHNob3VsZCBiZSBtZXJnZWQgd2l0aG91dCBhIGxhcmdlIGltcGFjdFxuLy8gICBvbiBiaW5hcnkgc2l6ZS5cblxuZXhwb3J0IGNvbnN0IFNXR19JMThOX1NUUklOR1MgPSB7XG4gICdTVUJTQ1JJUFRJT05fVElUTEVfTEFOR19NQVAnOiB7XG4gICAgJ2VuJzogJ1N1YnNjcmliZSB3aXRoIEdvb2dsZScsXG4gICAgJ2FyJzogJ0dvb2dsZSDYp9i02KrYsdmDwqDZhdi5JyxcbiAgICAnZGUnOiAnQWJvbm5pZXJlbiBtaXQgR29vZ2xlJyxcbiAgICAnZXMnOiAnU3VzY3LDrWJldGUgY29uIEdvb2dsZScsXG4gICAgJ2VzLWxhdGFtJzogJ1N1c2Nyw61iZXRlIGNvbiBHb29nbGUnLFxuICAgICdlcy1sYXRuJzogJ1N1c2Nyw61iZXRlIGNvbiBHb29nbGUnLFxuICAgICdmcic6IFwiUydhYm9ubmVyIGF2ZWMgR29vZ2xlXCIsXG4gICAgJ2hpJzogJ0dvb2dsZSDgpJXgpYcg4KWb4KSw4KS/4KSv4KWHIOCkuOCkpuCkuOCljeCkr+CkpOCkvicsXG4gICAgJ2lkJzogJ0JlcmxhbmdnYW5hbiBkZW5nYW4gR29vZ2xlJyxcbiAgICAnaXQnOiAnQWJib25hdGkgY29uIEdvb2dsZScsXG4gICAgJ2pwJzogJ0dvb2dsZSDjgafos7zoqq0nLFxuICAgICdrbyc6ICdHb29nbGUg7J2EIO2Gte2VnOq1rOuPhScsXG4gICAgJ21zJzogJ0xhbmdnYW4gZGVuZ2FuIEdvb2dsZScsXG4gICAgJ25sJzogJ0Fib25uZXJlbiB2aWEgR29vZ2xlJyxcbiAgICAnbm8nOiAnQWJvbm5lciBtZWQgR29vZ2xlJyxcbiAgICAncGwnOiAnU3Vic2tyeWJ1aiB6IEdvb2dsZScsXG4gICAgJ3B0JzogJ1N1YnNjcmV2ZXIgY29tIG8gR29vZ2xlJyxcbiAgICAncHQtYnInOiAnQXNzaW5lIGNvbSBvIEdvb2dsZScsXG4gICAgJ3J1JzogJ9Cf0L7QtNC/0Lhj0LrQsCDRh9C10YDQtdC3IEdvb2dsZScsXG4gICAgJ3NlJzogJ1ByZW51bWVyZXJhIG1lZCBHb29nbGUnLFxuICAgICd0aCc6ICfguKrguKHguLHguITguKPguJ/guLLguJkgR29vZ2xlJyxcbiAgICAndHInOiAnR29vZ2xlIGlsZSBBYm9uZSBPbCcsXG4gICAgJ3VrJzogJ9Cf0ZbQtNC/0LjRgdCw0YLQuNGB0Y8g0YfQtdGA0LXQtyBHb29nbGUnLFxuICAgICd6aC10dyc6ICfpgI/pgY4gR29vZ2xlIOiogumWsScsXG4gIH0sXG4gICdDT05UUklCVVRJT05fVElUTEVfTEFOR19NQVAnOiB7XG4gICAgJ2VuJzogJ0NvbnRyaWJ1dGUgd2l0aCBHb29nbGUnLFxuICAgICdhcic6ICfYp9mE2YXYs9in2YfZhdipINio2KfYs9iq2K7Yr9in2YUgR29vZ2xlJyxcbiAgICAnZGUnOiAnTWl0IEdvb2dsZSBiZWl0cmFnZW4nLFxuICAgICdlcyc6ICdcdENvbnRyaWJ1eWUgY29uIEdvb2dsZScsXG4gICAgJ2VzLWxhdGFtJzogJ0NvbnRyaWJ1aXIgY29uIEdvb2dsZScsXG4gICAgJ2VzLWxhdG4nOiAnQ29udHJpYnV5ZSBjb24gR29vZ2xlJyxcbiAgICAnZnInOiAnQ29udHJpYnVlciBhdmVjIEdvb2dsZScsXG4gICAgJ2hpJzogJ0dvb2dsZSDgpJbgpL7gpKTgpYcg4KSV4KWAIOCkruCkpuCkpiDgpLjgpYcg4KSv4KWL4KSX4KSm4KS+4KSoIOCkleCksOClh+CkgicsXG4gICAgJ2lkJzogJ0JlcmtvbnRyaWJ1c2kgZGVuZ2FuIEdvb2dsZScsXG4gICAgJ2l0JzogJ0NvbnRyaWJ1aXNjaSBjb24gR29vZ2xlJyxcbiAgICAnanAnOiAnR29vZ2xlIOOCkuS7i+OBl+OBpuizh+mHkeaPkOS+mycsXG4gICAgJ2tvJzogJ0dvb2dsZeydhCDthrXtlbQg7LC47Jes7ZWY6riwJyxcbiAgICAnbXMnOiAnU3VtYmFuZ2thbiBkZW5nYW4gR29vZ2xlJyxcbiAgICAnbmwnOiAnQmlqZHJhZ2VuIG1ldCBHb29nbGUnLFxuICAgICdubyc6ICdCaWRyYSBtZWQgR29vZ2xlJyxcbiAgICAncGwnOiAnV2VzcHJ6eWogcHVibGlrYWNqxJkgcHJ6ZXogR29vZ2xlJyxcbiAgICAncHQnOiAnQ29udHJpYnVpciBjb20gbyBHb29nbGUnLFxuICAgICdwdC1icic6ICdDb250cmlidWEgY29tIG8gR29vZ2xlJyxcbiAgICAncnUnOiAn0JLQvdC10YHRgtC4INGB0YDQtdC00YHRgtCy0LAg0YfQtdGA0LXQtyBHb29nbGUnLFxuICAgICdzZSc6ICdCaWRyYSBtZWQgR29vZ2xlJyxcbiAgICAndGgnOiAn4Lih4Li14Liq4LmI4Lin4LiZ4Lij4LmI4Lin4Lih4Lic4LmI4Liy4LiZIEdvb2dsZScsXG4gICAgJ3RyJzogJ0dvb2dsZSBpbGUgS2F0a8SxZGEgQnVsdW4nLFxuICAgICd1ayc6ICfQl9GA0L7QsdC40YLQuCDQstC90LXRgdC+0Log0YfQtdGA0LXQtyBHb29nbGUnLFxuICAgICd6aC10dyc6ICfpgI/pgY4gR29vZ2xlIOaNkOasvicsXG4gIH0sXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIFRoZSBlbnRyeSBwb2ludCBmb3IgcnVudGltZSAoc3dnLmpzKS5cbiAqL1xuXG5pbXBvcnQgJy4vcG9seWZpbGxzJztcbmltcG9ydCB7aW5zdGFsbFJ1bnRpbWV9IGZyb20gJy4vcnVudGltZS9ydW50aW1lJztcbmltcG9ydCB7bG9nfSBmcm9tICcuL3V0aWxzL2xvZyc7XG5cbmxvZygnU3Vic2NyaXB0aW9ucyBSdW50aW1lOiAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQnKTtcblxuaW5zdGFsbFJ1bnRpbWUoc2VsZik7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDIxIFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQ29udGFpbmVyIGZvciB0aGUgYXV0byBwcm9tcHQgY29uZmlndWF0aW9uIGRldGFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRvUHJvbXB0Q29uZmlnIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gbWF4SW1wcmVzc2lvbnNQZXJXZWVrXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBtYXhJbXByZXNzaW9uc1BlcldlZWssXG4gICAgZGlzcGxheURlbGF5U2Vjb25kcyxcbiAgICBiYWNrb2ZmU2Vjb25kcyxcbiAgICBtYXhEaXNtaXNzYWxzUGVyV2VlayxcbiAgICBtYXhEaXNtaXNzYWxzUmVzdWx0aW5nSGlkZVNlY29uZHNcbiAgKSB7XG4gICAgLyoqIEBjb25zdCB7bnVtYmVyfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLm1heEltcHJlc3Npb25zUGVyV2VlayA9IG1heEltcHJlc3Npb25zUGVyV2VlaztcblxuICAgIC8qKiBAY29uc3QgeyFDbGllbnREaXNwbGF5VHJpZ2dlcn0gKi9cbiAgICB0aGlzLmNsaWVudERpc3BsYXlUcmlnZ2VyID0gbmV3IENsaWVudERpc3BsYXlUcmlnZ2VyKGRpc3BsYXlEZWxheVNlY29uZHMpO1xuXG4gICAgLyoqIEBjb25zdCB7IUV4cGxpY2l0RGlzbWlzc2FsQ29uZmlnfSAqL1xuICAgIHRoaXMuZXhwbGljaXREaXNtaXNzYWxDb25maWcgPSBuZXcgRXhwbGljaXREaXNtaXNzYWxDb25maWcoXG4gICAgICBiYWNrb2ZmU2Vjb25kcyxcbiAgICAgIG1heERpc21pc3NhbHNQZXJXZWVrLFxuICAgICAgbWF4RGlzbWlzc2Fsc1Jlc3VsdGluZ0hpZGVTZWNvbmRzXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIENsaWVudCBzaWRlIGNvbmRpdGlvbnMgdG8gdHJpZ2dlciB0aGUgZGlzcGxheSBvZiB0aGUgYXV0byBwcm9tcHQuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnREaXNwbGF5VHJpZ2dlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IGRpc3BsYXlEZWxheVNlY29uZHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRpc3BsYXlEZWxheVNlY29uZHMpIHtcbiAgICAvKiogQGNvbnN0IHtudW1iZXJ8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMuZGlzcGxheURlbGF5U2Vjb25kcyA9IGRpc3BsYXlEZWxheVNlY29uZHM7XG4gIH1cbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9mIGV4cGxpY2l0IGRpc21pc3NhbCBiZWhhdmlvciBhbmQgaXRzIGVmZmVjdHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBFeHBsaWNpdERpc21pc3NhbENvbmZpZyB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IGJhY2tvZmZTZWNvbmRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gbWF4RGlzbWlzc2Fsc1BlcldlZWtcbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSBtYXhEaXNtaXNzYWxzUmVzdWx0aW5nSGlkZVNlY29uZHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGJhY2tvZmZTZWNvbmRzLFxuICAgIG1heERpc21pc3NhbHNQZXJXZWVrLFxuICAgIG1heERpc21pc3NhbHNSZXN1bHRpbmdIaWRlU2Vjb25kc1xuICApIHtcbiAgICAvKiogQGNvbnN0IHtudW1iZXJ8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMuYmFja29mZlNlY29uZHMgPSBiYWNrb2ZmU2Vjb25kcztcblxuICAgIC8qKiBAY29uc3Qge251bWJlcnx1bmRlZmluZWR9ICovXG4gICAgdGhpcy5tYXhEaXNtaXNzYWxzUGVyV2VlayA9IG1heERpc21pc3NhbHNQZXJXZWVrO1xuXG4gICAgLyoqIEBjb25zdCB7bnVtYmVyfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLm1heERpc21pc3NhbHNSZXN1bHRpbmdIaWRlU2Vjb25kcyA9IG1heERpc21pc3NhbHNSZXN1bHRpbmdIaWRlU2Vjb25kcztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAyMSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIENvbnRhaW5lciBmb3IgdGhlIGRldGFpbHMgcmVsYXRpbmcgdG8gaG93IHRoZSBjbGllbnQgc2hvdWxkIGJlIGNvbmZpZ3VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRDb25maWcge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hdXRvLXByb21wdC1jb25maWcuQXV0b1Byb21wdENvbmZpZz19IGF1dG9Qcm9tcHRDb25maWdcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwYXlTd2dWZXJzaW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHVzZVVwZGF0ZWRPZmZlckZsb3dzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhdXRvUHJvbXB0Q29uZmlnLCBwYXlTd2dWZXJzaW9uLCB1c2VVcGRhdGVkT2ZmZXJGbG93cykge1xuICAgIC8qKiBAY29uc3QgeyEuL2F1dG8tcHJvbXB0LWNvbmZpZy5BdXRvUHJvbXB0Q29uZmlnfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLmF1dG9Qcm9tcHRDb25maWcgPSBhdXRvUHJvbXB0Q29uZmlnO1xuXG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLnBheVN3Z1ZlcnNpb24gPSBwYXlTd2dWZXJzaW9uO1xuXG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnVzZVVwZGF0ZWRPZmZlckZsb3dzID0gdXNlVXBkYXRlZE9mZmVyRmxvd3MgfHwgZmFsc2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpc0RvY3VtZW50UmVhZHksIHdoZW5Eb2N1bWVudFJlYWR5fSBmcm9tICcuLi91dGlscy9kb2N1bWVudC1yZWFkeSc7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgRG9jIHtcbiAgLyoqXG4gICAqIEByZXR1cm4geyFXaW5kb3d9XG4gICAqL1xuICBnZXRXaW4oKSB7fVxuXG4gIC8qKlxuICAgKiBUaGUgYERvY3VtZW50YCBub2RlIG9yIGFuYWxvZy5cbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqL1xuICBnZXRSb290Tm9kZSgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBgRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50YCBlbGVtZW50IG9yIGFuYWxvZy5cbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBnZXRSb290RWxlbWVudCgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBgRG9jdW1lbnQuaGVhZGAgZWxlbWVudCBvciBhbmFsb2cuIFJldHVybnMgYG51bGxgIGlmIG5vdCBhdmFpbGFibGVcbiAgICogeWV0LlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldEhlYWQoKSB7fVxuXG4gIC8qKlxuICAgKiBUaGUgYERvY3VtZW50LmJvZHlgIGVsZW1lbnQgb3IgYW5hbG9nLiBSZXR1cm5zIGBudWxsYCBpZiBub3QgYXZhaWxhYmxlXG4gICAqIHlldC5cbiAgICogQHJldHVybiB7P0VsZW1lbnR9XG4gICAqL1xuICBnZXRCb2R5KCkge31cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gZnVsbHkgY29uc3RydWN0ZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1JlYWR5KCkge31cblxuICAvKipcbiAgICogUmVzb2x2ZWQgd2hlbiBkb2N1bWVudCBoYXMgYmVlbiBmdWxseSBjb25zdHJ1Y3RlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7fVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBlbGVtZW50IHRvIHRoZSBmaXhlZCBsYXllci5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gdW51c2VkRWxlbWVudFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICpcbiAgICogVGhpcyBpcyBhIG5vLW9wIGZvciBleGNlcHQgaW4gQU1QIG9uIGlPUyA8IDEzLjAuXG4gICAqL1xuICBhZGRUb0ZpeGVkTGF5ZXIodW51c2VkRWxlbWVudCkge31cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtEb2N9ICovXG5leHBvcnQgY2xhc3MgR2xvYmFsRG9jIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd3whRG9jdW1lbnR9IHdpbk9yRG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW5PckRvYykge1xuICAgIGNvbnN0IGlzV2luID0gISF3aW5PckRvYy5kb2N1bWVudDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKGlzV2luXG4gICAgICA/IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHdpbk9yRG9jKVxuICAgICAgOiAvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKHdpbk9yRG9jKS5kZWZhdWx0Vmlldyk7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IGlzV2luXG4gICAgICA/IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHdpbk9yRG9jKS5kb2N1bWVudFxuICAgICAgOiAvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKHdpbk9yRG9jKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0V2luKCkge1xuICAgIHJldHVybiB0aGlzLndpbl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3ROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmRvY187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3RFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRIZWFkKCkge1xuICAgIC8vIGBkb2N1bWVudC5oZWFkYCBhbHdheXMgaGFzIGEgY2hhbmNlIHRvIGJlIHBhcnNlZCwgYXQgbGVhc3QgcGFydGlhbGx5LlxuICAgIHJldHVybiAvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAodGhpcy5kb2NfLmhlYWQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRCb2R5KCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uYm9keTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNSZWFkeSgpIHtcbiAgICByZXR1cm4gaXNEb2N1bWVudFJlYWR5KHRoaXMuZG9jXyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gd2hlbkRvY3VtZW50UmVhZHkodGhpcy5kb2NfKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWRkVG9GaXhlZExheWVyKHVudXNlZEVsZW1lbnQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFEb2N1bWVudHwhV2luZG93fCFEb2N9IGlucHV0XG4gKiBAcmV0dXJuIHshRG9jfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZURvYyhpbnB1dCkge1xuICAvLyBJcyBpdCBhIGBEb2N1bWVudGBcbiAgaWYgKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAoaW5wdXQpLm5vZGVUeXBlID09PSAvKiBET0NVTUVOVCAqLyA5KSB7XG4gICAgcmV0dXJuIG5ldyBHbG9iYWxEb2MoLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChpbnB1dCkpO1xuICB9XG4gIC8vIElzIGl0IGEgYFdpbmRvd2A/XG4gIGlmICgvKiogQHR5cGUgeyFXaW5kb3d9ICovIChpbnB1dCkuZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gbmV3IEdsb2JhbERvYygvKiogQHR5cGUgeyFXaW5kb3d9ICovIChpbnB1dCkpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyFEb2N9ICovIChpbnB1dCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RG9jLCByZXNvbHZlRG9jfSBmcm9tICcuL2RvYyc7XG5pbXBvcnQge1BhZ2VDb25maWd9IGZyb20gJy4vcGFnZS1jb25maWcnO1xuaW1wb3J0IHtkZWJ1Z0xvZ30gZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7aGFzTmV4dE5vZGVJbkRvY3VtZW50T3JkZXJ9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi4vdXRpbHMvanNvbic7XG5pbXBvcnQge3VzZXJ9IGZyb20gJy4uL3V0aWxzL2Vycm9yLWxvZ2dlcic7XG5cbmNvbnN0IEFMUkVBRFlfU0VFTiA9ICdfX1NXRy1TRUVOX18nO1xuY29uc3QgQ09OVFJPTF9GTEFHID0gJ3N1YnNjcmlwdGlvbnMtY29udHJvbCc7XG5cbmNvbnN0IEFMTE9XRURfVFlQRVMgPSBbXG4gICdDcmVhdGl2ZVdvcmsnLFxuICAnQXJ0aWNsZScsXG4gICdOZXdzQXJ0aWNsZScsXG4gICdCbG9nJyxcbiAgJ0NvbW1lbnQnLFxuICAnQ291cnNlJyxcbiAgJ0hvd1RvJyxcbiAgJ01lc3NhZ2UnLFxuICAnUmV2aWV3JyxcbiAgJ1dlYlBhZ2UnLFxuXTtcblxuLy8gUmVnRXhwIGZvciBxdWlja2x5IHNjYW5uaW5nIExEK0pTT04gZm9yIGFsbG93ZWQgdHlwZXNcbmNvbnN0IFJFX0FMTE9XRURfVFlQRVMgPSBuZXcgUmVnRXhwKEFMTE9XRURfVFlQRVMuam9pbignfCcpKTtcblxuLyoqXG4gKi9cbmV4cG9ydCBjbGFzcyBQYWdlQ29uZmlnUmVzb2x2ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fCFEb2N1bWVudHwhRG9jfSB3aW5PckRvY1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luT3JEb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IHJlc29sdmVEb2Mod2luT3JEb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKCFQYWdlQ29uZmlnfCFQcm9taXNlKSl9ICovXG4gICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IVBhZ2VDb25maWc+fSAqL1xuICAgIHRoaXMuY29uZmlnUHJvbWlzZV8gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU1ldGFQYXJzZXJ9ICovXG4gICAgdGhpcy5tZXRhUGFyc2VyXyA9IG5ldyBNZXRhUGFyc2VyKHRoaXMuZG9jXyk7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUpzb25MZFBhcnNlcn0gKi9cbiAgICB0aGlzLmxkUGFyc2VyXyA9IG5ldyBKc29uTGRQYXJzZXIodGhpcy5kb2NfKTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshTWljcm9kYXRhUGFyc2VyfSAqL1xuICAgIHRoaXMubWljcm9kYXRhUGFyc2VyXyA9IG5ldyBNaWNyb2RhdGFQYXJzZXIodGhpcy5kb2NfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhUGFnZUNvbmZpZz59XG4gICAqL1xuICByZXNvbHZlQ29uZmlnKCkge1xuICAgIC8vIFRyeSByZXNvbHZlIHRoZSBjb25maWcgYXQgZGlmZmVyZW50IHRpbWVzLlxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4odGhpcy5jaGVjay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmRvY18ud2hlblJlYWR5KCkudGhlbih0aGlzLmNoZWNrLmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ1Byb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9QYWdlQ29uZmlnfVxuICAgKi9cbiAgY2hlY2soKSB7XG4gICAgLy8gQWxyZWFkeSByZXNvbHZlZC5cbiAgICBpZiAoIXRoaXMuY29uZmlnUmVzb2x2ZXJfKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGNvbmZpZyA9IHRoaXMubWV0YVBhcnNlcl8uY2hlY2soKTtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgY29uZmlnID0gdGhpcy5sZFBhcnNlcl8uY2hlY2soKTtcbiAgICB9XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IHRoaXMubWljcm9kYXRhUGFyc2VyXy5jaGVjaygpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICAvLyBQcm9kdWN0IElEIGhhcyBiZWVuIGZvdW5kOiBpbml0aWFsaXplIHRoZSByZXN0IG9mIHRoZSBjb25maWcuXG4gICAgICB0aGlzLmNvbmZpZ1Jlc29sdmVyXyhjb25maWcpO1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhpcy5kb2NfLmlzUmVhZHkoKSkge1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8oXG4gICAgICAgIFByb21pc2UucmVqZWN0KFxuICAgICAgICAgIHVzZXIoKS5jcmVhdGVFcnJvcignTm8gY29uZmlnIGNvdWxkIGJlIGRpc2NvdmVyZWQgaW4gdGhlIHBhZ2UnKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSBudWxsO1xuICAgIH1cbiAgICBkZWJ1Z0xvZyhjb25maWcpO1xuICAgIHJldHVybiBjb25maWc7XG4gIH1cbn1cblxuY2xhc3MgVHlwZUNoZWNrZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgLyoqXG4gICAqIENoZWNrIHZhbHVlIGZyb20ganNvblxuICAgKiBAcGFyYW0gez9BcnJheXxzdHJpbmd9IHZhbHVlXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZXhwZWN0ZWRUeXBlc1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgY2hlY2tWYWx1ZSh2YWx1ZSwgZXhwZWN0ZWRUeXBlcykge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2hlY2tBcnJheSh0aGlzLnRvQXJyYXlfKHZhbHVlKSwgZXhwZWN0ZWRUeXBlcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHNwYWNlIGRlbGltaXRlZCBsaXN0IG9mIHR5cGVzXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gaXRlbXR5cGVcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBleHBlY3RlZFR5cGVzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjaGVja1N0cmluZyhpdGVtdHlwZSwgZXhwZWN0ZWRUeXBlcykge1xuICAgIGlmICghaXRlbXR5cGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2hlY2tBcnJheShpdGVtdHlwZS5zcGxpdCgvXFxzKy8pLCBleHBlY3RlZFR5cGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PD9zdHJpbmc+fSB0eXBlQXJyYXlcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBleHBlY3RlZFR5cGVzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjaGVja0FycmF5KHR5cGVBcnJheSwgZXhwZWN0ZWRUeXBlcykge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgIHR5cGVBcnJheS5mb3JFYWNoKChjYW5kaWRhdGVUeXBlKSA9PiB7XG4gICAgICBmb3VuZCA9XG4gICAgICAgIGZvdW5kIHx8XG4gICAgICAgIGV4cGVjdGVkVHlwZXMuaW5jbHVkZXMoXG4gICAgICAgICAgY2FuZGlkYXRlVHlwZS5yZXBsYWNlKC9eaHR0cDpcXC9cXC9zY2hlbWEub3JnXFwvL2ksICcnKVxuICAgICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIC8qXG4gICAqIEBwYXJhbSB7P0FycmF5fHN0cmluZ30gdmFsdWVcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0b0FycmF5Xyh2YWx1ZSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcbiAgfVxufVxuXG5jbGFzcyBNZXRhUGFyc2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IURvY30gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIGNoZWNrKCkge1xuICAgIGlmICghdGhpcy5kb2NfLmdldEJvZHkoKSkge1xuICAgICAgLy8gV2FpdCB1bnRpbCB0aGUgd2hvbGUgYDxoZWFkPmAgaXMgcGFyc2VkLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgcHJvZHVjdCBpZC5cbiAgICBjb25zdCBwcm9kdWN0SWQgPSBnZXRNZXRhVGFnKFxuICAgICAgdGhpcy5kb2NfLmdldFJvb3ROb2RlKCksXG4gICAgICAnc3Vic2NyaXB0aW9ucy1wcm9kdWN0LWlkJ1xuICAgICk7XG4gICAgaWYgKCFwcm9kdWN0SWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIElzIGxvY2tlZD9cbiAgICBjb25zdCBhY2Nlc3NpYmxlRm9yRnJlZSA9IGdldE1ldGFUYWcoXG4gICAgICB0aGlzLmRvY18uZ2V0Um9vdE5vZGUoKSxcbiAgICAgICdzdWJzY3JpcHRpb25zLWFjY2Vzc2libGUtZm9yLWZyZWUnXG4gICAgKTtcbiAgICBjb25zdCBsb2NrZWQgPSAhIShcbiAgICAgIGFjY2Vzc2libGVGb3JGcmVlICYmIGFjY2Vzc2libGVGb3JGcmVlLnRvTG93ZXJDYXNlKCkgPT09ICdmYWxzZSdcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBQYWdlQ29uZmlnKHByb2R1Y3RJZCwgbG9ja2VkKTtcbiAgfVxufVxuXG5jbGFzcyBKc29uTGRQYXJzZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgQGZ1bmN0aW9uICovXG4gICAgdGhpcy5jaGVja1R5cGVfID0gbmV3IFR5cGVDaGVja2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9XG4gICAqL1xuICBjaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuZG9jXy5nZXRCb2R5KCkpIHtcbiAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHdob2xlIGA8aGVhZD5gIGlzIHBhcnNlZC5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbVJlYWR5ID0gdGhpcy5kb2NfLmlzUmVhZHkoKTtcblxuICAgIC8vIHR5cGU6ICdhcHBsaWNhdGlvbi9sZCtqc29uJ1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5kb2NfXG4gICAgICAuZ2V0Um9vdE5vZGUoKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdFt0eXBlPVwiYXBwbGljYXRpb24vbGQranNvblwiXScpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgIGlmIChcbiAgICAgICAgZWxlbWVudFtBTFJFQURZX1NFRU5dIHx8XG4gICAgICAgICFlbGVtZW50LnRleHRDb250ZW50IHx8XG4gICAgICAgICghZG9tUmVhZHkgJiYgIWhhc05leHROb2RlSW5Eb2N1bWVudE9yZGVyKGVsZW1lbnQpKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZWxlbWVudFtBTFJFQURZX1NFRU5dID0gdHJ1ZTtcbiAgICAgIGlmICghUkVfQUxMT1dFRF9UWVBFUy50ZXN0KGVsZW1lbnQudGV4dENvbnRlbnQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcG9zc2libGVDb25maWcgPSB0aGlzLnRyeUV4dHJhY3RDb25maWdfKGVsZW1lbnQpO1xuICAgICAgaWYgKHBvc3NpYmxlQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBwb3NzaWJsZUNvbmZpZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIHRyeUV4dHJhY3RDb25maWdfKGVsZW1lbnQpIHtcbiAgICBsZXQgcG9zc2libGVDb25maWdzID0gdHJ5UGFyc2VKc29uKGVsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgIGlmICghcG9zc2libGVDb25maWdzKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGFycmF5cyBvZiBKU09OIG9iamVjdHMuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBvc3NpYmxlQ29uZmlncykpIHtcbiAgICAgIHBvc3NpYmxlQ29uZmlncyA9IFtwb3NzaWJsZUNvbmZpZ3NdO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpZ3MgPSAvKiogQHR5cGUgeyFBcnJheTwhSnNvbk9iamVjdD59ICovIChwb3NzaWJsZUNvbmZpZ3MpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY29uZmlnID0gY29uZmlnc1tpXTtcblxuICAgICAgLy8gTXVzdCBiZSBhbiBBTExPV0VEX1RZUEVcbiAgICAgIGlmICghdGhpcy5jaGVja1R5cGVfLmNoZWNrVmFsdWUoY29uZmlnWydAdHlwZSddLCBBTExPV0VEX1RZUEVTKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gTXVzdCBoYXZlIGEgaXNQYXJ0T2ZbQHR5cGU9UHJvZHVjdF0uXG4gICAgICBsZXQgcHJvZHVjdElkID0gbnVsbDtcbiAgICAgIGNvbnN0IHBhcnRPZkFycmF5ID0gdGhpcy52YWx1ZUFycmF5Xyhjb25maWcsICdpc1BhcnRPZicpO1xuICAgICAgaWYgKHBhcnRPZkFycmF5KSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGFydE9mQXJyYXkubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBwcm9kdWN0SWQgPSB0aGlzLmRpc2NvdmVyUHJvZHVjdElkXyhwYXJ0T2ZBcnJheVtqXSk7XG4gICAgICAgICAgaWYgKHByb2R1Y3RJZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXByb2R1Y3RJZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gRm91bmQgcHJvZHVjdCBpZCwganVzdCBjaGVjayBmb3IgdGhlIGFjY2VzcyBmbGFnLlxuICAgICAgY29uc3QgaXNBY2Nlc3NpYmxlRm9yRnJlZSA9IHRoaXMuYm9vbF8oXG4gICAgICAgIHRoaXMuc2luZ2xlVmFsdWVfKGNvbmZpZywgJ2lzQWNjZXNzaWJsZUZvckZyZWUnKSxcbiAgICAgICAgLyogZGVmYXVsdCAqLyB0cnVlXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gbmV3IFBhZ2VDb25maWcocHJvZHVjdElkLCAhaXNBY2Nlc3NpYmxlRm9yRnJlZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRlZlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYm9vbF8odmFsdWUsIGRlZikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xuICAgICAgcmV0dXJuIGRlZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgbG93ZXJjYXNlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsb3dlcmNhc2UgPT0gJ2ZhbHNlJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobG93ZXJjYXNlID09ICd0cnVlJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGpzb25cbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGRpc2NvdmVyUHJvZHVjdElkXyhqc29uKSB7XG4gICAgLy8gTXVzdCBoYXZlIHR5cGUgYFByb2R1Y3RgLlxuICAgIGlmICghdGhpcy5jaGVja1R5cGVfLmNoZWNrVmFsdWUoanNvblsnQHR5cGUnXSwgWydQcm9kdWN0J10pKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7P3N0cmluZ30gKi8gKHRoaXMuc2luZ2xlVmFsdWVfKGpzb24sICdwcm9kdWN0SUQnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSBqc29uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4gez9BcnJheX1cbiAgICovXG4gIHZhbHVlQXJyYXlfKGpzb24sIG5hbWUpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGpzb25bbmFtZV07XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0ganNvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgc2luZ2xlVmFsdWVfKGpzb24sIG5hbWUpIHtcbiAgICBjb25zdCB2YWx1ZUFycmF5ID0gdGhpcy52YWx1ZUFycmF5Xyhqc29uLCBuYW1lKTtcbiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlQXJyYXkgJiYgdmFsdWVBcnJheVswXTtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycgPyBudWxsIDogdmFsdWU7XG4gIH1cbn1cblxuY2xhc3MgTWljcm9kYXRhUGFyc2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IURvY30gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuYWNjZXNzXyA9IG51bGw7XG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucHJvZHVjdElkXyA9IG51bGw7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCBAZnVuY3Rpb24gKi9cbiAgICB0aGlzLmNoZWNrVHlwZV8gPSBuZXcgVHlwZUNoZWNrZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZhbHNlIGlmIGFjY2VzcyBpcyByZXN0cmljdGVkLCBvdGhlcndpc2UgdHJ1ZVxuICAgKiBAcGFyYW0geyFFbGVtZW50fSByb290IEFuIGVsZW1lbnQgdGhhdCBpcyBhbiBpdGVtIG9mIHR5cGUgaW4gQUxMT1dFRF9UWVBFUyBsaXN0XG4gICAqIEByZXR1cm4gez9ib29sZWFufSBsb2NrZWQgYWNjZXNzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNjb3ZlckFjY2Vzc18ocm9vdCkge1xuICAgIGNvbnN0IEFMUkVBRFlfU0VFTiA9ICdhbHJlYWR5U2VlbkZvckFjY2Vzc0luZm8nO1xuICAgIGNvbnN0IG5vZGVMaXN0ID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiW2l0ZW1wcm9wPSdpc0FjY2Vzc2libGVGb3JGcmVlJ11cIik7XG4gICAgZm9yIChsZXQgaSA9IDA7IG5vZGVMaXN0W2ldOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBub2RlTGlzdFtpXTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudCcpIHx8IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkRWxlbWVudF8oZWxlbWVudCwgcm9vdCwgQUxSRUFEWV9TRUVOKSkge1xuICAgICAgICBsZXQgYWNjZXNzRm9yRnJlZSA9IG51bGw7XG4gICAgICAgIGlmIChjb250ZW50LnRvTG93ZXJDYXNlKCkgPT0gJ3RydWUnKSB7XG4gICAgICAgICAgYWNjZXNzRm9yRnJlZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoY29udGVudC50b0xvd2VyQ2FzZSgpID09ICdmYWxzZScpIHtcbiAgICAgICAgICBhY2Nlc3NGb3JGcmVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjY2Vzc0ZvckZyZWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWVzIGlmIGFuIGVsZW1lbnQgaXMgdmFsaWQgYmFzZWQgb24gdGhlIGZvbGxvd2luZ1xuICAgKiAtIGNoaWxkIG9mIGFuIGl0ZW0gb2Ygb25lIHRoZSB0aGUgQUxMT1dFRF9UWVBFU1xuICAgKiAtIG5vdCBhIGNoaWxkIG9mIGFuIGl0ZW0gb2YgYW55IG90aGVyIHR5cGVcbiAgICogLSBub3Qgc2VlbiBiZWZvcmUsIG1hcmtlZCB1c2luZyB0aGUgYWxyZWFkeVNlZW4gdGFnXG4gICAqIEBwYXJhbSB7P0VsZW1lbnR9IGN1cnJlbnQgdGhlIGVsZW1lbnQgdG8gYmUgdmVyaWZpZWRcbiAgICogQHBhcmFtIHshRWxlbWVudH0gcm9vdCB0aGUgcGFyZW50IHRvIHRyYWNrIHVwIHRvXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gYWxyZWFkeVNlZW4gdXNlZCB0byB0YWcgYWxyZWFkeSB2aXNpdGVkIG5vZGVzXG4gICAqIEByZXR1cm4geyFib29sZWFufSB2YWxpZCBub2RlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc1ZhbGlkRWxlbWVudF8oY3VycmVudCwgcm9vdCwgYWxyZWFkeVNlZW4pIHtcbiAgICBmb3IgKFxuICAgICAgbGV0IG5vZGUgPSBjdXJyZW50O1xuICAgICAgbm9kZSAmJiAhbm9kZVthbHJlYWR5U2Vlbl07XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlXG4gICAgKSB7XG4gICAgICBub2RlW2FscmVhZHlTZWVuXSA9IHRydWU7XG4gICAgICAvLyBkb2N1bWVudCBub2RlcyBkb24ndCBoYXZlIGhhc0F0dHJpYnV0ZVxuICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlICYmIG5vZGUuaGFzQXR0cmlidXRlKCdpdGVtc2NvcGUnKSkge1xuICAgICAgICAvKip7P3N0cmluZ30gKi9cbiAgICAgICAgY29uc3QgdHlwZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdpdGVtdHlwZScpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja1R5cGVfLmNoZWNrU3RyaW5nKHR5cGUsIEFMTE9XRURfVFlQRVMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogT2J0YWlucyB0aGUgcHJvZHVjdCBJRCB0aGF0IG1lZXRzIHRoZSByZXF1aXJlbWVudHNcbiAgICogLSBjaGlsZCBvZiBhbiBpdGVtIG9mIG9uZSBvZiBBTExPV0VEX1RZUEVTXG4gICAqIC0gTm90IGEgY2hpbGQgb2YgYW4gaXRlbSBvZiB0eXBlICdTZWN0aW9uJ1xuICAgKiAtIGNoaWxkIG9mIGFuIGl0ZW0gb2YgdHlwZSAncHJvZHVjdElEJ1xuICAgKiBAcGFyYW0geyFFbGVtZW50fSByb290IEFuIGVsZW1lbnQgdGhhdCBpcyBhbiBpdGVtIG9mIGFuIEFMTE9XRURfVFlQRVNcbiAgICogQHJldHVybiB7P3N0cmluZ30gcHJvZHVjdCBJRCwgaWYgZm91bmRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRpc2NvdmVyUHJvZHVjdElkXyhyb290KSB7XG4gICAgY29uc3QgQUxSRUFEWV9TRUVOID0gJ2FscmVhZHlTZWVuRm9yUHJvZHVjdEluZm8nO1xuICAgIGNvbnN0IG5vZGVMaXN0ID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdbaXRlbXByb3A9XCJwcm9kdWN0SURcIl0nKTtcbiAgICBmb3IgKGxldCBpID0gMDsgbm9kZUxpc3RbaV07IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGVMaXN0W2ldO1xuICAgICAgY29uc3QgY29udGVudCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHwgZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgIGNvbnN0IGl0ZW0gPSBlbGVtZW50LmNsb3Nlc3QoJ1tpdGVtdHlwZV1baXRlbXNjb3BlXScpO1xuICAgICAgY29uc3QgdHlwZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdpdGVtdHlwZScpO1xuICAgICAgaWYgKHR5cGUuaW5kZXhPZignaHR0cDovL3NjaGVtYS5vcmcvUHJvZHVjdCcpIDw9IC0xKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNWYWxpZEVsZW1lbnRfKGl0ZW0ucGFyZW50RWxlbWVudCwgcm9vdCwgQUxSRUFEWV9TRUVOKSkge1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBQYWdlQ29uZmlnIGlmIGF2YWlsYWJsZVxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ30gUGFnZUNvbmZpZyBmb3VuZCBzbyBmYXJcbiAgICovXG4gIGdldFBhZ2VDb25maWdfKCkge1xuICAgIGxldCBsb2NrZWQgPSBudWxsO1xuICAgIGlmICh0aGlzLmFjY2Vzc18gIT0gbnVsbCkge1xuICAgICAgbG9ja2VkID0gIXRoaXMuYWNjZXNzXztcbiAgICB9IGVsc2UgaWYgKHRoaXMuZG9jXy5pc1JlYWR5KCkpIHtcbiAgICAgIC8vIERlZmF1bHQgdG8gdW5sb2NrZWRcbiAgICAgIGxvY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9kdWN0SWRfICE9IG51bGwgJiYgbG9ja2VkICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgUGFnZUNvbmZpZyh0aGlzLnByb2R1Y3RJZF8sIGxvY2tlZCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3RzIHBhZ2UgY29uZmlnIGZyb20gTWljcm9kYXRhIGluIHRoZSBET01cbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9IFBhZ2VDb25maWcgZm91bmRcbiAgICovXG4gIHRyeUV4dHJhY3RDb25maWdfKCkge1xuICAgIGxldCBjb25maWcgPSB0aGlzLmdldFBhZ2VDb25maWdfKCk7XG4gICAgaWYgKGNvbmZpZykge1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICAvLyBHcmFiIGFsbCB0aGUgbm9kZXMgd2l0aCBhbiBpdGVtdHlwZSBhbmQgZmlsdGVyIGZvciBvdXIgYWxsb3dlZCB0eXBlc1xuICAgIGNvbnN0IG5vZGVMaXN0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXG4gICAgICAuY2FsbCh0aGlzLmRvY18uZ2V0Um9vdE5vZGUoKS5xdWVyeVNlbGVjdG9yQWxsKCdbaXRlbXNjb3BlXVtpdGVtdHlwZV0nKSlcbiAgICAgIC5maWx0ZXIoKG5vZGUpID0+XG4gICAgICAgIHRoaXMuY2hlY2tUeXBlXy5jaGVja1N0cmluZyhcbiAgICAgICAgICBub2RlLmdldEF0dHJpYnV0ZSgnaXRlbXR5cGUnKSxcbiAgICAgICAgICBBTExPV0VEX1RZUEVTXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgbm9kZUxpc3RbaV0gJiYgY29uZmlnID09IG51bGw7IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGVMaXN0W2ldO1xuICAgICAgaWYgKHRoaXMuYWNjZXNzXyA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuYWNjZXNzXyA9IHRoaXMuZGlzY292ZXJBY2Nlc3NfKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnByb2R1Y3RJZF8pIHtcbiAgICAgICAgdGhpcy5wcm9kdWN0SWRfID0gdGhpcy5kaXNjb3ZlclByb2R1Y3RJZF8oZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBjb25maWcgPSB0aGlzLmdldFBhZ2VDb25maWdfKCk7XG4gICAgfVxuICAgIHJldHVybiBjb25maWc7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9XG4gICAqL1xuICBjaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuZG9jXy5nZXRCb2R5KCkpIHtcbiAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHdob2xlIGA8aGVhZD5gIGlzIHBhcnNlZC5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50cnlFeHRyYWN0Q29uZmlnXygpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshTm9kZX0gcm9vdE5vZGVcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250cm9sRmxhZyhyb290Tm9kZSkge1xuICAvLyBMb29rIGZvciB0aGUgZmxhZyBpbiBgbWV0YWAuXG4gIGNvbnN0IGZsYWcgPSBnZXRNZXRhVGFnKHJvb3ROb2RlLCBDT05UUk9MX0ZMQUcpO1xuICBpZiAoZmxhZykge1xuICAgIHJldHVybiBmbGFnO1xuICB9XG4gIC8vIExvb2sgZm9yIHRoZSBmbGFnIGluIGBzY3JpcHRgLlxuICBjb25zdCBlbCA9IHJvb3ROb2RlLnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFske0NPTlRST0xfRkxBR31dYCk7XG4gIGlmIChlbCkge1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoQ09OVFJPTF9GTEFHKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBmcm9tIGNvbnRlbnQgYXR0cmlidXRlIG9mIGEgbWV0YSB0YWcgd2l0aCBnaXZlbiBuYW1lLlxuICpcbiAqIElmIG11bHRpcGxlIHRhZ3MgYXJlIGZvdW5kLCB0aGUgZmlyc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHshTm9kZX0gcm9vdE5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSB0YWcgbmFtZSB0byBsb29rIGZvci5cbiAqIEByZXR1cm4gez9zdHJpbmd9IGF0dHJpYnV0ZSB2YWx1ZSBvciBlbXB0eSBzdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRNZXRhVGFnKHJvb3ROb2RlLCBuYW1lKSB7XG4gIGNvbnN0IGVsID0gcm9vdE5vZGUucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPVwiJHtuYW1lfVwiXWApO1xuICBpZiAoZWwpIHtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCdjb250ZW50Jyk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jQ2xhc3NGb3JUZXN0aW5nKCkge1xuICByZXR1cm4gRG9jO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge3VzZXJ9IGZyb20gJy4uL3V0aWxzL2Vycm9yLWxvZ2dlcic7XG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgUGFnZUNvbmZpZyB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZHVjdE9yUHVibGljYXRpb25JZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxvY2tlZFxuICAgKi9cbiAgY29uc3RydWN0b3IocHJvZHVjdE9yUHVibGljYXRpb25JZCwgbG9ja2VkKSB7XG4gICAgbGV0IHB1YmxpY2F0aW9uSWQsIHByb2R1Y3RJZCwgbGFiZWw7XG4gICAgY29uc3QgZGl2ID0gcHJvZHVjdE9yUHVibGljYXRpb25JZC5pbmRleE9mKCc6Jyk7XG4gICAgaWYgKGRpdiAhPSAtMSkge1xuICAgICAgLy8gVGhlIGFyZ3VtZW50IGlzIGEgcHJvZHVjdCBpZC5cbiAgICAgIHByb2R1Y3RJZCA9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWQ7XG4gICAgICBwdWJsaWNhdGlvbklkID0gcHJvZHVjdElkLnN1YnN0cmluZygwLCBkaXYpO1xuICAgICAgbGFiZWwgPSBwcm9kdWN0SWQuc3Vic3RyaW5nKGRpdiArIDEpO1xuICAgICAgaWYgKGxhYmVsID09ICcqJykge1xuICAgICAgICB1c2VyKCkuZXhwZWN0ZWRFcnJvcignd2lsZGNhcmQgZGlzYWxsb3dlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgYXJndW1lbnQgaXMgYSBwdWJsaWNhdGlvbiBpZC5cbiAgICAgIHB1YmxpY2F0aW9uSWQgPSBwcm9kdWN0T3JQdWJsaWNhdGlvbklkO1xuICAgICAgcHJvZHVjdElkID0gbnVsbDtcbiAgICAgIGxhYmVsID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5wdWJsaWNhdGlvbklkXyA9IHB1YmxpY2F0aW9uSWQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnByb2R1Y3RJZF8gPSBwcm9kdWN0SWQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5sb2NrZWRfID0gbG9ja2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFB1YmxpY2F0aW9uSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHVibGljYXRpb25JZF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFByb2R1Y3RJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9kdWN0SWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRMYWJlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzTG9ja2VkKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2tlZF87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IExvYWRzIGFsbCBwb2x5ZmlsbHMgbmVlZGVkIGJ5IHRoZSBwcm9qZWN0LlxuICogVGhpcyBsaXN0IHNob3VsZCBub3QgZ2V0IGxvbmdlciB3aXRob3V0IGEgdmVyeSBnb29kIHJlYXNvbi5cbiAqL1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxBcnJheUluY2x1ZGVzfSBmcm9tICcuL3BvbHlmaWxscy9hcnJheS1pbmNsdWRlcyc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbERPTVRva2VuTGlzdFRvZ2dsZX0gZnJvbSAnLi9wb2x5ZmlsbHMvZG9tdG9rZW5saXN0LXRvZ2dsZSc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbERvY0NvbnRhaW5zfSBmcm9tICcuL3BvbHlmaWxscy9kb2N1bWVudC1jb250YWlucyc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbE1hdGhTaWdufSBmcm9tICcuL3BvbHlmaWxscy9tYXRoLXNpZ24nO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxPYmplY3RBc3NpZ259IGZyb20gJy4vcG9seWZpbGxzL29iamVjdC1hc3NpZ24nO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxPYmplY3RWYWx1ZXN9IGZyb20gJy4vcG9seWZpbGxzL29iamVjdC12YWx1ZXMnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxQcm9taXNlfSBmcm9tICcuL3BvbHlmaWxscy9wcm9taXNlJztcblxuaW5zdGFsbERPTVRva2VuTGlzdFRvZ2dsZShzZWxmKTtcbmluc3RhbGxNYXRoU2lnbihzZWxmKTtcbmluc3RhbGxPYmplY3RBc3NpZ24oc2VsZik7XG5pbnN0YWxsT2JqZWN0VmFsdWVzKHNlbGYpO1xuaW5zdGFsbFByb21pc2Uoc2VsZik7XG5pbnN0YWxsRG9jQ29udGFpbnMoc2VsZik7XG5pbnN0YWxsQXJyYXlJbmNsdWRlcyhzZWxmKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIGFycmF5IGFuZCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXI9fSBmcm9tSW5kZXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhpcyB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlcyh2YWx1ZSwgZnJvbUluZGV4ID0gMCkge1xuICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgbGV0IGkgPSBmcm9tSW5kZXggPj0gMCA/IGZyb21JbmRleCA6IE1hdGgubWF4KGxlbiArIGZyb21JbmRleCwgMCk7XG4gIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCBvdGhlciA9IHRoaXNbaV07XG4gICAgLy8gSWYgdmFsdWUgaGFzIGJlZW4gZm91bmQgT1IgKHZhbHVlIGlzIE5hTiBBTkQgb3RoZXIgaXMgTmFOKVxuICAgIC8qZXNsaW50IFwibm8tc2VsZi1jb21wYXJlXCI6IDAqL1xuICAgIGlmIChvdGhlciA9PT0gdmFsdWUgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIEFycmF5LmNvbnRhaW5zIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLkFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnaW5jbHVkZXMnLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGluY2x1ZGVzLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIGBkb2N1bWVudC5jb250YWlucygpYCBtZXRob2QuIE5vdGljZSB0aGF0IGFjY29yZGluZyB0byBzcGVjXG4gKiBgZG9jdW1lbnQuY29udGFpbnNgIGlzIGluY2x1c2lvbmFyeS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm9kZS9jb250YWluc1xuICogQHBhcmFtIHs/Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0aGlzIHtOb2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnMobm9kZSkge1xuICAvLyBQZXIgc3BlYywgXCJjb250YWluc1wiIG1ldGhvZCBpcyBpbmNsdXNpb25hcnlcbiAgLy8gaS5lLiBgbm9kZS5jb250YWlucyhub2RlKSA9PSB0cnVlYC4gSG93ZXZlciwgd2Ugc3RpbGwgbmVlZCB0byB0ZXN0XG4gIC8vIGVxdWFsaXR5IHRvIHRoZSBkb2N1bWVudCBpdHNlbGYuXG4gIHJldHVybiBub2RlID09IHRoaXMgfHwgdGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSk7XG59XG5cbi8qKlxuICogUG9seWZpbGxzIGBIVE1MRG9jdW1lbnQuY29udGFpbnNgIEFQSS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5IVE1MRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uSFRNTERvY3VtZW50LnByb3RvdHlwZSwgJ2NvbnRhaW5zJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBjb250YWlucyxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBgRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGUodG9rZW4sIGZvcmNlKWAgbWV0aG9kLlxuICogVGhpcyBpcyBzcGVjaWFsbHkgaW1wb3J0YW50IGJlY2F1c2UgSUUgZG9lcyBub3Qgc3VwcG9ydCBgZm9yY2VgIGF0dHJpYnV0ZS5cbiAqIFNlZSBodHRwczovL2dvby5nbC9oZ0tOWVkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9rZW5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGZvcmNlXG4gKiBAdGhpcyB7RE9NVG9rZW5MaXN0fVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZSh0b2tlbiwgZm9yY2UpIHtcbiAgY29uc3QgcmVtb3ZlID0gZm9yY2UgPT09IHVuZGVmaW5lZCA/IHRoaXMuY29udGFpbnModG9rZW4pIDogIWZvcmNlO1xuICBpZiAocmVtb3ZlKSB7XG4gICAgdGhpcy5yZW1vdmUodG9rZW4pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmFkZCh0b2tlbik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBQb2x5ZmlsbHMgYERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlYCBBUEkgaW4gSUUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKGlzSWUod2luKSAmJiB3aW4uRE9NVG9rZW5MaXN0KSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uRE9NVG9rZW5MaXN0LnByb3RvdHlwZSwgJ3RvZ2dsZScsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdG9nZ2xlLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIGEgSUUgYnJvd3Nlci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0llKHdpbikge1xuICByZXR1cm4gL1RyaWRlbnR8TVNJRXxJRU1vYmlsZS9pLnRlc3Qod2luLm5hdmlnYXRvci51c2VyQWdlbnQpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgbnVtYmVyIHggYW5kIHJldHVybnMgaXRzIHNpZ24uIEZvciBwb3NpdGl2ZSB4IHJldHVybnMgMSwgZm9yXG4gKiBuZWdhdGl2ZSwgLTEuIEZvciAwIGFuZCAtMCwgcmV0dXJucyAwIGFuZCAtMCByZXNwZWN0aXZlbHkuIEZvciBhbnkgbnVtYmVyXG4gKiB0aGF0IHBhcnNlcyB0byBOYU4sIHJldHVybnMgTmFOLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2lnbih4KSB7XG4gIHggPSBOdW1iZXIoeCk7XG5cbiAgLy8gSWYgeCBpcyAwLCAtMCwgb3IgTmFOLCByZXR1cm4gaXQuXG4gIGlmICgheCkge1xuICAgIHJldHVybiB4O1xuICB9XG5cbiAgcmV0dXJuIHggPiAwID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIE1hdGguc2lnbiBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5NYXRoLnNpZ24pIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbi5NYXRoLCAnc2lnbicsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogc2lnbixcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ29waWVzIHZhbHVlcyBvZiBhbGwgZW51bWVyYWJsZSBvd24gcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZVxuICogb2JqZWN0cyAocHJvdmlkZWQgYXMgZXh0ZW5kZWQgYXJndW1lbnRzIHRvIHRoZSBmdW5jdGlvbikgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX2FyZ3NcbiAqIEByZXR1cm5zIHshT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgdmFyX2FyZ3MpIHtcbiAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gIH1cblxuICBjb25zdCBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG4vKipcbiAqIFNldHMgdGhlIE9iamVjdC5hc3NpZ24gcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uT2JqZWN0LmFzc2lnbikge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLk9iamVjdCwgJ2Fzc2lnbicsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogYXNzaWduLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBPYmplY3QudmFsdWVzYCBBUEkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX29iamVjdHMvT2JqZWN0L3ZhbHVlcy5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldFxuICogQHJldHVybnMgeyFBcnJheTwqPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbHVlcyh0YXJnZXQpIHtcbiAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gIH1cblxuICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgZm9yIChjb25zdCBrZXkgaW4gdGFyZ2V0KSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpKSB7XG4gICAgICBvdXRwdXQucHVzaCh0YXJnZXRba2V5XSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgT2JqZWN0LnZhbHVlcyBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5PYmplY3QudmFsdWVzKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uT2JqZWN0LCAndmFsdWVzJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZXMsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IFByb21pc2UgZnJvbSAncHJvbWlzZS1wanMvcHJvbWlzZSc7XG5cbi8qKlxuICogU2V0cyB0aGUgUHJvbWlzZSBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5Qcm9taXNlKSB7XG4gICAgd2luLlByb21pc2UgPSAvKiogQHR5cGUgez99ICovIChQcm9taXNlKTtcbiAgICAvLyBJbiBiYWJlbCB0aGUgKiBleHBvcnQgaXMgYW4gT2JqZWN0IHdpdGggYSBkZWZhdWx0IHByb3BlcnR5LlxuICAgIC8vIEluIGNsb3N1cmUgY29tcGlsZXIgaXQgaXMgdGhlIFByb21pc2UgZnVuY3Rpb24gaXRzZWxmLlxuICAgIGlmIChQcm9taXNlLmRlZmF1bHQpIHtcbiAgICAgIHdpbi5Qcm9taXNlID0gUHJvbWlzZS5kZWZhdWx0O1xuICAgIH1cbiAgICAvLyBXZSBjb3B5IHRoZSBpbmRpdmlkdWFsIHN0YXRpYyBtZXRob2RzLCBiZWNhdXNlIGNsb3N1cmVcbiAgICAvLyBjb21waWxlciBmbGF0dGVucyB0aGUgcG9seWZpbGwgbmFtZXNwYWNlLlxuICAgIHdpbi5Qcm9taXNlLnJlc29sdmUgPSBQcm9taXNlLnJlc29sdmU7XG4gICAgd2luLlByb21pc2UucmVqZWN0ID0gUHJvbWlzZS5yZWplY3Q7XG4gICAgd2luLlByb21pc2UuYWxsID0gUHJvbWlzZS5hbGw7XG4gICAgd2luLlByb21pc2UucmFjZSA9IFByb21pc2UucmFjZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmNsYXNzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgbGFiZWwoKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB1bnVzZWRJbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PCo+fVxuICAgKi9cbiAgdG9BcnJheSh1bnVzZWRJbmNsdWRlTGFiZWwgPSB0cnVlKSB7fVxufVxuLyoqIEBlbnVtIHtudW1iZXJ9ICovXG5jb25zdCBBbmFseXRpY3NFdmVudCA9IHtcbiAgVU5LTk9XTjogMCxcbiAgSU1QUkVTU0lPTl9QQVlXQUxMOiAxLFxuICBJTVBSRVNTSU9OX0FEOiAyLFxuICBJTVBSRVNTSU9OX09GRkVSUzogMyxcbiAgSU1QUkVTU0lPTl9TVUJTQ1JJQkVfQlVUVE9OOiA0LFxuICBJTVBSRVNTSU9OX1NNQVJUQk9YOiA1LFxuICBJTVBSRVNTSU9OX1NXR19CVVRUT046IDYsXG4gIElNUFJFU1NJT05fQ0xJQ0tfVE9fU0hPV19PRkZFUlM6IDcsXG4gIElNUFJFU1NJT05fQ0xJQ0tfVE9fU0hPV19PRkZFUlNfT1JfQUxSRUFEWV9TVUJTQ1JJQkVEOiA4LFxuICBJTVBSRVNTSU9OX1NVQlNDUklQVElPTl9DT01QTEVURTogOSxcbiAgSU1QUkVTU0lPTl9BQ0NPVU5UX0NIQU5HRUQ6IDEwLFxuICBJTVBSRVNTSU9OX1BBR0VfTE9BRDogMTEsXG4gIElNUFJFU1NJT05fTElOSzogMTIsXG4gIElNUFJFU1NJT05fU0FWRV9TVUJTQ1JfVE9fR09PR0xFOiAxMyxcbiAgSU1QUkVTU0lPTl9HT09HTEVfVVBEQVRFRDogMTQsXG4gIElNUFJFU1NJT05fU0hPV19PRkZFUlNfU01BUlRCT1g6IDE1LFxuICBJTVBSRVNTSU9OX1NIT1dfT0ZGRVJTX1NXR19CVVRUT046IDE2LFxuICBJTVBSRVNTSU9OX1NFTEVDVF9PRkZFUl9TTUFSVEJPWDogMTcsXG4gIElNUFJFU1NJT05fU0VMRUNUX09GRkVSX1NXR19CVVRUT046IDE4LFxuICBJTVBSRVNTSU9OX1NIT1dfQ09OVFJJQlVUSU9OU19TV0dfQlVUVE9OOiAxOSxcbiAgSU1QUkVTU0lPTl9TRUxFQ1RfQ09OVFJJQlVUSU9OX1NXR19CVVRUT046IDIwLFxuICBJTVBSRVNTSU9OX01FVEVSX1RPQVNUOiAyMSxcbiAgSU1QUkVTU0lPTl9SRUdXQUxMOiAyMixcbiAgSU1QUkVTU0lPTl9TSE9XQ0FTRV9SRUdXQUxMOiAyMyxcbiAgSU1QUkVTU0lPTl9TV0dfU1VCU0NSSVBUSU9OX01JTklfUFJPTVBUOiAyNCxcbiAgSU1QUkVTU0lPTl9TV0dfQ09OVFJJQlVUSU9OX01JTklfUFJPTVBUOiAyNSxcbiAgSU1QUkVTU0lPTl9DT05UUklCVVRJT05fT0ZGRVJTOiAyNixcbiAgQUNUSU9OX1NVQlNDUklCRTogMTAwMCxcbiAgQUNUSU9OX1BBWU1FTlRfQ09NUExFVEU6IDEwMDEsXG4gIEFDVElPTl9BQ0NPVU5UX0NSRUFURUQ6IDEwMDIsXG4gIEFDVElPTl9BQ0NPVU5UX0FDS05PV0xFREdFRDogMTAwMyxcbiAgQUNUSU9OX1NVQlNDUklQVElPTlNfTEFORElOR19QQUdFOiAxMDA0LFxuICBBQ1RJT05fUEFZTUVOVF9GTE9XX1NUQVJURUQ6IDEwMDUsXG4gIEFDVElPTl9PRkZFUl9TRUxFQ1RFRDogMTAwNixcbiAgQUNUSU9OX1NXR19CVVRUT05fQ0xJQ0s6IDEwMDcsXG4gIEFDVElPTl9WSUVXX09GRkVSUzogMTAwOCxcbiAgQUNUSU9OX0FMUkVBRFlfU1VCU0NSSUJFRDogMTAwOSxcbiAgQUNUSU9OX05FV19ERUZFUlJFRF9BQ0NPVU5UOiAxMDEwLFxuICBBQ1RJT05fTElOS19DT05USU5VRTogMTAxMSxcbiAgQUNUSU9OX0xJTktfQ0FOQ0VMOiAxMDEyLFxuICBBQ1RJT05fR09PR0xFX1VQREFURURfQ0xPU0U6IDEwMTMsXG4gIEFDVElPTl9VU0VSX0NBTkNFTEVEX1BBWUZMT1c6IDEwMTQsXG4gIEFDVElPTl9TQVZFX1NVQlNDUl9UT19HT09HTEVfQ09OVElOVUU6IDEwMTUsXG4gIEFDVElPTl9TQVZFX1NVQlNDUl9UT19HT09HTEVfQ0FOQ0VMOiAxMDE2LFxuICBBQ1RJT05fU1dHX0JVVFRPTl9TSE9XX09GRkVSU19DTElDSzogMTAxNyxcbiAgQUNUSU9OX1NXR19CVVRUT05fU0VMRUNUX09GRkVSX0NMSUNLOiAxMDE4LFxuICBBQ1RJT05fU1dHX0JVVFRPTl9TSE9XX0NPTlRSSUJVVElPTlNfQ0xJQ0s6IDEwMTksXG4gIEFDVElPTl9TV0dfQlVUVE9OX1NFTEVDVF9DT05UUklCVVRJT05fQ0xJQ0s6IDEwMjAsXG4gIEFDVElPTl9VU0VSX0NPTlNFTlRfREVGRVJSRURfQUNDT1VOVDogMTAyMSxcbiAgQUNUSU9OX1VTRVJfREVOWV9ERUZFUlJFRF9BQ0NPVU5UOiAxMDIyLFxuICBBQ1RJT05fREVGRVJSRURfQUNDT1VOVF9SRURJUkVDVDogMTAyMyxcbiAgQUNUSU9OX0dFVF9FTlRJVExFTUVOVFM6IDEwMjQsXG4gIEFDVElPTl9NRVRFUl9UT0FTVF9TVUJTQ1JJQkVfQ0xJQ0s6IDEwMjUsXG4gIEFDVElPTl9NRVRFUl9UT0FTVF9FWFBBTkRFRDogMTAyNixcbiAgQUNUSU9OX01FVEVSX1RPQVNUX0NMT1NFRF9CWV9BUlRJQ0xFX0lOVEVSQUNUSU9OOiAxMDI3LFxuICBBQ1RJT05fTUVURVJfVE9BU1RfQ0xPU0VEX0JZX1NXSVBFX0RPV046IDEwMjgsXG4gIEFDVElPTl9NRVRFUl9UT0FTVF9DTE9TRURfQllfWF9DTElDS0VEOiAxMDI5LFxuICBBQ1RJT05fU1dHX1NVQlNDUklQVElPTl9NSU5JX1BST01QVF9DTElDSzogMTAzMCxcbiAgQUNUSU9OX1NXR19DT05UUklCVVRJT05fTUlOSV9QUk9NUFRfQ0xJQ0s6IDEwMzEsXG4gIEFDVElPTl9TV0dfU1VCU0NSSVBUSU9OX01JTklfUFJPTVBUX0NMT1NFOiAxMDMyLFxuICBBQ1RJT05fU1dHX0NPTlRSSUJVVElPTl9NSU5JX1BST01QVF9DTE9TRTogMTAzMyxcbiAgRVZFTlRfUEFZTUVOVF9GQUlMRUQ6IDIwMDAsXG4gIEVWRU5UX0NVU1RPTTogMzAwMCxcbiAgRVZFTlRfQ09ORklSTV9UWF9JRDogMzAwMSxcbiAgRVZFTlRfQ0hBTkdFRF9UWF9JRDogMzAwMixcbiAgRVZFTlRfR1BBWV9OT19UWF9JRDogMzAwMyxcbiAgRVZFTlRfR1BBWV9DQU5OT1RfQ09ORklSTV9UWF9JRDogMzAwNCxcbiAgRVZFTlRfR09PR0xFX1VQREFURUQ6IDMwMDUsXG4gIEVWRU5UX05FV19UWF9JRDogMzAwNixcbiAgRVZFTlRfVU5MT0NLRURfQllfU1VCU0NSSVBUSU9OOiAzMDA3LFxuICBFVkVOVF9VTkxPQ0tFRF9CWV9NRVRFUjogMzAwOCxcbiAgRVZFTlRfTk9fRU5USVRMRU1FTlRTOiAzMDA5LFxuICBFVkVOVF9IQVNfTUVURVJJTkdfRU5USVRMRU1FTlRTOiAzMDEwLFxuICBFVkVOVF9PRkZFUkVEX01FVEVSOiAzMDExLFxuICBFVkVOVF9VTkxPQ0tFRF9GUkVFX1BBR0U6IDMwMTIsXG4gIEVWRU5UX1NVQlNDUklQVElPTl9TVEFURTogNDAwMCxcbn07XG4vKiogQGVudW0ge251bWJlcn0gKi9cbmNvbnN0IEVudGl0bGVtZW50UmVzdWx0ID0ge1xuICBVTktOT1dOX0VOVElUTEVNRU5UX1JFU1VMVDogMCxcbiAgVU5MT0NLRURfU1VCU0NSSUJFUjogMTAwMSxcbiAgVU5MT0NLRURfRlJFRTogMTAwMixcbiAgVU5MT0NLRURfTUVURVI6IDEwMDMsXG4gIExPQ0tFRF9SRUdXQUxMOiAyMDAxLFxuICBMT0NLRURfUEFZV0FMTDogMjAwMixcbn07XG4vKiogQGVudW0ge251bWJlcn0gKi9cbmNvbnN0IEVudGl0bGVtZW50U291cmNlID0ge1xuICBVTktOT1dOX0VOVElUTEVNRU5UX1NPVVJDRTogMCxcbiAgR09PR0xFX1NVQlNDUklCRVJfRU5USVRMRU1FTlQ6IDEwMDEsXG4gIEdPT0dMRV9TSE9XQ0FTRV9NRVRFUklOR19TRVJWSUNFOiAyMDAxLFxuICBQVUJMSVNIRVJfRU5USVRMRU1FTlQ6IDMwMDEsXG59O1xuLyoqIEBlbnVtIHtudW1iZXJ9ICovXG5jb25zdCBFdmVudE9yaWdpbmF0b3IgPSB7XG4gIFVOS05PV05fQ0xJRU5UOiAwLFxuICBTV0dfQ0xJRU5UOiAxLFxuICBBTVBfQ0xJRU5UOiAyLFxuICBQUk9QRU5TSVRZX0NMSUVOVDogMyxcbiAgU1dHX1NFUlZFUjogNCxcbiAgUFVCTElTSEVSX0NMSUVOVDogNSxcbiAgU0hPV0NBU0VfQ0xJRU5UOiA2LFxufTtcblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgQWNjb3VudENyZWF0aW9uUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuY29tcGxldGVfID0gZGF0YVtiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbYmFzZV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRDb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wbGV0ZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0Q29tcGxldGUodmFsdWUpIHtcbiAgICB0aGlzLmNvbXBsZXRlXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUxhYmVsXG4gICAqIEByZXR1cm4geyFBcnJheTw/Pn1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KGluY2x1ZGVMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBhcnIgPSBbXG4gICAgICAgIHRoaXMuY29tcGxldGVfLCAvLyBmaWVsZCAxIC0gY29tcGxldGVcbiAgICBdO1xuICAgIGlmIChpbmNsdWRlTGFiZWwpIHtcbiAgICAgIGFyci51bnNoaWZ0KHRoaXMubGFiZWwoKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGxhYmVsKCkge1xuICAgIHJldHVybiAnQWNjb3VudENyZWF0aW9uUmVxdWVzdCc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgQWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuc3Vic2NyaWJlck9yTWVtYmVyXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmxpbmtSZXF1ZXN0ZWRfID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldFN1YnNjcmliZXJPck1lbWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVyT3JNZW1iZXJfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldFN1YnNjcmliZXJPck1lbWJlcih2YWx1ZSkge1xuICAgIHRoaXMuc3Vic2NyaWJlck9yTWVtYmVyXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgZ2V0TGlua1JlcXVlc3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5saW5rUmVxdWVzdGVkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAqL1xuICBzZXRMaW5rUmVxdWVzdGVkKHZhbHVlKSB7XG4gICAgdGhpcy5saW5rUmVxdWVzdGVkXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUxhYmVsXG4gICAqIEByZXR1cm4geyFBcnJheTw/Pn1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KGluY2x1ZGVMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBhcnIgPSBbXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlck9yTWVtYmVyXywgLy8gZmllbGQgMSAtIHN1YnNjcmliZXJfb3JfbWVtYmVyXG4gICAgICAgIHRoaXMubGlua1JlcXVlc3RlZF8sIC8vIGZpZWxkIDIgLSBsaW5rX3JlcXVlc3RlZFxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBBbmFseXRpY3NDb250ZXh0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCo+PX0gZGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbmNsdWRlc0xhYmVsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10sIGluY2x1ZGVzTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYmFzZSA9IGluY2x1ZGVzTGFiZWwgPyAxIDogMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLmVtYmVkZGVyT3JpZ2luXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMudHJhbnNhY3Rpb25JZF8gPSBkYXRhWzEgKyBiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbMSArIGJhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucmVmZXJyaW5nT3JpZ2luXyA9IGRhdGFbMiArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVsyICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy51dG1Tb3VyY2VfID0gZGF0YVszICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzMgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnV0bUNhbXBhaWduXyA9IGRhdGFbNCArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVs0ICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy51dG1NZWRpdW1fID0gZGF0YVs1ICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzUgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnNrdV8gPSBkYXRhWzYgKyBiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbNiArIGJhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnJlYWR5VG9QYXlfID0gZGF0YVs3ICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzcgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IUFycmF5PHN0cmluZz59ICovXG4gICAgdGhpcy5sYWJlbF8gPSBkYXRhWzggKyBiYXNlXSB8fCBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLmNsaWVudFZlcnNpb25fID0gZGF0YVs5ICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzkgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnVybF8gPSBkYXRhWzEwICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEwICsgYmFzZV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldEVtYmVkZGVyT3JpZ2luKCkge1xuICAgIHJldHVybiB0aGlzLmVtYmVkZGVyT3JpZ2luXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldEVtYmVkZGVyT3JpZ2luKHZhbHVlKSB7XG4gICAgdGhpcy5lbWJlZGRlck9yaWdpbl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0VHJhbnNhY3Rpb25JZCgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbklkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFRyYW5zYWN0aW9uSWQodmFsdWUpIHtcbiAgICB0aGlzLnRyYW5zYWN0aW9uSWRfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFJlZmVycmluZ09yaWdpbigpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZlcnJpbmdPcmlnaW5fO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0UmVmZXJyaW5nT3JpZ2luKHZhbHVlKSB7XG4gICAgdGhpcy5yZWZlcnJpbmdPcmlnaW5fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFV0bVNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy51dG1Tb3VyY2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0VXRtU291cmNlKHZhbHVlKSB7XG4gICAgdGhpcy51dG1Tb3VyY2VfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFV0bUNhbXBhaWduKCkge1xuICAgIHJldHVybiB0aGlzLnV0bUNhbXBhaWduXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFV0bUNhbXBhaWduKHZhbHVlKSB7XG4gICAgdGhpcy51dG1DYW1wYWlnbl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0VXRtTWVkaXVtKCkge1xuICAgIHJldHVybiB0aGlzLnV0bU1lZGl1bV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRVdG1NZWRpdW0odmFsdWUpIHtcbiAgICB0aGlzLnV0bU1lZGl1bV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0U2t1KCkge1xuICAgIHJldHVybiB0aGlzLnNrdV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRTa3UodmFsdWUpIHtcbiAgICB0aGlzLnNrdV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldFJlYWR5VG9QYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZHlUb1BheV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0UmVhZHlUb1BheSh2YWx1ZSkge1xuICAgIHRoaXMucmVhZHlUb1BheV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAgICovXG4gIGdldExhYmVsTGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gdmFsdWVcbiAgICovXG4gIHNldExhYmVsTGlzdCh2YWx1ZSkge1xuICAgIHRoaXMubGFiZWxfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldENsaWVudFZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50VmVyc2lvbl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRDbGllbnRWZXJzaW9uKHZhbHVlKSB7XG4gICAgdGhpcy5jbGllbnRWZXJzaW9uXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMudXJsXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFVybCh2YWx1ZSkge1xuICAgIHRoaXMudXJsXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUxhYmVsXG4gICAqIEByZXR1cm4geyFBcnJheTw/Pn1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KGluY2x1ZGVMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBhcnIgPSBbXG4gICAgICAgIHRoaXMuZW1iZWRkZXJPcmlnaW5fLCAvLyBmaWVsZCAxIC0gZW1iZWRkZXJfb3JpZ2luXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25JZF8sIC8vIGZpZWxkIDIgLSB0cmFuc2FjdGlvbl9pZFxuICAgICAgICB0aGlzLnJlZmVycmluZ09yaWdpbl8sIC8vIGZpZWxkIDMgLSByZWZlcnJpbmdfb3JpZ2luXG4gICAgICAgIHRoaXMudXRtU291cmNlXywgLy8gZmllbGQgNCAtIHV0bV9zb3VyY2VcbiAgICAgICAgdGhpcy51dG1DYW1wYWlnbl8sIC8vIGZpZWxkIDUgLSB1dG1fY2FtcGFpZ25cbiAgICAgICAgdGhpcy51dG1NZWRpdW1fLCAvLyBmaWVsZCA2IC0gdXRtX21lZGl1bVxuICAgICAgICB0aGlzLnNrdV8sIC8vIGZpZWxkIDcgLSBza3VcbiAgICAgICAgdGhpcy5yZWFkeVRvUGF5XywgLy8gZmllbGQgOCAtIHJlYWR5X3RvX3BheVxuICAgICAgICB0aGlzLmxhYmVsXywgLy8gZmllbGQgOSAtIGxhYmVsXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbl8sIC8vIGZpZWxkIDEwIC0gY2xpZW50X3ZlcnNpb25cbiAgICAgICAgdGhpcy51cmxfLCAvLyBmaWVsZCAxMSAtIHVybFxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbmFseXRpY3NDb250ZXh0JztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBBbmFseXRpY3NFdmVudE1ldGEge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj49fSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVzTGFiZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSwgaW5jbHVkZXNMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBiYXNlID0gaW5jbHVkZXNMYWJlbCA/IDEgOiAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RXZlbnRPcmlnaW5hdG9yfSAqL1xuICAgIHRoaXMuZXZlbnRPcmlnaW5hdG9yXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/RXZlbnRPcmlnaW5hdG9yfVxuICAgKi9cbiAgZ2V0RXZlbnRPcmlnaW5hdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50T3JpZ2luYXRvcl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnRPcmlnaW5hdG9yfSB2YWx1ZVxuICAgKi9cbiAgc2V0RXZlbnRPcmlnaW5hdG9yKHZhbHVlKSB7XG4gICAgdGhpcy5ldmVudE9yaWdpbmF0b3JfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P2Jvb2xlYW59XG4gICAqL1xuICBnZXRJc0Zyb21Vc2VyQWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldElzRnJvbVVzZXJBY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5ldmVudE9yaWdpbmF0b3JfLCAvLyBmaWVsZCAxIC0gZXZlbnRfb3JpZ2luYXRvclxuICAgICAgICB0aGlzLmlzRnJvbVVzZXJBY3Rpb25fLCAvLyBmaWVsZCAyIC0gaXNfZnJvbV91c2VyX2FjdGlvblxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbmFseXRpY3NFdmVudE1ldGEnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIEFuYWx5dGljc1JlcXVlc3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj49fSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVzTGFiZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSwgaW5jbHVkZXNMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBiYXNlID0gaW5jbHVkZXNMYWJlbCA/IDEgOiAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/QW5hbHl0aWNzQ29udGV4dH0gKi9cbiAgICB0aGlzLmNvbnRleHRfID1cbiAgICAgIGRhdGFbYmFzZV0gPT0gbnVsbCB8fCBkYXRhW2Jhc2VdID09IHVuZGVmaW5lZFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBuZXcgQW5hbHl0aWNzQ29udGV4dChkYXRhW2Jhc2VdLCBpbmNsdWRlc0xhYmVsKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FuYWx5dGljc0V2ZW50fSAqL1xuICAgIHRoaXMuZXZlbnRfID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FuYWx5dGljc0V2ZW50TWV0YX0gKi9cbiAgICB0aGlzLm1ldGFfID1cbiAgICAgIGRhdGFbMiArIGJhc2VdID09IG51bGwgfHwgZGF0YVsyICsgYmFzZV0gPT0gdW5kZWZpbmVkXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IG5ldyBBbmFseXRpY3NFdmVudE1ldGEoZGF0YVsyICsgYmFzZV0sIGluY2x1ZGVzTGFiZWwpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RXZlbnRQYXJhbXN9ICovXG4gICAgdGhpcy5wYXJhbXNfID1cbiAgICAgIGRhdGFbMyArIGJhc2VdID09IG51bGwgfHwgZGF0YVszICsgYmFzZV0gPT0gdW5kZWZpbmVkXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IG5ldyBFdmVudFBhcmFtcyhkYXRhWzMgKyBiYXNlXSwgaW5jbHVkZXNMYWJlbCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P0FuYWx5dGljc0NvbnRleHR9XG4gICAqL1xuICBnZXRDb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFuYWx5dGljc0NvbnRleHR9IHZhbHVlXG4gICAqL1xuICBzZXRDb250ZXh0KHZhbHVlKSB7XG4gICAgdGhpcy5jb250ZXh0XyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9BbmFseXRpY3NFdmVudH1cbiAgICovXG4gIGdldEV2ZW50KCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBbmFseXRpY3NFdmVudH0gdmFsdWVcbiAgICovXG4gIHNldEV2ZW50KHZhbHVlKSB7XG4gICAgdGhpcy5ldmVudF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/QW5hbHl0aWNzRXZlbnRNZXRhfVxuICAgKi9cbiAgZ2V0TWV0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXRhXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBbmFseXRpY3NFdmVudE1ldGF9IHZhbHVlXG4gICAqL1xuICBzZXRNZXRhKHZhbHVlKSB7XG4gICAgdGhpcy5tZXRhXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9FdmVudFBhcmFtc31cbiAgICovXG4gIGdldFBhcmFtcygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJhbXNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUV2ZW50UGFyYW1zfSB2YWx1ZVxuICAgKi9cbiAgc2V0UGFyYW1zKHZhbHVlKSB7XG4gICAgdGhpcy5wYXJhbXNfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5jb250ZXh0XyA/IHRoaXMuY29udGV4dF8udG9BcnJheShpbmNsdWRlTGFiZWwpIDogW10sIC8vIGZpZWxkIDEgLSBjb250ZXh0XG4gICAgICAgIHRoaXMuZXZlbnRfLCAvLyBmaWVsZCAyIC0gZXZlbnRcbiAgICAgICAgdGhpcy5tZXRhXyA/IHRoaXMubWV0YV8udG9BcnJheShpbmNsdWRlTGFiZWwpIDogW10sIC8vIGZpZWxkIDMgLSBtZXRhXG4gICAgICAgIHRoaXMucGFyYW1zXyA/IHRoaXMucGFyYW1zXy50b0FycmF5KGluY2x1ZGVMYWJlbCkgOiBbXSwgLy8gZmllbGQgNCAtIHBhcmFtc1xuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdBbmFseXRpY3NSZXF1ZXN0JztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBFbnRpdGxlbWVudEp3dCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5qd3RfID0gZGF0YVtiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5zb3VyY2VfID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0Snd0KCkge1xuICAgIHJldHVybiB0aGlzLmp3dF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRKd3QodmFsdWUpIHtcbiAgICB0aGlzLmp3dF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0U291cmNlKCkge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRTb3VyY2UodmFsdWUpIHtcbiAgICB0aGlzLnNvdXJjZV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVMYWJlbFxuICAgKiBAcmV0dXJuIHshQXJyYXk8Pz59XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheShpbmNsdWRlTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYXJyID0gW1xuICAgICAgICB0aGlzLmp3dF8sIC8vIGZpZWxkIDEgLSBqd3RcbiAgICAgICAgdGhpcy5zb3VyY2VfLCAvLyBmaWVsZCAyIC0gc291cmNlXG4gICAgXTtcbiAgICBpZiAoaW5jbHVkZUxhYmVsKSB7XG4gICAgICBhcnIudW5zaGlmdCh0aGlzLmxhYmVsKCkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ0VudGl0bGVtZW50Snd0JztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBFbnRpdGxlbWVudHNSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCo+PX0gZGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbmNsdWRlc0xhYmVsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10sIGluY2x1ZGVzTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYmFzZSA9IGluY2x1ZGVzTGFiZWwgPyAxIDogMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VudGl0bGVtZW50Snd0fSAqL1xuICAgIHRoaXMudXNlZEVudGl0bGVtZW50XyA9XG4gICAgICBkYXRhW2Jhc2VdID09IG51bGwgfHwgZGF0YVtiYXNlXSA9PSB1bmRlZmluZWRcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogbmV3IEVudGl0bGVtZW50Snd0KGRhdGFbYmFzZV0sIGluY2x1ZGVzTGFiZWwpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/VGltZXN0YW1wfSAqL1xuICAgIHRoaXMuY2xpZW50RXZlbnRUaW1lXyA9XG4gICAgICBkYXRhWzEgKyBiYXNlXSA9PSBudWxsIHx8IGRhdGFbMSArIGJhc2VdID09IHVuZGVmaW5lZFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBuZXcgVGltZXN0YW1wKGRhdGFbMSArIGJhc2VdLCBpbmNsdWRlc0xhYmVsKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VudGl0bGVtZW50U291cmNlfSAqL1xuICAgIHRoaXMuZW50aXRsZW1lbnRTb3VyY2VfID0gZGF0YVsyICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzIgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VudGl0bGVtZW50UmVzdWx0fSAqL1xuICAgIHRoaXMuZW50aXRsZW1lbnRSZXN1bHRfID0gZGF0YVszICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzMgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnRva2VuXyA9IGRhdGFbNCArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVs0ICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuaXNVc2VyUmVnaXN0ZXJlZF8gPSBkYXRhWzUgKyBiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbNSArIGJhc2VdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudEp3dH1cbiAgICovXG4gIGdldFVzZWRFbnRpdGxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VkRW50aXRsZW1lbnRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVudGl0bGVtZW50Snd0fSB2YWx1ZVxuICAgKi9cbiAgc2V0VXNlZEVudGl0bGVtZW50KHZhbHVlKSB7XG4gICAgdGhpcy51c2VkRW50aXRsZW1lbnRfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1RpbWVzdGFtcH1cbiAgICovXG4gIGdldENsaWVudEV2ZW50VGltZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRFdmVudFRpbWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVRpbWVzdGFtcH0gdmFsdWVcbiAgICovXG4gIHNldENsaWVudEV2ZW50VGltZSh2YWx1ZSkge1xuICAgIHRoaXMuY2xpZW50RXZlbnRUaW1lXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudFNvdXJjZX1cbiAgICovXG4gIGdldEVudGl0bGVtZW50U291cmNlKCkge1xuICAgIHJldHVybiB0aGlzLmVudGl0bGVtZW50U291cmNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbnRpdGxlbWVudFNvdXJjZX0gdmFsdWVcbiAgICovXG4gIHNldEVudGl0bGVtZW50U291cmNlKHZhbHVlKSB7XG4gICAgdGhpcy5lbnRpdGxlbWVudFNvdXJjZV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/RW50aXRsZW1lbnRSZXN1bHR9XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudFJlc3VsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRpdGxlbWVudFJlc3VsdF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRSZXN1bHR9IHZhbHVlXG4gICAqL1xuICBzZXRFbnRpdGxlbWVudFJlc3VsdCh2YWx1ZSkge1xuICAgIHRoaXMuZW50aXRsZW1lbnRSZXN1bHRfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLnRva2VuXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFRva2VuKHZhbHVlKSB7XG4gICAgdGhpcy50b2tlbl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldElzVXNlclJlZ2lzdGVyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNVc2VyUmVnaXN0ZXJlZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0SXNVc2VyUmVnaXN0ZXJlZCh2YWx1ZSkge1xuICAgIHRoaXMuaXNVc2VyUmVnaXN0ZXJlZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVMYWJlbFxuICAgKiBAcmV0dXJuIHshQXJyYXk8Pz59XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheShpbmNsdWRlTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYXJyID0gW1xuICAgICAgICB0aGlzLnVzZWRFbnRpdGxlbWVudF8gPyB0aGlzLnVzZWRFbnRpdGxlbWVudF8udG9BcnJheShpbmNsdWRlTGFiZWwpIDogW10sIC8vIGZpZWxkIDEgLSB1c2VkX2VudGl0bGVtZW50XG4gICAgICAgIHRoaXMuY2xpZW50RXZlbnRUaW1lXyA/IHRoaXMuY2xpZW50RXZlbnRUaW1lXy50b0FycmF5KGluY2x1ZGVMYWJlbCkgOiBbXSwgLy8gZmllbGQgMiAtIGNsaWVudF9ldmVudF90aW1lXG4gICAgICAgIHRoaXMuZW50aXRsZW1lbnRTb3VyY2VfLCAvLyBmaWVsZCAzIC0gZW50aXRsZW1lbnRfc291cmNlXG4gICAgICAgIHRoaXMuZW50aXRsZW1lbnRSZXN1bHRfLCAvLyBmaWVsZCA0IC0gZW50aXRsZW1lbnRfcmVzdWx0XG4gICAgICAgIHRoaXMudG9rZW5fLCAvLyBmaWVsZCA1IC0gdG9rZW5cbiAgICAgICAgdGhpcy5pc1VzZXJSZWdpc3RlcmVkXywgLy8gZmllbGQgNiAtIGlzX3VzZXJfcmVnaXN0ZXJlZFxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdFbnRpdGxlbWVudHNSZXF1ZXN0JztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBFbnRpdGxlbWVudHNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5qd3RfID0gZGF0YVtiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5zd2dVc2VyVG9rZW5fID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0Snd0KCkge1xuICAgIHJldHVybiB0aGlzLmp3dF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRKd3QodmFsdWUpIHtcbiAgICB0aGlzLmp3dF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0U3dnVXNlclRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLnN3Z1VzZXJUb2tlbl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRTd2dVc2VyVG9rZW4odmFsdWUpIHtcbiAgICB0aGlzLnN3Z1VzZXJUb2tlbl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVMYWJlbFxuICAgKiBAcmV0dXJuIHshQXJyYXk8Pz59XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheShpbmNsdWRlTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYXJyID0gW1xuICAgICAgICB0aGlzLmp3dF8sIC8vIGZpZWxkIDEgLSBqd3RcbiAgICAgICAgdGhpcy5zd2dVc2VyVG9rZW5fLCAvLyBmaWVsZCAyIC0gc3dnX3VzZXJfdG9rZW5cbiAgICBdO1xuICAgIGlmIChpbmNsdWRlTGFiZWwpIHtcbiAgICAgIGFyci51bnNoaWZ0KHRoaXMubGFiZWwoKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGxhYmVsKCkge1xuICAgIHJldHVybiAnRW50aXRsZW1lbnRzUmVzcG9uc2UnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIEV2ZW50UGFyYW1zIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCo+PX0gZGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbmNsdWRlc0xhYmVsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10sIGluY2x1ZGVzTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYmFzZSA9IGluY2x1ZGVzTGFiZWwgPyAxIDogMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnNtYXJ0Ym94TWVzc2FnZV8gPSBkYXRhW2Jhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVtiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLmdwYXlUcmFuc2FjdGlvbklkXyA9IGRhdGFbMSArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVsxICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuaGFkTG9nZ2VkXyA9IGRhdGFbMiArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVsyICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5za3VfID0gZGF0YVszICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzMgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLm9sZFRyYW5zYWN0aW9uSWRfID0gZGF0YVs0ICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzQgKyBiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc1VzZXJSZWdpc3RlcmVkXyA9IGRhdGFbNSArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVs1ICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5zdWJzY3JpcHRpb25GbG93XyA9IGRhdGFbNiArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVs2ICsgYmFzZV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldFNtYXJ0Ym94TWVzc2FnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zbWFydGJveE1lc3NhZ2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0U21hcnRib3hNZXNzYWdlKHZhbHVlKSB7XG4gICAgdGhpcy5zbWFydGJveE1lc3NhZ2VfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldEdwYXlUcmFuc2FjdGlvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmdwYXlUcmFuc2FjdGlvbklkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldEdwYXlUcmFuc2FjdGlvbklkKHZhbHVlKSB7XG4gICAgdGhpcy5ncGF5VHJhbnNhY3Rpb25JZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldEhhZExvZ2dlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5oYWRMb2dnZWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldEhhZExvZ2dlZCh2YWx1ZSkge1xuICAgIHRoaXMuaGFkTG9nZ2VkXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRTa3UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2t1XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFNrdSh2YWx1ZSkge1xuICAgIHRoaXMuc2t1XyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRPbGRUcmFuc2FjdGlvbklkKCkge1xuICAgIHJldHVybiB0aGlzLm9sZFRyYW5zYWN0aW9uSWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0T2xkVHJhbnNhY3Rpb25JZCh2YWx1ZSkge1xuICAgIHRoaXMub2xkVHJhbnNhY3Rpb25JZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldElzVXNlclJlZ2lzdGVyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNVc2VyUmVnaXN0ZXJlZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0SXNVc2VyUmVnaXN0ZXJlZCh2YWx1ZSkge1xuICAgIHRoaXMuaXNVc2VyUmVnaXN0ZXJlZF8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0U3Vic2NyaXB0aW9uRmxvdygpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25GbG93XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldFN1YnNjcmlwdGlvbkZsb3codmFsdWUpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbkZsb3dfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5zbWFydGJveE1lc3NhZ2VfLCAvLyBmaWVsZCAxIC0gc21hcnRib3hfbWVzc2FnZVxuICAgICAgICB0aGlzLmdwYXlUcmFuc2FjdGlvbklkXywgLy8gZmllbGQgMiAtIGdwYXlfdHJhbnNhY3Rpb25faWRcbiAgICAgICAgdGhpcy5oYWRMb2dnZWRfLCAvLyBmaWVsZCAzIC0gaGFkX2xvZ2dlZFxuICAgICAgICB0aGlzLnNrdV8sIC8vIGZpZWxkIDQgLSBza3VcbiAgICAgICAgdGhpcy5vbGRUcmFuc2FjdGlvbklkXywgLy8gZmllbGQgNSAtIG9sZF90cmFuc2FjdGlvbl9pZFxuICAgICAgICB0aGlzLmlzVXNlclJlZ2lzdGVyZWRfLCAvLyBmaWVsZCA2IC0gaXNfdXNlcl9yZWdpc3RlcmVkXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uRmxvd18sIC8vIGZpZWxkIDcgLSBzdWJzY3JpcHRpb25fZmxvd1xuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdFdmVudFBhcmFtcyc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgRmluaXNoZWRMb2dnaW5nUmVzcG9uc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj49fSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVzTGFiZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSwgaW5jbHVkZXNMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBiYXNlID0gaW5jbHVkZXNMYWJlbCA/IDEgOiAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmNvbXBsZXRlXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuZXJyb3JfID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldENvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBsZXRlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAqL1xuICBzZXRDb21wbGV0ZSh2YWx1ZSkge1xuICAgIHRoaXMuY29tcGxldGVfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldEVycm9yKCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNldEVycm9yKHZhbHVlKSB7XG4gICAgdGhpcy5lcnJvcl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVMYWJlbFxuICAgKiBAcmV0dXJuIHshQXJyYXk8Pz59XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheShpbmNsdWRlTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYXJyID0gW1xuICAgICAgICB0aGlzLmNvbXBsZXRlXywgLy8gZmllbGQgMSAtIGNvbXBsZXRlXG4gICAgICAgIHRoaXMuZXJyb3JfLCAvLyBmaWVsZCAyIC0gZXJyb3JcbiAgICBdO1xuICAgIGlmIChpbmNsdWRlTGFiZWwpIHtcbiAgICAgIGFyci51bnNoaWZ0KHRoaXMubGFiZWwoKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGxhYmVsKCkge1xuICAgIHJldHVybiAnRmluaXNoZWRMb2dnaW5nUmVzcG9uc2UnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIExpbmtTYXZlVG9rZW5SZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCo+PX0gZGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbmNsdWRlc0xhYmVsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10sIGluY2x1ZGVzTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYmFzZSA9IGluY2x1ZGVzTGFiZWwgPyAxIDogMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLmF1dGhDb2RlXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMudG9rZW5fID0gZGF0YVsxICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzEgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0QXV0aENvZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aENvZGVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2V0QXV0aENvZGUodmFsdWUpIHtcbiAgICB0aGlzLmF1dGhDb2RlXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRUb2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2tlbl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRUb2tlbih2YWx1ZSkge1xuICAgIHRoaXMudG9rZW5fID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5hdXRoQ29kZV8sIC8vIGZpZWxkIDEgLSBhdXRoX2NvZGVcbiAgICAgICAgdGhpcy50b2tlbl8sIC8vIGZpZWxkIDIgLSB0b2tlblxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdMaW5rU2F2ZVRva2VuUmVxdWVzdCc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgTGlua2luZ0luZm9SZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMucmVxdWVzdGVkXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgZ2V0UmVxdWVzdGVkKCkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RlZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0UmVxdWVzdGVkKHZhbHVlKSB7XG4gICAgdGhpcy5yZXF1ZXN0ZWRfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRfLCAvLyBmaWVsZCAxIC0gcmVxdWVzdGVkXG4gICAgXTtcbiAgICBpZiAoaW5jbHVkZUxhYmVsKSB7XG4gICAgICBhcnIudW5zaGlmdCh0aGlzLmxhYmVsKCkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ0xpbmtpbmdJbmZvUmVzcG9uc2UnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIFNrdVNlbGVjdGVkUmVzcG9uc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj49fSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVzTGFiZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSwgaW5jbHVkZXNMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBiYXNlID0gaW5jbHVkZXNMYWJlbCA/IDEgOiAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuc2t1XyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMub2xkU2t1XyA9IGRhdGFbMSArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVsxICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMub25lVGltZV8gPSBkYXRhWzIgKyBiYXNlXSA9PSBudWxsID8gbnVsbCA6IGRhdGFbMiArIGJhc2VdO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucGxheU9mZmVyXyA9IGRhdGFbMyArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVszICsgYmFzZV07XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5vbGRQbGF5T2ZmZXJfID0gZGF0YVs0ICsgYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhWzQgKyBiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0U2t1KCkge1xuICAgIHJldHVybiB0aGlzLnNrdV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRTa3UodmFsdWUpIHtcbiAgICB0aGlzLnNrdV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0T2xkU2t1KCkge1xuICAgIHJldHVybiB0aGlzLm9sZFNrdV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRPbGRTa3UodmFsdWUpIHtcbiAgICB0aGlzLm9sZFNrdV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldE9uZVRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMub25lVGltZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0T25lVGltZSh2YWx1ZSkge1xuICAgIHRoaXMub25lVGltZV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0UGxheU9mZmVyKCkge1xuICAgIHJldHVybiB0aGlzLnBsYXlPZmZlcl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRQbGF5T2ZmZXIodmFsdWUpIHtcbiAgICB0aGlzLnBsYXlPZmZlcl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0T2xkUGxheU9mZmVyKCkge1xuICAgIHJldHVybiB0aGlzLm9sZFBsYXlPZmZlcl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXRPbGRQbGF5T2ZmZXIodmFsdWUpIHtcbiAgICB0aGlzLm9sZFBsYXlPZmZlcl8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVMYWJlbFxuICAgKiBAcmV0dXJuIHshQXJyYXk8Pz59XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdG9BcnJheShpbmNsdWRlTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYXJyID0gW1xuICAgICAgICB0aGlzLnNrdV8sIC8vIGZpZWxkIDEgLSBza3VcbiAgICAgICAgdGhpcy5vbGRTa3VfLCAvLyBmaWVsZCAyIC0gb2xkX3NrdVxuICAgICAgICB0aGlzLm9uZVRpbWVfLCAvLyBmaWVsZCAzIC0gb25lX3RpbWVcbiAgICAgICAgdGhpcy5wbGF5T2ZmZXJfLCAvLyBmaWVsZCA0IC0gcGxheV9vZmZlclxuICAgICAgICB0aGlzLm9sZFBsYXlPZmZlcl8sIC8vIGZpZWxkIDUgLSBvbGRfcGxheV9vZmZlclxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdTa3VTZWxlY3RlZFJlc3BvbnNlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBTbWFydEJveE1lc3NhZ2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj49fSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVzTGFiZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSwgaW5jbHVkZXNMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBiYXNlID0gaW5jbHVkZXNMYWJlbCA/IDEgOiAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzQ2xpY2tlZF8gPSBkYXRhW2Jhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVtiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldElzQ2xpY2tlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NsaWNrZWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIHNldElzQ2xpY2tlZCh2YWx1ZSkge1xuICAgIHRoaXMuaXNDbGlja2VkXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUxhYmVsXG4gICAqIEByZXR1cm4geyFBcnJheTw/Pn1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b0FycmF5KGluY2x1ZGVMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBhcnIgPSBbXG4gICAgICAgIHRoaXMuaXNDbGlja2VkXywgLy8gZmllbGQgMSAtIGlzX2NsaWNrZWRcbiAgICBdO1xuICAgIGlmIChpbmNsdWRlTGFiZWwpIHtcbiAgICAgIGFyci51bnNoaWZ0KHRoaXMubGFiZWwoKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGxhYmVsKCkge1xuICAgIHJldHVybiAnU21hcnRCb3hNZXNzYWdlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBTdWJzY3JpYmVSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMuc3Vic2NyaWJlXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgZ2V0U3Vic2NyaWJlKCkge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmliZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0U3Vic2NyaWJlKHZhbHVlKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVfLCAvLyBmaWVsZCAxIC0gc3Vic2NyaWJlXG4gICAgXTtcbiAgICBpZiAoaW5jbHVkZUxhYmVsKSB7XG4gICAgICBhcnIudW5zaGlmdCh0aGlzLmxhYmVsKCkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ1N1YnNjcmliZVJlc3BvbnNlJztcbiAgfVxufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtNZXNzYWdlfVxuICovXG5jbGFzcyBUaW1lc3RhbXAge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj49fSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVzTGFiZWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSBbXSwgaW5jbHVkZXNMYWJlbCA9IHRydWUpIHtcbiAgICBjb25zdCBiYXNlID0gaW5jbHVkZXNMYWJlbCA/IDEgOiAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/bnVtYmVyfSAqL1xuICAgIHRoaXMuc2Vjb25kc18gPSBkYXRhW2Jhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVtiYXNlXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLm5hbm9zXyA9IGRhdGFbMSArIGJhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVsxICsgYmFzZV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P251bWJlcn1cbiAgICovXG4gIGdldFNlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vjb25kc187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAqL1xuICBzZXRTZWNvbmRzKHZhbHVlKSB7XG4gICAgdGhpcy5zZWNvbmRzXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9udW1iZXJ9XG4gICAqL1xuICBnZXROYW5vcygpIHtcbiAgICByZXR1cm4gdGhpcy5uYW5vc187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAqL1xuICBzZXROYW5vcyh2YWx1ZSkge1xuICAgIHRoaXMubmFub3NfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5zZWNvbmRzXywgLy8gZmllbGQgMSAtIHNlY29uZHNcbiAgICAgICAgdGhpcy5uYW5vc18sIC8vIGZpZWxkIDIgLSBuYW5vc1xuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdUaW1lc3RhbXAnO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge01lc3NhZ2V9XG4gKi9cbmNsYXNzIFRvYXN0Q2xvc2VSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCo+PX0gZGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbmNsdWRlc0xhYmVsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhID0gW10sIGluY2x1ZGVzTGFiZWwgPSB0cnVlKSB7XG4gICAgY29uc3QgYmFzZSA9IGluY2x1ZGVzTGFiZWwgPyAxIDogMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5jbG9zZV8gPSBkYXRhW2Jhc2VdID09IG51bGwgPyBudWxsIDogZGF0YVtiYXNlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn1cbiAgICovXG4gIGdldENsb3NlKCkge1xuICAgIHJldHVybiB0aGlzLmNsb3NlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAqL1xuICBzZXRDbG9zZSh2YWx1ZSkge1xuICAgIHRoaXMuY2xvc2VfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5jbG9zZV8sIC8vIGZpZWxkIDEgLSBjbG9zZVxuICAgIF07XG4gICAgaWYgKGluY2x1ZGVMYWJlbCkge1xuICAgICAgYXJyLnVuc2hpZnQodGhpcy5sYWJlbCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgbGFiZWwoKSB7XG4gICAgcmV0dXJuICdUb2FzdENsb3NlUmVxdWVzdCc7XG4gIH1cbn1cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7TWVzc2FnZX1cbiAqL1xuY2xhc3MgVmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPj19IGRhdGFcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZXNMYWJlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSA9IFtdLCBpbmNsdWRlc0xhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbmNsdWRlc0xhYmVsID8gMSA6IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9ib29sZWFufSAqL1xuICAgIHRoaXMubmF0aXZlXyA9IGRhdGFbYmFzZV0gPT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jhc2VdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgZ2V0TmF0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLm5hdGl2ZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0TmF0aXZlKHZhbHVlKSB7XG4gICAgdGhpcy5uYXRpdmVfID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlTGFiZWxcbiAgICogQHJldHVybiB7IUFycmF5PD8+fVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvQXJyYXkoaW5jbHVkZUxhYmVsID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFyciA9IFtcbiAgICAgICAgdGhpcy5uYXRpdmVfLCAvLyBmaWVsZCAxIC0gbmF0aXZlXG4gICAgXTtcbiAgICBpZiAoaW5jbHVkZUxhYmVsKSB7XG4gICAgICBhcnIudW5zaGlmdCh0aGlzLmxhYmVsKCkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBsYWJlbCgpIHtcbiAgICByZXR1cm4gJ1ZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UnO1xuICB9XG59XG5cbmNvbnN0IFBST1RPX01BUCA9IHtcbiAgJ0FjY291bnRDcmVhdGlvblJlcXVlc3QnOiBBY2NvdW50Q3JlYXRpb25SZXF1ZXN0LFxuICAnQWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZSc6IEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG4gICdBbmFseXRpY3NDb250ZXh0JzogQW5hbHl0aWNzQ29udGV4dCxcbiAgJ0FuYWx5dGljc0V2ZW50TWV0YSc6IEFuYWx5dGljc0V2ZW50TWV0YSxcbiAgJ0FuYWx5dGljc1JlcXVlc3QnOiBBbmFseXRpY3NSZXF1ZXN0LFxuICAnRW50aXRsZW1lbnRKd3QnOiBFbnRpdGxlbWVudEp3dCxcbiAgJ0VudGl0bGVtZW50c1JlcXVlc3QnOiBFbnRpdGxlbWVudHNSZXF1ZXN0LFxuICAnRW50aXRsZW1lbnRzUmVzcG9uc2UnOiBFbnRpdGxlbWVudHNSZXNwb25zZSxcbiAgJ0V2ZW50UGFyYW1zJzogRXZlbnRQYXJhbXMsXG4gICdGaW5pc2hlZExvZ2dpbmdSZXNwb25zZSc6IEZpbmlzaGVkTG9nZ2luZ1Jlc3BvbnNlLFxuICAnTGlua1NhdmVUb2tlblJlcXVlc3QnOiBMaW5rU2F2ZVRva2VuUmVxdWVzdCxcbiAgJ0xpbmtpbmdJbmZvUmVzcG9uc2UnOiBMaW5raW5nSW5mb1Jlc3BvbnNlLFxuICAnU2t1U2VsZWN0ZWRSZXNwb25zZSc6IFNrdVNlbGVjdGVkUmVzcG9uc2UsXG4gICdTbWFydEJveE1lc3NhZ2UnOiBTbWFydEJveE1lc3NhZ2UsXG4gICdTdWJzY3JpYmVSZXNwb25zZSc6IFN1YnNjcmliZVJlc3BvbnNlLFxuICAnVGltZXN0YW1wJzogVGltZXN0YW1wLFxuICAnVG9hc3RDbG9zZVJlcXVlc3QnOiBUb2FzdENsb3NlUmVxdWVzdCxcbiAgJ1ZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UnOiBWaWV3U3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxufTtcblxuLyoqXG4gKiBVdGlsaXR5IHRvIGRlc2VyaWFsaXplIGEgYnVmZmVyXG4gKiBAcGFyYW0geyFBcnJheTwqPn0gZGF0YVxuICogQHJldHVybiB7IU1lc3NhZ2V9XG4gKi9cbmZ1bmN0aW9uIGRlc2VyaWFsaXplKGRhdGEpIHtcbiAgLyoqIHs/c3RyaW5nfSAqL1xuICBjb25zdCBrZXkgPSBkYXRhID8gZGF0YVswXSA6IG51bGw7XG4gIGlmIChrZXkpIHtcbiAgICBjb25zdCBjdG9yID0gUFJPVE9fTUFQW2tleV07XG4gICAgaWYgKGN0b3IpIHtcbiAgICAgIHJldHVybiBuZXcgY3RvcihkYXRhKTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdEZXNlcmlhbGl6YXRpb24gZmFpbGVkIGZvciAnICsgZGF0YSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6IFQpfSBtZXNzYWdlVHlwZVxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZnVuY3Rpb24gZ2V0TGFiZWwobWVzc2FnZVR5cGUpIHtcbiAgY29uc3QgbWVzc2FnZSA9IC8qKiBAdHlwZSB7IU1lc3NhZ2V9ICovIChuZXcgbWVzc2FnZVR5cGUoKSk7XG4gIHJldHVybiBtZXNzYWdlLmxhYmVsKCk7XG59XG5cbmV4cG9ydCB7XG4gIEFjY291bnRDcmVhdGlvblJlcXVlc3QsXG4gIEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG4gIEFuYWx5dGljc0NvbnRleHQsXG4gIEFuYWx5dGljc0V2ZW50LFxuICBBbmFseXRpY3NFdmVudE1ldGEsXG4gIEFuYWx5dGljc1JlcXVlc3QsXG4gIEVudGl0bGVtZW50Snd0LFxuICBFbnRpdGxlbWVudFJlc3VsdCxcbiAgRW50aXRsZW1lbnRTb3VyY2UsXG4gIEVudGl0bGVtZW50c1JlcXVlc3QsXG4gIEVudGl0bGVtZW50c1Jlc3BvbnNlLFxuICBFdmVudE9yaWdpbmF0b3IsXG4gIEV2ZW50UGFyYW1zLFxuICBGaW5pc2hlZExvZ2dpbmdSZXNwb25zZSxcbiAgTGlua1NhdmVUb2tlblJlcXVlc3QsXG4gIExpbmtpbmdJbmZvUmVzcG9uc2UsXG4gIE1lc3NhZ2UsXG4gIFNrdVNlbGVjdGVkUmVzcG9uc2UsXG4gIFNtYXJ0Qm94TWVzc2FnZSxcbiAgU3Vic2NyaWJlUmVzcG9uc2UsXG4gIFRpbWVzdGFtcCxcbiAgVG9hc3RDbG9zZVJlcXVlc3QsXG4gIFZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UsXG4gIGRlc2VyaWFsaXplLFxuICBnZXRMYWJlbCxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEFuYWx5dGljc0NvbnRleHQsXG4gIEFuYWx5dGljc0V2ZW50LFxuICBBbmFseXRpY3NFdmVudE1ldGEsXG4gIEFuYWx5dGljc1JlcXVlc3QsXG4gIEV2ZW50T3JpZ2luYXRvcixcbiAgRXZlbnRQYXJhbXMsXG4gIEZpbmlzaGVkTG9nZ2luZ1Jlc3BvbnNlLFxufSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtDbGllbnRFdmVudE1hbmFnZXJ9IGZyb20gJy4vY2xpZW50LWV2ZW50LW1hbmFnZXInO1xuaW1wb3J0IHtFeHBlcmltZW50RmxhZ3N9IGZyb20gJy4vZXhwZXJpbWVudC1mbGFncyc7XG5pbXBvcnQge2NyZWF0ZUVsZW1lbnR9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge2ZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7Z2V0Q2Fub25pY2FsVXJsfSBmcm9tICcuLi91dGlscy91cmwnO1xuaW1wb3J0IHtnZXRPbkV4cGVyaW1lbnRzLCBpc0V4cGVyaW1lbnRPbn0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5pbXBvcnQge2dldFN3Z1RyYW5zYWN0aW9uSWQsIGdldFV1aWR9IGZyb20gJy4uL3V0aWxzL3N0cmluZyc7XG5pbXBvcnQge2xvZ30gZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7cGFyc2VRdWVyeVN0cmluZywgcGFyc2VVcmx9IGZyb20gJy4uL3V0aWxzL3VybCc7XG5pbXBvcnQge3NlcnZpY2VVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5jb25zdCBpZnJhbWVTdHlsZXMgPSB7XG4gIG9wYWNpdHk6ICcwJyxcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHRvcDogJy0xMHB4JyxcbiAgbGVmdDogJy0xMHB4JyxcbiAgaGVpZ2h0OiAnMXB4JyxcbiAgd2lkdGg6ICcxcHgnLFxufTtcblxuLy8gVGhlIGluaXRpYWwgaWZyYW1lIGxvYWQgdGFrZXMgfjUwMCBtcy4gIFdlIHdpbGwgd2FpdCBhdCBsZWFzdCB0aGF0IGxvbmdcbi8vIGJlZm9yZSBhIHBhZ2UgcmVkaXJlY3QuICBTdWJzZXF1ZW50IGxvZ3MgYXJlIG11Y2ggZmFzdGVyLiAgV2Ugd2lsbCB3YWl0IGF0XG4vLyBtb3N0IDEwMCBtcy5cbmNvbnN0IE1BWF9GSVJTVF9XQUlUID0gNTAwO1xuY29uc3QgTUFYX1dBSVQgPSAyMDA7XG4vLyBJZiB3ZSBsb2dnZWQgYW5kIHJhcGlkbHkgcmVkaXJlY3RlZCwgd2Ugd2lsbCBhZGQgYSBzaG9ydCBkZWxheSBpbiBjYXNlXG4vLyBhIG1lc3NhZ2UgaGFzbid0IGJlZW4gdHJhbnNtaXR0ZWQgeWV0LlxuY29uc3QgVElNRU9VVF9FUlJPUiA9ICdBbmFseXRpY3NTZXJ2aWNlIHRpbWVkIG91dCB3YWl0aW5nIGZvciBhIHJlc3BvbnNlJztcblxuLyoqXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSBlcnJvclxuICovXG5mdW5jdGlvbiBjcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gbmV3IEZpbmlzaGVkTG9nZ2luZ1Jlc3BvbnNlKCk7XG4gIHJlc3BvbnNlLnNldENvbXBsZXRlKGZhbHNlKTtcbiAgcmVzcG9uc2Uuc2V0RXJyb3IoZXJyb3IpO1xuICByZXR1cm4gcmVzcG9uc2U7XG59XG5cbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBmZXRjaGVyKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZmV0Y2hlci5GZXRjaGVyfSAqL1xuICAgIHRoaXMuZmV0Y2hlcl8gPSBmZXRjaGVyO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZGVwcy5kb2MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gLyoqIEB0eXBlIHshSFRNTElGcmFtZUVsZW1lbnR9ICovIChjcmVhdGVFbGVtZW50KFxuICAgICAgdGhpcy5kb2NfLmdldFdpbigpLmRvY3VtZW50LFxuICAgICAgJ2lmcmFtZScsXG4gICAgICB7fVxuICAgICkpO1xuICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmlmcmFtZV8sIGlmcmFtZVN0eWxlcyk7XG4gICAgdGhpcy5kb2NfLmdldEJvZHkoKS5hcHBlbmRDaGlsZCh0aGlzLmdldEVsZW1lbnQoKSk7XG5cbiAgICAvKiogQHByaXZhdGUgQHR5cGUgeyFib29sZWFufSAqL1xuICAgIHRoaXMuZXZlckZpbmlzaGVkTG9nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0IHshQW5hbHl0aWNzQ29udGV4dH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHRfID0gbmV3IEFuYWx5dGljc0NvbnRleHQoKTtcbiAgICB0aGlzLnNldFN0YXRpY0NvbnRleHRfKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnQ+fSAqL1xuICAgIHRoaXMuc2VydmljZVJlYWR5XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMubGFzdEFjdGlvbl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUNsaWVudEV2ZW50TWFuYWdlcn0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5yZWdpc3RlckV2ZW50TGlzdGVuZXIoXG4gICAgICB0aGlzLmhhbmRsZUNsaWVudEV2ZW50Xy5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIC8vIFRoaXMgY29kZSBjcmVhdGVzIGEgJ3Byb21pc2UgdG8gbG9nJyB0aGF0IHdlIGNhbiB1c2UgdG8gZW5zdXJlIGFsbFxuICAgIC8vIGxvZ2dpbmcgaXMgZmluaXNoZWQgcHJpb3IgdG8gcmVkaXJlY3RpbmcgdGhlIHBhZ2UuXG4gICAgLyoqIEBwcml2YXRlIHshbnVtYmVyfSAqL1xuICAgIHRoaXMudW5maW5pc2hlZExvZ3NfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKGJvb2xlYW4pfSAqL1xuICAgIHRoaXMubG9nZ2luZ1Jlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMucHJvbWlzZVRvTG9nXyA9IG51bGw7XG5cbiAgICAvLyBJZiBsb2dnaW5nIGRvZXNuJ3Qgd29yayBkb24ndCBmb3JjZSB0aGUgdXNlciB0byB3YWl0XG4gICAgLyoqIEBwcml2YXRlIHshYm9vbGVhbn0gKi9cbiAgICB0aGlzLmxvZ2dpbmdCcm9rZW5fID0gZmFsc2U7XG5cbiAgICAvLyBJZiBsb2dnaW5nIGV4Y2VlZHMgdGhlIHRpbWVvdXRzIChzZWUgY29uc3QgY29tbWVudHMgYWJvdmUpIGRvbid0IG1ha2VcbiAgICAvLyB0aGUgdXNlciB3YWl0IHRvbyBsb25nLlxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLnRpbWVvdXRfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNhY3Rpb25JZFxuICAgKi9cbiAgc2V0VHJhbnNhY3Rpb25JZCh0cmFuc2FjdGlvbklkKSB7XG4gICAgY29uc3Qgb2xkVHJhbnNhY3Rpb25JZCA9IHRoaXMuY29udGV4dF8uZ2V0VHJhbnNhY3Rpb25JZCgpO1xuICAgIHRoaXMuY29udGV4dF8uc2V0VHJhbnNhY3Rpb25JZCh0cmFuc2FjdGlvbklkKTtcbiAgICBpZiAob2xkVHJhbnNhY3Rpb25JZCAhPSBudWxsICYmIG9sZFRyYW5zYWN0aW9uSWQgIT0gdHJhbnNhY3Rpb25JZCkge1xuICAgICAgY29uc3QgZXZlbnRUeXBlID0gQW5hbHl0aWNzRXZlbnQuRVZFTlRfTkVXX1RYX0lEO1xuICAgICAgY29uc3QgZXZlbnRQYXJhbXMgPSBuZXcgRXZlbnRQYXJhbXMoKTtcbiAgICAgIGV2ZW50UGFyYW1zLnNldE9sZFRyYW5zYWN0aW9uSWQob2xkVHJhbnNhY3Rpb25JZCk7XG4gICAgICB0aGlzLmV2ZW50TWFuYWdlcl8ubG9nU3dnRXZlbnQoXG4gICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgLyogaXNGcm9tVXNlckFjdGlvbj0gKi8gdHJ1ZSxcbiAgICAgICAgZXZlbnRQYXJhbXNcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uSWQoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodGhpcy5jb250ZXh0Xy5nZXRUcmFuc2FjdGlvbklkKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRTa3UoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dF8uZ2V0U2t1KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICAgKi9cbiAgc2V0U2t1KHNrdSkge1xuICAgIHRoaXMuY29udGV4dF8uc2V0U2t1KHNrdSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgc2V0VXJsKHVybCkge1xuICAgIHRoaXMuY29udGV4dF8uc2V0VXJsKHVybCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gbGFiZWxzXG4gICAqL1xuICBhZGRMYWJlbHMobGFiZWxzKSB7XG4gICAgaWYgKGxhYmVscyAmJiBsYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbmV3TGFiZWxzID0gW10uY29uY2F0KHRoaXMuY29udGV4dF8uZ2V0TGFiZWxMaXN0KCkpO1xuICAgICAgbGFiZWxzLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICAgIGlmIChuZXdMYWJlbHMuaW5kZXhPZihsYWJlbCkgPT0gLTEpIHtcbiAgICAgICAgICBuZXdMYWJlbHMucHVzaChsYWJlbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb250ZXh0Xy5zZXRMYWJlbExpc3QobmV3TGFiZWxzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUhUTUxJRnJhbWVFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFF1ZXJ5U3RyaW5nXygpIHtcbiAgICByZXR1cm4gdGhpcy5kb2NfLmdldFdpbigpLmxvY2F0aW9uLnNlYXJjaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRSZWZlcnJlcl8oKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudC5yZWZlcnJlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0U3RhdGljQ29udGV4dF8oKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgLy8gVGhlc2UgdmFsdWVzIHNob3VsZCBhbGwgYmUgYXZhaWxhYmxlIGR1cmluZyBwYWdlIGxvYWQuXG4gICAgaWYgKFxuICAgICAgaXNFeHBlcmltZW50T24oXG4gICAgICAgIHRoaXMuZG9jXy5nZXRXaW4oKSxcbiAgICAgICAgRXhwZXJpbWVudEZsYWdzLlVQREFURV9HT09HTEVfVFJBTlNBQ1RJT05fSURcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGNvbnRleHQuc2V0VHJhbnNhY3Rpb25JZChnZXRTd2dUcmFuc2FjdGlvbklkKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0LnNldFRyYW5zYWN0aW9uSWQoZ2V0VXVpZCgpKTtcbiAgICB9XG4gICAgY29udGV4dC5zZXRSZWZlcnJpbmdPcmlnaW4ocGFyc2VVcmwodGhpcy5nZXRSZWZlcnJlcl8oKSkub3JpZ2luKTtcbiAgICBjb250ZXh0LnNldENsaWVudFZlcnNpb24oJ1N3RyAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQnKTtcbiAgICBjb250ZXh0LnNldFVybChnZXRDYW5vbmljYWxVcmwodGhpcy5kb2NfKSk7XG5cbiAgICBjb25zdCB1dG1QYXJhbXMgPSBwYXJzZVF1ZXJ5U3RyaW5nKHRoaXMuZ2V0UXVlcnlTdHJpbmdfKCkpO1xuICAgIGNvbnN0IGNhbXBhaWduID0gdXRtUGFyYW1zWyd1dG1fY2FtcGFpZ24nXTtcbiAgICBjb25zdCBtZWRpdW0gPSB1dG1QYXJhbXNbJ3V0bV9tZWRpdW0nXTtcbiAgICBjb25zdCBzb3VyY2UgPSB1dG1QYXJhbXNbJ3V0bV9zb3VyY2UnXTtcbiAgICBpZiAoY2FtcGFpZ24pIHtcbiAgICAgIGNvbnRleHQuc2V0VXRtQ2FtcGFpZ24oY2FtcGFpZ24pO1xuICAgIH1cbiAgICBpZiAobWVkaXVtKSB7XG4gICAgICBjb250ZXh0LnNldFV0bU1lZGl1bShtZWRpdW0pO1xuICAgIH1cbiAgICBpZiAoc291cmNlKSB7XG4gICAgICBjb250ZXh0LnNldFV0bVNvdXJjZShzb3VyY2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5SWZyYW1lUG9ydD59XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc2VydmljZVJlYWR5Xykge1xuICAgICAgLy8gUGxlYXNlIG5vdGUgdGhhdCBjdXJyZW50bHkgb3BlbklmcmFtZSByZWFkcyB0aGUgY3VycmVudCBhbmFseXRpY3NcbiAgICAgIC8vIGNvbnRleHQgYW5kIHRoYXQgaXQgbWF5IG5vdCBjb250YWluIGV4cGVyaW1lbnRzIGFjdGl2YXRlZCBsYXRlIGR1cmluZ1xuICAgICAgLy8gdGhlIHB1Ymxpc2hlcnMgY29kZSBsaWZlY3ljbGUuXG4gICAgICB0aGlzLmFkZExhYmVscyhnZXRPbkV4cGVyaW1lbnRzKHRoaXMuZG9jXy5nZXRXaW4oKSkpO1xuICAgICAgdGhpcy5zZXJ2aWNlUmVhZHlfID0gdGhpcy5hY3Rpdml0eVBvcnRzX1xuICAgICAgICAub3BlbklmcmFtZSh0aGlzLmlmcmFtZV8sIGZlVXJsKCcvc2VydmljZWlmcmFtZScpLCBudWxsLCB0cnVlKVxuICAgICAgICAudGhlbihcbiAgICAgICAgICAocG9ydCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlIGxvZ2dpbmcgdG8gY29kZSBpbmRpY2F0ZSBpdCBpc1xuICAgICAgICAgICAgLy8gZmluaXNoZWQgbG9nZ2luZy5cbiAgICAgICAgICAgIHBvcnQub24oRmluaXNoZWRMb2dnaW5nUmVzcG9uc2UsIHRoaXMuYWZ0ZXJMb2dnaW5nXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHJldHVybiBwb3J0LndoZW5SZWFkeSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBUaGUgcHVibGlzaGVyIHNob3VsZCBiZSBkb25lIHNldHRpbmcgZXhwZXJpbWVudHMgYnV0IHJ1bnRpbWVcbiAgICAgICAgICAgICAgLy8gd2lsbCBmb3J3YXJkIHRoZW0gaGVyZSBpZiB0aGV5IGFyZW4ndC5cbiAgICAgICAgICAgICAgdGhpcy5hZGRMYWJlbHMoZ2V0T25FeHBlcmltZW50cyh0aGlzLmRvY18uZ2V0V2luKCkpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHBvcnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcG9ydCBkb2Vzbid0IG9wZW4gcmVnaXN0ZXIgdGhhdCBsb2dnaW5nIGlzIGJyb2tlbiBzb1xuICAgICAgICAgICAgLy8gbm90aGluZyBpcyBqdXN0IHdhaXRpbmcuXG4gICAgICAgICAgICB0aGlzLmxvZ2dpbmdCcm9rZW5fID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJMb2dnaW5nXyhcbiAgICAgICAgICAgICAgY3JlYXRlRXJyb3JSZXNwb25zZSgnQ291bGQgbm90IGNvbm5lY3QgWycgKyBtZXNzYWdlICsgJ10nKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlcnZpY2VSZWFkeV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpc1JlYWR5VG9QYXlcbiAgICovXG4gIHNldFJlYWR5VG9QYXkoaXNSZWFkeVRvUGF5KSB7XG4gICAgdGhpcy5jb250ZXh0Xy5zZXRSZWFkeVRvUGF5KGlzUmVhZHlUb1BheSk7XG4gIH1cblxuICAvKipcbiAgICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkucmVtb3ZlQ2hpbGQodGhpcy5nZXRFbGVtZW50KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBbmFseXRpY3NDb250ZXh0fVxuICAgKi9cbiAgZ2V0Q29udGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50fSBldmVudFxuICAgKiBAcmV0dXJuIHshQW5hbHl0aWNzUmVxdWVzdH1cbiAgICovXG4gIGNyZWF0ZUxvZ1JlcXVlc3RfKGV2ZW50KSB7XG4gICAgY29uc3QgbWV0YSA9IG5ldyBBbmFseXRpY3NFdmVudE1ldGEoKTtcbiAgICBtZXRhLnNldEV2ZW50T3JpZ2luYXRvcihldmVudC5ldmVudE9yaWdpbmF0b3IpO1xuICAgIG1ldGEuc2V0SXNGcm9tVXNlckFjdGlvbighIWV2ZW50LmlzRnJvbVVzZXJBY3Rpb24pO1xuXG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBBbmFseXRpY3NSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5zZXRFdmVudCgvKiogQHR5cGUgeyFBbmFseXRpY3NFdmVudH0gKi8gKGV2ZW50LmV2ZW50VHlwZSkpO1xuICAgIHJlcXVlc3Quc2V0Q29udGV4dCh0aGlzLmNvbnRleHRfKTtcbiAgICByZXF1ZXN0LnNldE1ldGEobWV0YSk7XG4gICAgaWYgKGV2ZW50LmFkZGl0aW9uYWxQYXJhbWV0ZXJzIGluc3RhbmNlb2YgRXZlbnRQYXJhbXMpIHtcbiAgICAgIHJlcXVlc3Quc2V0UGFyYW1zKGV2ZW50LmFkZGl0aW9uYWxQYXJhbWV0ZXJzKTtcbiAgICB9IC8vIElnbm9yZSBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVycy4gIEl0IG1heSBoYXZlIGRhdGEgd2Ugc2hvdWxkbid0IGxvZy5cbiAgICByZXR1cm4gcmVxdWVzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc2hvdWxkTG9nUHVibGlzaGVyRXZlbnRzXygpIHtcbiAgICByZXR1cm4gdGhpcy5kZXBzXy5jb25maWcoKS5lbmFibGVTd2dBbmFseXRpY3MgPT09IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudH0gZXZlbnRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHNob3VsZEFsd2F5c0xvZ0V2ZW50XyhldmVudCkge1xuICAgIC8qIEFNUF9DTElFTlQgZXZlbnRzIGFyZSBjb25zaWRlcmVkIHB1Ymxpc2hlciBldmVudHMgYW5kIHdlIGdlbmVyYWxseSBvbmx5XG4gICAgICogbG9nIHRob3NlIGlmIHRoZSBwdWJsaXNoZXIgZGVjaWRlZCB0byBlbmFibGUgcHVibGlzaGVyIGV2ZW50IGxvZ2dpbmcgZm9yXG4gICAgICogcHJpdmFjeSBwdXJwb3Nlcy4gIFRoZSBwYWdlIGxvYWQgZXZlbnQgaXMgbm90IHByaXZhdGUgYW5kIGlzIG5lY2Vzc2FyeVxuICAgICAqIGp1c3Qgc28gd2Uga25vdyB0aGUgdXNlciBpcyBpbiBBTVAsIHNvIHdlIHdpbGwgbG9nIGl0IHJlZ2FyZGxlc3Mgb2ZcbiAgICAgKiBjb25maWd1cmF0aW9uLlxuICAgICAqL1xuICAgIHJldHVybiAoXG4gICAgICBldmVudC5ldmVudFR5cGUgPT09IEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fUEFHRV9MT0FEICYmXG4gICAgICBldmVudC5ldmVudE9yaWdpbmF0b3IgPT09IEV2ZW50T3JpZ2luYXRvci5BTVBfQ0xJRU5UXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgTGlzdGVucyBmb3IgbmV3IGV2ZW50cyBmcm9tIHRoZSBldmVudHMgbWFuYWdlciBhbmQgaGFuZGxlcyBsb2dnaW5nXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuQ2xpZW50RXZlbnR9IGV2ZW50XG4gICAqL1xuICBoYW5kbGVDbGllbnRFdmVudF8oZXZlbnQpIHtcbiAgICAvL3RoaXMgZXZlbnQgaXMganVzdCB1c2VkIHRvIGNvbW11bmljYXRlIGluZm9ybWF0aW9uIGludGVybmFsbHkuICBJdCBzaG91bGRcbiAgICAvL25vdCBiZSByZXBvcnRlZCB0byB0aGUgU3dHIGFuYWx5dGljcyBzZXJ2aWNlLlxuICAgIGlmIChldmVudC5ldmVudFR5cGUgPT09IEFuYWx5dGljc0V2ZW50LkVWRU5UX1NVQlNDUklQVElPTl9TVEFURSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBlcm1pc3Npb24gc2hvdWxkIGJlIGFza2VkIGZyb20gYSBwcml2YWN5IHdvcmtncm91cCBiZWZvcmUgdGhpcyBvcmlnaW5hdG9yXG4gICAgLy8gY2FuIGJlIHN1Ym1pdHRlZCB0byB0aGUgYW5hbHl0aWNzIHNlcnZpY2UuICBJdCBzaG91bGQgbW9zdCBsaWtlbHkgYmUgdHJlYXRlZFxuICAgIC8vIGFzIGFub3RoZXIga2luZCBvZiBwdWJsaXNoZXIgZXZlbnQgaGVyZSB0aG91Z2guXG4gICAgaWYgKGV2ZW50LmV2ZW50T3JpZ2luYXRvciA9PT0gRXZlbnRPcmlnaW5hdG9yLlNIT1dDQVNFX0NMSUVOVCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIENsaWVudEV2ZW50TWFuYWdlci5pc1B1Ymxpc2hlckV2ZW50KGV2ZW50KSAmJlxuICAgICAgIXRoaXMuc2hvdWxkTG9nUHVibGlzaGVyRXZlbnRzXygpICYmXG4gICAgICAhdGhpcy5zaG91bGRBbHdheXNMb2dFdmVudF8oZXZlbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFJlZ2lzdGVyIHdlIHNlbnQgYSBsb2csIHRoZSBwb3J0IHdpbGwgY2FsbCB0aGlzLmFmdGVyTG9nZ2luZ18gd2hlbiBkb25lLlxuICAgIHRoaXMudW5maW5pc2hlZExvZ3NfKys7XG4gICAgdGhpcy5sYXN0QWN0aW9uXyA9IHRoaXMuc3RhcnQoKS50aGVuKChwb3J0KSA9PiB7XG4gICAgICBjb25zdCBhbmFseXRpY3NSZXF1ZXN0ID0gdGhpcy5jcmVhdGVMb2dSZXF1ZXN0XyhldmVudCk7XG4gICAgICBwb3J0LmV4ZWN1dGUoYW5hbHl0aWNzUmVxdWVzdCk7XG4gICAgICBpZiAoaXNFeHBlcmltZW50T24odGhpcy5kb2NfLmdldFdpbigpLCBFeHBlcmltZW50RmxhZ3MuTE9HR0lOR19CRUFDT04pKSB7XG4gICAgICAgIHRoaXMuc2VuZEJlYWNvbl8oYW5hbHl0aWNzUmVxdWVzdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYnkgdGhlIGlmcmFtZSBhZnRlciBpdCBzZW5kcyB0aGUgbG9nIHRvIHRoZSBzZXJ2ZXIuXG4gICAqIEBwYXJhbSB7Li4vcHJvdG8vYXBpX21lc3NhZ2VzLk1lc3NhZ2U9fSBtZXNzYWdlXG4gICAqL1xuICBhZnRlckxvZ2dpbmdfKG1lc3NhZ2UpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IC8qKiBAdHlwZSB7IUZpbmlzaGVkTG9nZ2luZ1Jlc3BvbnNlfSAqLyAobWVzc2FnZSk7XG4gICAgY29uc3Qgc3VjY2VzcyA9IChyZXNwb25zZSAmJiByZXNwb25zZS5nZXRDb21wbGV0ZSgpKSB8fCBmYWxzZTtcbiAgICBjb25zdCBlcnJvciA9IChyZXNwb25zZSAmJiByZXNwb25zZS5nZXRFcnJvcigpKSB8fCAnVW5rbm93biBsb2dnaW5nIEVycm9yJztcbiAgICBjb25zdCBpc1RpbWVvdXQgPSBlcnJvciA9PT0gVElNRU9VVF9FUlJPUjtcblxuICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgbG9nKCdFcnJvciB3aGVuIGxvZ2dpbmc6ICcgKyBlcnJvcik7XG4gICAgfVxuXG4gICAgdGhpcy51bmZpbmlzaGVkTG9nc18tLTtcbiAgICBpZiAoIWlzVGltZW91dCkge1xuICAgICAgdGhpcy5ldmVyRmluaXNoZWRMb2dfID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBOb3RoaW5nIGlzIHdhaXRpbmdcbiAgICBpZiAodGhpcy5sb2dnaW5nUmVzb2x2ZXJfID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5maW5pc2hlZExvZ3NfID09PSAwIHx8IHRoaXMubG9nZ2luZ0Jyb2tlbl8gfHwgaXNUaW1lb3V0KSB7XG4gICAgICBpZiAodGhpcy50aW1lb3V0XyAhPT0gbnVsbCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0Xyk7XG4gICAgICAgIHRoaXMudGltZW91dF8gPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2dnaW5nUmVzb2x2ZXJfKHN1Y2Nlc3MpO1xuICAgICAgdGhpcy5wcm9taXNlVG9Mb2dfID0gbnVsbDtcbiAgICAgIHRoaXMubG9nZ2luZ1Jlc29sdmVyXyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBsZWFzZSBub3RlIHRoYXQgbG9ncyBzZW50IGFmdGVyIGdldExvZ2dpbmdQcm9taXNlIGlzIGNhbGxlZCBhcmUgbm90XG4gICAqIGd1YXJhbnRlZWQgdG8gYmUgZmluaXNoZWQgd2hlbiB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZC4gIFlvdSBzaG91bGQgY2FsbFxuICAgKiB0aGlzIGZ1bmN0aW9uIGp1c3QgcHJpb3IgdG8gcmVkaXJlY3RpbmcgdGhlIHBhZ2UgYWZ0ZXIgU3dHIGlzIGZpbmlzaGVkXG4gICAqIGxvZ2dpbmcuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgZ2V0TG9nZ2luZ1Byb21pc2UoKSB7XG4gICAgaWYgKHRoaXMudW5maW5pc2hlZExvZ3NfID09PSAwIHx8IHRoaXMubG9nZ2luZ0Jyb2tlbl8pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb21pc2VUb0xvZ18gPT09IG51bGwpIHtcbiAgICAgIHRoaXMucHJvbWlzZVRvTG9nXyA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2luZ1Jlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgICB9KTtcblxuICAgICAgLy8gVGhlIHByb21pc2UgYWJvdmUgc2hvdWxkIG5vdCB3YWl0IGZvcmV2ZXIgaWYgdGhpbmdzIGdvIHdyb25nLiAgTGV0XG4gICAgICAvLyB0aGUgdXNlciBwcm9jZWVkIVxuICAgICAgY29uc3Qgd2hlbkRvbmUgPSB0aGlzLmFmdGVyTG9nZ2luZ18uYmluZCh0aGlzKTtcbiAgICAgIHRoaXMudGltZW91dF8gPSBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50aW1lb3V0XyA9IG51bGw7XG4gICAgICAgICAgd2hlbkRvbmUoY3JlYXRlRXJyb3JSZXNwb25zZShUSU1FT1VUX0VSUk9SKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoaXMuZXZlckZpbmlzaGVkTG9nXyA/IE1BWF9XQUlUIDogTUFYX0ZJUlNUX1dBSVRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZVRvTG9nXztcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJlYWNvbiBpcyBhIHJhcGlkIGZpcmUgYnJvd3NlciByZXF1ZXN0IHRoYXQgZG9lcyBub3Qgd2FpdCBmb3IgYSByZXNwb25zZVxuICAgKiBmcm9tIHRoZSBzZXJ2ZXIuICBJdCBpcyBndWFyYW50ZWVkIHRvIGdvIG91dCBiZWZvcmUgdGhlIHBhZ2UgcmVkaXJlY3RzLlxuICAgKiBAcGFyYW0geyFBbmFseXRpY3NSZXF1ZXN0fSBhbmFseXRpY3NSZXF1ZXN0XG4gICAqL1xuICBzZW5kQmVhY29uXyhhbmFseXRpY3NSZXF1ZXN0KSB7XG4gICAgY29uc3QgcHViSWQgPSBlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKClcbiAgICApO1xuICAgIGNvbnN0IHVybCA9IHNlcnZpY2VVcmwoJy9wdWJsaWNhdGlvbi8nICsgcHViSWQgKyAnL2NsaWVudGxvZ3MnKTtcbiAgICB0aGlzLmZldGNoZXJfLnNlbmRCZWFjb24odXJsLCBhbmFseXRpY3NSZXF1ZXN0KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FuYWx5dGljc0V2ZW50fSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtTV0dfSTE4Tl9TVFJJTkdTfSBmcm9tICcuLi9pMThuL3N3Zy1zdHJpbmdzJztcbmltcG9ydCB7U21hcnRTdWJzY3JpcHRpb25CdXR0b25BcGksIFRoZW1lfSBmcm9tICcuL3NtYXJ0LWJ1dHRvbi1hcGknO1xuaW1wb3J0IHtjcmVhdGVFbGVtZW50fSBmcm9tICcuLi91dGlscy9kb20nO1xuaW1wb3J0IHttc2d9IGZyb20gJy4uL3V0aWxzL2kxOG4nO1xuXG4vKipcbiAqIFByb3BlcnRpZXM6XG4gKiAtIGxhbmc6IFNldHMgdGhlIGJ1dHRvbiBTVkcgYW5kIHRpdGxlLiBEZWZhdWx0IGlzIFwiZW5cIi5cbiAqIC0gdGhlbWU6IFwibGlnaHRcIiBvciBcImRhcmtcIi4gRGVmYXVsdCBpcyBcImxpZ2h0XCIuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgb3B0aW9uczogKCEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN8IS4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnMpLFxuICogICBjbGlja0Z1bjogIWZ1bmN0aW9uKCFFdmVudD0pLFxuICogfX0gQnV0dG9uUGFyYW1zXG4gKi9cbmV4cG9ydCBsZXQgQnV0dG9uUGFyYW1zO1xuXG4vKiogQGVudW0ge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBCdXR0b25BdHRyaWJ1dGVWYWx1ZXMgPSB7XG4gIFNVQlNDUklQVElPTjogJ3N1YnNjcmlwdGlvbicsXG4gIENPTlRSSUJVVElPTjogJ2NvbnRyaWJ1dGlvbicsXG59O1xuXG5jb25zdCBCVVRUT05fSU5ORVJfSFRNTCA9IGA8aW1nIGNsYXNzPVwic3dnLWJ1dHRvbi12Mi1pY29uLSR0aGVtZSRcIj48L2Rpdj4kdGV4dENvbnRlbnQkYDtcblxuLyoqXG4gKiBUaGUgYnV0dG9uIHN0eWxlc2hlZXQgY2FuIGJlIGZvdW5kIGluIHRoZSBgL2Fzc2V0cy9zd2ctYnV0dG9uLmNzc2AuXG4gKiBJdCdzIHByb2R1Y2VkIGJ5IHRoZSBgZ3VscCBhc3NldHNgIHRhc2sgYW5kIGRlcGxveWVkIHRvXG4gKiBgaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL3N3Zy1idXR0b24uY3NzYC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1dHRvbkFwaSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9kb2MuRG9jfSBkb2NcbiAgICogQHBhcmFtIHshUHJvbWlzZTwhLi9ydW50aW1lLkNvbmZpZ3VyZWRSdW50aW1lPn0gY29uZmlndXJlZFJ1bnRpbWVQcm9taXNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MsIGNvbmZpZ3VyZWRSdW50aW1lUHJvbWlzZSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPCEuL3J1bnRpbWUuQ29uZmlndXJlZFJ1bnRpbWU+fSAqL1xuICAgIHRoaXMuY29uZmlndXJlZFJ1bnRpbWVQcm9taXNlXyA9IGNvbmZpZ3VyZWRSdW50aW1lUHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgaW5pdCgpIHtcbiAgICBjb25zdCBoZWFkID0gdGhpcy5kb2NfLmdldEhlYWQoKTtcbiAgICBpZiAoIWhlYWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSAnJGFzc2V0cyQvc3dnLWJ1dHRvbi5jc3MnO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gaGVhZC5xdWVyeVNlbGVjdG9yKGBsaW5rW2hyZWY9XCIke3VybH1cIl1gKTtcbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi4uLlwiIHR5cGU9XCJ0ZXh0L2Nzc1wiPlxuICAgIGhlYWQuYXBwZW5kQ2hpbGQoXG4gICAgICBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudCwgJ2xpbmsnLCB7XG4gICAgICAgICdyZWwnOiAnc3R5bGVzaGVldCcsXG4gICAgICAgICd0eXBlJzogJ3RleHQvY3NzJyxcbiAgICAgICAgJ2hyZWYnOiB1cmwsXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc3xmdW5jdGlvbigpfSBvcHRpb25zT3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk9fSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGNyZWF0ZShvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBidXR0b24gPSBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudCwgJ2J1dHRvbicsIHt9KTtcbiAgICByZXR1cm4gdGhpcy5hdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIHRoZSBDbGFzc2ljICdTdWJzY3JpYmUgV2l0aCBHb29nbGUnIGJ1dHRvbi5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gYnV0dG9uXG4gICAqIEBwYXJhbSB7Li4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc3xmdW5jdGlvbigpfSBvcHRpb25zT3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk9fSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGF0dGFjaChidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnNldHVwQnV0dG9uQW5kR2V0UGFyYW1zXyhcbiAgICAgIGJ1dHRvbixcbiAgICAgIEFuYWx5dGljc0V2ZW50LkFDVElPTl9TV0dfQlVUVE9OX0NMSUNLLFxuICAgICAgb3B0aW9uc09yQ2FsbGJhY2ssXG4gICAgICBjYWxsYmFja1xuICAgICkub3B0aW9ucztcblxuICAgIGNvbnN0IHRoZW1lID0gb3B0aW9uc1sndGhlbWUnXTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChgc3dnLWJ1dHRvbi0ke3RoZW1lfWApO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgaWYgKG9wdGlvbnNbJ2xhbmcnXSkge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnbGFuZycsIG9wdGlvbnNbJ2xhbmcnXSk7XG4gICAgfVxuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXG4gICAgICAndGl0bGUnLFxuICAgICAgbXNnKFNXR19JMThOX1NUUklOR1MuU1VCU0NSSVBUSU9OX1RJVExFX0xBTkdfTUFQLCBidXR0b24pIHx8ICcnXG4gICAgKTtcbiAgICB0aGlzLmxvZ1N3Z0V2ZW50XyhBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1NXR19CVVRUT04pO1xuXG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgbmV3IHN1YnNjcmliZSBidXR0b24sIGZvciBzdWJzY3JpcHRpb24gcHJvZHVjdCB0eXBlcy5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gYnV0dG9uXG4gICAqIEBwYXJhbSB7Li4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc3xmdW5jdGlvbigpfSBvcHRpb25zT3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk9fSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGF0dGFjaFN1YnNjcmliZUJ1dHRvbihidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnNldHVwQnV0dG9uQW5kR2V0UGFyYW1zXyhcbiAgICAgIGJ1dHRvbixcbiAgICAgIEFuYWx5dGljc0V2ZW50LkFDVElPTl9TV0dfQlVUVE9OX1NIT1dfT0ZGRVJTX0NMSUNLLFxuICAgICAgb3B0aW9uc09yQ2FsbGJhY2ssXG4gICAgICBjYWxsYmFja1xuICAgICkub3B0aW9ucztcblxuICAgIGNvbnN0IHRoZW1lID0gb3B0aW9uc1sndGhlbWUnXTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChgc3dnLWJ1dHRvbi12Mi0ke3RoZW1lfWApO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgaWYgKG9wdGlvbnNbJ2xhbmcnXSkge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnbGFuZycsIG9wdGlvbnNbJ2xhbmcnXSk7XG4gICAgfVxuICAgIGJ1dHRvbi4vKk9LKi8gaW5uZXJIVE1MID0gQlVUVE9OX0lOTkVSX0hUTUwucmVwbGFjZShcbiAgICAgICckdGhlbWUkJyxcbiAgICAgIHRoZW1lXG4gICAgKS5yZXBsYWNlKFxuICAgICAgJyR0ZXh0Q29udGVudCQnLFxuICAgICAgbXNnKFNXR19JMThOX1NUUklOR1MuU1VCU0NSSVBUSU9OX1RJVExFX0xBTkdfTUFQLCBidXR0b24pIHx8ICcnXG4gICAgKTtcbiAgICB0aGlzLmxvZ1N3Z0V2ZW50XyhBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1NIT1dfT0ZGRVJTX1NXR19CVVRUT04pO1xuXG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgbmV3IGNvbnRyaWJ1dGUgYnV0dG9uLCBmb3IgY29udHJpYnV0aW9uIHByb2R1Y3QgdHlwZXMuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGJ1dHRvblxuICAgKiBAcGFyYW0gey4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBhdHRhY2hDb250cmlidXRlQnV0dG9uKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuc2V0dXBCdXR0b25BbmRHZXRQYXJhbXNfKFxuICAgICAgYnV0dG9uLFxuICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1NXR19CVVRUT05fU0hPV19DT05UUklCVVRJT05TX0NMSUNLLFxuICAgICAgb3B0aW9uc09yQ2FsbGJhY2ssXG4gICAgICBjYWxsYmFja1xuICAgICkub3B0aW9ucztcblxuICAgIGNvbnN0IHRoZW1lID0gb3B0aW9uc1sndGhlbWUnXTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChgc3dnLWJ1dHRvbi12Mi0ke3RoZW1lfWApO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgaWYgKG9wdGlvbnNbJ2xhbmcnXSkge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnbGFuZycsIG9wdGlvbnNbJ2xhbmcnXSk7XG4gICAgfVxuICAgIGJ1dHRvbi4vKk9LKi8gaW5uZXJIVE1MID0gQlVUVE9OX0lOTkVSX0hUTUwucmVwbGFjZShcbiAgICAgICckdGhlbWUkJyxcbiAgICAgIHRoZW1lXG4gICAgKS5yZXBsYWNlKFxuICAgICAgJyR0ZXh0Q29udGVudCQnLFxuICAgICAgbXNnKFNXR19JMThOX1NUUklOR1MuQ09OVFJJQlVUSU9OX1RJVExFX0xBTkdfTUFQLCBidXR0b24pIHx8ICcnXG4gICAgKTtcbiAgICB0aGlzLmxvZ1N3Z0V2ZW50XyhBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1NIT1dfQ09OVFJJQlVUSU9OU19TV0dfQlVUVE9OKTtcblxuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgYWxsIGJ1dHRvbnMgd2l0aCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZSBzZXQgdG8gYW55IG9mIHRoZVxuICAgKiBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IGF0dHJpYnV0ZVZhbHVlc1xuICAgKiBAcGFyYW0gey4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgZnVuY3Rpb24oKT59IGF0dHJpYnV0ZVZhbHVlVG9DYWxsYmFja1xuICAgKi9cbiAgYXR0YWNoQnV0dG9uc1dpdGhBdHRyaWJ1dGUoXG4gICAgYXR0cmlidXRlLFxuICAgIGF0dHJpYnV0ZVZhbHVlcyxcbiAgICBvcHRpb25zLFxuICAgIGF0dHJpYnV0ZVZhbHVlVG9DYWxsYmFja1xuICApIHtcbiAgICBhdHRyaWJ1dGVWYWx1ZXMuZm9yRWFjaCgoYXR0cmlidXRlVmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5kb2NfXG4gICAgICAgIC5nZXRSb290Tm9kZSgpXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKGBidXR0b25bJHthdHRyaWJ1dGV9PVwiJHthdHRyaWJ1dGVWYWx1ZX1cIl1gKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZVZhbHVlID09PSBCdXR0b25BdHRyaWJ1dGVWYWx1ZXMuU1VCU0NSSVBUSU9OKSB7XG4gICAgICAgICAgdGhpcy5hdHRhY2hTdWJzY3JpYmVCdXR0b24oXG4gICAgICAgICAgICBlbGVtZW50c1tpXSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGVWYWx1ZVRvQ2FsbGJhY2tbYXR0cmlidXRlVmFsdWVdXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVWYWx1ZSA9PT0gQnV0dG9uQXR0cmlidXRlVmFsdWVzLkNPTlRSSUJVVElPTikge1xuICAgICAgICAgIHRoaXMuYXR0YWNoQ29udHJpYnV0ZUJ1dHRvbihcbiAgICAgICAgICAgIGVsZW1lbnRzW2ldLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIGF0dHJpYnV0ZVZhbHVlVG9DYWxsYmFja1thdHRyaWJ1dGVWYWx1ZV1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQW5hbHl0aWNzRXZlbnR9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpc0Zyb21Vc2VyQWN0aW9uXG4gICAqL1xuICBsb2dTd2dFdmVudF8oZXZlbnRUeXBlLCBpc0Zyb21Vc2VyQWN0aW9uKSB7XG4gICAgdGhpcy5jb25maWd1cmVkUnVudGltZVByb21pc2VfLnRoZW4oKGNvbmZpZ3VyZWRSdW50aW1lKSA9PiB7XG4gICAgICBjb25maWd1cmVkUnVudGltZS5ldmVudE1hbmFnZXIoKS5sb2dTd2dFdmVudChldmVudFR5cGUsIGlzRnJvbVVzZXJBY3Rpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Li4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc3wuLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHJldHVybiB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN8IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNtYXJ0QnV0dG9uT3B0aW9uc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE9wdGlvbnNfKG9wdGlvbnNPckNhbGxiYWNrKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IC8qKiBAdHlwZSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLkJ1dHRvbk9wdGlvbnN8IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNtYXJ0QnV0dG9uT3B0aW9uc30gKi8gKG9wdGlvbnNPckNhbGxiYWNrICYmXG4gICAgdHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrICE9ICdmdW5jdGlvbidcbiAgICAgID8gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICAgIDogeyd0aGVtZSc6IFRoZW1lLkxJR0hUfSk7XG5cbiAgICBjb25zdCB0aGVtZSA9IG9wdGlvbnNbJ3RoZW1lJ107XG4gICAgaWYgKHRoZW1lICE9PSBUaGVtZS5MSUdIVCAmJiB0aGVtZSAhPT0gVGhlbWUuREFSSykge1xuICAgICAgb3B0aW9uc1sndGhlbWUnXSA9IFRoZW1lLkxJR0hUO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gez8uLi9hcGkvc3Vic2NyaXB0aW9ucy5CdXR0b25PcHRpb25zfD8uLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7ZnVuY3Rpb24oKXxmdW5jdGlvbihFdmVudCk6Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldENhbGxiYWNrXyhvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtmdW5jdGlvbigpfGZ1bmN0aW9uKEV2ZW50KTpib29sZWFufSAqLyAoKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PVxuICAgICdmdW5jdGlvbidcbiAgICAgID8gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICAgIDogbnVsbCkgfHwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGJ1dHRvblxuICAgKiBAcGFyYW0ge0FuYWx5dGljc0V2ZW50fSBjbGlja0V2ZW50XG4gICAqIEBwYXJhbSB7Li4vYXBpL3N1YnNjcmlwdGlvbnMuU21hcnRCdXR0b25PcHRpb25zfGZ1bmN0aW9uKCl8Li4vYXBpL3N1YnNjcmlwdGlvbnMuQnV0dG9uT3B0aW9uc30gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gY2FsbGJhY2tGdW5cbiAgICogQHJldHVybiB7QnV0dG9uUGFyYW1zfVxuICAgKi9cbiAgc2V0dXBCdXR0b25BbmRHZXRQYXJhbXNfKGJ1dHRvbiwgY2xpY2tFdmVudCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrRnVuKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9uc18ob3B0aW9uc09yQ2FsbGJhY2spO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5nZXRDYWxsYmFja18ob3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrRnVuKTtcbiAgICBjb25zdCBjbGlja0Z1biA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5sb2dTd2dFdmVudF8oY2xpY2tFdmVudCwgdHJ1ZSk7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrRnVuKTtcbiAgICByZXR1cm4ge29wdGlvbnMsIGNsaWNrRnVufTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyFFbGVtZW50fSBidXR0b25cbiAgICogQHBhcmFtIHsuLi9hcGkvc3Vic2NyaXB0aW9ucy5TbWFydEJ1dHRvbk9wdGlvbnN8ZnVuY3Rpb24oKX0gb3B0aW9uc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBhdHRhY2hTbWFydEJ1dHRvbihkZXBzLCBidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuc2V0dXBCdXR0b25BbmRHZXRQYXJhbXNfKFxuICAgICAgYnV0dG9uLFxuICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1NXR19CVVRUT05fQ0xJQ0ssXG4gICAgICBvcHRpb25zT3JDYWxsYmFjayxcbiAgICAgIGNhbGxiYWNrXG4gICAgKTtcbiAgICAvLyBBZGQgcmVxdWlyZWQgQ1NTIGNsYXNzLCBpZiBtaXNzaW5nLlxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzd2ctc21hcnQtYnV0dG9uJyk7XG4gICAgcmV0dXJuIG5ldyBTbWFydFN1YnNjcmlwdGlvbkJ1dHRvbkFwaShcbiAgICAgIGRlcHMsXG4gICAgICBidXR0b24sXG4gICAgICBwYXJhbXMub3B0aW9ucyxcbiAgICAgIHBhcmFtcy5jbGlja0Z1blxuICAgICkuc3RhcnQoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtpc0NhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuaW1wb3J0IHt3YXJufSBmcm9tICcuLi91dGlscy9sb2cnO1xuXG4vKiogQGVudW0ge251bWJlcn0gKi9cbmNvbnN0IENhbGxiYWNrSWQgPSB7XG4gIEVOVElUTEVNRU5UUzogMSxcbiAgU1VCU0NSSUJFX1JFUVVFU1Q6IDIsXG4gIFBBWU1FTlRfUkVTUE9OU0U6IDMsXG4gIExPR0lOX1JFUVVFU1Q6IDQsXG4gIExJTktfUFJPR1JFU1M6IDUsXG4gIExJTktfQ09NUExFVEU6IDYsXG4gIEZMT1dfU1RBUlRFRDogNyxcbiAgRkxPV19DQU5DRUxFRDogOCxcbn07XG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tzIHtcbiAgLyoqXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PENhbGxiYWNrSWQsIGZ1bmN0aW9uKCopPn0gKi9cbiAgICB0aGlzLmNhbGxiYWNrc18gPSB7fTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PENhbGxiYWNrSWQsICo+fSAqL1xuICAgIHRoaXMucmVzdWx0QnVmZmVyXyA9IHt9O1xuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5wYXltZW50UmVzcG9uc2VQcm9taXNlXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhLi4vYXBpL2VudGl0bGVtZW50cy5FbnRpdGxlbWVudHM+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkVOVElUTEVNRU5UUywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4uL2FwaS9lbnRpdGxlbWVudHMuRW50aXRsZW1lbnRzPn0gcHJvbWlzZVxuICAgKi9cbiAgdHJpZ2dlckVudGl0bGVtZW50c1Jlc3BvbnNlKHByb21pc2UpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhcbiAgICAgIENhbGxiYWNrSWQuRU5USVRMRU1FTlRTLFxuICAgICAgcHJvbWlzZS50aGVuKChyZXMpID0+IHJlcy5jbG9uZSgpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0VudGl0bGVtZW50c1Jlc3BvbnNlUGVuZGluZygpIHtcbiAgICByZXR1cm4gISF0aGlzLnJlc3VsdEJ1ZmZlcl9bQ2FsbGJhY2tJZC5FTlRJVExFTUVOVFNdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIS4uL2FwaS9zdWJzY3JpcHRpb25zLkxvZ2luUmVxdWVzdCl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkxvZ2luUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuTE9HSU5fUkVRVUVTVCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLkxvZ2luUmVxdWVzdH0gcmVxdWVzdFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjYWxsYmFjayBoYXMgYmVlbiBmb3VuZC5cbiAgICovXG4gIHRyaWdnZXJMb2dpblJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKENhbGxiYWNrSWQuTE9HSU5fUkVRVUVTVCwgcmVxdWVzdCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25MaW5rUHJvZ3Jlc3MoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkxJTktfUFJPR1JFU1MsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjYWxsYmFjayBoYXMgYmVlbiBmb3VuZC5cbiAgICovXG4gIHRyaWdnZXJMaW5rUHJvZ3Jlc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oQ2FsbGJhY2tJZC5MSU5LX1BST0dSRVNTLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgcmVzZXRMaW5rUHJvZ3Jlc3MoKSB7XG4gICAgdGhpcy5yZXNldENhbGxiYWNrXyhDYWxsYmFja0lkLkxJTktfUFJPR1JFU1MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5MSU5LX0NPTVBMRVRFLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyTGlua0NvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKENhbGxiYWNrSWQuTElOS19DT01QTEVURSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0xpbmtDb21wbGV0ZVBlbmRpbmcoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5yZXN1bHRCdWZmZXJfW0NhbGxiYWNrSWQuTElOS19DT01QTEVURV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25TdWJzY3JpYmVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5TVUJTQ1JJQkVfUkVRVUVTVCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlclN1YnNjcmliZVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oQ2FsbGJhY2tJZC5TVUJTQ1JJQkVfUkVRVUVTVCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc1N1YnNjcmliZVJlcXVlc3RDYWxsYmFjaygpIHtcbiAgICByZXR1cm4gISF0aGlzLmNhbGxiYWNrc19bQ2FsbGJhY2tJZC5TVUJTQ1JJQkVfUkVRVUVTVF07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhLi4vYXBpL3N1YnNjcmliZS1yZXNwb25zZS5TdWJzY3JpYmVSZXNwb25zZT4pfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25TdWJzY3JpYmVSZXNwb25zZShjYWxsYmFjaykge1xuICAgIHdhcm4oXG4gICAgICBgW3N3Zy5qczpzZXRPblN1YnNjcmliZVJlc3BvbnNlXTogVGhpcyBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHN3aXRjaCB1c2FnZXMgdG8gJ3NldE9uUGF5bWVudFJlc3BvbnNlJ2BcbiAgICApO1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuUEFZTUVOVF9SRVNQT05TRSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIVByb21pc2U8IS4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuU3Vic2NyaWJlUmVzcG9uc2U+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB3YXJuKFxuICAgICAgYFtzd2cuanM6c2V0T25Db250cmlidXRpb25SZXNwb25zZV06IFRoaXMgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSBzd2l0Y2ggdXNhZ2VzIHRvICdzZXRPblBheW1lbnRSZXNwb25zZSdgXG4gICAgKTtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLlBBWU1FTlRfUkVTUE9OU0UsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCEuLi9hcGkvc3Vic2NyaWJlLXJlc3BvbnNlLlN1YnNjcmliZVJlc3BvbnNlPil9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPblBheW1lbnRSZXNwb25zZShjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuUEFZTUVOVF9SRVNQT05TRSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UuU3Vic2NyaWJlUmVzcG9uc2U+fSByZXNwb25zZVByb21pc2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyUGF5bWVudFJlc3BvbnNlKHJlc3BvbnNlUHJvbWlzZSkge1xuICAgIHRoaXMucGF5bWVudFJlc3BvbnNlUHJvbWlzZV8gPSByZXNwb25zZVByb21pc2UudGhlbihcbiAgICAgIChyZXMpID0+IHtcbiAgICAgICAgdGhpcy50cmlnZ2VyXyhcbiAgICAgICAgICBDYWxsYmFja0lkLlBBWU1FTlRfUkVTUE9OU0UsXG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHJlcy5jbG9uZSgpKVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIChyZWFzb24pID0+IHtcbiAgICAgICAgaWYgKGlzQ2FuY2VsRXJyb3IocmVhc29uKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gISF0aGlzLmNhbGxiYWNrc19bQ2FsbGJhY2tJZC5QQVlNRU5UX1JFU1BPTlNFXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzUGF5bWVudFJlc3BvbnNlUGVuZGluZygpIHtcbiAgICByZXR1cm4gISF0aGlzLnJlc3VsdEJ1ZmZlcl9bQ2FsbGJhY2tJZC5QQVlNRU5UX1JFU1BPTlNFXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHtmbG93OiBzdHJpbmcsIGRhdGE6ICFPYmplY3R9KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uRmxvd1N0YXJ0ZWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkZMT1dfU1RBUlRFRCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbG93XG4gICAqIEBwYXJhbSB7IU9iamVjdD19IGRhdGFcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyRmxvd1N0YXJ0ZWQoZmxvdywgZGF0YSA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oQ2FsbGJhY2tJZC5GTE9XX1NUQVJURUQsIHtcbiAgICAgIGZsb3csXG4gICAgICBkYXRhLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oe2Zsb3c6IHN0cmluZywgZGF0YTogIU9iamVjdH0pfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25GbG93Q2FuY2VsZWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkZMT1dfQ0FOQ0VMRUQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmxvd1xuICAgKiBAcGFyYW0geyFPYmplY3Q9fSBkYXRhXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlckZsb3dDYW5jZWxlZChmbG93LCBkYXRhID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLkZMT1dfQ0FOQ0VMRUQsIHtcbiAgICAgIGZsb3csXG4gICAgICBkYXRhLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUNhbGxiYWNrSWR9IGlkXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZXRDYWxsYmFja18oaWQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzX1tpZF0pIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBbc3dnLmpzXTogWW91IGhhdmUgcmVnaXN0ZXJlZCBtdWx0aXBsZSBjYWxsYmFja3MgZm9yIHRoZSBzYW1lIHJlc3BvbnNlLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuY2FsbGJhY2tzX1tpZF0gPSBjYWxsYmFjaztcbiAgICAvLyBJZiByZXN1bHQgYWxyZWFkeSBleGlzdCwgZXhlY3V0ZSB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheS5cbiAgICBpZiAoaWQgaW4gdGhpcy5yZXN1bHRCdWZmZXJfKSB7XG4gICAgICB0aGlzLmV4ZWN1dGVDYWxsYmFja18oaWQsIGNhbGxiYWNrLCB0aGlzLnJlc3VsdEJ1ZmZlcl9baWRdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQ2FsbGJhY2tJZH0gaWRcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyXyhpZCwgZGF0YSkge1xuICAgIHRoaXMucmVzdWx0QnVmZmVyX1tpZF0gPSBkYXRhO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NfW2lkXTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuZXhlY3V0ZUNhbGxiYWNrXyhpZCwgY2FsbGJhY2ssIGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gISFjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDYWxsYmFja0lkfSBpZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzZXRDYWxsYmFja18oaWQpIHtcbiAgICBpZiAoaWQgaW4gdGhpcy5yZXN1bHRCdWZmZXJfKSB7XG4gICAgICBkZWxldGUgdGhpcy5yZXN1bHRCdWZmZXJfW2lkXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQ2FsbGJhY2tJZH0gaWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbigqKX0gY2FsbGJhY2tcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleGVjdXRlQ2FsbGJhY2tfKGlkLCBjYWxsYmFjaywgZGF0YSkge1xuICAgIC8vIEFsd2F5cyBleGVjdXRlIGNhbGxiYWNrcyBpbiBhIG1pY3JvdGFzay5cbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgdGhpcy5yZXNldENhbGxiYWNrXyhpZCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMjEgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBdXRvUHJvbXB0Q29uZmlnfSBmcm9tICcuLi9tb2RlbC9hdXRvLXByb21wdC1jb25maWcnO1xuaW1wb3J0IHtDbGllbnRDb25maWd9IGZyb20gJy4uL21vZGVsL2NsaWVudC1jb25maWcnO1xuaW1wb3J0IHtDbGllbnRUaGVtZX0gZnJvbSAnLi4vYXBpL2Jhc2ljLXN1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtzZXJ2aWNlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuLyoqXG4gKiBNYW5hZ2VyIG9mIGhvdyB0aGUgY2xpZW50IHNob3VsZCBiZSBjb25maWd1cmVkLiBGZXRjaGVzIGFuZCBzdG9yZXNcbiAqIGNvbmZpZ3VyYXRpb24gZGV0YWlscyBmcm9tIHRoZSBzZXJ2ZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRDb25maWdNYW5hZ2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwdWJsaWNhdGlvbklkXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9iYXNpYy1zdWJzY3JpcHRpb25zLkNsaWVudE9wdGlvbnM9fSBjbGllbnRPcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWNhdGlvbklkLCBmZXRjaGVyLCBjbGllbnRPcHRpb25zKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9iYXNpYy1zdWJzY3JpcHRpb25zLkNsaWVudE9wdGlvbnN9ICovXG4gICAgdGhpcy5jbGllbnRPcHRpb25zXyA9IGNsaWVudE9wdGlvbnMgfHwge307XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5wdWJsaWNhdGlvbklkXyA9IHB1YmxpY2F0aW9uSWQ7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9mZXRjaGVyLkZldGNoZXJ9ICovXG4gICAgdGhpcy5mZXRjaGVyXyA9IGZldGNoZXI7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPCFDbGllbnRDb25maWc+fSAqL1xuICAgIHRoaXMucmVzcG9uc2VQcm9taXNlXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyB0aGUgY2xpZW50IGNvbmZpZyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFDbGllbnRDb25maWc+fVxuICAgKi9cbiAgZmV0Y2hDbGllbnRDb25maWcoKSB7XG4gICAgaWYgKCF0aGlzLnB1YmxpY2F0aW9uSWRfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZldGNoQ2xpZW50Q29uZmlnIHJlcXVpcmVzIHB1YmxpY2F0aW9uSWQnKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnJlc3BvbnNlUHJvbWlzZV8pIHtcbiAgICAgIHRoaXMucmVzcG9uc2VQcm9taXNlXyA9IHRoaXMuZmV0Y2hfKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY2xpZW50IGNvbmZpZywgaWYgYWxyZWFkeSByZXF1ZXN0ZWQuIE90aGVyd2lzZSByZXR1cm5zIGEgUHJvbWlzZVxuICAgKiB3aXRoIGFuIGVtcHR5IENsaWVudENvbmZpZy5cbiAgICogQHJldHVybiB7IVByb21pc2U8IUNsaWVudENvbmZpZz59XG4gICAqL1xuICBnZXRDbGllbnRDb25maWcoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2VQcm9taXNlXyB8fCBQcm9taXNlLnJlc29sdmUobmV3IENsaWVudENvbmZpZygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHJldHJpZXZpbmcgdGhlIGF1dG8gcHJvbXB0IHBvcnRpb24gb2YgdGhlIGNsaWVudFxuICAgKiBjb25maWd1cmF0aW9uLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vbW9kZWwvYXV0by1wcm9tcHQtY29uZmlnLkF1dG9Qcm9tcHRDb25maWd8dW5kZWZpbmVkPn1cbiAgICovXG4gIGdldEF1dG9Qcm9tcHRDb25maWcoKSB7XG4gICAgaWYgKCF0aGlzLnJlc3BvbnNlUHJvbWlzZV8pIHtcbiAgICAgIHRoaXMuZmV0Y2hDbGllbnRDb25maWcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2VQcm9taXNlXy50aGVuKFxuICAgICAgKGNsaWVudENvbmZpZykgPT4gY2xpZW50Q29uZmlnLmF1dG9Qcm9tcHRDb25maWdcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGxhbmd1YWdlIHRoZSBVSSBzaG91bGQgYmUgZGlzcGxheWVkIGluLiBTZWVcbiAgICogc3JjL2FwaS9iYXNpYy1zdWJzY3JpcHRpb25zLkNsaWVudE9wdGlvbnMubGFuZy4gVGhpc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRMYW5ndWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRPcHRpb25zXy5sYW5nIHx8ICdlbic7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdGhlbWUgdGhlIFVJIHNob3VsZCBiZSBkaXNwbGF5ZWQgaW4uIFNlZVxuICAgKiBzcmMvYXBpL2Jhc2ljLXN1YnNjcmlwdGlvbnMuQ2xpZW50T3B0aW9ucy50aGVtZS5cbiAgICogQHJldHVybiB7IS4uL2FwaS9iYXNpYy1zdWJzY3JpcHRpb25zLkNsaWVudFRoZW1lfVxuICAgKi9cbiAgZ2V0VGhlbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50T3B0aW9uc18udGhlbWUgfHwgQ2xpZW50VGhlbWUuTElHSFQ7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyB0aGUgY2xpZW50IGNvbmZpZyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFDbGllbnRDb25maWc+fVxuICAgKi9cbiAgZmV0Y2hfKCkge1xuICAgIGNvbnN0IHVybCA9IHNlcnZpY2VVcmwoXG4gICAgICAnL3B1YmxpY2F0aW9uLycgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5wdWJsaWNhdGlvbklkXykgK1xuICAgICAgICAnL2NsaWVudGNvbmZpZ3VyYXRpb24nXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaGVyXy5mZXRjaENyZWRlbnRpYWxlZEpzb24odXJsKS50aGVuKChqc29uKSA9PiB7XG4gICAgICBpZiAoanNvbi5lcnJvck1lc3NhZ2VzICYmIGpzb24uZXJyb3JNZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGpzb24uZXJyb3JNZXNzYWdlcy5mb3JFYWNoKChlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgICB3YXJuKCdTd0cgQ2xpZW50Q29uZmlnTWFuYWdlcjogJyArIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucGFyc2VDbGllbnRDb25maWdfKGpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgZmV0Y2hlZCBjb25maWcgaW50byB0aGUgQ2xpZW50Q29uZmlnIGNvbnRhaW5lciBvYmplY3QuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0ganNvblxuICAgKiBAcmV0dXJuIHshQ2xpZW50Q29uZmlnfVxuICAgKi9cbiAgcGFyc2VDbGllbnRDb25maWdfKGpzb24pIHtcbiAgICBjb25zdCBwYXlTd2dWZXJzaW9uID0ganNvblsncGF5U3dnVmVyc2lvbiddO1xuICAgIGNvbnN0IGF1dG9Qcm9tcHRDb25maWdKc29uID0ganNvblsnYXV0b1Byb21wdENvbmZpZyddO1xuICAgIGxldCBhdXRvUHJvbXB0Q29uZmlnID0gdW5kZWZpbmVkO1xuICAgIGlmIChhdXRvUHJvbXB0Q29uZmlnSnNvbikge1xuICAgICAgYXV0b1Byb21wdENvbmZpZyA9IG5ldyBBdXRvUHJvbXB0Q29uZmlnKFxuICAgICAgICBhdXRvUHJvbXB0Q29uZmlnSnNvbi5tYXhJbXByZXNzaW9uc1BlcldlZWssXG4gICAgICAgIGF1dG9Qcm9tcHRDb25maWdKc29uLmNsaWVudERpc3BsYXlUcmlnZ2VyPy5kaXNwbGF5RGVsYXlTZWNvbmRzLFxuICAgICAgICBhdXRvUHJvbXB0Q29uZmlnSnNvbi5leHBsaWNpdERpc21pc3NhbENvbmZpZz8uYmFja29mZlNlY29uZHMsXG4gICAgICAgIGF1dG9Qcm9tcHRDb25maWdKc29uLmV4cGxpY2l0RGlzbWlzc2FsQ29uZmlnPy5tYXhEaXNtaXNzYWxzUGVyV2VlayxcbiAgICAgICAgYXV0b1Byb21wdENvbmZpZ0pzb24uZXhwbGljaXREaXNtaXNzYWxDb25maWc/Lm1heERpc21pc3NhbHNSZXN1bHRpbmdIaWRlU2Vjb25kc1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWcoXG4gICAgICBhdXRvUHJvbXB0Q29uZmlnLFxuICAgICAgcGF5U3dnVmVyc2lvbixcbiAgICAgIGpzb25bJ3VzZVVwZGF0ZWRPZmZlckZsb3dzJ11cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QW5hbHl0aWNzRXZlbnQsIEV2ZW50T3JpZ2luYXRvcn0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7RmlsdGVyUmVzdWx0fSBmcm9tICcuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpJztcbmltcG9ydCB7aXNCb29sZWFuLCBpc0VudW1WYWx1ZSwgaXNGdW5jdGlvbiwgaXNPYmplY3R9IGZyb20gJy4uL3V0aWxzL3R5cGVzJztcbmltcG9ydCB7bG9nfSBmcm9tICcuLi91dGlscy9sb2cnO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBkZXNjcmliZSBhbiBpc3N1ZSB3aXRoIGFuIGV2ZW50IG9iamVjdFxuICogQHBhcmFtIHshc3RyaW5nfSB2YWx1ZU5hbWVcbiAqIEBwYXJhbSB7Pyp9IHZhbHVlXG4gKiBAcmV0dXJucyB7IXN0cmluZ31cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRXZlbnRFcnJvck1lc3NhZ2UodmFsdWVOYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gJ0V2ZW50IGhhcyBhbiBpbnZhbGlkICcgKyB2YWx1ZU5hbWUgKyAnKCcgKyB2YWx1ZSArICcpJztcbn1cblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGV2ZW50IGlzIGludmFsaWQuXG4gKiBAcGFyYW0geyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50fSBldmVudFxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUV2ZW50KGV2ZW50KSB7XG4gIGlmICghaXNPYmplY3QoZXZlbnQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBtdXN0IGJlIGEgdmFsaWQgb2JqZWN0Jyk7XG4gIH1cblxuICBpZiAoIWlzRW51bVZhbHVlKEFuYWx5dGljc0V2ZW50LCBldmVudC5ldmVudFR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGNyZWF0ZUV2ZW50RXJyb3JNZXNzYWdlKCdldmVudFR5cGUnLCBldmVudC5ldmVudFR5cGUpKTtcbiAgfVxuXG4gIGlmICghaXNFbnVtVmFsdWUoRXZlbnRPcmlnaW5hdG9yLCBldmVudC5ldmVudE9yaWdpbmF0b3IpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgY3JlYXRlRXZlbnRFcnJvck1lc3NhZ2UoJ2V2ZW50T3JpZ2luYXRvcicsIGV2ZW50LmV2ZW50T3JpZ2luYXRvcilcbiAgICApO1xuICB9XG5cbiAgaWYgKFxuICAgICFpc09iamVjdChldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVycykgJiZcbiAgICBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVycyAhPSBudWxsXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGNyZWF0ZUV2ZW50RXJyb3JNZXNzYWdlKFxuICAgICAgICAnYWRkaXRpb25hbFBhcmFtZXRlcnMnLFxuICAgICAgICBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVyc1xuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBpZiAoZXZlbnQuaXNGcm9tVXNlckFjdGlvbiAhPSBudWxsICYmICFpc0Jvb2xlYW4oZXZlbnQuaXNGcm9tVXNlckFjdGlvbikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBjcmVhdGVFdmVudEVycm9yTWVzc2FnZSgnaXNGcm9tVXNlckFjdGlvbicsIGV2ZW50LmlzRnJvbVVzZXJBY3Rpb24pXG4gICAgKTtcbiAgfVxufVxuXG4vKiogQGltcGxlbWVudHMgey4uL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuQ2xpZW50RXZlbnRNYW5hZ2VyQXBpfSAqL1xuZXhwb3J0IGNsYXNzIENsaWVudEV2ZW50TWFuYWdlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50fSBldmVudFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzUHVibGlzaGVyRXZlbnQoZXZlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZXZlbnQuZXZlbnRPcmlnaW5hdG9yID09PSBFdmVudE9yaWdpbmF0b3IuUFJPUEVOU0lUWV9DTElFTlQgfHxcbiAgICAgIGV2ZW50LmV2ZW50T3JpZ2luYXRvciA9PT0gRXZlbnRPcmlnaW5hdG9yLlBVQkxJU0hFUl9DTElFTlQgfHxcbiAgICAgIGV2ZW50LmV2ZW50T3JpZ2luYXRvciA9PT0gRXZlbnRPcmlnaW5hdG9yLkFNUF9DTElFTlRcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IVByb21pc2V9IGNvbmZpZ3VyZWRQcm9taXNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWd1cmVkUHJvbWlzZSkge1xuICAgIC8qKiBAcHJpdmF0ZSB7IUFycmF5PGZ1bmN0aW9uKCEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50KT59ICovXG4gICAgdGhpcy5saXN0ZW5lcnNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTxmdW5jdGlvbighLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudCk6IUZpbHRlclJlc3VsdD59ICovXG4gICAgdGhpcy5maWx0ZXJlcnNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMubGFzdEFjdGlvbl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5pc1JlYWR5UHJvbWlzZV8gPSBjb25maWd1cmVkUHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVzXG4gICAqL1xuICByZWdpc3RlckV2ZW50TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IG1hbmFnZXIgbGlzdGVuZXJzIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIH1cbiAgICB0aGlzLmxpc3RlbmVyc18ucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlc1xuICAgKi9cbiAgcmVnaXN0ZXJFdmVudEZpbHRlcmVyKGZpbHRlcmVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGZpbHRlcmVyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBtYW5hZ2VyIGZpbHRlcmVycyBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB9XG4gICAgdGhpcy5maWx0ZXJlcnNfLnB1c2goZmlsdGVyZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZXNcbiAgICogQHBhcmFtIHshLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudH0gZXZlbnRcbiAgICovXG4gIGxvZ0V2ZW50KGV2ZW50KSB7XG4gICAgdmFsaWRhdGVFdmVudChldmVudCk7XG4gICAgdGhpcy5sYXN0QWN0aW9uXyA9IHRoaXMuaXNSZWFkeVByb21pc2VfLnRoZW4oKCkgPT4ge1xuICAgICAgZm9yIChsZXQgZmlsdGVyZXIgPSAwOyBmaWx0ZXJlciA8IHRoaXMuZmlsdGVyZXJzXy5sZW5ndGg7IGZpbHRlcmVyKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodGhpcy5maWx0ZXJlcnNfW2ZpbHRlcmVyXShldmVudCkgPT09IEZpbHRlclJlc3VsdC5DQU5DRUxfRVZFTlQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2coZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGxpc3RlbmVyID0gMDsgbGlzdGVuZXIgPCB0aGlzLmxpc3RlbmVyc18ubGVuZ3RoOyBsaXN0ZW5lcisrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnNfW2xpc3RlbmVyXShldmVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2coZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGV2ZW50IHdpdGggdGhlIGFyZ3VtZW50cyBwcm92aWRlZCBhbmQgY2FsbHMgbG9nRXZlbnQuXG4gICAqIEBwYXJhbSB7IUFuYWx5dGljc0V2ZW50fSBldmVudFR5cGVcbiAgICogQHBhcmFtIHs/Ym9vbGVhbj19IGlzRnJvbVVzZXJBY3Rpb25cbiAgICogQHBhcmFtIHsuLi9wcm90by9hcGlfbWVzc2FnZXMuRXZlbnRQYXJhbXM9fSBldmVudFBhcmFtc1xuICAgKi9cbiAgbG9nU3dnRXZlbnQoZXZlbnRUeXBlLCBpc0Zyb21Vc2VyQWN0aW9uID0gZmFsc2UsIGV2ZW50UGFyYW1zID0gbnVsbCkge1xuICAgIHRoaXMubG9nRXZlbnQoe1xuICAgICAgZXZlbnRUeXBlLFxuICAgICAgZXZlbnRPcmlnaW5hdG9yOiBFdmVudE9yaWdpbmF0b3IuU1dHX0NMSUVOVCxcbiAgICAgIGlzRnJvbVVzZXJBY3Rpb24sXG4gICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogZXZlbnRQYXJhbXMsXG4gICAgfSk7XG4gIH1cblxuICAvKiogQHJldHVybiB7IVByb21pc2U8bnVsbD59ICovXG4gIGdldFJlYWR5UHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1JlYWR5UHJvbWlzZV87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBY3Rpdml0eUlmcmFtZVZpZXd9IGZyb20gJy4uL3VpL2FjdGl2aXR5LWlmcmFtZS12aWV3JztcbmltcG9ydCB7XG4gIEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG4gIFNrdVNlbGVjdGVkUmVzcG9uc2UsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge1BheVN0YXJ0Rmxvd30gZnJvbSAnLi9wYXktZmxvdyc7XG5pbXBvcnQge1Byb2R1Y3RUeXBlLCBTdWJzY3JpcHRpb25GbG93c30gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIENvbnRyaWJ1dGlvbnMgZmxvdy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRyaWJ1dGlvbnNGbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBvcHRpb25zKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMub3B0aW9uc18gPSBvcHRpb25zO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vY2xpZW50LWNvbmZpZy1tYW5hZ2VyLkNsaWVudENvbmZpZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5jbGllbnRDb25maWdNYW5hZ2VyXyA9IGRlcHMuY2xpZW50Q29uZmlnTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgY29uc3QgaXNDbG9zYWJsZSA9IChvcHRpb25zICYmIG9wdGlvbnMuaXNDbG9zYWJsZSkgfHwgdHJ1ZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPCFBY3Rpdml0eUlmcmFtZVZpZXc+fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3UHJvbWlzZV8gPSB0aGlzLmdldFVybF8oXG4gICAgICB0aGlzLmNsaWVudENvbmZpZ01hbmFnZXJfLmdldENsaWVudENvbmZpZygpXG4gICAgKS50aGVuKCh1cmwpID0+IHtcbiAgICAgIHJldHVybiBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICAgIGZlVXJsKHVybCksXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgJ3Byb2R1Y3RJZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAgICdwdWJsaWNhdGlvbklkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAgICdwcm9kdWN0VHlwZSc6IFByb2R1Y3RUeXBlLlVJX0NPTlRSSUJVVElPTixcbiAgICAgICAgICAnbGlzdCc6IChvcHRpb25zICYmIG9wdGlvbnMubGlzdCkgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICdza3VzJzogKG9wdGlvbnMgJiYgb3B0aW9ucy5za3VzKSB8fCBudWxsLFxuICAgICAgICAgICdpc0Nsb3NhYmxlJzogaXNDbG9zYWJsZSxcbiAgICAgICAgfSksXG4gICAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWVcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlfSByZXNwb25zZVxuICAgKi9cbiAgaGFuZGxlTGlua1JlcXVlc3RfKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLmdldFN1YnNjcmliZXJPck1lbWJlcigpKSB7XG4gICAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJMb2dpblJlcXVlc3Qoe1xuICAgICAgICBsaW5rUmVxdWVzdGVkOiAhIXJlc3BvbnNlLmdldExpbmtSZXF1ZXN0ZWQoKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1NrdVNlbGVjdGVkUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqL1xuICBzdGFydFBheUZsb3dfKHJlc3BvbnNlKSB7XG4gICAgY29uc3Qgc2t1ID0gcmVzcG9uc2UuZ2V0U2t1KCk7XG4gICAgY29uc3QgaXNPbmVUaW1lID0gcmVzcG9uc2UuZ2V0T25lVGltZSgpO1xuICAgIGlmIChza3UpIHtcbiAgICAgIGNvbnN0IC8qKiBAdHlwZSB7Li4vYXBpL3N1YnNjcmlwdGlvbnMuU3Vic2NyaXB0aW9uUmVxdWVzdH0gKi8gY29udHJpYnV0aW9uUmVxdWVzdCA9IHtcbiAgICAgICAgICAnc2t1SWQnOiBza3UsXG4gICAgICAgIH07XG4gICAgICBpZiAoaXNPbmVUaW1lKSB7XG4gICAgICAgIGNvbnRyaWJ1dGlvblJlcXVlc3RbJ29uZVRpbWUnXSA9IGlzT25lVGltZTtcbiAgICAgIH1cbiAgICAgIG5ldyBQYXlTdGFydEZsb3coXG4gICAgICAgIHRoaXMuZGVwc18sXG4gICAgICAgIGNvbnRyaWJ1dGlvblJlcXVlc3QsXG4gICAgICAgIFByb2R1Y3RUeXBlLlVJX0NPTlRSSUJVVElPTlxuICAgICAgKS5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIGNvbnRyaWJ1dGlvbnMgZmxvdyBvciBhbHJlYWR5TWVtYmVyIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3UHJvbWlzZV8udGhlbigoYWN0aXZpdHlJZnJhbWVWaWV3KSA9PiB7XG4gICAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0NPTlRSSUJVVElPTl9PUFRJT05TKTtcbiAgICAgIGFjdGl2aXR5SWZyYW1lVmlldy5vbkNhbmNlbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgICAudHJpZ2dlckZsb3dDYW5jZWxlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0NPTlRSSUJVVElPTl9PUFRJT05TKTtcbiAgICAgIH0pO1xuICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3Lm9uKFxuICAgICAgICBBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlLFxuICAgICAgICB0aGlzLmhhbmRsZUxpbmtSZXF1ZXN0Xy5iaW5kKHRoaXMpXG4gICAgICApO1xuICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3Lm9uKFNrdVNlbGVjdGVkUmVzcG9uc2UsIHRoaXMuc3RhcnRQYXlGbG93Xy5iaW5kKHRoaXMpKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoYWN0aXZpdHlJZnJhbWVWaWV3KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBVUkwgdGhhdCBzaG91bGQgYmUgdXNlZCBmb3IgdGhlIGFjdGl2aXR5IGlGcmFtZSB2aWV3LlxuICAgKiBAcGFyYW0geyFQcm9taXNlPC4uL21vZGVsL2NsaWVudC1jb25maWcuQ2xpZW50Q29uZmlnPn0gY2xpZW50Q29uZmlnUHJvbWlzZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZ2V0VXJsXyhjbGllbnRDb25maWdQcm9taXNlKSB7XG4gICAgcmV0dXJuIGNsaWVudENvbmZpZ1Byb21pc2UudGhlbigoY2xpZW50Q29uZmlnKSA9PiB7XG4gICAgICBpZiAoY2xpZW50Q29uZmlnLnVzZVVwZGF0ZWRPZmZlckZsb3dzKSB7XG4gICAgICAgIHJldHVybiAnL2NvbnRyaWJ1dGlvbm9mZmVyc2lmcmFtZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJy9jb250cmlidXRpb25zaWZyYW1lJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGl2aXR5SWZyYW1lVmlld30gZnJvbSAnLi4vdWkvYWN0aXZpdHktaWZyYW1lLXZpZXcnO1xuaW1wb3J0IHtBbmFseXRpY3NFdmVudH0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7RGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZX0gZnJvbSAnLi4vYXBpL2RlZmVycmVkLWFjY291bnQtY3JlYXRpb24nO1xuaW1wb3J0IHtKd3RIZWxwZXJ9IGZyb20gJy4uL3V0aWxzL2p3dCc7XG5pbXBvcnQge1BheUNvbXBsZXRlRmxvd30gZnJvbSAnLi9wYXktZmxvdyc7XG5pbXBvcnQge1B1cmNoYXNlRGF0YSwgU3Vic2NyaWJlUmVzcG9uc2V9IGZyb20gJy4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UnO1xuaW1wb3J0IHtTdWJzY3JpcHRpb25GbG93c30gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtVc2VyRGF0YX0gZnJvbSAnLi4vYXBpL3VzZXItZGF0YSc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtpc0NhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuXG4vKipcbiAqIFRoZSBmbG93IHRvIGluaXRpYXRlIGRlZmVycmVkIGFjY291bnQgcHJvY2Vzcy5cbiAqIFNlZSBgU3Vic2NyaXB0aW9ucy5jb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uYCBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZEFjY291bnRGbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7Py4uL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uLkRlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdH0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgb3B0aW9ucykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHR5cGUgeyEuLi9hcGkvZGVmZXJyZWQtYWNjb3VudC1jcmVhdGlvbi5EZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3R9ICovXG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBlbnRpdGxlbWVudHM6IG51bGwsXG4gICAgICBjb25zZW50OiB0cnVlLFxuICAgIH07XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uLkRlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdH0gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyB8fCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBkZWZlcnJlZCBhY2NvdW50IGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlPn1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIGNvbnN0IGVudGl0bGVtZW50cyA9IHRoaXMub3B0aW9uc18uZW50aXRsZW1lbnRzO1xuXG4gICAgLy8gRm9yIG5vdywgZW50aXRsZW1lbnRzIGFyZSByZXF1aXJlZCB0byBiZSBwcmVzZW50IGFuZCBoYXZlIHRoZSBHb29nbGVcbiAgICAvLyB0b2tlbi4gVGhpcyBpcyBzdHJpY3RseSBub3QgcmVxdWlyZWQgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbi4gQnV0IGl0J3NcbiAgICAvLyBwcmVmZXJyYWJsZSBBUEktd2lzZSBhdCB0aGlzIHRpbWUuXG4gICAgaWYgKCFlbnRpdGxlbWVudHMgfHwgIWVudGl0bGVtZW50cy5nZXRFbnRpdGxlbWVudEZvclNvdXJjZSgnZ29vZ2xlJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZW50aXRsZW1lbnRzIHdpdGggXCJnb29nbGVcIiBzb3VyY2UnKTtcbiAgICB9XG5cbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc19cbiAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5DT01QTEVURV9ERUZFUlJFRF9BQ0NPVU5UX0NSRUFUSU9OKTtcblxuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9yZWNvdmVyaWZyYW1lJyksXG4gICAgICBmZUFyZ3Moe1xuICAgICAgICAncHVibGljYXRpb25JZCc6IHRoaXMuZGVwc18ucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgJ3Byb2R1Y3RJZCc6IHRoaXMuZGVwc18ucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAnZW50aXRsZW1lbnRzJzogKGVudGl0bGVtZW50cyAmJiBlbnRpdGxlbWVudHMucmF3KSB8fCBudWxsLFxuICAgICAgICAnY29uc2VudCc6IHRoaXMub3B0aW9uc18uY29uc2VudCxcbiAgICAgIH0pLFxuICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4oXG4gICAgICAocmVzdWx0KSA9PiB7XG4gICAgICAgIC8vIFRoZSBjb25zZW50IHBhcnQgaXMgY29tcGxldGUuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUNvbnNlbnRSZXNwb25zZV8oXG4gICAgICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAocmVzdWx0LmRhdGEpXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgKHJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAgICAgICAudHJpZ2dlckZsb3dDYW5jZWxlZChcbiAgICAgICAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuQ09NUExFVEVfREVGRVJSRURfQUNDT1VOVF9DUkVBVElPTlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZGF0YVxuICAgKiBAcmV0dXJuIHshRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbnNlbnRSZXNwb25zZV8oZGF0YSkge1xuICAgIHRoaXMuZGVwc18uZW50aXRsZW1lbnRzTWFuYWdlcigpLmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuXG4gICAgLy8gUGFyc2UgdGhlIHJlc3BvbnNlLlxuICAgIGNvbnN0IGVudGl0bGVtZW50c0p3dCA9IGRhdGFbJ2VudGl0bGVtZW50cyddO1xuICAgIGNvbnN0IGlkVG9rZW4gPSBkYXRhWydpZFRva2VuJ107XG4gICAgY29uc3QgcHJvZHVjdFR5cGUgPSBkYXRhWydwcm9kdWN0VHlwZSddO1xuICAgIGNvbnN0IGVudGl0bGVtZW50cyA9IHRoaXMuZGVwc19cbiAgICAgIC5lbnRpdGxlbWVudHNNYW5hZ2VyKClcbiAgICAgIC5wYXJzZUVudGl0bGVtZW50cyh7J3NpZ25lZEVudGl0bGVtZW50cyc6IGVudGl0bGVtZW50c0p3dH0pO1xuICAgIGNvbnN0IHVzZXJEYXRhID0gbmV3IFVzZXJEYXRhKFxuICAgICAgaWRUb2tlbixcbiAgICAgIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG5ldyBKd3RIZWxwZXIoKS5kZWNvZGUoaWRUb2tlbikpXG4gICAgKTtcbiAgICBjb25zdCBwdXJjaGFzZURhdGFMaXN0ID0gZGF0YVsncHVyY2hhc2VEYXRhTGlzdCddXG4gICAgICA/IGRhdGFbJ3B1cmNoYXNlRGF0YUxpc3QnXS5tYXAoXG4gICAgICAgICAgKHBkKSA9PiBuZXcgUHVyY2hhc2VEYXRhKHBkWydkYXRhJ10sIHBkWydzaWduYXR1cmUnXSlcbiAgICAgICAgKVxuICAgICAgOiBbXG4gICAgICAgICAgLy8gVE9ETyhkdm95dGVua28pOiBjbGVhbnVwL2RlcHJlY2F0ZS5cbiAgICAgICAgICBuZXcgUHVyY2hhc2VEYXRhKFxuICAgICAgICAgICAgZGF0YVsncHVyY2hhc2VEYXRhJ11bJ2RhdGEnXSxcbiAgICAgICAgICAgIGRhdGFbJ3B1cmNoYXNlRGF0YSddWydzaWduYXR1cmUnXVxuICAgICAgICAgICksXG4gICAgICAgIF07XG5cbiAgICAvLyBGb3Igbm93LCB3ZSdsbCB1c2UgdGhlIGBQYXlDb21wbGV0ZUZsb3dgIGFzIGEgXCJjcmVhdGluZyBhY2NvdW50XCIgZmxvdy5cbiAgICAvLyBCdXQgdGhpcyBjYW4gYmUgZXZlbnR1YWxseSBpbXBsZW1lbnRlZCBieSB0aGUgc2FtZSBpZnJhbWUuXG4gICAgY29uc3QgY3JlYXRpbmdGbG93ID0gbmV3IFBheUNvbXBsZXRlRmxvdyh0aGlzLmRlcHNfKTtcbiAgICBjb25zdCBjb21wbGV0ZUhhbmRsZXIgPSBjcmVhdGluZ0Zsb3cuY29tcGxldGUuYmluZChjcmVhdGluZ0Zsb3cpO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZShcbiAgICAgIGVudGl0bGVtZW50cyxcbiAgICAgIHVzZXJEYXRhLFxuICAgICAgcHVyY2hhc2VEYXRhTGlzdCxcbiAgICAgIGNvbXBsZXRlSGFuZGxlclxuICAgICk7XG5cbiAgICB0aGlzLmRlcHNfXG4gICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgIC5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5BQ1RJT05fTkVXX0RFRkVSUkVEX0FDQ09VTlQsIHRydWUpO1xuXG4gICAgLy8gU3RhcnQgdGhlIFwic3luY1wiIGZsb3cuXG4gICAgY3JlYXRpbmdGbG93LnN0YXJ0KFxuICAgICAgbmV3IFN1YnNjcmliZVJlc3BvbnNlKFxuICAgICAgICAnJywgLy8gcmF3IGZpZWxkIGRvZXNuJ3QgbWF0dGVyIGluIHRoaXMgY2FzZVxuICAgICAgICBwdXJjaGFzZURhdGFMaXN0WzBdLFxuICAgICAgICB1c2VyRGF0YSxcbiAgICAgICAgZW50aXRsZW1lbnRzLFxuICAgICAgICBwcm9kdWN0VHlwZSxcbiAgICAgICAgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkgLy8gY29tcGxldGVIYW5kbGVyIGRvZXNuJ3QgbWF0dGVyIGluIHRoaXMgY2FzZVxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAaW50ZXJmYWNlICovXG5leHBvcnQgY2xhc3MgRGVwc0RlZiB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vbW9kZWwvZG9jLkRvY31cbiAgICovXG4gIGRvYygpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFXaW5kb3d9XG4gICAqL1xuICB3aW4oKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnfVxuICAgKi9cbiAgY29uZmlnKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9XG4gICAqL1xuICBwYWdlQ29uZmlnKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfVxuICAgKi9cbiAgYWN0aXZpdGllcygpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuL3BheS1jbGllbnQuUGF5Q2xpZW50fVxuICAgKi9cbiAgcGF5Q2xpZW50KCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn1cbiAgICovXG4gIGRpYWxvZ01hbmFnZXIoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi9lbnRpdGxlbWVudHMtbWFuYWdlci5FbnRpdGxlbWVudHNNYW5hZ2VyfVxuICAgKi9cbiAgZW50aXRsZW1lbnRzTWFuYWdlcigpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuL2NhbGxiYWNrcy5DYWxsYmFja3N9XG4gICAqL1xuICBjYWxsYmFja3MoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vcnVudGltZS9zdG9yYWdlLlN0b3JhZ2V9XG4gICAqL1xuICBzdG9yYWdlKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IS4uL3J1bnRpbWUvYW5hbHl0aWNzLXNlcnZpY2UuQW5hbHl0aWNzU2VydmljZX1cbiAgICovXG4gIGFuYWx5dGljcygpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuLi9ydW50aW1lL2pzZXJyb3IuSnNFcnJvcn1cbiAgICovXG4gIGpzZXJyb3IoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vcnVudGltZS9jbGllbnQtZXZlbnQtbWFuYWdlci5DbGllbnRFdmVudE1hbmFnZXJ9XG4gICAqL1xuICBldmVudE1hbmFnZXIoKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshLi4vcnVudGltZS9jbGllbnQtY29uZmlnLW1hbmFnZXIuQ2xpZW50Q29uZmlnTWFuYWdlcn1cbiAgICovXG4gIGNsaWVudENvbmZpZ01hbmFnZXIoKSB7fVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBbmFseXRpY3NFdmVudCxcbiAgRW50aXRsZW1lbnRKd3QsXG4gIEVudGl0bGVtZW50UmVzdWx0LFxuICBFbnRpdGxlbWVudFNvdXJjZSxcbiAgRW50aXRsZW1lbnRzUmVxdWVzdCxcbiAgRXZlbnRPcmlnaW5hdG9yLFxufSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBFbnRpdGxlbWVudCxcbiAgRW50aXRsZW1lbnRzLFxuICBHT09HTEVfTUVURVJJTkdfU09VUkNFLFxufSBmcm9tICcuLi9hcGkvZW50aXRsZW1lbnRzJztcbmltcG9ydCB7XG4gIEdldEVudGl0bGVtZW50c1BhcmFtc0V4dGVybmFsRGVmLFxuICBHZXRFbnRpdGxlbWVudHNQYXJhbXNJbnRlcm5hbERlZixcbn0gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtKd3RIZWxwZXJ9IGZyb20gJy4uL3V0aWxzL2p3dCc7XG5pbXBvcnQge01ldGVyQ2xpZW50VHlwZXN9IGZyb20gJy4uL2FwaS9tZXRlcmluZyc7XG5pbXBvcnQge01ldGVyVG9hc3RBcGl9IGZyb20gJy4vbWV0ZXItdG9hc3QtYXBpJztcbmltcG9ydCB7VG9hc3R9IGZyb20gJy4uL3VpL3RvYXN0JztcbmltcG9ydCB7YWRkUXVlcnlQYXJhbSwgZ2V0Q2Fub25pY2FsVXJsLCBwYXJzZVF1ZXJ5U3RyaW5nfSBmcm9tICcuLi91dGlscy91cmwnO1xuaW1wb3J0IHthbmFseXRpY3NFdmVudFRvRW50aXRsZW1lbnRSZXN1bHR9IGZyb20gJy4vZXZlbnQtdHlwZS1tYXBwaW5nJztcbmltcG9ydCB7YmFzZTY0VXJsRW5jb2RlRnJvbUJ5dGVzLCB1dGY4RW5jb2RlU3luY30gZnJvbSAnLi4vdXRpbHMvYnl0ZXMnO1xuaW1wb3J0IHtmZUFyZ3MsIGZlVXJsfSBmcm9tICcuLi9ydW50aW1lL3NlcnZpY2VzJztcbmltcG9ydCB7aGFzaH0gZnJvbSAnLi4vdXRpbHMvc3RyaW5nJztcbmltcG9ydCB7cXVlcnlTdHJpbmdIYXNGcmVzaEdhYVBhcmFtc30gZnJvbSAnLi4vdXRpbHMvZ2FhJztcbmltcG9ydCB7c2VydmljZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge3RvVGltZXN0YW1wfSBmcm9tICcuLi91dGlscy9kYXRlLXV0aWxzJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuY29uc3QgU0VSVklDRV9JRCA9ICdzdWJzY3JpYmUuZ29vZ2xlLmNvbSc7XG5jb25zdCBUT0FTVF9TVE9SQUdFX0tFWSA9ICd0b2FzdCc7XG5jb25zdCBFTlRTX1NUT1JBR0VfS0VZID0gJ2VudHMnO1xuY29uc3QgSVNfUkVBRFlfVE9fUEFZX1NUT1JBR0VfS0VZID0gJ2lzcmVhZHl0b3BheSc7XG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgRW50aXRsZW1lbnRzTWFuYWdlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSBwYWdlQ29uZmlnXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIHBhZ2VDb25maWcsIGZldGNoZXIsIGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSAqL1xuICAgIHRoaXMucGFnZUNvbmZpZ18gPSBwYWdlQ29uZmlnO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucHVibGljYXRpb25JZF8gPSB0aGlzLnBhZ2VDb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2ZldGNoZXIuRmV0Y2hlcn0gKi9cbiAgICB0aGlzLmZldGNoZXJfID0gZmV0Y2hlcjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFKd3RIZWxwZXJ9ICovXG4gICAgdGhpcy5qd3RIZWxwZXJfID0gbmV3IEp3dEhlbHBlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZTwhRW50aXRsZW1lbnRzPn0gKi9cbiAgICB0aGlzLnJlc3BvbnNlUHJvbWlzZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFN0cmluZyBjb250YWluaW5nIGVuY29kZWQgbWV0ZXJpbmcgcGFyYW1ldGVycyBjdXJyZW50bHkuXG4gICAgICogV2UgbWF5IGV4cGFuZCB0aGlzIHRvIGNvbnRhaW4gbW9yZSBpbmZvcm1hdGlvbiBpbiB0aGUgZnV0dXJlLlxuICAgICAqIEBwcml2YXRlIHs/c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuZW5jb2RlZFBhcmFtc18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vc3RvcmFnZS5TdG9yYWdlfSAqL1xuICAgIHRoaXMuc3RvcmFnZV8gPSBkZXBzLnN0b3JhZ2UoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2FuYWx5dGljcy1zZXJ2aWNlLkFuYWx5dGljc1NlcnZpY2V9ICovXG4gICAgdGhpcy5hbmFseXRpY3NTZXJ2aWNlXyA9IGRlcHMuYW5hbHl0aWNzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGRlcHMuY29uZmlnKCk7XG5cbiAgICB0aGlzLmRlcHNfXG4gICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgIC5yZWdpc3RlckV2ZW50TGlzdGVuZXIodGhpcy5wb3NzaWJseVBpbmdiYWNrT25DbGllbnRFdmVudF8uYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZXhwZWN0UG9zaXRpdmVcbiAgICovXG4gIHJlc2V0KGV4cGVjdFBvc2l0aXZlKSB7XG4gICAgdGhpcy5yZXNwb25zZVByb21pc2VfID0gbnVsbDtcbiAgICB0aGlzLnBvc2l0aXZlUmV0cmllc18gPSBNYXRoLm1heChcbiAgICAgIHRoaXMucG9zaXRpdmVSZXRyaWVzXyxcbiAgICAgIGV4cGVjdFBvc2l0aXZlID8gMyA6IDBcbiAgICApO1xuICAgIGlmIChleHBlY3RQb3NpdGl2ZSkge1xuICAgICAgdGhpcy5zdG9yYWdlXy5yZW1vdmUoRU5UU19TVE9SQUdFX0tFWSk7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnJlbW92ZShJU19SRUFEWV9UT19QQVlfU1RPUkFHRV9LRVkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIG9mIHRoZSBlbnRpdGxlbWVudHMgc3RhdGUgYW5kIGNhY2hlLlxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5yZXNwb25zZVByb21pc2VfID0gbnVsbDtcbiAgICB0aGlzLnBvc2l0aXZlUmV0cmllc18gPSAwO1xuICAgIHRoaXMudW5ibG9ja05leHROb3RpZmljYXRpb24oKTtcbiAgICB0aGlzLnN0b3JhZ2VfLnJlbW92ZShFTlRTX1NUT1JBR0VfS0VZKTtcbiAgICB0aGlzLnN0b3JhZ2VfLnJlbW92ZShUT0FTVF9TVE9SQUdFX0tFWSk7XG4gICAgdGhpcy5zdG9yYWdlXy5yZW1vdmUoSVNfUkVBRFlfVE9fUEFZX1NUT1JBR0VfS0VZKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFHZXRFbnRpdGxlbWVudHNQYXJhbXNFeHRlcm5hbERlZj19IHBhcmFtc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICovXG4gIGdldEVudGl0bGVtZW50cyhwYXJhbXMpIHtcbiAgICAvLyBSZW1haW4gYmFja3dhcmRzIGNvbXBhdGlibGUgYnkgYWNjZXB0aW5nXG4gICAgLy8gYGVuY3J5cHRlZERvY3VtZW50S2V5YCBzdHJpbmcgYXMgYSBmaXJzdCBwYXJhbS5cbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIFRPRE86IERlbGV0ZSB0aGUgZmFsbGJhY2sgaWYgbm9ib2R5IG5lZWRzIGl0LiBVc2UgYSBsb2cgdG8gdmVyaWZ5LlxuICAgICAgaWYgKERhdGUubm93KCkgPiAxNjAwMjg5MDE2OTU5KSB7XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGUgY29uZGl0aW9uYWwgY2hlY2sgZm9yIHRoaXMgd2FybmluZ1xuICAgICAgICAvLyBhZnRlciB0aGUgQU1QIGV4dGVuc2lvbiBpcyB1cGRhdGVkIHRvIHBhc3MgYW4gb2JqZWN0LlxuICAgICAgICB3YXJuKFxuICAgICAgICAgIGBbc3dnLmpzOmdldEVudGl0bGVtZW50c106IElmIHByZXNlbnQsIHRoZSBmaXJzdCBwYXJhbSBvZiBnZXRFbnRpdGxlbWVudHMoKSBzaG91bGQgYmUgYW4gb2JqZWN0IG9mIHR5cGUgR2V0RW50aXRsZW1lbnRzUGFyYW1zRXh0ZXJuYWxEZWYuYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBwYXJhbXMgPSB7XG4gICAgICAgIGVuY3J5cHRpb246IHtlbmNyeXB0ZWREb2N1bWVudEtleTogLyoqQHR5cGUge3N0cmluZ30gKi8gKHBhcmFtcyl9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucmVzcG9uc2VQcm9taXNlXykge1xuICAgICAgdGhpcy5yZXNwb25zZVByb21pc2VfID0gdGhpcy5nZXRFbnRpdGxlbWVudHNGbG93XyhwYXJhbXMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2VfLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2UuaXNSZWFkeVRvUGF5ICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hbmFseXRpY3NTZXJ2aWNlXy5zZXRSZWFkeVRvUGF5KHJlc3BvbnNlLmlzUmVhZHlUb1BheSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpc1JlYWR5VG9QYXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHB1c2hOZXh0RW50aXRsZW1lbnRzKHJhdywgaXNSZWFkeVRvUGF5KSB7XG4gICAgY29uc3QgZW50aXRsZW1lbnRzID0gdGhpcy5nZXRWYWxpZEp3dEVudGl0bGVtZW50c18oXG4gICAgICByYXcsXG4gICAgICAvKiByZXF1aXJlTm9uRXhwaXJlZCAqLyB0cnVlLFxuICAgICAgaXNSZWFkeVRvUGF5XG4gICAgKTtcbiAgICBpZiAoZW50aXRsZW1lbnRzICYmIGVudGl0bGVtZW50cy5lbmFibGVzVGhpcygpKSB7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnNldChFTlRTX1NUT1JBR0VfS0VZLCByYXcpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlICdnYWFfbicgcGFyYW1ldGVyIGZyb20gdGhlIHF1ZXJ5IHN0cmluZy5cbiAgICovXG4gIGdldEdhYVRva2VuXygpIHtcbiAgICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZyh0aGlzLndpbl8ubG9jYXRpb24uc2VhcmNoKVsnZ2FhX24nXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBpbmdiYWNrIHRoYXQgbWFya3MgYSBtZXRlcmluZyBlbnRpdGxlbWVudCBhcyB1c2VkLlxuICAgKiBAcGFyYW0geyFFbnRpdGxlbWVudHN9IGVudGl0bGVtZW50c1xuICAgKi9cbiAgY29uc3VtZU1ldGVyXyhlbnRpdGxlbWVudHMpIHtcbiAgICBjb25zdCBlbnRpdGxlbWVudCA9IGVudGl0bGVtZW50cy5nZXRFbnRpdGxlbWVudEZvclRoaXMoKTtcbiAgICBpZiAoIWVudGl0bGVtZW50IHx8IGVudGl0bGVtZW50LnNvdXJjZSAhPT0gR09PR0xFX01FVEVSSU5HX1NPVVJDRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBWZXJpZnkgR0FBIHBhcmFtcyBhcmUgcHJlc2VudCwgb3RoZXJ3aXNlIGJhaWwgc2luY2UgdGhlIHBpbmdiYWNrXG4gICAgLy8gc2hvdWxkbid0IGhhcHBlbiBvbiBub24tbWV0ZXJpbmcgcmVxdWVzdHMuXG4gICAgaWYgKCFxdWVyeVN0cmluZ0hhc0ZyZXNoR2FhUGFyYW1zKHRoaXMud2luXy5sb2NhdGlvbi5zZWFyY2gpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuRVZFTlRfVU5MT0NLRURfQllfTUVURVIsIGZhbHNlKTtcblxuICAgIGNvbnN0IHRva2VuID0gdGhpcy5nZXRHYWFUb2tlbl8oKTtcblxuICAgIGNvbnN0IGp3dCA9IG5ldyBFbnRpdGxlbWVudEp3dCgpO1xuICAgIGp3dC5zZXRTb3VyY2UoZW50aXRsZW1lbnQuc291cmNlKTtcbiAgICBqd3Quc2V0Snd0KGVudGl0bGVtZW50LnN1YnNjcmlwdGlvblRva2VuKTtcbiAgICByZXR1cm4gdGhpcy5wb3N0RW50aXRsZW1lbnRzUmVxdWVzdF8oXG4gICAgICBqd3QsXG4gICAgICBFbnRpdGxlbWVudFJlc3VsdC5VTkxPQ0tFRF9NRVRFUixcbiAgICAgIEVudGl0bGVtZW50U291cmNlLkdPT0dMRV9TSE9XQ0FTRV9NRVRFUklOR19TRVJWSUNFLFxuICAgICAgdG9rZW5cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbnMgZm9yIGV2ZW50cyBmcm9tIHRoZSBldmVudCBtYW5hZ2VyIGFuZCBpbmZvcm1zIHRoZSBzZXJ2ZXJcbiAgICogYWJvdXQgcHVibGlzaGVyIGVudGl0bGVtZW50cyBhbmQgbm9uLWNvbnN1bWFibGUgR29vZ2xlIGVudGl0bGVtZW50cy5cbiAgICogQHBhcmFtIHshLi4vYXBpL2NsaWVudC1ldmVudC1tYW5hZ2VyLWFwaS5DbGllbnRFdmVudH0gZXZlbnRcbiAgICovXG4gIHBvc3NpYmx5UGluZ2JhY2tPbkNsaWVudEV2ZW50XyhldmVudCkge1xuICAgIC8vIFZlcmlmeSBHQUEgcGFyYW1zIGFyZSBwcmVzZW50LCBvdGhlcndpc2UgYmFpbCBzaW5jZSB0aGUgcGluZ2JhY2tcbiAgICAvLyBzaG91bGRuJ3QgaGFwcGVuIG9uIG5vbi1tZXRlcmluZyByZXF1ZXN0cy5cbiAgICBpZiAoIXF1ZXJ5U3RyaW5nSGFzRnJlc2hHYWFQYXJhbXModGhpcy53aW5fLmxvY2F0aW9uLnNlYXJjaCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBIHN1YnNldCBvZiBhbmFseXRpY3MgZXZlbnRzIGFyZSBhbHNvIGFuIGVudGl0bGVtZW50IHJlc3VsdFxuICAgIGNvbnN0IHJlc3VsdCA9IGFuYWx5dGljc0V2ZW50VG9FbnRpdGxlbWVudFJlc3VsdChldmVudC5ldmVudFR5cGUpO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBzb3VyY2UgPSBudWxsO1xuXG4gICAgc3dpdGNoIChldmVudC5ldmVudE9yaWdpbmF0b3IpIHtcbiAgICAgIC8vIFRoZSBpbmRpY2F0ZXMgdGhlIHB1Ymxpc2hlciByZXBvcnRlZCBpdCB2aWEgc3Vic2NyaXB0aW9ucy5zZXRTaG93Y2FzZUVudGl0bGVtZW50XG4gICAgICBjYXNlIEV2ZW50T3JpZ2luYXRvci5TSE9XQ0FTRV9DTElFTlQ6XG4gICAgICAgIHNvdXJjZSA9IEVudGl0bGVtZW50U291cmNlLlBVQkxJU0hFUl9FTlRJVExFTUVOVDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEV2ZW50T3JpZ2luYXRvci5TV0dfQ0xJRU5UOiAvLyBGYWxsdGhyb3VnaCwgdGhlc2UgYXJlIHRoZSBzYW1lXG4gICAgICBjYXNlIEV2ZW50T3JpZ2luYXRvci5TV0dfU0VSVkVSOlxuICAgICAgICBpZiAocmVzdWx0ID09IEVudGl0bGVtZW50UmVzdWx0LlVOTE9DS0VEX01FVEVSKSB7XG4gICAgICAgICAgLy8gTWV0ZXJzIGZyb20gR29vZ2xlIHJlcXVpcmUgYSB2YWxpZCBqd3QsIHdoaWNoIGlzIHNlbnQgYnlcbiAgICAgICAgICAvLyBhbiBlbnRpdGxlbWVudC5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc291cmNlID0gRW50aXRsZW1lbnRTb3VyY2UuR09PR0xFX1NVQlNDUklCRVJfRU5USVRMRU1FTlQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gUGVybWlzc2lvbiB0byBwaW5nYmFjayBvdGhlciBzb3VyY2VzIHdhcyBub3QgcmVxdWVzdGVkXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRva2VuID0gdGhpcy5nZXRHYWFUb2tlbl8oKTtcbiAgICBjb25zdCBpc1VzZXJSZWdpc3RlcmVkID0gZXZlbnQ/LmFkZGl0aW9uYWxQYXJhbWV0ZXJzPy5nZXRJc1VzZXJSZWdpc3RlcmVkPy4oKTtcbiAgICB0aGlzLnBvc3RFbnRpdGxlbWVudHNSZXF1ZXN0XyhcbiAgICAgIG5ldyBFbnRpdGxlbWVudEp3dCgpLFxuICAgICAgcmVzdWx0LFxuICAgICAgc291cmNlLFxuICAgICAgdG9rZW4sXG4gICAgICBpc1VzZXJSZWdpc3RlcmVkXG4gICAgKTtcbiAgfVxuXG4gIC8vIEluZm9ybXMgdGhlIEVudGl0bGVtZW50cyBzZXJ2ZXIgYWJvdXQgdGhlIGVudGl0bGVtZW50IHVzZWRcbiAgLy8gdG8gdW5sb2NrIHRoZSBwYWdlLlxuICBwb3N0RW50aXRsZW1lbnRzUmVxdWVzdF8oXG4gICAgdXNlZEVudGl0bGVtZW50LFxuICAgIGVudGl0bGVtZW50UmVzdWx0LFxuICAgIGVudGl0bGVtZW50U291cmNlLFxuICAgIG9wdGlvbmFsVG9rZW4gPSAnJyxcbiAgICBvcHRpb25hbElzVXNlclJlZ2lzdGVyZWQgPSBudWxsXG4gICkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgRW50aXRsZW1lbnRzUmVxdWVzdCgpO1xuICAgIG1lc3NhZ2Uuc2V0VXNlZEVudGl0bGVtZW50KHVzZWRFbnRpdGxlbWVudCk7XG4gICAgbWVzc2FnZS5zZXRDbGllbnRFdmVudFRpbWUodG9UaW1lc3RhbXAoRGF0ZS5ub3coKSkpO1xuICAgIG1lc3NhZ2Uuc2V0RW50aXRsZW1lbnRSZXN1bHQoZW50aXRsZW1lbnRSZXN1bHQpO1xuICAgIG1lc3NhZ2Uuc2V0RW50aXRsZW1lbnRTb3VyY2UoZW50aXRsZW1lbnRTb3VyY2UpO1xuICAgIG1lc3NhZ2Uuc2V0VG9rZW4ob3B0aW9uYWxUb2tlbik7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25hbElzVXNlclJlZ2lzdGVyZWQgPT09ICdib29sZWFuJykge1xuICAgICAgbWVzc2FnZS5zZXRJc1VzZXJSZWdpc3RlcmVkKG9wdGlvbmFsSXNVc2VyUmVnaXN0ZXJlZCk7XG4gICAgfVxuXG4gICAgbGV0IHVybCA9XG4gICAgICAnL3B1YmxpY2F0aW9uLycgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucHVibGljYXRpb25JZF8pICtcbiAgICAgICcvZW50aXRsZW1lbnRzJztcbiAgICBpZiAodGhpcy5lbmNvZGVkUGFyYW1zXykge1xuICAgICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICdlbmNvZGVkUGFyYW1zJywgdGhpcy5lbmNvZGVkUGFyYW1zXyk7XG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaGVyXy5zZW5kUG9zdChzZXJ2aWNlVXJsKHVybCksIG1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUdldEVudGl0bGVtZW50c1BhcmFtc0V4dGVybmFsRGVmPX0gcGFyYW1zXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFFbnRpdGxlbWVudHM+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0RW50aXRsZW1lbnRzRmxvd18ocGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hFbnRpdGxlbWVudHNXaXRoQ2FjaGluZ18ocGFyYW1zKS50aGVuKChlbnRpdGxlbWVudHMpID0+IHtcbiAgICAgIHRoaXMub25FbnRpdGxlbWVudHNGZXRjaGVkXyhlbnRpdGxlbWVudHMpO1xuICAgICAgcmV0dXJuIGVudGl0bGVtZW50cztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFHZXRFbnRpdGxlbWVudHNQYXJhbXNFeHRlcm5hbERlZj19IHBhcmFtc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoRW50aXRsZW1lbnRzV2l0aENhY2hpbmdfKHBhcmFtcykge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLnN0b3JhZ2VfLmdldChFTlRTX1NUT1JBR0VfS0VZKSxcbiAgICAgIHRoaXMuc3RvcmFnZV8uZ2V0KElTX1JFQURZX1RPX1BBWV9TVE9SQUdFX0tFWSksXG4gICAgXSkudGhlbigoY2FjaGVkVmFsdWVzKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBjYWNoZWRWYWx1ZXNbMF07XG4gICAgICBjb25zdCBpcnRwID0gY2FjaGVkVmFsdWVzWzFdO1xuICAgICAgLy8gVHJ5IGNhY2hlIGZpcnN0LlxuICAgICAgY29uc3QgbmVlZHNEZWNyeXB0aW9uID0gISEocGFyYW1zICYmIHBhcmFtcy5lbmNyeXB0aW9uKTtcbiAgICAgIGlmIChyYXcgJiYgIW5lZWRzRGVjcnlwdGlvbikge1xuICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldFZhbGlkSnd0RW50aXRsZW1lbnRzXyhcbiAgICAgICAgICByYXcsXG4gICAgICAgICAgLyogcmVxdWlyZU5vbkV4cGlyZWQgKi8gdHJ1ZSxcbiAgICAgICAgICBpcnRwU3RyaW5nVG9Cb29sZWFuKGlydHApXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjYWNoZWQgJiYgY2FjaGVkLmVuYWJsZXNUaGlzKCkpIHtcbiAgICAgICAgICAvLyBBbHJlYWR5IGhhdmUgYSBwb3NpdGl2ZSByZXNwb25zZS5cbiAgICAgICAgICB0aGlzLnBvc2l0aXZlUmV0cmllc18gPSAwO1xuICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIElmIGNhY2hlIGRpZG4ndCBtYXRjaCwgcGVyZm9ybSBmZXRjaC5cbiAgICAgIHJldHVybiB0aGlzLmZldGNoRW50aXRsZW1lbnRzXyhwYXJhbXMpLnRoZW4oKGVudHMpID0+IHtcbiAgICAgICAgLy8gSWYgdGhlIHByb2R1Y3QgaXMgZW5hYmxlZCBieSBjYWNoZWFibGUgZW50aXRsZW1lbnRzLCBzdG9yZSB0aGVtIGluIGNhY2hlLlxuICAgICAgICBpZiAoZW50cyAmJiBlbnRzLmVuYWJsZXNUaGlzV2l0aENhY2hlYWJsZUVudGl0bGVtZW50cygpICYmIGVudHMucmF3KSB7XG4gICAgICAgICAgdGhpcy5zdG9yYWdlXy5zZXQoRU5UU19TVE9SQUdFX0tFWSwgZW50cy5yYXcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnRzO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshR2V0RW50aXRsZW1lbnRzUGFyYW1zRXh0ZXJuYWxEZWY9fSBwYXJhbXNcbiAgICogQHJldHVybiB7IVByb21pc2U8IUVudGl0bGVtZW50cz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaEVudGl0bGVtZW50c18ocGFyYW1zKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBSZXBsYWNlIHJldHJpZXMgd2l0aCBjb25zaXN0ZW50IGZldGNoLlxuICAgIGxldCBwb3NpdGl2ZVJldHJpZXMgPSB0aGlzLnBvc2l0aXZlUmV0cmllc187XG4gICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfID0gMDtcbiAgICBjb25zdCBhdHRlbXB0ID0gKCkgPT4ge1xuICAgICAgcG9zaXRpdmVSZXRyaWVzLS07XG4gICAgICByZXR1cm4gdGhpcy5mZXRjaF8ocGFyYW1zKS50aGVuKChlbnRpdGxlbWVudHMpID0+IHtcbiAgICAgICAgaWYgKGVudGl0bGVtZW50cy5lbmFibGVzVGhpcygpIHx8IHBvc2l0aXZlUmV0cmllcyA8PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGVudGl0bGVtZW50cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICB0aGlzLndpbl8uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGF0dGVtcHQoKSk7XG4gICAgICAgICAgfSwgNTUwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBhdHRlbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0VG9hc3RTaG93bih2YWx1ZSkge1xuICAgIHRoaXMuc3RvcmFnZV8uc2V0KFRPQVNUX1NUT1JBR0VfS0VZLCB2YWx1ZSA/ICcxJyA6ICcwJyk7XG4gIH1cblxuICAvKipcbiAgICovXG4gIGJsb2NrTmV4dE5vdGlmaWNhdGlvbigpIHtcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICB1bmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpIHtcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgSlNPTiBtdXN0IGVpdGhlciBjb250YWluIGEgXCJzaWduZWRFbnRpdGxlbWVudHNcIiB3aXRoIEpXVCwgb3JcbiAgICogXCJlbnRpdGxlbWVudHNcIiBmaWVsZCB3aXRoIHBsYWluIEpTT04gb2JqZWN0LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGpzb25cbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50c31cbiAgICovXG4gIHBhcnNlRW50aXRsZW1lbnRzKGpzb24pIHtcbiAgICBjb25zdCBpc1JlYWR5VG9QYXkgPSBqc29uWydpc1JlYWR5VG9QYXknXTtcbiAgICBpZiAoaXNSZWFkeVRvUGF5ID09IG51bGwpIHtcbiAgICAgIHRoaXMuc3RvcmFnZV8ucmVtb3ZlKElTX1JFQURZX1RPX1BBWV9TVE9SQUdFX0tFWSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RvcmFnZV8uc2V0KElTX1JFQURZX1RPX1BBWV9TVE9SQUdFX0tFWSwgU3RyaW5nKGlzUmVhZHlUb1BheSkpO1xuICAgIH1cbiAgICBjb25zdCBzaWduZWREYXRhID0ganNvblsnc2lnbmVkRW50aXRsZW1lbnRzJ107XG4gICAgY29uc3QgZGVjcnlwdGVkRG9jdW1lbnRLZXkgPSBqc29uWydkZWNyeXB0ZWREb2N1bWVudEtleSddO1xuICAgIGNvbnN0IHN3Z1VzZXJUb2tlbiA9IGpzb25bJ3N3Z1VzZXJUb2tlbiddO1xuICAgIGlmIChzaWduZWREYXRhKSB7XG4gICAgICBjb25zdCBlbnRpdGxlbWVudHMgPSB0aGlzLmdldFZhbGlkSnd0RW50aXRsZW1lbnRzXyhcbiAgICAgICAgc2lnbmVkRGF0YSxcbiAgICAgICAgLyogcmVxdWlyZU5vbkV4cGlyZWQgKi8gZmFsc2UsXG4gICAgICAgIGlzUmVhZHlUb1BheSxcbiAgICAgICAgZGVjcnlwdGVkRG9jdW1lbnRLZXlcbiAgICAgICk7XG4gICAgICBpZiAoZW50aXRsZW1lbnRzKSB7XG4gICAgICAgIHRoaXMuc2F2ZVN3Z1VzZXJUb2tlbl8oc3dnVXNlclRva2VuKTtcbiAgICAgICAgcmV0dXJuIGVudGl0bGVtZW50cztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGxhaW5FbnRpdGxlbWVudHMgPSBqc29uWydlbnRpdGxlbWVudHMnXTtcbiAgICAgIGlmIChwbGFpbkVudGl0bGVtZW50cykge1xuICAgICAgICB0aGlzLnNhdmVTd2dVc2VyVG9rZW5fKHN3Z1VzZXJUb2tlbik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVudGl0bGVtZW50c18oXG4gICAgICAgICAgJycsXG4gICAgICAgICAgcGxhaW5FbnRpdGxlbWVudHMsXG4gICAgICAgICAgaXNSZWFkeVRvUGF5LFxuICAgICAgICAgIGRlY3J5cHRlZERvY3VtZW50S2V5XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEVtcHR5IHJlc3BvbnNlLlxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUVudGl0bGVtZW50c18oJycsIFtdLCBpc1JlYWR5VG9QYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcnNpc3Qgc3dnVXNlclRva2VuIGluIGxvY2FsIHN0b3JhZ2UgaWYgZW50aXRsZW1lbnRzIGFuZCBzd2dVc2VyVG9rZW4gZXhpc3RcbiAgICogQHBhcmFtIHs/c3RyaW5nfHVuZGVmaW5lZH0gc3dnVXNlclRva2VuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzYXZlU3dnVXNlclRva2VuXyhzd2dVc2VyVG9rZW4pIHtcbiAgICBpZiAoc3dnVXNlclRva2VuKSB7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnNldChDb25zdGFudHMuVVNFUl9UT0tFTiwgc3dnVXNlclRva2VuLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVpcmVOb25FeHBpcmVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGlzUmVhZHlUb1BheVxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBkZWNyeXB0ZWREb2N1bWVudEtleVxuICAgKiBAcmV0dXJuIHs/RW50aXRsZW1lbnRzfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0VmFsaWRKd3RFbnRpdGxlbWVudHNfKFxuICAgIHJhdyxcbiAgICByZXF1aXJlTm9uRXhwaXJlZCxcbiAgICBpc1JlYWR5VG9QYXksXG4gICAgZGVjcnlwdGVkRG9jdW1lbnRLZXlcbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGp3dCA9IHRoaXMuand0SGVscGVyXy5kZWNvZGUocmF3KTtcbiAgICAgIGlmIChyZXF1aXJlTm9uRXhwaXJlZCkge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBleHAgPSBqd3RbJ2V4cCddO1xuICAgICAgICBpZiAocGFyc2VGbG9hdChleHApICogMTAwMCA8IG5vdykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlbnRpdGxlbWVudHNDbGFpbSA9IGp3dFsnZW50aXRsZW1lbnRzJ107XG4gICAgICByZXR1cm4gKFxuICAgICAgICAoZW50aXRsZW1lbnRzQ2xhaW0gJiZcbiAgICAgICAgICB0aGlzLmNyZWF0ZUVudGl0bGVtZW50c18oXG4gICAgICAgICAgICByYXcsXG4gICAgICAgICAgICBlbnRpdGxlbWVudHNDbGFpbSxcbiAgICAgICAgICAgIGlzUmVhZHlUb1BheSxcbiAgICAgICAgICAgIGRlY3J5cHRlZERvY3VtZW50S2V5XG4gICAgICAgICAgKSkgfHxcbiAgICAgICAgbnVsbFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIGVycm9yLlxuICAgICAgdGhpcy53aW5fLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshT2JqZWN0fCFBcnJheTwhT2JqZWN0Pn0ganNvblxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpc1JlYWR5VG9QYXlcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gZGVjcnlwdGVkRG9jdW1lbnRLZXlcbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50c31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZUVudGl0bGVtZW50c18ocmF3LCBqc29uLCBpc1JlYWR5VG9QYXksIGRlY3J5cHRlZERvY3VtZW50S2V5KSB7XG4gICAgcmV0dXJuIG5ldyBFbnRpdGxlbWVudHMoXG4gICAgICBTRVJWSUNFX0lELFxuICAgICAgcmF3LFxuICAgICAgRW50aXRsZW1lbnQucGFyc2VMaXN0RnJvbUpzb24oanNvbiksXG4gICAgICB0aGlzLnBhZ2VDb25maWdfLmdldFByb2R1Y3RJZCgpLFxuICAgICAgdGhpcy5hY2tfLmJpbmQodGhpcyksXG4gICAgICB0aGlzLmNvbnN1bWVfLmJpbmQodGhpcyksXG4gICAgICBpc1JlYWR5VG9QYXksXG4gICAgICBkZWNyeXB0ZWREb2N1bWVudEtleVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzfSBlbnRpdGxlbWVudHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uRW50aXRsZW1lbnRzRmV0Y2hlZF8oZW50aXRsZW1lbnRzKSB7XG4gICAgLy8gU2tpcCBhbnkgbm90aWZpY2F0aW9ucyBhbmQgdG9hc3QgaWYgb3RoZXIgZmxvd3MgYXJlIG9uZ29pbmcuXG4gICAgLy8gVE9ETyhkdm95dGVua28pOiB3aGF0J3MgdGhlIHJpZ2h0IGFjdGlvbiB3aGVuIHBheSBmbG93IHdhcyBjYW5jZWxlZD9cbiAgICBjb25zdCBibG9ja05vdGlmaWNhdGlvbiA9IHRoaXMuYmxvY2tOZXh0Tm90aWZpY2F0aW9uXztcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcbiAgICBpZiAoYmxvY2tOb3RpZmljYXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgb24gdGhlIHJlY2VpdmVkIGVudGl0bGVtZW50cy5cbiAgICB0aGlzLmRlcHNfXG4gICAgICAuY2FsbGJhY2tzKClcbiAgICAgIC50cmlnZ2VyRW50aXRsZW1lbnRzUmVzcG9uc2UoUHJvbWlzZS5yZXNvbHZlKGVudGl0bGVtZW50cykpO1xuXG4gICAgY29uc3QgZW50aXRsZW1lbnQgPSBlbnRpdGxlbWVudHMuZ2V0RW50aXRsZW1lbnRGb3JUaGlzKCk7XG4gICAgaWYgKCFlbnRpdGxlbWVudCkge1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkVWRU5UX05PX0VOVElUTEVNRU5UUywgZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1heWJlU2hvd1RvYXN0XyhlbnRpdGxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnR9IGVudGl0bGVtZW50XG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF5YmVTaG93VG9hc3RfKGVudGl0bGVtZW50KSB7XG4gICAgLy8gRG9uJ3Qgc2hvdyB0b2FzdCBmb3IgbWV0ZXJpbmcgZW50aXRsZW1lbnRzLlxuICAgIGlmIChlbnRpdGxlbWVudC5zb3VyY2UgPT09IEdPT0dMRV9NRVRFUklOR19TT1VSQ0UpIHtcbiAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAgIC5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5FVkVOVF9IQVNfTUVURVJJTkdfRU5USVRMRU1FTlRTLCBmYWxzZSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuRVZFTlRfVU5MT0NLRURfQllfU1VCU0NSSVBUSU9OLCBmYWxzZSk7XG4gICAgLy8gQ2hlY2sgaWYgc3RvcmFnZSBiaXQgaXMgc2V0LiBJdCdzIG9ubHkgc2V0IGJ5IHRoZSBgRW50aXRsZW1lbnRzLmFja2AgbWV0aG9kLlxuICAgIHJldHVybiB0aGlzLnN0b3JhZ2VfLmdldChUT0FTVF9TVE9SQUdFX0tFWSkudGhlbigodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IHRvYXN0V2FzU2hvd24gPSB2YWx1ZSA9PT0gJzEnO1xuICAgICAgaWYgKHRvYXN0V2FzU2hvd24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTaG93IHRvYXN0LlxuICAgICAgY29uc3Qgc291cmNlID0gZW50aXRsZW1lbnQuc291cmNlIHx8IEdPT0dMRV9NRVRFUklOR19TT1VSQ0U7XG4gICAgICByZXR1cm4gbmV3IFRvYXN0KFxuICAgICAgICB0aGlzLmRlcHNfLFxuICAgICAgICBmZVVybCgnL3RvYXN0aWZyYW1lJyksXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLnB1YmxpY2F0aW9uSWRfLFxuICAgICAgICAgICdzb3VyY2UnOiBzb3VyY2UsXG4gICAgICAgIH0pXG4gICAgICApLm9wZW4oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbnRpdGxlbWVudHN9IGVudGl0bGVtZW50c1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNrXyhlbnRpdGxlbWVudHMpIHtcbiAgICBpZiAoZW50aXRsZW1lbnRzLmdldEVudGl0bGVtZW50Rm9yVGhpcygpKSB7XG4gICAgICB0aGlzLnNldFRvYXN0U2hvd24odHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVudGl0bGVtZW50c30gZW50aXRsZW1lbnRzXG4gICAqIEBwYXJhbSB7P0Z1bmN0aW9uPX0gb25DbG9zZURpYWxvZyBDYWxsZWQgYWZ0ZXIgdGhlIHVzZXIgY2xvc2VzIHRoZSBkaWFsb2cuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdW1lXyhlbnRpdGxlbWVudHMsIG9uQ2xvc2VEaWFsb2cpIHtcbiAgICBpZiAoZW50aXRsZW1lbnRzLmVuYWJsZXNUaGlzV2l0aEdvb2dsZU1ldGVyaW5nKCkpIHtcbiAgICAgIGNvbnN0IG9uQ29uc3VtZUNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICBpZiAob25DbG9zZURpYWxvZykge1xuICAgICAgICAgIG9uQ2xvc2VEaWFsb2coKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnN1bWVNZXRlcl8oZW50aXRsZW1lbnRzKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBzaG93VG9hc3QgPSB0aGlzLmdldFNob3dUb2FzdEZyb21FbnRpdGxlbWVudHNfKGVudGl0bGVtZW50cyk7XG4gICAgICBpZiAoc2hvd1RvYXN0ID09PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBzaG93VG9hc3QgaXMgZXhwbGljaXRseSBmYWxzZSwgY2FsbCBvbkNvbnN1bWVDYWxsYmFjayBkaXJlY3RseS5cbiAgICAgICAgcmV0dXJuIG9uQ29uc3VtZUNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBtZXRlclRvYXN0QXBpID0gbmV3IE1ldGVyVG9hc3RBcGkodGhpcy5kZXBzXyk7XG4gICAgICBtZXRlclRvYXN0QXBpLnNldE9uQ29uc3VtZUNhbGxiYWNrKG9uQ29uc3VtZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBtZXRlclRvYXN0QXBpLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGBzaG93VG9hc3RgIHZhbHVlIChvciBudWxsL3VuZGVmaW5lZCBpZiB1bmF2YWlsYWJsZSkgZnJvbVxuICAgKiB0aGUgR29vZ2xlIG1ldGVyaW5nIGVudGl0bGVtZW50IGRldGFpbHMgaW4gdGhlIGlucHV0IGVudGl0bGVtZW50cy5cbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzfSBlbnRpdGxlbWVudHNcbiAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRTaG93VG9hc3RGcm9tRW50aXRsZW1lbnRzXyhlbnRpdGxlbWVudHMpIHtcbiAgICBjb25zdCBlbnRpdGxlbWVudCA9IGVudGl0bGVtZW50cy5nZXRFbnRpdGxlbWVudEZvclRoaXMoKTtcbiAgICBpZiAoIWVudGl0bGVtZW50IHx8IGVudGl0bGVtZW50LnNvdXJjZSAhPT0gR09PR0xFX01FVEVSSU5HX1NPVVJDRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgbWV0ZXJpbmdKd3QgPSB0aGlzLmp3dEhlbHBlcl8uZGVjb2RlKGVudGl0bGVtZW50LnN1YnNjcmlwdGlvblRva2VuKTtcbiAgICAgIHJldHVybiBtZXRlcmluZ0p3dFsnbWV0ZXJpbmcnXSAmJiBtZXRlcmluZ0p3dFsnbWV0ZXJpbmcnXVsnc2hvd1RvYXN0J107XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JlIGRlY29kaW5nIGVycm9ycy5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshR2V0RW50aXRsZW1lbnRzUGFyYW1zRXh0ZXJuYWxEZWY9fSBwYXJhbXNcbiAgICogQHJldHVybiB7IVByb21pc2U8IUVudGl0bGVtZW50cz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaF8ocGFyYW1zKSB7XG4gICAgLy8gR2V0IHN3Z1VzZXJUb2tlbiBmcm9tIGdldEVudGl0bGVtZW50cyBwYXJhbXNcbiAgICBjb25zdCBzd2dVc2VyVG9rZW5QYXJhbSA9IHBhcmFtcz8uZW5jcnlwdGlvbj8uc3dnVXNlclRva2VuO1xuICAgIC8vIEdldCBzd2dVc2VyVG9rZW4gZnJvbSBsb2NhbCBzdG9yYWdlIGlmIGl0IGlzIG5vdCBpbiBnZXRFbnRpdGxlbWVudHMgcGFyYW1zXG4gICAgY29uc3Qgc3dnVXNlclRva2VuUHJvbWlzZSA9IHN3Z1VzZXJUb2tlblBhcmFtXG4gICAgICA/IFByb21pc2UucmVzb2x2ZShzd2dVc2VyVG9rZW5QYXJhbSlcbiAgICAgIDogdGhpcy5zdG9yYWdlXy5nZXQoQ29uc3RhbnRzLlVTRVJfVE9LRU4sIHRydWUpO1xuXG4gICAgbGV0IHVybCA9XG4gICAgICAnL3B1YmxpY2F0aW9uLycgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucHVibGljYXRpb25JZF8pICtcbiAgICAgICcvZW50aXRsZW1lbnRzJztcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICBoYXNoKGdldENhbm9uaWNhbFVybCh0aGlzLmRlcHNfLmRvYygpKSksXG4gICAgICBzd2dVc2VyVG9rZW5Qcm9taXNlLFxuICAgIF0pXG4gICAgICAudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhc2hlZENhbm9uaWNhbFVybCA9IHZhbHVlc1swXTtcbiAgICAgICAgY29uc3Qgc3dnVXNlclRva2VuID0gdmFsdWVzWzFdO1xuXG4gICAgICAgIC8vIEFkZCBlbmNyeXB0aW9uIHBhcmFtLlxuICAgICAgICBpZiAocGFyYW1zPy5lbmNyeXB0aW9uKSB7XG4gICAgICAgICAgdXJsID0gYWRkUXVlcnlQYXJhbShcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICdjcnlwdCcsXG4gICAgICAgICAgICBwYXJhbXMuZW5jcnlwdGlvbi5lbmNyeXB0ZWREb2N1bWVudEtleVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgc3dnVXNlclRva2VuIHBhcmFtLlxuICAgICAgICBpZiAoc3dnVXNlclRva2VuKSB7XG4gICAgICAgICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICdzdXQnLCBzd2dVc2VyVG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIG1ldGVyaW5nIHBhcmFtcy5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMucHVibGljYXRpb25JZF8gJiZcbiAgICAgICAgICBwYXJhbXMgJiZcbiAgICAgICAgICBwYXJhbXMubWV0ZXJpbmcgJiZcbiAgICAgICAgICBwYXJhbXMubWV0ZXJpbmcuc3RhdGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgLyoqIEB0eXBlIHshR2V0RW50aXRsZW1lbnRzUGFyYW1zSW50ZXJuYWxEZWZ9ICovXG4gICAgICAgICAgY29uc3QgZW5jb2RhYmxlUGFyYW1zID0ge1xuICAgICAgICAgICAgbWV0ZXJpbmc6IHtcbiAgICAgICAgICAgICAgY2xpZW50VHlwZXM6IFtNZXRlckNsaWVudFR5cGVzLkxJQ0VOU0VEX0JZX0dPT0dMRV0sXG4gICAgICAgICAgICAgIG93bmVyOiB0aGlzLnB1YmxpY2F0aW9uSWRfLFxuICAgICAgICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgICAgICAgIGhhc2hlZENhbm9uaWNhbFVybCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgICAgICBpZDogcGFyYW1zLm1ldGVyaW5nLnN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gQWRkIGF0dHJpYnV0ZXMuXG4gICAgICAgICAgY29uc3Qgc3RhbmRhcmRBdHRyaWJ1dGVzID0gcGFyYW1zLm1ldGVyaW5nLnN0YXRlLnN0YW5kYXJkQXR0cmlidXRlcztcbiAgICAgICAgICBpZiAoc3RhbmRhcmRBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdGFuZGFyZEF0dHJpYnV0ZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICBlbmNvZGFibGVQYXJhbXMubWV0ZXJpbmcuc3RhdGUuYXR0cmlidXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3RhbmRhcmRfJyArIGtleSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHN0YW5kYXJkQXR0cmlidXRlc1trZXldLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY3VzdG9tQXR0cmlidXRlcyA9IHBhcmFtcy5tZXRlcmluZy5zdGF0ZS5jdXN0b21BdHRyaWJ1dGVzO1xuICAgICAgICAgIGlmIChjdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhjdXN0b21BdHRyaWJ1dGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgZW5jb2RhYmxlUGFyYW1zLm1ldGVyaW5nLnN0YXRlLmF0dHJpYnV0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2N1c3RvbV8nICsga2V5LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogY3VzdG9tQXR0cmlidXRlc1trZXldLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFbmNvZGUgcGFyYW1zLlxuICAgICAgICAgIHRoaXMuZW5jb2RlZFBhcmFtc18gPSBiYXNlNjRVcmxFbmNvZGVGcm9tQnl0ZXMoXG4gICAgICAgICAgICB1dGY4RW5jb2RlU3luYyhKU09OLnN0cmluZ2lmeShlbmNvZGFibGVQYXJhbXMpKVxuICAgICAgICAgICk7XG4gICAgICAgICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICdlbmNvZGVkUGFyYW1zJywgdGhpcy5lbmNvZGVkUGFyYW1zXyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCdWlsZCBVUkwuXG4gICAgICAgIHJldHVybiBzZXJ2aWNlVXJsKHVybCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHVybCkgPT4ge1xuICAgICAgICB0aGlzLmRlcHNfXG4gICAgICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9HRVRfRU5USVRMRU1FTlRTLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoZXJfLmZldGNoQ3JlZGVudGlhbGVkSnNvbih1cmwpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICAgIGlmIChqc29uLmVycm9yTWVzc2FnZXMgJiYganNvbi5lcnJvck1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBqc29uLmVycm9yTWVzc2FnZXMuZm9yRWFjaCgoZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB3YXJuKCdTd0cgRW50aXRsZW1lbnRzOiAnICsgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVudGl0bGVtZW50cyhqc29uKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBTdHJpbmcgdmFsdWUgb2YgaXNSZWFkeVRvUGF5XG4gKiAoZnJvbSBKU09OIG9yIENhY2hlKSB0byBhIGJvb2xlYW4gdmFsdWUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXJ0cFN0cmluZ1RvQm9vbGVhbih2YWx1ZSkge1xuICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgY2FzZSAndHJ1ZSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdmYWxzZSc6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTkgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBbmFseXRpY3NFdmVudCwgRW50aXRsZW1lbnRSZXN1bHR9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge0V2ZW50fSBmcm9tICcuLi9hcGkvbG9nZ2VyLWFwaSc7XG5pbXBvcnQge1xuICBQdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50LFxuICBTdWJzY3JpcHRpb25GbG93cyxcbn0gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZyxBbmFseXRpY3NFdmVudD59ICovXG5jb25zdCBQdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnQgPSB7XG4gIFtFdmVudC5JTVBSRVNTSU9OX1BBWVdBTExdOiBBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1BBWVdBTEwsXG4gIFtFdmVudC5JTVBSRVNTSU9OX0FEXTogQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9BRCxcbiAgW0V2ZW50LklNUFJFU1NJT05fT0ZGRVJTXTogQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9PRkZFUlMsXG4gIFtFdmVudC5BQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0VdOlxuICAgIEFuYWx5dGljc0V2ZW50LkFDVElPTl9TVUJTQ1JJUFRJT05TX0xBTkRJTkdfUEFHRSxcbiAgW0V2ZW50LkFDVElPTl9PRkZFUl9TRUxFQ1RFRF06IEFuYWx5dGljc0V2ZW50LkFDVElPTl9PRkZFUl9TRUxFQ1RFRCxcbiAgW0V2ZW50LkFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRF06XG4gICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1BBWU1FTlRfRkxPV19TVEFSVEVELFxuICBbRXZlbnQuQUNUSU9OX1BBWU1FTlRfQ09NUExFVEVEXTogQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1BBWU1FTlRfQ09NUExFVEUsXG4gIFtFdmVudC5FVkVOVF9DVVNUT01dOiBBbmFseXRpY3NFdmVudC5FVkVOVF9DVVNUT00sXG59O1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PD9BbmFseXRpY3NFdmVudCw/RXZlbnQ+fSAqL1xuY29uc3QgQW5hbHl0aWNzRXZlbnRUb1B1Ymxpc2hlckV2ZW50ID0ge1xuICBbQW5hbHl0aWNzRXZlbnQuVU5LTk9XTl06IG51bGwsXG4gIFtBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1BBWVdBTExdOiBFdmVudC5JTVBSRVNTSU9OX1BBWVdBTEwsXG4gIFtBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX0FEXTogRXZlbnQuSU1QUkVTU0lPTl9BRCxcbiAgW0FuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fT0ZGRVJTXTogRXZlbnQuSU1QUkVTU0lPTl9PRkZFUlMsXG4gIFtBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1NVQlNDUklCRV9CVVRUT05dOiBudWxsLFxuICBbQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9TTUFSVEJPWF06IG51bGwsXG4gIFtBbmFseXRpY3NFdmVudC5BQ1RJT05fU1VCU0NSSUJFXTogbnVsbCxcbiAgW0FuYWx5dGljc0V2ZW50LkFDVElPTl9QQVlNRU5UX0NPTVBMRVRFXTogRXZlbnQuQUNUSU9OX1BBWU1FTlRfQ09NUExFVEVELFxuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0FDQ09VTlRfQ1JFQVRFRF06IG51bGwsXG4gIFtBbmFseXRpY3NFdmVudC5BQ1RJT05fQUNDT1VOVF9BQ0tOT1dMRURHRURdOiBudWxsLFxuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1NVQlNDUklQVElPTlNfTEFORElOR19QQUdFXTpcbiAgICBFdmVudC5BQ1RJT05fU1VCU0NSSVBUSU9OU19MQU5ESU5HX1BBR0UsXG4gIFtBbmFseXRpY3NFdmVudC5BQ1RJT05fUEFZTUVOVF9GTE9XX1NUQVJURURdOlxuICAgIEV2ZW50LkFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRCxcbiAgW0FuYWx5dGljc0V2ZW50LkFDVElPTl9PRkZFUl9TRUxFQ1RFRF06IEV2ZW50LkFDVElPTl9PRkZFUl9TRUxFQ1RFRCxcbiAgW0FuYWx5dGljc0V2ZW50LkVWRU5UX1BBWU1FTlRfRkFJTEVEXTogbnVsbCxcbiAgW0FuYWx5dGljc0V2ZW50LkVWRU5UX0NVU1RPTV06IEV2ZW50LkVWRU5UX0NVU1RPTSxcbn07XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLD9BcnJheTxBbmFseXRpY3NFdmVudD4+fSAqL1xuY29uc3QgU2hvd2Nhc2VFbnRpdGxlbWVubnRUb0FuYWx5dGljc0V2ZW50cyA9IHtcbiAgLy8gRXZlbnRzIHJlbGF0ZWQgdG8gY29udGVudCBiZWluZyBwb3RlbnRpYWxseSB1bmxvY2thYmxlXG4gIFtQdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50LkVWRU5UX1NIT1dDQVNFX01FVEVSX09GRkVSRURdOiBbXG4gICAgQW5hbHl0aWNzRXZlbnQuRVZFTlRfSEFTX01FVEVSSU5HX0VOVElUTEVNRU5UUyxcbiAgICBBbmFseXRpY3NFdmVudC5FVkVOVF9PRkZFUkVEX01FVEVSLFxuICBdLFxuXG4gIC8vIEV2ZW50cyByZWxhdGVkIHRvIGNvbnRlbnQgYmVpbmcgdW5sb2NrZWRcbiAgW1B1Ymxpc2hlckVudGl0bGVtZW50RXZlbnQuRVZFTlRfU0hPV0NBU0VfVU5MT0NLRURfQllfU1VCU0NSSVBUSU9OXTogW1xuICAgIEFuYWx5dGljc0V2ZW50LkVWRU5UX1VOTE9DS0VEX0JZX1NVQlNDUklQVElPTixcbiAgXSxcbiAgW1B1Ymxpc2hlckVudGl0bGVtZW50RXZlbnQuRVZFTlRfU0hPV0NBU0VfVU5MT0NLRURfQllfTUVURVJdOiBbXG4gICAgQW5hbHl0aWNzRXZlbnQuRVZFTlRfSEFTX01FVEVSSU5HX0VOVElUTEVNRU5UUyxcbiAgICBBbmFseXRpY3NFdmVudC5FVkVOVF9VTkxPQ0tFRF9CWV9NRVRFUixcbiAgXSxcbiAgW1B1Ymxpc2hlckVudGl0bGVtZW50RXZlbnQuRVZFTlRfU0hPV0NBU0VfVU5MT0NLRURfRlJFRV9QQUdFXTogW1xuICAgIEFuYWx5dGljc0V2ZW50LkVWRU5UX1VOTE9DS0VEX0ZSRUVfUEFHRSxcbiAgXSxcblxuICAvLyBFdmVudHMgcmVxdWlyaW5nIHVzZXIgYWN0aW9uIHRvIHVubG9jayBjb250ZW50XG4gIFtQdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50LkVWRU5UX1NIT1dDQVNFX05PX0VOVElUTEVNRU5UU19SRUdXQUxMXTogW1xuICAgIEFuYWx5dGljc0V2ZW50LkVWRU5UX05PX0VOVElUTEVNRU5UUyxcbiAgICBBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1JFR1dBTEwsXG4gICAgQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9TSE9XQ0FTRV9SRUdXQUxMLFxuICBdLFxuXG4gIC8vIEV2ZW50cyByZXF1aXJpbmcgc3Vic2NyaXB0aW9uIHRvIHVubG9jayBjb250ZW50XG4gIFtQdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50LkVWRU5UX1NIT1dDQVNFX05PX0VOVElUTEVNRU5UU19QQVlXQUxMXTogW1xuICAgIEFuYWx5dGljc0V2ZW50LkVWRU5UX05PX0VOVElUTEVNRU5UUyxcbiAgICBBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1BBWVdBTEwsXG4gIF0sXG4gIFtQdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50LkVWRU5UX1NIT1dDQVNFX0lORUxJR0lCTEVfUEFZV0FMTF06IFtcbiAgICAvLyBUT0RPKGIvMTgxNjkwMDU5KTogQ3JlYXRlIHNob3djYXNlIGluZWxpZ2libGUgQW5hbHl0aWNzRXZlbnRcbiAgICBBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1BBWVdBTEwsXG4gIF0sXG59O1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PD9BbmFseXRpY3NFdmVudCw/RXZlbnQ+fSAqL1xuY29uc3QgQW5hbHl0aWNzRXZlbnRUb0VudGl0bGVtZW50UmVzdWx0ID0ge1xuICBbQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9SRUdXQUxMXTogRW50aXRsZW1lbnRSZXN1bHQuTE9DS0VEX1JFR1dBTEwsXG4gIFtBbmFseXRpY3NFdmVudC5FVkVOVF9VTkxPQ0tFRF9CWV9NRVRFUl06IEVudGl0bGVtZW50UmVzdWx0LlVOTE9DS0VEX01FVEVSLFxuICBbQW5hbHl0aWNzRXZlbnQuRVZFTlRfVU5MT0NLRURfQllfU1VCU0NSSVBUSU9OXTpcbiAgICBFbnRpdGxlbWVudFJlc3VsdC5VTkxPQ0tFRF9TVUJTQ1JJQkVSLFxuICBbQW5hbHl0aWNzRXZlbnQuRVZFTlRfVU5MT0NLRURfRlJFRV9QQUdFXTogRW50aXRsZW1lbnRSZXN1bHQuVU5MT0NLRURfRlJFRSxcbiAgW0FuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fUEFZV0FMTF06IEVudGl0bGVtZW50UmVzdWx0LkxPQ0tFRF9QQVlXQUxMLFxufTtcblxuLyoqXG4gKiBAcGFyYW0geyFzdHJpbmd9IGV2ZW50Q2F0ZWdvcnlcbiAqIEBwYXJhbSB7IXN0cmluZ30gZXZlbnRBY3Rpb25cbiAqIEBwYXJhbSB7IXN0cmluZ30gZXZlbnRMYWJlbFxuICogQHBhcmFtIHshYm9vbGVhbn0gbm9uSW50ZXJhY3Rpb25cbiAqIEByZXR1cm5zIHshT2JqZWN0fVxuICovXG5jb25zdCBjcmVhdGVHb29nbGVBbmFseXRpY3NFdmVudCA9IChcbiAgZXZlbnRDYXRlZ29yeSxcbiAgZXZlbnRBY3Rpb24sXG4gIGV2ZW50TGFiZWwsXG4gIG5vbkludGVyYWN0aW9uXG4pID0+ICh7XG4gIGV2ZW50Q2F0ZWdvcnksXG4gIGV2ZW50QWN0aW9uLFxuICBldmVudExhYmVsLFxuICBub25JbnRlcmFjdGlvbixcbn0pO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PD9BbmFseXRpY3NFdmVudCw/T2JqZWN0Pn0gKi9cbmV4cG9ydCBjb25zdCBBbmFseXRpY3NFdmVudFRvR29vZ2xlQW5hbHl0aWNzRXZlbnQgPSB7XG4gIFtBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX09GRkVSU106IGNyZWF0ZUdvb2dsZUFuYWx5dGljc0V2ZW50KFxuICAgICdOVEcgcGF5d2FsbCcsXG4gICAgJ3BheXdhbGwgbW9kYWwgaW1wcmVzc2lvbicsXG4gICAgJycsXG4gICAgdHJ1ZVxuICApLFxuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVEXTogY3JlYXRlR29vZ2xlQW5hbHl0aWNzRXZlbnQoXG4gICAgJ05URyBwYXl3YWxsJyxcbiAgICAnY2xpY2snLFxuICAgICcnLFxuICAgIGZhbHNlXG4gICksXG4gIFtBbmFseXRpY3NFdmVudC5BQ1RJT05fU1dHX1NVQlNDUklQVElPTl9NSU5JX1BST01QVF9DTElDS106IGNyZWF0ZUdvb2dsZUFuYWx5dGljc0V2ZW50KFxuICAgICdOVEcgc3Vic2NyaXB0aW9uJyxcbiAgICAnbWFya2V0aW5nIG1vZGFsIGNsaWNrJyxcbiAgICAnJyxcbiAgICBmYWxzZVxuICApLFxuICBbQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9TV0dfU1VCU0NSSVBUSU9OX01JTklfUFJPTVBUXTogY3JlYXRlR29vZ2xlQW5hbHl0aWNzRXZlbnQoXG4gICAgJ05URyBzdWJzY3JpcHRpb24nLFxuICAgICdtYXJrZXRpbmcgbW9kYWwgaW1wcmVzc2lvbicsXG4gICAgJycsXG4gICAgdHJ1ZVxuICApLFxuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1NXR19DT05UUklCVVRJT05fTUlOSV9QUk9NUFRfQ0xJQ0tdOiBjcmVhdGVHb29nbGVBbmFseXRpY3NFdmVudChcbiAgICAnTlRHIG1lbWJlcnNoaXAnLFxuICAgICdtYXJrZXRpbmcgbW9kYWwgY2xpY2snLFxuICAgICcnLFxuICAgIGZhbHNlXG4gICksXG4gIFtBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX1NXR19DT05UUklCVVRJT05fTUlOSV9QUk9NUFRdOiBjcmVhdGVHb29nbGVBbmFseXRpY3NFdmVudChcbiAgICAnTlRHIG1lbWJlcnNoaXAnLFxuICAgICdtZW1iZXJzaGlwIG1vZGFsIGltcHJlc3Npb24nLFxuICAgICcnLFxuICAgIHRydWVcbiAgKSxcbn07XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8P0FuYWx5dGljc0V2ZW50LD9PYmplY3Q+fSAqL1xuZXhwb3J0IGNvbnN0IFN1YnNjcmlwdGlvblNwZWNpZmljQW5hbHl0aWNzRXZlbnRUb0dvb2dsZUFuYWx5dGljc0V2ZW50ID0ge1xuICBbQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1BBWU1FTlRfQ09NUExFVEVdOiBjcmVhdGVHb29nbGVBbmFseXRpY3NFdmVudChcbiAgICAnTlRHIHN1YnNjcmlwdGlvbicsXG4gICAgJ3N1Ym1pdCcsXG4gICAgJ3N1Y2Nlc3MnLFxuICAgIGZhbHNlXG4gICksXG59O1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PD9BbmFseXRpY3NFdmVudCw/T2JqZWN0Pn0gKi9cbmV4cG9ydCBjb25zdCBDb250cmlidXRpb25TcGVjaWZpY0FuYWx5dGljc0V2ZW50VG9Hb29nbGVBbmFseXRpY3NFdmVudCA9IHtcbiAgW0FuYWx5dGljc0V2ZW50LkFDVElPTl9QQVlNRU5UX0NPTVBMRVRFXTogY3JlYXRlR29vZ2xlQW5hbHl0aWNzRXZlbnQoXG4gICAgJ05URyBtZW1iZXJzaGlwJyxcbiAgICAnc3VibWl0JyxcbiAgICAnc3VjY2VzcycsXG4gICAgZmFsc2VcbiAgKSxcbn07XG5cbi8qKlxuICogQ29udmVydHMgYSBwcm9wZW5zaXR5IGV2ZW50IGVudW0gaW50byBhbiBhbmFseXRpY3MgZXZlbnQgZW51bS5cbiAqIEBwYXJhbSB7IUV2ZW50fHN0cmluZ30gcHJvcGVuc2l0eUV2ZW50XG4gKiBAcmV0dXJucyB7IUFuYWx5dGljc0V2ZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaGVyRXZlbnRUb0FuYWx5dGljc0V2ZW50KHByb3BlbnNpdHlFdmVudCkge1xuICByZXR1cm4gUHVibGlzaGVyRXZlbnRUb0FuYWx5dGljc0V2ZW50W3Byb3BlbnNpdHlFdmVudF07XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYW5hbHl0aWNzIGV2ZW50IGVudW0gaW50byBhIHByb3BlbnNpdHkgZXZlbnQgZW51bS5cbiAqIEBwYXJhbSB7P0FuYWx5dGljc0V2ZW50fSBhbmFseXRpY3NFdmVudFxuICogQHJldHVybnMgez9FdmVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuYWx5dGljc0V2ZW50VG9QdWJsaXNoZXJFdmVudChhbmFseXRpY3NFdmVudCkge1xuICByZXR1cm4gQW5hbHl0aWNzRXZlbnRUb1B1Ymxpc2hlckV2ZW50W2FuYWx5dGljc0V2ZW50XTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHB1Ymxpc2hlciBlbnRpdGxlbWVudCBldmVudCBlbnVtIGludG8gYW4gYXJyYXkgYW5hbHl0aWNzIGV2ZW50cy5cbiAqIEBwYXJhbSB7IVB1Ymxpc2hlckVudGl0bGVtZW50RXZlbnR8c3RyaW5nfSBldmVudFxuICogQHJldHVybnMgeyFBcnJheTxBbmFseXRpY3NFdmVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoZXJFbnRpdGxlbWVudEV2ZW50VG9BbmFseXRpY3NFdmVudHMoZXZlbnQpIHtcbiAgcmV0dXJuIFNob3djYXNlRW50aXRsZW1lbm50VG9BbmFseXRpY3NFdmVudHNbZXZlbnRdIHx8IFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYW5hbHl0aWNzRXZlbnRUb0VudGl0bGVtZW50UmVzdWx0KGV2ZW50KSB7XG4gIHJldHVybiBBbmFseXRpY3NFdmVudFRvRW50aXRsZW1lbnRSZXN1bHRbZXZlbnRdO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuYWx5dGljcyBldmVudCBlbnVtIGludG8gYSBHb29nbGUgQW5hbHl0aWNzIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7P0FuYWx5dGljc0V2ZW50fSBldmVudFxuICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbkZsb3dcbiAqIEByZXR1cm5zIHs/T2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5hbHl0aWNzRXZlbnRUb0dvb2dsZUFuYWx5dGljc0V2ZW50KGV2ZW50LCBzdWJzY3JpcHRpb25GbG93KSB7XG4gIGxldCBnYUV2ZW50ID0gbnVsbDtcbiAgaWYgKHN1YnNjcmlwdGlvbkZsb3cpIHtcbiAgICBpZiAoc3Vic2NyaXB0aW9uRmxvdyA9PSBTdWJzY3JpcHRpb25GbG93cy5TVUJTQ1JJQkUpIHtcbiAgICAgIGdhRXZlbnQgPSBTdWJzY3JpcHRpb25TcGVjaWZpY0FuYWx5dGljc0V2ZW50VG9Hb29nbGVBbmFseXRpY3NFdmVudFtldmVudF07XG4gICAgfSBlbHNlIGlmIChzdWJzY3JpcHRpb25GbG93ID09IFN1YnNjcmlwdGlvbkZsb3dzLkNPTlRSSUJVVEUpIHtcbiAgICAgIGdhRXZlbnQgPSBDb250cmlidXRpb25TcGVjaWZpY0FuYWx5dGljc0V2ZW50VG9Hb29nbGVBbmFseXRpY3NFdmVudFtldmVudF07XG4gICAgfVxuICB9XG4gIHJldHVybiBnYUV2ZW50IHx8IEFuYWx5dGljc0V2ZW50VG9Hb29nbGVBbmFseXRpY3NFdmVudFtldmVudF07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEV4cGVyaW1lbnRGbGFncyA9IHtcbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGZlYXR1cmUgdGhhdCBhbGxvd3MgeW91IHRvIHJlcGxhY2Ugb25lIHN1YnNjcmlwdGlvblxuICAgKiBmb3IgYW5vdGhlciBpbiB0aGUgc3Vic2NyaWJlKCkgQVBJLlxuICAgKi9cbiAgUkVQTEFDRV9TVUJTQ1JJUFRJT046ICdyZXBsYWNlLXN1YnNjcmlwdGlvbicsXG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGNvbnRyaWJ1dGlvbnMgZmVhdHVyZS5cbiAgICogREVQUkVDQVRFRC4gVGhpcyBmbGFnIGNhbiBiZSByZW1vdmVkIG9uY2Ugbm90IHVzZWQgYnkgYW55b25lLlxuICAgKi9cbiAgQ09OVFJJQlVUSU9OUzogJ2NvbnRyaWJ1dGlvbnMnLFxuXG4gIC8qKlxuICAgKiBFbmFibGVzIHRoZSBQcm9wZW5zaXR5IGZlYXR1cmVcbiAgICovXG4gIFBST1BFTlNJVFk6ICdwcm9wZW5zaXR5JyxcblxuICAvKipcbiAgICogRW5hYmxlcyB0aGUgU21hcnRib3ggZmVhdHVyZS5cbiAgICovXG4gIFNNQVJUQk9YOiAnc21hcnRib3gnLFxuXG4gIC8qKlxuICAgKiBFbmFibGVzIHVzaW5nIG5ldyBBY3Rpdml0aWVzIEFQSXNcbiAgICovXG4gIEhFSklSQTogJ2hlamlyYScsXG5cbiAgLyoqIEVuYWJsZXMgbG9nZ2luZyB0byBib3RoIHRoZSBuZXcgU3dHIENsZWFyY3V0IHNlcnZpY2UgYW5kIHRoZSBwcmUtZXhpc3RpbmdcbiAgICogIENsZWFyY3V0IGlmcmFtZSB3aGlsZSB3ZSB2ZXJpZnkgdGhlIG5ldyBsb2dnaW5nIHN5c3RlbSB3b3Jrcy5cbiAgICogIFB1Ymxpc2hlcnMgc2hvdWxkIG5vdCBhY3RpdmF0ZSB0aGlzIGV4cGVyaW1lbnQuXG4gICAqL1xuICBMT0dHSU5HX0JFQUNPTjogJ2xvZ2dpbmctYmVhY29uJyxcblxuICAvKiogRW5hYmxlcyBnb29nbGVUcmFuc2FjdGlvbklEIGNoYW5nZS4gV2l0aCB0aGUgZXhwZXJpbWVudCBvbiB0aGUgSUQgaXNcbiAgICogIGNoYW5nZWQgZnJvbSAnPHV1aWQ+JyB0byAnPHV1aWQ+LnN3ZycuXG4gICAqL1xuICBVUERBVEVfR09PR0xFX1RSQU5TQUNUSU9OX0lEOiAndXBkYXRlLWdvb2dsZS10cmFuc2FjdGlvbi1pZCcsXG5cbiAgLyoqXG4gICAqIEV4cGVyaW1lbnQgZmxhZyBmb3IgZ3VhcmRpbmcgY2hhbmdlcyB0byBmaXggUGF5Q2xpZW50IHJlZGlyZWN0IGZsb3cuXG4gICAqL1xuICBQQVlfQ0xJRU5UX1JFRElSRUNUOiAncGF5LWNsaWVudC1yZWRpcmVjdCcsXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0Vycm9yVXRpbHN9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmd9IGZyb20gJy4uL3V0aWxzL3VybCc7XG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICpcbiAqIENsaWVudC1zaWRlIGV4cGVyaW1lbnRzIGluIFN3Ry5cbiAqXG4gKiBUaGUgZXhwZXJpbWVudHMgY2FuIGJlIHNldCBpbiBhIGZldyBkaWZmZXJlbnQgd2F5czpcbiAqICAxLiBCeSBndWxwIGJ1aWxkIHJ1bGVzIHVzaW5nIGAtLWV4cGVyaW1lbnRzPSR7ZXhwZXJpbWVudHNTdHJpbmd9YCBhcmd1bWVudC5cbiAqICAyLiBCeSBgI3N3Zy5leHBlcmltZW50cz0ke2V4cGVyaW1lbnRzU3RyaW5nfWAgcGFyYW1ldGVyIGluIHRoZSBVUkwnc1xuICogICAgIGZyYWdtZW50LlxuICogIDMuIEJ5IGBzd2cuY29uZmlndXJlKHtleHBlcmltZW50czogW2FycmF5XX0pYCBjYWxsLlxuICpcbiAqIFRoZSBgJHtleHBlcmltZW50c1N0cmluZ31gIGlzIGRlZmluZWQgYXMgZm9sbG93aW5nOlxuICogIC0gZXhwZXJpbWVudFN0cmluZyA9IChleHBlcmltZW50U3BlYywpKlxuICogIC0gZXhwZXJpbWVudFNwZWMgPSBleHBlcmltZW50SWQgfCBleHBlcmltZW50SWQgJz0nIG51bTEwMCAoJ2MnKT9cbiAqXG4gKiBTb21lIGV4YW1wbGVzOlxuICogIC0gYEEsQmAgLSBkZWZpbmVzIHR3byBleHBlcmltZW50cyBcIkFcIiBhbmQgXCJCXCIgdGhhdCB3aWxsIGJlIHR1cm5lZCBvbi5cbiAqICAtIGBBOjEwMCxCOjEwMGAgLSB0aGUgc2FtZTogXCJBXCIgYW5kIFwiQlwiIHdpbGwgYmUgdHVybmVkIG9uLlxuICogIC0gYEE6MGAgLSB0aGUgZXhwZXJpbWVudCBcIkFcIiB3aWxsIGJlIGRpc2FibGVkLlxuICogIC0gYEE6MWAgLSBlbmFibGUgdGhlIGV4cGVyaW1lbnQgXCJBXCIgaW4gMSUgb2YgaW1wcmVzc2lvbnMuXG4gKiAgLSBgQToxMGNgIC0gZW5hYmxlIHRoZSBleHBlcmltZW50IFwiQVwiIGluIDEwJSBvZiBpbXByZXNzaW9ucyB3aXRoIDEwJVxuICogICAgY29udHJvbC4gSW4gdGhpcyBjYXNlLCAyMCUgb2YgdGhlIGltcHJlc3Npb25zIHdpbGwgYmUgc3BsaXQgaW50byB0d29cbiAqICAgIGNhdGVnb3JpZXM6IGV4cGVyaW1lbnQgYW5kIGNvbnRyb2wuIE5vdGljZSwgYSBjb250cm9sIGNhbiBiZSByZXF1ZXN0ZWRcbiAqICAgIG9ubHkgZm9yIHRoZSBmcmFjdGlvbiB1bmRlciAyMCUuXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBTZWxlY3Rpb24gPSB7XG4gIEVYUEVSSU1FTlQ6ICdlJyxcbiAgQ09OVFJPTDogJ2MnLFxufTtcblxuLyoqXG4gKiBBIGNvbW1hLXNlcGFyYXRlZCBzZXQgb2YgZXhwZXJpbWVudHMuXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5sZXQgZXhwZXJpbWVudHNTdHJpbmcgPSAnJGV4cGVyaW1lbnRzJCc7XG5cbi8qKlxuICogQSBwYXJzZWQgbWFwIG9mIGV4cGVyaW1lbnRzLlxuICogQHR5cGUgez9PYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xubGV0IGV4cGVyaW1lbnRNYXAgPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzXG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRFeHBlcmltZW50c1N0cmluZ0ZvclRlc3Rpbmcocykge1xuICBleHBlcmltZW50c1N0cmluZyA9IHM7XG4gIGV4cGVyaW1lbnRNYXAgPSBudWxsO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCB0aGUgZXhwZXJpbWVudHMgaGF2ZSBiZWVuIGluaXRpYWxpemVkIGFuZCByZXR1cm5zIHRoZW0uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5mdW5jdGlvbiBnZXRFeHBlcmltZW50cyh3aW4pIHtcbiAgaWYgKCFleHBlcmltZW50TWFwKSB7XG4gICAgZXhwZXJpbWVudE1hcCA9IHt9O1xuICAgIGxldCBjb21iaW5lZEV4cGVyaW1lbnRTdHJpbmcgPSBleHBlcmltZW50c1N0cmluZztcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHdpbi5sb2NhdGlvbi5oYXNoKTtcbiAgICAgIGNvbnN0IGV4cGVyaW1lbnRTdHJpbmdGcm9tSGFzaCA9IHF1ZXJ5Wydzd2cuZXhwZXJpbWVudHMnXTtcbiAgICAgIGlmIChleHBlcmltZW50U3RyaW5nRnJvbUhhc2gpIHtcbiAgICAgICAgY29tYmluZWRFeHBlcmltZW50U3RyaW5nICs9ICcsJyArIGV4cGVyaW1lbnRTdHJpbmdGcm9tSGFzaDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmU6IGV4cGVyaW1lbnQgcGFyc2luZyBjYW5ub3QgYmxvY2sgcnVudGltZS5cbiAgICAgIEVycm9yVXRpbHMudGhyb3dBc3luYyhlKTtcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQ6XG4gICAgLy8gLSBleHBlcmltZW50U3RyaW5nID0gKGV4cGVyaW1lbnRTcGVjLCkqXG4gICAgY29tYmluZWRFeHBlcmltZW50U3RyaW5nLnNwbGl0KCcsJykuZm9yRWFjaCgocykgPT4ge1xuICAgICAgcyA9IHMudHJpbSgpO1xuICAgICAgaWYgKCFzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHBhcnNlU2V0RXhwZXJpbWVudCh3aW4sIGV4cGVyaW1lbnRNYXAsIHMpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmU6IGV4cGVyaW1lbnQgcGFyc2luZyBjYW5ub3QgYmxvY2sgcnVudGltZS5cbiAgICAgICAgRXJyb3JVdGlscy50aHJvd0FzeW5jKGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBleHBlcmltZW50TWFwO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0gez9PYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gZXhwZXJpbWVudE1hcFxuICogQHBhcmFtIHtzdHJpbmd9IHNwZWNcbiAqL1xuZnVuY3Rpb24gcGFyc2VTZXRFeHBlcmltZW50KHdpbiwgZXhwZXJpbWVudE1hcCwgc3BlYykge1xuICAvLyBGb3JtYXQ6XG4gIC8vIC0gZXhwZXJpbWVudFNwZWMgPSBleHBlcmltZW50SWQgfCBleHBlcmltZW50SWQgJz0nIG51bTEwMCAoJ2MnKT9cbiAgbGV0IGV4cGVyaW1lbnRJZDtcbiAgbGV0IGZyYWN0aW9uO1xuICBsZXQgY29udHJvbCA9IGZhbHNlO1xuICBjb25zdCBlcSA9IHNwZWMuaW5kZXhPZignOicpO1xuICBpZiAoZXEgPT0gLTEpIHtcbiAgICBleHBlcmltZW50SWQgPSBzcGVjO1xuICAgIGZyYWN0aW9uID0gMTAwO1xuICAgIGNvbnRyb2wgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBleHBlcmltZW50SWQgPSBzcGVjLnN1YnN0cmluZygwLCBlcSkudHJpbSgpO1xuICAgIHNwZWMgPSBzcGVjLnN1YnN0cmluZyhlcSArIDEpO1xuICAgIGlmIChzcGVjLnN1YnN0cmluZyhzcGVjLmxlbmd0aCAtIDEpID09IFNlbGVjdGlvbi5DT05UUk9MKSB7XG4gICAgICBjb250cm9sID0gdHJ1ZTtcbiAgICAgIHNwZWMgPSBzcGVjLnN1YnN0cmluZygwLCBzcGVjLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmcmFjdGlvbiA9IHBhcnNlSW50KHNwZWMsIDEwKTtcbiAgfVxuICBpZiAoaXNOYU4oZnJhY3Rpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZyYWN0aW9uJyk7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgXCJvblwiL1wib2ZmXCIuXG4gIGxldCBvbjtcbiAgaWYgKGZyYWN0aW9uID4gOTkpIHtcbiAgICAvLyBFeHBsaWNpdGx5IFwib25cIi5cbiAgICBvbiA9IHRydWU7XG4gIH0gZWxzZSBpZiAoZnJhY3Rpb24gPCAxKSB7XG4gICAgLy8gRXhwbGljaXRseSBcIm9mZlwiLlxuICAgIG9uID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAod2luLnNlc3Npb25TdG9yYWdlKSB7XG4gICAgLy8gRnJhY3Rpb25hbCBhbmQgcG9zc2libHkgd2l0aCB0aGUgY29udHJvbC5cbiAgICAvLyBOb3RlIHRoYXQ6XG4gICAgLy8gYS4gV2UgY2FuJ3QgZG8gcGVyc2lzdGVudCBleHBlcmltZW50cyBpZiBzdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgLy8gYi4gV2UgY2FuJ3QgcnVuIGNvbnRyb2wgb24gbW9yZSB0aGFuIDIwJS5cbiAgICBjb250cm9sID0gY29udHJvbCAmJiBmcmFjdGlvbiA8PSAyMDtcbiAgICB0cnkge1xuICAgICAgLy8gU2V0IGZyYWN0aW9uIGluIHRoZSBleHBlcmltZW50IHRvIG1ha2UgaXQgdW5sYXVuY2hhYmxlLlxuICAgICAgY29uc3Qgc3RvcmFnZUtleSA9XG4gICAgICAgICdzdWJzY3JpYmUuZ29vZ2xlLmNvbTplOicgK1xuICAgICAgICBleHBlcmltZW50SWQgK1xuICAgICAgICAnOicgK1xuICAgICAgICBmcmFjdGlvbiArXG4gICAgICAgIChjb250cm9sID8gJ2MnIDogJycpO1xuICAgICAgbGV0IHNlbGVjdGlvbiA9IHBhcnNlU2VsZWN0aW9uKHdpbi5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkpKTtcbiAgICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICAgIC8vIElzIGV4cGVyaW1lbnQvY29udHJvbCByYW5nZT9cbiAgICAgICAgaWYgKHdpbi5NYXRoLnJhbmRvbSgpICogMTAwIDw9IGZyYWN0aW9uICogKGNvbnRyb2wgPyAyIDogMSkpIHtcbiAgICAgICAgICBjb25zdCBpbkV4cGVyaW1lbnQgPSBjb250cm9sID8gd2luLk1hdGgucmFuZG9tKCkgPD0gMC41IDogdHJ1ZTtcbiAgICAgICAgICBzZWxlY3Rpb24gPSBpbkV4cGVyaW1lbnQgPyBTZWxlY3Rpb24uRVhQRVJJTUVOVCA6IFNlbGVjdGlvbi5DT05UUk9MO1xuICAgICAgICAgIHdpbi5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIHNlbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9uID0gISFzZWxlY3Rpb247XG4gICAgICBpZiAoc2VsZWN0aW9uID09IFNlbGVjdGlvbi5DT05UUk9MKSB7XG4gICAgICAgIGV4cGVyaW1lbnRJZCA9ICdjLScgKyBleHBlcmltZW50SWQ7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JlOiBleHBlcmltZW50IHBhcnNpbmcgY2Fubm90IGJsb2NrIHJ1bnRpbWUuXG4gICAgICBvbiA9IGZhbHNlO1xuICAgICAgRXJyb3JVdGlscy50aHJvd0FzeW5jKGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBvbiA9IGZhbHNlO1xuICB9XG5cbiAgZXhwZXJpbWVudE1hcFtleHBlcmltZW50SWRdID0gb247XG59XG5cbi8qKlxuICogQHBhcmFtIHs/c3RyaW5nfSBzXG4gKiBAcmV0dXJuIHs/U2VsZWN0aW9ufVxuICovXG5mdW5jdGlvbiBwYXJzZVNlbGVjdGlvbihzKSB7XG4gIC8vIERvIGEgc2ltcGxlIGlmLXRoZW4gdG8gaW5saW5lIHRoZSB3aG9sZSBTZWxlY3Rpb24gZW51bS5cbiAgcmV0dXJuIHMgPT0gU2VsZWN0aW9uLkVYUEVSSU1FTlRcbiAgICA/IFNlbGVjdGlvbi5FWFBFUklNRU5UXG4gICAgOiBzID09IFNlbGVjdGlvbi5DT05UUk9MXG4gICAgPyBTZWxlY3Rpb24uQ09OVFJPTFxuICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgZXhwZXJpbWVudCBpcyBvbiBvciBvZmYuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnRJZFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXhwZXJpbWVudE9uKHdpbiwgZXhwZXJpbWVudElkKSB7XG4gIHJldHVybiBnZXRFeHBlcmltZW50cyh3aW4pW2V4cGVyaW1lbnRJZF0gfHwgZmFsc2U7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgZXhwZXJpbWVudCBvbiBvciBvZmYuIFJldHVybnMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgZXhwZXJpbWVudFxuICogYWZ0ZXIgdG9nZ2xpbmcgaXMgZG9uZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudElkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRFeHBlcmltZW50KHdpbiwgZXhwZXJpbWVudElkLCBvbikge1xuICBnZXRFeHBlcmltZW50cyh3aW4pW2V4cGVyaW1lbnRJZF0gPSBvbjtcbn1cblxuLyoqXG4gKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9uRXhwZXJpbWVudHMod2luKSB7XG4gIGNvbnN0IGV4cGVyaW1lbnRNYXAgPSBnZXRFeHBlcmltZW50cyh3aW4pO1xuICBjb25zdCBleHBlcmltZW50cyA9IFtdO1xuICBmb3IgKGNvbnN0IGV4cGVyaW1lbnQgaW4gZXhwZXJpbWVudE1hcCkge1xuICAgIGlmIChleHBlcmltZW50TWFwW2V4cGVyaW1lbnRdKSB7XG4gICAgICBleHBlcmltZW50cy5wdXNoKGV4cGVyaW1lbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXhwZXJpbWVudHM7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7WGhyfSBmcm9tICcuLi91dGlscy94aHInO1xuaW1wb3J0IHtwYXJzZUpzb259IGZyb20gJy4uL3V0aWxzL2pzb24nO1xuaW1wb3J0IHtzZXJpYWxpemVQcm90b01lc3NhZ2VGb3JVcmx9IGZyb20gJy4uL3V0aWxzL3VybCc7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgRmV0Y2hlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkVXJsXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICAgKi9cbiAgZmV0Y2hDcmVkZW50aWFsZWRKc29uKHVudXNlZFVybCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVudXNlZFVybFxuICAgKiBAcGFyYW0geyEuLi91dGlscy94aHIuRmV0Y2hJbml0RGVmfSB1bnVzZWRJbml0XG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi91dGlscy94aHIuRmV0Y2hSZXNwb25zZT59XG4gICAqL1xuICBmZXRjaCh1bnVzZWRVcmwsIHVudXNlZEluaXQpIHt9XG5cbiAgLyoqXG4gICAqIFBPU1QgZGF0YSB0byBhIFVSTCBlbmRwb2ludCwgZG8gbm90IHdhaXQgZm9yIGEgcmVzcG9uc2UuXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gdW51c2VkVXJsXG4gICAqIEBwYXJhbSB7IS4uL3Byb3RvL2FwaV9tZXNzYWdlcy5NZXNzYWdlfSB1bnVzZWREYXRhXG4gICAqL1xuICBzZW5kQmVhY29uKHVudXNlZFVybCwgdW51c2VkRGF0YSkge31cblxuICAvKipcbiAgICogUE9TVCBkYXRhIHRvIGEgVVJMIGVuZHBvaW50LCBnZXQgYSBQcm9taXNlIGZvciBhIHJlc3BvbnNlXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gdW51c2VkVXJsXG4gICAqIEBwYXJhbSB7IS4uL3Byb3RvL2FwaV9tZXNzYWdlcy5NZXNzYWdlfSB1bnVzZWRNZXNzYWdlXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi91dGlscy94aHIuRmV0Y2hSZXNwb25zZT59XG4gICAqL1xuICBzZW5kUG9zdCh1bnVzZWRVcmwsIHVudXNlZE1lc3NhZ2UpIHt9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge0ZldGNoZXJ9XG4gKi9cbmV4cG9ydCBjbGFzcyBYaHJGZXRjaGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQGNvbnN0IHshWGhyfSAqL1xuICAgIHRoaXMueGhyXyA9IG5ldyBYaHIod2luKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZmV0Y2hDcmVkZW50aWFsZWRKc29uKHVybCkge1xuICAgIGNvbnN0IGluaXQgPSAvKiogQHR5cGUgeyEuLi91dGlscy94aHIuRmV0Y2hJbml0RGVmfSAqLyAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHsnQWNjZXB0JzogJ3RleHQvcGxhaW4sIGFwcGxpY2F0aW9uL2pzb24nfSxcbiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2godXJsLCBpbml0KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKS50aGVuKCh0ZXh0KSA9PiB7XG4gICAgICAgIC8vIFJlbW92ZSBcIlwiKV19J1xcblwiIFhTU0kgcHJldmVudGlvbiBwcmVmaXggaW4gc2FmZSByZXNwb25zZXMuXG4gICAgICAgIGNvbnN0IGNsZWFuZWRUZXh0ID0gdGV4dC5yZXBsYWNlKC9eKFxcKVxcXVxcfSdcXG4pLywgJycpO1xuICAgICAgICByZXR1cm4gcGFyc2VKc29uKGNsZWFuZWRUZXh0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZW5kUG9zdCh1cmwsIG1lc3NhZ2UpIHtcbiAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JyxcbiAgICAgIH0sXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgYm9keTogJ2YucmVxPScgKyBzZXJpYWxpemVQcm90b01lc3NhZ2VGb3JVcmwobWVzc2FnZSksXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2godXJsLCBpbml0KS50aGVuKFxuICAgICAgKHJlc3BvbnNlKSA9PiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuanNvbigpKSB8fCB7fVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGZldGNoKHVybCwgaW5pdCkge1xuICAgIHJldHVybiB0aGlzLnhocl8uZmV0Y2godXJsLCBpbml0KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2VuZEJlYWNvbih1cmwsIGRhdGEpIHtcbiAgICBpZiAobmF2aWdhdG9yLnNlbmRCZWFjb24pIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7dHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04J307XG4gICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoXG4gICAgICAgIFsnZi5yZXE9JyArIHNlcmlhbGl6ZVByb3RvTWVzc2FnZUZvclVybChkYXRhKV0sXG4gICAgICAgIGhlYWRlcnNcbiAgICAgICk7XG4gICAgICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbih1cmwsIGJsb2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBPbmx5IG5ld2VyIGJyb3dzZXJzIHN1cHBvcnQgYmVhY29uLiAgRmFsbGJhY2sgdG8gc3RhbmRhcmQgWEhSIFBPU1QuXG4gICAgdGhpcy5zZW5kUG9zdCh1cmwsIGRhdGEpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgSnNFcnJvciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9kb2MuRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMubWljcm9UYXNrXyA9IFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBlcnJvcih2YXJfYXJncykge1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgIHJldHVybiB0aGlzLm1pY3JvVGFza18udGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICBpZiAoZXJyb3IucmVwb3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaW1nID0gdGhpcy5kb2NfLmdldFdpbigpLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgaW1nLnNyYyA9XG4gICAgICAgICckZnJvbnRlbmQkL18vU3Vic2NyaWJld2l0aGdvb2dsZUNsaWVudFVpL2pzZXJyb3InICtcbiAgICAgICAgJz9lcnJvcj0nICtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhlcnJvcikpICtcbiAgICAgICAgJyZzY3JpcHQ9JyArXG4gICAgICAgIGVuY29kZVVSSUNvbXBvbmVudCgnJGZyb250ZW5kJC9zd2cvanMvdjEvc3dnLmpzJykgK1xuICAgICAgICAnJmxpbmU9JyArXG4gICAgICAgIChlcnJvci5saW5lTnVtYmVyIHx8IDEpICtcbiAgICAgICAgJyZ0cmFjZT0nICtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGVycm9yLnN0YWNrKTtcbiAgICAgIC8vIEFwcGVuZGluZyB0aGlzIGltYWdlIHRvIERPTSBpcyBub3QgbmVjZXNzYXJ5LlxuICAgICAgZXJyb3IucmVwb3J0ZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICogQHJldHVybiB7IUVycm9yfVxuICovXG5mdW5jdGlvbiBjcmVhdGVFcnJvclZhcmdzKHZhcl9hcmdzKSB7XG4gIGxldCBlcnJvciA9IG51bGw7XG4gIGxldCBtZXNzYWdlID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvciAmJiAhZXJyb3IpIHtcbiAgICAgIGVycm9yID0gZHVwbGljYXRlRXJyb3JJZk5lY2Vzc2FyeShhcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICBtZXNzYWdlICs9ICcgJztcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYXJnO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZXJyb3IpIHtcbiAgICBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfSBlbHNlIGlmIChtZXNzYWdlKSB7XG4gICAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2UgKyAnOiAnICsgZXJyb3IubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cbi8qKlxuICogU29tZSBleGNlcHRpb25zIChET01FeGNlcHRpb24sIG5hbWVseSkgaGF2ZSByZWFkLW9ubHkgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICogQHJldHVybiB7IUVycm9yfVxuICovXG5mdW5jdGlvbiBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGVycm9yKSB7XG4gIGNvbnN0IG1lc3NhZ2VQcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZXJyb3IsICdtZXNzYWdlJyk7XG4gIGlmIChtZXNzYWdlUHJvcGVydHkgJiYgbWVzc2FnZVByb3BlcnR5LndyaXRhYmxlKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgY29uc3Qge21lc3NhZ2UsIHN0YWNrfSA9IGVycm9yO1xuICBjb25zdCBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAvLyBDb3B5IGFsbCB0aGUgZXh0cmFuZW91cyB0aGluZ3Mgd2UgYXR0YWNoLlxuICBmb3IgKGNvbnN0IHByb3AgaW4gZXJyb3IpIHtcbiAgICBlW3Byb3BdID0gZXJyb3JbcHJvcF07XG4gIH1cbiAgLy8gRW5zdXJlIHRoZXNlIGFyZSBjb3BpZWQuXG4gIGUuc3RhY2sgPSBzdGFjaztcbiAgcmV0dXJuIGU7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge1xuICBBbmFseXRpY3NFdmVudCxcbiAgTGlua1NhdmVUb2tlblJlcXVlc3QsXG4gIExpbmtpbmdJbmZvUmVzcG9uc2UsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbkZsb3dzLCBXaW5kb3dPcGVuTW9kZX0gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHthY2NlcHRQb3J0UmVzdWx0RGF0YX0gZnJvbSAnLi4vdXRpbHMvYWN0aXZpdHktdXRpbHMnO1xuaW1wb3J0IHtjcmVhdGVDYW5jZWxFcnJvciwgaXNDYW5jZWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcbmltcG9ydCB7ZmVBcmdzLCBmZU9yaWdpbiwgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuXG5jb25zdCBMSU5LX1JFUVVFU1RfSUQgPSAnc3dnLWxpbmsnO1xuXG4vKipcbiAqIFRoZSBmbG93IHRvIGxpbmsgYW4gZXhpc3RpbmcgcHVibGlzaGVyIGFjY291bnQgdG8gYW4gZXhpc3RpbmcgZ29vZ2xlIGFjY291bnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5rYmFja0Zsb3cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnXyA9IGRlcHMucGFnZUNvbmZpZygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBMaW5rIGFjY291bnQgZmxvdy5cbiAgICogQHBhcmFtIHt7YW1wUmVhZGVySWQ6IChzdHJpbmd8dW5kZWZpbmVkKX09fSBwYXJhbXNcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydChwYXJhbXMgPSB7fSkge1xuICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLkxJTktfQUNDT1VOVCk7XG4gICAgY29uc3QgZm9yY2VSZWRpcmVjdCA9XG4gICAgICB0aGlzLmRlcHNfLmNvbmZpZygpLndpbmRvd09wZW5Nb2RlID09IFdpbmRvd09wZW5Nb2RlLlJFRElSRUNUO1xuICAgIGNvbnN0IGFyZ3MgPSBwYXJhbXMuYW1wUmVhZGVySWRcbiAgICAgID8gZmVBcmdzKHtcbiAgICAgICAgICAncHVibGljYXRpb25JZCc6IHRoaXMucGFnZUNvbmZpZ18uZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAgICdhbXBSZWFkZXJJZCc6IHBhcmFtcy5hbXBSZWFkZXJJZCxcbiAgICAgICAgfSlcbiAgICAgIDogZmVBcmdzKHtcbiAgICAgICAgICAncHVibGljYXRpb25JZCc6IHRoaXMucGFnZUNvbmZpZ18uZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICB9KTtcbiAgICBjb25zdCBvcGVuZXIgPSB0aGlzLmFjdGl2aXR5UG9ydHNfLm9wZW4oXG4gICAgICBMSU5LX1JFUVVFU1RfSUQsXG4gICAgICBmZVVybCgnL2xpbmtiYWNrc3RhcnQnKSxcbiAgICAgIGZvcmNlUmVkaXJlY3QgPyAnX3RvcCcgOiAnX2JsYW5rJyxcbiAgICAgIGFyZ3MsXG4gICAgICB7fVxuICAgICk7XG4gICAgdGhpcy5kZXBzXy5ldmVudE1hbmFnZXIoKS5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX0xJTkspO1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8ucG9wdXBPcGVuZWQob3BlbmVyICYmIG9wZW5lci50YXJnZXRXaW4pO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3IgTGluayBhY2NvdW50cyBmbG93LlxuICovXG5leHBvcnQgY2xhc3MgTGlua0NvbXBsZXRlRmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgc3RhdGljIGNvbmZpZ3VyZVBlbmRpbmcoZGVwcykge1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXIgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydERlZn0gcG9ydFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhbmRsZXIocG9ydCkge1xuICAgICAgZGVwcy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJMaW5rUHJvZ3Jlc3MoKTtcbiAgICAgIGRlcHMuZGlhbG9nTWFuYWdlcigpLnBvcHVwQ2xvc2VkKCk7XG4gICAgICBjb25zdCBwcm9taXNlID0gYWNjZXB0UG9ydFJlc3VsdERhdGEoXG4gICAgICAgIHBvcnQsXG4gICAgICAgIGZlT3JpZ2luKCksXG4gICAgICAgIC8qIHJlcXVpcmVPcmlnaW5WZXJpZmllZCAqLyBmYWxzZSxcbiAgICAgICAgLyogcmVxdWlyZVNlY3VyZUNoYW5uZWwgKi8gZmFsc2VcbiAgICAgICk7XG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKFxuICAgICAgICAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBkZXBzXG4gICAgICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgICAgIC5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5BQ1RJT05fTElOS19DT05USU5VRSwgdHJ1ZSk7XG4gICAgICAgICAgY29uc3QgZmxvdyA9IG5ldyBMaW5rQ29tcGxldGVGbG93KGRlcHMsIHJlc3BvbnNlKTtcbiAgICAgICAgICBmbG93LnN0YXJ0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIChyZWFzb24pID0+IHtcbiAgICAgICAgICBpZiAoaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgICBkZXBzXG4gICAgICAgICAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgICAgICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0xJTktfQ0FOQ0VMLCB0cnVlKTtcbiAgICAgICAgICAgIGRlcHNcbiAgICAgICAgICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAgICAgICAgIC50cmlnZ2VyRmxvd0NhbmNlbGVkKFN1YnNjcmlwdGlvbkZsb3dzLkxJTktfQUNDT1VOVCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGNob3NlIHRvIGNvbnRpbnVlIGJ1dCB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICBkZXBzXG4gICAgICAgICAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgICAgICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0xJTktfQ09OVElOVUUsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgZGVwcy5hY3Rpdml0aWVzKCkub25SZXN1bHQoTElOS19SRVFVRVNUX0lELCBoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0gez9PYmplY3R9IHJlc3BvbnNlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCByZXNwb25zZSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2VudGl0bGVtZW50cy1tYW5hZ2VyLkVudGl0bGVtZW50c01hbmFnZXJ9ICovXG4gICAgdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyXyA9IGRlcHMuZW50aXRsZW1lbnRzTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vY2FsbGJhY2tzLkNhbGxiYWNrc30gKi9cbiAgICB0aGlzLmNhbGxiYWNrc18gPSBkZXBzLmNhbGxiYWNrcygpO1xuXG4gICAgY29uc3QgaW5kZXggPSAocmVzcG9uc2UgJiYgcmVzcG9uc2VbJ2luZGV4J10pIHx8ICcwJztcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9saW5rY29uZmlybWlmcmFtZScsICcvdS8nICsgaW5kZXgpLFxuICAgICAgZmVBcmdzKHtcbiAgICAgICAgJ3Byb2R1Y3RJZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAncHVibGljYXRpb25JZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgIH0pLFxuICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuY29tcGxldGVSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5jb21wbGV0ZVByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuY29tcGxldGVSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgTGluayBhY2NvdW50IGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHRBbmRWZXJpZnkoXG4gICAgICBmZU9yaWdpbigpLFxuICAgICAgLyogcmVxdWlyZU9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAvKiByZXF1aXJlU2VjdXJlQ2hhbm5lbCAqLyB0cnVlXG4gICAgKTtcbiAgICBwcm9taXNlXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZV8ocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgIC8vIFJldGhyb3cgYXN5bmMuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBUaGUgZmxvdyBpcyBjb21wbGV0ZS5cbiAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuZGVwc19cbiAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkVWRU5UX0dPT0dMRV9VUERBVEVELCB0cnVlKTtcbiAgICB0aGlzLmRlcHNfXG4gICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgIC5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5JTVBSRVNTSU9OX0dPT0dMRV9VUERBVEVELCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P09iamVjdH0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbXBsZXRlXyhyZXNwb25zZSkge1xuICAgIHRoaXMuZGVwc19cbiAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9HT09HTEVfVVBEQVRFRF9DTE9TRSwgdHJ1ZSk7XG4gICAgdGhpcy5jYWxsYmFja3NfLnRyaWdnZXJMaW5rQ29tcGxldGUoKTtcbiAgICB0aGlzLmNhbGxiYWNrc18ucmVzZXRMaW5rUHJvZ3Jlc3MoKTtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLnNldFRvYXN0U2hvd24odHJ1ZSk7XG4gICAgdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyXy51bmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8ucmVzZXQoKHJlc3BvbnNlICYmIHJlc3BvbnNlWydzdWNjZXNzJ10pIHx8IGZhbHNlKTtcbiAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2VbJ2VudGl0bGVtZW50cyddKSB7XG4gICAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLnB1c2hOZXh0RW50aXRsZW1lbnRzKHJlc3BvbnNlWydlbnRpdGxlbWVudHMnXSk7XG4gICAgfVxuICAgIHRoaXMuY29tcGxldGVSZXNvbHZlcl8oKTtcbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHshUHJvbWlzZX0gKi9cbiAgd2hlbkNvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBsZXRlUHJvbWlzZV87XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgZmxvdyB0byBzYXZlIHN1YnNjcmlwdGlvbiBpbmZvcm1hdGlvbiBmcm9tIGFuIGV4aXN0aW5nIHB1Ymxpc2hlciBhY2NvdW50XG4gKiB0byBhbiBleGlzdGluZyBnb29nbGUgYWNjb3VudC4gIFRoZSBhY2NvdW50cyBtYXkgb3IgbWF5IG5vdCBhbHJlYWR5IGJlXG4gKiBsaW5rZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5rU2F2ZUZsb3cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFja30gY2FsbGJhY2tcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIGNhbGxiYWNrKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFja30gKi9cbiAgICB0aGlzLmNhbGxiYWNrXyA9IGNhbGxiYWNrO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZTwhLi4vYXBpL3N1YnNjcmlwdGlvbnMuU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3Q+fSAqL1xuICAgIHRoaXMucmVxdWVzdFByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5vcGVuUHJvbWlzZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/QWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1Byb21pc2U8IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Pn1cbiAgICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICovXG4gIGdldFJlcXVlc3RQcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29tcGxldGVfKCkge1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSByZXN1bHRcbiAgICogQHJldHVybiB7IVByb21pc2U8Ym9vbGVhbj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMaW5rU2F2ZVJlc3BvbnNlXyhyZXN1bHQpIHtcbiAgICAvLyBUaGlzIGZsb3cgaXMgY29tcGxldGVcbiAgICB0aGlzLmNvbXBsZXRlXygpO1xuICAgIGxldCBzdGFydFByb21pc2U7XG4gICAgbGV0IGxpbmtDb25maXJtID0gbnVsbDtcbiAgICBpZiAocmVzdWx0WydsaW5rZWQnXSkge1xuICAgICAgLy8gV2hlbiBsaW5raW5nIHN1Y2NlZWRzLCBzdGFydCBsaW5rIGNvbmZpcm1hdGlvbiBmbG93XG4gICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLnBvcHVwQ2xvc2VkKCk7XG4gICAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5MSU5LX0FDQ09VTlQpO1xuICAgICAgbGlua0NvbmZpcm0gPSBuZXcgTGlua0NvbXBsZXRlRmxvdyh0aGlzLmRlcHNfLCByZXN1bHQpO1xuICAgICAgc3RhcnRQcm9taXNlID0gbGlua0NvbmZpcm0uc3RhcnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRQcm9taXNlID0gUHJvbWlzZS5yZWplY3QoY3JlYXRlQ2FuY2VsRXJyb3IodGhpcy53aW5fLCAnbm90IGxpbmtlZCcpKTtcbiAgICB9XG4gICAgY29uc3QgY29tcGxldGVQcm9taXNlID0gc3RhcnRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyTGlua1Byb2dyZXNzKCk7XG4gICAgICByZXR1cm4gbGlua0NvbmZpcm0ud2hlbkNvbXBsZXRlKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29tcGxldGVQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtMaW5raW5nSW5mb1Jlc3BvbnNlfSByZXNwb25zZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2VuZExpbmtTYXZlVG9rZW5fKHJlc3BvbnNlKSB7XG4gICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2UuZ2V0UmVxdWVzdGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZXF1ZXN0UHJvbWlzZV8gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZSh0aGlzLmNhbGxiYWNrXygpKSlcbiAgICAgIC50aGVuKChyZXF1ZXN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHNhdmVSZXF1ZXN0ID0gbmV3IExpbmtTYXZlVG9rZW5SZXF1ZXN0KCk7XG4gICAgICAgIGlmIChyZXF1ZXN0ICYmIHJlcXVlc3QudG9rZW4pIHtcbiAgICAgICAgICBpZiAocmVxdWVzdC5hdXRoQ29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIGF1dGhDb2RlIGFuZCB0b2tlbiBhcmUgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNhdmVSZXF1ZXN0LnNldFRva2VuKHJlcXVlc3QudG9rZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0ICYmIHJlcXVlc3QuYXV0aENvZGUpIHtcbiAgICAgICAgICBzYXZlUmVxdWVzdC5zZXRBdXRoQ29kZShyZXF1ZXN0LmF1dGhDb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05laXRoZXIgdG9rZW4gb3IgYXV0aENvZGUgaXMgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmV4ZWN1dGUoc2F2ZVJlcXVlc3QpO1xuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAvLyBUaGUgZmxvdyBpcyBjb21wbGV0ZS5cbiAgICAgICAgdGhpcy5jb21wbGV0ZV8oKTtcbiAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1Byb21pc2V9XG4gICAqL1xuICAvKipcbiAgICogU3RhcnRzIHRoZSBzYXZlIHN1YnNjcmlwdGlvblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIGNvbnN0IGlmcmFtZUFyZ3MgPSB0aGlzLmFjdGl2aXR5UG9ydHNfLmFkZERlZmF1bHRBcmd1bWVudHMoe1xuICAgICAgJ2lzQ2xvc2FibGUnOiB0cnVlLFxuICAgIH0pO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9saW5rc2F2ZWlmcmFtZScpLFxuICAgICAgaWZyYW1lQXJncyxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIGZhbHNlLFxuICAgICAgLyogaGFzTG9hZGluZ0luZGljYXRvciAqLyB0cnVlXG4gICAgKTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ub24oXG4gICAgICBMaW5raW5nSW5mb1Jlc3BvbnNlLFxuICAgICAgdGhpcy5zZW5kTGlua1NhdmVUb2tlbl8uYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoXG4gICAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18sXG4gICAgICAvKiBoaWRkZW4gKi8gdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9TQVZFX1NVQlNDUl9UT19HT09HTEUpO1xuICAgIC8qKiB7IVByb21pc2U8Ym9vbGVhbj59ICovXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3X1xuICAgICAgLmFjY2VwdFJlc3VsdEFuZFZlcmlmeShcbiAgICAgICAgZmVPcmlnaW4oKSxcbiAgICAgICAgLyogcmVxdWlyZU9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAgIC8qIHJlcXVpcmVTZWN1cmVDaGFubmVsICovIHRydWVcbiAgICAgIClcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlTGlua1NhdmVSZXNwb25zZV8ocmVzdWx0KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAvLyBJbiBjYXNlIHRoaXMgZmxvdyB3YXNuJ3QgY29tcGxldGUsIGNvbXBsZXRlIGl0IGhlcmVcbiAgICAgICAgdGhpcy5jb21wbGV0ZV8oKTtcbiAgICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvbiBmcm9tIHVzZXIsIGxpbmsgY29uZmlybSBzdGFydCBvciBjb21wbGV0aW9uIGhlcmVcbiAgICAgICAgaWYgKGlzQ2FuY2VsRXJyb3IocmVhc29uKSkge1xuICAgICAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgICAgICAgLmxvZ1N3Z0V2ZW50KFxuICAgICAgICAgICAgICBBbmFseXRpY3NFdmVudC5BQ1RJT05fU0FWRV9TVUJTQ1JfVE9fR09PR0xFX0NBTkNFTCxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmRlcHNfXG4gICAgICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgICAgIC50cmlnZ2VyRmxvd0NhbmNlbGVkKFN1YnNjcmlwdGlvbkZsb3dzLkxJTktfQUNDT1VOVCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge0FuYWx5dGljc0V2ZW50LCBFdmVudE9yaWdpbmF0b3J9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge0V2ZW50LCBTdWJzY3JpcHRpb25TdGF0ZX0gZnJvbSAnLi4vYXBpL2xvZ2dlci1hcGknO1xuaW1wb3J0IHtpc0Jvb2xlYW4sIGlzRW51bVZhbHVlLCBpc09iamVjdH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnO1xuaW1wb3J0IHtwdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnR9IGZyb20gJy4vZXZlbnQtdHlwZS1tYXBwaW5nJztcblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7Li4vYXBpL2xvZ2dlci1hcGkuTG9nZ2VyQXBpfVxuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9jbGllbnQtZXZlbnQtbWFuYWdlci1hcGkuQ2xpZW50RXZlbnRNYW5hZ2VyQXBpfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNlbmRTdWJzY3JpcHRpb25TdGF0ZShzdGF0ZSwganNvblByb2R1Y3RzKSB7XG4gICAgaWYgKCFpc0VudW1WYWx1ZShTdWJzY3JpcHRpb25TdGF0ZSwgc3RhdGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3Vic2NyaXB0aW9uIHN0YXRlIHByb3ZpZGVkJyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIChTdWJzY3JpcHRpb25TdGF0ZS5TVUJTQ1JJQkVSID09IHN0YXRlIHx8XG4gICAgICAgIFN1YnNjcmlwdGlvblN0YXRlLlBBU1RfU1VCU0NSSUJFUiA9PSBzdGF0ZSkgJiZcbiAgICAgICFqc29uUHJvZHVjdHNcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0VudGl0bGVtZW50cyBtdXN0IGJlIHByb3ZpZGVkIGZvciB1c2VycyB3aXRoJyArXG4gICAgICAgICAgJyBhY3RpdmUgb3IgZXhwaXJlZCBzdWJzY3JpcHRpb25zJ1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGpzb25Qcm9kdWN0cyAmJiAhaXNPYmplY3QoanNvblByb2R1Y3RzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbnRpdGxlbWVudHMgbXVzdCBiZSBhbiBPYmplY3QnKTtcbiAgICB9XG4gICAgbGV0IHByb2R1Y3RzT3JTa3VzID0gbnVsbDtcbiAgICBpZiAoanNvblByb2R1Y3RzKSB7XG4gICAgICBwcm9kdWN0c09yU2t1cyA9IEpTT04uc3RyaW5naWZ5KGpzb25Qcm9kdWN0cyk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dFdmVudCh7XG4gICAgICBldmVudFR5cGU6IEFuYWx5dGljc0V2ZW50LkVWRU5UX1NVQlNDUklQVElPTl9TVEFURSxcbiAgICAgIGV2ZW50T3JpZ2luYXRvcjogRXZlbnRPcmlnaW5hdG9yLlBVQkxJU0hFUl9DTElFTlQsXG4gICAgICBpc0Zyb21Vc2VyQWN0aW9uOiBudWxsLFxuICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnM6IHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHByb2R1Y3RzT3JTa3VzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2VuZEV2ZW50KHVzZXJFdmVudCkge1xuICAgIGxldCBkYXRhID0gbnVsbDtcbiAgICBpZiAoXG4gICAgICAhaXNFbnVtVmFsdWUoRXZlbnQsIHVzZXJFdmVudC5uYW1lKSB8fFxuICAgICAgIXB1Ymxpc2hlckV2ZW50VG9BbmFseXRpY3NFdmVudCh1c2VyRXZlbnQubmFtZSlcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB1c2VyIGV2ZW50IHByb3ZpZGVkKCcgKyB1c2VyRXZlbnQubmFtZSArICcpJyk7XG4gICAgfVxuXG4gICAgaWYgKHVzZXJFdmVudC5kYXRhKSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KHVzZXJFdmVudC5kYXRhKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IGRhdGEgbXVzdCBiZSBhbiBPYmplY3QoJyArIHVzZXJFdmVudC5kYXRhICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhLCB1c2VyRXZlbnQuZGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQm9vbGVhbih1c2VyRXZlbnQuYWN0aXZlKSkge1xuICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIGRhdGEgPSB7fTtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgeydpc19hY3RpdmUnOiB1c2VyRXZlbnQuYWN0aXZlfSk7XG4gICAgfSBlbHNlIGlmICh1c2VyRXZlbnQuYWN0aXZlICE9IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgYWN0aXZlIG11c3QgYmUgYSBib29sZWFuJyk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dFdmVudCh7XG4gICAgICBldmVudFR5cGU6IHB1Ymxpc2hlckV2ZW50VG9BbmFseXRpY3NFdmVudCh1c2VyRXZlbnQubmFtZSksXG4gICAgICBldmVudE9yaWdpbmF0b3I6IEV2ZW50T3JpZ2luYXRvci5QVUJMSVNIRVJfQ0xJRU5ULFxuICAgICAgaXNGcm9tVXNlckFjdGlvbjogdXNlckV2ZW50LmFjdGl2ZSxcbiAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzOiBkYXRhLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbkZsb3dzfSBmcm9tICcuLi9hcGkvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgTG9naW5Ob3RpZmljYXRpb25BcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9sb2dpbmlmcmFtZScpLFxuICAgICAgZmVBcmdzKHtcbiAgICAgICAgcHVibGljYXRpb25JZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICBwcm9kdWN0SWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAvLyBObyBuZWVkIHRvIGFzayB0aGUgdXNlci4gSnVzdCB0ZWxsIHRoZW0geW91J3JlIGxvZ2dpbmcgdGhlbSBpbi5cbiAgICAgICAgdXNlckNvbnNlbnQ6IGZhbHNlLFxuICAgICAgfSksXG4gICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyB0cnVlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgdGhlIExvZ2luIGZsb3cgKGFmdGVyIHdhaXRpbmcpLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMuZGVwc19cbiAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0xPR0lOX05PVElGSUNBVElPTik7XG5cbiAgICB0aGlzLm9wZW5WaWV3UHJvbWlzZV8gPSB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KFxuICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18uYWNjZXB0UmVzdWx0KCkudGhlbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8gVGhlIGNvbnNlbnQgcGFydCBpcyBjb21wbGV0ZS5cbiAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgIH0sXG4gICAgICAocmVhc29uKSA9PiB7XG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbkZsb3dzfSBmcm9tICcuLi9hcGkvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtpc0NhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuXG5leHBvcnQgY2xhc3MgTG9naW5Qcm9tcHRBcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9sb2dpbmlmcmFtZScpLFxuICAgICAgZmVBcmdzKHtcbiAgICAgICAgcHVibGljYXRpb25JZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICBwcm9kdWN0SWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAvLyBGaXJzdCBhc2sgdGhlIHVzZXIgaWYgdGhleSB3YW50IHVzIHRvIGxvZyB0aGVtIGluLlxuICAgICAgICB1c2VyQ29uc2VudDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUHJvbXB0cyB0aGUgdXNlciB0byBsb2dpbi5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLmRlcHNfXG4gICAgICAuY2FsbGJhY2tzKClcbiAgICAgIC50cmlnZ2VyRmxvd1N0YXJ0ZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19MT0dJTl9QUk9NUFQpO1xuXG4gICAgdGhpcy5vcGVuVmlld1Byb21pc2VfID0gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyhcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3X1xuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIFRoZSBjb25zZW50IHBhcnQgaXMgY29tcGxldGUuXG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICB9LFxuICAgICAgKHJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAgICAgICAudHJpZ2dlckZsb3dDYW5jZWxlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0xPR0lOX1BST01QVCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAyMCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGl2aXR5SWZyYW1lVmlld30gZnJvbSAnLi4vdWkvYWN0aXZpdHktaWZyYW1lLXZpZXcnO1xuaW1wb3J0IHtBbmFseXRpY3NFdmVudH0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7U3Vic2NyaXB0aW9uRmxvd3N9IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7XG4gIFRvYXN0Q2xvc2VSZXF1ZXN0LFxuICBWaWV3U3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxufSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtmZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge2lzQ2FuY2VsRXJyb3J9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XG5pbXBvcnQge3NldEltcG9ydGFudFN0eWxlcywgc2V0U3R5bGV9IGZyb20gJy4uL3V0aWxzL3N0eWxlJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuZXhwb3J0IGNvbnN0IElGUkFNRV9CT1hfU0hBRE9XID1cbiAgJ3JnYmEoNjAsIDY0LCA2NywgMC4zKSAwcHggLTJweCA1cHgsIHJnYmEoNjAsIDY0LCA2NywgMC4xNSkgMHB4IC01cHggNXB4JztcbmV4cG9ydCBjb25zdCBNSU5JTUlaRURfSUZSQU1FX1NJWkUgPSAnNDIwcHgnO1xuXG5leHBvcnQgY2xhc3MgTWV0ZXJUb2FzdEFwaSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIGNvbnN0IGlmcmFtZUFyZ3MgPSB0aGlzLmFjdGl2aXR5UG9ydHNfLmFkZERlZmF1bHRBcmd1bWVudHMoe1xuICAgICAgaXNDbG9zYWJsZTogdHJ1ZSxcbiAgICAgIGhhc1N1YnNjcmlwdGlvbkNhbGxiYWNrOiBkZXBzLmNhbGxiYWNrcygpLmhhc1N1YnNjcmliZVJlcXVlc3RDYWxsYmFjaygpLFxuICAgIH0pO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgIHRoaXMud2luXyxcbiAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICBmZVVybCgnL21ldGVydG9hc3RpZnJhbWUnKSxcbiAgICAgIGlmcmFtZUFyZ3MsXG4gICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyBmYWxzZVxuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0aGlzIGNsYXNzIGNhbGxzIHdoZW4gYSB1c2VyIGRpc21pc3NlcyB0aGUgdG9hc3QgdG8gY29uc3VtZSBhIGZyZWUgcmVhZC5cbiAgICAgKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9XG4gICAgICovXG4gICAgdGhpcy5vbkNvbnN1bWVDYWxsYmFja18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSBvbkNvbnN1bWVDYWxsYmFja18gaGFzIGJlZW4gaGFuZGxlZFxuICAgICAqIChlaXRoZXIgY2FsbGVkIG9yIGlnbm9yZWQpLiBUaGlzIGlzIHVzZWQgdG8gcHJvdGVjdCBhZ2FpbnN0IHVuZXhwZWN0ZWRcbiAgICAgKiBjYW5jZWxsYXRpb25zIG5vdCBjb25zdW1pbmcgYSBtZXRlci5cbiAgICAgKiBAcHJpdmF0ZSB7IWJvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5vbkNvbnN1bWVDYWxsYmFja0hhbmRsZWRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLnNlbmRDbG9zZVJlcXVlc3RGdW5jdGlvbl8gPSAoKSA9PiB7XG4gICAgICBjb25zdCBjbG9zZVJlcXVlc3QgPSBuZXcgVG9hc3RDbG9zZVJlcXVlc3QoKTtcbiAgICAgIGNsb3NlUmVxdWVzdC5zZXRDbG9zZSh0cnVlKTtcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5leGVjdXRlKGNsb3NlUmVxdWVzdCk7XG4gICAgICB0aGlzLnJlbW92ZUNsb3NlRXZlbnRMaXN0ZW5lcigpO1xuXG4gICAgICB0aGlzLmRlcHNfXG4gICAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgICAubG9nU3dnRXZlbnQoXG4gICAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX01FVEVSX1RPQVNUX0NMT1NFRF9CWV9BUlRJQ0xFX0lOVEVSQUNUSU9OLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMub25Db25zdW1lQ2FsbGJhY2tfICYmICF0aGlzLm9uQ29uc3VtZUNhbGxiYWNrSGFuZGxlZF8pIHtcbiAgICAgICAgdGhpcy5vbkNvbnN1bWVDYWxsYmFja0hhbmRsZWRfID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkNvbnN1bWVDYWxsYmFja18oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLnNjcm9sbEV2ZW50TGlzdGVuZXJfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgdXNlciB0aGUgbWV0ZXJpbmcgdG9hc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmNhbGxiYWNrcygpXG4gICAgICAudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfTUVURVJfVE9BU1QpO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgIFZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UsXG4gICAgICB0aGlzLnN0YXJ0TmF0aXZlRmxvd18uYmluZCh0aGlzKVxuICAgICk7XG4gICAgaWYgKCF0aGlzLmRlcHNfLmNhbGxiYWNrcygpLmhhc1N1YnNjcmliZVJlcXVlc3RDYWxsYmFjaygpKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICAnW3N3Zy5qc106IGBzZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3RgIGhhcyBub3QgYmVlbiAnICtcbiAgICAgICAgJ3NldCBiZWZvcmUgc3RhcnRpbmcgdGhlIG1ldGVyaW5nIGZsb3csIHNvIHVzZXJzIHdpbGwgbm90IGJlIGFibGUgdG8gJyArXG4gICAgICAgICdzdWJzY3JpYmUgZnJvbSB0aGUgbWV0ZXJpbmcgZGlhbG9nIGRpcmVjdGx5LiBQbGVhc2UgY2FsbCAnICtcbiAgICAgICAgJ2BzZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3RgIHdpdGggYSBzdWJzY3JpcHRpb24gZmxvdyBjYWxsYmFjayBiZWZvcmUgJyArXG4gICAgICAgICdzdGFydGluZyBtZXRlcmluZy4nO1xuICAgICAgd2FybihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl9cbiAgICAgIC5oYW5kbGVDYW5jZWxsYXRpb25zKHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XylcbiAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgIC8vIFBvc3NpYmx5IGNhbGwgb25Db25zdW1lQ2FsbGJhY2sgb24gYWxsIGRpYWxvZyBjYW5jZWxsYXRpb25zIHRvIGVuc3VyZSB1bmV4cGVjdGVkXG4gICAgICAgIC8vIGRpYWxvZyBjbG9zdXJlcyBkb24ndCBnaXZlIGFjY2VzcyB3aXRob3V0IGEgbWV0ZXIgY29uc3VtZWQuXG4gICAgICAgIGlmICh0aGlzLm9uQ29uc3VtZUNhbGxiYWNrXyAmJiAhdGhpcy5vbkNvbnN1bWVDYWxsYmFja0hhbmRsZWRfKSB7XG4gICAgICAgICAgdGhpcy5vbkNvbnN1bWVDYWxsYmFja0hhbmRsZWRfID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uc3VtZUNhbGxiYWNrXygpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IHRocm93IG9uIGNhbmNlbCBlcnJvcnMgc2luY2UgdGhleSBoYXBwZW4gd2hlbiBhIHVzZXIgY2xvc2VzIHRoZSB0b2FzdCxcbiAgICAgICAgLy8gd2hpY2ggaXMgZXhwZWN0ZWQuXG4gICAgICAgIGlmICghaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlIC8qT0sqL1xuICAgICAgICAgICAgLmVycm9yKFxuICAgICAgICAgICAgICAnW3N3Zy5qc106IEVycm9yIG9jY3VycmVkIGR1cmluZyBtZXRlciB0b2FzdCBoYW5kbGluZzogJyArIHJlYXNvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5EaWFsb2coKS50aGVuKChkaWFsb2cpID0+IHtcbiAgICAgIHRoaXMuc2V0RGlhbG9nQm94U2hhZG93XygpO1xuICAgICAgdGhpcy5zZXRMb2FkaW5nVmlld1dpZHRoXygpO1xuICAgICAgcmV0dXJuIGRpYWxvZy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBBbGxvdyBjbG9zaW5nIG9mIHRoZSBpZnJhbWUgd2l0aCBhbnkgc2Nyb2xsIG9yIGNsaWNrIGV2ZW50LlxuICAgICAgICB0aGlzLndpbl8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNlbmRDbG9zZVJlcXVlc3RGdW5jdGlvbl8pO1xuICAgICAgICB0aGlzLndpbl8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAndG91Y2hzdGFydCcsXG4gICAgICAgICAgdGhpcy5zZW5kQ2xvc2VSZXF1ZXN0RnVuY3Rpb25fXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMud2luXy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnNlbmRDbG9zZVJlcXVlc3RGdW5jdGlvbl8pO1xuICAgICAgICAvLyBNYWtpbmcgYm9keSdzIG92ZXJmbG93IHByb3BlcnR5ICdoaWRkZW4nIHRvIHByZXZlbnQgc2Nyb2xsaW5nXG4gICAgICAgIC8vIHdoaWxlIHN3aXBpbmcgb24gdGhlIGlmcmFtZSBvbmx5IG9uIG1vYmlsZS5cbiAgICAgICAgaWYgKHRoaXMuaXNNb2JpbGVfKCkpIHtcbiAgICAgICAgICBjb25zdCAkYm9keSA9IHRoaXMud2luXy5kb2N1bWVudC5ib2R5O1xuICAgICAgICAgIHNldFN0eWxlKCRib2R5LCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHN0YXJ0LCBzY3JvbGxUaW1lb3V0O1xuICAgICAgICAgIHRoaXMuc2Nyb2xsRXZlbnRMaXN0ZW5lcl8gPSAoKSA9PiB7XG4gICAgICAgICAgICBzdGFydCA9IHN0YXJ0IHx8IHRoaXMud2luXy4vKlJFVklFVyovIHBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgdGhpcy53aW5fLmNsZWFyVGltZW91dChzY3JvbGxUaW1lb3V0KTtcbiAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQgPSB0aGlzLndpbl8uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBzY3JvbGwgaXMgbG9uZ2VyIHRoYW4gMTAwLCBjbG9zZSB0aGUgdG9hc3QuXG4gICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLndpbl8uLypSRVZJRVcqLyBwYWdlWU9mZnNldCAtIHN0YXJ0KSA+IDEwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZENsb3NlUmVxdWVzdEZ1bmN0aW9uXygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy53aW5fLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsRXZlbnRMaXN0ZW5lcl8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9NRVRFUl9UT0FTVCk7XG4gICAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgICAuZXZlbnRNYW5hZ2VyKClcbiAgICAgICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuRVZFTlRfT0ZGRVJFRF9NRVRFUik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhpcyBjbGFzcyBjYWxscyB3aGVuIGEgdXNlciBkaXNtaXNzZXMgdGhlIHRvYXN0IHRvIGNvbnN1bWUgYSBmcmVlIHJlYWQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gb25Db25zdW1lQ2FsbGJhY2tcbiAgICovXG4gIHNldE9uQ29uc3VtZUNhbGxiYWNrKG9uQ29uc3VtZUNhbGxiYWNrKSB7XG4gICAgdGhpcy5vbkNvbnN1bWVDYWxsYmFja18gPSBvbkNvbnN1bWVDYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCBjbG9zZSB0aGUgaWZyYW1lIGFuZCBtYWtlIHRoZSBib2R5IHZpc2libGUuXG4gICAqL1xuICByZW1vdmVDbG9zZUV2ZW50TGlzdGVuZXIoKSB7XG4gICAgdGhpcy53aW5fLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zZW5kQ2xvc2VSZXF1ZXN0RnVuY3Rpb25fKTtcbiAgICB0aGlzLndpbl8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuc2VuZENsb3NlUmVxdWVzdEZ1bmN0aW9uXyk7XG4gICAgdGhpcy53aW5fLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuc2VuZENsb3NlUmVxdWVzdEZ1bmN0aW9uXyk7XG4gICAgaWYgKHRoaXMuaXNNb2JpbGVfKCkpIHtcbiAgICAgIGNvbnN0ICRib2R5ID0gdGhpcy53aW5fLmRvY3VtZW50LmJvZHk7XG4gICAgICBzZXRTdHlsZSgkYm9keSwgJ292ZXJmbG93JywgJ3Zpc2libGUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53aW5fLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsRXZlbnRMaXN0ZW5lcl8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2VzIHRoZSBpZnJhbWUgYm94IHNoYWRvdyB0byBtYXRjaCBkZXNpcmVkIHNwZWNpZmljYXRpb25zIG9uIG1vYmlsZS5cbiAgICovXG4gIHNldERpYWxvZ0JveFNoYWRvd18oKSB7XG4gICAgY29uc3QgbW9iaWxlTWVkaWFRdWVyeSA9IHRoaXMud2luXy5tYXRjaE1lZGlhKFxuICAgICAgJyhtYXgtd2lkdGg6IDY0MHB4KSwgKG1heC1oZWlnaHQ6IDY0MHB4KSdcbiAgICApO1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmRpYWxvZ01hbmFnZXJfLmdldERpYWxvZygpLmdldEVsZW1lbnQoKTtcbiAgICBpZiAobW9iaWxlTWVkaWFRdWVyeS5tYXRjaGVzKSB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoZWxlbWVudCwgeydib3gtc2hhZG93JzogSUZSQU1FX0JPWF9TSEFET1d9KTtcbiAgICB9XG4gICAgbW9iaWxlTWVkaWFRdWVyeS5hZGRMaXN0ZW5lcigoY2hhbmdlZCkgPT4ge1xuICAgICAgaWYgKGNoYW5nZWQubWF0Y2hlcykge1xuICAgICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoZWxlbWVudCwgeydib3gtc2hhZG93JzogSUZSQU1FX0JPWF9TSEFET1d9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEltcG9ydGFudFN0eWxlcyhlbGVtZW50LCB7J2JveC1zaGFkb3cnOiAnJ30pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZXMgdGhlIHNpemUgb2YgdGhlIGxvYWRpbmcgaWZyYW1lIG9uIGRlc2t0b3AgdG8gbWF0Y2ggdGhlIHNpemUgb2ZcbiAgICogdGhlIG1ldGVyIHRvYXN0IGlmcmFtZS5cbiAgICovXG4gIHNldExvYWRpbmdWaWV3V2lkdGhfKCkge1xuICAgIGNvbnN0IGRlc2t0b3BNZWRpYVF1ZXJ5ID0gdGhpcy53aW5fLm1hdGNoTWVkaWEoXG4gICAgICAnKG1pbi13aWR0aDogNjQwcHgpIGFuZCAobWluLWhlaWdodDogNjQwcHgpJ1xuICAgICk7XG4gICAgaWYgKGRlc2t0b3BNZWRpYVF1ZXJ5Lm1hdGNoZXMpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmRpYWxvZ01hbmFnZXJfXG4gICAgICAgIC5nZXREaWFsb2coKVxuICAgICAgICAuZ2V0TG9hZGluZ1ZpZXcoKVxuICAgICAgICAuZ2V0RWxlbWVudCgpO1xuICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsZW1lbnQsIHtcbiAgICAgICAgJ3dpZHRoJzogTUlOSU1JWkVEX0lGUkFNRV9TSVpFLFxuICAgICAgICAnbWFyZ2luJzogJ2F1dG8nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Vmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0TmF0aXZlRmxvd18ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0TmF0aXZlKCkpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xvc2VFdmVudExpc3RlbmVyKCk7XG4gICAgICAvLyBXZSBzaG91bGRuJ3QgZGVjcmVtZW50IHRoZSBtZXRlciBvbiByZWRpcmVjdHMsIHNvIGRvbid0IGNhbGwgb25Db25zdW1lQ2FsbGJhY2suXG4gICAgICB0aGlzLm9uQ29uc3VtZUNhbGxiYWNrSGFuZGxlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyU3Vic2NyaWJlUmVxdWVzdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHdpbmRvdyB1c2VyQWdlbnQgaXMgYSBtb2JpbGUgcGxhdGZvcm0uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc01vYmlsZV8oKSB7XG4gICAgcmV0dXJuICEhdGhpcy53aW5fLm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goXG4gICAgICAvQW5kcm9pZHxpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGUvaVxuICAgICk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtzZXJ2aWNlVXJsfSBmcm9tICcuL3NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIE9mZmVyc0FwaSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSBjb25maWdcbiAgICogQHBhcmFtIHshLi9mZXRjaGVyLkZldGNoZXJ9IGZldGNoZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZmV0Y2hlcikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGNvbmZpZztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2ZldGNoZXIuRmV0Y2hlcn0gKi9cbiAgICB0aGlzLmZldGNoZXJfID0gZmV0Y2hlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBwcm9kdWN0SWRcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFycmF5PCEuLi9hcGkvb2ZmZXIuT2ZmZXI+Pn1cbiAgICovXG4gIGdldE9mZmVycyhwcm9kdWN0SWQgPSB0aGlzLmNvbmZpZ18uZ2V0UHJvZHVjdElkKCkpIHtcbiAgICBpZiAoIXByb2R1Y3RJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdnZXRPZmZlcnMgcmVxdWlyZXMgcHJvZHVjdElkIGluIGNvbmZpZyBvciBhcmd1bWVudHMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hfKHByb2R1Y3RJZCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb2R1Y3RJZFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhQXJyYXk8IS4uL2FwaS9vZmZlci5PZmZlcj4+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmV0Y2hfKHByb2R1Y3RJZCkge1xuICAgIGNvbnN0IHVybCA9IHNlcnZpY2VVcmwoXG4gICAgICAnL3B1YmxpY2F0aW9uLycgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKSkgK1xuICAgICAgICAnL29mZmVycycgK1xuICAgICAgICAnP2xhYmVsPScgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQocHJvZHVjdElkKVxuICAgICk7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBzd2l0Y2ggdG8gYSBub24tY3JlZGVudGlhbGVkIHJlcXVlc3QgYWZ0ZXIgbGF1bmNoLlxuICAgIHJldHVybiB0aGlzLmZldGNoZXJfLmZldGNoQ3JlZGVudGlhbGVkSnNvbih1cmwpLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uWydvZmZlcnMnXSB8fCBbXTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGl2aXR5SWZyYW1lVmlld30gZnJvbSAnLi4vdWkvYWN0aXZpdHktaWZyYW1lLXZpZXcnO1xuaW1wb3J0IHtcbiAgQWxyZWFkeVN1YnNjcmliZWRSZXNwb25zZSxcbiAgRW50aXRsZW1lbnRzUmVzcG9uc2UsXG4gIFNrdVNlbGVjdGVkUmVzcG9uc2UsXG4gIFN1YnNjcmliZVJlc3BvbnNlLFxuICBWaWV3U3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxufSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtBbmFseXRpY3NFdmVudCwgRXZlbnRQYXJhbXN9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7UGF5U3RhcnRGbG93fSBmcm9tICcuL3BheS1mbG93JztcbmltcG9ydCB7UHJvZHVjdFR5cGUsIFN1YnNjcmlwdGlvbkZsb3dzfSBmcm9tICcuLi9hcGkvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7ZmVBcmdzLCBmZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICogQHJldHVybiB7IUV2ZW50UGFyYW1zfVxuICovXG5mdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhza3UpIHtcbiAgcmV0dXJuIG5ldyBFdmVudFBhcmFtcyhbLCAsICwgLCBza3VdKTtcbn1cblxuLyoqXG4gKiBPZmZlcnMgdmlldyBpcyBjbG9zYWJsZSB3aGVuIHJlcXVlc3Qgd2FzIG9yaWdpbmF0ZWQgZnJvbSAnQWJicnZPZmZlckZsb3cnXG4gKiBvciBmcm9tICdTdWJzY3JpYmVPcHRpb25GbG93Jy5cbiAqL1xuY29uc3QgT0ZGRVJTX1ZJRVdfQ0xPU0FCTEUgPSB0cnVlO1xuXG4vLyBUaGUgdmFsdWUgbG9nZ2VkIHdoZW4gdGhlIG9mZmVycyBzY3JlZW4gc2hvd3MgYWxsIGF2YWlsYWJsZSBTS1VzLlxuY29uc3QgQUxMX1NLVVMgPSAnKic7XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBPZmZlcnMgZmxvdy5cbiAqL1xuZXhwb3J0IGNsYXNzIE9mZmVyc0Zsb3cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuT2ZmZXJzUmVxdWVzdHx1bmRlZmluZWR9IG9wdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIG9wdGlvbnMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vcnVudGltZS9jbGllbnQtZXZlbnQtbWFuYWdlci5DbGllbnRFdmVudE1hbmFnZXJ9ICovXG4gICAgdGhpcy5ldmVudE1hbmFnZXJfID0gZGVwcy5ldmVudE1hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2NsaWVudC1jb25maWctbWFuYWdlci5DbGllbnRDb25maWdNYW5hZ2VyfSAqL1xuICAgIHRoaXMuY2xpZW50Q29uZmlnTWFuYWdlcl8gPSBkZXBzLmNsaWVudENvbmZpZ01hbmFnZXIoKTtcblxuICAgIGxldCBpc0Nsb3NhYmxlID0gb3B0aW9ucyAmJiBvcHRpb25zLmlzQ2xvc2FibGU7XG4gICAgaWYgKGlzQ2xvc2FibGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpc0Nsb3NhYmxlID0gZmFsc2U7IC8vIERlZmF1bHQgaXMgdG8gaGlkZSBDbG9zZSBidXR0b24uXG4gICAgfVxuXG4gICAgY29uc3QgZmVBcmdzT2JqID0gZGVwcy5hY3Rpdml0aWVzKCkuYWRkRGVmYXVsdEFyZ3VtZW50cyh7XG4gICAgICAnc2hvd05hdGl2ZSc6IGRlcHMuY2FsbGJhY2tzKCkuaGFzU3Vic2NyaWJlUmVxdWVzdENhbGxiYWNrKCksXG4gICAgICAncHJvZHVjdFR5cGUnOiBQcm9kdWN0VHlwZS5TVUJTQ1JJUFRJT04sXG4gICAgICAnbGlzdCc6IChvcHRpb25zICYmIG9wdGlvbnMubGlzdCkgfHwgJ2RlZmF1bHQnLFxuICAgICAgJ3NrdXMnOiAob3B0aW9ucyAmJiBvcHRpb25zLnNrdXMpIHx8IG51bGwsXG4gICAgICAnaXNDbG9zYWJsZSc6IGlzQ2xvc2FibGUsXG4gICAgfSk7XG5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm9sZFNrdSkge1xuICAgICAgZmVBcmdzT2JqWydvbGRTa3UnXSA9IG9wdGlvbnMub2xkU2t1O1xuICAgICAgYXNzZXJ0KGZlQXJnc09ialsnc2t1cyddLCAnTmVlZCBhIHNrdSBsaXN0IGlmIG9sZCBza3UgaXMgcHJvdmlkZWQhJyk7XG5cbiAgICAgIC8vIFJlbW92ZSBvbGQgc2t1IGZyb20gb2ZmZXJzIGlmIGluIGxpc3QuXG4gICAgICBsZXQgc2t1TGlzdCA9IGZlQXJnc09ialsnc2t1cyddO1xuICAgICAgY29uc3QgLyoqIEB0eXBlIHtzdHJpbmd9ICovIG9sZFNrdSA9IGZlQXJnc09ialsnb2xkU2t1J107XG4gICAgICBza3VMaXN0ID0gc2t1TGlzdC5maWx0ZXIoKHNrdSkgPT4gc2t1ICE9PSBvbGRTa3UpO1xuXG4gICAgICBhc3NlcnQoXG4gICAgICAgIHNrdUxpc3QubGVuZ3RoID4gMCxcbiAgICAgICAgJ1NrdSBsaXN0IG9ubHkgY29udGFpbmVkIG9mZmVyIHVzZXIgYWxyZWFkeSBoYXMnXG4gICAgICApO1xuICAgICAgZmVBcmdzT2JqWydza3VzJ10gPSBza3VMaXN0O1xuICAgIH1cblxuICAgIC8vIFJlZGlyZWN0IHRvIHBheW1lbnRzIGlmIG9ubHkgb25lIHVwZ3JhZGUgb3B0aW9uIGlzIHBhc3NlZC5cbiAgICBpZiAoZmVBcmdzT2JqWydza3VzJ10gJiYgZmVBcmdzT2JqWydza3VzJ10ubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBza3UgPSBmZUFyZ3NPYmpbJ3NrdXMnXVswXTtcbiAgICAgIGNvbnN0IC8qKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH0gKi8gb2xkU2t1ID0gZmVBcmdzT2JqWydvbGRTa3UnXTtcbiAgICAgIC8vIFVwZGF0ZSBzdWJzY3JpcHRpb24gdHJpZ2dlcnMgZXhwZXJpbWVudGFsIGZsYWcgaWYgb2xkU2t1IGlzIHBhc3NlZCxcbiAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIG9sZFNrdSB0byBkZWNpZGUgaWYgaXQgbmVlZHMgdG8gYmUgc2VudC5cbiAgICAgIC8vIE90aGVyd2lzZSB3ZSBtaWdodCBhY2NpZGVudGFsbHkgYmxvY2sgYSByZWd1bGFyIHN1YnNjcmlwdGlvbiByZXF1ZXN0LlxuICAgICAgaWYgKG9sZFNrdSkge1xuICAgICAgICBjb25zdCBza3VTZWxlY3RlZFJlc3BvbnNlID0gbmV3IFNrdVNlbGVjdGVkUmVzcG9uc2UoKTtcbiAgICAgICAgc2t1U2VsZWN0ZWRSZXNwb25zZS5zZXRTa3Uoc2t1KTtcbiAgICAgICAgc2t1U2VsZWN0ZWRSZXNwb25zZS5zZXRPbGRTa3Uob2xkU2t1KTtcbiAgICAgICAgdGhpcy5zdGFydFBheUZsb3dfKHNrdVNlbGVjdGVkUmVzcG9uc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEBwcml2YXRlICBAY29uc3QgeyFBcnJheTwhc3RyaW5nPn0gKi9cbiAgICB0aGlzLnNrdXNfID0gZmVBcmdzT2JqWydza3VzJ10gfHwgW0FMTF9TS1VTXTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPCFBY3Rpdml0eUlmcmFtZVZpZXc+fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3UHJvbWlzZV8gPSB0aGlzLmdldFVybF8oXG4gICAgICB0aGlzLmNsaWVudENvbmZpZ01hbmFnZXJfLmdldENsaWVudENvbmZpZygpXG4gICAgKS50aGVuKCh1cmwpID0+IHtcbiAgICAgIHJldHVybiBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICAgIGZlVXJsKHVybCksXG4gICAgICAgIGZlQXJnc09iaixcbiAgICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1NrdVNlbGVjdGVkUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydFBheUZsb3dfKHJlc3BvbnNlKSB7XG4gICAgY29uc3Qgc2t1ID0gcmVzcG9uc2UuZ2V0U2t1KCk7XG4gICAgaWYgKHNrdSkge1xuICAgICAgY29uc3QgLyoqIEB0eXBlIHsuLi9hcGkvc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25SZXF1ZXN0fSAqLyBzdWJzY3JpcHRpb25SZXF1ZXN0ID0ge1xuICAgICAgICAgICdza3VJZCc6IHNrdSxcbiAgICAgICAgfTtcbiAgICAgIGNvbnN0IG9sZFNrdSA9IHJlc3BvbnNlLmdldE9sZFNrdSgpO1xuICAgICAgaWYgKG9sZFNrdSkge1xuICAgICAgICBzdWJzY3JpcHRpb25SZXF1ZXN0WydvbGRTa3UnXSA9IG9sZFNrdTtcbiAgICAgICAgdGhpcy5kZXBzXy5hbmFseXRpY3MoKS5zZXRTa3Uob2xkU2t1KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX09GRkVSX1NFTEVDVEVELFxuICAgICAgICB0cnVlLFxuICAgICAgICBnZXRFdmVudFBhcmFtcyhza3UpXG4gICAgICApO1xuICAgICAgbmV3IFBheVN0YXJ0Rmxvdyh0aGlzLmRlcHNfLCBzdWJzY3JpcHRpb25SZXF1ZXN0KS5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMaW5rUmVxdWVzdF8ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0U3Vic2NyaWJlck9yTWVtYmVyKCkpIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0FMUkVBRFlfU1VCU0NSSUJFRCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckxvZ2luUmVxdWVzdCh7XG4gICAgICAgIGxpbmtSZXF1ZXN0ZWQ6ICEhcmVzcG9uc2UuZ2V0TGlua1JlcXVlc3RlZCgpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Vmlld1N1YnNjcmlwdGlvbnNSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0TmF0aXZlRmxvd18ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0TmF0aXZlKCkpIHtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlclN1YnNjcmliZVJlcXVlc3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVFbnRpdGxlbWVudHNSZXNwb25zZV8ocmVzcG9uc2UpIHtcbiAgICBjb25zdCBqd3QgPSByZXNwb25zZS5nZXRKd3QoKTtcbiAgICBpZiAoand0KSB7XG4gICAgICB0aGlzLmRlcHNfLmVudGl0bGVtZW50c01hbmFnZXIoKS5wdXNoTmV4dEVudGl0bGVtZW50cyhqd3QpO1xuICAgICAgY29uc3Qgc3dnVXNlclRva2VuID0gcmVzcG9uc2UuZ2V0U3dnVXNlclRva2VuKCk7XG4gICAgICBpZiAoc3dnVXNlclRva2VuKSB7XG4gICAgICAgIHRoaXMuZGVwc18uc3RvcmFnZSgpLnNldChDb25zdGFudHMuVVNFUl9UT0tFTiwgc3dnVXNlclRva2VuLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBvZmZlcnMgZmxvdyBvciBhbHJlYWR5U3Vic2NyaWJlZCBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIGlmICh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld1Byb21pc2VfKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdQcm9taXNlXy50aGVuKChhY3Rpdml0eUlmcmFtZVZpZXcpID0+IHtcbiAgICAgICAgLy8gU28gbm8gZXJyb3IgaWYgc2tpcHBlZCB0byBwYXltZW50IHNjcmVlbi5cbiAgICAgICAgLy8gU3RhcnQvY2FuY2VsIGV2ZW50cy5cbiAgICAgICAgLy8gVGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgYnkgUHJvcGVuc2l0eSBpbiBBTVAuXG4gICAgICAgIHRoaXMuZGVwc19cbiAgICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgICAudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfT0ZGRVJTLCB7XG4gICAgICAgICAgICBza3VzOiB0aGlzLnNrdXNfLFxuICAgICAgICAgICAgc291cmNlOiAnU3dHJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3Lm9uQ2FuY2VsKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmRlcHNfXG4gICAgICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgICAgIC50cmlnZ2VyRmxvd0NhbmNlbGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfT0ZGRVJTKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFjdGl2aXR5SWZyYW1lVmlldy5vbihcbiAgICAgICAgICBTa3VTZWxlY3RlZFJlc3BvbnNlLFxuICAgICAgICAgIHRoaXMuc3RhcnRQYXlGbG93Xy5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgICAgIGFjdGl2aXR5SWZyYW1lVmlldy5vbihcbiAgICAgICAgICBBbHJlYWR5U3Vic2NyaWJlZFJlc3BvbnNlLFxuICAgICAgICAgIHRoaXMuaGFuZGxlTGlua1JlcXVlc3RfLmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3Lm9uKFxuICAgICAgICAgIFZpZXdTdWJzY3JpcHRpb25zUmVzcG9uc2UsXG4gICAgICAgICAgdGhpcy5zdGFydE5hdGl2ZUZsb3dfLmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3Lm9uKFxuICAgICAgICAgIEVudGl0bGVtZW50c1Jlc3BvbnNlLFxuICAgICAgICAgIHRoaXMuaGFuZGxlRW50aXRsZW1lbnRzUmVzcG9uc2VfLmJpbmQodGhpcylcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyhhY3Rpdml0eUlmcmFtZVZpZXcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBVUkwgdGhhdCBzaG91bGQgYmUgdXNlZCBmb3IgdGhlIGFjdGl2aXR5IGlGcmFtZSB2aWV3LlxuICAgKiBAcGFyYW0geyFQcm9taXNlPC4uL21vZGVsL2NsaWVudC1jb25maWcuQ2xpZW50Q29uZmlnPn0gY2xpZW50Q29uZmlnUHJvbWlzZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZ2V0VXJsXyhjbGllbnRDb25maWdQcm9taXNlKSB7XG4gICAgcmV0dXJuIGNsaWVudENvbmZpZ1Byb21pc2UudGhlbigoY2xpZW50Q29uZmlnKSA9PiB7XG4gICAgICBpZiAoY2xpZW50Q29uZmlnLnVzZVVwZGF0ZWRPZmZlckZsb3dzKSB7XG4gICAgICAgIHJldHVybiAnL3N1YnNjcmlwdGlvbm9mZmVyc2lmcmFtZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJy9vZmZlcnNpZnJhbWUnO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBzdWJzY3JpYmUgb3B0aW9uIGZsb3cuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJzY3JpYmVPcHRpb25GbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBvcHRpb25zKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMub3B0aW9uc18gPSBvcHRpb25zO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvY2xpZW50LWV2ZW50LW1hbmFnZXIuQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICBkZXBzLndpbigpLFxuICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXyxcbiAgICAgIGZlVXJsKCcvb3B0aW9uc2lmcmFtZScpLFxuICAgICAgZmVBcmdzKHtcbiAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAgICdwcm9kdWN0SWQnOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQcm9kdWN0SWQoKSxcbiAgICAgICAgJ2xpc3QnOiAob3B0aW9ucyAmJiBvcHRpb25zLmxpc3QpIHx8ICdkZWZhdWx0JyxcbiAgICAgICAgJ3NrdXMnOiAob3B0aW9ucyAmJiBvcHRpb25zLnNrdXMpIHx8IG51bGwsXG4gICAgICAgICdpc0Nsb3NhYmxlJzogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gZmFsc2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgb2ZmZXJzIGZsb3cgb3IgYWxyZWFkeVN1YnNjcmliZWQgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc19cbiAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX1NVQlNDUklCRV9PUFRJT04pO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbkNhbmNlbCgoKSA9PiB7XG4gICAgICB0aGlzLmRlcHNfXG4gICAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgICAudHJpZ2dlckZsb3dDYW5jZWxlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX1NVQlNDUklCRV9PUFRJT04pO1xuICAgIH0pO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgIFN1YnNjcmliZVJlc3BvbnNlLFxuICAgICAgdGhpcy5tYXliZU9wZW5PZmZlcnNGbG93Xy5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHQoKS50aGVuKFxuICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IFN1YnNjcmliZVJlc3BvbnNlKCk7XG4gICAgICAgIGlmIChkYXRhWydzdWJzY3JpYmUnXSkge1xuICAgICAgICAgIHJlc3BvbnNlLnNldFN1YnNjcmliZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1heWJlT3Blbk9mZmVyc0Zsb3dfKHJlc3BvbnNlKTtcbiAgICAgIH0sXG4gICAgICAocmVhc29uKSA9PiB7XG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgIEFuYWx5dGljc0V2ZW50LklNUFJFU1NJT05fQ0xJQ0tfVE9fU0hPV19PRkZFUlNcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdWJzY3JpYmVSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1heWJlT3Blbk9mZmVyc0Zsb3dfKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLmdldFN1YnNjcmliZSgpKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zXyB8fCB7fTtcbiAgICAgIGlmIChvcHRpb25zLmlzQ2xvc2FibGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdGlvbnMuaXNDbG9zYWJsZSA9IE9GRkVSU19WSUVXX0NMT1NBQkxFO1xuICAgICAgfVxuICAgICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9WSUVXX09GRkVSUywgdHJ1ZSk7XG4gICAgICBuZXcgT2ZmZXJzRmxvdyh0aGlzLmRlcHNfLCBvcHRpb25zKS5zdGFydCgpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3IgQWJicmV2aWF0ZWQgT2ZmZXIgZmxvdy5cbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBBYmJydk9mZmVyRmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0PX0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMub3B0aW9uc18gPSBvcHRpb25zO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvY2xpZW50LWV2ZW50LW1hbmFnZXIuQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy9hYmJydm9mZmVyaWZyYW1lJyksXG4gICAgICBmZUFyZ3Moe1xuICAgICAgICAncHVibGljYXRpb25JZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgJ3Byb2R1Y3RJZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAnc2hvd05hdGl2ZSc6IGRlcHMuY2FsbGJhY2tzKCkuaGFzU3Vic2NyaWJlUmVxdWVzdENhbGxiYWNrKCksXG4gICAgICAgICdsaXN0JzogKG9wdGlvbnMgJiYgb3B0aW9ucy5saXN0KSB8fCAnZGVmYXVsdCcsXG4gICAgICAgICdza3VzJzogKG9wdGlvbnMgJiYgb3B0aW9ucy5za3VzKSB8fCBudWxsLFxuICAgICAgICAnaXNDbG9zYWJsZSc6IHRydWUsXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMaW5rUmVxdWVzdF8ocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuZ2V0U3Vic2NyaWJlck9yTWVtYmVyKCkpIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgQW5hbHl0aWNzRXZlbnQuQUNUSU9OX0FMUkVBRFlfU1VCU0NSSUJFRCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckxvZ2luUmVxdWVzdCh7XG4gICAgICAgIGxpbmtSZXF1ZXN0ZWQ6ICEhcmVzcG9uc2UuZ2V0TGlua1JlcXVlc3RlZCgpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgb2ZmZXJzIGZsb3dcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc19cbiAgICAgIC5jYWxsYmFja3MoKVxuICAgICAgLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5TSE9XX0FCQlJWX09GRkVSKTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ub25DYW5jZWwoKCkgPT4ge1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuY2FsbGJhY2tzKClcbiAgICAgICAgLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19BQkJSVl9PRkZFUik7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGUgdXNlciBpcyBhbHJlYWR5IHN1YnNjcmliZWQsIHRyaWdnZXIgbG9naW4gZmxvd1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbihcbiAgICAgIEFscmVhZHlTdWJzY3JpYmVkUmVzcG9uc2UsXG4gICAgICB0aGlzLmhhbmRsZUxpbmtSZXF1ZXN0Xy5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIC8vIElmIHJlc3VsdCBpcyBkdWUgdG8gcmVxdWVzdGluZyBvZmZlcnMsIHJlZGlyZWN0IHRvIG9mZmVycyBmbG93XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdC5kYXRhWyd2aWV3T2ZmZXJzJ10pIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9uc18gfHwge307XG4gICAgICAgIGlmIChvcHRpb25zLmlzQ2xvc2FibGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgb3B0aW9ucy5pc0Nsb3NhYmxlID0gT0ZGRVJTX1ZJRVdfQ0xPU0FCTEU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KEFuYWx5dGljc0V2ZW50LkFDVElPTl9WSUVXX09GRkVSUywgdHJ1ZSk7XG4gICAgICAgIG5ldyBPZmZlcnNGbG93KHRoaXMuZGVwc18sIG9wdGlvbnMpLnN0YXJ0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQuZGF0YVsnbmF0aXZlJ10pIHtcbiAgICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyU3Vic2NyaWJlUmVxdWVzdCgpO1xuICAgICAgICAvLyBUaGUgZmxvdyBpcyBjb21wbGV0ZS5cbiAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KFxuICAgICAgQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9DTElDS19UT19TSE9XX09GRkVSU19PUl9BTFJFQURZX1NVQlNDUklCRURcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0V4cGVyaW1lbnRGbGFnc30gZnJvbSAnLi9leHBlcmltZW50LWZsYWdzJztcbmltcG9ydCB7UGF5bWVudHNBc3luY0NsaWVudH0gZnJvbSAnLi4vLi4vdGhpcmRfcGFydHkvZ3BheS9zcmMvcGF5anNfYXN5bmMnO1xuaW1wb3J0IHtQcmVjb25uZWN0fSBmcm9tICcuLi91dGlscy9wcmVjb25uZWN0JztcbmltcG9ydCB7Ynl0ZXNUb1N0cmluZywgc3RyaW5nVG9CeXRlc30gZnJvbSAnLi4vdXRpbHMvYnl0ZXMnO1xuaW1wb3J0IHtjcmVhdGVDYW5jZWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcbmltcG9ydCB7ZmVDYWNoZWR9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtpc0V4cGVyaW1lbnRPbn0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5cbmNvbnN0IFJFRElSRUNUX1NUT1JBR0VfS0VZID0gJ3N1YnNjcmliZS5nb29nbGUuY29tOnJrJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBmb3JjZVJlZGlyZWN0OiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBQYXlPcHRpb25zRGVmO1xuXG4vKipcbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjb25zdCBQQVlfT1JJR0lOID0ge1xuICAnUFJPRFVDVElPTic6ICdodHRwczovL3BheS5nb29nbGUuY29tJyxcbiAgJ1NBTkRCT1gnOiAnaHR0cHM6Ly9wYXkuc2FuZGJveC5nb29nbGUuY29tJyxcbn07XG5cbi8qKiBAcmV0dXJuIHtzdHJpbmd9ICovXG5mdW5jdGlvbiBwYXlVcmwoKSB7XG4gIHJldHVybiBmZUNhY2hlZChQQVlfT1JJR0lOWyckcGF5RW52aXJvbm1lbnQkJ10gKyAnL2dwL3AvdWkvcGF5Jyk7XG59XG5cbi8qKlxuICovXG5leHBvcnQgY2xhc3MgUGF5Q2xpZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCFQcm9taXNlPCFQYXltZW50RGF0YT4pfSAqL1xuICAgIHRoaXMucmVzcG9uc2VDYWxsYmFja18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UGF5bWVudERhdGFSZXF1ZXN0fSAqL1xuICAgIHRoaXMucmVxdWVzdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZTwhUGF5bWVudERhdGE+fSAqL1xuICAgIHRoaXMucmVzcG9uc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2FuYWx5dGljcy1zZXJ2aWNlLkFuYWx5dGljc1NlcnZpY2V9ICovXG4gICAgdGhpcy5hbmFseXRpY3NfID0gZGVwcy5hbmFseXRpY3MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFSZWRpcmVjdFZlcmlmaWVySGVscGVyfSAqL1xuICAgIHRoaXMucmVkaXJlY3RWZXJpZmllckhlbHBlcl8gPSBuZXcgUmVkaXJlY3RWZXJpZmllckhlbHBlcih0aGlzLndpbl8pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UGF5bWVudHNBc3luY0NsaWVudH0gKi9cbiAgICB0aGlzLmNsaWVudF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByZWNvbm5lY3R9ICovXG4gICAgdGhpcy5wcmVjb25uZWN0XyA9IG5ldyBQcmVjb25uZWN0KHRoaXMud2luXy5kb2N1bWVudCk7XG5cbiAgICAvLyBJZiB0aGUgcGFnZSBpcyBzdGFydGVkIGZyb20gYSByZWRpcmVjdCwgaW1tZWRpYXRlbHkgaW5pdGlhbGl6ZVxuICAgIC8vIGNsaWVudCB0byBhdm9pZCBkcm9wcGluZyB1c2VyIHN0YXRlLlxuICAgIGlmIChcbiAgICAgIGlzRXhwZXJpbWVudE9uKHRoaXMud2luXywgRXhwZXJpbWVudEZsYWdzLlBBWV9DTElFTlRfUkVESVJFQ1QpICYmXG4gICAgICB0aGlzLnBhZ2VJc0luaXRpYWxpemVkRnJvbVBheVJlZGlyZWN0XygpXG4gICAgKSB7XG4gICAgICB0aGlzLnByZWNvbm5lY3QodGhpcy5wcmVjb25uZWN0Xyk7XG4gICAgICB0aGlzLmluaXRpYWxpemVQYXltZW50c0NsaWVudF8oKTtcbiAgICB9XG5cbiAgICAvLyBQcmVwYXJlIG5ldyB2ZXJpZmllciBwYWlyLlxuICAgIHRoaXMucmVkaXJlY3RWZXJpZmllckhlbHBlcl8ucHJlcGFyZSgpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vY2xpZW50LWV2ZW50LW1hbmFnZXIuQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF5bWVudE9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGdvb2dsZVRyYW5zYWN0aW9uSWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhUGF5bWVudERhdGE+KX0gaGFuZGxlclxuICAgKiBAcmV0dXJuIHshUGF5bWVudHNBc3luY0NsaWVudH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZUNsaWVudF8ob3B0aW9ucywgZ29vZ2xlVHJhbnNhY3Rpb25JZCwgaGFuZGxlcikge1xuICAgIC8vIEFzc2lnbiBHb29nbGUgVHJhbnNhY3Rpb24gSUQgdG8gUGF5bWVudHNBc3luY0NsaWVudC5nb29nbGVUcmFuc2FjdGlvbklkX1xuICAgIC8vIHNvIGl0IGNhbiBiZSBwYXNzZWQgdG8gZ3BheV9hc3luYy5qcyBhbmQgc3RvcmVkIGluIHBheW1lbnQgY2xlYXJjdXQgbG9nLlxuICAgIFBheW1lbnRzQXN5bmNDbGllbnQuZ29vZ2xlVHJhbnNhY3Rpb25JZF8gPSBnb29nbGVUcmFuc2FjdGlvbklkO1xuICAgIHJldHVybiBuZXcgUGF5bWVudHNBc3luY0NsaWVudChcbiAgICAgIG9wdGlvbnMsXG4gICAgICBoYW5kbGVyLFxuICAgICAgLyogdXNlSWZyYW1lICovIGZhbHNlLFxuICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXy5nZXRPcmlnaW5hbFdlYkFjdGl2aXR5UG9ydHMoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vdXRpbHMvcHJlY29ubmVjdC5QcmVjb25uZWN0fSBwcmVcbiAgICovXG4gIHByZWNvbm5lY3QocHJlKSB7XG4gICAgcHJlLnByZWZldGNoKHBheVVybCgpKTtcbiAgICBwcmUucHJlZmV0Y2goXG4gICAgICAnaHR0cHM6Ly9wYXltZW50cy5nb29nbGUuY29tL3BheW1lbnRzL3Y0L2pzL2ludGVncmF0b3IuanM/c3M9bWQnXG4gICAgKTtcbiAgICBwcmUucHJlZmV0Y2goJ2h0dHBzOi8vY2xpZW50czIuZ29vZ2xlLmNvbS9nci9ncl9mdWxsXzIuMC42LmpzJyk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgUGF5bWVudHMgY2xpZW50LlxuICAgKi9cbiAgaW5pdGlhbGl6ZVBheW1lbnRzQ2xpZW50XygpIHtcbiAgICB0aGlzLmNsaWVudF8gPSB0aGlzLmNyZWF0ZUNsaWVudF8oXG4gICAgICAvKiogQHR5cGUgeyFQYXltZW50T3B0aW9uc30gKi9cbiAgICAgICh7XG4gICAgICAgIGVudmlyb25tZW50OiAnJHBheUVudmlyb25tZW50JCcsXG4gICAgICAgICdpJzoge1xuICAgICAgICAgICdyZWRpcmVjdEtleSc6IHRoaXMucmVkaXJlY3RWZXJpZmllckhlbHBlcl8ucmVzdG9yZUtleSgpLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICB0aGlzLmFuYWx5dGljc18uZ2V0VHJhbnNhY3Rpb25JZCgpLFxuICAgICAgdGhpcy5oYW5kbGVSZXNwb25zZV8uYmluZCh0aGlzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0cyBpZiB0aGUgd2luZG93IGlzIHN0YXJ0ZWQgZnJvbSBhIFBheSByZWRpcmVjdCBieVxuICAgKiBjaGVja2luZyB3aW5kb3cncyBoYXNoIGZvciBXZWIgQWN0aXZpdGllcyBpbmZvcm1hdGlvbi5cbiAgICovXG4gIHBhZ2VJc0luaXRpYWxpemVkRnJvbVBheVJlZGlyZWN0XygpIHtcbiAgICBjb25zdCBoYXNoID0gdGhpcy53aW5fLmxvY2F0aW9uLmhhc2g7XG4gICAgY29uc3QgaGFzUmVkaXJlY3RFbmNyeXB0ZWRDYWxsYmFja0RhdGEgPSAvcmVkaXJlY3RFbmNyeXB0ZWRDYWxsYmFja0RhdGEvLnRlc3QoXG4gICAgICBoYXNoXG4gICAgKTtcbiAgICBjb25zdCBoYXNTd2dSZXF1ZXN0ID0gL3N3Z1JlcXVlc3QvLnRlc3QoaGFzaCk7XG4gICAgcmV0dXJuIGhhc1JlZGlyZWN0RW5jcnlwdGVkQ2FsbGJhY2tEYXRhICYmIGhhc1N3Z1JlcXVlc3Q7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0VHlwZSgpIHtcbiAgICAvLyBUT0RPKGFsaW4wNCk6IHJlbW92ZSBvbmNlIGFsbCByZWZlcmVuY2VzIHJlbW92ZWQuXG4gICAgcmV0dXJuICdQQVlKUyc7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50UmVxdWVzdFxuICAgKiBAcGFyYW0geyFQYXlPcHRpb25zRGVmPX0gb3B0aW9uc1xuICAgKi9cbiAgc3RhcnQocGF5bWVudFJlcXVlc3QsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucmVxdWVzdF8gPSBwYXltZW50UmVxdWVzdDtcblxuICAgIGlmICghdGhpcy5jbGllbnRfKSB7XG4gICAgICB0aGlzLnByZWNvbm5lY3QodGhpcy5wcmVjb25uZWN0Xyk7XG4gICAgICB0aGlzLmluaXRpYWxpemVQYXltZW50c0NsaWVudF8oKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZm9yY2VSZWRpcmVjdCkge1xuICAgICAgcGF5bWVudFJlcXVlc3QgPSBPYmplY3QuYXNzaWduKHBheW1lbnRSZXF1ZXN0LCB7XG4gICAgICAgICdmb3JjZVJlZGlyZWN0Jzogb3B0aW9ucy5mb3JjZVJlZGlyZWN0IHx8IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHNldEludGVybmFsUGFyYW0oXG4gICAgICBwYXltZW50UmVxdWVzdCxcbiAgICAgICdkaXNhYmxlTmF0aXZlJyxcbiAgICAgIC8vIFRoZSBwYWdlIGNhbm5vdCBiZSBpZnJhbWVkIGF0IHRoaXMgdGltZS4gTWF5IGJlIHJlbGF4ZWQgbGF0ZXJcbiAgICAgIC8vIGZvciBBTVAgYW5kIHNpbWlsYXIgY29udGV4dHMuXG4gICAgICB0aGlzLndpbl8gIT0gdGhpcy50b3BfKClcbiAgICApO1xuICAgIGxldCByZXNvbHZlciA9IG51bGw7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiAocmVzb2x2ZXIgPSByZXNvbHZlKSk7XG4gICAgLy8gTm90aWNlIHRoYXQgdGhlIGNhbGxiYWNrIGZvciB2ZXJpZmllciBtYXkgZXhlY3V0ZSBhc3luY2hyb25vdXNseS5cbiAgICB0aGlzLnJlZGlyZWN0VmVyaWZpZXJIZWxwZXJfLnVzZVZlcmlmaWVyKCh2ZXJpZmllcikgPT4ge1xuICAgICAgaWYgKHZlcmlmaWVyKSB7XG4gICAgICAgIHNldEludGVybmFsUGFyYW0ocGF5bWVudFJlcXVlc3QsICdyZWRpcmVjdFZlcmlmaWVyJywgdmVyaWZpZXIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuZm9yY2VSZWRpcmVjdCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLmNsaWVudF87XG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5nZXRSZWFkeVByb21pc2UoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmFuYWx5dGljc18uZ2V0TG9nZ2luZ1Byb21pc2UoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNsaWVudC5sb2FkUGF5bWVudERhdGEocGF5bWVudFJlcXVlc3QpO1xuICAgICAgICAgICAgcmVzb2x2ZXIodHJ1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jbGllbnRfLmxvYWRQYXltZW50RGF0YShwYXltZW50UmVxdWVzdCk7XG4gICAgICAgIHJlc29sdmVyKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIVByb21pc2U8IVBheW1lbnREYXRhPil9IGNhbGxiYWNrXG4gICAqL1xuICBvblJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5yZXNwb25zZUNhbGxiYWNrXyA9IGNhbGxiYWNrO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZV87XG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgY2FsbGJhY2sodGhpcy5jb252ZXJ0UmVzcG9uc2VfKHJlc3BvbnNlLCB0aGlzLnJlcXVlc3RfKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlPCFQYXltZW50RGF0YT59IHJlc3BvbnNlUHJvbWlzZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlUmVzcG9uc2VfKHJlc3BvbnNlUHJvbWlzZSkge1xuICAgIHRoaXMucmVzcG9uc2VfID0gcmVzcG9uc2VQcm9taXNlO1xuICAgIGlmICh0aGlzLnJlc3BvbnNlQ2FsbGJhY2tfKSB7XG4gICAgICB0aGlzLnJlc3BvbnNlQ2FsbGJhY2tfKFxuICAgICAgICB0aGlzLmNvbnZlcnRSZXNwb25zZV8odGhpcy5yZXNwb25zZV8sIHRoaXMucmVxdWVzdF8pXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlPCFQYXltZW50RGF0YT59IHJlc3BvbnNlXG4gICAqIEBwYXJhbSB7P1BheW1lbnREYXRhUmVxdWVzdH0gcmVxdWVzdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhUGF5bWVudERhdGE+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29udmVydFJlc3BvbnNlXyhyZXNwb25zZSwgcmVxdWVzdCkge1xuICAgIHJldHVybiByZXNwb25zZVxuICAgICAgLnRoZW4oXG4gICAgICAgIC8vIFRlbXBvcmFyeSBjbGllbnQgc2lkZSBzb2x1dGlvbiB0byByZW1lbWJlciB0aGVcbiAgICAgICAgLy8gaW5wdXQgcGFyYW1zLiBUT0RPOiBSZW1vdmUgdGhpcyBvbmNlIHNlcnZlci1zaWRlXG4gICAgICAgIC8vIGlucHV0IHByZXNlcnZhdGlvbiBpcyBkb25lIGFuZCBpcyBwYXJ0IG9mIHRoZSByZXNwb25zZS5cbiAgICAgICAgKHJlcykgPT4ge1xuICAgICAgICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICByZXNbJ3BheW1lbnRSZXF1ZXN0J10gPSByZXF1ZXN0O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHJlYXNvbiA9PSAnb2JqZWN0JyAmJiByZWFzb25bJ3N0YXR1c0NvZGUnXSA9PSAnQ0FOQ0VMRUQnKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVDYW5jZWxFcnJvcih0aGlzLndpbl8pO1xuICAgICAgICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICBlcnJvclsncHJvZHVjdFR5cGUnXSA9IC8qKiBAdHlwZSB7IVBheW1lbnREYXRhUmVxdWVzdH0gKi8gKHJlcXVlc3QpW1xuICAgICAgICAgICAgICAnaSdcbiAgICAgICAgICAgIF1bJ3Byb2R1Y3RUeXBlJ107XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yWydwcm9kdWN0VHlwZSddID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFXaW5kb3d9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0b3BfKCkge1xuICAgIC8vIE9ubHkgZXhpc3RzIGZvciB0ZXN0aW5nIHNpbmNlIGl0J3Mgbm90IHBvc3NpYmxlIHRvIG92ZXJyaWRlIGB3aW5kb3cudG9wYC5cbiAgICByZXR1cm4gdGhpcy53aW5fLnRvcDtcbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGtleTogc3RyaW5nLFxuICogICB2ZXJpZmllcjogc3RyaW5nLFxuICogfX1cbiAqL1xubGV0IFJlZGlyZWN0VmVyaWZpZXJQYWlyRGVmO1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGdlbmVyYXRlcyBrZXkvdmVyaWZpZXIgcGFpciBmb3IgdGhlIHJlZGlyZWN0IG1vZGUuIFdoZW4gdGhlXG4gKiByZWRpcmVjdCBtb2RlIGlzIHVzZWQsIHRoZSBlbmNyeXB0ZWQgcGF5bG9hZCBpcyByZXR1cm5lZCB2aWEgbml2aWdhdGlvbiBVUkwuXG4gKiBUaGlzIHBheWxvYWQgbmVlZCB0byBiZSBkZWNyeXB0ZWQgYW5kIHRvIGF2b2lkIHNlc3Npb24gZml4YXRpb24gYXR0YWNrcywgYVxuICogdmVyaWZpZXIgaGFzIHRvIGJlIHVzZWQuIFRoaXMgcmVkaXJlY3QgdmVyaWZpZXIgaXMgbm90IHRoZSBvbmx5IHNlc3Npb25cbiAqIHZlcmlmaWVyIGluIHVzZTogd2UgYWxzbyB1c2UgR0FJQS4gSG93ZXZlciwgd2UgaGF2ZSB0byBmYWxsYmFjayB0byB0aGlzXG4gKiB2ZXJpZmllciB3aGVuIEdBSUEgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWRpcmVjdFZlcmlmaWVySGVscGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnBhaXJDcmVhdGVkXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UmVkaXJlY3RWZXJpZmllclBhaXJEZWZ9ICovXG4gICAgdGhpcy5wYWlyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPD9SZWRpcmVjdFZlcmlmaWVyUGFpckRlZj59ICovXG4gICAgdGhpcy5wYWlyUHJvbWlzZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvIGF2b2lkIHBvcHVwIGJsb2NrZXJzLCB0aGUga2V5L3ZlcmlmaWVyIHBhaXIgaXMgY3JlYXRlZCBhcyBzb29uIGFzXG4gICAqIHBvc3NpYmxlLlxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZX1cbiAgICovXG4gIHByZXBhcmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3JDcmVhdGVQYWlyXygoKSA9PiB7fSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpdGggdGhlIGdlbmVyYXRlZCByZWRpcmVjdCB2ZXJpZmllci4gVGhpc1xuICAgKiBBUEkgaXMgc3luYy9hc3luYywgd2hpY2ggaXMgYSBiaWcgYW50aS1wYXR0ZXJuLiBIb3dldmVyLCBpdCdzIG5lY2Vzc2FyeVxuICAgKiB0byByZWR1Y2UgdGhlIHJpc2sgb2YgcG9wdXAgYmxvY2tlcnMuIElmIHRoZSB2ZXJpZmllciBpcyBhbHJlYWR5IGF2YWlsYWJsZVxuICAgKiAoc2VlIGBwcmVwYXJlYCBtZXRob2QpLCB0aGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgaW1tZWRpYXRlbHkgYW5kIHRodXNcbiAgICogaW4gdGhlIHNhbWUgZXZlbnQgbG9vcCBhcyB0aGUgdXNlciBhY3Rpb24uXG4gICAqXG4gICAqIFRoZSByZXR1cm4gdmVyaWZpZXIgY291bGQgYmUgYG51bGxgLiBUaGlzIGNvdWxkIG1lYW4gZWl0aGVyIHRoYXQgaXRzXG4gICAqIGdlbmVyYXRpb24gZmFpbGVkLCBvciBpZiB0aGUgcGxhdGZvcm0gZG9lc24ndCBzdXBwb3J0IG5lY2Vzc2FyeSBBUElzLCBzdWNoXG4gICAqIGFzIFdlYiBDcnlwdG8uIFRoZSByZWRpcmVjdCBjYW4gc3RpbGwgcHJvY2VlZCBhbmQgdHJ5IHRvIGZhbGxiYWNrIG9uIEdBSUFcbiAgICogYXMgYSByZWRpcmVjdCB2ZXJpZmllci4gVGhlIHNldCBvZiBwbGF0Zm9ybXMgd2hlcmUgR0FJQSBpcyBub3QgYXZhaWxhYmxlXG4gICAqIGFuZCB0aGUgcmVkaXJlY3QgdmVyaWZpZXIgY2Fubm90IGJlIGNyZWF0ZWQgaXMgbmVnbGlnaWJsZS5cbiAgICpcbiAgICogVGhlIGtleSBjb3JyZXNwb25kaW5nIHRvIHRoZSByZXR1cm5lZCB2ZXJpZmllciBpcyBzdG9yZWQgaW4gdGhlIHNlc3Npb25cbiAgICogc3RvcmFnZSBhbmQgY2FuIGJlIGxhdGVyIHJlc3RvcmVkIHVzaW5nIGByZXN0b3JlS2V5YCBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP3N0cmluZyl9IGNhbGxiYWNrXG4gICAqL1xuICB1c2VWZXJpZmllcihjYWxsYmFjaykge1xuICAgIHRoaXMuZ2V0T3JDcmVhdGVQYWlyXygocGFpcikgPT4ge1xuICAgICAgaWYgKHBhaXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLndpbl8ubG9jYWxTdG9yYWdlLnNldEl0ZW0oUkVESVJFQ1RfU1RPUkFHRV9LRVksIHBhaXIua2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElmIHN0b3JhZ2UgaGFzIGZhaWxlZCwgdGhlcmUncyBubyBwb2ludCBpbiB1c2luZyB0aGUgdmVyaWZlci5cbiAgICAgICAgICAvLyBIb3dldmVyLCB0aGVyZSBhcmUgb3RoZXIgd2F5cyB0byByZWNvdmVyIHRoZSByZWRpcmVjdCwgc28gaXQnc1xuICAgICAgICAgIC8vIG5vdCBuZWNlc3NhcmlseSBhIGZhdGFsIGNvbmRpdGlvbi5cbiAgICAgICAgICBwYWlyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FsbGJhY2soKHBhaXIgJiYgcGFpci52ZXJpZmllcikgfHwgbnVsbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZXMgdGhlIHJlZGlyZWN0IGtleSBmcm9tIHRoZSBzZXNzaW9uIHN0b3JhZ2UuIFRoZSBrZXkgbWF5IGJlIG51bGwuXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICByZXN0b3JlS2V5KCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAodGhpcy53aW5fLmxvY2FsU3RvcmFnZSAmJlxuICAgICAgICAgIHRoaXMud2luXy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRURJUkVDVF9TVE9SQUdFX0tFWSkpIHx8XG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP1JlZGlyZWN0VmVyaWZpZXJQYWlyRGVmKX0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7P1Byb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRPckNyZWF0ZVBhaXJfKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jcmVhdGVQYWlyXygpO1xuICAgIGlmICh0aGlzLnBhaXJDcmVhdGVkXykge1xuICAgICAgLy8gQWxyZWFkeSBjcmVhdGVkLlxuICAgICAgY2FsbGJhY2sodGhpcy5wYWlyXyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBhaXJQcm9taXNlXykge1xuICAgICAgLy8gT3RoZXJ3aXNlIHdhaXQgZm9yIGl0IHRvIGJlIGNyZWF0ZWQuXG4gICAgICB0aGlzLnBhaXJQcm9taXNlXy50aGVuKChwYWlyKSA9PiBjYWxsYmFjayhwYWlyKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBhaXJQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlUGFpcl8oKSB7XG4gICAgLy8gRWl0aGVyIGFscmVhZHkgY3JlYXRlZCBvciBhbHJlYWR5IHN0YXJ0ZWQuXG4gICAgaWYgKHRoaXMucGFpckNyZWF0ZWRfIHx8IHRoaXMucGFpclByb21pc2VfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdGhhdCB0aGUgcGxhdGZvcm0gY2FuIGZ1bGx5IHN1cHBvcnQgdmVyaWZpY2F0aW9uLiBUaGF0IG1lYW5zXG4gICAgLy8gdGhhdCBpdCdzIGV4cGVjdGVkIHRvIGltcGxlbWVudCB0aGUgZm9sbG93aW5nIEFQSXM6XG4gICAgLy8gYS4gTG9jYWwgc3RvcmFnZSAobG9jYWxTdG9yYWdlKTtcbiAgICAvLyBiLiBXZWJDcnlwdG8gKGNyeXB0by5zdWJ0bGUpO1xuICAgIC8vIGMuIENyeXB0byByYW5kb20gKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpO1xuICAgIC8vIGQuIFNIQTI4NCAoY3J5cHRvLnN1YnRsZS5kaWdlc3QpLlxuICAgIGxldCBzdXBwb3J0c0xvY2FsU3RvcmFnZTtcbiAgICB0cnkge1xuICAgICAgc3VwcG9ydHNMb2NhbFN0b3JhZ2UgPSAhIXRoaXMud2luXy5sb2NhbFN0b3JhZ2U7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gTm90ZTogVGhpcyBjYW4gaGFwcGVuIHdoZW4gY29va2llcyBhcmUgZGlzYWJsZWQuXG4gICAgICBzdXBwb3J0c0xvY2FsU3RvcmFnZSA9IGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBjcnlwdG8gPSB0aGlzLndpbl8uY3J5cHRvO1xuICAgIGlmIChcbiAgICAgIHN1cHBvcnRzTG9jYWxTdG9yYWdlICYmXG4gICAgICBjcnlwdG8gJiZcbiAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiZcbiAgICAgIGNyeXB0by5zdWJ0bGUgJiZcbiAgICAgIGNyeXB0by5zdWJ0bGUuZGlnZXN0XG4gICAgKSB7XG4gICAgICB0aGlzLnBhaXJQcm9taXNlXyA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgLy8gMS4gVXNlIGNyeXB0byByYW5kb20gdG8gY3JlYXRlIGEgMTI4LWJpdCAoMTYgYnl0ZSkgcmVkaXJlY3Qga2V5LlxuICAgICAgICBjb25zdCBrZXlCeXRlcyA9IG5ldyBVaW50OEFycmF5KDE2KTtcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhrZXlCeXRlcyk7XG5cbiAgICAgICAgLy8gMi4gRW5jb2RlIGtleSBhcyBiYXNlNjQuXG4gICAgICAgIGNvbnN0IGtleSA9IGJ0b2EoYnl0ZXNUb1N0cmluZyhrZXlCeXRlcykpO1xuXG4gICAgICAgIC8vIDMuIENyZWF0ZSBhIGhhc2guXG4gICAgICAgIGNyeXB0by5zdWJ0bGUuZGlnZXN0KHtuYW1lOiAnU0hBLTM4NCd9LCBzdHJpbmdUb0J5dGVzKGtleSkpLnRoZW4oXG4gICAgICAgICAgKGJ1ZmZlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmVyaWZpZXIgPSBidG9hKFxuICAgICAgICAgICAgICBieXRlc1RvU3RyaW5nKFxuICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KC8qKiBAdHlwZSB7IUFycmF5QnVmZmVyfSAqLyAoYnVmZmVyKSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc29sdmUoe2tleSwgdmVyaWZpZXJ9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgLy8gSWdub3JlIGZhaWx1cmVzLiBBIGZhaWx1cmUgdG8gY3JlYXRlIGEgcmVkaXJlY3QgdmVyaWZpZXIgaXMgb2Z0ZW5cbiAgICAgICAgICAvLyByZWNvdmVyYWJsZS5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHBhaXIpID0+IHtcbiAgICAgICAgICB0aGlzLnBhaXJDcmVhdGVkXyA9IHRydWU7XG4gICAgICAgICAgdGhpcy5wYWlyXyA9IHBhaXI7XG4gICAgICAgICAgcmV0dXJuIHBhaXI7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb3Qgc3VwcG9ydGVkLlxuICAgICAgdGhpcy5wYWlyQ3JlYXRlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5wYWlyXyA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50UmVxdWVzdFxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHNldEludGVybmFsUGFyYW0ocGF5bWVudFJlcXVlc3QsIHBhcmFtLCB2YWx1ZSkge1xuICBwYXltZW50UmVxdWVzdFsnaSddID0gT2JqZWN0LmFzc2lnbihwYXltZW50UmVxdWVzdFsnaSddIHx8IHt9LCB7XG4gICAgW3BhcmFtXTogdmFsdWUsXG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKiBUaGUgRmxvdyBnb2VzIGxpa2UgdGhpczpcbiAqIGEuIFN0YXJ0IFBheW1lbnRzXG4gKiBiLiBDb21wbGV0ZSBQYXltZW50c1xuICogYy4gQ3JlYXRlIEFjY291bnRcbiAqIGQuIEFja25vd2xlZGdlIEFjY291bnRcbiAqXG4gKiBJbiBvdGhlciB3b3JkcywgRmxvdyA9IFBheW1lbnRzICsgQWNjb3VudCBDcmVhdGlvbi5cbiAqL1xuXG5pbXBvcnQge1xuICBBY2NvdW50Q3JlYXRpb25SZXF1ZXN0LFxuICBFbnRpdGxlbWVudHNSZXNwb25zZSxcbn0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge0FuYWx5dGljc0V2ZW50LCBFdmVudFBhcmFtc30gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHtKd3RIZWxwZXJ9IGZyb20gJy4uL3V0aWxzL2p3dCc7XG5pbXBvcnQge1xuICBQcm9kdWN0VHlwZSxcbiAgU3Vic2NyaXB0aW9uRmxvd3MsXG4gIFdpbmRvd09wZW5Nb2RlLFxufSBmcm9tICcuLi9hcGkvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQge1B1cmNoYXNlRGF0YSwgU3Vic2NyaWJlUmVzcG9uc2V9IGZyb20gJy4uL2FwaS9zdWJzY3JpYmUtcmVzcG9uc2UnO1xuaW1wb3J0IHtVc2VyRGF0YX0gZnJvbSAnLi4vYXBpL3VzZXItZGF0YSc7XG5pbXBvcnQge2ZlQXJncywgZmVVcmx9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtnZXRQcm9wZXJ0eUZyb21Kc29uU3RyaW5nLCBwYXJzZUpzb259IGZyb20gJy4uL3V0aWxzL2pzb24nO1xuaW1wb3J0IHtpc0NhbmNlbEVycm9yfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuXG4vKipcbiAqIFN0cmluZyB2YWx1ZXMgaW5wdXQgYnkgdGhlIHB1Ymxpc2hlciBhcmUgbWFwcGVkIHRvIHRoZSBudW1iZXIgdmFsdWVzLlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICovXG5leHBvcnQgY29uc3QgUmVwbGFjZVNrdVByb3JhdGlvbk1vZGVNYXBwaW5nID0ge1xuICAvLyBUaGUgcmVwbGFjZW1lbnQgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5LCBhbmQgdGhlIHJlbWFpbmluZyB0aW1lIHdpbGxcbiAgLy8gYmUgcHJvcmF0ZWQgYW5kIGNyZWRpdGVkIHRvIHRoZSB1c2VyLiBUaGlzIGlzIHRoZSBjdXJyZW50IGRlZmF1bHRcbiAgLy8gYmVoYXZpb3IuXG4gICdJTU1FRElBVEVfV0lUSF9USU1FX1BST1JBVElPTic6IDEsXG59O1xuXG5leHBvcnQgY29uc3QgUmVjdXJyZW5jZU1hcHBpbmcgPSB7XG4gICdBVVRPJzogMSxcbiAgJ09ORV9USU1FJzogMixcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICogQHBhcmFtIHs/c3RyaW5nPX0gc3Vic2NyaXB0aW9uRmxvd1xuICogQHJldHVybiB7IUV2ZW50UGFyYW1zfVxuICovXG5mdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhza3UsIHN1YnNjcmlwdGlvbkZsb3cgPSBudWxsKSB7XG4gIHJldHVybiBuZXcgRXZlbnRQYXJhbXMoWywgLCAsICwgc2t1LCAsICwgc3Vic2NyaXB0aW9uRmxvd10pO1xufVxuXG4vKipcbiAqIFRoZSBmbG93IHRvIGluaXRpYXRlIHBheW1lbnQgcHJvY2Vzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFBheVN0YXJ0RmxvdyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25SZXF1ZXN0fSBzdWJzY3JpcHRpb25SZXF1ZXN0XG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlByb2R1Y3RUeXBlfSBwcm9kdWN0VHlwZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgZGVwcyxcbiAgICBzdWJzY3JpcHRpb25SZXF1ZXN0LFxuICAgIHByb2R1Y3RUeXBlID0gUHJvZHVjdFR5cGUuU1VCU0NSSVBUSU9OXG4gICkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3BheS1jbGllbnQuUGF5Q2xpZW50fSAqL1xuICAgIHRoaXMucGF5Q2xpZW50XyA9IGRlcHMucGF5Q2xpZW50KCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ30gKi9cbiAgICB0aGlzLnBhZ2VDb25maWdfID0gZGVwcy5wYWdlQ29uZmlnKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25SZXF1ZXN0fSAqL1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdF8gPSBzdWJzY3JpcHRpb25SZXF1ZXN0O1xuXG4gICAgLyoqQHByaXZhdGUgQGNvbnN0IHshUHJvZHVjdFR5cGV9ICovXG4gICAgdGhpcy5wcm9kdWN0VHlwZV8gPSBwcm9kdWN0VHlwZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2FuYWx5dGljcy1zZXJ2aWNlLkFuYWx5dGljc1NlcnZpY2V9ICovXG4gICAgdGhpcy5hbmFseXRpY3NTZXJ2aWNlXyA9IGRlcHMuYW5hbHl0aWNzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vcnVudGltZS9jbGllbnQtZXZlbnQtbWFuYWdlci5DbGllbnRFdmVudE1hbmFnZXJ9ICovXG4gICAgdGhpcy5ldmVudE1hbmFnZXJfID0gZGVwcy5ldmVudE1hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9ydW50aW1lL2NsaWVudC1jb25maWctbWFuYWdlci5DbGllbnRDb25maWdNYW5hZ2VyfSAqL1xuICAgIHRoaXMuY2xpZW50Q29uZmlnTWFuYWdlcl8gPSBkZXBzLmNsaWVudENvbmZpZ01hbmFnZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHBheW1lbnRzIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgLy8gR2V0IHRoZSBwYXlTd2dWZXJzaW9uIGZvciBidXlmbG93LlxuICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmNsaWVudENvbmZpZ01hbmFnZXJfLmdldENsaWVudENvbmZpZygpO1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oKGNsaWVudENvbmZpZykgPT4ge1xuICAgICAgdGhpcy5zdGFydF8oY2xpZW50Q29uZmlnLnBheVN3Z1ZlcnNpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcGF5bWVudHMgZmxvdyBmb3IgdGhlIGdpdmVuIHZlcnNpb24uXG4gICAqIEBwYXJhbSB7IXN0cmluZz19IHBheVN3Z1ZlcnNpb25cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydF8ocGF5U3dnVmVyc2lvbikge1xuICAgIC8vIEFkZCB0aGUgJ3B1YmxpY2F0aW9uSWQnIGtleSB0byB0aGUgc3Vic2NyaXB0aW9uUmVxdWVzdF8gb2JqZWN0LlxuICAgIGNvbnN0IHN3Z1BheW1lbnRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0Xywge1xuICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLnBhZ2VDb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICB9KTtcblxuICAgIGlmIChwYXlTd2dWZXJzaW9uKSB7XG4gICAgICBzd2dQYXltZW50UmVxdWVzdFsnc3dnVmVyc2lvbiddID0gcGF5U3dnVmVyc2lvbjtcbiAgICB9XG5cbiAgICAvLyBNYXAgdGhlIHByb3JhdGlvbiBtb2RlIHRvIHRoZSBlbnVtIHZhbHVlIChpZiBwcm9yYXRpb24gZXhpc3RzKS5cbiAgICBjb25zdCBwcm9yYXRpb25Nb2RlID0gc3dnUGF5bWVudFJlcXVlc3RbJ3JlcGxhY2VTa3VQcm9yYXRpb25Nb2RlJ107XG4gICAgaWYgKHByb3JhdGlvbk1vZGUpIHtcbiAgICAgIHN3Z1BheW1lbnRSZXF1ZXN0WydyZXBsYWNlU2t1UHJvcmF0aW9uTW9kZSddID1cbiAgICAgICAgUmVwbGFjZVNrdVByb3JhdGlvbk1vZGVNYXBwaW5nW3Byb3JhdGlvbk1vZGVdO1xuICAgIH0gZWxzZSBpZiAoc3dnUGF5bWVudFJlcXVlc3RbJ29sZFNrdSddKSB7XG4gICAgICBzd2dQYXltZW50UmVxdWVzdFsncmVwbGFjZVNrdVByb3JhdGlvbk1vZGUnXSA9XG4gICAgICAgIFJlcGxhY2VTa3VQcm9yYXRpb25Nb2RlTWFwcGluZ1snSU1NRURJQVRFX1dJVEhfVElNRV9QUk9SQVRJT04nXTtcbiAgICB9XG4gICAgLy8gQXNzaWduIG9uZS10aW1lIHJlY3VycmVuY2UgZW51bSBpZiBhcHBsaWNhYmxlXG4gICAgaWYgKHN3Z1BheW1lbnRSZXF1ZXN0WydvbmVUaW1lJ10pIHtcbiAgICAgIHN3Z1BheW1lbnRSZXF1ZXN0WydwYXltZW50UmVjdXJyZW5jZSddID0gUmVjdXJyZW5jZU1hcHBpbmdbJ09ORV9USU1FJ107XG4gICAgICBkZWxldGUgc3dnUGF5bWVudFJlcXVlc3RbJ29uZVRpbWUnXTtcbiAgICB9XG5cbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIGNvbnN0IGZsb3cgPVxuICAgICAgdGhpcy5wcm9kdWN0VHlwZV8gPT0gUHJvZHVjdFR5cGUuVUlfQ09OVFJJQlVUSU9OXG4gICAgICAgID8gU3Vic2NyaXB0aW9uRmxvd3MuQ09OVFJJQlVURVxuICAgICAgICA6IFN1YnNjcmlwdGlvbkZsb3dzLlNVQlNDUklCRTtcblxuICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckZsb3dTdGFydGVkKGZsb3csIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdF8pO1xuICAgIGlmIChzd2dQYXltZW50UmVxdWVzdFsnb2xkU2t1J10pIHtcbiAgICAgIHRoaXMuYW5hbHl0aWNzU2VydmljZV8uc2V0U2t1KHN3Z1BheW1lbnRSZXF1ZXN0WydvbGRTa3UnXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgIEFuYWx5dGljc0V2ZW50LkFDVElPTl9QQVlNRU5UX0ZMT1dfU1RBUlRFRCxcbiAgICAgIHRydWUsXG4gICAgICBnZXRFdmVudFBhcmFtcyhzd2dQYXltZW50UmVxdWVzdFsnc2t1SWQnXSlcbiAgICApO1xuICAgIFBheUNvbXBsZXRlRmxvdy53YWl0aW5nRm9yUGF5Q2xpZW50XyA9IHRydWU7XG4gICAgdGhpcy5wYXlDbGllbnRfLnN0YXJ0KFxuICAgICAgLyoqIEB0eXBlIHshUGF5bWVudERhdGFSZXF1ZXN0fSAqL1xuICAgICAgKHtcbiAgICAgICAgJ2FwaVZlcnNpb24nOiAxLFxuICAgICAgICAnYWxsb3dlZFBheW1lbnRNZXRob2RzJzogWydDQVJEJ10sXG4gICAgICAgICdlbnZpcm9ubWVudCc6ICckcGF5RW52aXJvbm1lbnQkJyxcbiAgICAgICAgJ3BsYXlFbnZpcm9ubWVudCc6ICckcGxheUVudmlyb25tZW50JCcsXG4gICAgICAgICdzd2cnOiBzd2dQYXltZW50UmVxdWVzdCxcbiAgICAgICAgJ2knOiB7XG4gICAgICAgICAgJ3N0YXJ0VGltZU1zJzogRGF0ZS5ub3coKSxcbiAgICAgICAgICAncHJvZHVjdFR5cGUnOiB0aGlzLnByb2R1Y3RUeXBlXyxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAge1xuICAgICAgICBmb3JjZVJlZGlyZWN0OlxuICAgICAgICAgIHRoaXMuZGVwc18uY29uZmlnKCkud2luZG93T3Blbk1vZGUgPT0gV2luZG93T3Blbk1vZGUuUkVESVJFQ1QsXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgZmxvdyBmb3Igc3VjY2Vzc2Z1bCBwYXltZW50cyBjb21wbGV0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgUGF5Q29tcGxldGVGbG93IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBzdGF0aWMgY29uZmlndXJlUGVuZGluZyhkZXBzKSB7XG4gICAgLyoqIEBjb25zdCBAdHlwZSB7Li9jbGllbnQtZXZlbnQtbWFuYWdlci5DbGllbnRFdmVudE1hbmFnZXJ9ICovXG4gICAgY29uc3QgZXZlbnRNYW5hZ2VyID0gZGVwcy5ldmVudE1hbmFnZXIoKTtcblxuICAgIGRlcHMucGF5Q2xpZW50KCkub25SZXNwb25zZSgocGF5UHJvbWlzZSkgPT4ge1xuICAgICAgZGVwcy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgICBjb25zdCBmbG93ID0gbmV3IFBheUNvbXBsZXRlRmxvdyhkZXBzKTtcbiAgICAgIGNvbnN0IHByb21pc2UgPSB2YWxpZGF0ZVBheVJlc3BvbnNlKFxuICAgICAgICBkZXBzLFxuICAgICAgICBwYXlQcm9taXNlLFxuICAgICAgICBmbG93LmNvbXBsZXRlLmJpbmQoZmxvdylcbiAgICAgICk7XG4gICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJQYXltZW50UmVzcG9uc2UocHJvbWlzZSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKFxuICAgICAgICAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb25zdCBza3UgPSBwYXJzZVNrdUZyb21QdXJjaGFzZURhdGFTYWZlKHJlc3BvbnNlLnB1cmNoYXNlRGF0YSk7XG4gICAgICAgICAgZGVwcy5hbmFseXRpY3MoKS5zZXRTa3Uoc2t1IHx8ICcnKTtcbiAgICAgICAgICBldmVudE1hbmFnZXIubG9nU3dnRXZlbnQoXG4gICAgICAgICAgICBBbmFseXRpY3NFdmVudC5BQ1RJT05fUEFZTUVOVF9DT01QTEVURSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICBnZXRFdmVudFBhcmFtcyhcbiAgICAgICAgICAgICAgc2t1IHx8ICcnLFxuICAgICAgICAgICAgICByZXNwb25zZS5wcm9kdWN0VHlwZSA9PSBQcm9kdWN0VHlwZS5VSV9DT05UUklCVVRJT05cbiAgICAgICAgICAgICAgICA/IFN1YnNjcmlwdGlvbkZsb3dzLkNPTlRSSUJVVEVcbiAgICAgICAgICAgICAgICA6IFN1YnNjcmlwdGlvbkZsb3dzLlNVQlNDUklCRVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgICAgZmxvdy5zdGFydChyZXNwb25zZSk7XG4gICAgICAgIH0sXG4gICAgICAgIChyZWFzb24pID0+IHtcbiAgICAgICAgICBpZiAoaXNDYW5jZWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0VHlwZSA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHJlYXNvbilbJ3Byb2R1Y3RUeXBlJ107XG4gICAgICAgICAgICBjb25zdCBmbG93ID1cbiAgICAgICAgICAgICAgcHJvZHVjdFR5cGUgPT0gUHJvZHVjdFR5cGUuVUlfQ09OVFJJQlVUSU9OXG4gICAgICAgICAgICAgICAgPyBTdWJzY3JpcHRpb25GbG93cy5DT05UUklCVVRFXG4gICAgICAgICAgICAgICAgOiBTdWJzY3JpcHRpb25GbG93cy5TVUJTQ1JJQkU7XG4gICAgICAgICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93Q2FuY2VsZWQoZmxvdyk7XG4gICAgICAgICAgICBkZXBzXG4gICAgICAgICAgICAgIC5ldmVudE1hbmFnZXIoKVxuICAgICAgICAgICAgICAubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuQUNUSU9OX1VTRVJfQ0FOQ0VMRURfUEFZRkxPVywgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlcHNcbiAgICAgICAgICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAgICAgICAgIC5sb2dTd2dFdmVudChBbmFseXRpY3NFdmVudC5FVkVOVF9QQVlNRU5UX0ZBSUxFRCwgZmFsc2UpO1xuICAgICAgICAgICAgZGVwcy5qc2Vycm9yKCkuZXJyb3IoJ1BheSBmYWlsZWQnLCByZWFzb24pO1xuICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8IUFjdGl2aXR5SWZyYW1lVmlldz59ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMucmVhZHlQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vcnVudGltZS9hbmFseXRpY3Mtc2VydmljZS5BbmFseXRpY3NTZXJ2aWNlfSAqL1xuICAgIHRoaXMuYW5hbHl0aWNzU2VydmljZV8gPSBkZXBzLmFuYWx5dGljcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL3J1bnRpbWUvY2xpZW50LWV2ZW50LW1hbmFnZXIuQ2xpZW50RXZlbnRNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyXyA9IGRlcHMuZXZlbnRNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vcnVudGltZS9jbGllbnQtY29uZmlnLW1hbmFnZXIuQ2xpZW50Q29uZmlnTWFuYWdlcn0gKi9cbiAgICB0aGlzLmNsaWVudENvbmZpZ01hbmFnZXJfID0gZGVwcy5jbGllbnRDb25maWdNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5za3VfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHBheW1lbnRzIGNvbXBsZXRpb24gZmxvdy5cbiAgICogQHBhcmFtIHt7XG4gICAqICAgcHJvZHVjdFR5cGU6IHN0cmluZyxcbiAgICogICBvbGRTa3U6ID9zdHJpbmcsXG4gICAqICAgcGF5bWVudFJlY3VycmVuY2U6ID9udW1iZXIsXG4gICAqIH19IHJlc3BvbnNlXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQocmVzcG9uc2UpIHtcbiAgICB0aGlzLnNrdV8gPSBwYXJzZVNrdUZyb21QdXJjaGFzZURhdGFTYWZlKHJlc3BvbnNlLnB1cmNoYXNlRGF0YSk7XG4gICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KFxuICAgICAgQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9BQ0NPVU5UX0NIQU5HRUQsXG4gICAgICB0cnVlLFxuICAgICAgZ2V0RXZlbnRQYXJhbXModGhpcy5za3VfIHx8ICcnKVxuICAgICk7XG4gICAgdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkucmVzZXQodHJ1ZSk7XG4gICAgLy8gVE9ETyhkaWFuYWppbmcpOiBmdXR1cmUtcHJvb2YgaXNPbmVUaW1lIGZsYWdcbiAgICBjb25zdCBhcmdzID0ge1xuICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAncHJvZHVjdFR5cGUnOiByZXNwb25zZVsncHJvZHVjdFR5cGUnXSxcbiAgICAgICdpc1N1YnNjcmlwdGlvblVwZGF0ZSc6ICEhcmVzcG9uc2VbJ29sZFNrdSddLFxuICAgICAgJ2lzT25lVGltZSc6ICEhcmVzcG9uc2VbJ3BheW1lbnRSZWN1cnJlbmNlJ10sXG4gICAgfTtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbywgIzQwMCk6IGNsZWFudXAgb25jZSBlbnRpdGxlbWVudHMgaXMgbGF1bmNoZWQgZXZlcnl3aGVyZS5cbiAgICBpZiAocmVzcG9uc2UudXNlckRhdGEgJiYgcmVzcG9uc2UuZW50aXRsZW1lbnRzKSB7XG4gICAgICBhcmdzWydpZFRva2VuJ10gPSByZXNwb25zZS51c2VyRGF0YS5pZFRva2VuO1xuICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAuZW50aXRsZW1lbnRzTWFuYWdlcigpXG4gICAgICAgIC5wdXNoTmV4dEVudGl0bGVtZW50cyhyZXNwb25zZS5lbnRpdGxlbWVudHMucmF3KTtcbiAgICAgIC8vIFBlcnNpc3Qgc3dnVXNlclRva2VuIGluIGxvY2FsIHN0b3JhZ2VcbiAgICAgIGlmIChyZXNwb25zZS5zd2dVc2VyVG9rZW4pIHtcbiAgICAgICAgdGhpcy5kZXBzX1xuICAgICAgICAgIC5zdG9yYWdlKClcbiAgICAgICAgICAuc2V0KENvbnN0YW50cy5VU0VSX1RPS0VOLCByZXNwb25zZS5zd2dVc2VyVG9rZW4sIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhcmdzWydsb2dpbkhpbnQnXSA9IHJlc3BvbnNlLnVzZXJEYXRhICYmIHJlc3BvbnNlLnVzZXJEYXRhLmVtYWlsO1xuICAgIH1cbiAgICByZXR1cm4gKHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3UHJvbWlzZV8gPSB0aGlzLmNsaWVudENvbmZpZ01hbmFnZXJfXG4gICAgICAuZ2V0Q2xpZW50Q29uZmlnKClcbiAgICAgIC50aGVuKChjbGllbnRDb25maWcpID0+IHtcbiAgICAgICAgYXJnc1sndXNlVXBkYXRlZENvbmZpcm1VaSddID0gY2xpZW50Q29uZmlnLnVzZVVwZGF0ZWRPZmZlckZsb3dzO1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXyxcbiAgICAgICAgICBmZVVybCgnL3BheWNvbmZpcm1pZnJhbWUnKSxcbiAgICAgICAgICBmZUFyZ3MoYXJncyksXG4gICAgICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChhY3Rpdml0eUlmcmFtZVZpZXcpID0+IHtcbiAgICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3Lm9uKFxuICAgICAgICAgIEVudGl0bGVtZW50c1Jlc3BvbnNlLFxuICAgICAgICAgIHRoaXMuaGFuZGxlRW50aXRsZW1lbnRzUmVzcG9uc2VfLmJpbmQodGhpcylcbiAgICAgICAgKTtcblxuICAgICAgICBhY3Rpdml0eUlmcmFtZVZpZXcuYWNjZXB0UmVzdWx0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8gVGhlIGZsb3cgaXMgY29tcGxldGUuXG4gICAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcoYWN0aXZpdHlJZnJhbWVWaWV3KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZWFkeVByb21pc2VfID0gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyhhY3Rpdml0eUlmcmFtZVZpZXcpO1xuICAgICAgICByZXR1cm4gYWN0aXZpdHlJZnJhbWVWaWV3O1xuICAgICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVudGl0bGVtZW50c1Jlc3BvbnNlfSByZXNwb25zZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlRW50aXRsZW1lbnRzUmVzcG9uc2VfKHJlc3BvbnNlKSB7XG4gICAgY29uc3Qgand0ID0gcmVzcG9uc2UuZ2V0Snd0KCk7XG4gICAgaWYgKGp3dCkge1xuICAgICAgdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkucHVzaE5leHRFbnRpdGxlbWVudHMoand0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjb21wbGV0ZSgpIHtcbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8ubG9nU3dnRXZlbnQoXG4gICAgICBBbmFseXRpY3NFdmVudC5BQ1RJT05fQUNDT1VOVF9DUkVBVEVELFxuICAgICAgdHJ1ZSxcbiAgICAgIGdldEV2ZW50UGFyYW1zKHRoaXMuc2t1XyB8fCAnJylcbiAgICApO1xuICAgIHRoaXMuZGVwc18uZW50aXRsZW1lbnRzTWFuYWdlcigpLnVuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3UHJvbWlzZV8sXG4gICAgICB0aGlzLnJlYWR5UHJvbWlzZV8sXG4gICAgXSkudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICBjb25zdCBhY3Rpdml0eUlmcmFtZVZpZXcgPSB2YWx1ZXNbMF07XG4gICAgICBjb25zdCBhY2NvdW50Q29tcGxldGlvblJlcXVlc3QgPSBuZXcgQWNjb3VudENyZWF0aW9uUmVxdWVzdCgpO1xuICAgICAgYWNjb3VudENvbXBsZXRpb25SZXF1ZXN0LnNldENvbXBsZXRlKHRydWUpO1xuICAgICAgYWN0aXZpdHlJZnJhbWVWaWV3LmV4ZWN1dGUoYWNjb3VudENvbXBsZXRpb25SZXF1ZXN0KTtcbiAgICAgIHJldHVybiBhY3Rpdml0eUlmcmFtZVZpZXdcbiAgICAgICAgLmFjY2VwdFJlc3VsdCgpXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9ycy5cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyXy5sb2dTd2dFdmVudChcbiAgICAgICAgICAgIEFuYWx5dGljc0V2ZW50LkFDVElPTl9BQ0NPVU5UX0FDS05PV0xFREdFRCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICBnZXRFdmVudFBhcmFtcyh0aGlzLnNrdV8gfHwgJycpXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmRlcHNfLmVudGl0bGVtZW50c01hbmFnZXIoKS5zZXRUb2FzdFNob3duKHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG5QYXlDb21wbGV0ZUZsb3cud2FpdGluZ0ZvclBheUNsaWVudF8gPSBmYWxzZTtcblxuLyoqXG4gKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICogQHBhcmFtIHshUHJvbWlzZTwhT2JqZWN0Pn0gcGF5UHJvbWlzZVxuICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjb21wbGV0ZUhhbmRsZXJcbiAqIEByZXR1cm4geyFQcm9taXNlPCFTdWJzY3JpYmVSZXNwb25zZT59XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUGF5UmVzcG9uc2UoZGVwcywgcGF5UHJvbWlzZSwgY29tcGxldGVIYW5kbGVyKSB7XG4gIGNvbnN0IHdhc1JlZGlyZWN0ID0gIVBheUNvbXBsZXRlRmxvdy53YWl0aW5nRm9yUGF5Q2xpZW50XztcbiAgUGF5Q29tcGxldGVGbG93LndhaXRpbmdGb3JQYXlDbGllbnRfID0gZmFsc2U7XG4gIHJldHVybiBwYXlQcm9taXNlLnRoZW4oKGRhdGEpID0+IHtcbiAgICAvLyAxKSBXZSBsb2cgYWdhaW5zdCBhIHJhbmRvbSBUWCBJRCB3aGljaCBpcyBob3cgd2UgdHJhY2sgYSBzcGVjaWZpYyB1c2VyXG4gICAgLy8gICAgYW5vbnltb3VzbHkuXG4gICAgLy8gMikgSWYgdGhlcmUgd2FzIGEgcmVkaXJlY3QgdG8gZ1BheSwgd2UgbWF5IGhhdmUgbG9zdCBvdXIgc3RvcmVkIFRYIElELlxuICAgIC8vIDMpIFBheSBzZXJ2aWNlIGlzIHN1cHBvc2VkIHRvIGdpdmUgdXMgdGhlIFRYIElEIGl0IGxvZ2dlZCBhZ2FpbnN0LlxuICAgIGxldCBldmVudFR5cGUgPSBBbmFseXRpY3NFdmVudC5VTktOT1dOO1xuICAgIGxldCBldmVudFBhcmFtcyA9IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8ICFkYXRhWydnb29nbGVUcmFuc2FjdGlvbklkJ10pIHtcbiAgICAgIC8vIElmIGdQYXkgZG9lc24ndCBnaXZlIHVzIGEgVFggSUQgaXQgbWVhbnMgdGhhdCBzb21ldGhpbmcgbWF5XG4gICAgICAvLyBiZSB3cm9uZy4gIElmIHdlIHByZXZpb3VzbHkgbG9nZ2VkIHRoZW4gd2UgYXJlIGF0IGxlYXN0IGNvbnRpbnVpbmcgdG9cbiAgICAgIC8vIGxvZyBhZ2FpbnN0IHRoZSBzYW1lIFRYIElELiAgSWYgd2UgZGlkbid0IHByZXZpb3VzbHkgbG9nIHRoZW4gd2UgaGF2ZVxuICAgICAgLy8gbG9zdCBhbGwgY29ubmVjdGlvbiB0byB0aGUgZXZlbnRzIHRoYXQgcHJlY2VkZWQgdGhlIHBheW1lbnQgZXZlbnQgYW5kXG4gICAgICAvLyB3ZSBhdCBsZWFzdCB3YW50IHRvIGtub3cgd2h5IHRoYXQgZGF0YSB3YXMgbG9zdC5cbiAgICAgIGV2ZW50UGFyYW1zID0gbmV3IEV2ZW50UGFyYW1zKCk7XG4gICAgICBldmVudFBhcmFtcy5zZXRIYWRMb2dnZWQoIXdhc1JlZGlyZWN0KTtcbiAgICAgIGV2ZW50VHlwZSA9IEFuYWx5dGljc0V2ZW50LkVWRU5UX0dQQVlfTk9fVFhfSUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG9sZFR4SWQgPSBkZXBzLmFuYWx5dGljcygpLmdldFRyYW5zYWN0aW9uSWQoKTtcbiAgICAgIGNvbnN0IG5ld1R4SWQgPSBkYXRhWydnb29nbGVUcmFuc2FjdGlvbklkJ107XG5cbiAgICAgIGlmICh3YXNSZWRpcmVjdCkge1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBleHBlY3RlZCBjYXNlIGZvciBmdWxsIHJlZGlyZWN0cy4gIEl0IG1heSBiZSBoYXBwZW5pbmdcbiAgICAgICAgLy8gdW5leHBlY3RlZGx5IGF0IG90aGVyIHRpbWVzIHRvbyB0aG91Z2ggYW5kIHdlIHdhbnQgdG8gYmUgYXdhcmUgb2ZcbiAgICAgICAgLy8gaXQgaWYgaXQgZG9lcy5cbiAgICAgICAgZGVwcy5hbmFseXRpY3MoKS5zZXRUcmFuc2FjdGlvbklkKG5ld1R4SWQpO1xuICAgICAgICBldmVudFR5cGUgPSBBbmFseXRpY3NFdmVudC5FVkVOVF9HUEFZX0NBTk5PVF9DT05GSVJNX1RYX0lEO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9sZFR4SWQgPT09IG5ld1R4SWQpIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBleHBlY3RlZCBjYXNlIGZvciBub24tcmVkaXJlY3QgcGF5IGV2ZW50c1xuICAgICAgICAgIGV2ZW50VHlwZSA9IEFuYWx5dGljc0V2ZW50LkVWRU5UX0NPTkZJUk1fVFhfSUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyBhbiB1bmV4cGVjdGVkIGNhc2U6IGdQYXkgcmVqZWN0ZWQgb3VyIFRYIElEIGFuZCBjcmVhdGVkXG4gICAgICAgICAgLy8gaXRzIG93bi4gIExvZyB0aGUgZ1BheSBUWCBJRCBidXQga2VlcCBvdXIgbG9nZ2luZyBjb25zaXN0ZW50LlxuICAgICAgICAgIGV2ZW50UGFyYW1zID0gbmV3IEV2ZW50UGFyYW1zKCk7XG4gICAgICAgICAgZXZlbnRQYXJhbXMuc2V0R3BheVRyYW5zYWN0aW9uSWQobmV3VHhJZCk7XG4gICAgICAgICAgZXZlbnRUeXBlID0gQW5hbHl0aWNzRXZlbnQuRVZFTlRfQ0hBTkdFRF9UWF9JRDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkZXBzLmV2ZW50TWFuYWdlcigpLmxvZ1N3Z0V2ZW50KGV2ZW50VHlwZSwgdHJ1ZSwgZXZlbnRQYXJhbXMpO1xuICAgIHJldHVybiBwYXJzZVN1YnNjcmlwdGlvblJlc3BvbnNlKGRlcHMsIGRhdGEsIGNvbXBsZXRlSGFuZGxlcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gKiBAcGFyYW0geyp9IGRhdGFcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY29tcGxldGVIYW5kbGVyXG4gKiBAcmV0dXJuIHshU3Vic2NyaWJlUmVzcG9uc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN1YnNjcmlwdGlvblJlc3BvbnNlKGRlcHMsIGRhdGEsIGNvbXBsZXRlSGFuZGxlcikge1xuICBsZXQgc3dnRGF0YSA9IG51bGw7XG4gIGxldCByYXcgPSBudWxsO1xuICBsZXQgcHJvZHVjdFR5cGUgPSBQcm9kdWN0VHlwZS5TVUJTQ1JJUFRJT047XG4gIGxldCBvbGRTa3UgPSBudWxsO1xuICBsZXQgcGF5bWVudFJlY3VycmVuY2UgPSBudWxsO1xuXG4gIGlmIChkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09ICdzdHJpbmcnKSB7XG4gICAgICByYXcgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBc3N1bWUgaXQncyBhIGpzb24gb2JqZWN0IGluIHRoZSBmb3JtYXQ6XG4gICAgICAvLyBge2ludGVncmF0b3JDbGllbnRDYWxsYmFja0RhdGE6IFwiLi4uXCJ9YCBvciBge3N3Z0NhbGxiYWNrRGF0YTogXCIuLi5cIn1gLlxuICAgICAgY29uc3QganNvbiA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGRhdGEpO1xuICAgICAgaWYgKCdzd2dDYWxsYmFja0RhdGEnIGluIGpzb24pIHtcbiAgICAgICAgc3dnRGF0YSA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGpzb25bJ3N3Z0NhbGxiYWNrRGF0YSddKTtcbiAgICAgIH0gZWxzZSBpZiAoJ2ludGVncmF0b3JDbGllbnRDYWxsYmFja0RhdGEnIGluIGpzb24pIHtcbiAgICAgICAgcmF3ID0ganNvblsnaW50ZWdyYXRvckNsaWVudENhbGxiYWNrRGF0YSddO1xuICAgICAgfVxuICAgICAgaWYgKCdwYXltZW50UmVxdWVzdCcgaW4gZGF0YSkge1xuICAgICAgICBvbGRTa3UgPSAoZGF0YVsncGF5bWVudFJlcXVlc3QnXVsnc3dnJ10gfHwge30pWydvbGRTa3UnXTtcbiAgICAgICAgcGF5bWVudFJlY3VycmVuY2UgPSAoZGF0YVsncGF5bWVudFJlcXVlc3QnXVsnc3dnJ10gfHwge30pW1xuICAgICAgICAgICdwYXltZW50UmVjdXJyZW5jZSdcbiAgICAgICAgXTtcbiAgICAgICAgcHJvZHVjdFR5cGUgPVxuICAgICAgICAgIChkYXRhWydwYXltZW50UmVxdWVzdCddWydpJ10gfHwge30pWydwcm9kdWN0VHlwZSddIHx8XG4gICAgICAgICAgUHJvZHVjdFR5cGUuU1VCU0NSSVBUSU9OO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAocmF3ICYmICFzd2dEYXRhKSB7XG4gICAgcmF3ID0gYXRvYihyYXcpO1xuICAgIGlmIChyYXcpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSnNvbihyYXcpO1xuICAgICAgc3dnRGF0YSA9IHBhcnNlZFsnc3dnQ2FsbGJhY2tEYXRhJ107XG4gICAgfVxuICB9XG4gIGlmICghc3dnRGF0YSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBwYXltZW50IHJlc3BvbnNlJyk7XG4gIH1cbiAgcmF3ID0gSlNPTi5zdHJpbmdpZnkoLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHN3Z0RhdGEpKTtcbiAgcmV0dXJuIG5ldyBTdWJzY3JpYmVSZXNwb25zZShcbiAgICByYXcsXG4gICAgcGFyc2VQdXJjaGFzZURhdGEoc3dnRGF0YSksXG4gICAgcGFyc2VVc2VyRGF0YShzd2dEYXRhKSxcbiAgICBwYXJzZUVudGl0bGVtZW50cyhkZXBzLCBzd2dEYXRhKSxcbiAgICBwcm9kdWN0VHlwZSxcbiAgICBjb21wbGV0ZUhhbmRsZXIsXG4gICAgb2xkU2t1LFxuICAgIHBheW1lbnRSZWN1cnJlbmNlLFxuICAgIHN3Z0RhdGFbJ3N3Z1VzZXJUb2tlbiddXG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBzd2dEYXRhXG4gKiBAcmV0dXJuIHshUHVyY2hhc2VEYXRhfVxuICovXG5mdW5jdGlvbiBwYXJzZVB1cmNoYXNlRGF0YShzd2dEYXRhKSB7XG4gIGNvbnN0IHJhdyA9IHN3Z0RhdGFbJ3B1cmNoYXNlRGF0YSddO1xuICBjb25zdCBzaWduYXR1cmUgPSBzd2dEYXRhWydwdXJjaGFzZURhdGFTaWduYXR1cmUnXTtcbiAgcmV0dXJuIG5ldyBQdXJjaGFzZURhdGEocmF3LCBzaWduYXR1cmUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3dnRGF0YVxuICogQHJldHVybiB7P1VzZXJEYXRhfVxuICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXNlckRhdGEoc3dnRGF0YSkge1xuICBjb25zdCBpZFRva2VuID0gc3dnRGF0YVsnaWRUb2tlbiddO1xuICBpZiAoIWlkVG9rZW4pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBqd3QgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChuZXcgSnd0SGVscGVyKCkuZGVjb2RlKGlkVG9rZW4pKTtcbiAgcmV0dXJuIG5ldyBVc2VyRGF0YShpZFRva2VuLCBqd3QpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gKiBAcGFyYW0geyFPYmplY3R9IHN3Z0RhdGFcbiAqIEByZXR1cm4gez8uLi9hcGkvZW50aXRsZW1lbnRzLkVudGl0bGVtZW50c31cbiAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudGl0bGVtZW50cyhkZXBzLCBzd2dEYXRhKSB7XG4gIGlmIChzd2dEYXRhWydzaWduZWRFbnRpdGxlbWVudHMnXSkge1xuICAgIHJldHVybiBkZXBzLmVudGl0bGVtZW50c01hbmFnZXIoKS5wYXJzZUVudGl0bGVtZW50cyhzd2dEYXRhKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFQdXJjaGFzZURhdGF9IHB1cmNoYXNlRGF0YVxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcGFyc2VTa3VGcm9tUHVyY2hhc2VEYXRhU2FmZShwdXJjaGFzZURhdGEpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7P3N0cmluZ30gKi8gKGdldFByb3BlcnR5RnJvbUpzb25TdHJpbmcoXG4gICAgcHVyY2hhc2VEYXRhLnJhdyxcbiAgICAncHJvZHVjdElkJ1xuICApIHx8IG51bGwpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtcbiAgQW5hbHl0aWNzRXZlbnQsXG4gIEV2ZW50T3JpZ2luYXRvcixcbiAgRXZlbnRQYXJhbXMsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge2FkZFF1ZXJ5UGFyYW19IGZyb20gJy4uL3V0aWxzL3VybCc7XG5pbXBvcnQge2Fkc1VybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge2FuYWx5dGljc0V2ZW50VG9QdWJsaXNoZXJFdmVudH0gZnJvbSAnLi9ldmVudC10eXBlLW1hcHBpbmcnO1xuaW1wb3J0IHtpc0Jvb2xlYW4sIGlzT2JqZWN0fSBmcm9tICcuLi91dGlscy90eXBlcyc7XG5cbi8qKlxuICogSW1wbGVtZW50cyBpbnRlcmZhY2UgdG8gUHJvcGVuc2l0eSBzZXJ2ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlbnNpdHlTZXJ2ZXIge1xuICAvKipcbiAgICogUGFnZSBjb25maWd1cmF0aW9uIGlzIGtub3duIHdoZW4gUHJvcGVuc2l0eSBBUElcbiAgICogaXMgYXZhaWxhYmxlLCBwdWJsaWNhdGlvbiBJRCBpcyB0aGVyZWZvcmUgdXNlZFxuICAgKiBpbiBjb25zdHJ1Y3RvciBmb3IgdGhlIHNlcnZlciBpbnRlcmZhY2UuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4vZmV0Y2hlci5GZXRjaGVyfSBmZXRjaGVyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGRlcHMsIGZldGNoZXIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucHVibGljYXRpb25JZF8gPSB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCk7XG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuY2xpZW50SWRfID0gbnVsbDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9mZXRjaGVyLkZldGNoZXJ9ICovXG4gICAgdGhpcy5mZXRjaGVyXyA9IGZldGNoZXI7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgIHRoaXMudmVyc2lvbl8gPSAxO1xuXG4gICAgdGhpcy5kZXBzX1xuICAgICAgLmV2ZW50TWFuYWdlcigpXG4gICAgICAucmVnaXN0ZXJFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlQ2xpZW50RXZlbnRfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldERvY3VtZW50Q29va2llXygpIHtcbiAgICByZXR1cm4gdGhpcy53aW5fLmRvY3VtZW50LmNvb2tpZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjbGllbnQgSUQgdG8gYmUgdXNlZC5cbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldENsaWVudElkXygpIHtcbiAgICBpZiAoIXRoaXMuY2xpZW50SWRfKSB7XG4gICAgICAvLyBNYXRjaCAnX19nYWRzJyAobmFtZSBvZiB0aGUgY29va2llKSBkcm9wcGVkIGJ5IEFkcyBUYWcuXG4gICAgICBjb25zdCBnYWRzbWF0Y2ggPSB0aGlzLmdldERvY3VtZW50Q29va2llXygpLm1hdGNoKFxuICAgICAgICAnKF58OylcXFxccypfX2dhZHNcXFxccyo9XFxcXHMqKFteO10rKSdcbiAgICAgICk7XG4gICAgICAvLyBTaW5jZSB0aGUgY29va2llIHdpbGwgYmUgY29uc3VtZWQgdXNpbmcgZGVjb2RlVVJJQ29tcG9uZW50KCksXG4gICAgICAvLyB1c2UgZW5jb2RlVVJJQ29tcG9uZW50KCkgaGVyZSB0byBtYXRjaC5cbiAgICAgIHRoaXMuY2xpZW50SWRfID0gZ2Fkc21hdGNoICYmIGVuY29kZVVSSUNvbXBvbmVudChnYWRzbWF0Y2gucG9wKCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jbGllbnRJZF87XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBwcm9wZW5zaXR5VXJsXyh1cmwpIHtcbiAgICB1cmwgPSBhZGRRdWVyeVBhcmFtKHVybCwgJ3VfdHonLCAnMjQwJyk7XG4gICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICd2JywgU3RyaW5nKHRoaXMudmVyc2lvbl8pKTtcbiAgICBjb25zdCBjbGllbnRJZCA9IHRoaXMuZ2V0Q2xpZW50SWRfKCk7XG4gICAgaWYgKGNsaWVudElkKSB7XG4gICAgICB1cmwgPSBhZGRRdWVyeVBhcmFtKHVybCwgJ2Nvb2tpZScsIGNsaWVudElkKTtcbiAgICB9XG4gICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICdjZG0nLCB0aGlzLndpbl8ubG9jYXRpb24uaG9zdG5hbWUpO1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gcHJvZHVjdHNPclNrdXNcbiAgICovXG4gIHNlbmRTdWJzY3JpcHRpb25TdGF0ZShzdGF0ZSwgcHJvZHVjdHNPclNrdXMpIHtcbiAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgIH0pO1xuICAgIGxldCB1cmwgPSBhZHNVcmwoJy9zdWJvcHQvZGF0YScpO1xuICAgIHVybCA9IGFkZFF1ZXJ5UGFyYW0odXJsLCAnc3RhdGVzJywgdGhpcy5wdWJsaWNhdGlvbklkXyArICc6JyArIHN0YXRlKTtcbiAgICBpZiAocHJvZHVjdHNPclNrdXMpIHtcbiAgICAgIHVybCA9IGFkZFF1ZXJ5UGFyYW0odXJsLCAnZXh0cmFpbmZvJywgcHJvZHVjdHNPclNrdXMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mZXRjaGVyXy5mZXRjaCh0aGlzLnByb3BlbnNpdHlVcmxfKHVybCksIGluaXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGNvbnRleHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNlbmRFdmVudF8oZXZlbnQsIGNvbnRleHQpIHtcbiAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgIH0pO1xuICAgIGxldCB1cmwgPSBhZHNVcmwoJy9zdWJvcHQvZGF0YScpO1xuICAgIHVybCA9IGFkZFF1ZXJ5UGFyYW0odXJsLCAnZXZlbnRzJywgdGhpcy5wdWJsaWNhdGlvbklkXyArICc6JyArIGV2ZW50KTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICdleHRyYWluZm8nLCBjb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hlcl8uZmV0Y2godGhpcy5wcm9wZW5zaXR5VXJsXyh1cmwpLCBpbml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50fSBldmVudFxuICAgKi9cbiAgaGFuZGxlQ2xpZW50RXZlbnRfKGV2ZW50KSB7XG4gICAgLy8gUHJvcGVuc2l0eSBkb2VzIG5vdCBuZWVkIHRoaXMgZGF0YSBhbmQgZG9lcyBub3QgaGF2ZSB0aGUgcmlnaHQgdG9cbiAgICAvLyBpdCBhdCB0aGlzIHRpbWUuICBXZSBjYW4gY29uc2lkZXIgdGhpcyBpZiBuZWNlc3NhcnkgaW4gdGhlIGZ1dHVyZS5cbiAgICBpZiAoZXZlbnQuZXZlbnRPcmlnaW5hdG9yID09PSBFdmVudE9yaWdpbmF0b3IuU0hPV0NBU0VfQ0xJRU5UKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG9lcyBhIGxpdmUgY2hlY2sgb2YgdGhlIGNvbmZpZyBiZWNhdXNlIHdlIGRvbid0IGtub3cgd2hlbiBwdWJsaXNoZXJcbiAgICAgKiBjYWxsZWQgdG8gZW5hYmxlIChpdCBtYXkgYmUgYWZ0ZXIgYSBjb25zZW50IGRpYWxvZykuXG4gICAgICovXG4gICAgaWYgKFxuICAgICAgIXRoaXMuZGVwc18uY29uZmlnKCkuZW5hYmxlUHJvcGVuc2l0eSAmJlxuICAgICAgZXZlbnQuZXZlbnRPcmlnaW5hdG9yICE9PSBFdmVudE9yaWdpbmF0b3IuUFJPUEVOU0lUWV9DTElFTlRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZXZlbnRUeXBlID09PSBBbmFseXRpY3NFdmVudC5FVkVOVF9TVUJTQ1JJUFRJT05fU1RBVEUpIHtcbiAgICAgIHRoaXMuc2VuZFN1YnNjcmlwdGlvblN0YXRlKFxuICAgICAgICBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVyc1snc3RhdGUnXSxcbiAgICAgICAgZXZlbnQuYWRkaXRpb25hbFBhcmFtZXRlcnNbJ3Byb2R1Y3RzT3JTa3VzJ11cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByb3BFdmVudCA9IGFuYWx5dGljc0V2ZW50VG9QdWJsaXNoZXJFdmVudChldmVudC5ldmVudFR5cGUpO1xuICAgIGlmIChwcm9wRXZlbnQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgYWRkaXRpb25hbFBhcmFtZXRlcnMgPSBldmVudC5hZGRpdGlvbmFsUGFyYW1ldGVycztcbiAgICAvLyBUaGUgRXZlbnRQYXJhbXMgb2JqZWN0IGlzIHByaXZhdGUgdG8gU3dHIGFuYWx5dGljcy4gIERvIG5vdCBzZW5kLlxuICAgIGlmIChhZGRpdGlvbmFsUGFyYW1ldGVycyBpbnN0YW5jZW9mIEV2ZW50UGFyYW1zKSB7XG4gICAgICBhZGRpdGlvbmFsUGFyYW1ldGVycyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGlzQm9vbGVhbihldmVudC5pc0Zyb21Vc2VyQWN0aW9uKSkge1xuICAgICAgaWYgKCFpc09iamVjdChhZGRpdGlvbmFsUGFyYW1ldGVycykpIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzWydpc19hY3RpdmUnXSA9IGV2ZW50LmlzRnJvbVVzZXJBY3Rpb247XG4gICAgfVxuICAgIHRoaXMuc2VuZEV2ZW50XyhcbiAgICAgIHByb3BFdmVudCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KC8qKiBAdHlwZSB7P0pzb25PYmplY3R9ICovIChhZGRpdGlvbmFsUGFyYW1ldGVycykpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0pzb25PYmplY3R9IHJlc3BvbnNlXG4gICAqIEByZXR1cm4geyEuLi9hcGkvcHJvcGVuc2l0eS1hcGkuUHJvcGVuc2l0eVNjb3JlfVxuICAgKi9cbiAgcGFyc2VQcm9wZW5zaXR5UmVzcG9uc2VfKHJlc3BvbnNlKSB7XG4gICAgbGV0IGRlZmF1bHRTY29yZSA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmV9ICovICh7fSk7XG4gICAgaWYgKCFyZXNwb25zZVsnaGVhZGVyJ10pIHtcbiAgICAgIGRlZmF1bHRTY29yZSA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmV9ICovICh7XG4gICAgICAgIGhlYWRlcjoge29rOiBmYWxzZX0sXG4gICAgICAgIGJvZHk6IHtlcnJvcjogJ05vIHZhbGlkIHJlc3BvbnNlJ30sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZhdWx0U2NvcmU7XG4gICAgfVxuICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlWydoZWFkZXInXTtcbiAgICBsZXQgc2NvcmVEZXRhaWxzID0gdW5kZWZpbmVkO1xuICAgIGlmIChzdGF0dXNbJ29rJ10pIHtcbiAgICAgIGNvbnN0IHNjb3JlcyA9IHJlc3BvbnNlWydzY29yZXMnXTtcbiAgICAgIHNjb3JlRGV0YWlscyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY29yZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc2NvcmVzW2ldO1xuICAgICAgICBjb25zdCBzY29yZVN0YXR1cyA9ICEhcmVzdWx0WydzY29yZSddO1xuICAgICAgICBsZXQgc2NvcmVEZXRhaWw7XG4gICAgICAgIGlmIChzY29yZVN0YXR1cykge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gLyoqIEB0eXBlIHshLi4vYXBpL3Byb3BlbnNpdHktYXBpLlNjb3JlfSAqLyAoe1xuICAgICAgICAgICAgdmFsdWU6IHJlc3VsdFsnc2NvcmUnXSxcbiAgICAgICAgICAgIGJ1Y2tldGVkOiByZXN1bHRbJ3Njb3JlX3R5cGUnXSA9PSAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNjb3JlRGV0YWlsID0gLyoqIEB0eXBlIHshLi4vYXBpL3Byb3BlbnNpdHktYXBpLkJvZHl9ICovICh7XG4gICAgICAgICAgICBwcm9kdWN0OiByZXN1bHRbJ3Byb2R1Y3QnXSxcbiAgICAgICAgICAgIHNjb3JlOiB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzY29yZURldGFpbCA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Cb2R5fSAqLyAoe1xuICAgICAgICAgICAgcHJvZHVjdDogcmVzdWx0Wydwcm9kdWN0J10sXG4gICAgICAgICAgICBlcnJvcjogcmVzdWx0WydlcnJvcl9tZXNzYWdlJ10sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2NvcmVEZXRhaWxzLnB1c2goc2NvcmVEZXRhaWwpO1xuICAgICAgfVxuICAgICAgaWYgKHNjb3JlRGV0YWlscykge1xuICAgICAgICBkZWZhdWx0U2NvcmUgPSAvKiogQHR5cGUgeyEuLi9hcGkvcHJvcGVuc2l0eS1hcGkuUHJvcGVuc2l0eVNjb3JlfSAqLyAoe1xuICAgICAgICAgIGhlYWRlcjoge29rOiB0cnVlfSxcbiAgICAgICAgICBib2R5OiB7c2NvcmVzOiBzY29yZURldGFpbHN9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZhdWx0U2NvcmU7XG4gICAgfVxuICAgIGRlZmF1bHRTY29yZSA9IC8qKiBAdHlwZSB7IS4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmV9ICovICh7XG4gICAgICBoZWFkZXI6IHtvazogZmFsc2V9LFxuICAgICAgYm9keToge2Vycm9yOiByZXNwb25zZVsnZXJyb3InXX0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmF1bHRTY29yZTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZmVycmVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPC4uL2FwaS9wcm9wZW5zaXR5LWFwaS5Qcm9wZW5zaXR5U2NvcmU+fVxuICAgKi9cbiAgZ2V0UHJvcGVuc2l0eShyZWZlcnJlciwgdHlwZSkge1xuICAgIGNvbnN0IGluaXQgPSAvKiogQHR5cGUgeyEuLi91dGlscy94aHIuRmV0Y2hJbml0RGVmfSAqLyAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgfSk7XG4gICAgY29uc3QgdXJsID1cbiAgICAgIGFkc1VybCgnL3N1Ym9wdC9wdHM/cHJvZHVjdHM9JykgK1xuICAgICAgdGhpcy5wdWJsaWNhdGlvbklkXyArXG4gICAgICAnJnR5cGU9JyArXG4gICAgICB0eXBlICtcbiAgICAgICcmcmVmPScgK1xuICAgICAgcmVmZXJyZXI7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hlcl9cbiAgICAgIC5mZXRjaCh0aGlzLnByb3BlbnNpdHlVcmxfKHVybCksIGluaXQpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlUHJvcGVuc2l0eVJlc3BvbnNlXyhyZXNwb25zZSk7XG4gICAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0ICogYXMgUHJvcGVuc2l0eUFwaSBmcm9tICcuLi9hcGkvcHJvcGVuc2l0eS1hcGknO1xuaW1wb3J0IHtFdmVudCwgU3Vic2NyaXB0aW9uU3RhdGV9IGZyb20gJy4uL2FwaS9sb2dnZXItYXBpJztcbmltcG9ydCB7RXZlbnRPcmlnaW5hdG9yfSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnO1xuaW1wb3J0IHtQcm9wZW5zaXR5U2VydmVyfSBmcm9tICcuL3Byb3BlbnNpdHktc2VydmVyJztcbmltcG9ydCB7aXNCb29sZWFufSBmcm9tICcuLi91dGlscy90eXBlcyc7XG5pbXBvcnQge2lzRW51bVZhbHVlLCBpc09iamVjdH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnO1xuaW1wb3J0IHtwdWJsaXNoZXJFdmVudFRvQW5hbHl0aWNzRXZlbnR9IGZyb20gJy4vZXZlbnQtdHlwZS1tYXBwaW5nJztcblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7UHJvcGVuc2l0eUFwaS5Qcm9wZW5zaXR5QXBpfVxuICovXG5leHBvcnQgY2xhc3MgUHJvcGVuc2l0eSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuL2ZldGNoZXIuRmV0Y2hlcn0gZmV0Y2hlclxuICAgKlxuICAgKiBJTVBPUlRBTlQ6IGRlcHMgbWF5IG5vdCBiZSBmdWxsIGluaXRpYWxpemVkIGNvbmZpZyBhbmQgcGFnZUNvbmZpZyBhcmVcbiAgICogYXZhaWxhYmxlIGltbWVkaWF0ZWx5LCBvdGhlciBmdW5jdGlvbiBzaG91bGQgYmUgZ2F0ZWQgb24gYSByZWFkeSBwcm9taXNlLlxuICAgKiAjVE9ETyhqcGV0dGl0dCkgc3dpdGNoIHJlZmFjdG9yIHRvIHRha2Ugb3V0IHRoZSB3aW4gYW5kIHVzZSBkZXBzIHRvIGdldCB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgZGVwcywgZmV0Y2hlcikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuICAgIC8qKiBAcHJpdmF0ZSB7UHJvcGVuc2l0eVNlcnZlcn0gKi9cbiAgICB0aGlzLnByb3BlbnNpdHlTZXJ2ZXJfID0gbmV3IFByb3BlbnNpdHlTZXJ2ZXIod2luLCBkZXBzLCBmZXRjaGVyKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9hcGkvY2xpZW50LWV2ZW50LW1hbmFnZXItYXBpLkNsaWVudEV2ZW50TWFuYWdlckFwaX0gKi9cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8gPSBkZXBzLmV2ZW50TWFuYWdlcigpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZW5kU3Vic2NyaXB0aW9uU3RhdGUoc3RhdGUsIGpzb25Qcm9kdWN0cykge1xuICAgIGlmICghT2JqZWN0LnZhbHVlcyhTdWJzY3JpcHRpb25TdGF0ZSkuaW5jbHVkZXMoc3RhdGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3Vic2NyaXB0aW9uIHN0YXRlIHByb3ZpZGVkJyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIChTdWJzY3JpcHRpb25TdGF0ZS5TVUJTQ1JJQkVSID09IHN0YXRlIHx8XG4gICAgICAgIFN1YnNjcmlwdGlvblN0YXRlLlBBU1RfU1VCU0NSSUJFUiA9PSBzdGF0ZSkgJiZcbiAgICAgICFqc29uUHJvZHVjdHNcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0VudGl0bGVtZW50cyBtdXN0IGJlIHByb3ZpZGVkIGZvciB1c2VycyB3aXRoJyArXG4gICAgICAgICAgJyBhY3RpdmUgb3IgZXhwaXJlZCBzdWJzY3JpcHRpb25zJ1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGpzb25Qcm9kdWN0cyAmJiAhaXNPYmplY3QoanNvblByb2R1Y3RzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbnRpdGxlbWVudHMgbXVzdCBiZSBhbiBPYmplY3QnKTtcbiAgICB9XG4gICAgbGV0IHByb2R1Y3RzT3JTa3VzID0gbnVsbDtcbiAgICBpZiAoanNvblByb2R1Y3RzKSB7XG4gICAgICBwcm9kdWN0c09yU2t1cyA9IEpTT04uc3RyaW5naWZ5KGpzb25Qcm9kdWN0cyk7XG4gICAgfVxuICAgIHRoaXMucHJvcGVuc2l0eVNlcnZlcl8uc2VuZFN1YnNjcmlwdGlvblN0YXRlKHN0YXRlLCBwcm9kdWN0c09yU2t1cyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFByb3BlbnNpdHkodHlwZSkge1xuICAgIGlmICh0eXBlICYmICFPYmplY3QudmFsdWVzKFByb3BlbnNpdHlBcGkuUHJvcGVuc2l0eVR5cGUpLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJvcGVuc2l0eSB0eXBlIHJlcXVlc3RlZCcpO1xuICAgIH1cbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgIHR5cGUgPSBQcm9wZW5zaXR5QXBpLlByb3BlbnNpdHlUeXBlLkdFTkVSQUw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnByb3BlbnNpdHlTZXJ2ZXJfLmdldFByb3BlbnNpdHkoXG4gICAgICB0aGlzLndpbl8uZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICB0eXBlXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2VuZEV2ZW50KHVzZXJFdmVudCkge1xuICAgIGNvbnN0IGFuYWx5dGljc0V2ZW50ID0gcHVibGlzaGVyRXZlbnRUb0FuYWx5dGljc0V2ZW50KHVzZXJFdmVudC5uYW1lKTtcbiAgICBsZXQgZGF0YSA9IG51bGw7XG4gICAgaWYgKCFpc0VudW1WYWx1ZShFdmVudCwgdXNlckV2ZW50Lm5hbWUpIHx8ICFhbmFseXRpY3NFdmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHVzZXIgZXZlbnQgcHJvdmlkZWQoJyArIHVzZXJFdmVudC5uYW1lICsgJyknKTtcbiAgICB9XG5cbiAgICBpZiAodXNlckV2ZW50LmRhdGEpIHtcbiAgICAgIGlmICghaXNPYmplY3QodXNlckV2ZW50LmRhdGEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgZGF0YSBtdXN0IGJlIGFuIE9iamVjdCgnICsgdXNlckV2ZW50LmRhdGEgKyAnKScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHVzZXJFdmVudC5kYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNCb29sZWFuKHVzZXJFdmVudC5hY3RpdmUpKSB7XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCB7J2lzX2FjdGl2ZSc6IHVzZXJFdmVudC5hY3RpdmV9KTtcbiAgICB9IGVsc2UgaWYgKHVzZXJFdmVudC5hY3RpdmUgIT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBhY3RpdmUgbXVzdCBiZSBhIGJvb2xlYW4nKTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8ubG9nRXZlbnQoe1xuICAgICAgZXZlbnRUeXBlOiBhbmFseXRpY3NFdmVudCxcbiAgICAgIGV2ZW50T3JpZ2luYXRvcjogRXZlbnRPcmlnaW5hdG9yLlBST1BFTlNJVFlfQ0xJRU5ULFxuICAgICAgaXNGcm9tVXNlckFjdGlvbjogdXNlckV2ZW50LmFjdGl2ZSxcbiAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzOiBkYXRhLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWJicnZPZmZlckZsb3csIE9mZmVyc0Zsb3csIFN1YnNjcmliZU9wdGlvbkZsb3d9IGZyb20gJy4vb2ZmZXJzLWZsb3cnO1xuaW1wb3J0IHtBY3Rpdml0eVBvcnRzfSBmcm9tICcuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMnO1xuaW1wb3J0IHtcbiAgQW5hbHl0aWNzRXZlbnQsXG4gIEV2ZW50T3JpZ2luYXRvcixcbiAgRXZlbnRQYXJhbXMsXG59IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5pbXBvcnQge0FuYWx5dGljc01vZGV9IGZyb20gJy4uL2FwaS9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7QW5hbHl0aWNzU2VydmljZX0gZnJvbSAnLi9hbmFseXRpY3Mtc2VydmljZSc7XG5pbXBvcnQge0J1dHRvbkFwaX0gZnJvbSAnLi9idXR0b24tYXBpJztcbmltcG9ydCB7Q2FsbGJhY2tzfSBmcm9tICcuL2NhbGxiYWNrcyc7XG5pbXBvcnQge0NsaWVudENvbmZpZ01hbmFnZXJ9IGZyb20gJy4vY2xpZW50LWNvbmZpZy1tYW5hZ2VyJztcbmltcG9ydCB7Q2xpZW50RXZlbnRNYW5hZ2VyfSBmcm9tICcuL2NsaWVudC1ldmVudC1tYW5hZ2VyJztcbmltcG9ydCB7Q29udHJpYnV0aW9uc0Zsb3d9IGZyb20gJy4vY29udHJpYnV0aW9ucy1mbG93JztcbmltcG9ydCB7RGVmZXJyZWRBY2NvdW50Rmxvd30gZnJvbSAnLi9kZWZlcnJlZC1hY2NvdW50LWZsb3cnO1xuaW1wb3J0IHtEZXBzRGVmfSBmcm9tICcuL2RlcHMnO1xuaW1wb3J0IHtEaWFsb2dNYW5hZ2VyfSBmcm9tICcuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyJztcbmltcG9ydCB7RG9jLCByZXNvbHZlRG9jfSBmcm9tICcuLi9tb2RlbC9kb2MnO1xuaW1wb3J0IHtFbnRpdGxlbWVudHNNYW5hZ2VyfSBmcm9tICcuL2VudGl0bGVtZW50cy1tYW5hZ2VyJztcbmltcG9ydCB7RXhwZXJpbWVudEZsYWdzfSBmcm9tICcuL2V4cGVyaW1lbnQtZmxhZ3MnO1xuaW1wb3J0IHtGZXRjaGVyLCBYaHJGZXRjaGVyfSBmcm9tICcuL2ZldGNoZXInO1xuaW1wb3J0IHtKc0Vycm9yfSBmcm9tICcuL2pzZXJyb3InO1xuaW1wb3J0IHtcbiAgTGlua0NvbXBsZXRlRmxvdyxcbiAgTGlua1NhdmVGbG93LFxuICBMaW5rYmFja0Zsb3csXG59IGZyb20gJy4vbGluay1hY2NvdW50cy1mbG93JztcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQge0xvZ2luTm90aWZpY2F0aW9uQXBpfSBmcm9tICcuL2xvZ2luLW5vdGlmaWNhdGlvbi1hcGknO1xuaW1wb3J0IHtMb2dpblByb21wdEFwaX0gZnJvbSAnLi9sb2dpbi1wcm9tcHQtYXBpJztcbmltcG9ydCB7T2ZmZXJzQXBpfSBmcm9tICcuL29mZmVycy1hcGknO1xuaW1wb3J0IHtQYWdlQ29uZmlnfSBmcm9tICcuLi9tb2RlbC9wYWdlLWNvbmZpZyc7XG5pbXBvcnQge1xuICBQYWdlQ29uZmlnUmVzb2x2ZXIsXG4gIGdldENvbnRyb2xGbGFnLFxufSBmcm9tICcuLi9tb2RlbC9wYWdlLWNvbmZpZy1yZXNvbHZlcic7XG5pbXBvcnQge1BheUNsaWVudH0gZnJvbSAnLi9wYXktY2xpZW50JztcbmltcG9ydCB7UGF5Q29tcGxldGVGbG93LCBQYXlTdGFydEZsb3d9IGZyb20gJy4vcGF5LWZsb3cnO1xuaW1wb3J0IHtQcmVjb25uZWN0fSBmcm9tICcuLi91dGlscy9wcmVjb25uZWN0JztcbmltcG9ydCB7XG4gIFByb2R1Y3RUeXBlLFxuICBTdWJzY3JpcHRpb25zLFxuICBXaW5kb3dPcGVuTW9kZSxcbiAgZGVmYXVsdENvbmZpZyxcbn0gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHtQcm9wZW5zaXR5fSBmcm9tICcuL3Byb3BlbnNpdHknO1xuaW1wb3J0IHtDU1MgYXMgU1dHX0RJQUxPR30gZnJvbSAnLi4vLi4vYnVpbGQvY3NzL2NvbXBvbmVudHMvZGlhbG9nLmNzcyc7XG5pbXBvcnQge1N0b3JhZ2V9IGZyb20gJy4vc3RvcmFnZSc7XG5pbXBvcnQge1dhaXRGb3JTdWJzY3JpcHRpb25Mb29rdXBBcGl9IGZyb20gJy4vd2FpdC1mb3Itc3Vic2NyaXB0aW9uLWxvb2t1cC1hcGknO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQge2RlYnVnTG9nfSBmcm9tICcuLi91dGlscy9sb2cnO1xuaW1wb3J0IHtpbmplY3RTdHlsZVNoZWV0LCBpc0xlZ2FjeUVkZ2VCcm93c2VyfSBmcm9tICcuLi91dGlscy9kb20nO1xuaW1wb3J0IHtpc0Jvb2xlYW59IGZyb20gJy4uL3V0aWxzL3R5cGVzJztcbmltcG9ydCB7aXNFeHBlcmltZW50T259IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtpc1NlY3VyZSwgd2FzUmVmZXJyZWRCeUdvb2dsZX0gZnJvbSAnLi4vdXRpbHMvdXJsJztcbmltcG9ydCB7cGFyc2VVcmx9IGZyb20gJy4uL3V0aWxzL3VybCc7XG5pbXBvcnQge3B1Ymxpc2hlckVudGl0bGVtZW50RXZlbnRUb0FuYWx5dGljc0V2ZW50c30gZnJvbSAnLi9ldmVudC10eXBlLW1hcHBpbmcnO1xuaW1wb3J0IHtxdWVyeVN0cmluZ0hhc0ZyZXNoR2FhUGFyYW1zfSBmcm9tICcuLi91dGlscy9nYWEnO1xuaW1wb3J0IHtzZXRFeHBlcmltZW50fSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuY29uc3QgUlVOVElNRV9QUk9QID0gJ1NXRyc7XG5jb25zdCBSVU5USU1FX0xFR0FDWV9QUk9QID0gJ1NVQlNDUklQVElPTlMnOyAvLyBNSUdSQVRFXG5cbi8qKlxuICogUmVmZXJlbmNlIHRvIHRoZSBydW50aW1lLCBmb3IgdGVzdGluZy5cbiAqIEBwcml2YXRlIHshUnVudGltZX1cbiAqL1xubGV0IHJ1bnRpbWVJbnN0YW5jZV87XG5cbi8qKlxuICogUmV0dXJucyBydW50aW1lIGZvciB0ZXN0aW5nIGlmIGF2YWlsYWJsZS4gVGhyb3dzIGlmIHRoZSBydW50aW1lIGlzIG5vdFxuICogaW5pdGlhbGl6ZWQgeWV0LlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKiBAcmV0dXJuIHshUnVudGltZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJ1bnRpbWUoKSB7XG4gIGFzc2VydChydW50aW1lSW5zdGFuY2VfLCAnbm90IGluaXRpYWxpemVkIHlldCcpO1xuICByZXR1cm4gcnVudGltZUluc3RhbmNlXztcbn1cblxuLyoqXG4gKiBJbnN0YWxscyBTd0cgcnVudGltZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsUnVudGltZSh3aW4pIHtcbiAgLy8gT25seSBpbnN0YWxsIHRoZSBTd0cgcnVudGltZSBvbmNlLlxuICBpZiAod2luW1JVTlRJTUVfUFJPUF0gJiYgIUFycmF5LmlzQXJyYXkod2luW1JVTlRJTUVfUFJPUF0pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgU3dHIHJ1bnRpbWUuXG4gIGNvbnN0IHJ1bnRpbWUgPSBuZXcgUnVudGltZSh3aW4pO1xuXG4gIC8vIENyZWF0ZSBhIHB1YmxpYyB2ZXJzaW9uIG9mIHRoZSBTd0cgcnVudGltZS5cbiAgY29uc3QgcHVibGljUnVudGltZSA9IGNyZWF0ZVB1YmxpY1J1bnRpbWUocnVudGltZSk7XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGEgY2FsbGJhY2sgd2hlbiBTd0cgcnVudGltZSBpcyByZWFkeS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighU3Vic2NyaXB0aW9ucyl9IGNhbGxiYWNrXG4gICAqL1xuICBmdW5jdGlvbiBjYWxsV2hlblJ1bnRpbWVJc1JlYWR5KGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJ1bnRpbWUud2hlblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICBjYWxsYmFjayhwdWJsaWNSdW50aW1lKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFF1ZXVlIHVwIGFueSBjYWxsYmFja3MgdGhlIHB1YmxpY2F0aW9uIG1pZ2h0IGhhdmUgcHJvdmlkZWQuXG4gIGNvbnN0IHdhaXRpbmdDYWxsYmFja3MgPSBbXS5jb25jYXQoXG4gICAgd2luW1JVTlRJTUVfUFJPUF0sXG4gICAgd2luW1JVTlRJTUVfTEVHQUNZX1BST1BdXG4gICk7XG4gIHdhaXRpbmdDYWxsYmFja3MuZm9yRWFjaChjYWxsV2hlblJ1bnRpbWVJc1JlYWR5KTtcblxuICAvLyBJZiBhbnkgbW9yZSBjYWxsYmFja3MgYXJlIGBwdXNoYGVkIHRvIHRoZSBnbG9iYWwgU3dHIHZhcmlhYmxlcyxcbiAgLy8gdGhleSdsbCBiZSBxdWV1ZWQgdXAgdG8gcmVjZWl2ZSB0aGUgU3dHIHJ1bnRpbWUgd2hlbiBpdCdzIHJlYWR5LlxuICB3aW5bUlVOVElNRV9QUk9QXSA9IHdpbltSVU5USU1FX0xFR0FDWV9QUk9QXSA9IHtcbiAgICBwdXNoOiBjYWxsV2hlblJ1bnRpbWVJc1JlYWR5LFxuICB9O1xuXG4gIC8vIFNldCB2YXJpYWJsZSBmb3IgdGVzdGluZy5cbiAgcnVudGltZUluc3RhbmNlXyA9IHJ1bnRpbWU7XG5cbiAgLy8gS2ljayBvZmYgc3Vic2NyaXB0aW9ucyBmbG93LlxuICBydW50aW1lLnN0YXJ0U3Vic2NyaXB0aW9uc0Zsb3dJZk5lZWRlZCgpO1xufVxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtTdWJzY3JpcHRpb25zfVxuICovXG5leHBvcnQgY2xhc3MgUnVudGltZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IHJlc29sdmVEb2Mod2luKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucmVhZHlfID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5wcm9kdWN0T3JQdWJsaWNhdGlvbklkXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IHt9O1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuY29tbWl0dGVkXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKCFDb25maWd1cmVkUnVudGltZXwhUHJvbWlzZSkpfSAqL1xuICAgIHRoaXMuY29uZmlndXJlZFJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZTwhQ29uZmlndXJlZFJ1bnRpbWU+fSAqL1xuICAgIHRoaXMuY29uZmlndXJlZFByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuY29uZmlndXJlZFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9QYWdlQ29uZmlnUmVzb2x2ZXJ9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnUmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFCdXR0b25BcGl9ICovXG4gICAgdGhpcy5idXR0b25BcGlfID0gbmV3IEJ1dHRvbkFwaSh0aGlzLmRvY18sIHRoaXMuY29uZmlndXJlZFByb21pc2VfKTtcbiAgICB0aGlzLmJ1dHRvbkFwaV8uaW5pdCgpOyAvLyBJbmplY3RzIHN3Zy1idXR0b24gc3R5bGVzaGVldC5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkeV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBjb21taXRcbiAgICogQHJldHVybiB7IVByb21pc2U8IUNvbmZpZ3VyZWRSdW50aW1lPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbmZpZ3VyZWRfKGNvbW1pdCkge1xuICAgIGlmICghdGhpcy5jb21taXR0ZWRfICYmIGNvbW1pdCkge1xuICAgICAgdGhpcy5jb21taXR0ZWRfID0gdHJ1ZTtcbiAgICAgIC8qKiBAdHlwZSB7IVByb21pc2U8IVBhZ2VDb25maWc+fSAqL1xuICAgICAgbGV0IHBhZ2VDb25maWdQcm9taXNlO1xuICAgICAgaWYgKHRoaXMucHJvZHVjdE9yUHVibGljYXRpb25JZF8pIHtcbiAgICAgICAgcGFnZUNvbmZpZ1Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgICAgbmV3IFBhZ2VDb25maWcodGhpcy5wcm9kdWN0T3JQdWJsaWNhdGlvbklkXywgLyogbG9ja2VkICovIGZhbHNlKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYWdlQ29uZmlnUmVzb2x2ZXJfID0gbmV3IFBhZ2VDb25maWdSZXNvbHZlcih0aGlzLmRvY18pO1xuICAgICAgICBwYWdlQ29uZmlnUHJvbWlzZSA9IHRoaXMucGFnZUNvbmZpZ1Jlc29sdmVyX1xuICAgICAgICAgIC5yZXNvbHZlQ29uZmlnKClcbiAgICAgICAgICAudGhlbigoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb25maWdSZXNvbHZlcl8gPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHBhZ2VDb25maWdQcm9taXNlLnRoZW4oXG4gICAgICAgIChwYWdlQ29uZmlnKSA9PiB7XG4gICAgICAgICAgdGhpcy5jb25maWd1cmVkUmVzb2x2ZXJfKFxuICAgICAgICAgICAgbmV3IENvbmZpZ3VyZWRSdW50aW1lKFxuICAgICAgICAgICAgICB0aGlzLmRvY18sXG4gICAgICAgICAgICAgIHBhZ2VDb25maWcsXG4gICAgICAgICAgICAgIC8qIGludGVnciAqLyB7Y29uZmlnUHJvbWlzZTogdGhpcy5jb25maWd1cmVkUHJvbWlzZV99LFxuICAgICAgICAgICAgICB0aGlzLmNvbmZpZ19cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuY29uZmlndXJlZFJlc29sdmVyXyA9IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIChyZWFzb24pID0+IHtcbiAgICAgICAgICB0aGlzLmNvbmZpZ3VyZWRSZXNvbHZlcl8oUHJvbWlzZS5yZWplY3QocmVhc29uKSk7XG4gICAgICAgICAgdGhpcy5jb25maWd1cmVkUmVzb2x2ZXJfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGNvbW1pdCAmJiB0aGlzLnBhZ2VDb25maWdSZXNvbHZlcl8pIHtcbiAgICAgIHRoaXMucGFnZUNvbmZpZ1Jlc29sdmVyXy5jaGVjaygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBzdWJzY3JpcHRpb24gZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFuZCB0aGUgcGFnZSBpc1xuICAgKiBjb25maWd1cmVkIHRvIHN0YXJ0IGl0IGF1dG9tYXRpY2FsbHkuXG4gICAqXG4gICAqIEByZXR1cm4gez9Qcm9taXNlfVxuICAgKiBAcGFja2FnZVxuICAgKi9cbiAgc3RhcnRTdWJzY3JpcHRpb25zRmxvd0lmTmVlZGVkKCkge1xuICAgIGNvbnN0IGNvbnRyb2wgPSBnZXRDb250cm9sRmxhZyh0aGlzLndpbl8uZG9jdW1lbnQpO1xuICAgIGRlYnVnTG9nKGNvbnRyb2wsICdtb2RlJyk7XG4gICAgaWYgKGNvbnRyb2wgPT0gJ21hbnVhbCcpIHtcbiAgICAgIC8vIFwiU2tpcHBpbmcgYXV0b21hdGljIHN0YXJ0IGJlY2F1c2UgY29udHJvbCBmbGFnIGlzIHNldCB0byBcIm1hbnVhbFwiLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXJ0KCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGluaXQocHJvZHVjdE9yUHVibGljYXRpb25JZCkge1xuICAgIGFzc2VydCghdGhpcy5jb21taXR0ZWRfLCAnYWxyZWFkeSBjb25maWd1cmVkJyk7XG4gICAgdGhpcy5wcm9kdWN0T3JQdWJsaWNhdGlvbklkXyA9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWQ7XG5cbiAgICAvLyBQcm9jZXNzIHRoZSBwYWdlJ3MgY29uZmlnLlxuICAgIHRoaXMuY29uZmlndXJlZF8odHJ1ZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgICAvLyBBY2N1bXVsYXRlIGNvbmZpZyBmb3Igc3RhcnR1cC5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuY29uZmlnXywgY29uZmlnKTtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbigocnVudGltZSkgPT4gcnVudGltZS5jb25maWd1cmUoY29uZmlnKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXJ0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHJ1bnRpbWUuc3RhcnQoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHJlc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHJ1bnRpbWUucmVzZXQoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNsZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHJ1bnRpbWUuY2xlYXIoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVudGl0bGVtZW50cyhwYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5nZXRFbnRpdGxlbWVudHMocGFyYW1zKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUuc2V0T25FbnRpdGxlbWVudHNSZXNwb25zZShjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRPZmZlcnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHJ1bnRpbWUuZ2V0T2ZmZXJzKG9wdGlvbnMpKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd09mZmVycyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUuc2hvd09mZmVycyhvcHRpb25zKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dVcGRhdGVPZmZlcnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnNob3dVcGRhdGVPZmZlcnMob3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93U3Vic2NyaWJlT3B0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5zaG93U3Vic2NyaWJlT3B0aW9uKG9wdGlvbnMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0FiYnJ2T2ZmZXIob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnNob3dBYmJydk9mZmVyKG9wdGlvbnMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnNob3dDb250cmlidXRpb25PcHRpb25zKG9wdGlvbnMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgd2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cChhY2NvdW50UHJvbWlzZSkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLndhaXRGb3JTdWJzY3JpcHRpb25Mb29rdXAoYWNjb3VudFByb21pc2UpXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnNldE9uTmF0aXZlU3Vic2NyaWJlUmVxdWVzdChjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPblN1YnNjcmliZVJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnNldE9uU3Vic2NyaWJlUmVzcG9uc2UoY2FsbGJhY2spXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3Vic2NyaWJlKHNrdSkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHJ1bnRpbWUuc3Vic2NyaWJlKHNrdSkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB1cGRhdGVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnVwZGF0ZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25SZXF1ZXN0KVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUuc2V0T25Db250cmlidXRpb25SZXNwb25zZShjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPblBheW1lbnRSZXNwb25zZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKGZhbHNlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5zZXRPblBheW1lbnRSZXNwb25zZShjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb250cmlidXRlKHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLmNvbnRyaWJ1dGUoc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0KVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbXBsZXRlRGVmZXJyZWRBY2NvdW50Q3JlYXRpb24ob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLmNvbXBsZXRlRGVmZXJyZWRBY2NvdW50Q3JlYXRpb24ob3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkxvZ2luUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKGZhbHNlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5zZXRPbkxvZ2luUmVxdWVzdChjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB0cmlnZ2VyTG9naW5SZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUudHJpZ2dlckxvZ2luUmVxdWVzdChyZXF1ZXN0KVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8oZmFsc2UpLnRoZW4oKHJ1bnRpbWUpID0+XG4gICAgICBydW50aW1lLnNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGxpbmtBY2NvdW50KHBhcmFtcyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUubGlua0FjY291bnQocGFyYW1zKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRmxvd1N0YXJ0ZWQoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyhmYWxzZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUuc2V0T25GbG93U3RhcnRlZChjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKGZhbHNlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5zZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaylcbiAgICApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzYXZlU3Vic2NyaXB0aW9uKHNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKChydW50aW1lKSA9PiB7XG4gICAgICByZXR1cm4gcnVudGltZS5zYXZlU3Vic2NyaXB0aW9uKHNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2spO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93TG9naW5Qcm9tcHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbigocnVudGltZSkgPT4ge1xuICAgICAgcmV0dXJuIHJ1bnRpbWUuc2hvd0xvZ2luUHJvbXB0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dMb2dpbk5vdGlmaWNhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKChydW50aW1lKSA9PiB7XG4gICAgICByZXR1cm4gcnVudGltZS5zaG93TG9naW5Ob3RpZmljYXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY3JlYXRlQnV0dG9uKG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbkFwaV8uY3JlYXRlKG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF0dGFjaFNtYXJ0QnV0dG9uKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbigocnVudGltZSkgPT5cbiAgICAgIHJ1bnRpbWUuYXR0YWNoU21hcnRCdXR0b24oYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXR0YWNoQnV0dG9uKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uQXBpXy5hdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRQcm9wZW5zaXR5TW9kdWxlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHtcbiAgICAgIHJldHVybiBydW50aW1lLmdldFByb3BlbnNpdHlNb2R1bGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0TG9nZ2VyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWRfKHRydWUpLnRoZW4oKHJ1bnRpbWUpID0+IHJ1bnRpbWUuZ2V0TG9nZ2VyKCkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRFdmVudE1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZF8odHJ1ZSkudGhlbigocnVudGltZSkgPT4gcnVudGltZS5nZXRFdmVudE1hbmFnZXIoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldFNob3djYXNlRW50aXRsZW1lbnQoZW50aXRsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5zZXRTaG93Y2FzZUVudGl0bGVtZW50KGVudGl0bGVtZW50KVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbnN1bWVTaG93Y2FzZUVudGl0bGVtZW50Snd0KHNob3djYXNlRW50aXRsZW1lbnRKd3QsIG9uQ2xvc2VEaWFsb2cpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkXyh0cnVlKS50aGVuKChydW50aW1lKSA9PlxuICAgICAgcnVudGltZS5jb25zdW1lU2hvd2Nhc2VFbnRpdGxlbWVudEp3dChcbiAgICAgICAgc2hvd2Nhc2VFbnRpdGxlbWVudEp3dCxcbiAgICAgICAgb25DbG9zZURpYWxvZ1xuICAgICAgKVxuICAgICk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dCZXN0QXVkaWVuY2VBY3Rpb24oKSB7XG4gICAgd2FybignTm90IGltcGxlbWVudGVkIHlldCcpO1xuICB9XG59XG5cbi8qKlxuICogQGltcGxlbWVudHMge0RlcHNEZWZ9XG4gKiBAaW1wbGVtZW50cyB7U3Vic2NyaXB0aW9uc31cbiAqL1xuZXhwb3J0IGNsYXNzIENvbmZpZ3VyZWRSdW50aW1lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd3whRG9jdW1lbnR8IURvY30gd2luT3JEb2NcbiAgICogQHBhcmFtIHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ30gcGFnZUNvbmZpZ1xuICAgKiBAcGFyYW0ge3tcbiAgICogICAgIGZldGNoZXI6ICghRmV0Y2hlcnx1bmRlZmluZWQpLFxuICAgKiAgICAgY29uZmlnUHJvbWlzZTogKCFQcm9taXNlfHVuZGVmaW5lZCksXG4gICAqICAgfT19IGludGVnclxuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Db25maWc9fSBjb25maWdcbiAgICogQHBhcmFtIHshe1xuICAgKiAgIGxhbmc6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAgICogICB0aGVtZTogKCEuLi9hcGkvYmFzaWMtc3Vic2NyaXB0aW9ucy5DbGllbnRUaGVtZXx1bmRlZmluZWQpLFxuICAgKiAgIH09fSBjbGllbnRPcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW5PckRvYywgcGFnZUNvbmZpZywgaW50ZWdyLCBjb25maWcsIGNsaWVudE9wdGlvbnMpIHtcbiAgICBpbnRlZ3IgPSBpbnRlZ3IgfHwge307XG4gICAgaW50ZWdyLmNvbmZpZ1Byb21pc2UgPSBpbnRlZ3IuY29uZmlnUHJvbWlzZSB8fCBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFDbGllbnRFdmVudE1hbmFnZXJ9ICovXG4gICAgdGhpcy5ldmVudE1hbmFnZXJfID0gbmV3IENsaWVudEV2ZW50TWFuYWdlcihpbnRlZ3IuY29uZmlnUHJvbWlzZSk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IHJlc29sdmVEb2Mod2luT3JEb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB0aGlzLmRvY18uZ2V0V2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGRlZmF1bHRDb25maWcoKTtcblxuICAgIGlmIChpc0xlZ2FjeUVkZ2VCcm93c2VyKHRoaXMud2luXykpIHtcbiAgICAgIC8vIFRPRE8oZHZveXRlbmtvLCBiLzEyMDYwNzM0Myk6IEZpbmQgYSB3YXkgdG8gcmVtb3ZlIHRoaXMgcmVzdHJpY3Rpb25cbiAgICAgIC8vIG9yIG1vdmUgaXQgdG8gV2ViIEFjdGl2aXRpZXMuXG4gICAgICB0aGlzLmNvbmZpZ18ud2luZG93T3Blbk1vZGUgPSBXaW5kb3dPcGVuTW9kZS5SRURJUkVDVDtcbiAgICB9XG4gICAgaWYgKGNvbmZpZykge1xuICAgICAgdGhpcy5jb25maWd1cmVfKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnXyA9IHBhZ2VDb25maWc7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLmRvY3VtZW50UGFyc2VkXyA9IHRoaXMuZG9jXy53aGVuUmVhZHkoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFKc0Vycm9yfSAqL1xuICAgIHRoaXMuanNlcnJvcl8gPSBuZXcgSnNFcnJvcih0aGlzLmRvY18pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUZldGNoZXJ9ICovXG4gICAgdGhpcy5mZXRjaGVyXyA9IGludGVnci5mZXRjaGVyIHx8IG5ldyBYaHJGZXRjaGVyKHRoaXMud2luXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshU3RvcmFnZX0gKi9cbiAgICB0aGlzLnN0b3JhZ2VfID0gbmV3IFN0b3JhZ2UodGhpcy53aW5fKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBuZXcgRGlhbG9nTWFuYWdlcih0aGlzLmRvY18pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUNhbGxiYWNrc30gKi9cbiAgICB0aGlzLmNhbGxiYWNrc18gPSBuZXcgQ2FsbGJhY2tzKCk7XG5cbiAgICAvLyBXQVJOSU5HOiBEZXBzRGVmICgndGhpcycpIGlzIGJlaW5nIHByb2dyZXNzaXZlbHkgZGVmaW5lZCBiZWxvdy5cbiAgICAvLyBDb25zdHJ1Y3RvcnMgd2lsbCBjcmFzaCBpZiB0aGV5IHJlbHkgb24gc29tZXRoaW5nIHRoYXQgZG9lc24ndCBleGlzdCB5ZXQuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBuZXcgQWN0aXZpdHlQb3J0cyh0aGlzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBbmFseXRpY3NTZXJ2aWNlfSAqL1xuICAgIHRoaXMuYW5hbHl0aWNzU2VydmljZV8gPSBuZXcgQW5hbHl0aWNzU2VydmljZSh0aGlzLCB0aGlzLmZldGNoZXJfKTtcbiAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfLnN0YXJ0KCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUGF5Q2xpZW50fSAqL1xuICAgIHRoaXMucGF5Q2xpZW50XyA9IG5ldyBQYXlDbGllbnQodGhpcyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshTG9nZ2VyfSAqL1xuICAgIHRoaXMubG9nZ2VyXyA9IG5ldyBMb2dnZXIodGhpcyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRW50aXRsZW1lbnRzTWFuYWdlcn0gKi9cbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfID0gbmV3IEVudGl0bGVtZW50c01hbmFnZXIoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLnBhZ2VDb25maWdfLFxuICAgICAgdGhpcy5mZXRjaGVyXyxcbiAgICAgIHRoaXMgLy8gU2VlIG5vdGUgYWJvdXQgJ3RoaXMnIGFib3ZlXG4gICAgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFDbGllbnRDb25maWdNYW5hZ2VyfSAqL1xuICAgIHRoaXMuY2xpZW50Q29uZmlnTWFuYWdlcl8gPSBuZXcgQ2xpZW50Q29uZmlnTWFuYWdlcihcbiAgICAgIHBhZ2VDb25maWcuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgdGhpcy5mZXRjaGVyXyxcbiAgICAgIGNsaWVudE9wdGlvbnNcbiAgICApO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb3BlbnNpdHl9ICovXG4gICAgdGhpcy5wcm9wZW5zaXR5TW9kdWxlXyA9IG5ldyBQcm9wZW5zaXR5KFxuICAgICAgdGhpcy53aW5fLFxuICAgICAgdGhpcywgLy8gU2VlIG5vdGUgYWJvdXQgJ3RoaXMnIGFib3ZlXG4gICAgICB0aGlzLmZldGNoZXJfXG4gICAgKTtcblxuICAgIC8vIEFMTCBDTEVBUjogRGVwc0RlZiBkZWZpbml0aW9uIG5vdyBjb21wbGV0ZS5cbiAgICB0aGlzLmV2ZW50TWFuYWdlcl8ubG9nU3dnRXZlbnQoQW5hbHl0aWNzRXZlbnQuSU1QUkVTU0lPTl9QQUdFX0xPQUQsIGZhbHNlKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPZmZlcnNBcGl9ICovXG4gICAgdGhpcy5vZmZlcnNBcGlfID0gbmV3IE9mZmVyc0FwaSh0aGlzLnBhZ2VDb25maWdfLCB0aGlzLmZldGNoZXJfKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFCdXR0b25BcGl9ICovXG4gICAgdGhpcy5idXR0b25BcGlfID0gbmV3IEJ1dHRvbkFwaSh0aGlzLmRvY18sIFByb21pc2UucmVzb2x2ZSh0aGlzKSk7XG5cbiAgICBjb25zdCBwcmVjb25uZWN0ID0gbmV3IFByZWNvbm5lY3QodGhpcy53aW5fLmRvY3VtZW50KTtcblxuICAgIHByZWNvbm5lY3QucHJlZmV0Y2goJyRhc3NldHMkL2xvYWRlci5zdmcnKTtcbiAgICBwcmVjb25uZWN0LnByZWNvbm5lY3QoJ2h0dHBzOi8vd3d3LmdzdGF0aWMuY29tLycpO1xuICAgIHByZWNvbm5lY3QucHJlY29ubmVjdCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS8nKTtcbiAgICBwcmVjb25uZWN0LnByZWNvbm5lY3QoJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vJyk7XG4gICAgTGlua0NvbXBsZXRlRmxvdy5jb25maWd1cmVQZW5kaW5nKHRoaXMpO1xuICAgIFBheUNvbXBsZXRlRmxvdy5jb25maWd1cmVQZW5kaW5nKHRoaXMpO1xuXG4gICAgaW5qZWN0U3R5bGVTaGVldCh0aGlzLmRvY18sIFNXR19ESUFMT0cpO1xuXG4gICAgLy8gUmVwb3J0IHJlZGlyZWN0IGVycm9ycyBpZiBhbnkuXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXy5vblJlZGlyZWN0RXJyb3IoKGVycm9yKSA9PiB7XG4gICAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfLmFkZExhYmVscyhbJ3JlZGlyZWN0J10pO1xuICAgICAgdGhpcy5ldmVudE1hbmFnZXJfLmxvZ1N3Z0V2ZW50KFxuICAgICAgICBBbmFseXRpY3NFdmVudC5FVkVOVF9QQVlNRU5UX0ZBSUxFRCxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgICB0aGlzLmpzZXJyb3JfLmVycm9yKCdSZWRpcmVjdCBlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZG9jKCkge1xuICAgIHJldHVybiB0aGlzLmRvY187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHdpbigpIHtcbiAgICByZXR1cm4gdGhpcy53aW5fO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBwYWdlQ29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLnBhZ2VDb25maWdfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBqc2Vycm9yKCkge1xuICAgIHJldHVybiB0aGlzLmpzZXJyb3JfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY3Rpdml0aWVzKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5UG9ydHNfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBwYXlDbGllbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGF5Q2xpZW50XztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZGlhbG9nTWFuYWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5kaWFsb2dNYW5hZ2VyXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZW50aXRsZW1lbnRzTWFuYWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY2FsbGJhY2tzKCkge1xuICAgIHJldHVybiB0aGlzLmNhbGxiYWNrc187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZV87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNsaWVudENvbmZpZ01hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50Q29uZmlnTWFuYWdlcl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFuYWx5dGljcygpIHtcbiAgICByZXR1cm4gdGhpcy5hbmFseXRpY3NTZXJ2aWNlXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaW5pdCgpIHtcbiAgICAvLyBJbXBsZW1lbnRlZCBieSB0aGUgYFJ1bnRpbWVgIGNsYXNzLlxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb25maWd1cmUoY29uZmlnKSB7XG4gICAgLy8gSW5kaXJlY3RlZCBmb3IgY29uc3RydWN0b3IgdGVzdGluZy5cbiAgICB0aGlzLmNvbmZpZ3VyZV8oY29uZmlnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5Db25maWd9IGNvbmZpZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uZmlndXJlXyhjb25maWcpIHtcbiAgICAvLyBWYWxpZGF0ZSBmaXJzdC5cbiAgICBsZXQgZXJyb3IgPSAnJztcbiAgICBmb3IgKGNvbnN0IGsgaW4gY29uZmlnKSB7XG4gICAgICBjb25zdCB2ID0gY29uZmlnW2tdO1xuICAgICAgc3dpdGNoIChrKSB7XG4gICAgICAgIGNhc2UgJ3dpbmRvd09wZW5Nb2RlJzpcbiAgICAgICAgICBpZiAodiAhPSBXaW5kb3dPcGVuTW9kZS5BVVRPICYmIHYgIT0gV2luZG93T3Blbk1vZGUuUkVESVJFQ1QpIHtcbiAgICAgICAgICAgIGVycm9yID0gJ1Vua25vd24gd2luZG93T3Blbk1vZGU6ICcgKyB2O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZXhwZXJpbWVudHMnOlxuICAgICAgICAgIHYuZm9yRWFjaCgoZXhwZXJpbWVudCkgPT4gc2V0RXhwZXJpbWVudCh0aGlzLndpbl8sIGV4cGVyaW1lbnQsIHRydWUpKTtcbiAgICAgICAgICBpZiAodGhpcy5hbmFseXRpY3MoKSkge1xuICAgICAgICAgICAgLy8gSWYgYW5hbHl0aWNzIHNlcnZpY2UgaXNuJ3Qgc2V0IHVwIHlldCwgdGhlbiBpdCB3aWxsIGdldCB0aGVcbiAgICAgICAgICAgIC8vIGV4cGVyaW1lbnRzIGxhdGVyLlxuICAgICAgICAgICAgdGhpcy5hbmFseXRpY3MoKS5hZGRMYWJlbHModik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhbmFseXRpY3NNb2RlJzpcbiAgICAgICAgICBpZiAodiAhPSBBbmFseXRpY3NNb2RlLkRFRkFVTFQgJiYgdiAhPSBBbmFseXRpY3NNb2RlLklNUFJFU1NJT05TKSB7XG4gICAgICAgICAgICBlcnJvciA9ICdVbmtub3duIGFuYWx5dGljcyBtb2RlOiAnICsgdjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2VuYWJsZVN3Z0FuYWx5dGljcyc6XG4gICAgICAgICAgaWYgKCFpc0Jvb2xlYW4odikpIHtcbiAgICAgICAgICAgIGVycm9yID0gJ1Vua25vd24gZW5hYmxlU3dnQW5hbHl0aWNzIHZhbHVlOiAnICsgdjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2VuYWJsZVByb3BlbnNpdHknOlxuICAgICAgICAgIGlmICghaXNCb29sZWFuKHYpKSB7XG4gICAgICAgICAgICBlcnJvciA9ICdVbmtub3duIGVuYWJsZVByb3BlbnNpdHkgdmFsdWU6ICcgKyB2O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBlcnJvciA9ICdVbmtub3duIGNvbmZpZyBwcm9wZXJ0eTogJyArIGs7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFRocm93IGVycm9yIHN0cmluZyBpZiBpdCdzIG5vdCBudWxsXG4gICAgYXNzZXJ0KCFlcnJvciwgZXJyb3IgfHwgdW5kZWZpbmVkKTtcbiAgICAvLyBBc3NpZ24uXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZ18sIGNvbmZpZyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWdfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICByZXNldCgpIHtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLnJlc2V0KCk7XG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZUFsbCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLmNsZWFyKCk7XG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZUFsbCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBObyBuZWVkIHRvIHJ1biBlbnRpdGxlbWVudHMgd2l0aG91dCBhIHByb2R1Y3Qgb3IgZm9yIGFuIHVubG9ja2VkIHBhZ2UuXG4gICAgaWYgKCF0aGlzLnBhZ2VDb25maWdfLmdldFByb2R1Y3RJZCgpIHx8ICF0aGlzLnBhZ2VDb25maWdfLmlzTG9ja2VkKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdGhpcy5nZXRFbnRpdGxlbWVudHMoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0RW50aXRsZW1lbnRzKHBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfXG4gICAgICAuZ2V0RW50aXRsZW1lbnRzKHBhcmFtcylcbiAgICAgIC50aGVuKChlbnRpdGxlbWVudHMpID0+IHtcbiAgICAgICAgLy8gQXV0byB1cGRhdGUgaW50ZXJuYWwgdGhpbmdzIHRyYWNraW5nIHRoZSB1c2VyJ3MgY3VycmVudCBTS1UuXG4gICAgICAgIGlmIChlbnRpdGxlbWVudHMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2t1cyA9IGVudGl0bGVtZW50cy5lbnRpdGxlbWVudHMubWFwKFxuICAgICAgICAgICAgICAoZW50aXRsZW1lbnQpID0+XG4gICAgICAgICAgICAgICAgZW50aXRsZW1lbnQuZ2V0U2t1KCkgfHwgJ3Vua25vd24gc3Vic2NyaXB0aW9uVG9rZW4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHNrdXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICB0aGlzLmFuYWx5dGljc1NlcnZpY2VfLnNldFNrdShza3VzLmpvaW4oJywnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudGl0bGVtZW50cy5jbG9uZSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25FbnRpdGxlbWVudHNSZXNwb25zZShjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldE9mZmVycyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMub2ZmZXJzQXBpXy5nZXRPZmZlcnMob3B0aW9ucyAmJiBvcHRpb25zLnByb2R1Y3RJZCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dPZmZlcnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgICdUaGUgc2hvd09mZmVycygpIG1ldGhvZCBjYW5ub3QgYmUgdXNlZCB0byB1cGRhdGUgYSBzdWJzY3JpcHRpb24uICcgK1xuICAgICAgICAnVXNlIHRoZSBzaG93VXBkYXRlT2ZmZXJzKCkgbWV0aG9kIGluc3RlYWQuJztcbiAgICAgIGFzc2VydChvcHRpb25zID8gIW9wdGlvbnNbJ29sZFNrdSddIDogdHJ1ZSwgZXJyb3JNZXNzYWdlKTtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgT2ZmZXJzRmxvdyh0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmbG93LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dVcGRhdGVPZmZlcnMob3B0aW9ucykge1xuICAgIGFzc2VydChcbiAgICAgIGlzRXhwZXJpbWVudE9uKHRoaXMud2luXywgRXhwZXJpbWVudEZsYWdzLlJFUExBQ0VfU1VCU0NSSVBUSU9OKSxcbiAgICAgICdOb3QgeWV0IGxhdW5jaGVkISdcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgICdUaGUgc2hvd1VwZGF0ZU9mZmVycygpIG1ldGhvZCBjYW5ub3QgYmUgdXNlZCBmb3IgbmV3IHN1YnNjcmliZXJzLiAnICtcbiAgICAgICAgJ1VzZSB0aGUgc2hvd09mZmVycygpIG1ldGhvZCBpbnN0ZWFkLic7XG4gICAgICBhc3NlcnQob3B0aW9ucyA/ICEhb3B0aW9uc1snb2xkU2t1J10gOiBmYWxzZSwgZXJyb3JNZXNzYWdlKTtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgT2ZmZXJzRmxvdyh0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmbG93LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dTdWJzY3JpYmVPcHRpb24ob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgU3Vic2NyaWJlT3B0aW9uRmxvdyh0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmbG93LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dBYmJydk9mZmVyKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBmbG93ID0gbmV3IEFiYnJ2T2ZmZXJGbG93KHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZsb3cuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgQ29udHJpYnV0aW9uc0Zsb3codGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmxvdy5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB3YWl0Rm9yU3Vic2NyaXB0aW9uTG9va3VwKGFjY291bnRQcm9taXNlKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3Qgd2FpdCA9IG5ldyBXYWl0Rm9yU3Vic2NyaXB0aW9uTG9va3VwQXBpKHRoaXMsIGFjY291bnRQcm9taXNlKTtcbiAgICAgIHJldHVybiB3YWl0LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uTG9naW5SZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uTG9naW5SZXF1ZXN0KGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgdHJpZ2dlckxvZ2luUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnRyaWdnZXJMb2dpblJlcXVlc3QocmVxdWVzdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uTGlua0NvbXBsZXRlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbGlua0FjY291bnQocGFyYW1zID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IExpbmtiYWNrRmxvdyh0aGlzKS5zdGFydChwYXJhbXMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzYXZlU3Vic2NyaXB0aW9uKHNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IExpbmtTYXZlRmxvdyh0aGlzLCBzYXZlU3Vic2NyaXB0aW9uUmVxdWVzdENhbGxiYWNrKS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93TG9naW5Qcm9tcHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBMb2dpblByb21wdEFwaSh0aGlzKS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93TG9naW5Ob3RpZmljYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBMb2dpbk5vdGlmaWNhdGlvbkFwaSh0aGlzKS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3QoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25TdWJzY3JpYmVSZXF1ZXN0KGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25TdWJzY3JpYmVSZXNwb25zZShjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPblN1YnNjcmliZVJlc3BvbnNlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25QYXltZW50UmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25QYXltZW50UmVzcG9uc2UoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdWJzY3JpYmUoc2t1KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICdUaGUgc3Vic2NyaWJlKCkgbWV0aG9kIGNhbiBvbmx5IHRha2UgYSBza3UgYXMgaXRzIHBhcmFtZXRlcjsgJyArXG4gICAgICAnZm9yIHN1YnNjcmlwdGlvbiB1cGRhdGVzIHBsZWFzZSB1c2UgdGhlIHVwZGF0ZVN1YnNjcmlwdGlvbigpIG1ldGhvZCc7XG4gICAgYXNzZXJ0KHR5cGVvZiBza3UgPT09ICdzdHJpbmcnLCBlcnJvck1lc3NhZ2UpO1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUGF5U3RhcnRGbG93KHRoaXMsIHsnc2t1SWQnOiBza3V9KS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB1cGRhdGVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIGFzc2VydChcbiAgICAgIGlzRXhwZXJpbWVudE9uKHRoaXMud2luXywgRXhwZXJpbWVudEZsYWdzLlJFUExBQ0VfU1VCU0NSSVBUSU9OKSxcbiAgICAgICdOb3QgeWV0IGxhdW5jaGVkISdcbiAgICApO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAnVGhlIHVwZGF0ZVN1YnNjcmlwdGlvbigpIG1ldGhvZCBzaG91bGQgYmUgdXNlZCBmb3Igc3Vic2NyaXB0aW9uICcgK1xuICAgICAgJ3VwZGF0ZXM7IGZvciBuZXcgc3Vic2NyaXB0aW9ucyBwbGVhc2UgdXNlIHRoZSBzdWJzY3JpYmUoKSBtZXRob2QnO1xuICAgIGFzc2VydChcbiAgICAgIHN1YnNjcmlwdGlvblJlcXVlc3QgPyBzdWJzY3JpcHRpb25SZXF1ZXN0WydvbGRTa3UnXSA6IGZhbHNlLFxuICAgICAgZXJyb3JNZXNzYWdlXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFBheVN0YXJ0Rmxvdyh0aGlzLCBzdWJzY3JpcHRpb25SZXF1ZXN0KS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkNvbnRyaWJ1dGlvblJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uQ29udHJpYnV0aW9uUmVzcG9uc2UoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb250cmlidXRlKHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgIC8qKiBAdHlwZSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlN1YnNjcmlwdGlvblJlcXVlc3R9ICovXG4gICAgY29uc3QgcmVxdWVzdCA9XG4gICAgICB0eXBlb2Ygc2t1T3JTdWJzY3JpcHRpb25SZXF1ZXN0ID09ICdzdHJpbmcnXG4gICAgICAgID8geydza3VJZCc6IHNrdU9yU3Vic2NyaXB0aW9uUmVxdWVzdH1cbiAgICAgICAgOiBza3VPclN1YnNjcmlwdGlvblJlcXVlc3Q7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQYXlTdGFydEZsb3coXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIFByb2R1Y3RUeXBlLlVJX0NPTlRSSUJVVElPTlxuICAgICAgKS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IERlZmVycmVkQWNjb3VudEZsb3codGhpcywgb3B0aW9ucyB8fCBudWxsKS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkZsb3dTdGFydGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uRmxvd1N0YXJ0ZWQoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPbkZsb3dDYW5jZWxlZChjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNyZWF0ZUJ1dHRvbihvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAvLyBUaGlzIGlzIGEgbWlub3IgZHVwbGljYXRpb24gdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGJlIHN5bmMuXG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uQXBpXy5jcmVhdGUob3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXR0YWNoQnV0dG9uKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgLy8gVGhpcyBpcyBhIG1pbm9yIGR1cGxpY2F0aW9uIHRvIGFsbG93IHRoaXMgY29kZSB0byBiZSBzeW5jLlxuICAgIHRoaXMuYnV0dG9uQXBpXy5hdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhdHRhY2hTbWFydEJ1dHRvbihidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgIGFzc2VydChcbiAgICAgIGlzRXhwZXJpbWVudE9uKHRoaXMud2luXywgRXhwZXJpbWVudEZsYWdzLlNNQVJUQk9YKSxcbiAgICAgICdOb3QgeWV0IGxhdW5jaGVkISdcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uQXBpXy5hdHRhY2hTbWFydEJ1dHRvbihcbiAgICAgIHRoaXMsXG4gICAgICBidXR0b24sXG4gICAgICBvcHRpb25zT3JDYWxsYmFjayxcbiAgICAgIGNhbGxiYWNrXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0UHJvcGVuc2l0eU1vZHVsZSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJvcGVuc2l0eU1vZHVsZV8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgb25lIGV4aXN0cyBhcyBhbiBpbnRlcm5hbCBoZWxwZXIgc28gU3dHIGxvZ2dpbmcgZG9lc24ndCByZXF1aXJlIGEgcHJvbWlzZS5cbiAgICogQHJldHVybiB7IUNsaWVudEV2ZW50TWFuYWdlcn1cbiAgICovXG4gIGV2ZW50TWFuYWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudE1hbmFnZXJfO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgb25lIGV4aXN0cyBhcyBhIHB1YmxpYyBBUEkgc28gcHVibGlzaGVycyBjYW4gc3Vic2NyaWJlIHRvIFN3RyBldmVudHMuXG4gICAqIEBvdmVycmlkZSAqL1xuICBnZXRFdmVudE1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmV2ZW50TWFuYWdlcl8pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRMb2dnZXIoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmxvZ2dlcl8pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRTaG93Y2FzZUVudGl0bGVtZW50KGVudGl0bGVtZW50KSB7XG4gICAgaWYgKFxuICAgICAgIWVudGl0bGVtZW50IHx8XG4gICAgICAhaXNTZWN1cmUodGhpcy53aW4oKS5sb2NhdGlvbikgfHxcbiAgICAgICF3YXNSZWZlcnJlZEJ5R29vZ2xlKHBhcnNlVXJsKHRoaXMud2luKCkuZG9jdW1lbnQucmVmZXJyZXIpKSB8fFxuICAgICAgIXF1ZXJ5U3RyaW5nSGFzRnJlc2hHYWFQYXJhbXModGhpcy53aW4oKS5sb2NhdGlvbi5zZWFyY2gpXG4gICAgKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnRzVG9Mb2cgPVxuICAgICAgcHVibGlzaGVyRW50aXRsZW1lbnRFdmVudFRvQW5hbHl0aWNzRXZlbnRzKGVudGl0bGVtZW50LmVudGl0bGVtZW50KSB8fCBbXTtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgRXZlbnRQYXJhbXMoKTtcbiAgICBwYXJhbXMuc2V0SXNVc2VyUmVnaXN0ZXJlZChlbnRpdGxlbWVudC5pc1VzZXJSZWdpc3RlcmVkKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnRzVG9Mb2cubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyKCkubG9nRXZlbnQoe1xuICAgICAgICBldmVudFR5cGU6IGV2ZW50c1RvTG9nW2ldLFxuICAgICAgICBldmVudE9yaWdpbmF0b3I6IEV2ZW50T3JpZ2luYXRvci5TSE9XQ0FTRV9DTElFTlQsXG4gICAgICAgIGlzRnJvbVVzZXJBY3Rpb246IGZhbHNlLFxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogcGFyYW1zLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb25zdW1lU2hvd2Nhc2VFbnRpdGxlbWVudEp3dChzaG93Y2FzZUVudGl0bGVtZW50Snd0LCBvbkNsb3NlRGlhbG9nKSB7XG4gICAgY29uc3QgZW50aXRsZW1lbnRzID0gdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkucGFyc2VFbnRpdGxlbWVudHMoe1xuICAgICAgc2lnbmVkRW50aXRsZW1lbnRzOiBzaG93Y2FzZUVudGl0bGVtZW50Snd0LFxuICAgIH0pO1xuICAgIGVudGl0bGVtZW50cy5jb25zdW1lKG9uQ2xvc2VEaWFsb2cpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93QmVzdEF1ZGllbmNlQWN0aW9uKCkge1xuICAgIHdhcm4oJ05vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IVJ1bnRpbWV9IHJ1bnRpbWVcbiAqIEByZXR1cm4geyFTdWJzY3JpcHRpb25zfVxuICovXG5mdW5jdGlvbiBjcmVhdGVQdWJsaWNSdW50aW1lKHJ1bnRpbWUpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVN1YnNjcmlwdGlvbnN9ICovICh7XG4gICAgaW5pdDogcnVudGltZS5pbml0LmJpbmQocnVudGltZSksXG4gICAgY29uZmlndXJlOiBydW50aW1lLmNvbmZpZ3VyZS5iaW5kKHJ1bnRpbWUpLFxuICAgIHN0YXJ0OiBydW50aW1lLnN0YXJ0LmJpbmQocnVudGltZSksXG4gICAgcmVzZXQ6IHJ1bnRpbWUucmVzZXQuYmluZChydW50aW1lKSxcbiAgICBjbGVhcjogcnVudGltZS5jbGVhci5iaW5kKHJ1bnRpbWUpLFxuICAgIGdldEVudGl0bGVtZW50czogcnVudGltZS5nZXRFbnRpdGxlbWVudHMuYmluZChydW50aW1lKSxcbiAgICBsaW5rQWNjb3VudDogcnVudGltZS5saW5rQWNjb3VudC5iaW5kKHJ1bnRpbWUpLFxuICAgIHNob3dMb2dpblByb21wdDogcnVudGltZS5zaG93TG9naW5Qcm9tcHQuYmluZChydW50aW1lKSxcbiAgICBzaG93TG9naW5Ob3RpZmljYXRpb246IHJ1bnRpbWUuc2hvd0xvZ2luTm90aWZpY2F0aW9uLmJpbmQocnVudGltZSksXG4gICAgZ2V0T2ZmZXJzOiBydW50aW1lLmdldE9mZmVycy5iaW5kKHJ1bnRpbWUpLFxuICAgIHNob3dPZmZlcnM6IHJ1bnRpbWUuc2hvd09mZmVycy5iaW5kKHJ1bnRpbWUpLFxuICAgIHNob3dVcGRhdGVPZmZlcnM6IHJ1bnRpbWUuc2hvd1VwZGF0ZU9mZmVycy5iaW5kKHJ1bnRpbWUpLFxuICAgIHNob3dBYmJydk9mZmVyOiBydW50aW1lLnNob3dBYmJydk9mZmVyLmJpbmQocnVudGltZSksXG4gICAgc2hvd1N1YnNjcmliZU9wdGlvbjogcnVudGltZS5zaG93U3Vic2NyaWJlT3B0aW9uLmJpbmQocnVudGltZSksXG4gICAgc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnM6IHJ1bnRpbWUuc2hvd0NvbnRyaWJ1dGlvbk9wdGlvbnMuYmluZChydW50aW1lKSxcbiAgICB3YWl0Rm9yU3Vic2NyaXB0aW9uTG9va3VwOiBydW50aW1lLndhaXRGb3JTdWJzY3JpcHRpb25Mb29rdXAuYmluZChydW50aW1lKSxcbiAgICBzdWJzY3JpYmU6IHJ1bnRpbWUuc3Vic2NyaWJlLmJpbmQocnVudGltZSksXG4gICAgdXBkYXRlU3Vic2NyaXB0aW9uOiBydW50aW1lLnVwZGF0ZVN1YnNjcmlwdGlvbi5iaW5kKHJ1bnRpbWUpLFxuICAgIGNvbnRyaWJ1dGU6IHJ1bnRpbWUuY29udHJpYnV0ZS5iaW5kKHJ1bnRpbWUpLFxuICAgIGNvbXBsZXRlRGVmZXJyZWRBY2NvdW50Q3JlYXRpb246IHJ1bnRpbWUuY29tcGxldGVEZWZlcnJlZEFjY291bnRDcmVhdGlvbi5iaW5kKFxuICAgICAgcnVudGltZVxuICAgICksXG4gICAgc2V0T25FbnRpdGxlbWVudHNSZXNwb25zZTogcnVudGltZS5zZXRPbkVudGl0bGVtZW50c1Jlc3BvbnNlLmJpbmQocnVudGltZSksXG4gICAgc2V0T25Mb2dpblJlcXVlc3Q6IHJ1bnRpbWUuc2V0T25Mb2dpblJlcXVlc3QuYmluZChydW50aW1lKSxcbiAgICB0cmlnZ2VyTG9naW5SZXF1ZXN0OiBydW50aW1lLnRyaWdnZXJMb2dpblJlcXVlc3QuYmluZChydW50aW1lKSxcbiAgICBzZXRPbkxpbmtDb21wbGV0ZTogcnVudGltZS5zZXRPbkxpbmtDb21wbGV0ZS5iaW5kKHJ1bnRpbWUpLFxuICAgIHNldE9uTmF0aXZlU3Vic2NyaWJlUmVxdWVzdDogcnVudGltZS5zZXRPbk5hdGl2ZVN1YnNjcmliZVJlcXVlc3QuYmluZChcbiAgICAgIHJ1bnRpbWVcbiAgICApLFxuICAgIHNldE9uUGF5bWVudFJlc3BvbnNlOiBydW50aW1lLnNldE9uUGF5bWVudFJlc3BvbnNlLmJpbmQocnVudGltZSksXG4gICAgc2V0T25TdWJzY3JpYmVSZXNwb25zZTogcnVudGltZS5zZXRPblN1YnNjcmliZVJlc3BvbnNlLmJpbmQocnVudGltZSksXG4gICAgc2V0T25Db250cmlidXRpb25SZXNwb25zZTogcnVudGltZS5zZXRPbkNvbnRyaWJ1dGlvblJlc3BvbnNlLmJpbmQocnVudGltZSksXG4gICAgc2V0T25GbG93U3RhcnRlZDogcnVudGltZS5zZXRPbkZsb3dTdGFydGVkLmJpbmQocnVudGltZSksXG4gICAgc2V0T25GbG93Q2FuY2VsZWQ6IHJ1bnRpbWUuc2V0T25GbG93Q2FuY2VsZWQuYmluZChydW50aW1lKSxcbiAgICBzYXZlU3Vic2NyaXB0aW9uOiBydW50aW1lLnNhdmVTdWJzY3JpcHRpb24uYmluZChydW50aW1lKSxcbiAgICBjcmVhdGVCdXR0b246IHJ1bnRpbWUuY3JlYXRlQnV0dG9uLmJpbmQocnVudGltZSksXG4gICAgYXR0YWNoQnV0dG9uOiBydW50aW1lLmF0dGFjaEJ1dHRvbi5iaW5kKHJ1bnRpbWUpLFxuICAgIGF0dGFjaFNtYXJ0QnV0dG9uOiBydW50aW1lLmF0dGFjaFNtYXJ0QnV0dG9uLmJpbmQocnVudGltZSksXG4gICAgZ2V0UHJvcGVuc2l0eU1vZHVsZTogcnVudGltZS5nZXRQcm9wZW5zaXR5TW9kdWxlLmJpbmQocnVudGltZSksXG4gICAgZ2V0TG9nZ2VyOiBydW50aW1lLmdldExvZ2dlci5iaW5kKHJ1bnRpbWUpLFxuICAgIGdldEV2ZW50TWFuYWdlcjogcnVudGltZS5nZXRFdmVudE1hbmFnZXIuYmluZChydW50aW1lKSxcbiAgICBzZXRTaG93Y2FzZUVudGl0bGVtZW50OiBydW50aW1lLnNldFNob3djYXNlRW50aXRsZW1lbnQuYmluZChydW50aW1lKSxcbiAgICBjb25zdW1lU2hvd2Nhc2VFbnRpdGxlbWVudEp3dDogcnVudGltZS5jb25zdW1lU2hvd2Nhc2VFbnRpdGxlbWVudEp3dC5iaW5kKFxuICAgICAgcnVudGltZVxuICAgICksXG4gICAgc2hvd0Jlc3RBdWRpZW5jZUFjdGlvbjogcnVudGltZS5zaG93QmVzdEF1ZGllbmNlQWN0aW9uLmJpbmQocnVudGltZSksXG4gIH0pO1xufVxuXG4vKipcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbnNDbGFzc0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBTdWJzY3JpcHRpb25zO1xufVxuXG4vKipcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZldGNoZXJDbGFzc0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBGZXRjaGVyO1xufVxuXG4vKiogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERvY0NsYXNzRm9yVGVzdGluZygpIHtcbiAgcmV0dXJuIERvYztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHthZGRRdWVyeVBhcmFtLCBwYXJzZVF1ZXJ5U3RyaW5nLCBwYXJzZVVybH0gZnJvbSAnLi4vdXRpbHMvdXJsJztcblxuLyoqXG4gKiBIYXZlIHRvIHB1dCB0aGVzZSBpbiB0aGUgbWFwIHRvIGF2b2lkIGNvbXBpbGVyIG9wdGltaXphdGlvbi4gRHVlIHRvXG4gKiBvcHRpbWl6YXRpb24gaXNzdWVzLCB0aGlzIG1hcCBvbmx5IGFsbG93cyBwcm9wZXJ0eS1zdHlsZSBrZXlzLiBFLmcuIFwiaHIxXCIsXG4gKiBhcyBvcHBvc2VkIHRvIFwiMWhyXCIuXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjb25zdCBDQUNIRV9LRVlTID0ge1xuICAnbm9jYWNoZSc6IDEsXG4gICdocjEnOiAzNjAwMDAwLCAvLyAxaHIgPSAxMDAwICogNjAgKiA2MFxuICAnaHIxMic6IDQzMjAwMDAwLCAvLyAxMmhyID0gMTAwMCAqIDYwICogNjAgKiAxMlxufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZU9yaWdpbigpIHtcbiAgcmV0dXJuIHBhcnNlVXJsKCckZnJvbnRlbmQkJykub3JpZ2luO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgVVJMLCBlLmcuIFwiL3NlcnZpY2UxXCIuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wbGV0ZSBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlVXJsKHVybCkge1xuICByZXR1cm4gJyRmcm9udGVuZCQvc3dnL18vYXBpL3YxJyArIHVybDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsICBSZWxhdGl2ZSBVUkwsIGUuZy4gXCIvc2VydmljZTFcIi5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBsZXRlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkc1VybCh1cmwpIHtcbiAgcmV0dXJuICckYWRzU2VydmVyJCcgKyB1cmw7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBVUkwsIGUuZy4gXCIvb2ZmZXJzaWZyYW1lXCIuXG4gKiBAcGFyYW0ge3N0cmluZz19IHByZWZpeFxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+PX0gcGFyYW1zIExpc3Qgb2YgZXh0cmEgcGFyYW1zIHRvIGFwcGVuZCB0byB0aGUgVVJMLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29tcGxldGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmVVcmwodXJsLCBwcmVmaXggPSAnJywgcGFyYW1zKSB7XG4gIC8vIEFkZCBjYWNoZSBwYXJhbS5cbiAgdXJsID0gZmVDYWNoZWQoJyRmcm9udGVuZCQnICsgcHJlZml4ICsgJy9zd2cvXy91aS92MScgKyB1cmwpO1xuXG4gIC8vIE9wdGlvbmFsbHkgYWRkIGpzbW9kZSBwYXJhbS4gVGhpcyBhbGxvd3MgdXMgdG8gdGVzdCBhZ2FpbnN0IFwiYWdncmVzc2l2ZWx5XCIgY29tcGlsZWQgQm9xIEpTLlxuICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcoc2VsZi5sb2NhdGlvbi5oYXNoKTtcbiAgY29uc3QgYm9xSnNNb2RlID0gcXVlcnlbJ3N3Zy5ib3Fqc21vZGUnXTtcbiAgaWYgKGJvcUpzTW9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdXJsID0gYWRkUXVlcnlQYXJhbSh1cmwsICdqc21vZGUnLCBib3FKc01vZGUpO1xuICB9XG5cbiAgZm9yIChjb25zdCBwYXJhbSBpbiBwYXJhbXMpIHtcbiAgICB1cmwgPSBhZGRRdWVyeVBhcmFtKHVybCwgcGFyYW0sIHBhcmFtc1twYXJhbV0pO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIEZFIFVSTC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBsZXRlIFVSTCBpbmNsdWRpbmcgY2FjaGUgcGFyYW0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZUNhY2hlZCh1cmwpIHtcbiAgcmV0dXJuIGFkZFF1ZXJ5UGFyYW0odXJsLCAnXycsIGNhY2hlUGFyYW0oJyRmcm9udGVuZENhY2hlJCcpKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCA/Pn0gYXJnc1xuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsID8+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmVBcmdzKGFyZ3MpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYXJncywge1xuICAgICdfY2xpZW50JzogJ1N3RyAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQnLFxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVLZXlcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhY2hlUGFyYW0oY2FjaGVLZXkpIHtcbiAgbGV0IHBlcmlvZCA9IENBQ0hFX0tFWVNbY2FjaGVLZXldO1xuICBpZiAocGVyaW9kID09IG51bGwpIHtcbiAgICBwZXJpb2QgPSAxO1xuICB9XG4gIGlmIChwZXJpb2QgPT09IDApIHtcbiAgICByZXR1cm4gJ18nO1xuICB9XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIHJldHVybiBTdHJpbmcocGVyaW9kIDw9IDEgPyBub3cgOiBNYXRoLmZsb29yKG5vdyAvIHBlcmlvZCkpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NtYXJ0Qm94TWVzc2FnZX0gZnJvbSAnLi4vcHJvdG8vYXBpX21lc3NhZ2VzJztcbmltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7ZmVBcmdzLCBmZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge3NldEltcG9ydGFudFN0eWxlc30gZnJvbSAnLi4vdXRpbHMvc3R5bGUnO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmNvbnN0IGlmcmFtZUF0dHJpYnV0ZXMgPSB7XG4gICdmcmFtZWJvcmRlcic6ICcwJyxcbiAgJ3Njcm9sbGluZyc6ICdubycsXG59O1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBUaGVtZSA9IHtcbiAgTElHSFQ6ICdsaWdodCcsXG4gIERBUks6ICdkYXJrJyxcbn07XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBTbWFydCBidXR0b24gQXBpLlxuICovXG5leHBvcnQgY2xhc3MgU21hcnRTdWJzY3JpcHRpb25CdXR0b25BcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHshRWxlbWVudH0gYnV0dG9uXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNtYXJ0QnV0dG9uT3B0aW9uc30gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudD0pPX0gY2FsbGJhY2tcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIGJ1dHRvbiwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gdGhpcy53aW5fLmRvY3VtZW50O1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSAvKiogQHR5cGUgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi8gKGNyZWF0ZUVsZW1lbnQoXG4gICAgICB0aGlzLmRvY18sXG4gICAgICAnaWZyYW1lJyxcbiAgICAgIGlmcmFtZUF0dHJpYnV0ZXNcbiAgICApKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuYnV0dG9uXyA9IGJ1dHRvbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNtYXJ0QnV0dG9uT3B0aW9uc30gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gb3B0aW9ucztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLmNhbGxiYWNrXyA9IGNhbGxiYWNrO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc3JjXyA9IGZlVXJsKCcvc21hcnRib3hpZnJhbWUnKTtcblxuICAgIGNvbnN0IGZyb250ZW5kQXJndW1lbnRzID0ge1xuICAgICAgJ3Byb2R1Y3RJZCc6IHRoaXMuZGVwc18ucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAndGhlbWUnOiAodGhpcy5vcHRpb25zXyAmJiB0aGlzLm9wdGlvbnNfLnRoZW1lKSB8fCAnbGlnaHQnLFxuICAgICAgJ2xhbmcnOiAodGhpcy5vcHRpb25zXyAmJiB0aGlzLm9wdGlvbnNfLmxhbmcpIHx8ICdlbicsXG4gICAgfTtcbiAgICBjb25zdCBtZXNzYWdlVGV4dENvbG9yID0gdGhpcy5vcHRpb25zXyAmJiB0aGlzLm9wdGlvbnNfLm1lc3NhZ2VUZXh0Q29sb3I7XG4gICAgaWYgKG1lc3NhZ2VUZXh0Q29sb3IpIHtcbiAgICAgIGZyb250ZW5kQXJndW1lbnRzWydtZXNzYWdlVGV4dENvbG9yJ10gPSBtZXNzYWdlVGV4dENvbG9yO1xuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3R9ICovXG4gICAgdGhpcy5hcmdzXyA9IGZlQXJncyhmcm9udGVuZEFyZ3VtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTbWFydEJveE1lc3NhZ2V9IHNtYXJ0Qm94TWVzc2FnZVxuICAgKi9cbiAgaGFuZGxlU21hcnRCb3hDbGlja18oc21hcnRCb3hNZXNzYWdlKSB7XG4gICAgaWYgKHNtYXJ0Qm94TWVzc2FnZSAmJiBzbWFydEJveE1lc3NhZ2UuZ2V0SXNDbGlja2VkKCkpIHtcbiAgICAgIGlmICghdGhpcy5jYWxsYmFja18pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjYWxsYmFjayEnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FsbGJhY2tfKCk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBhIGNhbGwgdG8gYnVpbGQgYnV0dG9uIGNvbnRlbnQgYW5kIGxpc3RlbnMgZm9yIHRoZSAnY2xpY2snIG1lc3NhZ2UuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuaWZyYW1lXywge1xuICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcbiAgICAgICd0b3AnOiAwLFxuICAgICAgJ2JvdHRvbSc6IDAsXG4gICAgICAnbGVmdCc6IDAsXG4gICAgICAnaGVpZ2h0JzogJzEwMCUnLFxuICAgICAgJ3JpZ2h0JzogMCxcbiAgICAgICd3aWR0aCc6ICcxMDAlJyxcbiAgICB9KTtcbiAgICB0aGlzLmJ1dHRvbl8uYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWVfKTtcbiAgICBjb25zdCBhcmdzID0gdGhpcy5hY3Rpdml0eVBvcnRzXy5hZGREZWZhdWx0QXJndW1lbnRzKHRoaXMuYXJnc18pO1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c19cbiAgICAgIC5vcGVuSWZyYW1lKHRoaXMuaWZyYW1lXywgdGhpcy5zcmNfLCBhcmdzKVxuICAgICAgLnRoZW4oKHBvcnQpID0+IHtcbiAgICAgICAgcG9ydC5vbihTbWFydEJveE1lc3NhZ2UsIHRoaXMuaGFuZGxlU21hcnRCb3hDbGlja18uYmluZCh0aGlzKSk7XG4gICAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IFBSRUZJWCA9ICdzdWJzY3JpYmUuZ29vZ2xlLmNvbSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHN0b3JhZ2Ugb2YgZGF0YSBpbiBzZXNzaW9uIHN0b3JhZ2UuIElmXG4gKiB5b3UncmUgbG9va2luZyB0byBzdG9yZSBkYXRhIGluIGxvY2FsIHN0b3JhZ2UsIHNlZVxuICogc3JjL3J1bnRpbWUvbG9jYWwtc3RvcmFnZS5Mb2NhbFN0b3JhZ2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdG9yYWdlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhUHJvbWlzZTw/c3RyaW5nPj59ICovXG4gICAgdGhpcy52YWx1ZXNfID0ge307XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB1c2VMb2NhbFN0b3JhZ2VcbiAgICogQHJldHVybiB7IVByb21pc2U8P3N0cmluZz59XG4gICAqL1xuICBnZXQoa2V5LCB1c2VMb2NhbFN0b3JhZ2UgPSBmYWxzZSkge1xuICAgIGlmICghdGhpcy52YWx1ZXNfW2tleV0pIHtcbiAgICAgIHRoaXMudmFsdWVzX1trZXldID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHVzZUxvY2FsU3RvcmFnZVxuICAgICAgICAgID8gdGhpcy53aW5fLmxvY2FsU3RvcmFnZVxuICAgICAgICAgIDogdGhpcy53aW5fLnNlc3Npb25TdG9yYWdlO1xuICAgICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKHN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlS2V5KGtleSkpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgZXJyb3IuXG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsdWVzX1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHVzZUxvY2FsU3RvcmFnZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHNldChrZXksIHZhbHVlLCB1c2VMb2NhbFN0b3JhZ2UgPSBmYWxzZSkge1xuICAgIHRoaXMudmFsdWVzX1trZXldID0gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IHN0b3JhZ2UgPSB1c2VMb2NhbFN0b3JhZ2VcbiAgICAgICAgPyB0aGlzLndpbl8ubG9jYWxTdG9yYWdlXG4gICAgICAgIDogdGhpcy53aW5fLnNlc3Npb25TdG9yYWdlO1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleShrZXkpLCB2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3IuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHVzZUxvY2FsU3RvcmFnZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHJlbW92ZShrZXksIHVzZUxvY2FsU3RvcmFnZSA9IGZhbHNlKSB7XG4gICAgZGVsZXRlIHRoaXMudmFsdWVzX1trZXldO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3Qgc3RvcmFnZSA9IHVzZUxvY2FsU3RvcmFnZVxuICAgICAgICA/IHRoaXMud2luXy5sb2NhbFN0b3JhZ2VcbiAgICAgICAgOiB0aGlzLndpbl8uc2Vzc2lvblN0b3JhZ2U7XG4gICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbShzdG9yYWdlS2V5KGtleSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0b3JhZ2VLZXkoa2V5KSB7XG4gIHJldHVybiBQUkVGSVggKyAnOicgKyBrZXk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHlJZnJhbWVWaWV3fSBmcm9tICcuLi91aS9hY3Rpdml0eS1pZnJhbWUtdmlldyc7XG5pbXBvcnQge0RlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2V9IGZyb20gJy4uL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uJztcbmltcG9ydCB7ZmVBcmdzLCBmZVVybH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5cbmNvbnN0IE5PX1BST01JU0VfRVJSID0gJ05vIGFjY291bnQgcHJvbWlzZSBwcm92aWRlZCc7XG5cbmV4cG9ydCBjbGFzcyBXYWl0Rm9yU3Vic2NyaXB0aW9uTG9va3VwQXBpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7P1Byb21pc2V9IGFjY291bnRQcm9taXNlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBhY2NvdW50UHJvbWlzZSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5vcGVuVmlld1Byb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IVByb21pc2V9ICovXG4gICAgdGhpcy5hY2NvdW50UHJvbWlzZV8gPSBhY2NvdW50UHJvbWlzZSB8fCBQcm9taXNlLnJlamVjdChOT19QUk9NSVNFX0VSUik7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICB0aGlzLndpbl8sXG4gICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgZmVVcmwoJy93YWl0Zm9yc3Vic2NyaXB0aW9ubG9va3VwaWZyYW1lJyksXG4gICAgICBmZUFyZ3Moe1xuICAgICAgICBwdWJsaWNhdGlvbklkOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAgIHByb2R1Y3RJZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICB9KSxcbiAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWUsXG4gICAgICAvKiBoYXNMb2FkaW5nSW5kaWNhdG9yICovIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgTG9naW4gRmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLm9wZW5WaWV3UHJvbWlzZV8gPSB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KFxuICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLmFjY291bnRQcm9taXNlXy50aGVuKFxuICAgICAgKGFjY291bnQpID0+IHtcbiAgICAgICAgLy8gQWNjb3VudCB3YXMgZm91bmQuXG4gICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgICAgfSxcbiAgICAgIChyZWFzb24pID0+IHtcbiAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgfVxuICAgICk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtNZXNzYWdlfSBmcm9tICcuLi9wcm90by9hcGlfbWVzc2FnZXMnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQge1ZpZXd9IGZyb20gJy4uL2NvbXBvbmVudHMvdmlldyc7XG5pbXBvcnQge2FjY2VwdFBvcnRSZXN1bHREYXRhfSBmcm9tICcuLi91dGlscy9hY3Rpdml0eS11dGlscyc7XG5pbXBvcnQge2NyZWF0ZUVsZW1lbnR9IGZyb20gJy4uL3V0aWxzL2RvbSc7XG5pbXBvcnQge2lzQ2FuY2VsRXJyb3J9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xuY29uc3QgaWZyYW1lQXR0cmlidXRlcyA9IHtcbiAgJ2ZyYW1lYm9yZGVyJzogJzAnLFxuICAnc2Nyb2xsaW5nJzogJ25vJyxcbn07XG5cbi8qKlxuICogQ2xhc3MgdG8gYnVpbGQgYW5kIHJlbmRlciBBY3Rpdml0eSBpZnJhbWUgdmlldy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjdGl2aXR5SWZyYW1lVmlldyBleHRlbmRzIFZpZXcge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydHN9IGFjdGl2aXR5UG9ydHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCA/Pj19IGFyZ3NcbiAgICogQHBhcmFtIHtib29sZWFuPX0gc2hvdWxkRmFkZUJvZHlcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaGFzTG9hZGluZ0luZGljYXRvclxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgd2luLFxuICAgIGFjdGl2aXR5UG9ydHMsXG4gICAgc3JjLFxuICAgIGFyZ3MsXG4gICAgc2hvdWxkRmFkZUJvZHkgPSBmYWxzZSxcbiAgICBoYXNMb2FkaW5nSW5kaWNhdG9yID0gZmFsc2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IHRoaXMud2luXy5kb2N1bWVudDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSAvKiogQHR5cGUgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi8gKGNyZWF0ZUVsZW1lbnQoXG4gICAgICB0aGlzLmRvY18sXG4gICAgICAnaWZyYW1lJyxcbiAgICAgIGlmcmFtZUF0dHJpYnV0ZXNcbiAgICApKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gYWN0aXZpdHlQb3J0cztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNyY18gPSBzcmM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgPz59ICovXG4gICAgdGhpcy5hcmdzXyA9IGFyZ3MgfHwge307XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuc2hvdWxkRmFkZUJvZHlfID0gc2hvdWxkRmFkZUJvZHk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuaGFzTG9hZGluZ0luZGljYXRvcl8gPSBoYXNMb2FkaW5nSW5kaWNhdG9yO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Li4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5SWZyYW1lUG9ydH0gKi9cbiAgICB0aGlzLnBvcnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogez9mdW5jdGlvbjwhd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlJZnJhbWVQb3J0fCFQcm9taXNlPn1cbiAgICAgKi9cbiAgICB0aGlzLnBvcnRSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0XG4gICAgICogeyFQcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgICAqL1xuICAgIHRoaXMucG9ydFByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMucG9ydFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaW5pdChkaWFsb2cpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eVBvcnRzX1xuICAgICAgLm9wZW5JZnJhbWUodGhpcy5pZnJhbWVfLCB0aGlzLnNyY18sIHRoaXMuYXJnc18pXG4gICAgICAudGhlbigocG9ydCkgPT4gdGhpcy5vbk9wZW5JZnJhbWVSZXNwb25zZV8ocG9ydCwgZGlhbG9nKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpZiBkb2N1bWVudCBzaG91bGQgZmFkZSBmb3IgdGhpcyB2aWV3LlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc2hvdWxkRmFkZUJvZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdWxkRmFkZUJvZHlfO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaWYgdGhlIHZpZXcgc2hvd3MgbG9hZGluZyBpbmRpY2F0b3IuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNMb2FkaW5nSW5kaWNhdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0xvYWRpbmdJbmRpY2F0b3JfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL2NvbXBvbmVudHMvYWN0aXZpdGllcy5BY3Rpdml0eUlmcmFtZVBvcnR9IHBvcnRcbiAgICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9kaWFsb2cuRGlhbG9nfSBkaWFsb2dcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvbk9wZW5JZnJhbWVSZXNwb25zZV8ocG9ydCwgZGlhbG9nKSB7XG4gICAgdGhpcy5wb3J0XyA9IHBvcnQ7XG4gICAgdGhpcy5wb3J0UmVzb2x2ZXJfKHBvcnQpO1xuXG4gICAgdGhpcy5wb3J0Xy5vblJlc2l6ZVJlcXVlc3QoKGhlaWdodCkgPT4ge1xuICAgICAgZGlhbG9nLnJlc2l6ZVZpZXcodGhpcywgaGVpZ2h0KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnBvcnRfLndoZW5SZWFkeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlJZnJhbWVQb3J0Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBvcnRQcm9taXNlXygpIHtcbiAgICByZXR1cm4gdGhpcy5wb3J0UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshZnVuY3Rpb24obmV3OiBUKX0gIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtmdW5jdGlvbig/KX0gY2FsbGJhY2tcbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIG9uKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5nZXRQb3J0UHJvbWlzZV8oKS50aGVuKChwb3J0KSA9PiB7XG4gICAgICBwb3J0Lm9uKG1lc3NhZ2UsIGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9wcm90by9hcGlfbWVzc2FnZXMuTWVzc2FnZX0gcmVxdWVzdFxuICAgKi9cbiAgZXhlY3V0ZShyZXF1ZXN0KSB7XG4gICAgdGhpcy5nZXRQb3J0UHJvbWlzZV8oKS50aGVuKChwb3J0KSA9PiB7XG4gICAgICBwb3J0LmV4ZWN1dGUocmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyByZXN1bHRzIGZyb20gdGhlIGNhbGxlci5cbiAgICogQHJldHVybiB7IVByb21pc2U8IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UmVzdWx0Pn1cbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRQb3J0UHJvbWlzZV8oKS50aGVuKChwb3J0KSA9PiBwb3J0LmFjY2VwdFJlc3VsdCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIHJlc3VsdHMgZnJvbSB0aGUgY2FsbGVyIGFuZCB2ZXJpZmllcyBvcmlnaW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1aXJlT3JpZ2luXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZU9yaWdpblZlcmlmaWVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZVNlY3VyZUNoYW5uZWxcbiAgICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gICAqL1xuICBhY2NlcHRSZXN1bHRBbmRWZXJpZnkoXG4gICAgcmVxdWlyZU9yaWdpbixcbiAgICByZXF1aXJlT3JpZ2luVmVyaWZpZWQsXG4gICAgcmVxdWlyZVNlY3VyZUNoYW5uZWxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UG9ydFByb21pc2VfKCkudGhlbigocG9ydCkgPT4ge1xuICAgICAgcmV0dXJuIGFjY2VwdFBvcnRSZXN1bHREYXRhKFxuICAgICAgICBwb3J0LFxuICAgICAgICByZXF1aXJlT3JpZ2luLFxuICAgICAgICByZXF1aXJlT3JpZ2luVmVyaWZpZWQsXG4gICAgICAgIHJlcXVpcmVTZWN1cmVDaGFubmVsXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlcyB0aGUgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuQ29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjZXB0UmVzdWx0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKi9cbiAgb25DYW5jZWwoY2FsbGJhY2spIHtcbiAgICB0aGlzLmFjY2VwdFJlc3VsdCgpLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICAgIHRocm93IHJlYXNvbjtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcmVzaXplZCgpIHtcbiAgICBpZiAodGhpcy5wb3J0Xykge1xuICAgICAgdGhpcy5wb3J0Xy5yZXNpemVkKCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcblxuLyoqXG4gKiBMb2FkaW5nIGluZGljYXRvciBjbGFzcy4gQnVpbGRzIHRoZSBsb2FkaW5nIGluZGljYXRvciB2aWV3IHRvIGJlIGluamVjdGVkIGluXG4gKiBwYXJlbnQgZWxlbWVudCA8aWZyYW1lIGNsYXNzPVwic3dnLWRpYWxvZ1wiPiBlbGVtZW50LiBQcm92aWRlcyBtZXRob2RzIHRvXG4gKiBzaG93L2hpZGUgbG9hZGluZyBpbmRpY2F0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2FkaW5nVmlldyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXyA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICB0aGlzLmRvY18sXG4gICAgICAnc3dnLWxvYWRpbmctY29udGFpbmVyJyxcbiAgICAgIHt9XG4gICAgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMubG9hZGluZ18gPSBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXywgJ3N3Zy1sb2FkaW5nJywge30pO1xuICAgIHRoaXMubG9hZGluZ0NvbnRhaW5lcl8uYXBwZW5kQ2hpbGQodGhpcy5sb2FkaW5nXyk7XG5cbiAgICB0aGlzLmxvYWRpbmdDb250YWluZXJfLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XG5cbiAgICAvLyBCdWlsZCB0aGUgYW5pbWF0ZWQgbG9hZGluZyBpbmRpY2F0b3IuXG4gICAgdGhpcy5idWlsZExvYWRpbmdJbmRpY2F0b3JfKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcG9wdWxhdGVkIGxvYWRpbmcgY29udGFpbmVyLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9hZGluZ0NvbnRhaW5lcl87XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIHdpdGhpbiB0aGUgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICBzaG93KCkge1xuICAgIHRoaXMubG9hZGluZ0NvbnRhaW5lcl8uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgbG9hZGluZyBpbmRpY2F0b3Igd2l0aGluIHRoZSBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXy5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvcHVsYXRlcyB0aGUgbG9hZGluZyBpbmRpdmljYXRvci4gVGhlIHBvcHVsYXRlZCBlbGVtZW50XG4gICAqIGNhbiBiZSBhZGRlZCBpbiBhbnkgdmlldywgd2hlbiByZXF1aXJlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkTG9hZGluZ0luZGljYXRvcl8oKSB7XG4gICAgY29uc3QgbG9hZGluZ0NvbnRhaW5lciA9IHRoaXMubG9hZGluZ187XG5cbiAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yVG9wQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXyxcbiAgICAgICdzd2ctbG9hZGluZy1hbmltYXRlJyxcbiAgICAgIHt9XG4gICAgKTtcbiAgICBsb2FkaW5nQ29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRpbmdJbmRpY2F0b3JUb3BDb250YWluZXIpO1xuXG4gICAgY29uc3QgbG9hZGluZ0luZGljYXRvckNoaWxkQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXyxcbiAgICAgICdzd2ctbG9hZGluZy1pbWFnZScsXG4gICAgICB7fVxuICAgICk7XG4gICAgbG9hZGluZ0luZGljYXRvclRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkaW5nSW5kaWNhdG9yQ2hpbGRDb250YWluZXIpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7cmVzZXRTdHlsZXMsIHNldEltcG9ydGFudFN0eWxlc30gZnJvbSAnLi4vdXRpbHMvc3R5bGUnO1xuaW1wb3J0IHt0cmFuc2l0aW9ufSBmcm9tICcuLi91dGlscy9hbmltYXRpb24nO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59ICovXG5leHBvcnQgY29uc3QgdG9hc3RJbXBvcnRhbnRTdHlsZXMgPSB7XG4gICdoZWlnaHQnOiAwLFxufTtcblxuLyoqIEB0eXBlZGVmIHt7XG4gKiAgICB0ZXh0OiBzdHJpbmcsXG4gKiAgICBhY3Rpb246ICh7bGFiZWw6IHN0cmluZywgaGFuZGxlcjogZnVuY3Rpb24oKX18dW5kZWZpbmVkKVxuICogIH19XG4gKi9cbmV4cG9ydCBsZXQgVG9hc3RTcGVjRGVmO1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmNvbnN0IGlmcmFtZUF0dHJpYnV0ZXMgPSB7XG4gICdmcmFtZWJvcmRlcic6ICcwJyxcbiAgJ3Njcm9sbGluZyc6ICdubycsXG4gICdjbGFzcyc6ICdzd2ctdG9hc3QnLFxufTtcblxuLyoqXG4gKiBUaGUgY2xhc3MgTm90aWZpY2F0aW9uIHRvYXN0LlxuICovXG5leHBvcnQgY2xhc3MgVG9hc3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vcnVudGltZS9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCA/Pn0gYXJnc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgc3JjLCBhcmdzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZGVwcy5kb2MoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2FjdGl2aXRpZXMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zcmNfID0gc3JjO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsID8+fSAqL1xuICAgIHRoaXMuYXJnc18gPSBhcmdzO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLmFuaW1hdGluZ18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUhUTUxJRnJhbWVFbGVtZW50fSAqL1xuICAgIHRoaXMuaWZyYW1lXyA9IC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoY3JlYXRlRWxlbWVudChcbiAgICAgIHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudCxcbiAgICAgICdpZnJhbWUnLFxuICAgICAgaWZyYW1lQXR0cmlidXRlc1xuICAgICkpO1xuXG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuaWZyYW1lXywgdG9hc3RJbXBvcnRhbnRTdHlsZXMpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeV8gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5pZnJhbWVfLm9ubG9hZCA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaWZyYW1lIGVsZW1lbnQuXG4gICAqIEByZXR1cm4geyFIVE1MSUZyYW1lRWxlbWVudH1cbiAgICovXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyB0aGUgbm90aWZpY2F0aW9uIHRvYXN0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5kb2NfLmdldEJvZHkoKS5hcHBlbmRDaGlsZCh0aGlzLmlmcmFtZV8pOyAvLyBGaXJlcyBvbmxvYWQuXG4gICAgcmV0dXJuIHRoaXMuYnVpbGRUb2FzdF8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGNvbnRlbnQgb2YgdGhlIGlmcmFtZS4gT24gbG9hZCwgYW5pbWF0ZXMgdGhlIHRvYXN0LlxuICAgKi9cbiAgYnVpbGRUb2FzdF8oKSB7XG4gICAgY29uc3QgdG9hc3REdXJhdGlvblNlY29uZHMgPSA3O1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5UG9ydHNfXG4gICAgICAub3BlbklmcmFtZSh0aGlzLmlmcmFtZV8sIHRoaXMuc3JjXywgdGhpcy5hcmdzXylcbiAgICAgIC50aGVuKChwb3J0KSA9PiB7XG4gICAgICAgIHJldHVybiBwb3J0LndoZW5SZWFkeSgpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmVzZXRTdHlsZXModGhpcy5pZnJhbWVfLCBbJ2hlaWdodCddKTtcblxuICAgICAgICB0aGlzLmFuaW1hdGVfKCgpID0+IHtcbiAgICAgICAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5pZnJhbWVfLCB7XG4gICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICAgICAgJ29wYWN0aXknOiAxLFxuICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb24oXG4gICAgICAgICAgICB0aGlzLmlmcmFtZV8sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgwKScsXG4gICAgICAgICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNDAwLFxuICAgICAgICAgICAgJ2Vhc2Utb3V0J1xuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENsb3NlIHRoZSBUb2FzdCBhZnRlciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uLlxuICAgICAgICB0aGlzLmRvY18uZ2V0V2luKCkuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9LCAodG9hc3REdXJhdGlvblNlY29uZHMgKyAxKSAqIDEwMDApO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFuaW1hdGVfKGNhbGxiYWNrKSB7XG4gICAgY29uc3Qgd2FpdCA9IHRoaXMuYW5pbWF0aW5nXyB8fCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICByZXR1cm4gKHRoaXMuYW5pbWF0aW5nXyA9IHdhaXRcbiAgICAgIC50aGVuKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3JzIHRvIG1ha2Ugc3VyZSBhbmltYXRpb25zIGRvbid0IGdldCBzdHVjay5cbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmFuaW1hdGluZ18gPSBudWxsO1xuICAgICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgdG9hc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuYW5pbWF0ZV8oKCkgPT4ge1xuICAgICAgLy8gUmVtb3ZlIHRoZSB0b2FzdCBmcm9tIHRoZSBET00gYWZ0ZXIgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAgdGhpcy5kb2NfLmdldFdpbigpLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lXyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH0sIDUwMCk7XG5cbiAgICAgIHJldHVybiB0cmFuc2l0aW9uKFxuICAgICAgICB0aGlzLmlmcmFtZV8sXG4gICAgICAgIHtcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgICAgfSxcbiAgICAgICAgNDAwLFxuICAgICAgICAnZWFzZS1vdXQnXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQHBhcmFtIHshLi4vY29tcG9uZW50cy9hY3Rpdml0aWVzLkFjdGl2aXR5UG9ydERlZn0gcG9ydFxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVpcmVPcmlnaW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZU9yaWdpblZlcmlmaWVkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVpcmVTZWN1cmVDaGFubmVsXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdFBvcnRSZXN1bHREYXRhKFxuICBwb3J0LFxuICByZXF1aXJlT3JpZ2luLFxuICByZXF1aXJlT3JpZ2luVmVyaWZpZWQsXG4gIHJlcXVpcmVTZWN1cmVDaGFubmVsXG4pIHtcbiAgcmV0dXJuIHBvcnQuYWNjZXB0UmVzdWx0KCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgaWYgKFxuICAgICAgcmVzdWx0Lm9yaWdpbiAhPSByZXF1aXJlT3JpZ2luIHx8XG4gICAgICAocmVxdWlyZU9yaWdpblZlcmlmaWVkICYmICFyZXN1bHQub3JpZ2luVmVyaWZpZWQpIHx8XG4gICAgICAocmVxdWlyZVNlY3VyZUNoYW5uZWwgJiYgIXJlc3VsdC5zZWN1cmVDaGFubmVsKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFubmVsIG1pc21hdGNoJyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7c2V0SW1wb3J0YW50U3R5bGVzfSBmcm9tICcuL3N0eWxlJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZCBhZnRlciB0aGUgZ2l2ZW4gZHVyYXRpb24gb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbCAtIEVsZW1lbnQgdG8gYmUgb2JzZXJ2ZWQuXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn0gcHJvcHMgLSBwcm9wZXJ0aWVzIHRvIGJlIGFuaW1hdGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uTWlsbGlzIC0gZHVyYXRpb24gb2YgYW5pbWF0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGN1cnZlIC0gdHJhbnNpdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGFuaW1hdGlvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlfSBQcm9taXNlIHdoaWNoIHJlc29sdmVzIG9uY2UgdGhlIGFuaW1hdGlvbiBpcyBkb25lIHBsYXlpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2l0aW9uKGVsLCBwcm9wcywgZHVyYXRpb25NaWxsaXMsIGN1cnZlKSB7XG4gIGNvbnN0IHdpbiA9IGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gIGNvbnN0IHByZXZpb3VzVHJhbnNpdGlvblZhbHVlID0gZWwuc3R5bGUudHJhbnNpdGlvbiB8fCAnJztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgd2luLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgd2luLnNldFRpbWVvdXQocmVzb2x2ZSwgZHVyYXRpb25NaWxsaXMpO1xuICAgICAgY29uc3QgdHIgPSBgJHtkdXJhdGlvbk1pbGxpc31tcyAke2N1cnZlfWA7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoXG4gICAgICAgIGVsLFxuICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICd0cmFuc2l0aW9uJzogYHRyYW5zZm9ybSAke3RyfSwgb3BhY2l0eSAke3RyfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9wc1xuICAgICAgICApXG4gICAgICApO1xuICAgIH0pO1xuICB9KS50aGVuKCgpID0+IHtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXMoZWwsIHtcbiAgICAgICd0cmFuc2l0aW9uJzogcHJldmlvdXNUcmFuc2l0aW9uVmFsdWUsXG4gICAgfSk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9sb2cnO1xuXG4vKipcbiAqIENoYXJhY3RlciBtYXBwaW5nIGZyb20gYmFzZTY0dXJsIHRvIGJhc2U2NC5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IGJhc2U2NFVybERlY29kZVN1YnMgPSB7Jy0nOiAnKycsICdfJzogJy8nfTtcblxuLyoqXG4gKiBDaGFyYWN0ZXIgbWFwcGluZyBmcm9tIGJhc2U2NCB0byBiYXNlNjR1cmwuXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5jb25zdCBiYXNlNjRVcmxFbmNvZGVTdWJzID0geycrJzogJy0nLCAnLyc6ICdfJywgJz0nOiAnJ307XG5cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgd2hpY2ggaG9sZHMgOC1iaXQgY29kZSBwb2ludHMsIHN1Y2ggYXMgdGhlIHJlc3VsdCBvZiBhdG9iLFxuICogaW50byBhIFVpbnQ4QXJyYXkgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBieXRlcy5cbiAqIElmIHlvdSBoYXZlIGEgc3RyaW5nIG9mIGNoYXJhY3RlcnMsIHlvdSBwcm9iYWJseSB3YW50IHRvIGJlIHVzaW5nIHV0ZjhFbmNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyKSB7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBhc3NlcnQoY2hhckNvZGUgPD0gMjU1LCAnQ2hhcmFjdGVycyBtdXN0IGJlIGluIHJhbmdlIFswLDI1NV0nKTtcbiAgICBieXRlc1tpXSA9IGNoYXJDb2RlO1xuICB9XG4gIHJldHVybiBieXRlcztcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIDgtYml0IGJ5dGVzIGFycmF5IGludG8gYSBzdHJpbmdcbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBieXRlc1RvU3RyaW5nKGJ5dGVzKSB7XG4gIC8vIEludGVudGlvbmFsbHkgYXZvaWRzIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgc28gd2UgZG9uJ3Qgc3VmZmVyIGFcbiAgLy8gc3RhY2sgb3ZlcmZsb3cuICMxMDQ5NSwgaHR0cHM6Ly9qc3BlcmYuY29tL2J5dGVzVG9TdHJpbmctMlxuICBjb25zdCBhcnJheSA9IG5ldyBBcnJheShieXRlcy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyYXlbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgfVxuICByZXR1cm4gYXJyYXkuam9pbignJyk7XG59XG5cbi8qKlxuICogSW50ZXJwcmV0IGEgYnl0ZSBhcnJheSBhcyBhIFVURi04IHN0cmluZy5cbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGY4RGVjb2RlU3luYyhieXRlcykge1xuICBpZiAodHlwZW9mIFRleHREZWNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGJ5dGVzKTtcbiAgfVxuICBjb25zdCBhc2NpaVN0cmluZyA9IGJ5dGVzVG9TdHJpbmcobmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoYXNjaWlTdHJpbmcpKTtcbn1cblxuLyoqXG4gKiBUdXJuIGEgc3RyaW5nIGludG8gVVRGLTggYnl0ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjhFbmNvZGVTeW5jKHN0cmluZykge1xuICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoJ3V0Zi04JykuZW5jb2RlKHN0cmluZyk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXModW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykpKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyB3aGljaCBpcyBpbiBiYXNlNjR1cmwgZW5jb2RpbmcgaW50byBhIFVpbnQ4QXJyYXlcbiAqIGNvbnRhaW5pbmcgdGhlIGRlY29kZWQgdmFsdWUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFVybERlY29kZVRvQnl0ZXMoc3RyKSB7XG4gIGNvbnN0IGVuY29kZWQgPSBhdG9iKHN0ci5yZXBsYWNlKC9bLV9dL2csIChjaCkgPT4gYmFzZTY0VXJsRGVjb2RlU3Vic1tjaF0pKTtcbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMoZW5jb2RlZCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBieXRlcyBhcnJheSBpbnRvIGJhc2U2NHVybCBlbmNvZGVkIHN0cmluZy5cbiAqIGJhc2U2NHVybCBpcyBkZWZpbmVkIGluIFJGQyA0NjQ4LiBJdCBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgXCJ3ZWIgc2FmZVwiLlxuICogQHBhcmFtIHshVWludDhBcnJheX0gYnl0ZXNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFVybEVuY29kZUZyb21CeXRlcyhieXRlcykge1xuICBjb25zdCBzdHIgPSBieXRlc1RvU3RyaW5nKGJ5dGVzKTtcbiAgcmV0dXJuIGJ0b2Eoc3RyKS5yZXBsYWNlKC9bKy89XS9nLCAoY2gpID0+IGJhc2U2NFVybEVuY29kZVN1YnNbY2hdKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMjEgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgQ29uc3RhbnRzID0ge307XG5cbi8qKlxuICogTG9jYWwgc3RvcmFnZSBrZXkgZm9yIHN3Z1VzZXJUb2tlbi5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLlVTRVJfVE9LRU4gPSAnVVNFUl9UT0tFTic7XG5cbmV4cG9ydCB7Q29uc3RhbnRzfTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMjAgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtUaW1lc3RhbXB9IGZyb20gJy4uL3Byb3RvL2FwaV9tZXNzYWdlcyc7XG5cbi8qKlxuICogQHBhcmFtIHshbnVtYmVyfSBtaWxsaXNcbiAqIEByZXR1cm4geyFUaW1lc3RhbXB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1RpbWVzdGFtcChtaWxsaXMpIHtcbiAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoXG4gICAgW01hdGguZmxvb3IobWlsbGlzIC8gMTAwMCksIChtaWxsaXMgJSAxMDAwKSAqIDEwMDAwMDBdLFxuICAgIGZhbHNlXG4gICk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRSZWFkeVN0YXRlKGRvYykge1xuICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChkb2NbJ3JlYWR5U3RhdGUnXSk7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEb2N1bWVudFJlYWR5KGRvYykge1xuICBjb25zdCByZWFkeVN0YXRlID0gZ2V0UmVhZHlTdGF0ZShkb2MpO1xuICByZXR1cm4gcmVhZHlTdGF0ZSAhPSAnbG9hZGluZycgJiYgcmVhZHlTdGF0ZSAhPSAndW5pbml0aWFsaXplZCc7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaGFzIGxvYWRlZCBhbGwgdGhlIGNzcyBhbmQgc3ViLXJlc291cmNlcy5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRG9jdW1lbnRDb21wbGV0ZShkb2MpIHtcbiAgcmV0dXJuIGdldFJlYWR5U3RhdGUoZG9jKSA9PSAnY29tcGxldGUnO1xufVxuXG4vKipcbiAqIENhbGxzIHRoZSBjYWxsYmFjayB3aGVuIGRvY3VtZW50IGlzIHJlYWR5LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZnVuY3Rpb24gb25Eb2N1bWVudFJlYWR5KGRvYywgY2FsbGJhY2spIHtcbiAgb25Eb2N1bWVudFN0YXRlKGRvYywgaXNEb2N1bWVudFJlYWR5LCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogQ2FsbHMgdGhlIGNhbGxiYWNrIG9uY2Ugd2hlbiBkb2N1bWVudCdzIHN0YXRlIHNhdGlzZmllcyB0aGUgY29uZGl0aW9uLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpOmJvb2xlYW59IGNvbmRpdGlvblxuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpfSBjYWxsYmFja1xuICovXG5mdW5jdGlvbiBvbkRvY3VtZW50U3RhdGUoZG9jLCBjb25kaXRpb24sIGNhbGxiYWNrKSB7XG4gIGlmIChjb25kaXRpb24oZG9jKSkge1xuICAgIC8vIEV4ZWN1dGUgY2FsbGJhY2sgcmlnaHQgbm93LlxuICAgIGNhbGxiYWNrKGRvYyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRXhlY3V0ZSBjYWxsYmFjayAob25jZSEpIGFmdGVyIGNvbmRpdGlvbiBpcyBzYXRpc2ZpZWQuXG4gIGxldCBjYWxsYmFja0hhc0V4ZWN1dGVkID0gZmFsc2U7XG4gIGNvbnN0IHJlYWR5TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgaWYgKGNvbmRpdGlvbihkb2MpICYmICFjYWxsYmFja0hhc0V4ZWN1dGVkKSB7XG4gICAgICBjYWxsYmFjayhkb2MpO1xuICAgICAgY2FsbGJhY2tIYXNFeGVjdXRlZCA9IHRydWU7XG4gICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIHJlYWR5TGlzdGVuZXIpO1xuICAgIH1cbiAgfTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCByZWFkeUxpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRG9jdW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2hlbkRvY3VtZW50UmVhZHkoZG9jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIG9uRG9jdW1lbnRSZWFkeShkb2MsIHJlc29sdmUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gZG9jdW1lbnQgaXMgY29tcGxldGUuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRG9jdW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2hlbkRvY3VtZW50Q29tcGxldGUoZG9jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIG9uRG9jdW1lbnRTdGF0ZShkb2MsIGlzRG9jdW1lbnRDb21wbGV0ZSwgcmVzb2x2ZSk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtzZXRTdHlsZXN9IGZyb20gJy4vc3R5bGUnO1xuXG4vKiogQGNvbnN0IEBlbnVte3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBzdHlsZUxpbmtBdHRycyA9IHtcbiAgJ3JlbCc6ICdzdHlsZXNoZWV0JyxcbiAgJ3R5cGUnOiAndGV4dC9jc3MnLFxufTtcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IHN0eWxlVHlwZSA9ICd0ZXh0L2Nzcyc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBzdHlsZUV4aXN0c1F1ZXJ5U2VsZWN0b3IgPSAnbGlua1tyZWw9c3R5bGVzaGVldF1baHJlZl0nO1xuXG4vKipcbiAqIEFkZCBhdHRyaWJ1dGVzIHRvIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyfGJvb2xlYW58IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXJ8Ym9vbGVhbj4+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gdXBkYXRlZCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQXR0cmlidXRlc1RvRWxlbWVudChlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gIGZvciAoY29uc3QgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKGF0dHIgPT0gJ3N0eWxlJykge1xuICAgICAgc2V0U3R5bGVzKFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8Ym9vbGVhbnxudW1iZXI+fSAqL1xuICAgICAgICAoYXR0cmlidXRlc1thdHRyXSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICBhdHRyLFxuICAgICAgICAvKiogQHR5cGUge3N0cmluZ3xib29sZWFufG51bWJlcn0gKi8gKGF0dHJpYnV0ZXNbYXR0cl0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZWxlbWVudCBvbiBkb2N1bWVudCB3aXRoIHNwZWNpZmllZCB0YWdOYW1lIGFuZCBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7PyhzdHJpbmd8IU5vZGV8IUFycmF5TGlrZTwhTm9kZT58IUFycmF5PCFOb2RlPik9fSBjb250ZW50XG4gKiBAcmV0dXJuIHshRWxlbWVudH0gY3JlYXRlZCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudChkb2MsIHRhZ05hbWUsIGF0dHJpYnV0ZXMsIGNvbnRlbnQpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICBhZGRBdHRyaWJ1dGVzVG9FbGVtZW50KGVsZW1lbnQsIGF0dHJpYnV0ZXMpO1xuICBpZiAoY29udGVudCAhPSBudWxsKSB7XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09ICdzdHJpbmcnKSB7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQubm9kZVR5cGUpIHtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoLyoqIEB0eXBlIHshTm9kZX0gKi8gKGNvbnRlbnQpKTtcbiAgICB9IGVsc2UgaWYgKCdsZW5ndGgnIGluIGNvbnRlbnQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNvbnRlbnRbaV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQoZmFsc2UsICdVbnN1cHBvcnRlZCBjb250ZW50OiAlcycsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBjaGlsZHJlbiBmcm9tIHRoZSBwYXJlbnQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KSB7XG4gIHBhcmVudC50ZXh0Q29udGVudCA9ICcnO1xufVxuXG4vKipcbiAqIEluamVjdHMgdGhlIHByb3ZpZGVkIHN0eWxlcyBpbiB0aGUgSEVBRCBzZWN0aW9uIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvYyBUaGUgZG9jdW1lbnQgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlVGV4dCBUaGUgc3R5bGUgc3RyaW5nLlxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RTdHlsZVNoZWV0KGRvYywgc3R5bGVUZXh0KSB7XG4gIGNvbnN0IHN0eWxlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoZG9jLmdldFdpbigpLmRvY3VtZW50LCAnc3R5bGUnLCB7XG4gICAgJ3R5cGUnOiBzdHlsZVR5cGUsXG4gIH0pO1xuICBzdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHlsZVRleHQ7XG4gIGRvYy5nZXRIZWFkKCkuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgcmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGhhdmUgYSBuZXh0IG5vZGUgaW4gdGhlIGRvY3VtZW50IG9yZGVyLlxuICogVGhpcyBtZWFucyBlaXRoZXI6XG4gKiAgYS4gVGhlIGVsZW1lbnQgaXRzZWxmIGhhcyBhIG5leHRTaWJsaW5nLlxuICogIGIuIEFueSBvZiB0aGUgZWxlbWVudCBhbmNlc3RvcnMgaGFzIGEgbmV4dFNpYmxpbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gez9Ob2RlPX0gc3RvcE5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNOZXh0Tm9kZUluRG9jdW1lbnRPcmRlcihlbGVtZW50LCBzdG9wTm9kZSkge1xuICBsZXQgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICBkbyB7XG4gICAgaWYgKGN1cnJlbnRFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0gd2hpbGUgKFxuICAgIChjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGUpICYmXG4gICAgY3VycmVudEVsZW1lbnQgIT0gc3RvcE5vZGVcbiAgKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFBvbHlmaWxsIG9mIHRoZSBgTm9kZS5pc0Nvbm5lY3RlZGAgQVBJLiBTZWVcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL2lzQ29ubmVjdGVkLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29ubmVjdGVkKG5vZGUpIHtcbiAgLy8gRW5zdXJlIHRoYXQgbm9kZSBpcyBhdHRhY2hlZCBpZiBzcGVjaWZpZWQuIFRoaXMgY2hlY2sgdXNlcyBhIG5ldyBhbmRcbiAgLy8gZmFzdCBgaXNDb25uZWN0ZWRgIEFQSSBhbmQgdGh1cyBvbmx5IGNoZWNrZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBpdC5cbiAgLy8gU2VlIGh0dHBzOi8vd3d3LmNocm9tZXN0YXR1cy5jb20vZmVhdHVyZS81Njc2MTEwNTQ5MzUyNDQ4LlxuICBpZiAoJ2lzQ29ubmVjdGVkJyBpbiBub2RlKSB7XG4gICAgcmV0dXJuIG5vZGVbJ2lzQ29ubmVjdGVkJ107XG4gIH1cbiAgLy8gUG9seWZpbGwuXG4gIGNvbnN0IHJvb3QgPSBub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgcmV0dXJuIChyb290ICYmIHJvb3QuY29udGFpbnMobm9kZSkpIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBjdXJyZW50IGJyb3dzZXIgaXMgYSBsZWdhY3kgdmVyc2lvbiBvZiBFZGdlLlxuICpcbiAqIFN0YXJ0aW5nIGluIEphbnVhcnkgMjAyMCwgbmV3IHZlcnNpb25zIG9mIEVkZ2Ugd2lsbCB1c2UgdGhlIENocm9taXVtIGVuZ2luZS5cbiAqIFRoZXNlIHZlcnNpb25zIHdvbid0IGluY2x1ZGUgdGhlIHdvcmQgXCJFZGdlXCIgaW4gdGhlaXIgdXNlcmFnZW50LlxuICogSW5zdGVhZCwgdGhleSdsbCBpbmNsdWRlIHRoZSB3b3JkIFwiRWRnXCIuXG4gKiBTbyBmYXIsIGl0IHNlZW1zIHNhZmUgdG8gYXZvaWQgZGV0ZWN0aW5nIHRoZXNlIG5ldyB2ZXJzaW9ucyBvZiBFZGdlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xlZ2FjeUVkZ2VCcm93c2VyKHdpbikge1xuICBjb25zdCBuYXYgPSB3aW4ubmF2aWdhdG9yO1xuICByZXR1cm4gL0VkZ2UvaS50ZXN0KG5hdiAmJiBuYXYudXNlckFnZW50KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMjAgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBUcmlwbGUgemVybyB3aWR0aCBzcGFjZS5cbiAqXG4gKiBUaGlzIGlzIGFkZGVkIHRvIHVzZXIgZXJyb3IgbWVzc2FnZXMsIHNvIHRoYXQgd2UgY2FuIGxhdGVyIGlkZW50aWZ5XG4gKiB0aGVtLCB3aGVuIHRoZSBvbmx5IHRoaW5nIHRoYXQgd2UgaGF2ZSBpcyB0aGUgbWVzc2FnZS4gVGhpcyBpcyB0aGVcbiAqIGNhc2UgaW4gbWFueSBicm93c2VycyB3aGVuIHRoZSBnbG9iYWwgZXhjZXB0aW9uIGhhbmRsZXIgaXMgaW52b2tlZC5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEFNUF9VU0VSX0VSUk9SX1NFTlRJTkVMID0gJ1xcdTIwMEJcXHUyMDBCXFx1MjAwQic7XG5cbi8qKlxuICogU29tZSBleGNlcHRpb25zIChET01FeGNlcHRpb24sIG5hbWVseSkgaGF2ZSByZWFkLW9ubHkgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICogQHJldHVybiB7IUVycm9yfVxuICovXG5mdW5jdGlvbiBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGVycm9yKSB7XG4gIGNvbnN0IG1lc3NhZ2VQcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZXJyb3IsICdtZXNzYWdlJyk7XG4gIGlmIChtZXNzYWdlUHJvcGVydHkgJiYgbWVzc2FnZVByb3BlcnR5LndyaXRhYmxlKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgY29uc3Qge21lc3NhZ2UsIHN0YWNrfSA9IGVycm9yO1xuICBjb25zdCBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAvLyBDb3B5IGFsbCB0aGUgZXh0cmFuZW91cyB0aGluZ3Mgd2UgYXR0YWNoLlxuICBmb3IgKGNvbnN0IHByb3AgaW4gZXJyb3IpIHtcbiAgICBlW3Byb3BdID0gZXJyb3JbcHJvcF07XG4gIH1cbiAgLy8gRW5zdXJlIHRoZXNlIGFyZSBjb3BpZWQuXG4gIGUuc3RhY2sgPSBzdGFjaztcbiAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICogQHJldHVybiB7IUVycm9yfVxuICovXG5mdW5jdGlvbiBjcmVhdGVFcnJvclZhcmdzKHZhcl9hcmdzKSB7XG4gIGxldCBlcnJvciA9IG51bGw7XG4gIGxldCBtZXNzYWdlID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvciAmJiAhZXJyb3IpIHtcbiAgICAgIGVycm9yID0gZHVwbGljYXRlRXJyb3JJZk5lY2Vzc2FyeShhcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICBtZXNzYWdlICs9ICcgJztcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYXJnO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZXJyb3IpIHtcbiAgICBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfSBlbHNlIGlmIChtZXNzYWdlKSB7XG4gICAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2UgKyAnOiAnICsgZXJyb3IubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cbi8qKiBIZWxwZXIgY2xhc3MgZm9yIHRocm93aW5nIHN0YW5kYXJkaXplZCBlcnJvcnMuICovXG5leHBvcnQgY2xhc3MgRXJyb3JMb2dnZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0b3IuXG4gICAqXG4gICAqIG9wdF9zdWZmaXggd2lsbCBiZSBhcHBlbmRlZCB0byBlcnJvciBtZXNzYWdlIHRvIGlkZW50aWZ5IHRoZSB0eXBlIG9mIHRoZVxuICAgKiBlcnJvciBtZXNzYWdlLiBXZSBjYW4ndCByZWx5IG9uIHRoZSBlcnJvciBvYmplY3QgdG8gcGFzcyBhbG9uZyB0aGUgdHlwZVxuICAgKiBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgZG8gbm90IGhhdmUgdGhpcyBwYXJhbSBpbiBpdHMgd2luZG93Lm9uZXJyb3IgQVBJLlxuICAgKiBTZWU6XG4gICAqIGh0dHBzOi8vYmxvZy5zZW50cnkuaW8vMjAxNi8wMS8wNC9jbGllbnQtamF2YXNjcmlwdC1yZXBvcnRpbmctd2luZG93LW9uZXJyb3IuaHRtbFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9zdWZmaXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdF9zdWZmaXggPSAnJykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnN1ZmZpeF8gPSBvcHRfc3VmZml4O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIGFuIGVycm9yIGJlZm9yZSByZXBvcnRpbmcsIHN1Y2ggYXMgdG8gYWRkIG1ldGFkYXRhLlxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByZXBhcmVFcnJvcl8oZXJyb3IpIHtcbiAgICBpZiAodGhpcy5zdWZmaXhfKSB7XG4gICAgICBpZiAoIWVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3IubWVzc2FnZSA9IHRoaXMuc3VmZml4XztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKHRoaXMuc3VmZml4XykgPT09IC0xKSB7XG4gICAgICAgIGVycm9yLm1lc3NhZ2UgPSB0aGlzLnN1ZmZpeF87XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZXJyb3IuXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfVxuICAgKi9cbiAgY3JlYXRlRXJyb3IodmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkoXG4gICAgICBudWxsLFxuICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgICk7XG4gICAgdGhpcy5wcmVwYXJlRXJyb3JfKGVycm9yKTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlcnJvciBvYmplY3Qgd2l0aCBpdHMgZXhwZWN0ZWQgcHJvcGVydHkgc2V0IHRvIHRydWUuIFVzZWQgZm9yXG4gICAqIGV4cGVjdGVkIGZhaWx1cmUgc3RhdGVzIChleC4gaW5jb3JyZWN0IGNvbmZpZ3VyYXRpb24sIGxvY2FsU3RvcmFnZVxuICAgKiB1bmF2YWlsYWJsZSBkdWUgdG8gYnJvd3NlciBzZXR0aW5ncywgZXRjLikgYXMgb3Bwb3NlZCB0byB1bmV4cGVjdGVkXG4gICAqIGJyZWFrYWdlcy9mYWlsdXJlcy5cbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshRXJyb3J9XG4gICAqL1xuICBjcmVhdGVFeHBlY3RlZEVycm9yKHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KFxuICAgICAgbnVsbCxcbiAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICApO1xuICAgIHRoaXMucHJlcGFyZUVycm9yXyhlcnJvcik7XG4gICAgZXJyb3IuZXhwZWN0ZWQgPSB0cnVlO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IuXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHRocm93cyB7IUVycm9yfVxuICAgKi9cbiAgZXJyb3IodmFyX2FyZ3MpIHtcbiAgICB0aHJvdyB0aGlzLmNyZWF0ZUVycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGFuZCBtYXJrcyB3aXRoIGFuIGV4cGVjdGVkIHByb3BlcnR5LlxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqIEB0aHJvd3MgeyFFcnJvcn1cbiAgICovXG4gIGV4cGVjdGVkRXJyb3IodmFyX2FyZ3MpIHtcbiAgICB0aHJvdyB0aGlzLmNyZWF0ZUV4cGVjdGVkRXJyb3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5jb25zdCB1c2VyTG9nZ2VyID0gbmV3IEVycm9yTG9nZ2VyKFxuICBzZWxmLl9fQU1QX1RPUCA/IEFNUF9VU0VSX0VSUk9SX1NFTlRJTkVMIDogJydcbik7XG5jb25zdCBkZXZMb2dnZXIgPSBuZXcgRXJyb3JMb2dnZXIoKTtcblxuZXhwb3J0IGNvbnN0IHVzZXIgPSAoKSA9PiB1c2VyTG9nZ2VyO1xuZXhwb3J0IGNvbnN0IGRldiA9ICgpID0+IGRldkxvZ2dlcjtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3Qge1xuICBjcmVhdGVBYm9ydEVycm9yLFxuICBpc0Fib3J0RXJyb3IsXG59ID0gcmVxdWlyZSgnd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMnKTtcblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgZXJyb3IgaXMgYW4gQWJvcnRFcnJvciB0eXBlLlxuICogU2VlIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI2Fib3J0ZXJyb3IuXG4gKiBAcGFyYW0geyp9IGVycm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDYW5jZWxFcnJvcihlcnJvcikge1xuICByZXR1cm4gaXNBYm9ydEVycm9yKGVycm9yKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGVtdWxhdGVzIGEgRE9NRXhjZXB0aW9uIG9mIEFib3J0RXJyb3IgdHlwZS5cbiAqIFNlZSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNhYm9ydGVycm9yLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZVxuICogQHJldHVybiB7IURPTUV4Y2VwdGlvbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbmNlbEVycm9yKHdpbiwgbWVzc2FnZSkge1xuICByZXR1cm4gY3JlYXRlQWJvcnRFcnJvcih3aW4sIG1lc3NhZ2UpO1xufVxuXG4vKipcbiAqIEEgc2V0IG9mIGVycm9yIHV0aWxpdGllcyBjb21iaW5lZCBpbiBhIGNsYXNzIHRvIGFsbG93IGVhc3kgc3R1YmJpbmcgaW4gdGVzdHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBFcnJvclV0aWxzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICAgKi9cbiAgc3RhdGljIHRocm93QXN5bmMoZXJyb3IpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDIwIFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFBMRUFTRSBETyBOT1QgSE9TVCBUSElTIEZJTEUgWU9VUlNFTEYuIERPSU5HIFNPIFdJTEwgQlJFQUsgVEhJTkdTLlxuLy9cbi8vIFB1Ymxpc2hlcnMgc2hvdWxkIGxvYWQgdGhpcyBmaWxlIGZyb206XG4vLyBodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvc3dnLWdhYS5qc1xuLy9cbi8vIFRoYW5rcyFcblxuaW1wb3J0IHtJMThOX1NUUklOR1N9IGZyb20gJy4uL2kxOG4vc3RyaW5ncyc7XG5pbXBvcnQge2dldExhbmd1YWdlQ29kZUZyb21FbGVtZW50LCBtc2d9IGZyb20gJy4vaTE4bic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbmltcG9ydCB7U3Vic2NyaXB0aW9uc30gZnJvbSAnLi4vYXBpL3N1YnNjcmlwdGlvbnMnO1xuaW1wb3J0IHthZGRRdWVyeVBhcmFtLCBwYXJzZVF1ZXJ5U3RyaW5nfSBmcm9tICcuL3VybCc7XG5pbXBvcnQge3BhcnNlSnNvbn0gZnJvbSAnLi9qc29uJztcbmltcG9ydCB7c2V0SW1wb3J0YW50U3R5bGVzfSBmcm9tICcuL3N0eWxlJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi9sb2cnO1xuXG4vLyBMb2FkIHR5cGVzIGZvciBDbG9zdXJlIGNvbXBpbGVyLlxuaW1wb3J0ICcuLi9tb2RlbC9kb2MnO1xuXG4vKiogU3RhbXAgZm9yIHBvc3QgbWVzc2FnZXMuICovXG5leHBvcnQgY29uc3QgUE9TVF9NRVNTQUdFX1NUQU1QID0gJ3N3Zy1nYWEtcG9zdC1tZXNzYWdlLXN0YW1wJztcblxuLyoqIEludHJvZHVjdGlvbiBjb21tYW5kIGZvciBwb3N0IG1lc3NhZ2VzLiAqL1xuZXhwb3J0IGNvbnN0IFBPU1RfTUVTU0FHRV9DT01NQU5EX0lOVFJPRFVDVElPTiA9ICdpbnRyb2R1Y3Rpb24nO1xuXG4vKiogVXNlciBjb21tYW5kIGZvciBwb3N0IG1lc3NhZ2VzLiAqL1xuZXhwb3J0IGNvbnN0IFBPU1RfTUVTU0FHRV9DT01NQU5EX1VTRVIgPSAndXNlcic7XG5cbi8qKiBFcnJvciBjb21tYW5kIGZvciBwb3N0IG1lc3NhZ2VzLiAqL1xuZXhwb3J0IGNvbnN0IFBPU1RfTUVTU0FHRV9DT01NQU5EX0VSUk9SID0gJ2Vycm9yJztcblxuLyoqIElEIGZvciB0aGUgR29vZ2xlIFNpZ24tSW4gaWZyYW1lIGVsZW1lbnQuICovXG5leHBvcnQgY29uc3QgR09PR0xFX1NJR05fSU5fSUZSQU1FX0lEID0gJ3N3Zy1nb29nbGUtc2lnbi1pbi1pZnJhbWUnO1xuXG4vKiogSUQgZm9yIHRoZSBHb29nbGUgU2lnbi1JbiBidXR0b24gZWxlbWVudC4gKi9cbmNvbnN0IEdPT0dMRV9TSUdOX0lOX0JVVFRPTl9JRCA9ICdzd2ctZ29vZ2xlLXNpZ24taW4tYnV0dG9uJztcblxuLyoqIElEIGZvciB0aGUgUHVibGlzaGVyIHNpZ24taW4gYnV0dG9uIGVsZW1lbnQuICovXG5jb25zdCBQVUJMSVNIRVJfU0lHTl9JTl9CVVRUT05fSUQgPSAnc3dnLXB1Ymxpc2hlci1zaWduLWluLWJ1dHRvbic7XG5cbi8qKiBJRCBmb3IgdGhlIFJlZ3dhbGwgY29udGFpbmVyIGVsZW1lbnQuICovXG5leHBvcnQgY29uc3QgUkVHV0FMTF9DT05UQUlORVJfSUQgPSAnc3dnLXJlZ3dhbGwtY29udGFpbmVyJztcblxuLyoqIElEIGZvciB0aGUgUmVnd2FsbCBkaWFsb2cgZWxlbWVudC4gKi9cbmV4cG9ydCBjb25zdCBSRUdXQUxMX0RJQUxPR19JRCA9ICdzd2ctcmVnd2FsbC1kaWFsb2cnO1xuXG4vKiogSUQgZm9yIHRoZSBSZWd3YWxsIHRpdGxlIGVsZW1lbnQuICovXG5leHBvcnQgY29uc3QgUkVHV0FMTF9USVRMRV9JRCA9ICdzd2ctcmVnd2FsbC10aXRsZSc7XG5cbi8qKlxuICogSFRNTCBmb3IgdGhlIG1ldGVyaW5nIHJlZ3dhbGwgZGlhbG9nLCB3aGVyZSB1c2VycyBjYW4gc2lnbiBpbiB3aXRoIEdvb2dsZS5cbiAqIFRoZSBzY3JpcHQgY3JlYXRlcyBhIGRpYWxvZyBiYXNlZCBvbiB0aGlzIEhUTUwuXG4gKlxuICogVGhlIEhUTUwgaW5jbHVkZXMgYW4gaWZyYW1lIHRoYXQgbG9hZHMgdGhlIEdvb2dsZSBTaWduLUluIGJ1dHRvbi5cbiAqIFRoaXMgaWZyYW1lIGNhbiBsaXZlIG9uIGEgZGlmZmVyZW50IG9yaWdpbi5cbiAqL1xuY29uc3QgUkVHV0FMTF9IVE1MID0gYFxuPHN0eWxlPlxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWRpYWxvZy1zcGFjZXIsXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tZGlhbG9nLFxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWxvZ28sXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tdGl0bGUsXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tZGVzY3JpcHRpb24sXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tZGVzY3JpcHRpb24gc3Ryb25nLFxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWlmcmFtZSxcbiAgLmdhYS1tZXRlcmluZy1yZWd3YWxsLS1wdWJsaXNoZXItbm8tdGhhbmtzLWJ1dHRvbiB7XG4gICAgYWxsOiBpbml0aWFsO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgZm9udC1mYW1pbHk6IFJvYm90bywgYXJpYWwsIHNhbnMtc2VyaWY7XG4gIH1cblxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWRpYWxvZy1zcGFjZXIge1xuICAgIGJvdHRvbTogMDtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cblxuICBAa2V5ZnJhbWVzIHNsaWRlVXAge1xuICAgIGZyb20ge3RyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDIwMHB4KTt9XG4gICAgdG8ge3RyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApO31cbiAgfVxuXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tZGlhbG9nIHtcbiAgICBhbmltYXRpb246IHNsaWRlVXAgMC41cztcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4IDEycHggMCAwO1xuICAgIGJveC1zaGFkb3c6IDBweCAtMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmc6IDI0cHggMjBweDtcbiAgICB3aWR0aDogNDEwcHg7XG4gIH1cblxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWxvZ28ge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbjogMCBhdXRvIDI0cHg7XG4gIH1cblxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLXRpdGxlIHtcbiAgICBjb2xvcjogIzAwMDtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgbWFyZ2luOiAwIDAgOHB4O1xuICB9XG4gIFxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWRlc2NyaXB0aW9uIHtcbiAgICBjb2xvcjogIzY0NjQ2NDtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gICAgbWFyZ2luOiAwIDAgMzBweDtcbiAgfVxuXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tZGVzY3JpcHRpb24gc3Ryb25nIHtcbiAgICBjb2xvcjogIzY0NjQ2NDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cblxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWlmcmFtZSB7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGhlaWdodDogMzZweDtcbiAgICBtYXJnaW46IDAgMCAzMHB4O1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgLmdhYS1tZXRlcmluZy1yZWd3YWxsLS1saW5lIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGhlaWdodDogMXB4O1xuICAgIG1hcmdpbjogMCAwIDI0cHg7XG4gIH1cblxuICAuZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLXB1Ymxpc2hlci1zaWduLWluLWJ1dHRvbixcbiAgLmdhYS1tZXRlcmluZy1yZWd3YWxsLS1wdWJsaXNoZXItbm8tdGhhbmtzLWJ1dHRvbiB7XG4gICAgY29sb3I6ICMxOTY3ZDI7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgfVxuXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tcHVibGlzaGVyLXNpZ24taW4tYnV0dG9uIHtcbiAgfVxuXG4gIC5nYWEtbWV0ZXJpbmctcmVnd2FsbC0tcHVibGlzaGVyLW5vLXRoYW5rcy1idXR0b24ge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgZmxvYXQ6IHJpZ2h0O1xuICB9XG5cbiAgLmdhYS1tZXRlcmluZy1yZWd3YWxsLS1nb29nbGUtc2lnbi1pbi1idXR0b24ge1xuICAgIGhlaWdodDogMzZweDtcbiAgICBtYXJnaW46IDAgYXV0byAzMHB4O1xuICB9XG5cbiAgLmdhYS1tZXRlcmluZy1yZWd3YWxsLS1nb29nbGUtc2lnbi1pbi1idXR0b24gPiBkaXYge1xuICAgIGFuaW1hdGlvbjogc3dnR29vZ2xlU2lnbkluQnV0dG9uZmFkZUluIDAuMzJzO1xuICB9XG5cbiAgQGtleWZyYW1lcyBzd2dHb29nbGVTaWduSW5CdXR0b25mYWRlSW4ge1xuICAgIGZyb20ge1xuICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG4gICAgdG8ge1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXYgY2xhc3M9XCJnYWEtbWV0ZXJpbmctcmVnd2FsbC0tZGlhbG9nLXNwYWNlclwiPlxuICA8ZGl2IHJvbGU9XCJkaWFsb2dcIiBhcmlhLW1vZGFsPVwidHJ1ZVwiIGNsYXNzPVwiZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWRpYWxvZ1wiIGlkPVwiJHtSRUdXQUxMX0RJQUxPR19JRH1cIiBhcmlhLWxhYmVsbGVkYnk9XCIke1JFR1dBTExfVElUTEVfSUR9XCI+XG4gICAgPGltZyBhbHQ9XCJHb29nbGVcIiBjbGFzcz1cImdhYS1tZXRlcmluZy1yZWd3YWxsLS1sb2dvXCIgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0kzTkNJZ2FHVnBaMmgwUFNJeU5DSWdkbWxsZDBKdmVEMGlNQ0F3SURjMElESTBJajQ4Y0dGMGFDQm1hV3hzUFNJak5ESTROVVkwSWlCa1BTSk5PUzR5TkNBNExqRTVkakl1TkRab05TNDRPR010TGpFNElERXVNemd0TGpZMElESXVNemt0TVM0ek5DQXpMakV0TGpnMkxqZzJMVEl1TWlBeExqZ3ROQzQxTkNBeExqZ3RNeTQyTWlBd0xUWXVORFV0TWk0NU1pMDJMalExTFRZdU5UUnpNaTQ0TXkwMkxqVTBJRFl1TkRVdE5pNDFOR014TGprMUlEQWdNeTR6T0M0M055QTBMalF6SURFdU56Wk1NVFV1TkNBeUxqVkRNVE11T1RRZ01TNHdPQ0F4TVM0NU9DQXdJRGt1TWpRZ01DQTBMakk0SURBZ0xqRXhJRFF1TURRdU1URWdPWE0wTGpFM0lEa2dPUzR4TXlBNVl6SXVOamdnTUNBMExqY3RMamc0SURZdU1qZ3RNaTQxTWlBeExqWXlMVEV1TmpJZ01pNHhNeTB6TGpreElESXVNVE10TlM0M05TQXdMUzQxTnkwdU1EUXRNUzR4TFM0eE15MHhMalUwU0RrdU1qUjZJaTgrUEhCaGRHZ2dabWxzYkQwaUkwVkJORE16TlNJZ1pEMGlUVEkxSURZdU1UbGpMVE11TWpFZ01DMDFMamd6SURJdU5EUXROUzQ0TXlBMUxqZ3hJREFnTXk0ek5DQXlMall5SURVdU9ERWdOUzQ0TXlBMUxqZ3hjelV1T0RNdE1pNDBOaUExTGpnekxUVXVPREZqTUMwekxqTTNMVEl1TmpJdE5TNDRNUzAxTGpnekxUVXVPREY2YlRBZ09TNHpNMk10TVM0M05pQXdMVE11TWpndE1TNDBOUzB6TGpJNExUTXVOVElnTUMweUxqQTVJREV1TlRJdE15NDFNaUF6TGpJNExUTXVOVEp6TXk0eU9DQXhMalF6SURNdU1qZ2dNeTQxTW1Nd0lESXVNRGN0TVM0MU1pQXpMalV5TFRNdU1qZ2dNeTQxTW5vaUx6NDhjR0YwYUNCbWFXeHNQU0lqTkRJNE5VWTBJaUJrUFNKTk5UTXVOVGdnTnk0ME9XZ3RMakE1WXkwdU5UY3RMalk0TFRFdU5qY3RNUzR6TFRNdU1EWXRNUzR6UXpRM0xqVXpJRFl1TVRrZ05EVWdPQzQzTWlBME5TQXhNbU13SURNdU1qWWdNaTQxTXlBMUxqZ3hJRFV1TkRNZ05TNDRNU0F4TGpNNUlEQWdNaTQwT1MwdU5qSWdNeTR3TmkweExqTXlhQzR3T1hZdU9ERmpNQ0F5TGpJeUxURXVNVGtnTXk0ME1TMHpMakVnTXk0ME1TMHhMalUySURBdE1pNDFNeTB4TGpFeUxUSXVPVE10TWk0d04yd3RNaTR5TWk0NU1tTXVOalFnTVM0MU5DQXlMak16SURNdU5ETWdOUzR4TlNBekxqUXpJREl1T1RrZ01DQTFMalV5TFRFdU56WWdOUzQxTWkwMkxqQTFWall1TkRsb0xUSXVOREoyTVhwdExUSXVPVE1nT0M0d00yTXRNUzQzTmlBd0xUTXVNUzB4TGpVdE15NHhMVE11TlRJZ01DMHlMakExSURFdU16UXRNeTQxTWlBekxqRXRNeTQxTWlBeExqYzBJREFnTXk0eElERXVOU0F6TGpFZ015NDFOQzR3TVNBeUxqQXpMVEV1TXpZZ015NDFMVE11TVNBekxqVjZJaTgrUEhCaGRHZ2dabWxzYkQwaUkwWkNRa013TlNJZ1pEMGlUVE00SURZdU1UbGpMVE11TWpFZ01DMDFMamd6SURJdU5EUXROUzQ0TXlBMUxqZ3hJREFnTXk0ek5DQXlMall5SURVdU9ERWdOUzQ0TXlBMUxqZ3hjelV1T0RNdE1pNDBOaUExTGpnekxUVXVPREZqTUMwekxqTTNMVEl1TmpJdE5TNDRNUzAxTGpnekxUVXVPREY2YlRBZ09TNHpNMk10TVM0M05pQXdMVE11TWpndE1TNDBOUzB6TGpJNExUTXVOVElnTUMweUxqQTVJREV1TlRJdE15NDFNaUF6TGpJNExUTXVOVEp6TXk0eU9DQXhMalF6SURNdU1qZ2dNeTQxTW1Nd0lESXVNRGN0TVM0MU1pQXpMalV5TFRNdU1qZ2dNeTQxTW5vaUx6NDhjR0YwYUNCbWFXeHNQU0lqTXpSQk9EVXpJaUJrUFNKTk5UZ2dMakkwYURJdU5URjJNVGN1TlRkSU5UaDZJaTgrUEhCaGRHZ2dabWxzYkQwaUkwVkJORE16TlNJZ1pEMGlUVFk0TGpJMklERTFMalV5WXkweExqTWdNQzB5TGpJeUxTNDFPUzB5TGpneUxURXVOelpzTnk0M055MHpMakl4TFM0eU5pMHVOalpqTFM0ME9DMHhMak10TVM0NU5pMHpMamN0TkM0NU55MHpMamN0TWk0NU9TQXdMVFV1TkRnZ01pNHpOUzAxTGpRNElEVXVPREVnTUNBekxqSTJJREl1TkRZZ05TNDRNU0ExTGpjMklEVXVPREVnTWk0Mk5pQXdJRFF1TWkweExqWXpJRFF1T0RRdE1pNDFOMnd0TVM0NU9DMHhMak15WXkwdU5qWXVPVFl0TVM0MU5pQXhMall0TWk0NE5pQXhMalo2YlMwdU1UZ3ROeTR4TldNeExqQXpJREFnTVM0NU1TNDFNeUF5TGpJZ01TNHlPR3d0TlM0eU5TQXlMakUzWXpBdE1pNDBOQ0F4TGpjekxUTXVORFVnTXk0d05TMHpMalExZWlJdlBqd3ZjM1puUGc9PVwiIC8+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLXRpdGxlXCIgaWQ9XCIke1JFR1dBTExfVElUTEVfSUR9XCIgdGFiaW5kZXg9XCIwXCI+JFNIT1dDQVNFX1JFR1dBTExfVElUTEUkPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLWRlc2NyaXB0aW9uXCI+XG4gICAgICAkU0hPV0NBU0VfUkVHV0FMTF9ERVNDUklQVElPTiRcbiAgICA8L2Rpdj5cblxuICAgIDxpZnJhbWVcbiAgICAgICAgaWQ9XCIke0dPT0dMRV9TSUdOX0lOX0lGUkFNRV9JRH1cIlxuICAgICAgICBjbGFzcz1cImdhYS1tZXRlcmluZy1yZWd3YWxsLS1pZnJhbWVcIlxuICAgICAgICBzcmM9XCIkaWZyYW1lVXJsJFwiPlxuICAgIDwvaWZyYW1lPlxuXG4gICAgPGRpdiBjbGFzcz1cImdhYS1tZXRlcmluZy1yZWd3YWxsLS1saW5lXCI+PC9kaXY+XG5cbiAgICA8YVxuICAgICAgICBpZD1cIiR7UFVCTElTSEVSX1NJR05fSU5fQlVUVE9OX0lEfVwiXG4gICAgICAgIGNsYXNzPVwiZ2FhLW1ldGVyaW5nLXJlZ3dhbGwtLXB1Ymxpc2hlci1zaWduLWluLWJ1dHRvblwiXG4gICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgIGhyZWY9XCIjXCI+XG4gICAgICAkU0hPV0NBU0VfUkVHV0FMTF9QVUJMSVNIRVJfU0lHTl9JTl9CVVRUT04kXG4gICAgPC9hPlxuICA8L2Rpdj5cbjwvZGl2PlxuYDtcblxuLyoqIFN0eWxlcyBmb3IgdGhlIEdvb2dsZSBTaWduLUluIGJ1dHRvbiBpZnJhbWUuICovXG5jb25zdCBHT09HTEVfU0lHTl9JTl9JRlJBTUVfU1RZTEVTID0gYFxuYm9keSB7XG4gIG1hcmdpbjogMDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cbiMke0dPT0dMRV9TSUdOX0lOX0JVVFRPTl9JRH0ge1xuICBtYXJnaW46IDAgYXV0bztcbn1cbiMke0dPT0dMRV9TSUdOX0lOX0JVVFRPTl9JRH0gPiBkaXYge1xuICBhbmltYXRpb246IGZhZGVJbiAwLjMycztcbn1cbkBrZXlmcmFtZXMgZmFkZUluIHtcbiAgZnJvbSB7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICB0byB7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuIyR7R09PR0xFX1NJR05fSU5fQlVUVE9OX0lEfSAuYWJjUmlvQnV0dG9uLmFiY1Jpb0J1dHRvbkJsdWUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMUE3M0U4O1xuICBib3gtc2hhZG93OiBub25lO1xuICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbn1cbiMke0dPT0dMRV9TSUdOX0lOX0JVVFRPTl9JRH0gLmFiY1Jpb0J1dHRvbi5hYmNSaW9CdXR0b25CbHVlIC5hYmNSaW9CdXR0b25JY29uIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbi8qKiBIaWRlcyBkZWZhdWx0IFwiU2lnbiBpbiB3aXRoIEdvb2dsZVwiIHRleHQuICovXG4jJHtHT09HTEVfU0lHTl9JTl9CVVRUT05fSUR9IC5hYmNSaW9CdXR0b24uYWJjUmlvQnV0dG9uQmx1ZSAuYWJjUmlvQnV0dG9uQ29udGVudHMgc3BhbltpZF49bm90X3NpZ25lZF9dIHtcbiAgZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7XG59XG4vKiogUmVuZGVycyBsb2NhbGl6ZWQgXCJTaWduIGluIHdpdGggR29vZ2xlXCIgdGV4dCBpbnN0ZWFkLiAqL1xuIyR7R09PR0xFX1NJR05fSU5fQlVUVE9OX0lEfSAuYWJjUmlvQnV0dG9uLmFiY1Jpb0J1dHRvbkJsdWUgLmFiY1Jpb0J1dHRvbkNvbnRlbnRzIHNwYW5baWRePW5vdF9zaWduZWRfXTo6YmVmb3JlIHtcbiAgY29udGVudDogJyRTSE9XQ0FTRV9SRUdXQUxMX0dPT0dMRV9TSUdOX0lOX0JVVFRPTiQnO1xuICBmb250LXNpemU6IDE1cHg7XG59XG5gO1xuXG4vKipcbiAqIFVzZXIgb2JqZWN0IHRoYXQgUHVibGlzaGVyIEpTIHJlY2VpdmVzIGFmdGVyIHVzZXJzIHNpZ24gaW4uXG4gKiBAdHlwZWRlZiB7e1xuICogICBpZFRva2VuOiBzdHJpbmcsXG4gKiAgIG5hbWU6IHN0cmluZyxcbiAqICAgZ2l2ZW5OYW1lOiBzdHJpbmcsXG4gKiAgIGZhbWlseU5hbWU6IHN0cmluZyxcbiAqICAgaW1hZ2VVcmw6IHN0cmluZyxcbiAqICAgZW1haWw6IHN0cmluZyxcbiAqIH19IEdhYVVzZXJEZWZcbiAqL1xuZXhwb3J0IGxldCBHYWFVc2VyRGVmO1xuXG4vKipcbiAqIEdvb2dsZVVzZXIgb2JqZWN0IHRoYXQgR29vZ2xlIFNpZ24tSW4gcmV0dXJucyBhZnRlciB1c2VycyBzaWduIGluLlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vaWRlbnRpdHkvc2lnbi1pbi93ZWIvcmVmZXJlbmNlI2dvb2dsZXVzZXJnZXRiYXNpY3Byb2ZpbGVcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGdldEF1dGhSZXNwb25zZTogZnVuY3Rpb24oKToge2lkX3Rva2VuOiBzdHJpbmd9LFxuICogICBnZXRCYXNpY1Byb2ZpbGU6IGZ1bmN0aW9uKCk6IHtcbiAqICAgICBnZXROYW1lOiBmdW5jdGlvbigpOiBzdHJpbmcsXG4gKiAgICAgZ2V0R2l2ZW5OYW1lOiBmdW5jdGlvbigpOiBzdHJpbmcsXG4gKiAgICAgZ2V0RmFtaWx5TmFtZTogZnVuY3Rpb24oKTogc3RyaW5nLFxuICogICAgIGdldEltYWdlVXJsOiBmdW5jdGlvbigpOiBzdHJpbmcsXG4gKiAgICAgZ2V0RW1haWw6IGZ1bmN0aW9uKCk6IHN0cmluZyxcbiAqICAgfSxcbiAqIH19IEdvb2dsZVVzZXJEZWZcbiAqL1xuZXhwb3J0IGxldCBHb29nbGVVc2VyRGVmO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcXVlcnkgc3RyaW5nIGNvbnRhaW5zIGZyZXNoIEdvb2dsZSBBcnRpY2xlIEFjY2VzcyAoR0FBKSBwYXJhbXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeVN0cmluZ0hhc0ZyZXNoR2FhUGFyYW1zKHF1ZXJ5U3RyaW5nKSB7XG4gIGNvbnN0IHBhcmFtcyA9IHBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuXG4gIC8vIFZlcmlmeSBHQUEgcGFyYW1zIGV4aXN0LlxuICBpZiAoXG4gICAgIXBhcmFtc1snZ2FhX2F0J10gfHxcbiAgICAhcGFyYW1zWydnYWFfbiddIHx8XG4gICAgIXBhcmFtc1snZ2FhX3NpZyddIHx8XG4gICAgIXBhcmFtc1snZ2FhX3RzJ11cbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gVmVyaWZ5IHRpbWVzdGFtcCBpc24ndCBzdGFsZS5cbiAgY29uc3QgZXhwaXJhdGlvblRpbWVzdGFtcCA9IHBhcnNlSW50KHBhcmFtc1snZ2FhX3RzJ10sIDE2KTtcbiAgY29uc3QgY3VycmVudFRpbWVzdGFtcCA9IERhdGUubm93KCkgLyAxMDAwO1xuICBpZiAoZXhwaXJhdGlvblRpbWVzdGFtcCA8IGN1cnJlbnRUaW1lc3RhbXApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqIFJlbmRlcnMgR29vZ2xlIEFydGljbGUgQWNjZXNzIChHQUEpIE1ldGVyaW5nIFJlZ3dhbGwuICovXG5leHBvcnQgY2xhc3MgR2FhTWV0ZXJpbmdSZWd3YWxsIHtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIEdvb2dsZSBTaWduLUluIHVzZXIgb2JqZWN0LlxuICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9pZGVudGl0eS9zaWduLWluL3dlYi9yZWZlcmVuY2UjZ29vZ2xldXNlcmdldGJhc2ljcHJvZmlsZVxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBvcGVucyBhIG1ldGVyaW5nIHJlZ3dhbGwgZGlhbG9nLFxuICAgKiB3aGVyZSB1c2VycyBjYW4gc2lnbiBpbiB3aXRoIEdvb2dsZS5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQHBhcmFtIHt7IGlmcmFtZVVybDogc3RyaW5nIH19IHBhcmFtc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhR2FhVXNlckRlZj59XG4gICAqL1xuICBzdGF0aWMgc2hvdyh7aWZyYW1lVXJsfSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gR2FhVXRpbHMuZ2V0UXVlcnlTdHJpbmcoKTtcbiAgICBpZiAoIXF1ZXJ5U3RyaW5nSGFzRnJlc2hHYWFQYXJhbXMocXVlcnlTdHJpbmcpKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICAnW3N3Zy1nYWEuanM6R2FhTWV0ZXJpbmdSZWd3YWxsLnNob3ddOiBVUkwgbmVlZHMgZnJlc2ggR0FBIHBhcmFtcy4nO1xuICAgICAgd2FybihlcnJvck1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgR2FhTWV0ZXJpbmdSZWd3YWxsLnJlbmRlcl8oe2lmcmFtZVVybH0pO1xuICAgIEdhYU1ldGVyaW5nUmVnd2FsbC5zZW5kSW50cm9NZXNzYWdlVG9Hc2lJZnJhbWVfKHtpZnJhbWVVcmx9KTtcbiAgICByZXR1cm4gR2FhTWV0ZXJpbmdSZWd3YWxsLmdldEdhYVVzZXJfKClcbiAgICAgIC50aGVuKChnYWFVc2VyKSA9PiB7XG4gICAgICAgIEdhYU1ldGVyaW5nUmVnd2FsbC5yZW1vdmVfKCk7XG4gICAgICAgIHJldHVybiBnYWFVc2VyO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIC8vIENsb3NlIHRoZSBSZWd3YWxsLCBzaW5jZSB0aGUgZmxvdyBmYWlsZWQuXG4gICAgICAgIEdhYU1ldGVyaW5nUmVnd2FsbC5yZW1vdmVfKCk7XG5cbiAgICAgICAgLy8gUmV0aHJvdyBlcnJvci5cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2lnbnMgb3V0IG9mIEdvb2dsZSBTaWduLUluLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgZGV2ZWxvcGVycyB3aG8gYXJlIHRlc3RpbmcgdGhlaXJcbiAgICogU3dHIGludGVncmF0aW9ucy5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGF0aWMgc2lnbk91dCgpIHtcbiAgICByZXR1cm4gY29uZmlndXJlR29vZ2xlU2lnbkluKCkudGhlbigoKSA9PlxuICAgICAgc2VsZi5nYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25PdXQoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgUmVnd2FsbC5cbiAgICogQHByaXZhdGVcbiAgICogQG5vY29sbGFwc2VcbiAgICogQHBhcmFtIHt7IGlmcmFtZVVybDogc3RyaW5nIH19IHBhcmFtc1xuICAgKi9cbiAgc3RhdGljIHJlbmRlcl8oe2lmcmFtZVVybH0pIHtcbiAgICBjb25zdCBsYW5ndWFnZUNvZGUgPSBnZXRMYW5ndWFnZUNvZGVGcm9tRWxlbWVudChzZWxmLmRvY3VtZW50LmJvZHkpO1xuXG4gICAgLy8gVGVsbCB0aGUgaWZyYW1lIHdoaWNoIGxhbmd1YWdlIHRvIHJlbmRlci5cbiAgICBpZnJhbWVVcmwgPSBhZGRRdWVyeVBhcmFtKGlmcmFtZVVybCwgJ2xhbmcnLCBsYW5ndWFnZUNvZGUpO1xuXG4gICAgY29uc3QgY29udGFpbmVyRWwgPSAvKiogQHR5cGUgeyFIVE1MRGl2RWxlbWVudH0gKi8gKHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnXG4gICAgKSk7XG4gICAgY29udGFpbmVyRWwuaWQgPSBSRUdXQUxMX0NPTlRBSU5FUl9JRDtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXMoY29udGFpbmVyRWwsIHtcbiAgICAgICdhbGwnOiAndW5zZXQnLFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgzMiwgMzMsIDM2LCAwLjYpJyxcbiAgICAgICdib3JkZXInOiAnbm9uZScsXG4gICAgICAnYm90dG9tJzogJzAnLFxuICAgICAgJ2hlaWdodCc6ICcxMDAlJyxcbiAgICAgICdsZWZ0JzogJzAnLFxuICAgICAgJ29wYWNpdHknOiAnMCcsXG4gICAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICAgJ3JpZ2h0JzogJzAnLFxuICAgICAgJ3RyYW5zaXRpb24nOiAnb3BhY2l0eSAwLjVzJyxcbiAgICAgICd0b3AnOiAnMCcsXG4gICAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgICAnei1pbmRleCc6IDIxNDc0ODM2NDYsXG4gICAgfSk7XG4gICAgY29udGFpbmVyRWwuLypPSyovIGlubmVySFRNTCA9IFJFR1dBTExfSFRNTC5yZXBsYWNlKFxuICAgICAgJyRpZnJhbWVVcmwkJyxcbiAgICAgIGlmcmFtZVVybFxuICAgIClcbiAgICAgIC5yZXBsYWNlKFxuICAgICAgICAnJFNIT1dDQVNFX1JFR1dBTExfVElUTEUkJyxcbiAgICAgICAgbXNnKEkxOE5fU1RSSU5HU1snU0hPV0NBU0VfUkVHV0FMTF9USVRMRSddLCBsYW5ndWFnZUNvZGUpXG4gICAgICApXG4gICAgICAucmVwbGFjZShcbiAgICAgICAgJyRTSE9XQ0FTRV9SRUdXQUxMX0RFU0NSSVBUSU9OJCcsXG4gICAgICAgIG1zZyhJMThOX1NUUklOR1NbJ1NIT1dDQVNFX1JFR1dBTExfREVTQ1JJUFRJT04nXSwgbGFuZ3VhZ2VDb2RlKVxuICAgICAgKVxuICAgICAgLnJlcGxhY2UoXG4gICAgICAgICckU0hPV0NBU0VfUkVHV0FMTF9QVUJMSVNIRVJfU0lHTl9JTl9CVVRUT04kJyxcbiAgICAgICAgbXNnKFxuICAgICAgICAgIEkxOE5fU1RSSU5HU1snU0hPV0NBU0VfUkVHV0FMTF9QVUJMSVNIRVJfU0lHTl9JTl9CVVRUT04nXSxcbiAgICAgICAgICBsYW5ndWFnZUNvZGVcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCdwaCcpLi8qT0sqLyBpbm5lckhUTUwgPVxuICAgICAgJzxzdHJvbmc+JyArXG4gICAgICBHYWFNZXRlcmluZ1JlZ3dhbGwuZ2V0UHVibGlzaGVyTmFtZUZyb21QYWdlQ29uZmlnXygpICtcbiAgICAgICc8L3N0cm9uZz4nO1xuICAgIHNlbGYuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXJFbCk7XG4gICAgLyoqIEBzdXBwcmVzcyB7c3VzcGljaW91c0NvZGV9ICovXG4gICAgY29udGFpbmVyRWwub2Zmc2V0SGVpZ2h0OyAvLyBUcmlnZ2VyIGEgcmVwYWludCAodG8gcHJlcGFyZSB0aGUgQ1NTIHRyYW5zaXRpb24pLlxuICAgIHNldEltcG9ydGFudFN0eWxlcyhjb250YWluZXJFbCwgeydvcGFjaXR5JzogMX0pO1xuICAgIEdhYU1ldGVyaW5nUmVnd2FsbC5hZGRDbGlja0xpc3RlbmVyT25QdWJsaXNoZXJTaWduSW5CdXR0b25fKCk7XG5cbiAgICAvLyBGb2N1cyBvbiB0aGUgdGl0bGUgYWZ0ZXIgdGhlIGRpYWxvZyBhbmltYXRlcyBpbi5cbiAgICAvLyBUaGlzIGhlbHBzIHBlb3BsZSB1c2luZyBzY3JlZW5yZWFkZXJzLlxuICAgIGNvbnN0IGRpYWxvZ0VsID0gc2VsZi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChSRUdXQUxMX0RJQUxPR19JRCk7XG4gICAgZGlhbG9nRWwuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGl0bGVFbCA9IHNlbGYuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVHV0FMTF9USVRMRV9JRCk7XG4gICAgICB0aXRsZUVsLmZvY3VzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBwdWJsaXNoZXIgbmFtZSBmcm9tIHBhZ2UgY29uZmlnLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0UHVibGlzaGVyTmFtZUZyb21QYWdlQ29uZmlnXygpIHtcbiAgICBjb25zdCBsZEpzb25FbGVtZW50cyA9IHNlbGYuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICdzY3JpcHRbdHlwZT1cImFwcGxpY2F0aW9uL2xkK2pzb25cIl0nXG4gICAgKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGRKc29uRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxkSnNvbkVsZW1lbnQgPSBsZEpzb25FbGVtZW50c1tpXTtcbiAgICAgIGNvbnN0IGxkSnNvbiA9IC8qKiBAdHlwZSB7P3sgcHVibGlzaGVyOiA/eyBuYW1lOiBzdHJpbmcgfSB9fSAqLyAocGFyc2VKc29uKFxuICAgICAgICBsZEpzb25FbGVtZW50LnRleHRDb250ZW50XG4gICAgICApKTtcbiAgICAgIGlmIChsZEpzb24/LnB1Ymxpc2hlcj8ubmFtZSkge1xuICAgICAgICByZXR1cm4gbGRKc29uLnB1Ymxpc2hlci5uYW1lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcignQXJ0aWNsZSBuZWVkcyBKU09OLUxEIHdpdGggYSBwdWJsaXNoZXIgbmFtZS4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY2xpY2sgbGlzdGVuZXIgb24gdGhlIHB1Ymxpc2hlciBzaWduLWluIGJ1dHRvbi5cbiAgICogQHByaXZhdGVcbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHN0YXRpYyBhZGRDbGlja0xpc3RlbmVyT25QdWJsaXNoZXJTaWduSW5CdXR0b25fKCkge1xuICAgIHNlbGYuZG9jdW1lbnRcbiAgICAgIC5nZXRFbGVtZW50QnlJZChQVUJMSVNIRVJfU0lHTl9JTl9CVVRUT05fSUQpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIChzZWxmLlNXRyA9IHNlbGYuU1dHIHx8IFtdKS5wdXNoKChzdWJzY3JpcHRpb25zKSA9PiB7XG4gICAgICAgICAgLyoqIEB0eXBlIHshU3Vic2NyaXB0aW9uc30gKi8gKHN1YnNjcmlwdGlvbnMpLnRyaWdnZXJMb2dpblJlcXVlc3Qoe1xuICAgICAgICAgICAgbGlua1JlcXVlc3RlZDogZmFsc2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR0FBIHVzZXIsIGFmdGVyIHRoZSB1c2VyIHNpZ25zIGluLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhR29vZ2xlVXNlckRlZj59XG4gICAqL1xuICBzdGF0aWMgZ2V0R2FhVXNlcl8oKSB7XG4gICAgLy8gTGlzdGVuIGZvciBHQUEgdXNlci5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS5zdGFtcCA9PT0gUE9TVF9NRVNTQUdFX1NUQU1QKSB7XG4gICAgICAgICAgaWYgKGUuZGF0YS5jb21tYW5kID09PSBQT1NUX01FU1NBR0VfQ09NTUFORF9VU0VSKSB7XG4gICAgICAgICAgICAvLyBQYXNzIGFsb25nIEdBQSB1c2VyLlxuICAgICAgICAgICAgcmVzb2x2ZShlLmRhdGEuZ2FhVXNlcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGUuZGF0YS5jb21tYW5kID09PSBQT1NUX01FU1NBR0VfQ09NTUFORF9FUlJPUikge1xuICAgICAgICAgICAgLy8gUmVqZWN0IHByb21pc2UgZHVlIHRvIEdvb2dsZSBTaWduLUluIGVycm9yLlxuICAgICAgICAgICAgcmVqZWN0KCdHb29nbGUgU2lnbi1JbiBjb3VsZCBub3QgcmVuZGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBpbnRybyBwb3N0IG1lc3NhZ2UgdG8gR29vZ2xlIFNpZ24tSW4gaWZyYW1lLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAcGFyYW0ge3sgaWZyYW1lVXJsOiBzdHJpbmcgfX0gcGFyYW1zXG4gICAqL1xuICBzdGF0aWMgc2VuZEludHJvTWVzc2FnZVRvR3NpSWZyYW1lXyh7aWZyYW1lVXJsfSkge1xuICAgIC8vIEludHJvZHVjZSB0aGlzIHdpbmRvdyB0byB0aGUgcHVibGlzaGVyJ3MgR29vZ2xlIFNpZ24tSW4gaWZyYW1lLlxuICAgIC8vIFRoaXMgbGV0cyB0aGUgaWZyYW1lIHNlbmQgcG9zdCBtZXNzYWdlcyBiYWNrIHRvIHRoaXMgd2luZG93LlxuICAgIC8vIFdpdGhvdXQgdGhlIGludHJvZHVjdGlvbiwgdGhlIGlmcmFtZSB3b3VsZG4ndCBoYXZlIGEgcmVmZXJlbmNlIHRvIHRoaXMgd2luZG93LlxuICAgIGNvbnN0IGdvb2dsZVNpZ25JbklmcmFtZSA9IC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoc2VsZi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgIEdPT0dMRV9TSUdOX0lOX0lGUkFNRV9JRFxuICAgICkpO1xuICAgIGdvb2dsZVNpZ25JbklmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBnb29nbGVTaWduSW5JZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShcbiAgICAgICAge1xuICAgICAgICAgIHN0YW1wOiBQT1NUX01FU1NBR0VfU1RBTVAsXG4gICAgICAgICAgY29tbWFuZDogUE9TVF9NRVNTQUdFX0NPTU1BTkRfSU5UUk9EVUNUSU9OLFxuICAgICAgICB9LFxuICAgICAgICBuZXcgVVJMKGlmcmFtZVVybCkub3JpZ2luXG4gICAgICApO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgUmVnd2FsbC5cbiAgICogQHByaXZhdGVcbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHN0YXRpYyByZW1vdmVfKCkge1xuICAgIGNvbnN0IHJlZ3dhbGxDb250YWluZXIgPSBzZWxmLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFJFR1dBTExfQ09OVEFJTkVSX0lEKTtcbiAgICBpZiAocmVnd2FsbENvbnRhaW5lcikge1xuICAgICAgcmVnd2FsbENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhYUdvb2dsZVNpZ25JbkJ1dHRvbiB7XG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBHb29nbGUgU2lnbi1JbiBidXR0b24uXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBwYXJhbSB7eyBhbGxvd2VkT3JpZ2luczogIUFycmF5PHN0cmluZz4gfX0gcGFyYW1zXG4gICAqL1xuICBzdGF0aWMgc2hvdyh7YWxsb3dlZE9yaWdpbnN9KSB7XG4gICAgLy8gT3B0aW9uYWxseSBncmFiIGxhbmd1YWdlIGNvZGUgZnJvbSBVUkwuXG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBHYWFVdGlscy5nZXRRdWVyeVN0cmluZygpO1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZyk7XG4gICAgY29uc3QgbGFuZ3VhZ2VDb2RlID0gcXVlcnlQYXJhbXNbJ2xhbmcnXSB8fCAnZW4nO1xuXG4gICAgLy8gQXBwbHkgaWZyYW1lIHN0eWxlcy5cbiAgICBjb25zdCBzdHlsZUVsID0gc2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwuLypPSyovIGlubmVyVGV4dCA9IEdPT0dMRV9TSUdOX0lOX0lGUkFNRV9TVFlMRVMucmVwbGFjZShcbiAgICAgICckU0hPV0NBU0VfUkVHV0FMTF9HT09HTEVfU0lHTl9JTl9CVVRUT04kJyxcbiAgICAgIG1zZyhJMThOX1NUUklOR1NbJ1NIT1dDQVNFX1JFR1dBTExfR09PR0xFX1NJR05fSU5fQlVUVE9OJ10sIGxhbmd1YWdlQ29kZSlcbiAgICApO1xuICAgIHNlbGYuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcblxuICAgIC8vIFByb21pc2UgYSBmdW5jdGlvbiB0aGF0IHNlbmRzIG1lc3NhZ2VzIHRvIHRoZSBwYXJlbnQgZnJhbWUuXG4gICAgLy8gTm90ZTogQSBmdW5jdGlvbiBpcyBwcmVmZXJhYmxlIHRvIGEgcmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgZnJhbWVcbiAgICAvLyBiZWNhdXNlIHJlZmVyZW5jaW5nIHRoZSBwYXJlbnQgZnJhbWUgb3V0c2lkZSBvZiB0aGUgJ21lc3NhZ2UnIGV2ZW50XG4gICAgLy8gaGFuZGxlciB0aHJvd3MgYW4gRXJyb3IuIEEgZnVuY3Rpb24gZGVmaW5lZCB3aXRoaW4gdGhlIGhhbmRsZXIgY2FuXG4gICAgLy8gZWZmZWN0aXZlbHkgc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGUgcGFyZW50IGZyYW1lIHRob3VnaC5cbiAgICBjb25zdCBzZW5kTWVzc2FnZVRvUGFyZW50Rm5Qcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChlKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhbGxvd2VkT3JpZ2lucy5pbmRleE9mKGUub3JpZ2luKSAhPT0gLTEgJiZcbiAgICAgICAgICBlLmRhdGEuc3RhbXAgPT09IFBPU1RfTUVTU0FHRV9TVEFNUCAmJlxuICAgICAgICAgIGUuZGF0YS5jb21tYW5kID09PSBQT1NUX01FU1NBR0VfQ09NTUFORF9JTlRST0RVQ1RJT05cbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzb2x2ZSgobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgZS5zb3VyY2UucG9zdE1lc3NhZ2UobWVzc2FnZSwgZS5vcmlnaW4pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNlbmRFcnJvck1lc3NhZ2VUb1BhcmVudCgpIHtcbiAgICAgIHNlbmRNZXNzYWdlVG9QYXJlbnRGblByb21pc2UudGhlbigoc2VuZE1lc3NhZ2VUb1BhcmVudCkgPT4ge1xuICAgICAgICBzZW5kTWVzc2FnZVRvUGFyZW50KHtcbiAgICAgICAgICBzdGFtcDogUE9TVF9NRVNTQUdFX1NUQU1QLFxuICAgICAgICAgIGNvbW1hbmQ6IFBPU1RfTUVTU0FHRV9DT01NQU5EX0VSUk9SLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIG9yaWdpbnMuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxvd2VkT3JpZ2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYWxsb3dlZE9yaWdpbiA9IGFsbG93ZWRPcmlnaW5zW2ldO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChhbGxvd2VkT3JpZ2luKTtcblxuICAgICAgY29uc3QgaXNPcmlnaW4gPSB1cmwub3JpZ2luID09PSBhbGxvd2VkT3JpZ2luO1xuICAgICAgY29uc3QgcHJvdG9jb2xJc1ZhbGlkID1cbiAgICAgICAgdXJsLnByb3RvY29sID09PSAnaHR0cDonIHx8IHVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOic7XG4gICAgICBjb25zdCBpc1ZhbGlkT3JpZ2luID0gaXNPcmlnaW4gJiYgcHJvdG9jb2xJc1ZhbGlkO1xuXG4gICAgICBpZiAoIWlzVmFsaWRPcmlnaW4pIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBgW3N3Zy1nYWEuanM6R2FhR29vZ2xlU2lnbkluQnV0dG9uLnNob3ddOiBZb3Ugc3BlY2lmaWVkIGFuIGludmFsaWQgb3JpZ2luOiAke2FsbG93ZWRPcmlnaW59YFxuICAgICAgICApO1xuICAgICAgICBzZW5kRXJyb3JNZXNzYWdlVG9QYXJlbnQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlbmRlciB0aGUgR29vZ2xlIFNpZ24tSW4gYnV0dG9uLlxuICAgIGNvbmZpZ3VyZUdvb2dsZVNpZ25JbigpXG4gICAgICAudGhlbihcbiAgICAgICAgLy8gUHJvbWlzZSBjcmVkZW50aWFscy5cbiAgICAgICAgKCkgPT5cbiAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgLy8gUmVuZGVyIHRoZSBHb29nbGUgU2lnbi1JbiBidXR0b24uXG4gICAgICAgICAgICBjb25zdCBidXR0b25FbCA9IHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBidXR0b25FbC5pZCA9IEdPT0dMRV9TSUdOX0lOX0JVVFRPTl9JRDtcbiAgICAgICAgICAgIGJ1dHRvbkVsLnRhYkluZGV4ID0gMDtcbiAgICAgICAgICAgIHNlbGYuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b25FbCk7XG4gICAgICAgICAgICBzZWxmLmdhcGkuc2lnbmluMi5yZW5kZXIoR09PR0xFX1NJR05fSU5fQlVUVE9OX0lELCB7XG4gICAgICAgICAgICAgICdsb25ndGl0bGUnOiB0cnVlLFxuICAgICAgICAgICAgICAnb25zdWNjZXNzJzogcmVzb2x2ZSxcbiAgICAgICAgICAgICAgJ3Byb21wdCc6ICdzZWxlY3RfYWNjb3VudCcsXG4gICAgICAgICAgICAgICdzY29wZSc6ICdwcm9maWxlIGVtYWlsJyxcbiAgICAgICAgICAgICAgJ3RoZW1lJzogJ2RhcmsnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIC50aGVuKChnb29nbGVVc2VyKSA9PiB7XG4gICAgICAgIC8vIEdhdGhlciBHQUEgdXNlciBkZXRhaWxzLlxuICAgICAgICBjb25zdCBiYXNpY1Byb2ZpbGUgPSAvKiogQHR5cGUgeyFHb29nbGVVc2VyRGVmfSAqLyAoZ29vZ2xlVXNlcikuZ2V0QmFzaWNQcm9maWxlKCk7XG4gICAgICAgIC8qKiBAdHlwZSB7IUdhYVVzZXJEZWZ9ICovXG4gICAgICAgIGNvbnN0IGdhYVVzZXIgPSB7XG4gICAgICAgICAgaWRUb2tlbjogLyoqIEB0eXBlIHshR29vZ2xlVXNlckRlZn0gKi8gKGdvb2dsZVVzZXIpLmdldEF1dGhSZXNwb25zZSgpXG4gICAgICAgICAgICAuaWRfdG9rZW4sXG4gICAgICAgICAgbmFtZTogYmFzaWNQcm9maWxlLmdldE5hbWUoKSxcbiAgICAgICAgICBnaXZlbk5hbWU6IGJhc2ljUHJvZmlsZS5nZXRHaXZlbk5hbWUoKSxcbiAgICAgICAgICBmYW1pbHlOYW1lOiBiYXNpY1Byb2ZpbGUuZ2V0RmFtaWx5TmFtZSgpLFxuICAgICAgICAgIGltYWdlVXJsOiBiYXNpY1Byb2ZpbGUuZ2V0SW1hZ2VVcmwoKSxcbiAgICAgICAgICBlbWFpbDogYmFzaWNQcm9maWxlLmdldEVtYWlsKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2VuZCBHQUEgdXNlciB0byBwYXJlbnQgZnJhbWUuXG4gICAgICAgIHNlbmRNZXNzYWdlVG9QYXJlbnRGblByb21pc2UudGhlbigoc2VuZE1lc3NhZ2VUb1BhcmVudCkgPT4ge1xuICAgICAgICAgIHNlbmRNZXNzYWdlVG9QYXJlbnQoe1xuICAgICAgICAgICAgc3RhbXA6IFBPU1RfTUVTU0FHRV9TVEFNUCxcbiAgICAgICAgICAgIGNvbW1hbmQ6IFBPU1RfTUVTU0FHRV9DT01NQU5EX1VTRVIsXG4gICAgICAgICAgICBnYWFVc2VyLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goc2VuZEVycm9yTWVzc2FnZVRvUGFyZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIExvYWRzIHRoZSBHb29nbGUgU2lnbi1JbiBBUEkuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGluIHR3byBwbGFjZXMuXG4gKiAxLiBUaGUgcHVibGlzaGVyJ3MgR29vZ2xlIFNpZ24tSW4gaWZyYW1lLlxuICogMi4gKE9wdGlvbmFsKSBEZW1vcyB0aGF0IGFsbG93IHVzZXJzIHRvIHNpZ24gb3V0LlxuICpcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBjb25maWd1cmVHb29nbGVTaWduSW4oKSB7XG4gIC8vIFdhaXQgZm9yIEdvb2dsZSBTaWduLUluIEFQSS5cbiAgcmV0dXJuIChcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgYXBpQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCEhc2VsZi5nYXBpKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChhcGlDaGVja0ludGVydmFsKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwKTtcbiAgICB9KVxuICAgICAgLy8gTG9hZCBBdXRoMiBtb2R1bGUuXG4gICAgICAudGhlbigoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2VsZi5nYXBpLmxvYWQoJ2F1dGgyJywgcmVzb2x2ZSkpKVxuICAgICAgLy8gU3BlY2lmeSBcInJlZGlyZWN0XCIgbW9kZS4gSXQgcGxheXMgbmljZXIgd2l0aCB3ZWJ2aWV3cy5cbiAgICAgIC50aGVuKFxuICAgICAgICAoKSA9PlxuICAgICAgICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBHb29nbGUgU2lnbi1JbiBvbmNlLlxuICAgICAgICAgIHNlbGYuZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKSB8fCBzZWxmLmdhcGkuYXV0aDIuaW5pdCgpXG4gICAgICApXG4gICk7XG59XG5cbmV4cG9ydCBjbGFzcyBHYWFVdGlscyB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHF1ZXJ5IHN0cmluZyBmcm9tIGN1cnJlbnQgVVJMLlxuICAgKiBUZXN0cyBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcmV0dXJuIGRpZmZlcmVudCBVUkxzLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0UXVlcnlTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHNlbGYubG9jYXRpb24uc2VhcmNoO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBFbmdsaXNoIGlzIHRoZSBkZWZhdWx0IGxhbmd1YWdlLiAqL1xuY29uc3QgREVGQVVMVF9MQU5HVUFHRV9DT0RFID0gJ2VuJztcblxuLyoqXG4gKiBHZXRzIGEgbWVzc2FnZSBmb3IgYSBnaXZlbiBsYW5ndWFnZSBjb2RlLCBmcm9tIGEgbWFwIG9mIG1lc3NhZ2VzLlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gbWFwXG4gKiBAcGFyYW0gez9zdHJpbmd8P0VsZW1lbnR9IGxhbmd1YWdlQ29kZU9yRWxlbWVudFxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1zZyhtYXAsIGxhbmd1YWdlQ29kZU9yRWxlbWVudCkge1xuICBjb25zdCBkZWZhdWx0TXNnID0gbWFwW0RFRkFVTFRfTEFOR1VBR0VfQ09ERV07XG5cbiAgLy8gVmVyaWZ5IHBhcmFtcy5cbiAgaWYgKHR5cGVvZiBtYXAgIT09ICdvYmplY3QnIHx8ICFsYW5ndWFnZUNvZGVPckVsZW1lbnQpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1zZztcbiAgfVxuXG4gIC8vIEdldCBsYW5ndWFnZSBjb2RlLlxuICBsZXQgbGFuZ3VhZ2VDb2RlID1cbiAgICB0eXBlb2YgbGFuZ3VhZ2VDb2RlT3JFbGVtZW50ID09PSAnc3RyaW5nJ1xuICAgICAgPyBsYW5ndWFnZUNvZGVPckVsZW1lbnRcbiAgICAgIDogZ2V0TGFuZ3VhZ2VDb2RlRnJvbUVsZW1lbnQobGFuZ3VhZ2VDb2RlT3JFbGVtZW50KTtcblxuICAvLyBOb3JtYWxpemUgbGFuZ3VhZ2UgY29kZS5cbiAgbGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlLnRvTG93ZXJDYXNlKCk7XG4gIGxhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZS5yZXBsYWNlKC9fL2csICctJyk7XG5cbiAgLy8gU2VhcmNoIGZvciBhIG1lc3NhZ2UgbWF0Y2hpbmcgdGhlIGxhbmd1YWdlIGNvZGUuXG4gIC8vIElmIGEgbWVzc2FnZSBjYW4ndCBiZSBmb3VuZCwgdHJ5IGFnYWluIHdpdGggYSBsZXNzIHNwZWNpZmljIGxhbmd1YWdlIGNvZGUuXG4gIGNvbnN0IGxhbmd1YWdlQ29kZVNlZ21lbnRzID0gbGFuZ3VhZ2VDb2RlLnNwbGl0KCctJyk7XG4gIHdoaWxlIChsYW5ndWFnZUNvZGVTZWdtZW50cy5sZW5ndGgpIHtcbiAgICBjb25zdCBrZXkgPSBsYW5ndWFnZUNvZGVTZWdtZW50cy5qb2luKCctJyk7XG4gICAgaWYgKGtleSBpbiBtYXApIHtcbiAgICAgIHJldHVybiBtYXBba2V5XTtcbiAgICB9XG5cbiAgICAvLyBTaW1wbGlmeSBsYW5ndWFnZSBjb2RlLlxuICAgIC8vIEV4OiBcImVuLVVTLVNGXCIgPT4gXCJlbi1VU1wiXG4gICAgbGFuZ3VhZ2VDb2RlU2VnbWVudHMucG9wKCk7XG4gIH1cblxuICAvLyBUaGVyZSB3YXMgYW4gYXR0ZW1wdC5cbiAgcmV0dXJuIGRlZmF1bHRNc2c7XG59XG5cbi8qKlxuICogR2V0cyBhIGxhbmd1YWdlIGNvZGUgKGV4OiBcImVuLVVTXCIpIGZyb20gYSBnaXZlbiBFbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFuZ3VhZ2VDb2RlRnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5sYW5nKSB7XG4gICAgLy8gR2V0IGxhbmd1YWdlIGZyb20gZWxlbWVudCBpdHNlbGYuXG4gICAgcmV0dXJuIGVsZW1lbnQubGFuZztcbiAgfVxuXG4gIGlmIChlbGVtZW50Lm93bmVyRG9jdW1lbnQgJiYgZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nKSB7XG4gICAgLy8gR2V0IGxhbmd1YWdlIGZyb20gZWxlbWVudCdzIGRvY3VtZW50LlxuICAgIHJldHVybiBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lmxhbmc7XG4gIH1cblxuICAvLyBUaGVyZSB3YXMgYW4gYXR0ZW1wdC5cbiAgcmV0dXJuIERFRkFVTFRfTEFOR1VBR0VfQ09ERTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFRoaXMgbW9kdWxlIGRlY2xhcmVzIEpTT04gdHlwZXMgYXMgZGVmaW5lZCBpbiB0aGVcbiAqIHtAbGluayBodHRwOi8vanNvbi5vcmcvfS5cbiAqL1xuXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBKU09OLnBhcnNlIHRoYXQgY2FzdHMgdGhlIHJldHVybiB2YWx1ZVxuICogdG8gSnNvbk9iamVjdC5cbiAqIENyZWF0ZSBhIG5ldyB3cmFwcGVyIGlmIGFuIGFycmF5IHJldHVybiB2YWx1ZSBpcyBkZXNpcmVkLlxuICogQHBhcmFtIHsqfSBqc29uIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHx1bmRlZmluZWR9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uKGpzb24pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7P0pzb25PYmplY3R9ICovIChKU09OLnBhcnNlKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoanNvbikpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBqc29uYCBzdHJpbmcgd2l0aG91dCB0aHJvd2luZyBhbiBleGNlcHRpb24gaWYgbm90IHZhbGlkLlxuICogUmV0dXJucyBgdW5kZWZpbmVkYCBpZiBwYXJzaW5nIGZhaWxzLlxuICogUmV0dXJucyB0aGUgYE9iamVjdGAgY29ycmVzcG9uZGluZyB0byB0aGUgSlNPTiBzdHJpbmcgd2hlbiBwYXJzaW5nIHN1Y2NlZWRzLlxuICogQHBhcmFtIHsqfSBqc29uIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFcnJvcik9fSBvbkZhaWxlZCBPcHRpb25hbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkXG4gKiAgICAgd2l0aCB0aGUgZXJyb3IgaWYgcGFyc2luZyBmYWlscy5cbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHVuZGVmaW5lZH0gTWF5IGJlIGV4dGVuZCB0byBwYXJzZSBhcnJheXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlQYXJzZUpzb24oanNvbiwgb25GYWlsZWQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VKc29uKGpzb24pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKG9uRmFpbGVkKSB7XG4gICAgICBvbkZhaWxlZChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwYXNzZWQgc3RyaW5nIGludG8gYSBKU09OIG9iamVjdCAoaWYgcG9zc2libGUpIGFuZCByZXR1cm5zIHRoZVxuICogdmFsdWUgb2YgdGhlIHByb3BlcnR5TmFtZSBvbiB0aGF0IG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBqc29uU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlOYW1lXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvcGVydHlGcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBwcm9wZXJ0eU5hbWUpIHtcbiAgY29uc3QganNvbiA9IHRyeVBhcnNlSnNvbihqc29uU3RyaW5nKTtcbiAgcmV0dXJuIChqc29uICYmIGpzb25bcHJvcGVydHlOYW1lXSkgfHwgbnVsbDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtiYXNlNjRVcmxEZWNvZGVUb0J5dGVzLCB1dGY4RGVjb2RlU3luY30gZnJvbSAnLi9ieXRlcyc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi9qc29uJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBoZWFkZXI6ICg/SnNvbk9iamVjdHx1bmRlZmluZWQpLFxuICogICBwYXlsb2FkOiAoP0pzb25PYmplY3R8dW5kZWZpbmVkKSxcbiAqICAgdmVyaWZpYWJsZTogc3RyaW5nLFxuICogICBzaWc6IHN0cmluZyxcbiAqIH19XG4gKi9cbmxldCBKd3RUb2tlbkludGVybmFsRGVmO1xuXG4vKipcbiAqIFByb3ZpZGVzIGhlbHBlciBtZXRob2RzIHRvIGRlY29kZSBhbmQgdmVyaWZ5IEpXVCB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBKd3RIZWxwZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgLyoqXG4gICAqIERlY29kZXMgSldUIHRva2VuIGFuZCByZXR1cm5zIGl0cyBwYXlsb2FkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RlZFRva2VuXG4gICAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHVuZGVmaW5lZH1cbiAgICovXG4gIGRlY29kZShlbmNvZGVkVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5kZWNvZGVJbnRlcm5hbF8oZW5jb2RlZFRva2VuKS5wYXlsb2FkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGVkVG9rZW5cbiAgICogQHJldHVybiB7IUp3dFRva2VuSW50ZXJuYWxEZWZ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWNvZGVJbnRlcm5hbF8oZW5jb2RlZFRva2VuKSB7XG4gICAgLy8gU2VlIGh0dHBzOi8vand0LmlvL2ludHJvZHVjdGlvbi9cbiAgICAvKipcbiAgICAgKiBUaHJvd3MgZXJyb3IgYWJvdXQgaW52YWxpZCB0b2tlbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZhbGlkVG9rZW4oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdG9rZW46IFwiJHtlbmNvZGVkVG9rZW59XCJgKTtcbiAgICB9XG5cbiAgICAvLyBFbmNvZGVkIHRva2VuIGhhcyB0aHJlZSBwYXJ0czogaGVhZGVyLnBheWxvYWQuc2lnXG4gICAgLy8gTm90ZSEgVGhlIHBhZGRpbmcgaXMgbm90IGFsbG93ZWQgYnkgSldUIHNwZWM6XG4gICAgLy8gaHR0cDovL3NlbGYtaXNzdWVkLmluZm8vZG9jcy9kcmFmdC1nb2xhbmQtanNvbi13ZWItdG9rZW4tMDAuaHRtbCNyZmMuc2VjdGlvbi41XG4gICAgY29uc3QgcGFydHMgPSBlbmNvZGVkVG9rZW4uc3BsaXQoJy4nKTtcbiAgICBpZiAocGFydHMubGVuZ3RoICE9IDMpIHtcbiAgICAgIGludmFsaWRUb2tlbigpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXJVdGY4Qnl0ZXMgPSBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKHBhcnRzWzBdKTtcbiAgICBjb25zdCBwYXlsb2FkVXRmOEJ5dGVzID0gYmFzZTY0VXJsRGVjb2RlVG9CeXRlcyhwYXJ0c1sxXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcjogdHJ5UGFyc2VKc29uKHV0ZjhEZWNvZGVTeW5jKGhlYWRlclV0ZjhCeXRlcyksIGludmFsaWRUb2tlbiksXG4gICAgICBwYXlsb2FkOiB0cnlQYXJzZUpzb24odXRmOERlY29kZVN5bmMocGF5bG9hZFV0ZjhCeXRlcyksIGludmFsaWRUb2tlbiksXG4gICAgICB2ZXJpZmlhYmxlOiBgJHtwYXJ0c1swXX0uJHtwYXJ0c1sxXX1gLFxuICAgICAgc2lnOiBwYXJ0c1syXSxcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogRGVidWcgbG9nZ2VyLCBvbmx5IGxvZyBtZXNzYWdlIGlmICNzd2cubG9nPTFcbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3MgW2RlY3JpcHRpb25dXG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnTG9nKHZhcl9hcmdzKSB7XG4gIGlmICgvc3dnLmRlYnVnPTEvLnRlc3Qoc2VsZi5sb2NhdGlvbi5oYXNoKSkge1xuICAgIGNvbnN0IGxvZ0FyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgIGxvZ0FyZ3MudW5zaGlmdCgnW1N1YnNjcmlwdGlvbnNdJyk7XG4gICAgbG9nLmFwcGx5KGxvZywgbG9nQXJncyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0gIHsuLi4qfSB2YXJfYXJncyBbZGVzY3JpcHRpb25dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2codmFyX2FyZ3MpIHtcbiAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gIHsuLi4qfSB2YXJfYXJncyBbZGVzY3JpcHRpb25dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXJuKHZhcl9hcmdzKSB7XG4gIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xufVxuXG4vKipcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgdHJ1ZWlzaC5cbiAqXG4gKiBTdXBwb3J0cyBhcmd1bWVudCBzdWJzdGl0dXRpb24gaW50byB0aGUgbWVzc2FnZSB2aWEgJXMgcGxhY2Vob2xkZXJzLlxuICpcbiAqIFRocm93cyBhbiBlcnJvciBvYmplY3QgdGhhdCBoYXMgdHdvIGV4dHJhIHByb3BlcnRpZXM6XG4gKiAtIGFzc29jaWF0ZWRFbGVtZW50OiBUaGlzIGlzIHRoZSBmaXJzdCBlbGVtZW50IHByb3ZpZGVkIGluIHRoZSB2YXIgYXJncy5cbiAqICAgSXQgY2FuIGJlIHVzZWQgZm9yIGltcHJvdmVkIGRpc3BsYXkgb2YgZXJyb3IgbWVzc2FnZXMuXG4gKiAtIG1lc3NhZ2VBcnJheTogVGhlIGVsZW1lbnRzIG9mIHRoZSBzdWJzdGl0dXRlZCBtZXNzYWdlIGFzIG5vbi1zdHJpbmdpZmllZFxuICogICBlbGVtZW50cyBpbiBhbiBhcnJheS4gV2hlbiBlLmcuIHBhc3NlZCB0byBjb25zb2xlLmVycm9yIHRoaXMgeWllbGRzXG4gKiAgIG5hdGl2ZSBkaXNwbGF5cyBvZiB0aGluZ3MgbGlrZSBIVE1MIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7VH0gc2hvdWxkQmVUcnVlaXNoIFRoZSB2YWx1ZSB0byBhc3NlcnQuIFRoZSBhc3NlcnQgZmFpbHMgaWYgaXQgZG9lc1xuICogICAgIG5vdCBldmFsdWF0ZSB0byB0cnVlLlxuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJncyBBcmd1bWVudHMgc3Vic3RpdHV0ZWQgaW50byAlcyBpbiB0aGUgbWVzc2FnZS5cbiAqIEByZXR1cm4ge1R9IFRoZSB2YWx1ZSBvZiBzaG91bGRCZVRydWVpc2guXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KHNob3VsZEJlVHJ1ZWlzaCwgbWVzc2FnZSwgdmFyX2FyZ3MpIHtcbiAgbGV0IGZpcnN0RWxlbWVudDtcbiAgaWYgKCFzaG91bGRCZVRydWVpc2gpIHtcbiAgICBtZXNzYWdlID0gbWVzc2FnZSB8fCAnQXNzZXJ0aW9uIGZhaWxlZCc7XG4gICAgY29uc3Qgc3BsaXRNZXNzYWdlID0gbWVzc2FnZS5zcGxpdCgnJXMnKTtcbiAgICBjb25zdCBmaXJzdCA9IHNwbGl0TWVzc2FnZS5zaGlmdCgpO1xuICAgIGxldCBmb3JtYXR0ZWQgPSBmaXJzdDtcbiAgICBjb25zdCBtZXNzYWdlQXJyYXkgPSBbXTtcbiAgICBwdXNoSWZOb25FbXB0eShtZXNzYWdlQXJyYXksIGZpcnN0KTtcbiAgICBmb3IgKGxldCBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdmFsID0gYXJndW1lbnRzW2ldO1xuICAgICAgaWYgKHZhbCAmJiB2YWwudGFnTmFtZSkge1xuICAgICAgICBmaXJzdEVsZW1lbnQgPSB2YWw7XG4gICAgICB9XG4gICAgICBjb25zdCBuZXh0Q29uc3RhbnQgPSBzcGxpdE1lc3NhZ2Uuc2hpZnQoKTtcbiAgICAgIG1lc3NhZ2VBcnJheS5wdXNoKHZhbCk7XG4gICAgICBwdXNoSWZOb25FbXB0eShtZXNzYWdlQXJyYXksIG5leHRDb25zdGFudC50cmltKCkpO1xuICAgICAgZm9ybWF0dGVkICs9IHRvU3RyaW5nKHZhbCkgKyBuZXh0Q29uc3RhbnQ7XG4gICAgfVxuICAgIGNvbnN0IGUgPSBuZXcgRXJyb3IoZm9ybWF0dGVkKTtcbiAgICBlLmZyb21Bc3NlcnQgPSB0cnVlO1xuICAgIGUuYXNzb2NpYXRlZEVsZW1lbnQgPSBmaXJzdEVsZW1lbnQ7XG4gICAgZS5tZXNzYWdlQXJyYXkgPSBtZXNzYWdlQXJyYXk7XG4gICAgdGhyb3cgZTtcbiAgfVxuICByZXR1cm4gc2hvdWxkQmVUcnVlaXNoO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUFycmF5fSBhcnJheVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuZnVuY3Rpb24gcHVzaElmTm9uRW1wdHkoYXJyYXksIHZhbCkge1xuICBpZiAodmFsICE9ICcnKSB7XG4gICAgYXJyYXkucHVzaCh2YWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbCkge1xuICAvLyBEbyBjaGVjayBlcXVpdmFsZW50IHRvIGB2YWwgaW5zdGFuY2VvZiBFbGVtZW50YCB3aXRob3V0IGNyb3NzLXdpbmRvdyBidWdcbiAgaWYgKHZhbCAmJiB2YWwubm9kZVR5cGUgPT0gMSkge1xuICAgIHJldHVybiB2YWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgKHZhbC5pZCA/ICcjJyArIHZhbC5pZCA6ICcnKTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh2YWwpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBtYXAtbGlrZSBvYmplY3QuXG4gKiBJZiBpbml0aWFsIGlzIHByb3ZpZGVkLCBjb3BpZXMgaXRzIG93biBwcm9wZXJ0aWVzIGludG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gaW5pdGlhbCBUaGlzIHNob3VsZCB0eXBpY2FsbHkgYmUgYW4gb2JqZWN0IGxpdGVyYWwuXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChpbml0aWFsKSB7XG4gIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGlmIChpbml0aWFsKSB7XG4gICAgT2JqZWN0LmFzc2lnbihvYmosIGluaXRpYWwpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBgQXJyYXkuZmluZCgpYCBtZXRob2QgdGhhdCdzIG5vdCB5ZXQgYXZhaWxhYmxlIGluIGFsbCBicm93c2Vycy5cbiAqXG4gKiBAcGFyYW0gez9BcnJheTxUPn0gYXJyYXlcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCAhQXJyYXk8VD4pOmJvb2xlYW59IHByZWRpY2F0ZVxuICogQHJldHVybiB7P1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEluQXJyYXkoYXJyYXksIHByZWRpY2F0ZSkge1xuICBpZiAoIWFycmF5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgbGVuID0gYXJyYXkubGVuZ3RoIHx8IDA7XG4gIGlmIChsZW4gPiAwKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3Qgb3RoZXIgPSBhcnJheVtpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob3RoZXIsIGksIGFycmF5KSkge1xuICAgICAgICByZXR1cm4gb3RoZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2NyZWF0ZUVsZW1lbnR9IGZyb20gJy4vZG9tJztcblxuZXhwb3J0IGNsYXNzIFByZWNvbm5lY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqL1xuICBwcmVjb25uZWN0KHVybCkge1xuICAgIHRoaXMucHJlXyh1cmwsICdwcmVjb25uZWN0Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgZG5zUHJlZmV0Y2godXJsKSB7XG4gICAgdGhpcy5wcmVfKHVybCwgJ2Rucy1wcmVmZXRjaCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICovXG4gIHByZWZldGNoKHVybCkge1xuICAgIHRoaXMucHJlXyh1cmwsICdwcmVjb25uZWN0IHByZWZldGNoJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXNcbiAgICovXG4gIHByZWxvYWQodXJsLCBhcykge1xuICAgIHRoaXMucHJlXyh1cmwsICdwcmVjb25uZWN0IHByZWxvYWQnLCBhcyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IGFzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcmVfKHVybCwgcmVsLCBhcykge1xuICAgIC8vIDxsaW5rIHJlbD1cInByZWZldGNoXCIgaHJlZj1cIi4uLlwiIGFzPVwiXCI+XG4gICAgY29uc3QgbGlua0VsID0gY3JlYXRlRWxlbWVudCh0aGlzLmRvY18sICdsaW5rJywge1xuICAgICAgJ3JlbCc6IHJlbCxcbiAgICAgICdocmVmJzogdXJsLFxuICAgIH0pO1xuICAgIGlmIChhcykge1xuICAgICAgbGlua0VsLnNldEF0dHJpYnV0ZSgnYXMnLCBhcyk7XG4gICAgfVxuICAgIHRoaXMuZG9jXy5oZWFkLmFwcGVuZENoaWxkKGxpbmtFbCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTkgVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHJhbmRvbSB2YWx1ZXMuICBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheSBpcyBudW1JbnRzLiAgRWFjaFxuICogaW50IHdpbGwgYmUgPj0gMCBhbmQgPCBtYXhWYWwuXG4gKiBAcGFyYW0geyFudW1iZXJ9IG51bUludHNcbiAqIEBwYXJhbSB7IW51bWJlcn0gbWF4VmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21JbnRzKG51bUludHMsIG1heFZhbCkge1xuICAvLyBFbnN1cmUgYXJyYXkgdHlwZSBpcyBhcHByb3ByaWF0ZSBmb3IgdGhlIG1heCB2YWx1ZSAocGVyZm9ybWFuY2UpXG4gIGNvbnN0IGFyciA9XG4gICAgbWF4VmFsIDwgMjU2XG4gICAgICA/IG5ldyBVaW50OEFycmF5KG51bUludHMpXG4gICAgICA6IG1heFZhbCA8IDMyNzY4XG4gICAgICA/IG5ldyBVaW50MTZBcnJheShudW1JbnRzKVxuICAgICAgOiBuZXcgVWludDMyQXJyYXkobnVtSW50cyk7XG5cbiAgY29uc3QgaXNJRSA9ICEhc2VsZlsnbXNDcnlwdG8nXTtcbiAgY29uc3QgbG9jYWxDcnlwdG8gPSBpc0lFID8gc2VsZlsnbXNDcnlwdG8nXSA6IHNlbGYuY3J5cHRvO1xuICBpZiAobG9jYWxDcnlwdG8gJiYgbG9jYWxDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgbG9jYWxDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycik7XG4gICAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgICAgYXJyW2ldID0gYXJyW2ldICUgbWF4VmFsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICBmb3IgKGxldCBpID0gYXJyLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgICBhcnJbaV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXhWYWwpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhcnI7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0UmFuZG9tSW50c30gZnJvbSAnLi9yYW5kb20nO1xuaW1wb3J0IHt1dGY4RW5jb2RlU3luY30gZnJvbSAnLi9ieXRlcyc7XG5cbmNvbnN0IENIQVJTID0gJzAxMjM0NTY3ODlBQkNERUYnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBfbWF0Y2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9VcHBlckNhc2UoX21hdGNoLCBjaGFyYWN0ZXIpIHtcbiAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIHdpdGggZGFzaGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IERhc2hlcyByZW1vdmVkIGFuZCBjaGFyYWN0ZXIgYWZ0ZXIgdG8gdXBwZXIgY2FzZS5cbiAqIHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9DYW1lbENhc2UobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC8tKFthLXpdKS9nLCB0b1VwcGVyQ2FzZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWUgd2l0aCBkYXNoZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gRGFzaGVzIHJlcGxhY2VkIGJ5IHVuZGVybGluZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9VbmRlcmxpbmUobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKCctJywgJ18nKTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWZmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsIHN1ZmZpeCkge1xuICBjb25zdCBpbmRleCA9IHN0cmluZy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHJpbmcuaW5kZXhPZihzdWZmaXgsIGluZGV4KSA9PSBpbmRleDtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCBwcmVmaXgpIHtcbiAgaWYgKHByZWZpeC5sZW5ndGggPiBzdHJpbmcubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YocHJlZml4LCAwKSA9PSAwO1xufVxuXG4vKipcbiAqIEV4cGFuZHMgcGxhY2Vob2xkZXJzIGluIGEgZ2l2ZW4gdGVtcGxhdGUgc3RyaW5nIHdpdGggdmFsdWVzLlxuICpcbiAqIFBsYWNlaG9sZGVycyB1c2UgJHtrZXktbmFtZX0gc3ludGF4IGFuZCBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAqIHJldHVybmVkIGZyb20gdGhlIGdpdmVuIGdldHRlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGhlIHRlbXBsYXRlIHN0cmluZyB0byBleHBhbmQuXG4gKiBAcGFyYW0geyFmdW5jdGlvbihzdHJpbmcpOip9IGdldHRlciBGdW5jdGlvbiB1c2VkIHRvIHJldHJpZXZlIGEgdmFsdWUgZm9yIGFcbiAqICAgcGxhY2Vob2xkZXIuIFJldHVybnMgdmFsdWVzIHdpbGwgYmUgY29lcmNlZCBpbnRvIHN0cmluZ3MuXG4gKiBAcGFyYW0ge251bWJlcj19IG1heEl0ZXJhdGlvbnMgTnVtYmVyIG9mIHRpbWVzIHRvIGV4cGFuZCB0aGUgdGVtcGxhdGUuXG4gKiAgIERlZmF1bHRzIHRvIDEsIGJ1dCBzaG91bGQgYmUgc2V0IHRvIGEgbGFyZ2VyIHZhbHVlIHlvdXIgcGxhY2Vob2xkZXIgdG9rZW5zXG4gKiAgIGNhbiBiZSBleHBhbmRlZCB0byBvdGhlciBwbGFjZWhvbGRlciB0b2tlbnMuIFRha2UgY2F1dGlvbiB3aXRoIGxhcmdlIHZhbHVlc1xuICogICBhcyByZWN1cnNpdmVseSBleHBhbmRpbmcgYSBzdHJpbmcgY2FuIGJlIGV4cG9uZW50aWFsbHkgZXhwZW5zaXZlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVGVtcGxhdGUodGVtcGxhdGUsIGdldHRlciwgbWF4SXRlcmF0aW9ucyA9IDEpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhJdGVyYXRpb25zOyBpKyspIHtcbiAgICBsZXQgbWF0Y2hlcyA9IDA7XG4gICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXCR7KFtefV0qKX0vZywgKF9hLCBiKSA9PiB7XG4gICAgICBtYXRjaGVzKys7XG4gICAgICByZXR1cm4gZ2V0dGVyKGIpO1xuICAgIH0pO1xuICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuLyoqXG4gKiBIYXNoIGZ1bmN0aW9uIGRqYjJhXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIGEgc2ltcGxlLCBmYXN0IGhhc2hpbmcgZnVuY3Rpb24gdXNpbmcgbWluaW1hbCBjb2RlLlxuICogSXQgZG9lcyAqbm90KiBoYXZlIGdvb2QgY3J5cHRvZ3JhcGhpYyBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfSAzMi1iaXQgdW5zaWduZWQgaGFzaCBvZiB0aGUgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdIYXNoMzIoc3RyKSB7XG4gIGNvbnN0IGxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gIGxldCBoYXNoID0gNTM4MTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGhhc2ggPSAoaGFzaCAqIDMzKSBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIC8vIENvbnZlcnQgZnJvbSAzMi1iaXQgc2lnbmVkIHRvIHVuc2lnbmVkLlxuICByZXR1cm4gU3RyaW5nKGhhc2ggPj4+IDApO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgdGhlIHBhc3NlZCB2YWx1ZSBpcyBzYWZlIHRvIHVzZSBmb3IgY2hhcmFjdGVyIDE5IHBlciByZmM0MTIyLFxuICogc2VjLiA0LjEuNS4gIFwiU2V0cyB0aGUgaGlnaCBiaXRzIG9mIGNsb2NrIHNlcXVlbmNlXCIuXG4gKiBAcGFyYW0geyFudW1iZXJ9IHZcbiAqL1xuZnVuY3Rpb24gZ2V0Q2hhcjE5KHYpIHtcbiAgcmV0dXJuIENIQVJTWyh2ICYgMHgzKSB8IDB4OF07XG59XG5cbi8qKlxuICogVGhlIHJldHVybmVkIGlkZW50aWZpZXIgd2lsbCBhbHdheXMgYmUgYW4gOCBkaWdpdCB2YWxpZCBoZXhpZGVjaW1hbCBudW1iZXJcbiAqIGFuZCB3aWxsIGJlIHVuaXF1ZSBmb3IgZWFjaCBNUyB3aXRoaW4gYSBnaXZlbiBtb250aC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0TW9udGhseVRpbWVJZGVudGlmaWVyKCkge1xuICBjb25zdCBoZXhUaW1lID0gRGF0ZS5ub3coKS50b1N0cmluZygxNik7XG4gIHJldHVybiBoZXhUaW1lLnN1YnN0cmluZyhoZXhUaW1lLmxlbmd0aCAtIDgpLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgUkZDIDQxMjIgVjQgVVVJRC4gRXg6IFwiOTIzMjlEMzktNkY1Qy00NTIwLUFCRkMtQUFCNjQ1NDRFMTcyXCJcbiAqIFRoZSBmaXJzdCA4IGRpZ2l0cyBhcmUgdW5pcXVlIGZvciB0aGUgbWlsbGlzZWNvbmQgb2YgdGhlIG1vbnRoLiAgVGhlIHJlc3RcbiAqIGFyZSByYW5kb21seSBnZW5lcmF0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVdWlkKCkge1xuICBsZXQgdXVpZCA9IGdldE1vbnRobHlUaW1lSWRlbnRpZmllcigpICsgJy0nO1xuICBsZXQgckluZGV4ID0gMDtcbiAgY29uc3QgcmFuZHMgPSBnZXRSYW5kb21JbnRzKDIzLCAxNik7XG4gIGZvciAobGV0IGkgPSA5OyBpIDwgMzY7IGkrKykge1xuICAgIHN3aXRjaCAoaSkge1xuICAgICAgY2FzZSAxMzpcbiAgICAgIGNhc2UgMTg6XG4gICAgICBjYXNlIDIzOlxuICAgICAgICB1dWlkICs9ICctJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE0OlxuICAgICAgICB1dWlkICs9ICc0JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE5OlxuICAgICAgICB1dWlkICs9IGdldENoYXIxOShyYW5kc1tySW5kZXgrK10pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHV1aWQgKz0gQ0hBUlNbcmFuZHNbckluZGV4KytdXTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3dnVHJhbnNhY3Rpb25JZCgpIHtcbiAgcmV0dXJuIGdldFV1aWQoKSArICcuc3dnJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHdob3NlIGxlbmd0aCBtYXRjaGVzIHRoZSBsZW5ndGggb2YgZm9ybWF0LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBwYWRTdHJpbmcoc3RyLCBmb3JtYXQpIHtcbiAgcmV0dXJuIChmb3JtYXQgKyBzdHIpLnNsaWNlKC1mb3JtYXQubGVuZ3RoKTtcbn1cblxuY29uc3QgUEFERElORyA9ICcwMDAwMDAwMCc7XG5mdW5jdGlvbiB0b0hleChidWZmZXIpIHtcbiAgY29uc3QgaGV4Q29kZXMgPSBbXTtcbiAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZpZXcuYnl0ZUxlbmd0aDsgaSArPSA0KSB7XG4gICAgLy8gdG9TdHJpbmcoMTYpIHdpbGwgZ2l2ZSB0aGUgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIgd2l0aG91dCBwYWRkaW5nXG4gICAgY29uc3Qgc3RyaW5nVmFsdWUgPSB2aWV3LmdldFVpbnQzMihpKS50b1N0cmluZygxNik7XG4gICAgaGV4Q29kZXMucHVzaChwYWRTdHJpbmcoc3RyaW5nVmFsdWUsIFBBRERJTkcpKTtcbiAgfVxuICByZXR1cm4gaGV4Q29kZXMuam9pbignJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGhleGFkZWNpbWFsIDEyOCBjaGFyYWN0ZXIgc3RyaW5nIHRoYXQgaXMgdGhlXG4gKiBTSEEtNTEyIGhhc2ggb2YgdGhlIHBhc3NlZCBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nVG9IYXNoXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaChzdHJpbmdUb0hhc2gpIHtcbiAgY29uc3QgY3J5cHRvID0gc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0bztcbiAgY29uc3Qgc3VidGxlID0gY3J5cHRvLnN1YnRsZTtcbiAgcmV0dXJuIHN1YnRsZVxuICAgIC5kaWdlc3QoJ1NIQS01MTInLCB1dGY4RW5jb2RlU3luYyhzdHJpbmdUb0hhc2gpKVxuICAgIC50aGVuKChkaWdlc3QpID0+IHRvSGV4KGRpZ2VzdCkpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBOb3RlOiBsb2FkZWQgYnkgM3Agc3lzdGVtLiBDYW5ub3QgcmVseSBvbiBiYWJlbCBwb2x5ZmlsbHMuXG5pbXBvcnQge21hcH0gZnJvbSAnLi9vYmplY3QuanMnO1xuaW1wb3J0IHtzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5cbi8qKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmxldCBwcm9wZXJ0eU5hbWVDYWNoZTtcblxuLyoqIEBjb25zdCB7IUFycmF5PHN0cmluZz59ICovXG5jb25zdCB2ZW5kb3JQcmVmaXhlcyA9IFsnV2Via2l0JywgJ3dlYmtpdCcsICdNb3onLCAnbW96JywgJ21zJywgJ08nLCAnbyddO1xuXG4vKipcbiAqIERlZmF1bHQgc3R5bGVzIHRvIGJlIHNldCBmb3IgdG9wIGxldmVsIGZyaWVuZGx5IGlmcmFtZS5cbiAqIFNvbWUgYXR0cmlidXRlcyBhcmUgbm90IGluY2x1ZGVkIHN1Y2ggYXMgaGVpZ2h0LCBsZWZ0LCBtYXJnaW4tbGVmdDsgc2luY2VcbiAqIHRoZXNlIGF0dHJpYnV0ZXMgYXJlIHVwZGF0ZWQgYnkgQG1lZGlhIHF1ZXJpZXMgYW5kIGhhdmluZyB0aGVzZSB2YWx1ZXNcbiAqIGRlZmluZWQgaGVyZSBhcyAhaW1wb3J0YW50IGRvZXMgbm90IHdvcmsgb24gSUUvZWRnZSBicm93c2Vycy5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+fVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHtcbiAgJ2FsaWduLWNvbnRlbnQnOiAnbm9ybWFsJyxcbiAgJ2FuaW1hdGlvbic6ICdub25lJyxcbiAgJ2FsaWduLWl0ZW1zJzogJ25vcm1hbCcsXG4gICdhbGlnbi1zZWxmJzogJ2F1dG8nLFxuICAnYWxpZ25tZW50LWJhc2VsaW5lJzogJ2F1dG8nLFxuICAnYmFja2ZhY2UtdmlzaWJpbGl0eSc6ICdoaWRkZW4nLFxuICAnYmFja2dyb3VuZC1jbGlwJzogJ2JvcmRlci1ib3gnLFxuICAnYmFja2dyb3VuZC1pbWFnZSc6ICdub25lJyxcbiAgJ2Jhc2VsaW5lLXNoaWZ0JzogJzAnLFxuICAnYmxvY2stc2l6ZSc6ICdhdXRvJyxcbiAgJ2JvcmRlcic6ICdub25lJyxcbiAgJ2JvcmRlci1jb2xsYXBzZSc6ICdzZXBhcmF0ZScsXG4gICdib3R0b20nOiAnMCcsXG4gICdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLFxuICAnYnJlYWstYWZ0ZXInOiAnYXV0bycsXG4gICdicmVhay1iZWZvcmUnOiAnYXV0bycsXG4gICdicmVhay1pbnNpZGUnOiAnYXV0bycsXG4gICdidWZmZXJlZC1yZW5kZXJpbmcnOiAnYXV0bycsXG4gICdjYXB0aW9uLXNpZGUnOiAndG9wJyxcbiAgJ2NhcmV0LWNvbG9yJzogJ3JnYig1MSwgNTEsIDUxKScsXG4gICdjbGVhcic6ICdub25lJyxcbiAgJ2NvbG9yJzogJ3JnYig1MSwgNTEsIDUxKScsXG4gICdjb2xvci1yZW5kZXJpbmcnOiAnYXV0bycsXG4gICdjb2x1bW4tY291bnQnOiAnYXV0bycsXG4gICdjb2x1bW4tZmlsbCc6ICdiYWxhbmNlJyxcbiAgJ2NvbHVtbi1nYXAnOiAnbm9ybWFsJyxcbiAgJ2NvbHVtbi1ydWxlLWNvbG9yJzogJ3JnYig1MSwgNTEsIDUxKScsXG4gICdjb2x1bW4tcnVsZS1zdHlsZSc6ICdub25lJyxcbiAgJ2NvbHVtbi1ydWxlLXdpZHRoJzogJzAnLFxuICAnY29sdW1uLXNwYW4nOiAnbm9uZScsXG4gICdjb2x1bW4td2lkdGgnOiAnYXV0bycsXG4gICdjb250YWluJzogJ25vbmUnLFxuICAnY291bnRlci1pbmNyZW1lbnQnOiAnbm9uZScsXG4gICdjb3VudGVyLXJlc2V0JzogJ25vbmUnLFxuICAnY3Vyc29yJzogJ2F1dG8nLFxuICAnZGlyZWN0aW9uJzogJ2luaGVyaXQnLFxuICAnZGlzcGxheSc6ICdibG9jaycsXG4gICdlbXB0eS1jZWxscyc6ICdzaG93JyxcbiAgJ2ZpbHRlcic6ICdub25lJyxcbiAgJ2ZsZXgnOiAnbm9uZScsIC8vIGZsZXgtZ3JvdywgZmxleC1zaHJpbmssIGFuZCBmbGV4LWJhc2lzLlxuICAnZmxleC1mbG93JzogJ3JvdyBub3dyYXAnLCAvLyBmbGV4LWRpcmVjdGlvbiwgZmxleC13cmFwLlxuICAnZmxvYXQnOiAnbm9uZScsXG4gICdmbG9vZC1jb2xvcic6ICdyZ2IoMCwgMCwgMCknLFxuICAnZmxvb2Qtb3BhY2l0eSc6ICcxJyxcbiAgJ2ZvbnQnOiAnbm9uZScsXG4gICdmb250LXNpemUnOiAnbWVkaXVtJyxcbiAgJ2ZvbnQtZmFtaWx5JzogJycsXG4gICdoZWlnaHQnOiAnYXV0bycsXG4gICdoeXBoZW5zJzogJ21hbnVhbCcsXG4gICdpbWFnZS1yZW5kZXJpbmcnOiAnYXV0bycsXG4gICdpbmxpbmUtc2l6ZSc6ICcnLCAvLyBTZXR0aW5nIHRvICdhdXRvJyB3aWxsIG5vdCBhbGxvdyBvdmVycmlkZS5cbiAgJ2lzb2xhdGlvbic6ICdhdXRvJyxcbiAgJ2p1c3RpZnktY29udGVudCc6ICdub3JtYWwnLFxuICAnanVzdGlmeS1pdGVtcyc6ICdub3JtYWwnLFxuICAnanVzdGlmeS1zZWxmJzogJ2F1dG8nLFxuICAnbGV0dGVyLXNwYWNpbmcnOiAnbm9ybWFsJyxcbiAgJ2xpZ2h0aW5nLWNvbG9yJzogJ3JnYigyNTUsIDI1NSwgMjU1KScsXG4gICdsaW5lLWJyZWFrJzogJ2F1dG8nLFxuICAnbGluZS1oZWlnaHQnOiAnbm9ybWFsJyxcbiAgJ21hcmdpbi1ib3R0b20nOiAnMCcsXG4gICdtYXNrJzogJ25vbmUnLFxuICAnbWF4LWJsb2NrLXNpemUnOiAnbm9uZScsXG4gICdtYXgtaGVpZ2h0JzogJ25vbmUnLFxuICAnbWF4LWlubGluZS1zaXplJzogJ25vbmUnLFxuICAnbWF4LXdpZHRoJzogJ25vbmUnLFxuICAnbWluLWJsb2NrLXNpemUnOiAnbm9uZScsXG4gICdtaW4taGVpZ2h0JzogJzAnLFxuICAnbWluLWlubGluZS1zaXplJzogJzAnLFxuICAnbWluLXdpZHRoJzogJzAnLFxuICAnbWl4LWJsZW5kLW1vZGUnOiAnbm9ybWFsJyxcbiAgJ29iamVjdC1maXQnOiAnZmlsbCcsIC8vIEltcG9ydGFudCBmb3IgU2FmYXJpIGJyb3dzZXIuXG4gICdvZmZzZXQtZGlzdGFuY2UnOiAnbm9uZScsIC8vIENocm9tZSBvbmx5IChFeHBlcmltZW50YWwpLlxuICAnb2Zmc2V0LXBhdGgnOiAnbm9uZScsIC8vIENocm9tZSBvbmx5IChFeHBlcmltZW50YWwpLlxuICAnb2Zmc2V0LXJvdGF0ZSc6ICdhdXRvIDBkZWcnLCAvLyBDaHJvbWUgb25seSAoRXhwZXJpbWVudGFsKS5cbiAgJ29wYWNpdHknOiAnMScsXG4gICdvcmRlcic6ICcwJyxcbiAgJ29ycGhhbnMnOiAnMicsXG4gICdvdXRsaW5lJzogJ25vbmUnLFxuICAnb3ZlcmZsb3ctYW5jaG9yJzogJ2F1dG8nLFxuICAnb3ZlcmZsb3ctd3JhcCc6ICdub3JtYWwnLFxuICAnb3ZlcmZsb3cnOiAndmlzaWJsZScsXG4gICdwYWRkaW5nJzogJzAnLFxuICAncGFnZSc6ICcnLFxuICAncGVyc3BlY3RpdmUnOiAnbm9uZScsXG4gICdwb2ludGVyLWV2ZW50cyc6ICdhdXRvJyxcbiAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICdxdW90ZXMnOiAnJyxcbiAgJ3Jlc2l6ZSc6ICdub25lJyxcbiAgJ3JpZ2h0JzogJzAnLFxuICAnc2Nyb2xsLWJlaGF2aW9yJzogJ2F1dG8nLFxuICAndGFiLXNpemUnOiAnOCcsIC8vIE9ubHkgQ2hyb21lLCBTYWZhcmkgKEV4cGVyaW1lbnRhbCkuXG4gICd0YWJsZS1sYXlvdXQnOiAnYXV0bycsXG4gICd0ZXh0LWFsaWduJzogJ3N0YXJ0JyxcbiAgJ3RleHQtYWxpZ24tbGFzdCc6ICdhdXRvJyxcbiAgJ3RleHQtYW5jaG9yJzogJ3N0YXJ0JyxcbiAgJ3RleHQtY29tYmluZS11cHJpZ2h0JzogJ25vbmUnLFxuICAndGV4dC1kZWNvcmF0aW9uJzogJ25vbmUnLFxuICAndGV4dC1pbmRlbnQnOiAnMCcsXG4gICd0ZXh0LW9yaWVudGF0aW9uJzogJ21peGVkJyxcbiAgJ3RleHQtb3ZlcmZsb3cnOiAnY2xpcCcsXG4gICd0ZXh0LXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ3RleHQtc2hhZG93JzogJ25vbmUnLFxuICAndGV4dC1zaXplLWFkanVzdCc6ICdhdXRvJyxcbiAgJ3RleHQtdHJhbnNmb3JtJzogJ25vbmUnLFxuICAndGV4dC11bmRlcmxpbmUtcG9zaXRpb24nOiAnYXV0bycsXG4gICd0b3AnOiAnYXV0bycsXG4gICd0b3VjaC1hY3Rpb24nOiAnYXV0bycsXG4gICd0cmFuc2Zvcm0nOiAnbm9uZScsXG4gICd0cmFuc2l0aW9uJzogJ25vbmUgMHMgZWFzZSAwcycsXG4gICd1bmljb2RlLWJpZGknOiAnbm9ybWFsJyxcbiAgJ3VzZXItc2VsZWN0JzogJ2F1dG8nLFxuICAndmVjdG9yLWVmZmVjdCc6ICdub25lJyxcbiAgJ3ZlcnRpY2FsLWFsaWduJzogJ2Jhc2VsaW5lJyxcbiAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXG4gICd3aGl0ZS1zcGFjZSc6ICdub3JtYWwnLFxuICAnd2lkb3dzJzogJzInLFxuICAnd29yZC1icmVhayc6ICdub3JtYWwnLFxuICAnd29yZC1zcGFjaW5nJzogJzAnLFxuICAnd29yZC13cmFwJzogJ25vcm1hbCcsXG4gICd3cml0aW5nLW1vZGUnOiAnaG9yaXpvbnRhbC10YicsXG4gICd6b29tJzogJzEnLFxuICAnei1pbmRleCc6ICdhdXRvJyxcbn07XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBnb29nbGVGb250c1VybCA9XG4gICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9R29vZ2xlK1NhbnMnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYW1lbENhc2UgY2FtZWwgY2FzZWQgc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRpdGxlIGNhc2VkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKSB7XG4gIHJldHVybiBjYW1lbENhc2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbENhc2Uuc2xpY2UoMSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBzdHlsZSBpZiBhIHByZWZpeGVkIHZlcnNpb24gb2YgYSBwcm9wZXJ0eSBleGlzdHMgYW5kIHJldHVybnNcbiAqIGl0IG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3R5bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZUNhc2UgdGhlIHRpdGxlIGNhc2UgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eSBuYW1lIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lXyhzdHlsZSwgdGl0bGVDYXNlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSB2ZW5kb3JQcmVmaXhlc1tpXSArIHRpdGxlQ2FzZTtcbiAgICBpZiAoc3R5bGVbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zc2libHkgcHJlZml4ZWQgSmF2YVNjcmlwdCBwcm9wZXJ0eSBuYW1lIG9mIGEgc3R5bGUgcHJvcGVydHlcbiAqIChleC4gV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uKSBnaXZlbiBhIGNhbWVsQ2FzZSdkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5XG4gKiAoZXguIHRyYW5zaXRpb25EdXJhdGlvbikuXG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIG9mIGEgY3NzIHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGJ5cGFzc0NhY2hlIGJ5cGFzcyB0aGUgbWVtb2l6ZWQgY2FjaGUgb2YgcHJvcGVydHlcbiAqICAgbWFwcGluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoc3R5bGUsIGNhbWVsQ2FzZSwgYnlwYXNzQ2FjaGUpIHtcbiAgaWYgKHN0YXJ0c1dpdGgoY2FtZWxDYXNlLCAnLS0nKSkge1xuICAgIC8vIENTUyB2YXJzIGFyZSByZXR1cm5lZCBhcyBpcy5cbiAgICByZXR1cm4gY2FtZWxDYXNlO1xuICB9XG4gIGlmICghcHJvcGVydHlOYW1lQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWVDYWNoZSA9IG1hcCgpO1xuICB9XG4gIGxldCBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdO1xuICBpZiAoIXByb3BlcnR5TmFtZSB8fCBieXBhc3NDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZSA9IGNhbWVsQ2FzZTtcbiAgICBpZiAoc3R5bGVbY2FtZWxDYXNlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB0aXRsZUNhc2UgPSBjYW1lbENhc2VUb1RpdGxlQ2FzZShjYW1lbENhc2UpO1xuICAgICAgY29uc3QgcHJlZml4ZWRQcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSk7XG5cbiAgICAgIGlmIChzdHlsZVtwcmVmaXhlZFByb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9wZXJ0eU5hbWUgPSBwcmVmaXhlZFByb3BlcnR5TmFtZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFieXBhc3NDYWNoZSkge1xuICAgICAgcHJvcGVydHlOYW1lQ2FjaGVbY2FtZWxDYXNlXSA9IHByb3BlcnR5TmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoICFpbXBvcnRhbnQuIFRoZSBzdHlsZXNcbiAqIGFyZSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0SW1wb3J0YW50U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlcywgayksXG4gICAgICBzdHlsZXNba10udG9TdHJpbmcoKSxcbiAgICAgICdpbXBvcnRhbnQnXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCBvcHRpb25hbCB1bml0cywgZS5nLiBcInB4XCIuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHs/c3RyaW5nfG51bWJlcnxib29sZWFufSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmc9fSB1bml0c1xuICogQHBhcmFtIHtib29sZWFuPX0gYnlwYXNzQ2FjaGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5LCB2YWx1ZSwgdW5pdHMsIGJ5cGFzc0NhY2hlKSB7XG4gIGNvbnN0IHByb3BlcnR5TmFtZSA9IGdldFZlbmRvckpzUHJvcGVydHlOYW1lKFxuICAgIGVsZW1lbnQuc3R5bGUsXG4gICAgcHJvcGVydHksXG4gICAgYnlwYXNzQ2FjaGVcbiAgKTtcbiAgaWYgKHByb3BlcnR5TmFtZSkge1xuICAgIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodW5pdHNcbiAgICAgID8gdmFsdWUgKyB1bml0c1xuICAgICAgOiB2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHtib29sZWFuPX0gYnlwYXNzQ2FjaGVcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHlsZShlbGVtZW50LCBwcm9wZXJ0eSwgYnlwYXNzQ2FjaGUpIHtcbiAgY29uc3QgcHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoXG4gICAgZWxlbWVudC5zdHlsZSxcbiAgICBwcm9wZXJ0eSxcbiAgICBieXBhc3NDYWNoZVxuICApO1xuICBpZiAoIXByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gVGhlIHN0eWxlc1xuICogYSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgP3N0cmluZ3xudW1iZXJ8Ym9vbGVhbj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgc2V0U3R5bGUoZWxlbWVudCwgaywgc3R5bGVzW2tdKTtcbiAgfVxufVxuXG4vKipcbiAqIFNob3dzIG9yIGhpZGVzIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGRpc3BsYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZShlbGVtZW50LCBkaXNwbGF5KSB7XG4gIGlmIChkaXNwbGF5ID09PSB1bmRlZmluZWQpIHtcbiAgICBkaXNwbGF5ID0gZ2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknKSA9PSAnbm9uZSc7XG4gIH1cbiAgc2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknLCBkaXNwbGF5ID8gJycgOiAnbm9uZScpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwaXhlbCB2YWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHgodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICsgJ3B4Jztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJ0cmFuc2xhdGVYXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlWCh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7dmFsdWV9KWA7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7cHgodmFsdWUpfSlgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBcInRyYW5zbGF0ZVhcIiBmb3IgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHhcbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpPX0geVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHgsIHkpIHtcbiAgaWYgKHR5cGVvZiB4ID09ICdudW1iZXInKSB7XG4gICAgeCA9IHB4KHgpO1xuICB9XG4gIGlmICh5ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3h9KWA7XG4gIH1cbiAgaWYgKHR5cGVvZiB5ID09ICdudW1iZXInKSB7XG4gICAgeSA9IHB4KHkpO1xuICB9XG4gIHJldHVybiBgdHJhbnNsYXRlKCR7eH0sICR7eX0pYDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJzY2FsZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHZhbHVlKSB7XG4gIHJldHVybiBgc2NhbGUoJHt2YWx1ZX0pYDtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYWxwaGEgdmFsdWUgZnJvbSBhIHJnYmEgY29sb3IgdmFsdWUuXG4gKiBSZXR1cm4gdGhlIG5ldyBjb2xvciBwcm9wZXJ0eSB3aXRoIGFscGhhIGVxdWFscyBpZiBoYXMgdGhlIGFscGhhIHZhbHVlLlxuICogQ2FsbGVyIG5lZWRzIHRvIG1ha2Ugc3VyZSB0aGUgaW5wdXQgY29sb3IgdmFsdWUgaXMgYSB2YWxpZCByZ2JhL3JnYiB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IHJnYmFDb2xvclxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWxwaGFGcm9tQ29sb3IocmdiYUNvbG9yKSB7XG4gIHJldHVybiByZ2JhQ29sb3IucmVwbGFjZShcbiAgICAvXFwoKFteLF0rKSwoW14sXSspLChbXiwpXSspLFteKV0rXFwpL2csXG4gICAgJygkMSwkMiwkMywgMSknXG4gICk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGVsZW1lbnQuIFRoZSBoZWxwZXIgaXMgbmVjZXNzYXJ5IHRvIGVuZm9yY2VcbiAqIHRoZSBwb3NzaWJsZSBgbnVsbGAgdmFsdWUgcmV0dXJuZWQgYnkgYSBidWdneSBGaXJlZm94LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlZFN0eWxlKHdpbiwgZWwpIHtcbiAgY29uc3Qgc3R5bGUgPSAvKiogQHR5cGUgez9DU1NTdHlsZURlY2xhcmF0aW9ufSAqLyAod2luLmdldENvbXB1dGVkU3R5bGUoZWwpKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovIChzdHlsZSkgfHwgbWFwKCk7XG59XG5cbi8qKlxuICogUmVzZXRzIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGR5bmFtaWNhbGx5IChpLmUuIGlubGluZSlcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc3R5bGVPYmogPSB7fTtcbiAgcHJvcGVydGllcy5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgc3R5bGVPYmpbcHJvcF0gPSBudWxsO1xuICB9KTtcbiAgc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlT2JqKTtcbn1cblxuLyoqXG4gKiBSZXNldHMgYWxsIHRoZSBzdHlsZXMgb2YgYW4gZWxlbWVudCB0byBhIGdpdmVuIHZhbHVlLiBEZWZhdWx0cyB0byBudWxsLlxuICogVGhlIHZhbGlkIHZhbHVlcyBhcmUgJ2luaGVyaXQnLCAnaW5pdGlhbCcsICd1bnNldCcgb3IgbnVsbC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0QWxsU3R5bGVzKGVsZW1lbnQpIHtcbiAgc2V0SW1wb3J0YW50U3R5bGVzKGVsZW1lbnQsIGRlZmF1bHRTdHlsZXMpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdmFsdWUgaXMgYWN0dWFsbHkgYW4gT2JqZWN0LlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIGNvbnN0IHN0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIHJldHVybiBzdHIgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGBzYCBpcyBhIHZhbGlkIHZhbHVlIG9mIGBlbnVtT2JqYC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3Q8VD59IGVudW1PYmpcbiAqIEBwYXJhbSB7VH0gc1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VudW1WYWx1ZShlbnVtT2JqLCBzKSB7XG4gIGZvciAoY29uc3QgayBpbiBlbnVtT2JqKSB7XG4gICAgaWYgKGVudW1PYmpba10gPT09IHMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgZWl0aGVyIHRydWUgb3IgZmFsc2UuXG4gKiBAcGFyYW0gez8qfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge3dhcm59IGZyb20gJy4vbG9nJztcblxuLy8gTk9URTogVGhpcyByZWdleCB3YXMgY29waWVkIGZyb20gU3dHJ3MgQU1QIGV4dGVuc2lvbi4gaHR0cHM6Ly9naXRodWIuY29tL2FtcHByb2plY3QvYW1waHRtbC9ibG9iL2MyM2JmMjgxZjgxN2EyZWU1ZGY3M2Y2ZmQ0NWU5ZjRiNzFiYjY4YjYvZXh0ZW5zaW9ucy9hbXAtc3Vic2NyaXB0aW9ucy1nb29nbGUvMC4xL2FtcC1zdWJzY3JpcHRpb25zLWdvb2dsZS5qcyNMNTZcbmNvbnN0IEdPT0dMRV9ET01BSU5fUkUgPSAvKF58XFwuKWdvb2dsZVxcLihjb20/fFthLXpdezJ9fGNvbT9cXC5bYS16XXsyfXxjYXQpJC87XG5cbi8qKlxuICBAdHlwZWRlZiB7e1xuICAgIGhyZWY6IHN0cmluZyxcbiAgICBwcm90b2NvbDogc3RyaW5nLFxuICAgIGhvc3Q6IHN0cmluZyxcbiAgICBob3N0bmFtZTogc3RyaW5nLFxuICAgIHBvcnQ6IHN0cmluZyxcbiAgICBwYXRobmFtZTogc3RyaW5nLFxuICAgIHNlYXJjaDogc3RyaW5nLFxuICAgIGhhc2g6IHN0cmluZyxcbiAgICBvcmlnaW46IHN0cmluZyxcbiAgfX1cbiAgKi9cbmxldCBMb2NhdGlvbkRlZjtcblxuLyoqXG4gKiBDYWNoZWQgYS10YWcgdG8gYXZvaWQgbWVtb3J5IGFsbG9jYXRpb24gZHVyaW5nIFVSTCBwYXJzaW5nLlxuICogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fVxuICovXG5sZXQgYTtcblxuLyoqXG4gKiBXZSBjYWNoZWQgYWxsIHBhcnNlZCBVUkxzLiBBcyBvZiBub3cgdGhlcmUgYXJlIG5vIHVzZSBjYXNlc1xuICogb2YgQU1QIGRvY3MgdGhhdCB3b3VsZCBldmVyIHBhcnNlIGFuIGFjdHVhbCBsYXJnZSBudW1iZXIgb2YgVVJMcyxcbiAqIGJ1dCB3ZSBvZnRlbiBwYXJzZSB0aGUgc2FtZSBvbmUgb3ZlciBhbmQgb3ZlciBhZ2Fpbi5cbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAhTG9jYXRpb25EZWY+fVxuICovXG5sZXQgY2FjaGU7XG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgcGFzc2VkIHBhcmFtZXRlciBtYXAgaW50byBhIHF1ZXJ5IHN0cmluZyB3aXRoIGJvdGgga2V5c1xuICogYW5kIHZhbHVlcyBlbmNvZGVkLlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpIHtcbiAgY29uc3QgcyA9IFtdO1xuICBmb3IgKGNvbnN0IGsgaW4gcGFyYW1zKSB7XG4gICAgY29uc3QgdiA9IHBhcmFtc1trXTtcbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdiA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodltpXSk7XG4gICAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHYpO1xuICAgICAgcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQoc3YpfWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIENvbnNpZGVyIHRoZSByZXR1cm5lZCBvYmplY3QgaW1tdXRhYmxlLiBUaGlzIGlzIGVuZm9yY2VkIGR1cmluZ1xuICogdGVzdGluZyBieSBmcmVlemluZyB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7IUxvY2F0aW9uRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVcmwodXJsKSB7XG4gIGlmICghYSkge1xuICAgIGEgPSAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcbiAgICBjYWNoZSA9IHNlbGYuVXJsQ2FjaGUgfHwgKHNlbGYuVXJsQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgfVxuXG4gIGNvbnN0IGZyb21DYWNoZSA9IGNhY2hlW3VybF07XG4gIGlmIChmcm9tQ2FjaGUpIHtcbiAgICByZXR1cm4gZnJvbUNhY2hlO1xuICB9XG5cbiAgY29uc3QgaW5mbyA9IHBhcnNlVXJsV2l0aEEoYSwgdXJsKTtcblxuICByZXR1cm4gKGNhY2hlW3VybF0gPSBpbmZvKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQHBhcmFtIHshSFRNTEFuY2hvckVsZW1lbnR9IGFcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4geyFMb2NhdGlvbkRlZn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VVcmxXaXRoQShhLCB1cmwpIHtcbiAgYS5ocmVmID0gdXJsO1xuXG4gIC8vIElFMTEgZG9lc24ndCBwcm92aWRlIGZ1bGwgVVJMIGNvbXBvbmVudHMgd2hlbiBwYXJzaW5nIHJlbGF0aXZlIFVSTHMuXG4gIC8vIEFzc2lnbmluZyB0byBpdHNlbGYgYWdhaW4gZG9lcyB0aGUgdHJpY2suXG4gIGlmICghYS5wcm90b2NvbCkge1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgfVxuXG4gIC8qKiBAdHlwZSB7IUxvY2F0aW9uRGVmfSAqL1xuICBjb25zdCBpbmZvID0ge1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgaG9zdG5hbWU6IGEuaG9zdG5hbWUsXG4gICAgcG9ydDogYS5wb3J0ID09ICcwJyA/ICcnIDogYS5wb3J0LFxuICAgIHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogYS5zZWFyY2gsXG4gICAgaGFzaDogYS5oYXNoLFxuICAgIG9yaWdpbjogJycsIC8vIFNldCBiZWxvdy5cbiAgfTtcblxuICAvLyBTb21lIElFMTEgc3BlY2lmaWMgcG9seWZpbGxzLlxuICAvLyAxKSBJRTExIHN0cmlwcyBvdXQgdGhlIGxlYWRpbmcgJy8nIGluIHRoZSBwYXRobmFtZS5cbiAgaWYgKGluZm8ucGF0aG5hbWVbMF0gIT09ICcvJykge1xuICAgIGluZm8ucGF0aG5hbWUgPSAnLycgKyBpbmZvLnBhdGhuYW1lO1xuICB9XG5cbiAgLy8gMikgRm9yIFVSTHMgd2l0aCBpbXBsaWNpdCBwb3J0cywgSUUxMSBwYXJzZXMgdG8gZGVmYXVsdCBwb3J0cyB3aGlsZVxuICAvLyBvdGhlciBicm93c2VycyBsZWF2ZSB0aGUgcG9ydCBmaWVsZCBlbXB0eS5cbiAgaWYgKFxuICAgIChpbmZvLnByb3RvY29sID09ICdodHRwOicgJiYgaW5mby5wb3J0ID09IDgwKSB8fFxuICAgIChpbmZvLnByb3RvY29sID09ICdodHRwczonICYmIGluZm8ucG9ydCA9PSA0NDMpXG4gICkge1xuICAgIGluZm8ucG9ydCA9ICcnO1xuICAgIGluZm8uaG9zdCA9IGluZm8uaG9zdG5hbWU7XG4gIH1cblxuICAvLyBGb3IgZGF0YSBVUkkgYS5vcmlnaW4gaXMgZXF1YWwgdG8gdGhlIHN0cmluZyAnbnVsbCcgd2hpY2ggaXMgbm90IHVzZWZ1bC5cbiAgLy8gV2UgaW5zdGVhZCByZXR1cm4gdGhlIGFjdHVhbCBvcmlnaW4gd2hpY2ggaXMgdGhlIGZ1bGwgVVJMLlxuICBpZiAoYS5vcmlnaW4gJiYgYS5vcmlnaW4gIT0gJ251bGwnKSB7XG4gICAgaW5mby5vcmlnaW4gPSBhLm9yaWdpbjtcbiAgfSBlbHNlIGlmIChpbmZvLnByb3RvY29sID09ICdkYXRhOicgfHwgIWluZm8uaG9zdCkge1xuICAgIGluZm8ub3JpZ2luID0gaW5mby5ocmVmO1xuICB9IGVsc2Uge1xuICAgIGluZm8ub3JpZ2luID0gaW5mby5wcm90b2NvbCArICcvLycgKyBpbmZvLmhvc3Q7XG4gIH1cbiAgcmV0dXJuIGluZm87XG59XG5cbi8qKlxuICogUGFyc2VzIGFuZCBidWlsZHMgT2JqZWN0IG9mIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnkpIHtcbiAgaWYgKCFxdWVyeSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICByZXR1cm4gKC9eWz8jXS8udGVzdChxdWVyeSkgPyBxdWVyeS5zbGljZSgxKSA6IHF1ZXJ5KVxuICAgIC5zcGxpdCgnJicpXG4gICAgLnJlZHVjZSgocGFyYW1zLCBwYXJhbSkgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHBhcmFtLnNwbGl0KCc9Jyk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBrZXkgPSBkZWNvZGVVUklDb21wb25lbnQoaXRlbVswXSB8fCAnJyk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMV0gfHwgJycpO1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIHdhcm4oYFN3RyBjb3VsZCBub3QgcGFyc2UgYSBVUkwgcXVlcnkgcGFyYW06ICR7aXRlbVswXX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfSwge30pO1xufVxuXG4vKipcbiAqIEFkZHMgYSBwYXJhbWV0ZXIgdG8gYSBxdWVyeSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUXVlcnlQYXJhbSh1cmwsIHBhcmFtLCB2YWx1ZSkge1xuICBjb25zdCBxdWVyeUluZGV4ID0gdXJsLmluZGV4T2YoJz8nKTtcbiAgY29uc3QgZnJhZ21lbnRJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gIGxldCBmcmFnbWVudCA9ICcnO1xuICBpZiAoZnJhZ21lbnRJbmRleCAhPSAtMSkge1xuICAgIGZyYWdtZW50ID0gdXJsLnN1YnN0cmluZyhmcmFnbWVudEluZGV4KTtcbiAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIGZyYWdtZW50SW5kZXgpO1xuICB9XG4gIGlmIChxdWVyeUluZGV4ID09IC0xKSB7XG4gICAgdXJsICs9ICc/JztcbiAgfSBlbHNlIGlmIChxdWVyeUluZGV4IDwgdXJsLmxlbmd0aCAtIDEpIHtcbiAgICB1cmwgKz0gJyYnO1xuICB9XG4gIHVybCArPSBlbmNvZGVVUklDb21wb25lbnQocGFyYW0pICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgcmV0dXJuIHVybCArIGZyYWdtZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4uL3Byb3RvL2FwaV9tZXNzYWdlcy5NZXNzYWdlfSBtZXNzYWdlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVQcm90b01lc3NhZ2VGb3JVcmwobWVzc2FnZSkge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobWVzc2FnZS50b0FycmF5KGZhbHNlKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVXJsIGluY2x1ZGluZyB0aGUgcGF0aCBhbmQgc2VhcmNoLCB3aXRob3V0IGZyZWdtZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9zdFVybCh1cmwpIHtcbiAgY29uc3QgbG9jYXRpb25IcmVmID0gcGFyc2VVcmwodXJsKTtcbiAgcmV0dXJuIGxvY2F0aW9uSHJlZi5vcmlnaW4gKyBsb2NhdGlvbkhyZWYucGF0aG5hbWUgKyBsb2NhdGlvbkhyZWYuc2VhcmNoO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvY1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2Fub25pY2FsVXJsKGRvYykge1xuICBjb25zdCBub2RlID0gZG9jLmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvcihcImxpbmtbcmVsPSdjYW5vbmljYWwnXVwiKTtcbiAgcmV0dXJuIChub2RlICYmIG5vZGUuaHJlZikgfHwgJyc7XG59XG5cbmNvbnN0IFBBUlNFRF9VUkwgPSBwYXJzZVVybChzZWxmLndpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbmNvbnN0IFBBUlNFRF9SRUZFUlJFUiA9IHBhcnNlVXJsKHNlbGYuZG9jdW1lbnQucmVmZXJyZXIpO1xuXG4vKipcbiAqIFRydWUgZm9yIEdvb2dsZSBkb21haW5zXG4gKiBAcGFyYW0ge0xvY2F0aW9uRGVmPX0gcGFyc2VkVXJsIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IHBhZ2UncyBVUkxcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzR29vZ2xlRG9tYWluKHBhcnNlZFVybCkge1xuICBwYXJzZWRVcmwgPSBwYXJzZWRVcmwgfHwgUEFSU0VEX1VSTDtcbiAgcmV0dXJuIEdPT0dMRV9ET01BSU5fUkUudGVzdChwYXJzZWRVcmwuaG9zdG5hbWUpO1xufVxuXG4vKipcbiAqIFRydWUgZm9yIEhUVFBTIFVSTHNcbiAqIEBwYXJhbSB7TG9jYXRpb25EZWY9fSBwYXJzZWRVcmwgRGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgcGFnZSdzIFVSTFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2VjdXJlKHBhcnNlZFVybCkge1xuICBwYXJzZWRVcmwgPSBwYXJzZWRVcmwgfHwgUEFSU0VEX1VSTDtcbiAgcmV0dXJuIHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ2h0dHBzJyB8fCBwYXJzZWRVcmwucHJvdG9jb2wgPT09ICdodHRwczonO1xufVxuXG4vKipcbiAqIFRydWUgd2hlbiB0aGUgcGFnZSBpcyByZW5kZXJlZCB3aXRoaW4gYSBzZWN1cmUgR29vZ2xlIGFwcGxpY2F0aW9uIG9yXG4gKiB3YXMgbGlua2VkIHRvIGZyb20gYSBzZWN1cmUgR29vZ2xlIGRvbWFpbi5cbiAqIEBwYXJhbSB7TG9jYXRpb25EZWY9fSBwYXJzZWRSZWZlcnJlciBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBwYWdlJ3MgcmVmZXJyZXJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXNSZWZlcnJlZEJ5R29vZ2xlKHBhcnNlZFJlZmVycmVyKSB7XG4gIHBhcnNlZFJlZmVycmVyID0gcGFyc2VkUmVmZXJyZXIgfHwgUEFSU0VEX1JFRkVSUkVSO1xuICByZXR1cm4gaXNTZWN1cmUocGFyc2VkUmVmZXJyZXIpICYmIGlzR29vZ2xlRG9tYWluKHBhcnNlZFJlZmVycmVyKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7cGFyc2VKc29ufSBmcm9tICcuL2pzb24nO1xuaW1wb3J0IHtwYXJzZVVybH0gZnJvbSAnLi91cmwnO1xuaW1wb3J0IHt1dGY4RW5jb2RlU3luY30gZnJvbSAnLi9ieXRlcyc7XG5cbi8qKlxuICogVGhlIFwiaW5pdFwiIGFyZ3VtZW50IG9mIHRoZSBGZXRjaCBBUEkuIEN1cnJlbnRseSwgb25seSBcImNyZWRlbnRpYWxzOiBpbmNsdWRlXCJcbiAqIGlzIGltcGxlbWVudGVkLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2xvYmFsRmV0Y2gvZmV0Y2hcbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICBib2R5OiAoIUZvcm1EYXRhfHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBjcmVkZW50aWFsczogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBoZWFkZXJzOiAoIU9iamVjdHx1bmRlZmluZWQpLFxuICogICBtZXRob2Q6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgcmVzcG9uc2VUeXBlOiAoc3RyaW5nKVxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBGZXRjaEluaXREZWY7XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgYWxsb3dlZE1ldGhvZHNfID0gWydHRVQnLCAnUE9TVCddO1xuXG4vKiogQHByaXZhdGUgQGVudW0ge251bWJlcn0gQWxsb3dlZCBmZXRjaCByZXNwb25zZXMuICovXG5jb25zdCBhbGxvd2VkRmV0Y2hUeXBlc18gPSB7XG4gIGRvY3VtZW50OiAxLFxuICB0ZXh0OiAyLFxufTtcblxuLyoqXG4gKiBBIGNsYXNzIHRoYXQgcG9seWZpbGxzIEZldGNoIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIFhociB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbiA9IHdpbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBXZSB3YW50IHRvIGNhbGwgYGZldGNoX2AgdW5ib3VuZCBmcm9tIGFueSBjb250ZXh0IHNpbmNlIGl0IGNvdWxkXG4gICAqIGJlIGVpdGhlciB0aGUgbmF0aXZlIGZldGNoIG9yIG91ciBwb2x5ZmlsbC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0XG4gICAqIEBwYXJhbSB7IUZldGNoSW5pdERlZn0gaW5pdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRmV0Y2hSZXNwb25zZT58IVByb21pc2U8IVJlc3BvbnNlPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoXyhpbnB1dCwgaW5pdCkge1xuICAgIC8vIFRPRE8oYXZpbWVodGEpOiBTaG91bGQgdGhlIHJlcXVlc3RzIGdvIHRocm91Z2ggd2hlbiBwYWdlIGlzIG5vdCB2aXNpYmxlP1xuICAgIGFzc2VydCh0eXBlb2YgaW5wdXQgPT0gJ3N0cmluZycsICdPbmx5IFVSTCBzdXBwb3J0ZWQ6ICVzJywgaW5wdXQpO1xuICAgIC8vIEluIHBhcnRpY3VsYXIsIEZpcmVmb3ggZG9lcyBub3QgdG9sZXJhdGUgYG51bGxgIHZhbHVlcyBmb3JcbiAgICAvLyBgY3JlZGVudGlhbHNgLlxuICAgIGNvbnN0IGNyZWRzID0gaW5pdC5jcmVkZW50aWFscztcbiAgICBhc3NlcnQoXG4gICAgICBjcmVkcyA9PT0gdW5kZWZpbmVkIHx8IGNyZWRzID09ICdpbmNsdWRlJyB8fCBjcmVkcyA9PSAnb21pdCcsXG4gICAgICAnT25seSBjcmVkZW50aWFscz1pbmNsdWRlfG9taXQgc3VwcG9ydDogJXMnLFxuICAgICAgY3JlZHNcbiAgICApO1xuICAgIC8vIEZhbGxiYWNrIHRvIHhociBwb2x5ZmlsbCBzaW5jZSBgZmV0Y2hgIGFwaSBkb2VzIG5vdCBzdXBwb3J0XG4gICAgLy8gcmVzcG9uc2VUeXBlID0gJ2RvY3VtZW50Jy4gV2UgZG8gdGhpcyBzbyB3ZSBkb24ndCBoYXZlIHRvIGRvIGFueSBwYXJzaW5nXG4gICAgLy8gYW5kIGRvY3VtZW50IGNvbnN0cnVjdGlvbiBvbiB0aGUgVUkgdGhyZWFkIHdoaWNoIHdvdWxkIGJlIGV4cGVuc2l2ZS5cbiAgICBpZiAoaW5pdC5yZXNwb25zZVR5cGUgPT0gJ2RvY3VtZW50Jykge1xuICAgICAgcmV0dXJuIGZldGNoUG9seWZpbGwoaW5wdXQsIGluaXQpO1xuICAgIH1cbiAgICByZXR1cm4gKHRoaXMud2luLmZldGNoIHx8IGZldGNoUG9seWZpbGwpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IFVSTFxuICAgKiBAcGFyYW0gez9GZXRjaEluaXREZWZ9IGluaXQgRmV0Y2ggb3B0aW9ucyBvYmplY3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFGZXRjaFJlc3BvbnNlPn1cbiAgICovXG4gIGZldGNoKGlucHV0LCBpbml0KSB7XG4gICAgaW5pdCA9IHNldHVwSW5pdChpbml0KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaF8oaW5wdXQsIGluaXQpXG4gICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAvKlxuICAgICAgICAgKiBJZiB0aGUgZG9tYWluIGlzIG5vdCB2YWxpZCBmb3IgU3dHIHdlIHJldHVybiA0MDQgd2l0aG91dFxuICAgICAgICAgKiBDT1JTIGhlYWRlcnMgYW5kIHRoZSBicm93c2VyIHRocm93cyBhIENPUlMgZXJyb3IuXG4gICAgICAgICAqIFdlIGluY2x1ZGUgc29tZSBoZWxwZnVsIHRleHQgaW4gdGhlIG1lc3NhZ2UgdG8gcG9pbnQgdGhlXG4gICAgICAgICAqIHB1Ymxpc2hlciB0b3dhcmRzIHRoZSByZWFsIHByb2JsZW0uXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB0YXJnZXRPcmlnaW4gPSBwYXJzZVVybChpbnB1dCkub3JpZ2luO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFhIUiBGYWlsZWQgZmV0Y2hpbmcgKCR7dGFyZ2V0T3JpZ2lufS8uLi4pOiAoTm90ZTogYSBDT1JTIGVycm9yIGFib3ZlIG1heSBpbmRpY2F0ZSB0aGF0IHRoaXMgZG9tYWluIGlzIG5vdCBjb25maWd1cmVkIGZvciBTdWJzY3JpYmUgd2l0aCBHb29nbGUpYCxcbiAgICAgICAgICByZWFzb24gJiYgcmVhc29uLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IGFzc2VydFN1Y2Nlc3MocmVzcG9uc2UpKTtcbiAgfVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZWQgbWV0aG9kIG5hbWUgYnkgdXBwZXJjYXNpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IG1ldGhvZFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kXyhtZXRob2QpIHtcbiAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdHRVQnO1xuICB9XG4gIG1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuXG4gIGFzc2VydChcbiAgICBhbGxvd2VkTWV0aG9kc18uaW5jbHVkZXMobWV0aG9kKSxcbiAgICAnT25seSBvbmUgb2YgJXMgaXMgY3VycmVudGx5IGFsbG93ZWQuIEdvdCAlcycsXG4gICAgYWxsb3dlZE1ldGhvZHNfLmpvaW4oJywgJyksXG4gICAgbWV0aG9kXG4gICk7XG5cbiAgcmV0dXJuIG1ldGhvZDtcbn1cblxuLyoqXG4gKiBTZXRzIHVwIGFuZCBub3JtYWxpemVzIHRoZSBGZXRjaEluaXREZWZcbiAqXG4gKiBAcGFyYW0gez9GZXRjaEluaXREZWY9fSBpbml0IEZldGNoIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmc9fSBhY2NlcHQgVGhlIEhUVFAgQWNjZXB0IGhlYWRlciB2YWx1ZS5cbiAqIEByZXR1cm4geyFGZXRjaEluaXREZWZ9XG4gKi9cbmZ1bmN0aW9uIHNldHVwSW5pdChpbml0LCBhY2NlcHQpIHtcbiAgaW5pdCA9IGluaXQgfHwgLyoqIEB0eXBlIHtGZXRjaEluaXREZWZ9ICovICh7fSk7XG4gIGluaXQubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kXyhpbml0Lm1ldGhvZCk7XG4gIGluaXQuaGVhZGVycyA9IGluaXQuaGVhZGVycyB8fCB7fTtcbiAgaWYgKGFjY2VwdCkge1xuICAgIGluaXQuaGVhZGVyc1snQWNjZXB0J10gPSBhY2NlcHQ7XG4gIH1cbiAgcmV0dXJuIGluaXQ7XG59XG5cbi8qKlxuICogQSBtaW5pbWFsIHBvbHlmaWxsIG9mIEZldGNoIEFQSS4gSXQgb25seSBwb2x5ZmlsbHMgd2hhdCB3ZSBjdXJyZW50bHkgdXNlLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2xvYmFsRmV0Y2gvZmV0Y2hcbiAqXG4gKiBOb3RpY2UgdGhhdCB0aGUgXCJmZXRjaFwiIG1ldGhvZCBpdHNlbGYgaXMgbm90IGV4cG9ydGVkIGFzIHRoYXQgd291bGQgcmVxdWlyZVxuICogdXMgdG8gaW1tZWRpYXRlbHkgc3VwcG9ydCBhIG11Y2ggd2lkZSBBUEkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlucHV0XG4gKiBAcGFyYW0geyFGZXRjaEluaXREZWZ9IGluaXRcbiAqIEByZXR1cm4geyFQcm9taXNlPCFGZXRjaFJlc3BvbnNlPn1cbiAqIEBwcml2YXRlIFZpc2libGUgZm9yIHRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoUG9seWZpbGwoaW5wdXQsIGluaXQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCB4aHIgPSBjcmVhdGVYaHJSZXF1ZXN0KGluaXQubWV0aG9kIHx8ICdHRVQnLCBpbnB1dCk7XG5cbiAgICBpZiAoaW5pdC5jcmVkZW50aWFscyA9PSAnaW5jbHVkZScpIHtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpbml0LnJlc3BvbnNlVHlwZSBpbiBhbGxvd2VkRmV0Y2hUeXBlc18pIHtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBpbml0LnJlc3BvbnNlVHlwZTtcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5oZWFkZXJzKSB7XG4gICAgICBPYmplY3Qua2V5cyhpbml0LmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIGluaXQuaGVhZGVyc1toZWFkZXJdKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPCAvKiBTVEFUVVNfUkVDRUlWRUQgKi8gMikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoeGhyLnN0YXR1cyA8IDEwMCB8fCB4aHIuc3RhdHVzID4gNTk5KSB7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGBVbmtub3duIEhUVFAgc3RhdHVzICR7eGhyLnN0YXR1c31gKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETyhkdm95dGVua28pOiBUaGlzIGlzIGN1cnJlbnRseSBzaW1wbGlmaWVkOiB3ZSB3aWxsIHdhaXQgZm9yIHRoZVxuICAgICAgLy8gd2hvbGUgZG9jdW1lbnQgbG9hZGluZyB0byBjb21wbGV0ZS4gVGhpcyBpcyBmaW5lIGZvciB0aGUgdXNlIGNhc2VzXG4gICAgICAvLyB3ZSBoYXZlIG5vdywgYnV0IG1heSBuZWVkIHRvIGJlIHJlaW1wbGVtZW50ZWQgbGF0ZXIuXG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gLyogQ09NUExFVEUgKi8gNCkge1xuICAgICAgICByZXNvbHZlKG5ldyBGZXRjaFJlc3BvbnNlKHhocikpO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdOZXR3b3JrIGZhaWx1cmUnKSk7XG4gICAgfTtcbiAgICB4aHIub25hYm9ydCA9ICgpID0+IHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcpKTtcbiAgICB9O1xuXG4gICAgaWYgKGluaXQubWV0aG9kID09ICdQT1NUJykge1xuICAgICAgeGhyLnNlbmQoaW5pdC5ib2R5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4geyFYTUxIdHRwUmVxdWVzdH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVhoclJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHtcbiAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDT1JTIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgfVxuICByZXR1cm4geGhyO1xufVxuXG4vKipcbiAqIElmIDQxNSBvciBpbiB0aGUgNXh4IHJhbmdlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXR1c1xuICovXG5mdW5jdGlvbiBpc1JldHJpYWJsZShzdGF0dXMpIHtcbiAgcmV0dXJuIHN0YXR1cyA9PSA0MTUgfHwgKHN0YXR1cyA+PSA1MDAgJiYgc3RhdHVzIDwgNjAwKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSByZXNwb25zZSBpZiBzdWNjZXNzZnVsIG9yIG90aGVyd2lzZSB0aHJvd3MgYW4gZXJyb3IuXG4gKiBAcGFyYW0geyFGZXRjaFJlc3BvbnNlfSByZXNwb25zZVxuICogQHJldHVybiB7IVByb21pc2U8IUZldGNoUmVzcG9uc2U+fVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0U3VjY2VzcyhyZXNwb25zZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBjb25zdCB7c3RhdHVzfSA9IHJlc3BvbnNlO1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgSFRUUCBlcnJvciAke3N0YXR1c31gKTtcbiAgICBlcnIucmV0cmlhYmxlID0gaXNSZXRyaWFibGUoc3RhdHVzKTtcbiAgICAvLyBUT0RPKEBqcmlkZ2V3ZWxsLCAjOTQ0OCk6IENhbGxlcnMgd2hvIG5lZWQgdGhlIHJlc3BvbnNlIHNob3VsZFxuICAgIC8vIHNraXAgcHJvY2Vzc2luZy5cbiAgICBlcnIucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlc3BvbnNlIG9iamVjdCBpbiB0aGUgRmV0Y2ggQVBJLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2xvYmFsRmV0Y2gvZmV0Y2hcbiAqL1xuZXhwb3J0IGNsYXNzIEZldGNoUmVzcG9uc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshWE1MSHR0cFJlcXVlc3R9IHhoclxuICAgKi9cbiAgY29uc3RydWN0b3IoeGhyKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVhNTEh0dHBSZXF1ZXN0fSAqL1xuICAgIHRoaXMueGhyXyA9IHhocjtcblxuICAgIC8qKiBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLnN0YXR1cyA9IHRoaXMueGhyXy5zdGF0dXM7XG5cbiAgICAvKiogQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDA7XG5cbiAgICAvKiogQGNvbnN0IHshRmV0Y2hSZXNwb25zZUhlYWRlcnN9ICovXG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEZldGNoUmVzcG9uc2VIZWFkZXJzKHhocik7XG5cbiAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlO1xuXG4gICAgLyoqIEB0eXBlIHs/UmVhZGFibGVTdHJlYW19ICovXG4gICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb3B5IG9mIHRoZSByZXNwb25zZSBhbmQgcmV0dXJuIGl0LlxuICAgKiBAcmV0dXJuIHshRmV0Y2hSZXNwb25zZX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIGFzc2VydCghdGhpcy5ib2R5VXNlZCwgJ0JvZHkgYWxyZWFkeSB1c2VkJyk7XG4gICAgcmV0dXJuIG5ldyBGZXRjaFJlc3BvbnNlKHRoaXMueGhyXyk7XG4gIH1cblxuICAvKipcbiAgICogRHJhaW5zIHRoZSByZXNwb25zZSBhbmQgcmV0dXJucyB0aGUgdGV4dC5cbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRyYWluVGV4dF8oKSB7XG4gICAgYXNzZXJ0KCF0aGlzLmJvZHlVc2VkLCAnQm9keSBhbHJlYWR5IHVzZWQnKTtcbiAgICB0aGlzLmJvZHlVc2VkID0gdHJ1ZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMueGhyXy5yZXNwb25zZVRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYWlucyB0aGUgcmVzcG9uc2UgYW5kIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzcG9uc2VcbiAgICogdGV4dC5cbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIHRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHJhaW5UZXh0XygpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYWlucyB0aGUgcmVzcG9uc2UgYW5kIHJldHVybnMgdGhlIEpTT04gb2JqZWN0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhSnNvbk9iamVjdD59XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCFKc29uT2JqZWN0Pn0gKi8gKHRoaXMuZHJhaW5UZXh0XygpLnRoZW4oXG4gICAgICBwYXJzZUpzb25cbiAgICApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgeGhyIHJlc3BvbnNlWE1MLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRG9jdW1lbnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZG9jdW1lbnRfKCkge1xuICAgIGFzc2VydCghdGhpcy5ib2R5VXNlZCwgJ0JvZHkgYWxyZWFkeSB1c2VkJyk7XG4gICAgdGhpcy5ib2R5VXNlZCA9IHRydWU7XG4gICAgYXNzZXJ0KFxuICAgICAgdGhpcy54aHJfLnJlc3BvbnNlWE1MLFxuICAgICAgJ3Jlc3BvbnNlWE1MIHNob3VsZCBleGlzdC4gTWFrZSBzdXJlIHRvIHJldHVybiAnICtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZTogdGV4dC9odG1sIGhlYWRlci4nXG4gICAgKTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhRG9jdW1lbnQ+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgYXNzZXJ0KHRoaXMueGhyXy5yZXNwb25zZVhNTClcbiAgICApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmFpbnMgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3BvbnNlXG4gICAqIEFycmF5QnVmZmVyLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhQXJyYXlCdWZmZXI+fVxuICAgKi9cbiAgYXJyYXlCdWZmZXIoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUFycmF5QnVmZmVyPn0gKi8gKHRoaXMuZHJhaW5UZXh0XygpLnRoZW4oXG4gICAgICB1dGY4RW5jb2RlU3luY1xuICAgICkpO1xuICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIHRoZSByZXNwb25zZSBoZWFkZXJzIGFzIGRlZmluZWQgaW4gdGhlIEZldGNoIEFQSS5cbiAqIEBwcml2YXRlIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXRjaFJlc3BvbnNlSGVhZGVycyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih4aHIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshWE1MSHR0cFJlcXVlc3R9ICovXG4gICAgdGhpcy54aHJfID0geGhyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXQobmFtZSkge1xuICAgIHJldHVybiB0aGlzLnhocl8uZ2V0UmVzcG9uc2VIZWFkZXIobmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhcyhuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMueGhyXy5nZXRSZXNwb25zZUhlYWRlcihuYW1lKSAhPSBudWxsO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgTUFYX1pfSU5ERVggPSAyMTQ3NDgzNjQ3O1xuXG5jb25zdCBDb25zdGFudHMgPSB7fTtcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZW52aXJvbm1lbnRzLlxuICpcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5FbnZpcm9ubWVudCA9IHtcbiAgTE9DQUw6ICdMT0NBTCcsXG4gIFBSRVBST0Q6ICdQUkVQUk9EJyxcbiAgUFJPRFVDVElPTjogJ1BST0RVQ1RJT04nLFxuICBTQU5EQk9YOiAnU0FOREJPWCcsXG4gIFRFU1Q6ICdURVNUJyxcbiAgVElOOiAnVElOJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIHBheW1lbnQgbWV0aG9kcy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuUGF5bWVudE1ldGhvZCA9IHtcbiAgQ0FSRDogJ0NBUkQnLFxuICBUT0tFTklaRURfQ0FSRDogJ1RPS0VOSVpFRF9DQVJEJyxcbiAgVVBJOiAnVVBJJyxcbn07XG5cbi8qKlxuICogQXV0aCBtZXRob2RzLlxuICpcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5BdXRoTWV0aG9kID0ge1xuICBDUllQVE9HUkFNXzNEUzogJ0NSWVBUT0dSQU1fM0RTJyxcbiAgUEFOX09OTFk6ICdQQU5fT05MWScsXG59O1xuXG4vKipcbiAqIFJldHVybmVkIHJlc3VsdCBzdGF0dXMuXG4gKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLlJlc3BvbnNlU3RhdHVzID0ge1xuICBDQU5DRUxFRDogJ0NBTkNFTEVEJyxcbiAgREVWRUxPUEVSX0VSUk9SOiAnREVWRUxPUEVSX0VSUk9SJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIHRvdGFsIHByaWNlIHN0YXR1cy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuVG90YWxQcmljZVN0YXR1cyA9IHtcbiAgRVNUSU1BVEVEOiAnRVNUSU1BVEVEJyxcbiAgRklOQUw6ICdGSU5BTCcsXG4gIE5PVF9DVVJSRU5UTFlfS05PV046ICdOT1RfQ1VSUkVOVExZX0tOT1dOJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIEdvb2dsZSBQYXkgcGF5bWVudCBidXR0b24gdHlwZS5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuQnV0dG9uVHlwZSA9IHtcbiAgU0hPUlQ6ICdzaG9ydCcsXG4gIExPTkc6ICdsb25nJyxcbn07XG5cbi8qKlxuICogU3VwcG9ydGVkIGJ1dHRvbiBjb2xvcnMuXG4gKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLkJ1dHRvbkNvbG9yID0ge1xuICBERUZBVUxUOiAnZGVmYXVsdCcsICAvLyBDdXJyZW50bHkgZGVmYXVsdHMgdG8gYmxhY2suXG4gIEJMQUNLOiAnYmxhY2snLFxuICBXSElURTogJ3doaXRlJyxcbn07XG5cbi8qKlxuICogSWQgYXR0cmlidXRlcy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5Db25zdGFudHMuSWQgPSB7XG4gIFBPUFVQX1dJTkRPV19DT05UQUlORVI6ICdwb3B1cC13aW5kb3ctY29udGFpbmVyJyxcbn07XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbkNvbnN0YW50cy5TVE9SQUdFX0tFWV9QUkVGSVggPSAnZ29vZ2xlLnBheW1lbnRzLmFwaS5zdG9yYWdlJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuQ29uc3RhbnRzLklTX1JFQURZX1RPX1BBWV9SRVNVTFRfS0VZID1cbiAgICBDb25zdGFudHMuU1RPUkFHRV9LRVlfUFJFRklYICsgJy5pc3JlYWR5dG9wYXkucmVzdWx0JztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuQ29uc3RhbnRzLlVQSV9DQU5fTUFLRV9QQVlNRU5UX0NBQ0hFX0tFWSA9XG4gICAgQ29uc3RhbnRzLlNUT1JBR0VfS0VZX1BSRUZJWCArICcudXBpLmNhbk1ha2VQYXltZW50Q2FjaGUnO1xuXG5cbkNvbnN0YW50cy5DTEFTU19QUkVGSVggPSAnZ29vZ2xlLXBheW1lbnRzLSc7XG5Db25zdGFudHMuSUZSQU1FX0FDVElWRV9DT05UQUlORVJfQ0xBU1MgPVxuICAgIGAke0NvbnN0YW50cy5DTEFTU19QUkVGSVh9YWN0aXZlQ29udGFpbmVyYDtcbkNvbnN0YW50cy5JRlJBTUVfQ09OVEFJTkVSX0NMQVNTID0gYCR7Q29uc3RhbnRzLkNMQVNTX1BSRUZJWH1kaWFsb2dDb250YWluZXJgO1xuQ29uc3RhbnRzLklGUkFNRV9TVFlMRV9DRU5URVJfQ0xBU1MgPSBgJHtDb25zdGFudHMuQ0xBU1NfUFJFRklYfWRpYWxvZ0NlbnRlcmA7XG5Db25zdGFudHMuSUZSQU1FX1NUWUxFX0NMQVNTID0gYCR7Q29uc3RhbnRzLkNMQVNTX1BSRUZJWH1kaWFsb2dgO1xuXG5Db25zdGFudHMuSUZSQU1FX1NUWUxFID0gYFxuLiR7Q29uc3RhbnRzLklGUkFNRV9TVFlMRV9DTEFTU30ge1xuICAgIGFuaW1hdGlvbjogbm9uZSAwcyBlYXNlIDBzIDEgbm9ybWFsIG5vbmUgcnVubmluZztcbiAgICBiYWNrZ3JvdW5kOiBub25lIDAgMCAvIGF1dG8gcmVwZWF0IHNjcm9sbCBwYWRkaW5nLWJveCBib3JkZXItYm94ICNmZmY7XG4gICAgYmFja2dyb3VuZC1ibGVuZC1tb2RlOiBub3JtYWw7XG4gICAgYm9yZGVyOiAwIG5vbmUgIzMzMztcbiAgICBib3JkZXItcmFkaXVzOiA4cHggOHB4IDAgMDtcbiAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xuICAgIGJvdHRvbTogMDtcbiAgICBib3gtc2hhZG93OiAjODA4MDgwIDAgM3B4IDAgMCwgIzgwODA4MCAwIDAgMjJweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7XG4gICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgei1pbmRleDogJHtNQVhfWl9JTkRFWH07XG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgIGxlZnQ6IDA7XG59XG5AbWVkaWEgKG1pbi13aWR0aDogNDgwcHgpIHtcbiAgLiR7Q29uc3RhbnRzLklGUkFNRV9TVFlMRV9DTEFTU30ge1xuICAgIHdpZHRoOiA0ODBweCAhaW1wb3J0YW50O1xuICAgIGxlZnQ6IC0yNDBweCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbi1sZWZ0OiBjYWxjKDEwMHZ3IC0gMTAwdncgLyAyKSAhaW1wb3J0YW50O1xuICB9XG59XG4uJHtDb25zdGFudHMuSUZSQU1FX0NPTlRBSU5FUl9DTEFTU30ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuMjYpO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogMTAwJTtcbiAgbGVmdDogMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMDtcbn1cbi5pZnJhbWVDb250YWluZXIge1xuICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XG59XG5gO1xuXG5Db25zdGFudHMuSUZSQU1FX1NUWUxFX0NFTlRFUiA9IGBcbi4ke0NvbnN0YW50cy5JRlJBTUVfU1RZTEVfQ0VOVEVSX0NMQVNTfSB7XG4gIGFuaW1hdGlvbjogbm9uZSAwcyBlYXNlIDBzIDEgbm9ybWFsIG5vbmUgcnVubmluZztcbiAgYmFja2dyb3VuZC1ibGVuZC1tb2RlOiBub3JtYWw7XG4gIGJhY2tncm91bmQ6IG5vbmUgMCAwIC8gYXV0byByZXBlYXQgc2Nyb2xsIHBhZGRpbmctYm94IGJvcmRlci1ib3ggI2ZmZjtcbiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3JkZXI6IDBweCBub25lICMzMzM7XG4gIGJvdHRvbTogYXV0bztcbiAgYm94LXNoYWRvdzogIzgwODA4MCAwIDAgMjJweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgbGVmdDogLTI0MHB4O1xuICBsZXR0ZXItc3BhY2luZzogbm9ybWFsO1xuICBtYXJnaW4tbGVmdDogY2FsYygxMDB2dyAtIDEwMHZ3IC8gMikgIWltcG9ydGFudDtcbiAgbWF4LWhlaWdodDogOTAlO1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDEwMCU7XG4gIHRyYW5zZm9ybTogc2NhbGUoMC44KTtcbiAgd2lkdGg6IDQ4MHB4O1xuICB6LWluZGV4OiAke01BWF9aX0lOREVYfTtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xufVxuQG1lZGlhIChtaW4taGVpZ2h0OiA2NjdweCkge1xuICAuJHtDb25zdGFudHMuSUZSQU1FX1NUWUxFX0NFTlRFUl9DTEFTU30ge1xuICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICB9XG59XG4uJHtDb25zdGFudHMuSUZSQU1FX0FDVElWRV9DT05UQUlORVJfQ0xBU1N9IHtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogc2NhbGUoMS4wKSB0cmFuc2xhdGVZKC01MCUpO1xufVxuYDtcblxuQ29uc3RhbnRzLkdQQVlfQlVUVE9OX1dJVEhfQ0FSRF9JTkZPX0lNQUdFID1cbiAgICAnYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHBzOi8vcGF5Lmdvb2dsZS5jb20vZ3AvcC9nZW5lcmF0ZV9ncGF5X2J0bl9pbWcpOyc7XG5cbkNvbnN0YW50cy5CVVRUT05fTE9DQUxFX1RPX01JTl9XSURUSCA9IHtcbiAgJ2VuJzogMTUyLFxuICAnYmcnOiAxNjMsXG4gICdjcyc6IDE5MixcbiAgJ2RlJzogMTgzLFxuICAnZXMnOiAxODMsXG4gICdmcic6IDE4MyxcbiAgJ2hyJzogMTU3LFxuICAnaWQnOiAxODYsXG4gICdqYSc6IDE0OCxcbiAgJ2tvJzogMTM3LFxuICAnbXMnOiAxODYsXG4gICdubCc6IDE2NyxcbiAgJ3BsJzogMTgyLFxuICAncHQnOiAxOTMsXG4gICdydSc6IDIwNixcbiAgJ3NrJzogMTU3LFxuICAnc2wnOiAyMTEsXG4gICdzcic6IDE0NixcbiAgJ3RyJzogMTYxLFxuICAndWsnOiAyMDcsXG4gICd6aCc6IDE1Nixcbn07XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgZ3JheXBhbmUuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5HUEFZX0dSQVlQQU5FID0gJ2dwYXktZ3JheXBhbmUnO1xuXG4vKipcbiAqIENsYXNzIHVzZWQgZm9yIHRoZSBncGF5IGJ1dHRvbi5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTID0gJ2dwYXktYnV0dG9uJztcblxuQ29uc3RhbnRzLkJVVFRPTl9TVFlMRSA9IGBcbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30ge1xuICBiYWNrZ3JvdW5kLW9yaWdpbjogY29udGVudC1ib3g7XG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcbiAgYm9yZGVyOiAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYm94LXNoYWRvdzogcmdiYSg2MCwgNjQsIDY3LCAwLjMpIDBweCAxcHggMXB4IDBweCwgcmdiYSg2MCwgNjQsIDY3LCAwLjE1KSAwcHggMXB4IDNweCAxcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgaGVpZ2h0OiA0MHB4O1xuICBtaW4taGVpZ2h0OiA0MHB4O1xuICBwYWRkaW5nOiAxMXB4IDI0cHg7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30uYmxhY2sge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICBib3gtc2hhZG93OiBub25lO1xuICBwYWRkaW5nOiAxMnB4IDI0cHggMTBweDtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS53aGl0ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30uc2hvcnQge1xuICBtaW4td2lkdGg6IDkwcHg7XG4gIHdpZHRoOiAxNjBweDtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS5ibGFjay5zaG9ydCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwczovL3d3dy5nc3RhdGljLmNvbS9pbnN0YW50YnV5L3N2Zy9kYXJrX2dwYXkuc3ZnKTtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS53aGl0ZS5zaG9ydCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwczovL3d3dy5nc3RhdGljLmNvbS9pbnN0YW50YnV5L3N2Zy9saWdodF9ncGF5LnN2Zyk7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30uYmxhY2suYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzVmNjM2ODtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS5ibGFjay5ob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzYzQwNDM7XG59XG5cbi4ke0NvbnN0YW50cy5HUEFZX0JVVFRPTl9DTEFTU30ud2hpdGUuYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NMQVNTfS53aGl0ZS5mb2N1cyB7XG4gIGJveC1zaGFkb3c6ICNlOGU4ZTggMCAxcHggMXB4IDAsICNlOGU4ZTggMCAxcHggM3B4O1xufVxuXG4uJHtDb25zdGFudHMuR1BBWV9CVVRUT05fQ0xBU1N9LndoaXRlLmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODtcbn1cbmA7XG5cbkNvbnN0YW50cy5HUEFZX0JVVFRPTl9XSVRIX09GRkVSX0lDT05fQURESVRJT05BTF9TVFlMRSA9ICdwb3NpdGlvbjogcmVsYXRpdmU7JztcblxuQ29uc3RhbnRzLkdQQVlfT0ZGRVJfSUNPTl9DTEFTUyA9ICdncGF5LW9mZmVyLWljb24nO1xuXG5Db25zdGFudHMuR1BBWV9PRkZFUl9JQ09OX1NWRyA9XG4gICAgXCI8c3ZnIHdpZHRoPVxcXCIyMHB4XFxcIiBoZWlnaHQ9XFxcIjIwcHhcXFwiIHZpZXdCb3g9XFxcIjAgMCAyMCAyMFxcXCIgXCIgK1xuICAgIFwidmVyc2lvbj1cXFwiMS4xXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHhtbG5zOnhsaW5rPVwiICtcbiAgICBcIlxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXFxcIiBjbGFzcz1cXFwiZ3BheS1vZmZlci1pY29uXFxcIj48ZGVmcz48cGF0aCBkPVxcXCJNMTkuNDEsOS41OCBMMTAuNDEsMC41OCBcIiArXG4gICAgXCJDMTAuMDUsMC4yMiA5LjU1LDAgOSwwIEwyLDAgQzAuOSwwIDAsMC45IDAsMiBMMCw5IEMwLDkuNTUgMC4yMiwxMC4wNSBcIiArXG4gICAgXCIwLjU5LDEwLjQyIEw5LjU5LDE5LjQyIEM5Ljk1LDE5Ljc4IDEwLjQ1LDIwIDExLDIwIEMxMS41NSwyMCAxMi4wNSwxOS43OCBcIiArXG4gICAgXCIxMi40MSwxOS40MSBMMTkuNDEsMTIuNDEgQzE5Ljc4LDEyLjA1IDIwLDExLjU1IDIwLDExIEMyMCwxMC40NSAxOS43NyxcIiArXG4gICAgXCI5Ljk0IDE5LjQxLDkuNTggWlxcXCIgaWQ9XFxcInBhdGgtMVxcXCI+PC9wYXRoPjwvZGVmcz48ZyBpZD1cXFwiYnV0dG9uc18xMC4wNVxcXCJcIiArXG4gICAgXCIgc3Ryb2tlPVxcXCJub25lXFxcIiBzdHJva2Utd2lkdGg9XFxcIjFcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkFydGJvYXJkXFxcIiB0cmFuc2Zvcm09XFxcInRyYW5zbGF0ZSgtNDAuMDAwMDAwLCAtNDMuMDAwMDAwKVxcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkdyb3VwLTNcXFwiIHRyYW5zZm9ybT1cXFwidHJhbnNsYXRlKDQwLjAwMDAwMCwgNDMuMDAwMDAwKVxcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkdyb3VwLTItQ29weS0yXFxcIj48ZyBpZD1cXFwiR3JvdXAtQ29weVxcXCI+PGcgaWQ9XFxcImljX2xveWFsdHlfMjRweFxcXCI+XCIgK1xuICAgIFwiPG1hc2sgaWQ9XFxcIm1hc2stMlxcXCIgZmlsbD1cXFwid2hpdGVcXFwiPjx1c2UgeGxpbms6aHJlZj1cXFwiI3BhdGgtMVxcXCI+PC91c2U+XCIgK1xuICAgIFwiPC9tYXNrPjx1c2UgaWQ9XFxcImdwYXktU2hhcGVcXFwiIGZpbGw9XFxcIiNGRjYxMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgXCIgK1xuICAgIFwieGxpbms6aHJlZj1cXFwiI3BhdGgtMVxcXCI+PC91c2U+PHBhdGggZD1cXFwiTTMuNSw1IEMyLjY3LDUgMiw0LjMzIDIsMy41IEMyLFwiICtcbiAgICBcIjIuNjcgMi42NywyIDMuNSwyIEM0LjMzLDIgNSwyLjY3IDUsMy41IEM1LDQuMzMgNC4zMyw1IDMuNSw1IFpcXFwiIFwiICtcbiAgICBcImlkPVxcXCJQYXRoXFxcIiBmaWxsPVxcXCIjRkZGRkZGXFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiIG1hc2s9XFxcInVybCgjbWFzay0yKVxcXCI+XCIgK1xuICAgIFwiPC9wYXRoPjwvZz48L2c+PC9nPjxnIGlkPVxcXCJHcm91cC0xMy1Db3B5LTdcXFwiIHRyYW5zZm9ybT1cXFwidHJhbnNsYXRlXCIgK1xuICAgIFwiKDYuMDAwMDAwLCA2LjAwMDAwMClcXFwiIGZpbGw9XFxcIiNGRkZGRkZcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCI+XCIgK1xuICAgIFwiPGcgaWQ9XFxcIkdyb3VwLTEzLUNvcHktMlxcXCI+PHBhdGggZD1cXFwiTTIuMTUyMTczOTEsNC41NTE3MjQxNCBDMC45NjM1NjEwODIsXCIgK1xuICAgIFwiNC41NTE3MjQxNCAxLjk5ODQwMTQ0ZS0xNCwzLjUzMjc4NTk4IDEuOTk4NDAxNDRlLTE0LDIuMjc1ODYyMDcgXCIgK1xuICAgIFwiQzEuOTk4NDAxNDRlLTE0LDEuMDE4OTM4MTYgMC45NjM1NjEwODIsNi4zMDYwNjY3OGUtMTQgMi4xNTIxNzM5MSw2LlwiICtcbiAgICBcIjMwNjA2Njc4ZS0xNCBDMy4zNDA3ODY3NCw2LjMwNjA2Njc4ZS0xNCA0LjMwNDM0NzgzLDEuMDE4OTM4MTYgNC4zMDQzNDc4MyxcIiArXG4gICAgXCIyLjI3NTg2MjA3IEM0LjMwNDM0NzgzLDMuNTMyNzg1OTggMy4zNDA3ODY3NCw0LjU1MTcyNDE0IDIuMTUyMTczOTEsXCIgK1xuICAgIFwiNC41NTE3MjQxNCBaIE0yLjE1MjE3MzkxLDMuMzEwMzQ0ODMgQzIuNjkyNDUyNDcsMy4zMTAzNDQ4MyAzLjEzMDQzNDc4LDIuXCIgK1xuICAgIFwiODQ3MTkxMTIgMy4xMzA0MzQ3OCwyLjI3NTg2MjA3IEMzLjEzMDQzNDc4LDEuNzA0NTMzMDIgMi42OTI0NTI0NyxcIiArXG4gICAgXCIxLjI0MTM3OTMxIDIuMTUyMTczOTEsMS4yNDEzNzkzMSBDMS42MTE4OTUzNSwxLjI0MTM3OTMxIDEuMTczOTEzMDQsMVwiICtcbiAgICBcIi43MDQ1MzMwMiAxLjE3MzkxMzA0LDIuMjc1ODYyMDcgQzEuMTczOTEzMDQsMi44NDcxOTExMiAxLjYxMTg5NTM1LDMuXCIgK1xuICAgIFwiMzEwMzQ0ODMgMi4xNTIxNzM5MSwzLjMxMDM0NDgzIFpcXFwiIGlkPVxcXCJDb21iaW5lZC1TaGFwZVxcXCI+PC9wYXRoPlwiICtcbiAgICBcIjxwYXRoIGQ9XFxcIk02Ljg0NzgyNjA5LDkgQzUuNjU5MjEzMjYsOSA0LjY5NTY1MjE3LDcuOTgxMDYxODQgNC42OTU2NTIxNyxcIiArXG4gICAgXCI2LjcyNDEzNzkzIEM0LjY5NTY1MjE3LDUuNDY3MjE0MDIgNS42NTkyMTMyNiw0LjQ0ODI3NTg2IDYuODQ3ODI2MDksXCIgK1xuICAgIFwiNC40NDgyNzU4NiBDOC4wMzY0Mzg5Miw0LjQ0ODI3NTg2IDksNS40NjcyMTQwMiA5LDYuNzI0MTM3OTMgQzksNy45ODEwNjE4NFwiICtcbiAgICBcIiA4LjAzNjQzODkyLDkgNi44NDc4MjYwOSw5IFogTTYuODQ3ODI2MDksNy43NTg2MjA2OSBDNy4zODgxMDQ2NSxcIiArXG4gICAgXCI3Ljc1ODYyMDY5IDcuODI2MDg2OTYsNy4yOTU0NjY5OCA3LjgyNjA4Njk2LDYuNzI0MTM3OTMgQzcuODI2MDg2OTZcIiArXG4gICAgXCIsNi4xNTI4MDg4OCA3LjM4ODEwNDY1LDUuNjg5NjU1MTcgNi44NDc4MjYwOSw1LjY4OTY1NTE3IEM2LjMwNzU0NzUzLFwiICtcbiAgICBcIjUuNjg5NjU1MTcgNS44Njk1NjUyMiw2LjE1MjgwODg4IDUuODY5NTY1MjIsNi43MjQxMzc5MyBDNS44Njk1NjUyMixcIiArXG4gICAgXCI3LjI5NTQ2Njk4IDYuMzA3NTQ3NTMsNy43NTg2MjA2OSA2Ljg0NzgyNjA5LDcuNzU4NjIwNjkgWlxcXCIgXCIgK1xuICAgIFwiaWQ9XFxcIkNvbWJpbmVkLVNoYXBlXFxcIj48L3BhdGg+PHBvbHlnb24gaWQ9XFxcIlJlY3RhbmdsZVxcXCIgXCIgK1xuICAgIFwidHJhbnNmb3JtPVxcXCJ0cmFuc2xhdGUoNC40OTc3MjAsIDQuNTQxOTM4KSByb3RhdGUoMzQuMDAwMDAwKSBcIiArXG4gICAgXCJ0cmFuc2xhdGUoLTQuNDk3NzIwLCAtNC41NDE5MzgpIFxcXCIgcG9pbnRzPVxcXCIzLjc3OTAxNzc4IC0wLjIwMjI5NTk3OCBcIiArXG4gICAgXCI0Ljk3NDAyNzMgLTAuMTcxMDE5MTYxIDUuMjE2NDIyNjMgOS4yODYxNzI3OCA0LjAyMTQxMzExIDkuMjU0ODk1OTZcXFwiPlwiICtcbiAgICBcIjwvcG9seWdvbj48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPlwiO1xuXG5Db25zdGFudHMuR1BBWV9PRkZFUl9JQ09OX1NUWUxFID0gYFxuLiR7Q29uc3RhbnRzLkdQQVlfT0ZGRVJfSUNPTl9DTEFTU30ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAtNXB4O1xuICB0b3A6IC01cHg7XG59XG5cbiNpY19sb3lhbHR5XzI0cHggdXNlLmhvdmVyIHtcbiAgZmlsbDogI0ZDODUzQjtcbn1cbmA7XG5cbkNvbnN0YW50cy5HUEFZX09GRkVSX0RFU0NSSVBUSU9OX0NMQVNTID0gJ2dwYXktb2ZmZXItZGVzY3JpcHRpb24nO1xuXG5Db25zdGFudHMuR1BBWV9PRkZFUl9ERVNDUklQVElPTl9TVFlMRSA9IGBcbkBpbXBvcnQgdXJsKC8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Hb29nbGUrU2Fuczo1MDApO1xuLiR7Q29uc3RhbnRzLkdQQVlfT0ZGRVJfREVTQ1JJUFRJT05fQ0xBU1N9IHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250OiAxMHB4ICdHb29nbGUgU2Fucyc7XG4gIG1hcmdpbi10b3A6IDJweDtcbiAgbWFyZ2luLWJvdHRvbTogMHB4O1xufVxuXG4uJHtDb25zdGFudHMuR1BBWV9PRkZFUl9ERVNDUklQVElPTl9DTEFTU30uZ3BheS1idG4tY2xpY2tlZCB7XG4gIGNvbG9yOiAjM0M0MDQzO1xufVxuXG4uJHtDb25zdGFudHMuR1BBWV9PRkZFUl9ERVNDUklQVElPTl9DTEFTU30uc2hvcnQge1xuICBtaW4td2lkdGg6IDkwcHg7XG4gIHdpZHRoOiAxNjBweDtcbn1cblxuLiR7Q29uc3RhbnRzLkdQQVlfT0ZGRVJfREVTQ1JJUFRJT05fQ0xBU1N9Lmxvbmcge1xuICBtaW4td2lkdGg6IDE1MnB4O1xuICB3aWR0aDogMjQwcHg7XG59XG5gO1xuXG4vKipcbiAqIENsYXNzIHVzZWQgZm9yIHRoZSBuZXcgZ3BheSBidXR0b24gd2l0aCBjYXJkIGluZm8gKGxhc3QgNCBkaWdpdHMsIGNhcmQgbmV0KS5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuQ29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTUyA9ICdncGF5LWNhcmQtaW5mby1idG4nO1xuXG5Db25zdGFudHMuR1BBWV9CVVRUT05fQ0FSRF9JTkZPX0JVVFRPTl9TVFlMRSA9IGBcbiAgLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTU30ge1xuICAgIGJhY2tncm91bmQtb3JpZ2luOiBjb250ZW50LWJveDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xuICAgIGJvcmRlcjogMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBib3gtc2hhZG93OiByZ2JhKDYwLCA2NCwgNjcsIDAuMykgMHB4IDFweCAxcHggMHB4LCByZ2JhKDYwLCA2NCwgNjcsIDAuMTUpIDBweCAxcHggM3B4IDFweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgaGVpZ2h0OiA0MHB4O1xuICAgIG1pbi1oZWlnaHQ6IDQwcHg7XG4gICAgcGFkZGluZzogMTFweCAyNHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICBwYWRkaW5nOiA5cHggMjRweCAxMHB4O1xuICAgIG1pbi13aWR0aDogMTkwcHg7XG4gICAgd2lkdGg6IDI0MHB4O1xuICB9XG5cbiAgLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTU30uYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWY2MzY4O1xuICB9XG5cbiAgLiR7Q29uc3RhbnRzLkdQQVlfQlVUVE9OX0NBUkRfSU5GT19DTEFTU30uaG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMzYzQwNDM7XG4gIH1cbiAgYDtcblxuXG4vKipcbiAqIFRydXN0ZWQgZG9tYWluIGZvciBzZWN1cmUgY29udGV4dCB2YWxpZGF0aW9uXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkNvbnN0YW50cy5UUlVTVEVEX0RPTUFJTiA9ICcuZ29vZ2xlLmNvbSc7XG5cbmV4cG9ydCB7Q29uc3RhbnRzfTtcblxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbi8qKlxuICogSW5qZWN0cyB0aGUgcHJvdmlkZWQgc3R5bGUgc2hlZXQgdG8gdGhlIGRvY3VtZW50IGhlYWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3R5bGVUZXh0IFRoZSBzdHlsZXNoZWV0IHRvIGJlIGluamVjdGVkLlxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGluamVjdFN0eWxlU2hlZXQoc3R5bGVUZXh0KSB7XG4gIGNvbnN0IHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlRWxlbWVudC50eXBlID0gJ3RleHQvY3NzJztcbiAgc3R5bGVFbGVtZW50LnRleHRDb250ZW50ID0gc3R5bGVUZXh0O1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG4gIHJldHVybiBzdHlsZUVsZW1lbnQ7XG59XG5cbi8qKlxuICogSW5qZWN0cyB0aGUgcGF5IHdpdGggZ29vZ2xlIGlmcmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZnJhbWVDbGFzc05hbWUgVGhlIGNsYXNzbmFtZSBvZiB0aGUgaUZyYW1lIHdyYXBwZXIuXG4gKiBAcmV0dXJuIHshe2NvbnRhaW5lcjogIUVsZW1lbnQsIGlmcmFtZTohSFRNTElGcmFtZUVsZW1lbnR9fVxuICovXG5mdW5jdGlvbiBpbmplY3RJZnJhbWUoaWZyYW1lQ2xhc3NOYW1lKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChDb25zdGFudHMuSUZSQU1FX0NPTlRBSU5FUl9DTEFTUyk7XG4gIGNvbnN0IGlmcmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBpZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaWZyYW1lQ29udGFpbmVyJyk7XG4gIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgY29uc3QgaWZyYW1lID1cbiAgICAgIC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJykpO1xuICBpZnJhbWUuY2xhc3NMaXN0LmFkZChpZnJhbWVDbGFzc05hbWUpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdmcmFtZWJvcmRlcicsICcwJyk7XG4gIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3Njcm9sbGluZycsICdubycpO1xuICBpZnJhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlmcmFtZUNvbnRhaW5lcik7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgcmV0dXJuIHsnY29udGFpbmVyJzogY29udGFpbmVyLCAnaWZyYW1lJzogaWZyYW1lfTtcbn1cblxuZXhwb3J0IHtcbiAgaW5qZWN0U3R5bGVTaGVldCxcbiAgaW5qZWN0SWZyYW1lLFxufTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5jb25zdCBNQVhfWl9JTkRFWCA9IDIxNDc0ODM2NDc7XG5cblxuY2xhc3MgR3JheXBhbmUge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGRvYy5jcmVhdGVFbGVtZW50KENvbnN0YW50cy5HUEFZX0dSQVlQQU5FKTtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5lbGVtZW50Xywge1xuICAgICAgJ3otaW5kZXgnOiBNQVhfWl9JTkRFWCxcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxuICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICd0b3AnOiAwLFxuICAgICAgJ3JpZ2h0JzogMCxcbiAgICAgICdib3R0b20nOiAwLFxuICAgICAgJ2xlZnQnOiAwLFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgzMiwgMzMsIDM2LCAuNiknLFxuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/V2luZG93fSAqL1xuICAgIHRoaXMucG9wdXBXaW5kb3dfID0gbnVsbDtcblxuICAgIHRoaXMuZWxlbWVudF8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wb3B1cFdpbmRvd18pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnBvcHVwV2luZG93Xy5mb2N1cygpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGdyYXlwYW5lLlxuICAgKiBAcGFyYW0gez9XaW5kb3d8dW5kZWZpbmVkfSBwb3B1cFdpbmRvd1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHNob3cocG9wdXBXaW5kb3cpIHtcbiAgICB0aGlzLnBvcHVwV2luZG93XyA9IHBvcHVwV2luZG93IHx8IG51bGw7XG4gICAgdGhpcy5kb2NfLmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZWxlbWVudF8sIHtcbiAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJyxcbiAgICAgICdvcGFjaXR5JzogMCxcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhbnNpdGlvbih0aGlzLmVsZW1lbnRfLCB7XG4gICAgICAnb3BhY2l0eSc6IDEsXG4gICAgfSwgMzAwLCAnZWFzZS1vdXQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgZ3JheXBhbmUuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfHVuZGVmaW5lZH1cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5wb3B1cFdpbmRvd18gPSBudWxsO1xuICAgIGlmICghdGhpcy5lbGVtZW50Xy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAvLyBIYXMgYWxyZWFkeSBiZWVuIHJlbW92ZWQgb3IgaGF2ZW4ndCBiZWVuIGV2ZW4gYWRkZWQgdG8gRE9NLlxuICAgICAgLy8gVGhpcyBjb3VsZCBiZSBwb3NzaWJsZSBhZnRlciByZWRpcmVjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zaXRpb24odGhpcy5lbGVtZW50Xywge1xuICAgICAgJ29wYWNpdHknOiAwLFxuICAgIH0sIDMwMCwgJ2Vhc2Utb3V0JykudGhlbigoKSA9PiB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5lbGVtZW50XywgeydkaXNwbGF5JzogJ25vbmUnfSk7XG4gICAgICB0aGlzLmRvY18uYm9keS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCAhaW1wb3J0YW50LiBUaGUgc3R5bGVzXG4gKiBhcmUgc3BlY2lmaWVkIGFzIGEgbWFwIGZyb20gQ1NTIHByb3BlcnR5IG5hbWVzIHRvIHRoZWlyIHZhbHVlcy5cbiAqXG4gKiBUaGUgYCFpbXBvcnRhbnRgIHN0eWxlcyBhcmUgdXNlZCB0byBhdm9pZCBhY2NpZGVudGFsIHNwZWNpZmljaXR5IG92ZXJyaWRlc1xuICogZnJvbSB0aGUgM3AgcGFnZSdzIHN0eWxlc2hlZXQuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59IHN0eWxlc1xuICovXG5mdW5jdGlvbiBzZXRJbXBvcnRhbnRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGssIHN0eWxlc1trXS50b1N0cmluZygpLCAnaW1wb3J0YW50Jyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIGFmdGVyIHRoZSBnaXZlbiBkdXJhdGlvbiBvZiBhbmltYXRpb25cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsIC0gRWxlbWVudCB0byBiZSBvYnNlcnZlZC5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+fSBwcm9wcyAtIHByb3BlcnRpZXMgdG8gYmUgYW5pbWF0ZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb25NaWxsaXMgLSBkdXJhdGlvbiBvZiBhbmltYXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VydmUgLSB0cmFuc2l0aW9uIGZ1bmN0aW9uIGZvciB0aGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7IVByb21pc2V9IFByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGRvbmUgcGxheWluZy5cbiAqL1xuZnVuY3Rpb24gdHJhbnNpdGlvbihlbCwgcHJvcHMsIGR1cmF0aW9uTWlsbGlzLCBjdXJ2ZSkge1xuICBjb25zdCB3aW4gPSBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBjb25zdCBwcmV2aW91c1RyYW5zaXRpb25WYWx1ZSA9IGVsLnN0eWxlLnRyYW5zaXRpb24gfHwgJyc7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB3aW4uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB3aW4uc2V0VGltZW91dChyZXNvbHZlLCBkdXJhdGlvbk1pbGxpcyk7XG4gICAgICBjb25zdCB0ciA9IGAke2R1cmF0aW9uTWlsbGlzfW1zICR7Y3VydmV9YDtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhlbCwgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICd0cmFuc2l0aW9uJzogYHRyYW5zZm9ybSAke3RyfSwgb3BhY2l0eSAke3RyfWAsXG4gICAgICB9LCBwcm9wcykpO1xuICAgIH0pO1xuICB9KS50aGVuKCgpID0+IHtcbiAgICAvLyBTdG9wIHRyYW5zaXRpb24gYW5kIG1ha2Ugc3VyZSB0aGF0IHRoZSBmaW5hbCBwcm9wZXJ0aWVzIGdldCBzZXQuXG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICd0cmFuc2l0aW9uJzogcHJldmlvdXNUcmFuc2l0aW9uVmFsdWUsXG4gICAgfSwgcHJvcHMpKTtcbiAgfSk7XG59XG5cblxuZXhwb3J0IHtHcmF5cGFuZX07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7UG9zdE1lc3NhZ2VTZXJ2aWNlfSBmcm9tICcuL3Bvc3RfbWVzc2FnZV9zZXJ2aWNlLmpzJztcblxuLyoqXG4gKiBTdXBwb3J0ZWQgaW50ZXJhY3Rpb25zIGJldHdlZW4gaWZyYW1lIGFuZCBtZXJjaGFudCBwYWdlLlxuICpcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbi8vIE5leHQgSWQ6IDEwXG5jb25zdCBQb3N0TWVzc2FnZUV2ZW50VHlwZSA9IHtcbiAgSVNfUkVBRFlfVE9fUEFZOiA2LFxuICBMT0dfQlVUVE9OX0NMSUNLOiA1LFxuICBMT0dfSVNfUkVBRFlfVE9fUEFZX0FQSTogMCxcbiAgTE9HX0xPQURfUEFZTUVOVF9EQVRBX0FQSTogMSxcbiAgTE9HX1JFTkRFUl9CVVRUT046IDIsXG4gIExPR19JTklUSUFMSVpFX1BBWU1FTlRTX0NMSUVOVDogOSxcbiAgTE9HX1BBWV9GUkFNRV9SRVFVRVNURUQ6IDE1LFxuICBMT0dfUEFZX0ZSQU1FX0xPQURFRDogMTYsXG4gIExPR19QQVlfRlJBTUVfTE9BREVEX1dJVEhfQUxMX0pTOiAxNyxcbiAgTE9HX0lOTElORV9QQVlNRU5UX1dJREdFVF9JTklUSUFMSVpFOiA0LFxuICBMT0dfSU5MSU5FX1BBWU1FTlRfV0lER0VUX1NVQk1JVDogMyxcbiAgTE9HX0lOTElORV9QQVlNRU5UX1dJREdFVF9ESVNQTEFZRUQ6IDcsXG4gIExPR19JTkxJTkVfUEFZTUVOVF9XSURHRVRfSElEREVOOiA4LFxufTtcblxuLyoqXG4gKiBUeXBlcyBvZiBidXkgZmxvdyBhY3Rpdml0eSBtb2Rlcy5cbiAqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5jb25zdCBCdXlGbG93QWN0aXZpdHlNb2RlID0ge1xuICBVTktOT1dOX01PREU6IDAsXG4gIElGUkFNRTogMSxcbiAgUE9QVVA6IDIsXG4gIFJFRElSRUNUOiAzLFxuICBBTkRST0lEX05BVElWRTogNCxcbiAgUEFZTUVOVF9IQU5ETEVSOiA1LFxufTtcblxuLyoqXG4gKiBUeXBlcyBvZiBidXkgZmxvdyBhY3Rpdml0eSBtb2Rlcy5cbiAqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5jb25zdCBQdWJsaWNFcnJvckNvZGUgPSB7XG4gIFVOS05PV05fRVJST1JfVFlQRTogMCxcbiAgSU5URVJOQUxfRVJST1I6IDEsXG4gIERFVkVMT1BFUl9FUlJPUjogMixcbiAgQlVZRVJfQUNDT1VOVF9FUlJPUjogMyxcbiAgTUVSQ0hBTlRfQUNDT1VOVF9FUlJPUjogNCxcbiAgVU5TVVBQT1JURURfQVBJX1ZFUlNJT046IDUsXG4gIEJVWUVSX0NBTkNFTDogNixcbn07XG5cbi8qKlxuICogVGhlIHByZXNlbnRhdGlvbiBtb2RlIG9mIHRoZSBidXkgZmxvd1xuICpcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmNvbnN0IEJ1eUZsb3dNb2RlID0ge1xuICBQQVlfV0lUSF9HT09HTEU6IDUsXG4gIFNVQlNDUklCRV9XSVRIX0dPT0dMRTogNixcbn07XG5cbi8qKlxuICogSWZyYW1lIHVzZWQgZm9yIGxvZ2dpbmcgYW5kIHByZWZldGNoaW5nLlxuICpcbiAqIEB0eXBlIHs/RWxlbWVudH1cbiAqL1xubGV0IGlmcmFtZSA9IG51bGw7XG5cbi8qKiBAdHlwZSB7P1Bvc3RNZXNzYWdlU2VydmljZX0gKi9cbmxldCBwb3N0TWVzc2FnZVNlcnZpY2UgPSBudWxsO1xuXG4vKiogQHR5cGUgez9zdHJpbmd9ICovXG5sZXQgZW52aXJvbm1lbnQgPSBudWxsO1xuXG4vKiogQHR5cGUgez9zdHJpbmd9ICovXG5sZXQgZ29vZ2xlVHJhbnNhY3Rpb25JZCA9IG51bGw7XG5cbi8qKiBAdHlwZSB7bnVtYmVyfSAqL1xubGV0IG9yaWdpblRpbWVNcyA9IERhdGUubm93KCk7XG5cbi8qKiBAdHlwZSB7P0J1eUZsb3dBY3Rpdml0eU1vZGV9ICovXG5sZXQgYnV5Rmxvd0FjdGl2aXR5TW9kZSA9IG51bGw7XG5cbi8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbmxldCBpZnJhbWVMb2FkZWQgPSBmYWxzZTtcblxuLyoqIEB0eXBlIHshQXJyYXk8IU9iamVjdD59ICovXG5sZXQgYnVmZmVyID0gW107XG5cbmNsYXNzIFBheUZyYW1lSGVscGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBoaWRkZW4gaWZyYW1lIGZvciBsb2dnaW5nIGFuZCBhcHBlbmRzIGl0IHRvIHRoZSB0b3AgbGV2ZWxcbiAgICogZG9jdW1lbnQuXG4gICAqL1xuICBzdGF0aWMgbG9hZCgpIHtcbiAgICBpZiAoaWZyYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluaXRPcHRpb25zID1cbiAgICAgICAgLyoqIEB0eXBlIHshUGF5bWVudE9wdGlvbnN9ICovICh3aW5kb3dbJ2dwYXlJbml0UGFyYW1zJ10pIHx8IHt9O1xuICAgIGVudmlyb25tZW50ID0gaW5pdE9wdGlvbnMuZW52aXJvbm1lbnQgfHwgQ29uc3RhbnRzLkVudmlyb25tZW50LlBST0RVQ1RJT047XG4gICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgLy8gUGFzcyBpbiBvcmlnaW4gYmVjYXVzZSBkb2N1bWVudC5yZWZlcnJlciBpbnNpZGUgaWZyYW1lIGlzIGVtcHR5IGluXG4gICAgLy8gY2VydGFpbiBjYXNlc1xuICAgIC8vIENhbiBiZSByZXBsYWNlZCBieSBpZnJhbWUuc3JjPS4uLiBpbiBub24gR29vZ2xlIGNvbnRleHQuXG4gICAgaWZyYW1lLnNyYyA9IFBheUZyYW1lSGVscGVyLmdldElmcmFtZVVybF8oXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgaW5pdE9wdGlvbnMubWVyY2hhbnRJbmZvICYmIGluaXRPcHRpb25zLm1lcmNoYW50SW5mby5tZXJjaGFudElkKTtcbiAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX1BBWV9GUkFNRV9SRVFVRVNURUQsXG4gICAgICAnY2xpZW50TGF0ZW5jeVN0YXJ0TXMnOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuICAgIGlmcmFtZS5oZWlnaHQgPSAnMCc7XG4gICAgaWZyYW1lLndpZHRoID0gJzAnO1xuICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGlmcmFtZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX1BBWV9GUkFNRV9MT0FERURfV0lUSF9BTExfSlMsXG4gICAgICAgICdjbGllbnRMYXRlbmN5U3RhcnRNcyc6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIFBheUZyYW1lSGVscGVyLmlmcmFtZUxvYWRlZCgpO1xuICAgIH07XG4gICAgLy8gSWYgdGhlIGJvZHkgaXMgYWxyZWFkeSBsb2FkZWQsIGp1c3QgYXBwZW5kIHRoZSBpZnJhbWUuIE90aGVyd2lzZSwgd2Ugd2FpdFxuICAgIC8vIHVudGlsIHRoZSBET00gaGFzIGxvYWRlZCB0byBhcHBlbmQgdGhlIGlmcmFtZSwgb3RoZXJ3aXNlIGRvY3VtZW50LmJvZHkgaXNcbiAgICAvLyBudWxsLlxuICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICBQYXlGcmFtZUhlbHBlci5pbml0aWFsaXplXygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICdET01Db250ZW50TG9hZGVkJywgKCkgPT4gUGF5RnJhbWVIZWxwZXIuaW5pdGlhbGl6ZV8oKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgdGhlIGlmcmFtZSB0byB0aGUgRE9NIGFuZCB1cGRhdGVzIHRoZSBwb3N0IG1lc3NhZ2Ugc2VydmljZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBpbml0aWFsaXplXygpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgcG9zdE1lc3NhZ2VTZXJ2aWNlID0gbmV3IFBvc3RNZXNzYWdlU2VydmljZShpZnJhbWUuY29udGVudFdpbmRvdyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBpZnJhbWUgYW5kIHdhaXQgZm9yIGEgcmVzcG9uc2UuXG4gICAqIFVzZXMgdGhlIHJlc3BvbnNlSGFuZGxlciBzcGVjaWZpZWQgb25seSBpZiB0aGUgcmVzcG9uc2VUeXBlIGlzIGEgbWF0Y2guXG4gICAqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZGF0YVxuICAgKiBAcGFyYW0geyFQb3N0TWVzc2FnZUV2ZW50VHlwZX0gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZVR5cGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSByZXNwb25zZUhhbmRsZXJcbiAgICovXG4gIHN0YXRpYyBzZW5kQW5kV2FpdEZvclJlc3BvbnNlKFxuICAgICAgZGF0YSwgZXZlbnRUeXBlLCByZXNwb25zZVR5cGUsIHJlc3BvbnNlSGFuZGxlcikge1xuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQuZGF0YVtyZXNwb25zZVR5cGVdKSB7XG4gICAgICAgIHJlc3BvbnNlSGFuZGxlcihldmVudCk7XG4gICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byBwcm9jZXNzIHRoZSByZXNwb25zZSBmcm9tIHRoZSBwYXlmcmFtZSBvbmNlLlxuICAgICAgICAvLyBzbyBzdG9wIGxpc3RlbmluZyB0byB0aGUgZXZlbnQgb25jZSBwcm9jZXNzZWQuXG4gICAgICAgIFBheUZyYW1lSGVscGVyLnJlbW92ZU1lc3NhZ2VFdmVudExpc3RlbmVyXyhjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgUGF5RnJhbWVIZWxwZXIuYWRkTWVzc2FnZUV2ZW50TGlzdGVuZXJfKGNhbGxiYWNrKTtcblxuICAgIGNvbnN0IHBvc3RNZXNzYWdlRGF0YSA9IE9iamVjdC5hc3NpZ24oeydldmVudFR5cGUnOiBldmVudFR5cGV9LCBkYXRhKTtcbiAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZShwb3N0TWVzc2FnZURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciBmb3IgbGlzdGVuaW5nIHRvIG1lc3NhZ2VzIHJlY2VpdmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgYWRkTWVzc2FnZUV2ZW50TGlzdGVuZXJfKGNhbGxiYWNrKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciBmb3IgbGlzdGVuaW5nIHRvIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgcmVtb3ZlTWVzc2FnZUV2ZW50TGlzdGVuZXJfKGNhbGxiYWNrKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUG9zdHMgYSBtZXNzYWdlIHRvIHRoZSBpZnJhbWUgd2l0aCB0aGUgZ2l2ZW4gZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0fSBkYXRhXG4gICAqL1xuICBzdGF0aWMgcG9zdE1lc3NhZ2UoZGF0YSkge1xuICAgIGlmICghaWZyYW1lTG9hZGVkKSB7XG4gICAgICBidWZmZXIucHVzaChkYXRhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcG9zdE1lc3NhZ2VEYXRhID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAge1xuICAgICAgICAgICdidXlGbG93QWN0aXZpdHlNb2RlJzogYnV5Rmxvd0FjdGl2aXR5TW9kZSxcbiAgICAgICAgICAnZ29vZ2xlVHJhbnNhY3Rpb25JZCc6IGdvb2dsZVRyYW5zYWN0aW9uSWQsXG4gICAgICAgICAgJ29yaWdpblRpbWVNcyc6IG9yaWdpblRpbWVNcyxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YSk7XG4gICAgcG9zdE1lc3NhZ2VTZXJ2aWNlLnBvc3RNZXNzYWdlKFxuICAgICAgICBwb3N0TWVzc2FnZURhdGEsIFBheUZyYW1lSGVscGVyLmdldElmcmFtZU9yaWdpbl8oKSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYWN0aXZpdHkgbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHshQnV5Rmxvd0FjdGl2aXR5TW9kZX0gbW9kZVxuICAgKi9cbiAgc3RhdGljIHNldEJ1eUZsb3dBY3Rpdml0eU1vZGUobW9kZSkge1xuICAgIGJ1eUZsb3dBY3Rpdml0eU1vZGUgPSBtb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdvb2dsZSB0cmFuc2FjdGlvbiBpZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR4bklkXG4gICAqL1xuICBzdGF0aWMgc2V0R29vZ2xlVHJhbnNhY3Rpb25JZCh0eG5JZCkge1xuICAgIGdvb2dsZVRyYW5zYWN0aW9uSWQgPSB0eG5JZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvcmlnaW5UaW1lTXMuIFRvIGJlIHVzZWQgb25seSBmb3IgdGVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5UaW1lTXNUZW1wXG4gICAqL1xuICBzdGF0aWMgc2V0T3JpZ2luVGltZU1zKG9yaWdpblRpbWVNc1RlbXApIHtcbiAgICBvcmlnaW5UaW1lTXMgPSBvcmlnaW5UaW1lTXNUZW1wO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHBvc3RNZXNzYWdlU2VydmljZSBmb3IgdGVzdGluZy5cbiAgICpcbiAgICogQHBhcmFtIHshUG9zdE1lc3NhZ2VTZXJ2aWNlfSBtZXNzYWdlU2VydmljZVxuICAgKi9cbiAgc3RhdGljIHNldFBvc3RNZXNzYWdlU2VydmljZShtZXNzYWdlU2VydmljZSkge1xuICAgIHBvc3RNZXNzYWdlU2VydmljZSA9IG1lc3NhZ2VTZXJ2aWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgc2luZ2xldG9uIHZhcmlhYmxlcy5cbiAgICovXG4gIHN0YXRpYyByZXNldCgpIHtcbiAgICBpZnJhbWUgPSBudWxsO1xuICAgIGJ1ZmZlci5sZW5ndGggPSAwO1xuICAgIGlmcmFtZUxvYWRlZCA9IGZhbHNlO1xuICAgIGJ1eUZsb3dBY3Rpdml0eU1vZGUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgd2hldGhlciB0aGUgaWZyYW1lIGhhcyBiZWVuIGxvYWRlZCBvciBub3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9hZGVkXG4gICAqL1xuICBzdGF0aWMgc2V0SWZyYW1lTG9hZGVkKGxvYWRlZCkge1xuICAgIGlmcmFtZUxvYWRlZCA9IGxvYWRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbmV2ZXIgdGhlIGlmcmFtZSBpcyBsb2FkZWQuXG4gICAqL1xuICBzdGF0aWMgaWZyYW1lTG9hZGVkKCkge1xuICAgIGlmcmFtZUxvYWRlZCA9IHRydWU7XG4gICAgYnVmZmVyLmZvckVhY2goZnVuY3Rpb24oZGF0YSkge1xuICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2UoZGF0YSk7XG4gICAgfSk7XG4gICAgYnVmZmVyLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXZlbnRzIHRoYXQgaGF2ZSBiZWVuIGJ1ZmZlcmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IU9iamVjdD59XG4gICAqL1xuICBzdGF0aWMgZ2V0QnVmZmVyKCkge1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvKipcbiAgICogTW9ja3MgdGhlIGlmcmFtZSBhcyBhbiBhcmJpdHJhcnkgaHRtbCBlbGVtZW50IGluc3RlYWQgb2YgYWN0dWFsbHkgaW5qZWN0aW5nXG4gICAqIGl0IGZvciB0ZXN0aW5nLlxuICAgKi9cbiAgc3RhdGljIGluamVjdElmcmFtZUZvclRlc3RpbmcoKSB7XG4gICAgUGF5RnJhbWVIZWxwZXIucmVzZXQoKTtcbiAgICBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgUGF5RnJhbWVIZWxwZXIuaWZyYW1lTG9hZGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcGF5ZnJhbWUgb3JpZ2luIGJhc2VkIG9uIHRoZSBlbnZpcm9ubWVudC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGdldElmcmFtZU9yaWdpbl8oKSB7XG4gICAgbGV0IGlmcmFtZVVybCA9ICdodHRwczovL3BheSc7XG4gICAgaWYgKGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5TQU5EQk9YKSB7XG4gICAgICBpZnJhbWVVcmwgKz0gJy5zYW5kYm94JztcbiAgICB9IGVsc2UgaWYgKGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EKSB7XG4gICAgICBpZnJhbWVVcmwgKz0gJy1wcmVwcm9kLnNhbmRib3gnO1xuICAgIH1cbiAgICByZXR1cm4gaWZyYW1lVXJsICsgJy5nb29nbGUuY29tJztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwYXlmcmFtZSBVUkwgYmFzZWQgb24gdGhlIGVudmlyb25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luIFRoZSBvcmlnaW4gdGhhdCBpcyBvcGVuaW5nIHRoZSBwYXlmcmFtZS5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbD19IG1lcmNoYW50SWQgVGhlIG1lcmNoYW50IGlkLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgZ2V0SWZyYW1lVXJsXyhvcmlnaW4sIG1lcmNoYW50SWQpIHtcbiAgICAvLyBUcnVzdGVkUmVzb3VyY2VVcmwgaGVhZGVyIG5lZWRzIHRvIHN0YXJ0IHdpdGggaHR0cHMgb3IgJy8vJy5cbiAgICBjb25zdCBpZnJhbWVVcmwgPSBgaHR0cHM6Ly9wYXkke2Vudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EID9cbiAgICAgICAgICAgICAnLXByZXByb2Quc2FuZGJveCcgOlxuICAgICAgICAgICAgIGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5TQU5EQk9YID8gJy5zYW5kYm94JyA6ICcnfS5nb29nbGUuY29tL2dwL3AvdWkvcGF5ZnJhbWU/b3JpZ2luPSR7b3JpZ2lufSZtaWQ9JXttZXJjaGFudElkfWA7XG4gICAgcmV0dXJuIGlmcmFtZVVybDtcbiAgfVxufVxuXG5leHBvcnQge1xuICBCdXlGbG93QWN0aXZpdHlNb2RlLFxuICBCdXlGbG93TW9kZSxcbiAgUGF5RnJhbWVIZWxwZXIsXG4gIFBvc3RNZXNzYWdlRXZlbnRUeXBlLFxuICBQdWJsaWNFcnJvckNvZGUsXG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEJ1eUZsb3dBY3Rpdml0eU1vZGUsXG4gIEJ1eUZsb3dNb2RlLFxuICBQYXlGcmFtZUhlbHBlcixcbiAgUG9zdE1lc3NhZ2VFdmVudFR5cGUsXG4gIFB1YmxpY0Vycm9yQ29kZSxcbn0gZnJvbSAnLi9wYXlfZnJhbWVfaGVscGVyLmpzJztcbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge1BheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9IGZyb20gJy4vcGF5bWVudHNfY2xpZW50X2RlbGVnYXRlX2ludGVyZmFjZS5qcyc7XG5pbXBvcnQge1BheW1lbnRzUmVxdWVzdERlbGVnYXRlfSBmcm9tICcuL3BheW1lbnRzX3JlcXVlc3RfZGVsZWdhdGUuanMnO1xuaW1wb3J0IHtQYXltZW50c1dlYkFjdGl2aXR5RGVsZWdhdGV9IGZyb20gJy4vcGF5bWVudHNfd2ViX2FjdGl2aXR5X2RlbGVnYXRlLmpzJztcbmltcG9ydCB7VXBpSGFuZGxlcn0gZnJvbSAnLi91cGlfaGFuZGxlci5qcyc7XG5pbXBvcnQge1xuICBhcGlWMkRvZXNNZXJjaGFudFN1cHBvcnRTcGVjaWZpZWRDYXJkVHlwZSxcbiAgY2hyb21lU3VwcG9ydHNQYXltZW50SGFuZGxlcixcbiAgY2hyb21lU3VwcG9ydHNQYXltZW50UmVxdWVzdCxcbiAgZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcyxcbiAgZ2V0VXBpUGF5bWVudE1ldGhvZCxcbiAgdmFsaWRhdGVJc1JlYWR5VG9QYXlSZXF1ZXN0LFxuICB2YWxpZGF0ZVBheW1lbnREYXRhUmVxdWVzdCxcbiAgdmFsaWRhdGVQYXltZW50T3B0aW9ucyxcbiAgdmFsaWRhdGVTZWN1cmVDb250ZXh0LFxufSBmcm9tICcuL3ZhbGlkYXRvci5qcyc7XG5cbmNvbnN0IHtBY3Rpdml0eVBvcnRzfSA9IHJlcXVpcmUoJ3dlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzJyk7XG5cbmltcG9ydCB7Y3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbmNvbnN0IFRSVVNURURfRE9NQUlOUyA9IFtcbiAgJ2FjdGlvbnMuZ29vZ2xlLmNvbScsXG4gICdhbXAtYWN0aW9ucy5zYW5kYm94Lmdvb2dsZS5jb20nLFxuICAnYW1wLWFjdGlvbnMtc3RhZ2luZy5zYW5kYm94Lmdvb2dsZS5jb20nLFxuICAnYW1wLWFjdGlvbnMtYXV0b3B1c2guc2FuZGJveC5nb29nbGUuY29tJyxcbiAgJ3BheW1lbnRzLmRldmVsb3BlcnMuZ29vZ2xlLmNvbScsXG4gICdwYXltZW50cy5nb29nbGUuY29tJyxcbl07XG5cbi8qKlxuICogVGhlIGNsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgR29vZ2xlIFBheW1lbnQgQVBJcy5cbiAqIDxwPlxuICogVGhlIGFzeW5jIHJlZmVycyB0byB0aGUgZmFjdCB0aGF0IHRoaXMgY2xpZW50IHN1cHBvcnRzIHJlZGlyZWN0c1xuICogd2hlbiB1c2luZyB3ZWJhY3RpdnRpZXMuXG4gKiA8cD5cbiAqIElmIHlvdSBhcmUgdXNpbmcgdGhpcyBiZSBzdXJlIHRoYXQgdGhpcyBpcyB3aGF0IHlvdSB3YW50LlxuICogPHA+XG4gKiBJbiBhbG1vc3QgYWxsIGNhc2VzIFBheW1lbnRzQ2xpZW50IGlzIHRoZSBiZXR0ZXIgY2xpZW50IHRvIHVzZSBiZWNhdXNlXG4gKiBpdCBleHBvc2VzIGEgcHJvbWlzZXMgYmFzZWQgYXBpIHdoaWNoIGlzIGVhc2llciB0byBkZWFsIHdpdGguXG4gKiBAZmluYWxcbiAqL1xuY2xhc3MgUGF5bWVudHNBc3luY0NsaWVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXltZW50T3B0aW9uc30gcGF5bWVudE9wdGlvbnNcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhUGF5bWVudERhdGE+KX0gb25QYXltZW50UmVzcG9uc2VcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdXNlSWZyYW1lXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UG9ydHM9fSBhY3Rpdml0aWVzIENhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYSBzaGFyZWRcbiAgICogICBhY3Rpdml0aWVzIG1hbmFnZXIuIEJ5IGRlZmF1bHQsIHRoZSBuZXcgbWFuYWdlciBpcyBjcmVhdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IocGF5bWVudE9wdGlvbnMsIG9uUGF5bWVudFJlc3BvbnNlLCB1c2VJZnJhbWUsIGFjdGl2aXRpZXMpIHtcbiAgICB0aGlzLm9uUGF5bWVudFJlc3BvbnNlXyA9IG9uUGF5bWVudFJlc3BvbnNlO1xuXG4gICAgdmFsaWRhdGVQYXltZW50T3B0aW9ucyhwYXltZW50T3B0aW9ucyk7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5sb2FkUGF5bWVudERhdGFBcGlTdGFydFRpbWVNc18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZW52aXJvbm1lbnRfID1cbiAgICAgIHBheW1lbnRPcHRpb25zLmVudmlyb25tZW50IHx8IENvbnN0YW50cy5FbnZpcm9ubWVudC5URVNUO1xuICAgIGlmICghUGF5bWVudHNBc3luY0NsaWVudC5nb29nbGVUcmFuc2FjdGlvbklkXykge1xuICAgICAgUGF5bWVudHNBc3luY0NsaWVudC5nb29nbGVUcmFuc2FjdGlvbklkXyA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodGhpcy5pc0luVHJ1c3RlZERvbWFpbl8oKSAmJlxuICAgICAgcGF5bWVudE9wdGlvbnNbJ2knXSAmJlxuICAgICAgcGF5bWVudE9wdGlvbnNbJ2knXVsnZ29vZ2xlVHJhbnNhY3Rpb25JZCddXG4gICAgICAgID8gcGF5bWVudE9wdGlvbnNbJ2knXVsnZ29vZ2xlVHJhbnNhY3Rpb25JZCddXG4gICAgICAgIDogY3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZCh0aGlzLmVudmlyb25tZW50XykpO1xuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQYXltZW50T3B0aW9uc30gKi9cbiAgICB0aGlzLnBheW1lbnRPcHRpb25zXyA9IHBheW1lbnRPcHRpb25zO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVBheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9ICovXG4gICAgdGhpcy53ZWJBY3Rpdml0eURlbGVnYXRlXyA9IG5ldyBQYXltZW50c1dlYkFjdGl2aXR5RGVsZWdhdGUoXG4gICAgICB0aGlzLmVudmlyb25tZW50XyxcbiAgICAgIFBheW1lbnRzQXN5bmNDbGllbnQuZ29vZ2xlVHJhbnNhY3Rpb25JZF8sXG4gICAgICB1c2VJZnJhbWUsXG4gICAgICBhY3Rpdml0aWVzLFxuICAgICAgcGF5bWVudE9wdGlvbnNbJ2knXSAmJiBwYXltZW50T3B0aW9uc1snaSddWydyZWRpcmVjdEtleSddXG4gICAgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuYnV5Rmxvd01vZGVfID0gQnV5Rmxvd01vZGUuUEFZX1dJVEhfR09PR0xFO1xuXG4gICAgY29uc3QgcGF5bWVudFJlcXVlc3RTdXBwb3J0ZWQgPSBjaHJvbWVTdXBwb3J0c1BheW1lbnRSZXF1ZXN0KCk7XG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoZSB0ZW1wb3JhcnkgaGFjayB0aGF0IGRpc2FibGUgcGF5bWVudHNcbiAgICAvLyByZXF1ZXN0IGZvciBpbmxpbmUgZmxvdy5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHs/UGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZX0gKi9cbiAgICB0aGlzLmRlbGVnYXRlXyA9XG4gICAgICBwYXltZW50UmVxdWVzdFN1cHBvcnRlZCAmJiAhdXNlSWZyYW1lXG4gICAgICAgID8gbmV3IFBheW1lbnRzUmVxdWVzdERlbGVnYXRlKHRoaXMuZW52aXJvbm1lbnRfKVxuICAgICAgICA6IHRoaXMud2ViQWN0aXZpdHlEZWxlZ2F0ZV87XG5cbiAgICB0aGlzLnVwaUhhbmRsZXJfID0gbmV3IFVwaUhhbmRsZXIoKTtcblxuICAgIHRoaXMud2ViQWN0aXZpdHlEZWxlZ2F0ZV8ub25SZXN1bHQodGhpcy5vblJlc3VsdF8uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5kZWxlZ2F0ZV8ub25SZXN1bHQodGhpcy5vblJlc3VsdF8uYmluZCh0aGlzKSk7XG5cbiAgICAvLyBMb2FkIFBheUZyYW1lSGVscGVyIHVwb24gY2xpZW50IGNvbnN0cnVjdGlvbi5cbiAgICBQYXlGcmFtZUhlbHBlci5sb2FkKCk7XG5cbiAgICAvLyBJZiB3ZWIgZGVsZWdhdGUgaXMgdXNlZCBhbnl3YXkgdGhlbiB0aGlzIGlzIG92ZXJyaWRkZW4gaW4gdGhlIHdlYlxuICAgIC8vIGFjdGl2aXR5IGRlbGVnYXRlIHdoZW4gbG9hZCBwYXltZW50IGRhdGEgaXMgY2FsbGVkLlxuICAgIGlmIChjaHJvbWVTdXBwb3J0c1BheW1lbnRIYW5kbGVyKCkpIHtcbiAgICAgIFBheUZyYW1lSGVscGVyLnNldEJ1eUZsb3dBY3Rpdml0eU1vZGUoXG4gICAgICAgIEJ1eUZsb3dBY3Rpdml0eU1vZGUuUEFZTUVOVF9IQU5ETEVSXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAocGF5bWVudFJlcXVlc3RTdXBwb3J0ZWQpIHtcbiAgICAgIFBheUZyYW1lSGVscGVyLnNldEJ1eUZsb3dBY3Rpdml0eU1vZGUoQnV5Rmxvd0FjdGl2aXR5TW9kZS5BTkRST0lEX05BVElWRSk7XG4gICAgfVxuXG4gICAgUGF5RnJhbWVIZWxwZXIuc2V0R29vZ2xlVHJhbnNhY3Rpb25JZChcbiAgICAgIFBheW1lbnRzQXN5bmNDbGllbnQuZ29vZ2xlVHJhbnNhY3Rpb25JZF9cbiAgICApO1xuICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICdldmVudFR5cGUnOiBQb3N0TWVzc2FnZUV2ZW50VHlwZS5MT0dfSU5JVElBTElaRV9QQVlNRU5UU19DTElFTlQsXG4gICAgICAnY2xpZW50TGF0ZW5jeVN0YXJ0TXMnOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+XG4gICAgICB0aGlzLmhhbmRsZU1lc3NhZ2VFdmVudF8oZXZlbnQpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGNhbiBtYWtlIHBheW1lbnRzIHVzaW5nIHRoZSBQYXltZW50IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gVGhlIHByb21pc2Ugd2lsbCBjb250YWluIHRoZSBib29sZWFuIHJlc3VsdCBhbmQgZXJyb3JcbiAgICogICAgIG1lc3NhZ2Ugd2hlbiBwb3NzaWJsZS5cbiAgICovXG4gIGlzUmVhZHlUb1BheShpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gICAgLy8gTWVyZ2Ugd2l0aCBwYXltZW50T3B0aW9ucywgcHJlZmVycmluZyB2YWx1ZXMgZnJvbSBpc1JlYWR5VG9QYXlSZXF1ZXN0XG4gICAgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QpIHtcbiAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICB7fSxcbiAgICAgICAgdGhpcy5wYXltZW50T3B0aW9uc18sXG4gICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3RcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHN0YXJ0VGltZU1zID0gRGF0ZS5ub3coKTtcbiAgICAvKiogQHR5cGUgez9zdHJpbmd9ICovXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgIHZhbGlkYXRlU2VjdXJlQ29udGV4dCgpIHx8XG4gICAgICB2YWxpZGF0ZUlzUmVhZHlUb1BheVJlcXVlc3QoaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgUGF5bWVudHNBc3luY0NsaWVudC5sb2dEZXZFcnJvclRvQ29uc29sZV8oJ2lzUmVhZHlUb1BheScsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX0lTX1JFQURZX1RPX1BBWV9BUEksXG4gICAgICAgICAgJ2Vycm9yJzogUHVibGljRXJyb3JDb2RlLkRFVkVMT1BFUl9FUlJPUixcbiAgICAgICAgfSk7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgJ3N0YXR1c0NvZGUnOiBDb25zdGFudHMuUmVzcG9uc2VTdGF0dXMuREVWRUxPUEVSX0VSUk9SLFxuICAgICAgICAgICdzdGF0dXNNZXNzYWdlJzogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUmVhZHlUb1BheVByb21pc2UgPSB0aGlzLmlzUmVhZHlUb1BheV8oaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG5cbiAgICBpc1JlYWR5VG9QYXlQcm9taXNlLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICdldmVudFR5cGUnOiBQb3N0TWVzc2FnZUV2ZW50VHlwZS5MT0dfSVNfUkVBRFlfVE9fUEFZX0FQSSxcbiAgICAgICAgJ2NsaWVudExhdGVuY3lTdGFydE1zJzogc3RhcnRUaW1lTXMsXG4gICAgICAgICdpc1JlYWR5VG9QYXlBcGlSZXNwb25zZSc6IHJlc3BvbnNlLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzUmVhZHlUb1BheVByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQWN0dWFsIGltcGxlbWVudGF0aW9uIG9mIGlzUmVhZHlUb1BheSBpbiBhIHByaXZhdGUgbWV0aG9kIHNvIHRoYXRcbiAgICogd2UgY2FuIGFkZCBjYWxsYmFja3MgdG8gdGhlIHByb21pc2UgdG8gbWVhc3VyZSBsYXRlbmNpZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R9IGlzUmVhZHlUb1BheVJlcXVlc3RcbiAgICogQHJldHVybiB7IVByb21pc2V9IFRoZSBwcm9taXNlIHdpbGwgY29udGFpbiB0aGUgYm9vbGVhbiByZXN1bHQgYW5kIGVycm9yXG4gICAqICAgICBtZXNzYWdlIHdoZW4gcG9zc2libGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc1JlYWR5VG9QYXlfKGlzUmVhZHlUb1BheVJlcXVlc3QpIHtcbiAgICBpZiAodGhpcy51cGlIYW5kbGVyXy5pc1VwaVJlcXVlc3QoaXNSZWFkeVRvUGF5UmVxdWVzdCkpIHtcbiAgICAgIHJldHVybiB0aGlzLnVwaUhhbmRsZXJfLmlzUmVhZHlUb1BheShpc1JlYWR5VG9QYXlSZXF1ZXN0KTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY2hyb21lU3VwcG9ydHNQYXltZW50UmVxdWVzdCgpICYmXG4gICAgICAhaXNOYXRpdmVEaXNhYmxlZEluUmVxdWVzdChpc1JlYWR5VG9QYXlSZXF1ZXN0KVxuICAgICkge1xuICAgICAgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzUmVhZHlUb1BheUFwaVYyRm9yQ2hyb21lUGF5bWVudFJlcXVlc3RfKFxuICAgICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3RcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGFwaVZlcnNpb24gMSBicmFuY2guXG4gICAgICAgIC8vIElmIHRoZSBtZXJjaGFudCBzdXBwb3J0cyBvbmx5IFRva2VuaXplZCBjYXJkcyB0aGVuIGp1c3QgcmVseSBvblxuICAgICAgICAvLyBkZWxlZ2F0ZSB0byBnaXZlIHVzIHRoZSByZXN1bHQuXG4gICAgICAgIC8vIFRoaXMgd2lsbCBuZWVkIHRvIGNoYW5nZSBvbmNlIGIvNzg1MTkxODggaXMgZml4ZWQuXG4gICAgICAgIGNvbnN0IHdlYlByb21pc2UgPSB0aGlzLndlYkFjdGl2aXR5RGVsZWdhdGVfLmlzUmVhZHlUb1BheShcbiAgICAgICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5hdGl2ZVByb21pc2UgPSB0aGlzLmRlbGVnYXRlXy5pc1JlYWR5VG9QYXkoaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBkb2VzTWVyY2hhbnRTdXBwb3J0T25seVRva2VuaXplZENhcmRzKGlzUmVhZHlUb1BheVJlcXVlc3QpICYmXG4gICAgICAgICAgIWNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gbmF0aXZlUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm4gd2ViSXNSZWFkeVRvUGF5IG9ubHkgaWYgZGVsZWdhdGVJc1JlYWR5VG9QYXkgaGFzIGJlZW5cbiAgICAgICAgLy8gZXhlY3V0ZWQuXG4gICAgICAgIHJldHVybiBuYXRpdmVQcm9taXNlLnRoZW4oKCkgPT4gd2ViUHJvbWlzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHdlYlByb21pc2UgPSB0aGlzLndlYkFjdGl2aXR5RGVsZWdhdGVfLmlzUmVhZHlUb1BheShcbiAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3RcbiAgICApO1xuICAgIHJldHVybiB3ZWJQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBpcyByZWFkeSB0byBwYXkgZm9yIGFwaSB2Mi5cbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gVGhlIHByb21pc2Ugd2lsbCBjb250YWluIHRoZSBib29sZWFuIHJlc3VsdCBhbmQgZXJyb3JcbiAgICogICAgIG1lc3NhZ2Ugd2hlbiBwb3NzaWJsZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzUmVhZHlUb1BheUFwaVYyRm9yQ2hyb21lUGF5bWVudFJlcXVlc3RfKGlzUmVhZHlUb1BheVJlcXVlc3QpIHtcbiAgICBsZXQgZGVmYXVsdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoeydyZXN1bHQnOiBmYWxzZX0pO1xuICAgIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmV4aXN0aW5nUGF5bWVudE1ldGhvZFJlcXVpcmVkKSB7XG4gICAgICBkZWZhdWx0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICdyZXN1bHQnOiBmYWxzZSxcbiAgICAgICAgJ3BheW1lbnRNZXRob2RQcmVzZW50JzogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgbmF0aXZlUHJvbWlzZSA9IGRlZmF1bHRQcm9taXNlO1xuICAgIGlmIChcbiAgICAgIGFwaVYyRG9lc01lcmNoYW50U3VwcG9ydFNwZWNpZmllZENhcmRUeXBlKFxuICAgICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LFxuICAgICAgICBDb25zdGFudHMuQXV0aE1ldGhvZC5DUllQVE9HUkFNXzNEU1xuICAgICAgKVxuICAgICkge1xuICAgICAgLy8gSWYgdGhlIG1lcmNoYW50IHN1cHBvcnRzIHRva2VuaXplZCBjYXJkcy5cbiAgICAgIC8vIE1ha2UgYSBzZXBhcmF0ZSBjYWxsIHRvIGdtcyBjb3JlIHRvIGNoZWNrIGlmIHRoZSB1c2VyIGlzUmVhZHlUb1BheVxuICAgICAgLy8gd2l0aCBqdXN0IHRva2VuaXplZCBjYXJkcy4gV2UgY2FuJ3QgcGFzcyBpbiBQQU5fT05MWSBoZXJlXG4gICAgICAvLyBiZWNhdXNlIGdtcyBjb3JlIGFsd2F5cyByZXR1cm5zIHRydWUgZm9yIFBBTl9PTkxZLlxuICAgICAgLy8gTGVhdmUgb3RoZXIgcGF5bWVudCBtZXRob2RzIGFzIGlzLlxuICAgICAgY29uc3QgbmF0aXZlUnRwUmVxdWVzdCAvKiogQHR5cGUgeyFJc1JlYWR5VG9QYXlSZXF1ZXN0fSAqLyA9IEpTT04ucGFyc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGlzUmVhZHlUb1BheVJlcXVlc3QpXG4gICAgICApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYXRpdmVSdHBSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmF0aXZlUnRwUmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHNbaV0udHlwZSA9PVxuICAgICAgICAgIENvbnN0YW50cy5QYXltZW50TWV0aG9kLkNBUkRcbiAgICAgICAgKSB7XG4gICAgICAgICAgbmF0aXZlUnRwUmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHNbaV0ucGFyYW1ldGVyc1tcbiAgICAgICAgICAgICdhbGxvd2VkQXV0aE1ldGhvZHMnXG4gICAgICAgICAgXSA9IFtDb25zdGFudHMuQXV0aE1ldGhvZC5DUllQVE9HUkFNXzNEU107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmF0aXZlUHJvbWlzZSA9IHRoaXMuZGVsZWdhdGVfLmlzUmVhZHlUb1BheShuYXRpdmVSdHBSZXF1ZXN0KTtcbiAgICB9XG5cbiAgICBsZXQgd2ViUHJvbWlzZSA9IGRlZmF1bHRQcm9taXNlO1xuICAgIGlmIChcbiAgICAgIGFwaVYyRG9lc01lcmNoYW50U3VwcG9ydFNwZWNpZmllZENhcmRUeXBlKFxuICAgICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LFxuICAgICAgICBDb25zdGFudHMuQXV0aE1ldGhvZC5QQU5fT05MWVxuICAgICAgKVxuICAgICkge1xuICAgICAgd2ViUHJvbWlzZSA9IHRoaXMud2ViQWN0aXZpdHlEZWxlZ2F0ZV8uaXNSZWFkeVRvUGF5KGlzUmVhZHlUb1BheVJlcXVlc3QpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzZXNzaW9uIHN0b3JhZ2Ugd2l0aCBwYXltZW50IGhhbmRsZXIgY2FuTWFrZVBheW1lbnQgcmVzdWx0IGJ1dFxuICAgIC8vIHJlbHkgb24gd2ViIGRlbGVnYXRlIGZvciBhY3R1YWwgcmVzcG9uc2VcbiAgICBpZiAoY2hyb21lU3VwcG9ydHNQYXltZW50SGFuZGxlcigpKSB7XG4gICAgICByZXR1cm4gbmF0aXZlUHJvbWlzZS50aGVuKCgpID0+IHdlYlByb21pc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9taXNlLnRoZW4oKG5hdGl2ZVJlc3VsdCkgPT4ge1xuICAgICAgaWYgKChuYXRpdmVSZXN1bHQgJiYgbmF0aXZlUmVzdWx0WydyZXN1bHQnXSkgPT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gbmF0aXZlUmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdlYlByb21pc2U7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJlZmV0Y2ggcGF5bWVudERhdGEgdG8gc3BlZWQgdXAgbG9hZFBheW1lbnREYXRhIGNhbGwuIE5vdGUgdGhlIHByb3ZpZGVkXG4gICAqIHBheW1lbnREYXRhUmVxdWVzdCBzaG91bGQgZXhhY3RseSBiZSB0aGUgc2FtZSBhcyBwcm92aWRlZCBpblxuICAgKiBsb2FkUGF5bWVudERhdGEgdG8gbWFrZSB0aGUgbG9hZFBheW1lbnREYXRhIGNhbGwgZmFzdCBzaW5jZSBjdXJyZW50XG4gICAqIHdlYiBmbG93IHByZWZldGNoaW5nIGlzIGJhc2VkIG9uIHRoZSBmdWxsIHJlcXVlc3QgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3QgUHJvdmlkZXMgbmVjZXNzYXJ5XG4gICAqICAgICBpbmZvcm1hdGlvbiB0byBzdXBwb3J0IGEgcGF5bWVudC5cbiAgICovXG4gIHByZWZldGNoUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgLyoqIEB0eXBlIHs/c3RyaW5nfSAqL1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICB2YWxpZGF0ZVNlY3VyZUNvbnRleHQoKSB8fCB2YWxpZGF0ZVBheW1lbnREYXRhUmVxdWVzdChwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgIFBheW1lbnRzQXN5bmNDbGllbnQubG9nRGV2RXJyb3JUb0NvbnNvbGVfKFxuICAgICAgICAncHJlZmV0Y2hQYXltZW50RGF0YScsXG4gICAgICAgIGVycm9yTWVzc2FnZVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hc3NpZ25JbnRlcm5hbFBhcmFtc18ocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICBpZiAoXG4gICAgICBjaHJvbWVTdXBwb3J0c1BheW1lbnRSZXF1ZXN0KCkgJiZcbiAgICAgICFpc05hdGl2ZURpc2FibGVkSW5SZXF1ZXN0KHBheW1lbnREYXRhUmVxdWVzdClcbiAgICApIHtcbiAgICAgIHRoaXMuZGVsZWdhdGVfLnByZWZldGNoUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIG5vbiBjaHJvbWUgc3VwcG9ydHMgYWx3YXlzIHVzZSB0aGUgaG9zdGluZyBwYWdlLlxuICAgICAgdGhpcy53ZWJBY3Rpdml0eURlbGVnYXRlXy5wcmVmZXRjaFBheW1lbnREYXRhKHBheW1lbnREYXRhUmVxdWVzdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgUGF5bWVudERhdGEsIHdoaWNoIGNvbnRhaW5zIG5lY2Vzc2FyeSBpbmZvbWFydGlvbiB0byBjb21wbGV0ZSBhXG4gICAqIHBheW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0IFByb3ZpZGVzIG5lY2Vzc2FyeVxuICAgKiAgICAgaW5mb3JtYXRpb24gdG8gc3VwcG9ydCBhIHBheW1lbnQuXG4gICAqL1xuICBsb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19CVVRUT05fQ0xJQ0ssXG4gICAgfSk7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgIHZhbGlkYXRlU2VjdXJlQ29udGV4dCgpIHx8IHZhbGlkYXRlUGF5bWVudERhdGFSZXF1ZXN0KHBheW1lbnREYXRhUmVxdWVzdCk7XG4gICAgdGhpcy5idXlGbG93TW9kZV8gPVxuICAgICAgcGF5bWVudERhdGFSZXF1ZXN0ICYmIHBheW1lbnREYXRhUmVxdWVzdC5zd2dcbiAgICAgICAgPyBCdXlGbG93TW9kZS5TVUJTQ1JJQkVfV0lUSF9HT09HTEVcbiAgICAgICAgOiBCdXlGbG93TW9kZS5QQVlfV0lUSF9HT09HTEU7XG4gICAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgICAgdGhpcy5vblBheW1lbnRSZXNwb25zZV8oXG4gICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAnZXZlbnRUeXBlJzogUG9zdE1lc3NhZ2VFdmVudFR5cGUuTE9HX0xPQURfUEFZTUVOVF9EQVRBX0FQSSxcbiAgICAgICAgICAgICdlcnJvcic6IFB1YmxpY0Vycm9yQ29kZS5ERVZFTE9QRVJfRVJST1IsXG4gICAgICAgICAgICAnYnV5Rmxvd01vZGUnOiB0aGlzLmJ1eUZsb3dNb2RlXyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBQYXltZW50c0FzeW5jQ2xpZW50LmxvZ0RldkVycm9yVG9Db25zb2xlXyhcbiAgICAgICAgICAgICdsb2FkUGF5bWVudERhdGEnLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgJ3N0YXR1c0NvZGUnOiBDb25zdGFudHMuUmVzcG9uc2VTdGF0dXMuREVWRUxPUEVSX0VSUk9SLFxuICAgICAgICAgICAgJ3N0YXR1c01lc3NhZ2UnOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZXIgZm9yIFVQSSBQYXltZW50TWV0aG9kXG4gICAgLy8gQ3VycmVudGx5IHdlIGRvbid0IHN1cHBvcnQgVVBJIGFsb25nIHdpdGggb3RoZXIgcGF5bWVudCBtZXRob2RzLCBpZlxuICAgIC8vIFVQSSBpcyBpbiBwYXltZW50IG1ldGhvZHMgdGhlbiB3ZSBhc3N1bWUgaXQgaXMgVVBJIG9ubHkuXG4gICAgY29uc3QgdXBpUGF5bWVudE1ldGhvZCA9IGdldFVwaVBheW1lbnRNZXRob2QocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICBpZiAodXBpUGF5bWVudE1ldGhvZCkge1xuICAgICAgdGhpcy51cGlIYW5kbGVyXy5sb2FkUGF5bWVudERhdGEoXG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdCxcbiAgICAgICAgdXBpUGF5bWVudE1ldGhvZCxcbiAgICAgICAgdGhpcy5vblJlc3VsdF8uYmluZCh0aGlzKVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxvYWRQYXltZW50RGF0YUFwaVN0YXJ0VGltZU1zXyA9IERhdGUubm93KCk7XG4gICAgdGhpcy5hc3NpZ25JbnRlcm5hbFBhcmFtc18ocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICAvLyBXZSB3YW50IHRvIGZhbGwgYmFjayB0byB0aGUgd2ViIGRlbGVnYXRlIGlmIHBheW1lbnQgaGFuZGxlciBpcyBzdXBwb3J0ZWRcbiAgICAvLyBhbmQgaXNSZWFkeVRvUGF5IGJpdCBpcyBub3QgZXhwbGljaXRseSBzZXQgdG8gdHJ1ZSAoZmFsbGJhY2sgdG8gd2ViIGlmXG4gICAgLy8gaXNSZWFkeVRvUGF5IHdhc24ndCBjYWxsZWQgZm9yIFBIKVxuICAgIGlmIChcbiAgICAgIGNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSB8fFxuICAgICAgaXNOYXRpdmVEaXNhYmxlZEluUmVxdWVzdChwYXltZW50RGF0YVJlcXVlc3QpXG4gICAgKSB7XG4gICAgICB0aGlzLndlYkFjdGl2aXR5RGVsZWdhdGVfLmxvYWRQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlbGVnYXRlXy5sb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRldmVsb3BlciBlcnJvciB0byBjb25zb2xlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXBpTmFtZVxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGVycm9yTWVzc2FnZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGxvZ0RldkVycm9yVG9Db25zb2xlXyhhcGlOYW1lLCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmVycm9yKCdERVZFTE9QRVJfRVJST1IgaW4gJyArIGFwaU5hbWUgKyAnIDogJyArIGVycm9yTWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgPGRpdj4gZWxlbWVudCBjb250YWluaW5nIGEgR29vZ2xlIFBheSBwYXltZW50IGJ1dHRvbi5cbiAgICpcbiAgICogQHBhcmFtIHshQnV0dG9uT3B0aW9ucz19IG9wdGlvbnNcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBjcmVhdGVCdXR0b24ob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYnV0dG9uID0gbnVsbDtcbiAgICAvLyBPbmx5IGxvZyBpZiBidXR0b24gd2FzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgY29uc3Qgc3RhcnRUaW1lTXMgPSBEYXRlLm5vdygpO1xuICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICdldmVudFR5cGUnOiBQb3N0TWVzc2FnZUV2ZW50VHlwZS5MT0dfUkVOREVSX0JVVFRPTixcbiAgICAgICdjbGllbnRMYXRlbmN5U3RhcnRNcyc6IHN0YXJ0VGltZU1zLFxuICAgIH0pO1xuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnR9IGUgcG9zdE1lc3NhZ2UgZXZlbnQgZnJvbSB0aGUgQU1QIHBhZ2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVNZXNzYWdlRXZlbnRfKGUpIHtcbiAgICBpZiAodGhpcy5pc0luVHJ1c3RlZERvbWFpbl8oKSkge1xuICAgICAgLy8gT25seSBoYW5kbGVzIHRoZSBldmVudCByaWdodCBub3cgaWYgbG9hZGVkIGluIHRydXN0ZWQgZG9tYWluLlxuICAgICAgaWYgKGUuZGF0YVsnbmFtZSddID09PSAnbG9nUGF5bWVudERhdGEnKSB7XG4gICAgICAgIFBheUZyYW1lSGVscGVyLnBvc3RNZXNzYWdlKGUuZGF0YVsnZGF0YSddKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzSW5UcnVzdGVkRG9tYWluXygpIHtcbiAgICByZXR1cm4gVFJVU1RFRF9ET01BSU5TLmluZGV4T2Yod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSAhPSAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBsb2FkIHBheW1lbnQgZGF0YSByZXN1bHQgaXMgcmV0dXJuZWQuIFRoaXMgdHJpZ2dlcnMgdGhlIHBheW1lbnRcbiAgICogcmVzcG9uc2UgY2FsbGJhY2sgcGFzc2VkIHRvIHRoZSBjbGllbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblJlc3VsdF8ocmVzcG9uc2UpIHtcbiAgICByZXNwb25zZVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBQYXlGcmFtZUhlbHBlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19MT0FEX1BBWU1FTlRfREFUQV9BUEksXG4gICAgICAgICAgJ2NsaWVudExhdGVuY3lTdGFydE1zJzogdGhpcy5sb2FkUGF5bWVudERhdGFBcGlTdGFydFRpbWVNc18sXG4gICAgICAgICAgJ2J1eUZsb3dNb2RlJzogdGhpcy5idXlGbG93TW9kZV8sXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHRbJ2Vycm9yQ29kZSddKSB7XG4gICAgICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19MT0FEX1BBWU1FTlRfREFUQV9BUEksXG4gICAgICAgICAgICAnZXJyb3InOiAvKiogQHR5cGUgeyFQdWJsaWNFcnJvckNvZGV9ICovIChyZXN1bHRbJ2Vycm9yQ29kZSddKSxcbiAgICAgICAgICAgICdidXlGbG93TW9kZSc6IHRoaXMuYnV5Rmxvd01vZGVfLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHVzZXIgY2xvc2VzIHdpbmRvdyB3ZSBkb24ndCBnZXQgYSBlcnJvciBjb2RlXG4gICAgICAgICAgUGF5RnJhbWVIZWxwZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgJ2V2ZW50VHlwZSc6IFBvc3RNZXNzYWdlRXZlbnRUeXBlLkxPR19MT0FEX1BBWU1FTlRfREFUQV9BUEksXG4gICAgICAgICAgICAnZXJyb3InOiBQdWJsaWNFcnJvckNvZGUuQlVZRVJfQ0FOQ0VMLFxuICAgICAgICAgICAgJ2J1eUZsb3dNb2RlJzogdGhpcy5idXlGbG93TW9kZV8sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIHRoaXMub25QYXltZW50UmVzcG9uc2VfKHJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdFxuICAgKiBAcmV0dXJuIHshUGF5bWVudERhdGFSZXF1ZXN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXNzaWduSW50ZXJuYWxQYXJhbXNfKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIGNvbnN0IGludGVybmFsUGFyYW0gPSB7XG4gICAgICAnc3RhcnRUaW1lTXMnOiBEYXRlLm5vdygpLFxuICAgICAgJ2dvb2dsZVRyYW5zYWN0aW9uSWQnOiBQYXltZW50c0FzeW5jQ2xpZW50Lmdvb2dsZVRyYW5zYWN0aW9uSWRfLFxuICAgIH07XG4gICAgcGF5bWVudERhdGFSZXF1ZXN0WydpJ10gPSBwYXltZW50RGF0YVJlcXVlc3RbJ2knXVxuICAgICAgPyBPYmplY3QuYXNzaWduKGludGVybmFsUGFyYW0sIHBheW1lbnREYXRhUmVxdWVzdFsnaSddKVxuICAgICAgOiBpbnRlcm5hbFBhcmFtO1xuICAgIHJldHVybiBwYXltZW50RGF0YVJlcXVlc3Q7XG4gIH1cbn1cblxuLyoqIEB0eXBlIHs/c3RyaW5nfSAqL1xuUGF5bWVudHNBc3luY0NsaWVudC5nb29nbGVUcmFuc2FjdGlvbklkXztcblxuLyoqXG4gKiBXaGV0aGVyIHRoZSByZXF1ZXN0IHNwZWNpZmllcyB0aGF0IHRoZSBuYXRpdmUgc3VwcG9ydCBoYXMgdG8gYmUgZGlzYWJsZWQuXG4gKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc05hdGl2ZURpc2FibGVkSW5SZXF1ZXN0KHJlcXVlc3QpIHtcbiAgcmV0dXJuIChyZXF1ZXN0WydpJ10gJiYgcmVxdWVzdFsnaSddWydkaXNhYmxlTmF0aXZlJ10pID09PSB0cnVlO1xufVxuXG5leHBvcnQge1BheW1lbnRzQXN5bmNDbGllbnR9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIHdoaWNoIGNhcHR1cmVzIHdoYXQgd2UgbmVlZCB0byBzdGFydCB1cCBidXlmbG93IGFjcm9zcyBzdXJmYWNlcy5cbiAqIEBpbnRlcmZhY2VcbiAqL1xuY2xhc3MgUGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGNhbiBtYWtlIHBheW1lbnRzIHVzaW5nIHRoZSBQYXltZW50IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gVGhlIHByb21pc2Ugd2lsbCBjb250YWluIHRoZSBib29sZWFuIHJlc3VsdCBhbmQgZXJyb3JcbiAgICogICAgIG1lc3NhZ2Ugd2hlbiBwb3NzaWJsZS5cbiAgICovXG4gIGlzUmVhZHlUb1BheShpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBQcmVmZXRjaCBwYXltZW50RGF0YSB0byBzcGVlZCB1cCBsb2FkUGF5bWVudERhdGEgY2FsbC4gTm90ZSB0aGUgcHJvdmlkZWRcbiAgICogcGF5bWVudERhdGFSZXF1ZXN0IHNob3VsZCBleGFjdGx5IGJlIHRoZSBzYW1lIGFzIHByb3ZpZGVkIGluXG4gICAqIGxvYWRQYXltZW50RGF0YSB0byBtYWtlIHRoZSBsb2FkUGF5bWVudERhdGEgY2FsbCBmYXN0LlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdCBQcm92aWRlcyBuZWNlc3NhcnlcbiAgICogICAgIGluZm9ybWF0aW9uIHRvIHN1cHBvcnQgYSBwYXltZW50LlxuICAgKi9cbiAgcHJlZmV0Y2hQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpIHt9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgUGF5bWVudERhdGEsIHdoaWNoIGNvbnRhaW5zIG5lY2Vzc2FyeSBpbmZvbWFydGlvbiB0byBjb21wbGV0ZSBhXG4gICAqIHBheW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0IFByb3ZpZGVzIG5lY2Vzc2FyeVxuICAgKiAgICAgaW5mb3JtYXRpb24gdG8gc3VwcG9ydCBhIHBheW1lbnQuXG4gICAqL1xuICBsb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCFQYXltZW50RGF0YT4pfSBjYWxsYmFja1xuICAgKi9cbiAgb25SZXN1bHQoY2FsbGJhY2spIHt9XG59XG5cbmV4cG9ydCB7UGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZX07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IERlc2NyaXB0aW9uIG9mIHRoaXMgZmlsZS5cbiAqL1xuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7UGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZX0gZnJvbSAnLi9wYXltZW50c19jbGllbnRfZGVsZWdhdGVfaW50ZXJmYWNlLmpzJztcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBQYXltZW50c0NsaWVudERlbGVnYXRlSW50ZXJmYWNlIHRoYXQgbGV2ZXJhZ2VzIHBheW1lbnRcbiAqIHJlcXVlc3QuXG4gKiBAaW1wbGVtZW50cyB7UGF5bWVudHNDbGllbnREZWxlZ2F0ZUludGVyZmFjZX1cbiAqL1xuY2xhc3MgUGF5bWVudHNSZXF1ZXN0RGVsZWdhdGUge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudmlyb25tZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbnZpcm9ubWVudCkge1xuICAgIHRoaXMuZW52aXJvbm1lbnRfID0gZW52aXJvbm1lbnQ7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbighUHJvbWlzZTwhUGF5bWVudERhdGE+KX0gKi9cbiAgICB0aGlzLmNhbGxiYWNrXyA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uUmVzdWx0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNSZWFkeVRvUGF5KGlzUmVhZHlUb1BheVJlcXVlc3QpIHtcbiAgICAvKiogQHR5cGV7IVBheW1lbnRSZXF1ZXN0fSAqL1xuICAgIGNvbnN0IHBheW1lbnRSZXF1ZXN0ID0gdGhpcy5jcmVhdGVQYXltZW50UmVxdWVzdF8oaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHBheW1lbnRSZXF1ZXN0LmNhbk1ha2VQYXltZW50KClcbiAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICAgICAgQ29uc3RhbnRzLklTX1JFQURZX1RPX1BBWV9SRVNVTFRfS0VZLCByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHsncmVzdWx0JzogcmVzdWx0fTtcbiAgICAgICAgICAgIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmFwaVZlcnNpb24gPj0gMiAmJlxuICAgICAgICAgICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuZXhpc3RpbmdQYXltZW50TWV0aG9kUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgLy8gRm9yIGFwaVZlcnNpb24gMiwgd2UgYWx3YXlzIHVzZSBuYXRpdmUgdG8gb25seSBjaGVjayBmb3JcbiAgICAgICAgICAgICAgLy8gdG9rZW5pemVkIGNhcmRzLlxuICAgICAgICAgICAgICAvLyBGb3IgdG9rZW5pemVkIGNhcmRzIG5hdGl2ZSBhbHdheXMgZG9lcyBhIHByZXNlbmNlIGNoZWNrIHNvXG4gICAgICAgICAgICAgIC8vIHdlIGNhbiBzYXkgdGhhdCBpZiBjYW5NYWtlUGF5bWVudCBpcyB0cnVlIGZvciBuYXRpdmUgZm9yXG4gICAgICAgICAgICAgIC8vIHRva2VuaXplZENhcmRzIHRoZW4gdGhlIHVzZXIgaGFzIGEgcGF5bWVudCBtZXRob2Qgd2hpY2ggaXNcbiAgICAgICAgICAgICAgLy8gcHJlc2VudC5cbiAgICAgICAgICAgICAgcmVzcG9uc2VbJ3BheW1lbnRNZXRob2RQcmVzZW50J10gPSByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcbiAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzLklTX1JFQURZX1RPX1BBWV9SRVNVTFRfS0VZKSkge1xuICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAncmVzdWx0Jzogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zdGFudHMuSVNfUkVBRFlfVE9fUEFZX1JFU1VMVF9LRVkpID09ICd0cnVlJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoeydyZXN1bHQnOiBmYWxzZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBwcmVmZXRjaFBheW1lbnREYXRhKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIC8vIENyZWF0aW5nIFBheW1lbnRSZXF1ZXN0IGluc3RhbmNlIHdpbGwgY2FsbFxuICAgIC8vIEdjb3JlIGlzUmVhZHlUb1BheSBpbnRlcm5hbGx5IHdoaWNoIHdpbGwgcHJlZmV0Y2ggdGVtcGFsdGVzLlxuICAgIHRoaXMuY3JlYXRlUGF5bWVudFJlcXVlc3RfKFxuICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QsIHRoaXMuZW52aXJvbm1lbnRfLFxuICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QudHJhbnNhY3Rpb25JbmZvLmN1cnJlbmN5Q29kZSxcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby50b3RhbFByaWNlKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbG9hZFBheW1lbnREYXRhKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIHRoaXMubG9hZFBheW1lbnREYXRhVGhyb3VnaFBheW1lbnRSZXF1ZXN0XyhwYXltZW50RGF0YVJlcXVlc3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBQYXltZW50UmVxdWVzdCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0IFRoZSBuZWNlc3NhcnkgaW5mb3JtYXRpb24gdG8gY2hlY2sgaWYgdXNlciBpc1xuICAgKiAgICAgcmVhZHkgdG8gcGF5IG9yIHRvIHN1cHBvcnQgYSBwYXltZW50IGZyb20gbWVyY2hhbnRzLlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBlbnZpcm9ubWVudCAob3B0aW9uYWwpXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IGN1cnJlbmN5Q29kZSAob3B0aW9uYWwpXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IHRvdGFsUHJpY2UgKG9wdGlvbmFsKVxuICAgKiBAcmV0dXJuIHshUGF5bWVudFJlcXVlc3R9IFBheW1lbnRSZXF1ZXN0IGluc3RhbmNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlUGF5bWVudFJlcXVlc3RfKHJlcXVlc3QsIGVudmlyb25tZW50LCBjdXJyZW5jeUNvZGUsIHRvdGFsUHJpY2UpIHtcbiAgICBsZXQgZGF0YSA9IHt9O1xuICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG4gICAgfVxuXG4gICAgLy8gT25seSBzZXQgdGhlIGFwaVZlcnNpb24gaWYgdGhlIG1lcmNoYW50IGRvZXNuJ3Qgc2V0IGl0LlxuICAgIGlmICghZGF0YVsnYXBpVmVyc2lvbiddKSB7XG4gICAgICBkYXRhWydhcGlWZXJzaW9uJ10gPSAxO1xuICAgIH1cblxuICAgIC8vIEFkZCBhbGxvd2VkUGF5bWVudE1ldGhvZHMgZm9yIHN3ZyB0byBnZXQgdGhyb3VnaCBnbXMgY29yZSB2YWxpZGF0aW9uLlxuICAgIGlmIChkYXRhWydzd2cnXSkge1xuICAgICAgZGF0YVsnYWxsb3dlZFBheW1lbnRNZXRob2RzJ10gPSBbQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuQ0FSRF07XG4gICAgfVxuXG4gICAgaWYgKGVudmlyb25tZW50ICYmIGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5URVNUKSB7XG4gICAgICBkYXRhWydlbnZpcm9ubWVudCddID0gZW52aXJvbm1lbnQ7XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwcG9ydGVkSW5zdHJ1bWVudHMgPSBbe1xuICAgICAgJ3N1cHBvcnRlZE1ldGhvZHMnOiBbJ2h0dHBzOi8vZ29vZ2xlLmNvbS9wYXknXSxcbiAgICAgICdkYXRhJzogZGF0YSxcbiAgICB9XTtcblxuICAgIGNvbnN0IGRldGFpbHMgPSB7XG4gICAgICAndG90YWwnOiB7XG4gICAgICAgICdsYWJlbCc6ICdFc3RpbWF0ZWQgVG90YWwgUHJpY2UnLFxuICAgICAgICAnYW1vdW50Jzoge1xuICAgICAgICAgIC8vIGN1cnJlbmN5IGFuZCB2YWx1ZSBhcmUgcmVxdWlyZWQgZmllbGRzIGluIFBheW1lbnRSZXF1ZXN0LCBidXQgdGhlc2VcbiAgICAgICAgICAvLyBmaWVsZHMgd2lsbCBuZXZlciBiZSB1c2VkIHNpbmNlIFBheW1lbnRSZXF1ZXN0IFVJIGlzIHNraXBwZWQgd2hlblxuICAgICAgICAgIC8vIHdlJ3JlIHRoZSBvbmx5IHBheW1lbnQgbWV0aG9kLCBzbyBkZWZhdWx0IHRvIHNvbWUgdmFsdWUgdG8gYnkgcGFzc1xuICAgICAgICAgIC8vIHRoaXMgcmVxdWlyZW1lbnQuXG4gICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3lDb2RlIHx8ICdVU0QnLFxuICAgICAgICAgICd2YWx1ZSc6IHRvdGFsUHJpY2UgfHwgJzAnLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgUGF5bWVudFJlcXVlc3Qoc3VwcG9ydGVkSW5zdHJ1bWVudHMsIGRldGFpbHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0IFByb3ZpZGVzIG5lY2Vzc2FyeVxuICAgKiAgICAgaW5mb3JtYXRpb24gdG8gc3VwcG9ydCBhIHBheW1lbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsb2FkUGF5bWVudERhdGFUaHJvdWdoUGF5bWVudFJlcXVlc3RfKHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IChwYXltZW50RGF0YVJlcXVlc3QudHJhbnNhY3Rpb25JbmZvICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8uY3VycmVuY3lDb2RlKSB8fFxuICAgICAgICB1bmRlZmluZWQ7XG4gICAgY29uc3QgdG90YWxQcmljZSA9IChwYXltZW50RGF0YVJlcXVlc3QudHJhbnNhY3Rpb25JbmZvICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QudHJhbnNhY3Rpb25JbmZvLnRvdGFsUHJpY2UpIHx8XG4gICAgICAgIHVuZGVmaW5lZDtcbiAgICBjb25zdCBwYXltZW50UmVxdWVzdCA9IHRoaXMuY3JlYXRlUGF5bWVudFJlcXVlc3RfKFxuICAgICAgICBwYXltZW50RGF0YVJlcXVlc3QsIHRoaXMuZW52aXJvbm1lbnRfLCBjdXJyZW5jeUNvZGUsIHRvdGFsUHJpY2UpO1xuICAgIHRoaXMuY2FsbGJhY2tfKFxuICAgICAgICAvKiogQHR5cGV7IVByb21pc2U8IVBheW1lbnREYXRhPn0gKi9cbiAgICAgICAgKHBheW1lbnRSZXF1ZXN0LnNob3coKVxuICAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICogQHBhcmFtIHshUGF5bWVudFJlc3BvbnNlfSBwYXltZW50UmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICogQHJldHVybiB7IVBheW1lbnREYXRhfVxuICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgKHBheW1lbnRSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgIC8vIFNob3VsZCBiZSBjYWxsZWQgdG8gZGlzbWlzcyBhbnkgcmVtYWluaW5nIFVJXG4gICAgICAgICAgICAgICAgICAgcGF5bWVudFJlc3BvbnNlLmNvbXBsZXRlKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIHBheW1lbnRSZXNwb25zZS5kZXRhaWxzO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgIGVyclsnc3RhdHVzQ29kZSddID0gQ29uc3RhbnRzLlJlc3BvbnNlU3RhdHVzLkNBTkNFTEVEO1xuICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgIH0pKSk7XG4gIH1cbn1cblxuZXhwb3J0IHtQYXltZW50c1JlcXVlc3REZWxlZ2F0ZX07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQnV5Rmxvd0FjdGl2aXR5TW9kZSxcbiAgUGF5RnJhbWVIZWxwZXIsXG4gIFBvc3RNZXNzYWdlRXZlbnRUeXBlLFxufSBmcm9tICcuL3BheV9mcmFtZV9oZWxwZXIuanMnO1xuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7R3JheXBhbmV9IGZyb20gJy4vZ3JheXBhbmUuanMnO1xuaW1wb3J0IHtQYXltZW50c0NsaWVudERlbGVnYXRlSW50ZXJmYWNlfSBmcm9tICcuL3BheW1lbnRzX2NsaWVudF9kZWxlZ2F0ZV9pbnRlcmZhY2UuanMnO1xuaW1wb3J0IHtkb2VzTWVyY2hhbnRTdXBwb3J0T25seVRva2VuaXplZENhcmRzfSBmcm9tICcuL3ZhbGlkYXRvci5qcyc7XG5pbXBvcnQge2luamVjdElmcmFtZSwgaW5qZWN0U3R5bGVTaGVldH0gZnJvbSAnLi9lbGVtZW50X2luamVjdG9yLmpzJztcblxuY29uc3Qge1xuICBBY3Rpdml0eVBvcnQsXG4gIEFjdGl2aXR5UG9ydHMsXG4gIEFjdGl2aXR5SWZyYW1lUG9ydCxcbn0gPSByZXF1aXJlKCd3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cycpO1xuXG5jb25zdCBHUEFZX0FDVElWSVRZX1JFUVVFU1QgPSAnR1BBWSc7XG5jb25zdCBJRlJBTUVfQ0xPU0VfRFVSQVRJT05fSU5fTVMgPSAyNTA7XG5jb25zdCBJRlJBTUVfU0hPV19VUF9EVVJBVElPTl9JTl9NUyA9IDI1MDtcbmNvbnN0IElGUkFNRV9TTU9PVEhfSEVJR0hUX1RSQU5TSVRJT04gPSBgaGVpZ2h0ICR7SUZSQU1FX1NIT1dfVVBfRFVSQVRJT05fSU5fTVN9bXNgO1xuY29uc3QgRVJST1JfUFJFRklYID0gJ0Vycm9yOiAnO1xuXG4vKipcbiAqIFN1cHBvcnRlZCBicm93c2VyIHVzZXIgYWdlbnQga2V5cy5cbiAqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBCcm93c2VyVXNlckFnZW50ID0ge1xuICBDSFJPTUU6ICdDaHJvbWUnLFxuICBGSVJFRk9YOiAnRmlyZWZveCcsXG4gIFNBRkFSSTogJ1NhZmFyaScsXG59O1xuXG4vKipcbiAqIFJlc2l6aW5nIHBheWxvYWQgaW5jbHVkaW5nIHJlc2l6ZSBoZWlnaHQgYW5kIHRyYW5zaXRpb24gc3R5bGUuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgaGVpZ2h0OiBzdHJpbmcsXG4gKiAgIHRyYW5zaXRpb246IHN0cmluZyxcbiAqIH19XG4gKi9cbmxldCBSZXNpemVQYXlsb2FkO1xuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIFBheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2UgdGhhdCB1c2VzIHRoZSBjdXN0b21cbiAqIGhvc3RpbmcgcGFnZSBhbG9uZyB3aXRoIHdlYiBhY3Rpdml0aWVzIHRvIGFjdHVhbGx5IGdldCB0byB0aGUgaG9zdGluZyBwYWdlLlxuICogQGltcGxlbWVudHMge1BheW1lbnRzQ2xpZW50RGVsZWdhdGVJbnRlcmZhY2V9XG4gKi9cbmNsYXNzIFBheW1lbnRzV2ViQWN0aXZpdHlEZWxlZ2F0ZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW52aXJvbm1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGdvb2dsZVRyYW5zYWN0aW9uSWRcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdXNlSWZyYW1lXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UG9ydHM9fSBhY3Rpdml0aWVzIENhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYSBzaGFyZWRcbiAgICogICBhY3Rpdml0aWVzIG1hbmFnZXIuIEJ5IGRlZmF1bHQsIHRoZSBuZXcgbWFuYWdlciBpcyBjcmVhdGVkLlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSByZWRpcmVjdEtleSBUaGUgcmVkaXJlY3Qga2V5IHVzZWQgZm9yIHJlZGlyZWN0IG1vZGUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBlbnZpcm9ubWVudCxcbiAgICBnb29nbGVUcmFuc2FjdGlvbklkLFxuICAgIHVzZUlmcmFtZSxcbiAgICBhY3Rpdml0aWVzLFxuICAgIHJlZGlyZWN0S2V5XG4gICkge1xuICAgIHRoaXMuZW52aXJvbm1lbnRfID0gZW52aXJvbm1lbnQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gKi9cblxuICAgIC8qKiBAY29uc3QgeyFBY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdGllcyA9IGFjdGl2aXRpZXMgfHwgbmV3IEFjdGl2aXR5UG9ydHMod2luZG93KTtcbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshR3JheXBhbmV9ICovXG4gICAgdGhpcy5ncmF5cGFuZV8gPSBuZXcgR3JheXBhbmUod2luZG93LmRvY3VtZW50KTtcbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbighUHJvbWlzZTwhUGF5bWVudERhdGE+KX0gKi9cbiAgICB0aGlzLmNhbGxiYWNrXyA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgez97XG4gICAgICogICAgICAgICAgICAgY29udGFpbmVyOiAhRWxlbWVudCxcbiAgICAgKiAgICAgICAgICAgICBpZnJhbWU6IUhUTUxJRnJhbWVFbGVtZW50LFxuICAgICAqICAgICAgICAgICAgIHJlcXVlc3Q6IVBheW1lbnREYXRhUmVxdWVzdCxcbiAgICAgKiAgICAgICAgICAgICBkYXRhUHJvbWlzZTo/UHJvbWlzZTwhUGF5bWVudERhdGE+fX1cbiAgICAgKi9cbiAgICB0aGlzLnByZWZldGNoZWRPYmplY3RzXyA9IG51bGw7XG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuc2hvdWxkSGFuZGxlUmVzaXppbmdfID0gZmFsc2U7XG4gICAgLyoqIEBwcml2YXRlIHs/QWN0aXZpdHlJZnJhbWVQb3J0fSAqL1xuICAgIHRoaXMucG9ydF8gPSBudWxsO1xuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCFQcm9taXNlPHZvaWQ+KX0gKi9cbiAgICB0aGlzLmRpc21pc3NQcm9taXNlUmVzb2x2ZXJfID0gbnVsbDtcbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHtzdHJpbmd9ICovXG4gICAgdGhpcy5nb29nbGVUcmFuc2FjdGlvbklkXyA9IGdvb2dsZVRyYW5zYWN0aW9uSWQ7XG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnJlZGlyZWN0S2V5XyA9IHJlZGlyZWN0S2V5IHx8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7P1Jlc2l6ZVBheWxvYWR9XG4gICAgICovXG4gICAgdGhpcy5zYXZlZFJlc2l6ZVBheWxvYWRfID0gbnVsbDtcblxuICAgIC8vIE9ubHkgaW5zdGFsbCBkaWFsb2cgc3R5bGVzIHdoZW4gaWZyYW1pbmcgaXMgYWxsb3dlZC5cbiAgICBpZiAobnVsbCkge1xuICAgICAgaW5qZWN0U3R5bGVTaGVldChDb25zdGFudHMuSUZSQU1FX1NUWUxFKTtcbiAgICAgIGlmIChudWxsKSB7XG4gICAgICAgIGluamVjdFN0eWxlU2hlZXQoQ29uc3RhbnRzLklGUkFNRV9TVFlMRV9DRU5URVIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgb25SZXN1bHQoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5jYWxsYmFja18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcbiAgICB0aGlzLmFjdGl2aXRpZXMub25SZXN1bHQoXG4gICAgICBHUEFZX0FDVElWSVRZX1JFUVVFU1QsXG4gICAgICB0aGlzLm9uQWN0aXZpdHlSZXN1bHRfLmJpbmQodGhpcylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5UG9ydH0gcG9ydFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25BY3Rpdml0eVJlc3VsdF8ocG9ydCkge1xuICAgIC8vIEhpZGUgdGhlIGdyYXlwYW5lLlxuICAgIHRoaXMuZ3JheXBhbmVfLmhpZGUoKTtcbiAgICAvLyBPbmx5IHZlcmlmaWVkIG9yaWdpbnMgYXJlIGFsbG93ZWQuXG4gICAgdGhpcy5jYWxsYmFja18oXG4gICAgICBwb3J0LmFjY2VwdFJlc3VsdCgpLnRoZW4oXG4gICAgICAgIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAvLyBPcmlnaW4gbXVzdCBhbHdheXMgbWF0Y2g6IHBvcHVwLCBpZnJhbWUgb3IgcmVkaXJlY3QuXG4gICAgICAgICAgaWYgKHJlc3VsdC5vcmlnaW4gIT0gdGhpcy5nZXRPcmlnaW5fKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY2hhbm5lbCBtaXNtYXRjaCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBkYXRhID0gLyoqIEB0eXBlIHshUGF5bWVudERhdGF9ICovIChyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgaWYgKGRhdGFbJ3JlZGlyZWN0RW5jcnlwdGVkQ2FsbGJhY2tEYXRhJ10pIHtcbiAgICAgICAgICAgIFBheUZyYW1lSGVscGVyLnNldEJ1eUZsb3dBY3Rpdml0eU1vZGUoQnV5Rmxvd0FjdGl2aXR5TW9kZS5SRURJUkVDVCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFJlZGlyZWN0UmVzcG9uc2VfKFxuICAgICAgICAgICAgICBkYXRhWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddXG4gICAgICAgICAgICApLnRoZW4oKGRlY3J5cGVkSnNvbikgPT4ge1xuICAgICAgICAgICAgICAvLyBNZXJnZSBvdGhlciBub24tZW5jcnlwdGVkIGZpZWxkcyBpbnRvIHRoZSBmaW5hbCByZXNwb25zZS5cbiAgICAgICAgICAgICAgY29uc3QgY2xvbmUgPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhKTtcbiAgICAgICAgICAgICAgZGVsZXRlIGNsb25lWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddO1xuICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjbG9uZSwgZGVjcnlwZWRKc29uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBVbmVuY3J5cHRlZCBkYXRhIHN1cHBsaWVkOiBtdXN0IGJlIGEgdmVyaWZpZWQgYW5kIHNlY3VyZSBjaGFubmVsLlxuICAgICAgICAgIGlmICghcmVzdWx0Lm9yaWdpblZlcmlmaWVkIHx8ICFyZXN1bHQuc2VjdXJlQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFubmVsIG1pc21hdGNoJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAvLyBUT0RPOiBMb2cgdGhlIG9yaWdpbmFsIGFuZCB0aGUgaW5mZXJyZWQgZXJyb3IgdG8gZXllMy5cbiAgICAgICAgICBjb25zdCBvcmlnaW5hbEVycm9yID0gZXJyb3JbJ21lc3NhZ2UnXTtcbiAgICAgICAgICBsZXQgaW5mZXJyZWRFcnJvciA9IGVycm9yWydtZXNzYWdlJ107XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBwYXJzZSB0aGUgZXJyb3IgbWVzc2FnZSB0byBhIHN0cnVjdHVyZWQgZXJyb3IsIGlmIGl0J3NcbiAgICAgICAgICAgIC8vIG5vdCBwb3NzaWJsZSwgZmFsbGJhY2sgdG8gdXNlIHRoZSBlcnJvciBtZXNzYWdlIHN0cmluZy5cbiAgICAgICAgICAgIGluZmVycmVkRXJyb3IgPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yLnN1YnN0cmluZyhFUlJPUl9QUkVGSVgubGVuZ3RoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGluZmVycmVkRXJyb3JbJ3N0YXR1c0NvZGUnXSAmJlxuICAgICAgICAgICAgWydERVZFTE9QRVJfRVJST1InLCAnTUVSQ0hBTlRfQUNDT1VOVF9FUlJPUiddLmluZGV4T2YoXG4gICAgICAgICAgICAgIGluZmVycmVkRXJyb3JbJ3N0YXR1c0NvZGUnXVxuICAgICAgICAgICAgKSA9PSAtMVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaW5mZXJyZWRFcnJvciA9IHtcbiAgICAgICAgICAgICAgJ3N0YXR1c0NvZGUnOiAnQ0FOQ0VMRUQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGluZmVycmVkRXJyb3IgPT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgICAgICBpbmZlcnJlZEVycm9yID0ge1xuICAgICAgICAgICAgICAnc3RhdHVzQ29kZSc6ICdDQU5DRUxFRCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoaW5mZXJyZWRFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YVxuICAgKiBAcmV0dXJuIHshUGF5bWVudERhdGF9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaFJlZGlyZWN0UmVzcG9uc2VfKHJlZGlyZWN0RW5jcnlwdGVkQ2FsbGJhY2tEYXRhKSB7XG4gICAgLy8gVGhpcyBtZXRob2QgaGFzIHRvIHJlbHkgb24gdGhlIGxlZ2FjeSBYSFIgQVBJIGJlY2F1c2UgdGhlIHJlZGlyZWN0XG4gICAgLy8gZnVuY3Rpb25hbGl0eSBpcywgaW4gcGFydCwgYWltZWQgYXQgb2xkZXIgYnJvd3NlcnMuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0RGVjcnlwdGlvblVybF8oKTtcbiAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpO1xuICAgICAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikge1xuICAgICAgICAvLyBJdCdzIGZpbmUgdG8gcHJvY2VlZCBpbiBhIG5vbi1yZWRpcmVjdCBtb2RlIGJlY2F1c2UgcmVkaXJlY3RWZXJpZmllclxuICAgICAgICAvLyBwbGF5cyB0aGUgcGFydCBvZiBDT1JTIHByb3BhZ2F0aW9uLlxuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlIDwgLyogU1RBVFVTX1JFQ0VJVkVEICovIDIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPCAxMDAgfHwgeGhyLnN0YXR1cyA+IDU5OSkge1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVua25vd24gSFRUUCBzdGF0dXMgJHt4aHIuc3RhdHVzfWApKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IC8qIENPTVBMRVRFICovIDQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBKU09OIHBhcnNpbmcgZXJyb3IgaXMgZXhwZWN0ZWQgaGVyZS5cbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB4aHIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignTmV0d29yayBmYWlsdXJlJykpO1xuICAgICAgfTtcbiAgICAgIHhoci5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnKSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBTZW5kIFBPU1QuXG4gICAgICB4aHIuc2VuZChyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzUmVhZHlUb1BheShpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmIChkb2VzTWVyY2hhbnRTdXBwb3J0T25seVRva2VuaXplZENhcmRzKGlzUmVhZHlUb1BheVJlcXVlc3QpKSB7XG4gICAgICAgIHJlc29sdmUoeydyZXN1bHQnOiBmYWxzZX0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgIGNvbnN0IGlzSW9zR3NhID1cbiAgICAgICAgdXNlckFnZW50LmluZGV4T2YoJ0dTQS8nKSA+IDAgJiZcbiAgICAgICAgdXNlckFnZW50LmluZGV4T2YoQnJvd3NlclVzZXJBZ2VudC5TQUZBUkkpID4gMDtcbiAgICAgIC8vIHBvcCB1cCBpbiBJR1NBIGRvZXNuJ3Qgd29yay5cbiAgICAgIGlmIChpc0lvc0dzYSAmJiAhbnVsbCkge1xuICAgICAgICByZXNvbHZlKHsncmVzdWx0JzogZmFsc2V9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNGaXJlZm94SW9zID0gdXNlckFnZW50LmluZGV4T2YoJ0Z4aU9TJykgPiAwO1xuICAgICAgaWYgKGlzRmlyZWZveElvcykge1xuICAgICAgICByZXNvbHZlKHsncmVzdWx0JzogZmFsc2V9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNTdXBwb3J0ZWQgPVxuICAgICAgICB1c2VyQWdlbnQuaW5kZXhPZihCcm93c2VyVXNlckFnZW50LkNIUk9NRSkgPiAwIHx8XG4gICAgICAgIHVzZXJBZ2VudC5pbmRleE9mKEJyb3dzZXJVc2VyQWdlbnQuRklSRUZPWCkgPiAwIHx8XG4gICAgICAgIHVzZXJBZ2VudC5pbmRleE9mKEJyb3dzZXJVc2VyQWdlbnQuU0FGQVJJKSA+IDA7XG4gICAgICBpZiAoXG4gICAgICAgIGlzU3VwcG9ydGVkICYmXG4gICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyICYmXG4gICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuZXhpc3RpbmdQYXltZW50TWV0aG9kUmVxdWlyZWRcbiAgICAgICkge1xuICAgICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LmVudmlyb25tZW50ID0gdGhpcy5lbnZpcm9ubWVudF87XG4gICAgICAgIFBheUZyYW1lSGVscGVyLnNlbmRBbmRXYWl0Rm9yUmVzcG9uc2UoXG4gICAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdCxcbiAgICAgICAgICBQb3N0TWVzc2FnZUV2ZW50VHlwZS5JU19SRUFEWV9UT19QQVksXG4gICAgICAgICAgJ2lzUmVhZHlUb1BheVJlc3BvbnNlJyxcbiAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAncmVzdWx0JzogaXNTdXBwb3J0ZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuZXhpc3RpbmdQYXltZW50TWV0aG9kUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgcmVzcG9uc2VbJ3BheW1lbnRNZXRob2RQcmVzZW50J10gPVxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGFbJ2lzUmVhZHlUb1BheVJlc3BvbnNlJ10gPT0gJ1JFQURZX1RPX1BBWSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHsncmVzdWx0JzogaXNTdXBwb3J0ZWR9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcHJlZmV0Y2hQYXltZW50RGF0YShwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICAvLyBPbmx5IGhhbmRsZXMgcHJlZmV0Y2ggZm9yIGlmcmFtZSBmb3Igbm93LlxuICAgIGlmICghbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb250YWluZXJBbmRGcmFtZSA9IHRoaXMuaW5qZWN0SWZyYW1lXyhwYXltZW50RGF0YVJlcXVlc3QpO1xuICAgIGNvbnN0IHBheW1lbnREYXRhUHJvbWlzZSA9IHRoaXMub3BlbklmcmFtZV8oXG4gICAgICBjb250YWluZXJBbmRGcmFtZVsnY29udGFpbmVyJ10sXG4gICAgICBjb250YWluZXJBbmRGcmFtZVsnaWZyYW1lJ10sXG4gICAgICBwYXltZW50RGF0YVJlcXVlc3RcbiAgICApO1xuICAgIHRoaXMucHJlZmV0Y2hlZE9iamVjdHNfID0ge1xuICAgICAgJ2NvbnRhaW5lcic6IGNvbnRhaW5lckFuZEZyYW1lWydjb250YWluZXInXSxcbiAgICAgICdpZnJhbWUnOiBjb250YWluZXJBbmRGcmFtZVsnaWZyYW1lJ10sXG4gICAgICAncmVxdWVzdCc6IHBheW1lbnREYXRhUmVxdWVzdCxcbiAgICAgICdkYXRhUHJvbWlzZSc6IHBheW1lbnREYXRhUHJvbWlzZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBsb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgaWYgKCFwYXltZW50RGF0YVJlcXVlc3Quc3dnKSB7XG4gICAgICAvLyBPbmx5IHNldCB0aGUgYXBpVmVyc2lvbiBpZiB0aGUgbWVyY2hhbnQgaXMgbm90IHNldHRpbmcgaXQuXG4gICAgICBpZiAoIXBheW1lbnREYXRhUmVxdWVzdC5hcGlWZXJzaW9uKSB7XG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdC5hcGlWZXJzaW9uID0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcGF5bWVudERhdGFSZXF1ZXN0LmVudmlyb25tZW50ID0gdGhpcy5lbnZpcm9ubWVudF87XG4gICAgaWYgKG51bGwpIHtcbiAgICAgIFBheUZyYW1lSGVscGVyLnNldEJ1eUZsb3dBY3Rpdml0eU1vZGUoQnV5Rmxvd0FjdGl2aXR5TW9kZS5JRlJBTUUpO1xuICAgICAgLy8gVE9ETzogQ29tcGFyZSB0aGUgcmVxdWVzdCB3aXRoIHByZWZldGNoZWQgcmVxdWVzdC5cbiAgICAgIGxldCBjb250YWluZXJBbmRGcmFtZTtcbiAgICAgIGxldCBwYXltZW50RGF0YVByb21pc2U7XG4gICAgICBpZiAodGhpcy5wcmVmZXRjaGVkT2JqZWN0c18pIHtcbiAgICAgICAgLy8gUmVuZGVyaW5nIHByZWZldGNoZWQgZnJhbWUgYW5kIGNvbnRhaW5lci5cbiAgICAgICAgY29udGFpbmVyQW5kRnJhbWUgPSB0aGlzLnByZWZldGNoZWRPYmplY3RzXztcbiAgICAgICAgcGF5bWVudERhdGFQcm9taXNlID0gdGhpcy5wcmVmZXRjaGVkT2JqZWN0c19bJ2RhdGFQcm9taXNlJ107XG4gICAgICAgIHRoaXMucHJlZmV0Y2hlZE9iamVjdHNfID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lckFuZEZyYW1lID0gdGhpcy5pbmplY3RJZnJhbWVfKHBheW1lbnREYXRhUmVxdWVzdCk7XG4gICAgICAgIHBheW1lbnREYXRhUHJvbWlzZSA9IHRoaXMub3BlbklmcmFtZV8oXG4gICAgICAgICAgY29udGFpbmVyQW5kRnJhbWVbJ2NvbnRhaW5lciddLFxuICAgICAgICAgIGNvbnRhaW5lckFuZEZyYW1lWydpZnJhbWUnXSxcbiAgICAgICAgICBwYXltZW50RGF0YVJlcXVlc3RcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvd0NvbnRhaW5lckFuZElmcmFtZVdpdGhBbmltYXRpb25fKFxuICAgICAgICBjb250YWluZXJBbmRGcmFtZVsnY29udGFpbmVyJ10sXG4gICAgICAgIGNvbnRhaW5lckFuZEZyYW1lWydpZnJhbWUnXSxcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0XG4gICAgICApO1xuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCAnJyk7XG4gICAgICBjb25zdCBvblBvcFN0YXRlID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmJhY2tCdXR0b25IYW5kbGVyXyhjb250YWluZXJBbmRGcmFtZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIG9uUG9wU3RhdGUpO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIG9uUG9wU3RhdGUpO1xuICAgICAgY29uc3QgZGlzbWlzc1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICB0aGlzLmRpc21pc3NQcm9taXNlUmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jYWxsYmFja18oUHJvbWlzZS5yYWNlKFtwYXltZW50RGF0YVByb21pc2UsIGRpc21pc3NQcm9taXNlXSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBQYXlGcmFtZUhlbHBlci5zZXRCdXlGbG93QWN0aXZpdHlNb2RlKFxuICAgICAgcGF5bWVudERhdGFSZXF1ZXN0Wydmb3JjZVJlZGlyZWN0J11cbiAgICAgICAgPyBCdXlGbG93QWN0aXZpdHlNb2RlLlJFRElSRUNUXG4gICAgICAgIDogQnV5Rmxvd0FjdGl2aXR5TW9kZS5QT1BVUFxuICAgICk7XG4gICAgY29uc3Qgb3BlbmVyID0gdGhpcy5hY3Rpdml0aWVzLm9wZW4oXG4gICAgICBHUEFZX0FDVElWSVRZX1JFUVVFU1QsXG4gICAgICB0aGlzLmdldEhvc3RpbmdQYWdlVXJsXygpLFxuICAgICAgdGhpcy5nZXRSZW5kZXJNb2RlXyhwYXltZW50RGF0YVJlcXVlc3QpLFxuICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LFxuICAgICAgeyd3aWR0aCc6IDYwMCwgJ2hlaWdodCc6IDYwMH1cbiAgICApO1xuICAgIHRoaXMuZ3JheXBhbmVfLnNob3cob3BlbmVyICYmIG9wZW5lci50YXJnZXRXaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlbmRlciBtb2RlIHdoZXRoZXIgbmVlZCB0byBmb3JjZSByZWRpcmVjdC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3RcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UmVuZGVyTW9kZV8ocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHBheW1lbnREYXRhUmVxdWVzdFsnZm9yY2VSZWRpcmVjdCddID8gJ190b3AnIDogJ2dwLWpzLXBvcHVwJztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzZXJ2ZXIgb3JpZ2luIGJhc2VkIG9uIHRoZSBlbnZpcm9ubWVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0T3JpZ2luXygpIHtcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudF8gPT0gQ29uc3RhbnRzLkVudmlyb25tZW50LkxPQ0FMKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgbGV0IGJhc2VEb21haW47XG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRfID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EKSB7XG4gICAgICBiYXNlRG9tYWluID0gJ3BheS1wcmVwcm9kLnNhbmRib3gnO1xuICAgIH0gZWxzZSBpZiAodGhpcy5lbnZpcm9ubWVudF8gPT0gQ29uc3RhbnRzLkVudmlyb25tZW50LlNBTkRCT1gpIHtcbiAgICAgIGJhc2VEb21haW4gPSAncGF5LnNhbmRib3gnO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlRG9tYWluID0gJ3BheSc7XG4gICAgfVxuICAgIHJldHVybiAnaHR0cHM6Ly8nICsgYmFzZURvbWFpbiArICcuZ29vZ2xlLmNvbSc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYmFzZSBwYXRoIGJhc2VkIG9uIHRoZSBlbnZpcm9ubWVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgYmFzZSBwYXRoXG4gICAqL1xuICBnZXRCYXNlUGF0aF8oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3JpZ2luXygpICsgJy9ncC9wJztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZWNyeXB0aW9uIHVybCB0byBiZSB1c2VkIHRvIGRlY3J5cHQgdGhlIGVuY3J5cHRlZCBwYXlsb2FkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBkZWNyeXB0aW9uIHVybFxuICAgKi9cbiAgZ2V0RGVjcnlwdGlvblVybF8oKSB7XG4gICAgbGV0IHVybCA9IHRoaXMuZ2V0QmFzZVBhdGhfKCkgKyAnL2FwaXMvYnV5Zmxvdy9wcm9jZXNzJztcbiAgICBpZiAodGhpcy5yZWRpcmVjdEtleV8pIHtcbiAgICAgIHVybCArPSAnP3JrPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5yZWRpcmVjdEtleV8pO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGhvc3RpbmcgcGFnZSB1cmwuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGhvc3RpbmcgcGFnZSB1cmxcbiAgICovXG4gIGdldEhvc3RpbmdQYWdlVXJsXygpIHtcbiAgICAvLyBJbiBUaW4gdGVzdHMsIHRoZSBob3N0aW5nIHBhZ2UgaXMgcmVxdWVzdGVkIGZyb21cbiAgICAvLyAvdGVzdGluZy9idXlmbG93L21lcmNoYW50ZGVtby5odG1sIGFuZCBpcyBhY2Nlc3NlZCByZWxhdGl2ZWx5IHNpbmNlIHRoZVxuICAgIC8vIGJhc2UgcGF0aCBpcyB1bmtub3duIGFoZWFkIG9mIHRpbWUuXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRfID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5USU4pIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIC9ncC9wIHByZWZpeCBzaW5jZSBtdWx0aWxvZ2luIHByZWZpeGVzIGlzIGJyb2tlbiBpbiBUaW46XG4gICAgICAvLyBodHRwOi8veWFxcy80OTEyMzIyOTQxNTUwNTkyXG4gICAgICByZXR1cm4gJy91aS9wYXknO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRCYXNlUGF0aF8oKSArICcvdWkvcGF5JztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpZnJhbWUgcHdnIHVybCB0byBiZSB1c2VkIHRvIGJlIHVzZWQgZm9yIGFtcC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudmlyb25tZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgaWZyYW1lIHVybFxuICAgKi9cbiAgZ2V0SWZyYW1lVXJsKGVudmlyb25tZW50LCBvcmlnaW4pIHtcbiAgICAvLyBUT0RPOiBUaGVzZSBzaG91bGQgYmUgY29tcGlsZSB0aW1lIGNvbnN0YW50cyBhbmQgbm90IGRlcGVuZGVudFxuICAgIC8vIG9uIHRoZSBlbnZpcm9ubWVudC5cbiAgICBsZXQgaWZyYW1lVXJsID0gYGh0dHBzOi8vcGF5Lmdvb2dsZS5jb20vZ3AvcC91aS9wYXk/b3JpZ2luPSR7b3JpZ2lufWA7XG4gICAgaWYgKFxuICAgICAgZW52aXJvbm1lbnQgPT0gQ29uc3RhbnRzLkVudmlyb25tZW50LlNBTkRCT1ggfHxcbiAgICAgIGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EXG4gICAgKSB7XG4gICAgICBpZnJhbWVVcmwgPSBgaHR0cHM6Ly9wYXknKyAgKGVudmlyb25tZW50ID09IENvbnN0YW50cy5FbnZpcm9ubWVudC5QUkVQUk9EID8gJy1wcmVwcm9kJyA6ICcnKSsgICcuc2FuZGJveC5nb29nbGUuY29tL2dwL3AvdWkvcGF5P29yaWdpbj0ke29yaWdpbn1gO1xuICAgIH1cbiAgICByZXR1cm4gaWZyYW1lVXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIGlmcmFtZSB3aXRoIGFuaW1hdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHshRWxlbWVudH0gY29udGFpbmVyXG4gICAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZUlmcmFtZUFuZENvbnRhaW5lcl8oY29udGFpbmVyLCBpZnJhbWUpIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uU3R5bGUgPSAnYWxsICcgKyBJRlJBTUVfQ0xPU0VfRFVSQVRJT05fSU5fTVMgKyAnbXMgZWFzZSAwcyc7XG4gICAgdGhpcy5zZXRUcmFuc2l0aW9uXyhpZnJhbWUsIHRyYW5zaXRpb25TdHlsZSk7XG4gICAgaWZyYW1lLmhlaWdodCA9ICcwcHgnO1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIHJlcGxhY2VkIGJ5IGxpc3RlbmluZyB0byBUcmFuc2l0aW9uRW5kIGV2ZW50XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoY29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9LCBJRlJBTUVfQ0xPU0VfRFVSQVRJT05fSU5fTVMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gICAqIEByZXR1cm4ge3tjb250YWluZXI6ICFFbGVtZW50LCBpZnJhbWU6IUhUTUxJRnJhbWVFbGVtZW50fX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluamVjdElmcmFtZV8ocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgY29uc3QgY29udGFpbmVyQW5kRnJhbWUgPSBpbmplY3RJZnJhbWUoXG4gICAgICB0aGlzLmlzVmVydGljYWxDZW50ZXJFeHBlcmltZW50RW5hYmxlZF8ocGF5bWVudERhdGFSZXF1ZXN0KVxuICAgICAgICA/IENvbnN0YW50cy5JRlJBTUVfU1RZTEVfQ0VOVEVSX0NMQVNTXG4gICAgICAgIDogQ29uc3RhbnRzLklGUkFNRV9TVFlMRV9DTEFTU1xuICAgICk7XG4gICAgY29uc3QgaWZyYW1lID0gY29udGFpbmVyQW5kRnJhbWVbJ2lmcmFtZSddO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lckFuZEZyYW1lWydjb250YWluZXInXTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsXG4gICAgICB0aGlzLmNsb3NlQWN0aW9uSGFuZGxlcl8uYmluZCh0aGlzLCBjb250YWluZXJBbmRGcmFtZSlcbiAgICApO1xuICAgIC8vIEhpZGUgaWZyYW1lIGFuZCBkaXNhYmxlIHJlc2l6ZSBhdCBpbml0aWFsaXplLlxuICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGlmcmFtZS5oZWlnaHQgPSAnMHB4JztcbiAgICBjb25zdCB0cmFuc2l0aW9uU3R5bGUgPVxuICAgICAgJ2FsbCAnICsgSUZSQU1FX1NIT1dfVVBfRFVSQVRJT05fSU5fTVMgKyAnbXMgZWFzZSAwcyc7XG4gICAgdGhpcy5zZXRUcmFuc2l0aW9uXyhpZnJhbWUsIHRyYW5zaXRpb25TdHlsZSk7XG4gICAgdGhpcy5zaG91bGRIYW5kbGVSZXNpemluZ18gPSBmYWxzZTtcbiAgICByZXR1cm4gY29udGFpbmVyQW5kRnJhbWU7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlciB3aGVuIGJhY2sgYnV0dG9uIGlzIHRyaWdnZXJlZCwgc2hvdWxkIGRpc21pc3MgaWZyYW1lIGlmIHByZXNlbnQuXG4gICAqIEBwYXJhbSB7e2NvbnRhaW5lcjogIUVsZW1lbnQsIGlmcmFtZTohSFRNTElGcmFtZUVsZW1lbnR9fSBjb250YWluZXJBbmRGcmFtZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYmFja0J1dHRvbkhhbmRsZXJfKGNvbnRhaW5lckFuZEZyYW1lKSB7XG4gICAgdGhpcy5kaXNtaXNzSWZyYW1lXyhjb250YWluZXJBbmRGcmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlciB3aGVuIGNsb3NlIGFjdGlvbiBpcyB0cmlnZ2VyZWQsIHdpbGwgcG9wIGhpc3Rvcnkgc3RhdGUgdG8gY2xvc2VcbiAgICogdGhlIGlmcmFtZS5cbiAgICogQHBhcmFtIHt7Y29udGFpbmVyOiAhRWxlbWVudCwgaWZyYW1lOiFIVE1MSUZyYW1lRWxlbWVudH19IGNvbnRhaW5lckFuZEZyYW1lXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjbG9zZUFjdGlvbkhhbmRsZXJfKGNvbnRhaW5lckFuZEZyYW1lKSB7XG4gICAgaWYgKGNvbnRhaW5lckFuZEZyYW1lWydjb250YWluZXInXS5wYXJlbnROb2RlKSB7XG4gICAgICAvLyBDbG9zZSBhY3Rpb24gb25seSB3aGVuIGNvbnRhaW5lciBpcyBzdGlsbCBhdHRhY2hlZCB0byB0aGUgcGFnZS5cbiAgICAgIGhpc3RvcnkuYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3tjb250YWluZXI6ICFFbGVtZW50LCBpZnJhbWU6IUhUTUxJRnJhbWVFbGVtZW50fX0gY29udGFpbmVyQW5kRnJhbWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRpc21pc3NJZnJhbWVfKGNvbnRhaW5lckFuZEZyYW1lKSB7XG4gICAgLy8gRGlzbWlzcyBpZnJhbWUgb25seSB3aGVuIGNvbnRhaW5lciBpcyBzdGlsbCBhdHRhY2hlZCBpbiB0aGUgcGFnZS5cbiAgICBpZiAoY29udGFpbmVyQW5kRnJhbWVbJ2NvbnRhaW5lciddLnBhcmVudE5vZGUpIHtcbiAgICAgIC8vIFRPRE86IFRoaW5rIGFib3V0IHdoZXRoZXIgdGhpcyBjb3VsZCBiZSBqdXN0IGhpZGUgaW5zdGVhZCBvZlxuICAgICAgLy8gZGlzY29ubmVjdCBhbmQgcmVtb3ZlLCB0aGUgdHJpY2t5IHBhcnQgaXMgaG93IHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZVxuICAgICAgLy8gcGF5bWVudCBkYXRhIHJlcXVlc3QgaXMgbm90IHRoZSBzYW1lLlxuICAgICAgdGhpcy5kaXNtaXNzUHJvbWlzZVJlc29sdmVyXyhQcm9taXNlLnJlamVjdCh7J2Vycm9yQ29kZSc6ICdDQU5DRUxFRCd9KSk7XG4gICAgICB0aGlzLnJlbW92ZUlmcmFtZUFuZENvbnRhaW5lcl8oXG4gICAgICAgIGNvbnRhaW5lckFuZEZyYW1lWydjb250YWluZXInXSxcbiAgICAgICAgY29udGFpbmVyQW5kRnJhbWVbJ2lmcmFtZSddXG4gICAgICApO1xuICAgICAgdGhpcy5wb3J0XyAmJiB0aGlzLnBvcnRfLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzVmVydGljYWxDZW50ZXJFeHBlcmltZW50RW5hYmxlZF8ocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG51bGwgJiZcbiAgICAgIHBheW1lbnREYXRhUmVxdWVzdFsnaSddICYmXG4gICAgICBwYXltZW50RGF0YVJlcXVlc3RbJ2knXS5yZW5kZXJDb250YWluZXJDZW50ZXJcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGNvbnRhaW5lclxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzaG93Q29udGFpbmVyQW5kSWZyYW1lV2l0aEFuaW1hdGlvbl8oY29udGFpbmVyLCBpZnJhbWUsIHBheW1lbnREYXRhUmVxdWVzdCkge1xuICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBIYXJkIGNvZGUgdGhlIGFwcHJ4IGhlaWdodCBoZXJlLCBpdCB3aWxsIGJlIHJlc2l6ZSB0byBleHBlY3RlZCBoZWlnaHRcbiAgICAgIC8vIGxhdGVyLlxuICAgICAgaWZyYW1lLmhlaWdodCA9ICcyODBweCc7XG4gICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsQ2VudGVyRXhwZXJpbWVudEVuYWJsZWRfKHBheW1lbnREYXRhUmVxdWVzdCkpIHtcbiAgICAgICAgaWZyYW1lLmNsYXNzTGlzdC5hZGQoQ29uc3RhbnRzLklGUkFNRV9BQ1RJVkVfQ09OVEFJTkVSX0NMQVNTKTtcbiAgICAgIH1cbiAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIGhhbmRsZXMgcHJvcGVybHkgYnkgbGlzdGVuaW5nIHRvXG4gICAgICAvLyBUcmFuc2l0aW9uRW5kIGV2ZW50LlxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2hvdWxkSGFuZGxlUmVzaXppbmdfID0gdHJ1ZTtcbiAgICAgICAgLy8gVE9ETzogQWRkIGJyb3dzZXIgdGVzdCB0aGF0IGNhdGNoZXMgdGhpcy5cbiAgICAgICAgaWYgKHRoaXMuc2F2ZWRSZXNpemVQYXlsb2FkXykge1xuICAgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbl8oaWZyYW1lLCB0aGlzLnNhdmVkUmVzaXplUGF5bG9hZF9bJ3RyYW5zaXRpb24nXSk7XG4gICAgICAgICAgaWZyYW1lLmhlaWdodCA9IHRoaXMuc2F2ZWRSZXNpemVQYXlsb2FkX1snaGVpZ2h0J107XG4gICAgICAgICAgdGhpcy5zYXZlZFJlc2l6ZVBheWxvYWRfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSwgSUZSQU1FX1NIT1dfVVBfRFVSQVRJT05fSU5fTVMpO1xuICAgIH0sIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zaXRpb25TdHlsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0VHJhbnNpdGlvbl8oaWZyYW1lLCB0cmFuc2l0aW9uU3R5bGUpIHtcbiAgICBpZnJhbWUuc3R5bGUuc2V0UHJvcGVydHkoJ3RyYW5zaXRpb24nLCB0cmFuc2l0aW9uU3R5bGUpO1xuICAgIC8vIEZvciBzYWZhcmkuXG4gICAgaWZyYW1lLnN0eWxlLnNldFByb3BlcnR5KCctd2Via2l0LXRyYW5zaXRpb24nLCB0cmFuc2l0aW9uU3R5bGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZSBXZWJBY3Rpdml0aXkgdG8gb3BlbiBpZnJhbWUgdGhhdCdzIGluIGdpdmVuIGNvbnRhaW5lci5cbiAgICpcbiAgICogQHBhcmFtIHshRWxlbWVudH0gY29udGFpbmVyXG4gICAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAgICogQHBhcmFtIHshUGF5bWVudERhdGFSZXF1ZXN0fSBwYXltZW50RGF0YVJlcXVlc3RcbiAgICogQHJldHVybiB7IVByb21pc2U8IVBheW1lbnREYXRhPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9wZW5JZnJhbWVfKGNvbnRhaW5lciwgaWZyYW1lLCBwYXltZW50RGF0YVJlcXVlc3QpIHtcbiAgICBpZiAoIXBheW1lbnREYXRhUmVxdWVzdC5zd2cpIHtcbiAgICAgIGlmICghcGF5bWVudERhdGFSZXF1ZXN0LmFwaVZlcnNpb24pIHtcbiAgICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LmFwaVZlcnNpb24gPSAxO1xuICAgICAgfVxuICAgIH1cbiAgICBwYXltZW50RGF0YVJlcXVlc3QuZW52aXJvbm1lbnQgPSB0aGlzLmVudmlyb25tZW50XztcbiAgICBsZXQgaWZyYW1lTG9hZFN0YXJ0VGltZTtcbiAgICBjb25zdCB0cnVzdGVkVXJsID0gdGhpcy5nZXRJZnJhbWVVcmwoXG4gICAgICB0aGlzLmVudmlyb25tZW50XyxcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW5cbiAgICApO1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXRpZXNcbiAgICAgIC5vcGVuSWZyYW1lKGlmcmFtZSwgdHJ1c3RlZFVybCwgcGF5bWVudERhdGFSZXF1ZXN0KVxuICAgICAgLnRoZW4oKHBvcnQpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGN1c3RvbSByZXNpemUgbWVzc2FnZS5cbiAgICAgICAgdGhpcy5wb3J0XyA9IHBvcnQ7XG4gICAgICAgIHBvcnQub25NZXNzYWdlKChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgaWYgKHBheWxvYWRbJ3R5cGUnXSAhPT0gJ3Jlc2l6ZScgfHwgIXRoaXMuc2hvdWxkSGFuZGxlUmVzaXppbmdfKSB7XG4gICAgICAgICAgICAvLyBTYXZlIHRoZSByZXNpemUgZXZlbnQgbGF0ZXIgYWZ0ZXIgaW5pdGlhbCBhbmltYXRpb24gaXMgZmluaXNoZWRcbiAgICAgICAgICAgIHRoaXMuc2F2ZWRSZXNpemVQYXlsb2FkXyA9IHtcbiAgICAgICAgICAgICAgJ2hlaWdodCc6IHBheWxvYWRbJ2hlaWdodCddLFxuICAgICAgICAgICAgICAndHJhbnNpdGlvbic6IHBheWxvYWRbJ3RyYW5zaXRpb24nXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGIvMTExMzEwODk5OiBTbW9vdGggb3V0IGluaXRpYWwgaUZyYW1lIGxvYWRpbmdcbiAgICAgICAgICBpZiAoIWlmcmFtZUxvYWRTdGFydFRpbWUpIHtcbiAgICAgICAgICAgIGlmcmFtZUxvYWRTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBEYXRlLm5vdygpIDxcbiAgICAgICAgICAgIGlmcmFtZUxvYWRTdGFydFRpbWUgKyBJRlJBTUVfU0hPV19VUF9EVVJBVElPTl9JTl9NU1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uXyhcbiAgICAgICAgICAgICAgaWZyYW1lLFxuICAgICAgICAgICAgICBwYXlsb2FkWyd0cmFuc2l0aW9uJ10gKyAnLCAnICsgSUZSQU1FX1NNT09USF9IRUlHSFRfVFJBTlNJVElPTlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uXyhpZnJhbWUsIHBheWxvYWRbJ3RyYW5zaXRpb24nXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmcmFtZS5oZWlnaHQgPSBwYXlsb2FkWydoZWlnaHQnXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCFPYmplY3Q+fSAqLyAocG9ydC5hY2NlcHRSZXN1bHQoKSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0geyFPYmplY3R9IHJlc3VsdFxuICAgICAgICAgKiBAcmV0dXJuIHshUGF5bWVudERhdGF9XG4gICAgICAgICAqL1xuICAgICAgICAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVJZnJhbWVBbmRDb250YWluZXJfKGNvbnRhaW5lciwgaWZyYW1lKTtcbiAgICAgICAgICAvLyBUaGlzIGlzIG9ubHkgZm9yIHBvcHBpbmcgdGhlIHN0YXRlIHdlIHB1c2hlZCBlYXJsaWVyLlxuICAgICAgICAgIGhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSAvKiogQHR5cGUgeyFQYXltZW50RGF0YX0gKi8gKHJlc3VsdFsnZGF0YSddKTtcbiAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVJZnJhbWVBbmRDb250YWluZXJfKGNvbnRhaW5lciwgaWZyYW1lKTtcbiAgICAgICAgICAvLyBUaGlzIGlzIG9ubHkgZm9yIHBvcHBpbmcgdGhlIHN0YXRlIHdlIHB1c2hlZCBlYXJsaWVyLlxuICAgICAgICAgIGhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHtQYXltZW50c1dlYkFjdGl2aXR5RGVsZWdhdGV9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogU2VydmljZSB3cmFwcGluZyB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlLiBUaGlzIGVuYWJsZXNcbiAqIHdpbmRvdy5wb3N0TWVzc2FnZSB0byBiZSBzd2FwcGVkIG91dCBpbiB1bml0IHRlc3RzLlxuICovXG5jbGFzcyBQb3N0TWVzc2FnZVNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcih3aW5kb3cpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luZG93XyA9IHdpbmRvdztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXNzdGhyb3VnaCB0byBXaW5kb3cjcG9zdE1lc3NhZ2UuIFNlZSBXaW5kb3cjcG9zdE1lc3NhZ2UgRE9NIEFQSVxuICAgKiBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGFyZ3VtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0fSBtZXNzYWdlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRPcmlnaW5cbiAgICovXG4gIHBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRhcmdldE9yaWdpbikge1xuICAgIHRoaXMud2luZG93Xy5wb3N0TWVzc2FnZShtZXNzYWdlLCB0YXJnZXRPcmlnaW4pO1xuICB9XG59XG5cbmV4cG9ydCB7UG9zdE1lc3NhZ2VTZXJ2aWNlfTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHtQdWJsaWNFcnJvckNvZGV9IGZyb20gJy4vcGF5X2ZyYW1lX2hlbHBlci5qcyc7XG5pbXBvcnQge2dldFVwaVBheW1lbnRNZXRob2R9IGZyb20gJy4vdmFsaWRhdG9yLmpzJztcblxuY2xhc3MgVXBpSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB1cGkgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGlmIGl0IGV4aXN0cyBpbiBhbGxvd2VkIHBheW1lbnQgbWV0aG9kc1xuICAgKiBvciBudWxsIGlmIGl0IGRvZXNuJ3RcbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1VwaVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiAhIWdldFVwaVBheW1lbnRNZXRob2QocmVxdWVzdCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB1cGkgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGlmIGl0IGV4aXN0cyBpbiBhbGxvd2VkIHBheW1lbnQgbWV0aG9kc1xuICAgKiBvciBudWxsIGlmIGl0IGRvZXNuJ3RcbiAgICpcbiAgICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBUaGUgcHJvbWlzZSB3aWxsIGNvbnRhaW4gdGhlIGJvb2xlYW4gcmVzdWx0IGFuZCBlcnJvclxuICAgKiAgICAgbWVzc2FnZSB3aGVuIHBvc3NpYmxlLlxuICAgKi9cbiAgaXNSZWFkeVRvUGF5KHJlcXVlc3QpIHtcbiAgICAvLyBBbHdheXMgcmV0dXJuIHRydWUgZm9yIFVQSSBpZiBhcGkgdmVyc2lvbiBpcyAyIGFuZCBjaHJvbWUgc3VwcG9ydHNcbiAgICAvLyBwYXltZW50IHJlcXVlc3RcbiAgICBpZiAoZ2V0VXBpUGF5bWVudE1ldGhvZChyZXF1ZXN0KSkge1xuICAgICAgaWYgKHJlcXVlc3QuZXhpc3RpbmdQYXltZW50TWV0aG9kUmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7J3Jlc3VsdCc6IHRydWUsICdwYXltZW50TWV0aG9kUHJlc2VudCc6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeydyZXN1bHQnOiB0cnVlfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignTm8gVXBpIHBheW1lbnQgbWV0aG9kIGZvdW5kIGluIGhhbmRsZXInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHBheW1lbnQgZGF0YSB3aGVuIHBheW1lbnQgbWV0aG9kIGlzIFVQSVxuICAgKlxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YVJlcXVlc3R9IHBheW1lbnREYXRhUmVxdWVzdCBQcm92aWRlcyBuZWNlc3NhcnlcbiAgICogICAgIGluZm9ybWF0aW9uIHRvIHN1cHBvcnQgYSBwYXltZW50LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IHVwaVBheW1lbnRNZXRob2QgVVBJIHBheW1lbnRtZXRob2QgaW5cbiAgICogICAgIGFsbG93ZWRQYXltZW50TWV0aG9kcyBhcnJheS5cbiAgICogQHBhcmFtIHshRnVuY3Rpb259IG9uUmVzdWx0Q2FsbGJhY2sgRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGV2ZXJ5dGhpbmcgaXNcbiAgICogICAgIGRvbmUuXG4gICAqL1xuICBsb2FkUGF5bWVudERhdGEocGF5bWVudERhdGFSZXF1ZXN0LCB1cGlQYXltZW50TWV0aG9kLCBvblJlc3VsdENhbGxiYWNrKSB7XG4gICAgY29uc3QgcGFyYW1ldGVycyA9IHVwaVBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbkluZm8gPSBwYXltZW50RGF0YVJlcXVlc3RbJ3RyYW5zYWN0aW9uSW5mbyddO1xuICAgIGNvbnN0IHN1cHBvcnRlZEluc3RydW1lbnRzID0gbnVsbCA/XG4gICAgICAgIFt7XG4gICAgICAgICAgLy8gVGhpcyBpcyB0aGUgdXJsIGZvciBUZXogdGVhbWZvb2QgcmVsZWFzZS5cbiAgICAgICAgICAnc3VwcG9ydGVkTWV0aG9kcyc6IFsnaHR0cHM6Ly9wd3Atc2VydmVyLmFwcHNwb3QuY29tL3BheS10ZWFtZm9vZCddLFxuICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgJ3BhJzogJ3JlZGJ1c0BheGlzYmFuaycsXG4gICAgICAgICAgICAncG4nOiBwYXJhbWV0ZXJzWydwYXllZU5hbWUnXSxcbiAgICAgICAgICAgICd0cic6IHBhcmFtZXRlcnNbJ3RyYW5zYWN0aW9uUmVmZXJlbmNlSWQnXSxcbiAgICAgICAgICAgICd1cmwnOiBwYXJhbWV0ZXJzWydyZWZlcmVuY2VVcmwnXSxcbiAgICAgICAgICAgICdtYyc6ICc0MTMxJyxcbiAgICAgICAgICAgICd0bic6ICdQdXJjaGFzZSBpbiBNZXJjaGFudCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfV0gOlxuICAgICAgICBbe1xuICAgICAgICAgICdzdXBwb3J0ZWRNZXRob2RzJzogWydodHRwczovL3Rlei5nb29nbGUuY29tL3BheSddLFxuICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgJ3BhJzogcGFyYW1ldGVyc1sncGF5ZWVWcGEnXSxcbiAgICAgICAgICAgICdwbic6IHBhcmFtZXRlcnNbJ3BheWVlTmFtZSddLFxuICAgICAgICAgICAgJ3RyJzogcGFyYW1ldGVyc1sndHJhbnNhY3Rpb25SZWZlcmVuY2VJZCddLFxuICAgICAgICAgICAgJ3VybCc6IHBhcmFtZXRlcnNbJ3JlZmVyZW5jZVVybCddLFxuICAgICAgICAgICAgJ21jJzogcGFyYW1ldGVyc1snbWNjJ10sXG4gICAgICAgICAgICAndG4nOiB0cmFuc2FjdGlvbkluZm9bJ3RyYW5zYWN0aW9uTm90ZSddLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1dO1xuXG4gICAgaWYgKHBhcmFtZXRlcnNbJ3RyYW5zYWN0aW9uSWQnXSkge1xuICAgICAgc3VwcG9ydGVkSW5zdHJ1bWVudHNbMF1bJ2RhdGEnXVsndGlkJ10gPSBwYXJhbWV0ZXJzWyd0cmFuc2FjdGlvbklkJ107XG4gICAgfVxuXG4gICAgY29uc3QgZGV0YWlscyA9IHtcbiAgICAgICd0b3RhbCc6IHtcbiAgICAgICAgJ2xhYmVsJzogJ1RvdGFsJyxcbiAgICAgICAgJ2Ftb3VudCc6IHtcbiAgICAgICAgICAnY3VycmVuY3knOiB0cmFuc2FjdGlvbkluZm9bJ2N1cnJlbmN5Q29kZSddLFxuICAgICAgICAgICd2YWx1ZSc6IHRyYW5zYWN0aW9uSW5mb1sndG90YWxQcmljZSddLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICdkaXNwbGF5SXRlbXMnOiBbe1xuICAgICAgICAnbGFiZWwnOiAnT3JpZ2luYWwgQW1vdW50JyxcbiAgICAgICAgJ2Ftb3VudCc6IHtcbiAgICAgICAgICAnY3VycmVuY3knOiB0cmFuc2FjdGlvbkluZm9bJ2N1cnJlbmN5Q29kZSddLFxuICAgICAgICAgICd2YWx1ZSc6IHRyYW5zYWN0aW9uSW5mb1sndG90YWxQcmljZSddLFxuICAgICAgICB9LFxuICAgICAgfV0sXG4gICAgfTtcblxuICAgIGxldCByZXF1ZXN0ID0gbmV3IFBheW1lbnRSZXF1ZXN0KHN1cHBvcnRlZEluc3RydW1lbnRzLCBkZXRhaWxzKTtcblxuICAgIG9uUmVzdWx0Q2FsbGJhY2soXG4gICAgICAgIHRoaXMuY2hlY2tDYW5NYWtlUGF5bWVudF8ocmVxdWVzdClcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93VWlfKHJlcXVlc3QpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VG9Hb29nbGVQbGF5XygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocGF5bWVudERhdGEgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRGF0YV8oXG4gICAgICAgICAgICAgICAgICBwYXltZW50RGF0YSwgcGF5bWVudERhdGFSZXF1ZXN0LCB1cGlQYXltZW50TWV0aG9kKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBlcnJvclsnc3RhdHVzQ29kZSddID0gQ29uc3RhbnRzLlJlc3BvbnNlU3RhdHVzLkNBTkNFTEVEO1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIFRleiBwYXltZW50IHJlcXVlc3QgVUkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7IVBheW1lbnRSZXF1ZXN0fSByZXF1ZXN0IFRoZSBwYXltZW50IHJlcXVlc3Qgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhUGF5bWVudERhdGE+fSBBIHByb21pc2UgY29udGFpbmluZyBwYXltZW50IHJlc3BvbnNlLlxuICAgKi9cbiAgc2hvd1VpXyhyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3Quc2hvdygpLnRoZW4ocGF5bWVudFJlc3BvbnNlID0+IHtcbiAgICAgIHBheW1lbnRSZXNwb25zZS5jb21wbGV0ZSgnc3VjY2VzcycpO1xuICAgICAgcmV0dXJuIHBheW1lbnRSZXNwb25zZS5kZXRhaWxzO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIGNhbiBtYWtlIGEgcGF5bWVudCB3aXRoIFRleiBvbiB0aGlzIGRldmljZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHshUGF5bWVudFJlcXVlc3R9IHJlcXVlc3QgVGhlIHBheW1lbnQgcmVxdWVzdCBvYmplY3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPGJvb2xlYW4+fSBhIHByb21pc2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIHdoZXRoZXIgY2FuXG4gICAqICAgICBtYWtlIHBheW1lbnQuXG4gICAqL1xuICBjaGVja0Nhbk1ha2VQYXltZW50XyhyZXF1ZXN0KSB7XG4gICAgLy8gQ2hlY2tzIGNhbk1ha2VQYXltZW50IGNhY2hlLCBhbmQgdXNlIHRoZSBjYWNoZSByZXN1bHQgaWYgaXQgZXhpc3RzLlxuICAgIGNvbnN0IGNhY2hlUmVzdWx0ID1cbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oQ29uc3RhbnRzLlVQSV9DQU5fTUFLRV9QQVlNRU5UX0NBQ0hFX0tFWSk7XG4gICAgaWYgKGNhY2hlUmVzdWx0KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlUmVzdWx0ID09PSAndHJ1ZScpO1xuICAgIH1cblxuICAgIC8vIEZlYXR1cmUgZGV0ZWN0IGNhbk1ha2VQYXltZW50KCkuXG4gICAgaWYgKCFyZXF1ZXN0LmNhbk1ha2VQYXltZW50KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cblxuICAgIGxldCBjYW5NYWtlUGF5bWVudFByb21pc2UgPSByZXF1ZXN0LmNhbk1ha2VQYXltZW50KCk7XG5cbiAgICByZXR1cm4gY2FuTWFrZVBheW1lbnRQcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIC8vIFN0b3JlIHRoZSByZXN1bHQgaW4gY2FjaGUgaWYgdGhlIHJlc3VsdCBpcyB0cnVlIHRvIGF2b2lkIHF1b3RhIGVycm9yXG4gICAgICAvLyBjYXVzZWQgYnkgcXVlcnlpbmcgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgZGF0YS5cbiAgICAgIC8vIERvZXNuJ3Qgc3RvcmUgZmFsc2UgYmVjYXVzZSBpZiB3ZSBkbyBzbywgdXNlciB3aWxsIGJlIHJlZGlyZWN0ZWQgdG9cbiAgICAgIC8vIEdvb2dsZSBQbGF5IGFnYWluIGFmdGVyIGluc3RhbGxpbmcgR29vZ2xlIFBheSBpZiBDaHJvbWUgaXMgbm90IGNsb3NlZC5cbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICBDb25zdGFudHMuVVBJX0NBTl9NQUtFX1BBWU1FTlRfQ0FDSEVfS0VZLCByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZGlyZWN0IHVzZXIgdG8gR29vZ2xlIFBheSBhcHAgaW4gR29vZ2xlIFBsYXkgc3RvcmVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMgeyFQcm9taXNlPCFPYmplY3Q+fSBSZWplY3RlZCBwcm9taXNlIHdpdGggZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgcmVkaXJlY3RUb0dvb2dsZVBsYXlfKCkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFxuICAgICAgICBudWxsID9cbiAgICAgICAgICAgICdodHRwczovL3BsYXkuZ29vZ2xlLmNvbS9zdG9yZS9hcHBzL2RldGFpbHM/aWQ9Y29tLmdvb2dsZS5hbmRyb2lkLmFwcHMubmJ1LnBhaXNhLnVzZXIudGVhbWZvb2QgJyA6ICAvLyBOT0xJTlRcbiAgICAgICAgICAgICdodHRwczovL3BsYXkuZ29vZ2xlLmNvbS9zdG9yZS9hcHBzL2RldGFpbHM/aWQ9Y29tLmdvb2dsZS5hbmRyb2lkLmFwcHMubmJ1LnBhaXNhLnVzZXInKTsgIC8vIE5PTElOVFxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgeydlcnJvck1lc3NhZ2UnOiAnQ2Fubm90IHJlZGlyZWN0IHRvIFRleiBwYWdlIGluIEdvb2dsZSBQbGF5Lid9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IFRleiBwYXltZW50IGRhdGEgdG8gR1BheSBwYXltZW50IGRhdGEgaWYgcGF5bWVudCBzdWNjZWVkZWQsIG9yXG4gICAqIHJlamVjdCBpZiBwYXltZW50IGZhaWxlZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyFQYXltZW50RGF0YX0gdGV6UGF5bWVudERhdGEgVGhlIHBheW1lbnQgZGF0YSBvYmplY3QgZnJvbSBUZXouXG4gICAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0IFRoZSBwYXltZW50IGRhdGEgcmVxdWVzdC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSB1cGlQYXltZW50TWV0aG9kIFVQSSBwYXltZW50bWV0aG9kIGluXG4gICAqIGFsbG93ZWRQYXltZW50TWV0aG9kcyBhcnJheVxuICAgKiBAcmV0dXJucyB7IVByb21pc2U8UGF5bWVudERhdGE+fSBBIHByb21pc2UgY29udGFpbmluZyBwYXltZW50IGRhdGEgb3JcbiAgICogICAgIGVycm9yIG1lc3NhZ2UuXG4gICAqL1xuICBwcm9jZXNzRGF0YV8odGV6UGF5bWVudERhdGEsIHBheW1lbnREYXRhUmVxdWVzdCwgdXBpUGF5bWVudE1ldGhvZCkge1xuICAgIGNvbnN0IHRlelJlc3BvbnNlID0gSlNPTi5wYXJzZSh0ZXpQYXltZW50RGF0YVsndGV6UmVzcG9uc2UnXSk7XG4gICAgaWYgKHRlelJlc3BvbnNlWydTdGF0dXMnXSA9PT0gJ0ZBSUxVUkUnKSB7XG4gICAgICBsZXQgZXJyb3I7XG4gICAgICBzd2l0Y2ggKHRlelJlc3BvbnNlWydyZXNwb25zZUNvZGUnXSkge1xuICAgICAgICBjYXNlICdaTSc6XG4gICAgICAgICAgLy8gcGF5bWVudCBmYWlsdXJlIGR1ZSB0byBpbnZhbGlkIE1QSU5cbiAgICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICAgICdlcnJvckNvZGUnOiBQdWJsaWNFcnJvckNvZGUuQlVZRVJfQUNDT1VOVF9FUlJPUixcbiAgICAgICAgICAgICdlcnJvck1lc3NhZ2UnOiAnUGF5bWVudCBmYWlsdXJlIGR1ZSB0byBpbnZhbGlkIE1QSU4uJ1xuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1o5JzpcbiAgICAgICAgICAvLyBwYXltZW50IGZhaWx1cmUgZHVlIHRvIGluc3VmZmljaWVudCBmdW5kc1xuICAgICAgICAgIGVycm9yID0ge1xuICAgICAgICAgICAgJ2Vycm9yQ29kZSc6IFB1YmxpY0Vycm9yQ29kZS5CVVlFUl9BQ0NPVU5UX0VSUk9SLFxuICAgICAgICAgICAgJ2Vycm9yTWVzc2FnZSc6ICdQYXltZW50IGZhaWx1cmUgZHVlIHRvIGluc3VmZmljaWVudCBmdW5kcy4nXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnOTEnOlxuICAgICAgICAgIC8vIHBheW1lbnQgZmFpbHVyZSBkdWUgdG8gdHJhbnNhY3Rpb24gdGltZW91dCBvciBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgZXJyb3IgPSB7XG4gICAgICAgICAgICAnZXJyb3JDb2RlJzogUHVibGljRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuICAgICAgICAgICAgJ2Vycm9yTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgJ1BheW1lbnQgZmFpbHVyZSBkdWUgdG8gdHJhbnNhY3Rpb24gdGltZW91dCBvciBjb25uZWN0aW9uJyArXG4gICAgICAgICAgICAgICAgJyBpc3N1ZS4nXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBwYXltZW50IGZhaWx1cmUgZHVlIHRvIHVzZXIgY2FuY2VsIG9yIG90aGVyIGlzc3Vlc1xuICAgICAgICAgIGVycm9yID0geydlcnJvck1lc3NhZ2UnOiAnUGF5bWVudCBjYW5jZWxsZWQuJ307XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpZ25lZE1lc3NhZ2UgPSB7XG4gICAgICAncGF5bWVudE1ldGhvZFR5cGUnOiAnVVBJJyxcbiAgICAgICdwYXllZVZwYSc6IHVwaVBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXVsncGF5ZWVWcGEnXSxcbiAgICAgICdzdGF0dXMnOiB0ZXpSZXNwb25zZVsnU3RhdHVzJ10sXG4gICAgICAndHJhbnNhY3Rpb25SZWZlcmVuY2VJZCc6XG4gICAgICAgICAgdXBpUGF5bWVudE1ldGhvZFsncGFyYW1ldGVycyddWyd0cmFuc2FjdGlvblJlZmVyZW5jZUlkJ10sXG4gICAgICAndHJhbnNhY3Rpb25JZCc6IHVwaVBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXVsndHJhbnNhY3Rpb25JZCddID9cbiAgICAgICAgICB1cGlQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ11bJ3RyYW5zYWN0aW9uSWQnXSA6XG4gICAgICAgICAgdGV6UmVzcG9uc2VbJ3R4bklkJ10sXG4gICAgICAndHJhbnNhY3Rpb25JbmZvJzogcGF5bWVudERhdGFSZXF1ZXN0Wyd0cmFuc2FjdGlvbkluZm8nXSxcbiAgICB9O1xuXG4gICAgbGV0IHBheW1lbnREYXRhID0ge1xuICAgICAgJ2FwaVZlcnNpb24nOiBwYXltZW50RGF0YVJlcXVlc3RbJ2FwaVZlcnNpb24nXSxcbiAgICAgICdhcGlWZXJzaW9uTWlub3InOiBwYXltZW50RGF0YVJlcXVlc3RbJ2FwaVZlcnNpb25NaW5vciddLFxuICAgICAgJ3BheW1lbnRNZXRob2REYXRhJzoge1xuICAgICAgICAndHlwZSc6IHVwaVBheW1lbnRNZXRob2RbJ3R5cGUnXSxcbiAgICAgICAgJ3Rva2VuaXphdGlvbkRhdGEnOiB7XG4gICAgICAgICAgJ3R5cGUnOiAnRElSRUNUJyxcbiAgICAgICAgICAndG9rZW4nOiB7XG4gICAgICAgICAgICAncHJvdG9jb2xWZXJzaW9uJzogJ0VDdjEnLFxuICAgICAgICAgICAgLy8gVE9ETzogVmVyaWZ5IHRoYXQgcmVzcG9uc2UgY29tZXMgZnJvbSB0ZXogYW5kXG4gICAgICAgICAgICAvLyBhZGQgc2lnbmF0dXJlIGFuZCBlbmNyeXB0IHNpZ25lZCBtZXNzYWdlIGhlcmVcbiAgICAgICAgICAgICdzaWduYXR1cmUnOiAnJyxcbiAgICAgICAgICAgICdzaWduZWRNZXNzYWdlJzogc2lnbmVkTWVzc2FnZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXltZW50RGF0YSk7XG4gIH1cbn1cblxuZXhwb3J0IHtVcGlIYW5kbGVyfTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgdXVpZCBmcm9tICcuLi90aGlyZF9wYXJ0eS9yYW5kb21fdXVpZC9SYW5kb20udXVpZC5qcyc7XG5cbi8qKlxuICogUmV0dXJucyBhIGdvb2dsZSB0cmFuc2FjdGlvbiBpZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW52aXJvbm1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZChlbnZpcm9ubWVudCkge1xuICByZXR1cm4gdXVpZC51dWlkRmFzdCgpICsgJy4nICsgZW52aXJvbm1lbnQ7XG59XG5cbmV4cG9ydCB7Y3JlYXRlR29vZ2xlVHJhbnNhY3Rpb25JZH07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgdmVyc2lvbiBvZiBDaHJvbWUgc3VwcG9ydHMgUGF5bWVudEhhbmRsZXIuXG4gKi9cbmZ1bmN0aW9uIGNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSB7XG4gIC8vIENoZWNrIGlmIGZlYXR1cmUgaXMgZW5hYmxlZCBmb3IgdXNlclxuICBpZiAodHlwZW9mIGdvb2dsZSA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgIW51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBQYXltZW50IGhhbmRsZXIgaXNuJ3Qgc3VwcG9ydGVkIG9uIG1vYmlsZVxuICBjb25zdCBtb2JpbGVQbGF0Zm9ybSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKFxuICAgICAgL0FuZHJvaWR8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlL2kpO1xuICBpZiAobW9iaWxlUGxhdGZvcm0gIT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGNocm9tZVZlcnNpb24gPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFswLTldKylcXC4vaSk7XG4gIHJldHVybiAnUGF5bWVudFJlcXVlc3QnIGluIHdpbmRvdyAmJiBjaHJvbWVWZXJzaW9uICE9IG51bGwgJiZcbiAgICAgIE51bWJlcihjaHJvbWVWZXJzaW9uWzFdKSA+PSA2OCAmJlxuICAgICAgd2luZG93Lm5hdmlnYXRvci52ZW5kb3IgPT0gJ0dvb2dsZSBJbmMuJztcbn1cblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgdmVyc2lvbiBvZiBDaHJvbWUgc3VwcG9ydHMgUGF5bWVudFJlcXVlc3QuXG4gKi9cbmZ1bmN0aW9uIGNocm9tZVN1cHBvcnRzUGF5bWVudFJlcXVlc3QoKSB7XG4gIC8vIE9wZXJhIHVzZXMgY2hyb21lIGFzIHJlbmRlcmluZyBlbmdpbmUgYW5kIHNlbmRzIGFsbW9zdCB0aGUgZXhhY3Qgc2FtZVxuICAvLyB1c2VyIGFnZW50IGFzIGNocm9tZSB0aGVyZWJ5IGZvb2xpbmcgdXMgb24gYW5kcm9pZC5cbiAgY29uc3QgaXNPcGVyYSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ09QUi8nKSAhPSAtMTtcbiAgaWYgKGlzT3BlcmEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGNocm9tZVN1cHBvcnRzUGF5bWVudEhhbmRsZXIoKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3QgYW5kcm9pZFBsYXRmb3JtID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSk7XG4gIGNvbnN0IGNocm9tZVZlcnNpb24gPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFswLTldKylcXC4vaSk7XG4gIHJldHVybiBhbmRyb2lkUGxhdGZvcm0gIT0gbnVsbCAmJiAnUGF5bWVudFJlcXVlc3QnIGluIHdpbmRvdyAmJlxuICAgICAgLy8gTWFrZSBzdXJlIHNraXBwaW5nIFBheW1lbnRSZXF1ZXN0IFVJIHdoZW4gb25seSBvbmUgUGF5bWVudE1ldGhvZCBpc1xuICAgICAgLy8gc3VwcG9ydGVkIChzdGFydHMgb24gR29vZ2xlIENocm9tZSA1OSkuXG4gICAgICB3aW5kb3cubmF2aWdhdG9yLnZlbmRvciA9PSAnR29vZ2xlIEluYy4nICYmIGNocm9tZVZlcnNpb24gIT0gbnVsbCAmJlxuICAgICAgTnVtYmVyKGNocm9tZVZlcnNpb25bMV0pID49IDU5O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R9IGlzUmVhZHlUb1BheVJlcXVlc3RcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBtZXJjaGFudCBvbmx5IHN1cHBvcnRzIHRva2VuaXplZCBjYXJkcy5cbiAqL1xuZnVuY3Rpb24gZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcyhpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmFwaVZlcnNpb24gPj0gMikge1xuICAgIGNvbnN0IGFsbG93ZWRBdXRoTWV0aG9kcyA9XG4gICAgICAgIGV4dHJhY3RBbGxvd2VkQXV0aE1ldGhvZHNGb3JDYXJkc18oaXNSZWFkeVRvUGF5UmVxdWVzdCk7XG4gICAgaWYgKGFsbG93ZWRBdXRoTWV0aG9kcyAmJiBhbGxvd2VkQXV0aE1ldGhvZHMubGVuZ3RoID09IDEgJiZcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzWzBdID09IENvbnN0YW50cy5BdXRoTWV0aG9kLkNSWVBUT0dSQU1fM0RTKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aCA9PSAxICYmXG4gICAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kc1swXSA9PVxuICAgICAgQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuVE9LRU5JWkVEX0NBUkQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICogQHBhcmFtIHtDb25zdGFudHMuQXV0aE1ldGhvZH0gYXBpVjJBdXRoTWV0aG9kXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgbWVyY2hhbnQgc3VwcG9ydHMgcGFuIGNhcmRzLlxuICovXG5mdW5jdGlvbiBhcGlWMkRvZXNNZXJjaGFudFN1cHBvcnRTcGVjaWZpZWRDYXJkVHlwZShcbiAgICBpc1JlYWR5VG9QYXlSZXF1ZXN0LCBhcGlWMkF1dGhNZXRob2QpIHtcbiAgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyKSB7XG4gICAgY29uc3QgYWxsb3dlZEF1dGhNZXRob2RzID1cbiAgICAgICAgZXh0cmFjdEFsbG93ZWRBdXRoTWV0aG9kc0ZvckNhcmRzXyhpc1JlYWR5VG9QYXlSZXF1ZXN0KTtcbiAgICBpZiAoYWxsb3dlZEF1dGhNZXRob2RzICYmIGFsbG93ZWRBdXRoTWV0aG9kcy5pbmNsdWRlcyhhcGlWMkF1dGhNZXRob2QpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBpZiBpcyBzZWN1cmUgY29udGV4dC4gUmV0dXJucyBudWxsIGlmIGNvbnRleHQgaXMgc2VjdXJlLCBvdGhlcndpc2VcbiAqIHJldHVybiBlcnJvciBtZXNzYWdlLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TZWN1cml0eS9TZWN1cmVfQ29udGV4dHNcbiAqXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBudWxsIGlmIGN1cnJlbnQgY29udGV4dCBpcyBzZWN1cmUsIG90aGVyd2lzZSByZXR1cm4gZXJyb3JcbiAqIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlU2VjdXJlQ29udGV4dCgpIHtcbiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5lbmRzV2l0aChDb25zdGFudHMuVFJVU1RFRF9ET01BSU4pKSB7XG4gICAgLy8gVGhpcyBpcyBmb3IgbG9jYWwgZGV2ZWxvcG1lbnQuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIEJyb3dzZXIgbm90IHN1cHBvcnQgaXNTZWN1cmVDb250ZXh0LCBmaWd1cmUgb3V0IGEgd2F5IHRvIHZhbGlkYXRlIHRoaXNcbiAgICAvLyBmb3IgdGhlIHVuc3VwcG9ydGVkIGJyb3dzZXIuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgP1xuICAgICAgbnVsbCA6XG4gICAgICAnR29vZ2xlIFBheSBBUElzIHNob3VsZCBiZSBjYWxsZWQgaW4gc2VjdXJlIGNvbnRleHQhJztcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBQYXltZW50T3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0geyFQYXltZW50T3B0aW9uc30gcGF5bWVudE9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQYXltZW50T3B0aW9ucyhwYXltZW50T3B0aW9ucykge1xuICBpZiAocGF5bWVudE9wdGlvbnMuZW52aXJvbm1lbnQgJiZcbiAgICAgICFPYmplY3QudmFsdWVzKENvbnN0YW50cy5FbnZpcm9ubWVudClcbiAgICAgICAgICAgLmluY2x1ZGVzKHBheW1lbnRPcHRpb25zLmVudmlyb25tZW50KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1BhcmFtZXRlciBlbnZpcm9ubWVudCBpbiBQYXltZW50T3B0aW9ucyBjYW4gb3B0aW9uYWxseSBiZSBzZXQgdG8gJyArXG4gICAgICAgICdQUk9EVUNUSU9OLCBvdGhlcndpc2UgaXQgZGVmYXVsdHMgdG8gVEVTVC4gJyArIHBheW1lbnRPcHRpb25zLmVudmlyb25tZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlIElzUmVhZHlUb1BheVJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICogQHJldHVybiB7P3N0cmluZ30gZXJyb3JNZXNzYWdlIGlmIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlSXNSZWFkeVRvUGF5UmVxdWVzdChpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gIGlmICghaXNSZWFkeVRvUGF5UmVxdWVzdCkge1xuICAgIHJldHVybiAnaXNSZWFkeVRvUGF5UmVxdWVzdCBtdXN0IGJlIHNldCEnO1xuICB9IGVsc2UgaWYgKGlzUmVhZHlUb1BheVJlcXVlc3QuYXBpVmVyc2lvbiA+PSAyKSB7XG4gICAgaWYgKCEoJ2FwaVZlcnNpb25NaW5vcicgaW4gaXNSZWFkeVRvUGF5UmVxdWVzdCkpIHtcbiAgICAgIHJldHVybiAnYXBpVmVyc2lvbk1pbm9yIG11c3QgYmUgc2V0ISc7XG4gICAgfVxuICAgIGlmICghaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMpIHx8XG4gICAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm4gJ2ZvciB2MiBhbGxvd2VkUGF5bWVudE1ldGhvZHMgbXVzdCBiZSBzZXQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBhIGxpc3Qgb2YgYWNjZXB0ZWQgcGF5bWVudCBtZXRob2RzJztcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGFsbG93ZWRQYXltZW50TWV0aG9kID0gaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHNbaV07XG4gICAgICBpZiAoYWxsb3dlZFBheW1lbnRNZXRob2RbJ3R5cGUnXSA9PSBDb25zdGFudHMuUGF5bWVudE1ldGhvZC5DQVJEKSB7XG4gICAgICAgIGlmICghYWxsb3dlZFBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXSkge1xuICAgICAgICAgIHJldHVybiAnRmllbGQgcGFyYW1ldGVycyBtdXN0IGJlIHNldHVwIGluIGVhY2ggYWxsb3dlZFBheW1lbnRNZXRob2QnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbGxvd2VkQ2FyZE5ldHdvcmtzID1cbiAgICAgICAgICAgIGFsbG93ZWRQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ11bJ2FsbG93ZWRDYXJkTmV0d29ya3MnXTtcbiAgICAgICAgaWYgKCFhbGxvd2VkQ2FyZE5ldHdvcmtzIHx8ICFBcnJheS5pc0FycmF5KGFsbG93ZWRDYXJkTmV0d29ya3MpIHx8XG4gICAgICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuICdhbGxvd2VkQ2FyZE5ldHdvcmtzIG11c3QgYmUgc2V0dXAgaW4gcGFyYW1ldGVycyBmb3IgdHlwZSBDQVJEJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWxsb3dlZEF1dGhNZXRob2RzID1cbiAgICAgICAgICAgIGFsbG93ZWRQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ11bJ2FsbG93ZWRBdXRoTWV0aG9kcyddO1xuICAgICAgICBpZiAoIWFsbG93ZWRBdXRoTWV0aG9kcyB8fCAhQXJyYXkuaXNBcnJheShhbGxvd2VkQXV0aE1ldGhvZHMpIHx8XG4gICAgICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHMubGVuZ3RoID09IDAgfHxcbiAgICAgICAgICAgICFhbGxvd2VkQXV0aE1ldGhvZHMuZXZlcnkoaXNBdXRoTWV0aG9kVmFsaWQpKSB7XG4gICAgICAgICAgcmV0dXJuICdhbGxvd2VkQXV0aE1ldGhvZHMgbXVzdCBiZSBzZXR1cCBpbiBwYXJhbWV0ZXJzIGZvciB0eXBlIFxcJ0NBUkRcXCcgJyArXG4gICAgICAgICAgICAgICcgYW5kIG11c3QgY29udGFpbiBcXCdDUllQVE9HUkFNXzNEU1xcJyBhbmQvb3IgXFwnUEFOX09OTFlcXCcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKFxuICAgICAgIWlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcykgfHxcbiAgICAgIGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzLmxlbmd0aCA9PSAwIHx8XG4gICAgICAhaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMuZXZlcnkoaXNQYXltZW50TWV0aG9kVmFsaWQpKSB7XG4gICAgcmV0dXJuICdhbGxvd2VkUGF5bWVudE1ldGhvZHMgbXVzdCBiZSBzZXQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBcXCdDQVJEXFwnICcgK1xuICAgICAgICAnYW5kL29yIFxcJ1RPS0VOSVpFRF9DQVJEXFwnISc7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGhlIHBheW1lbnQgbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXltZW50TWV0aG9kXG4gKiBAcmV0dXJuIHtib29sZWFufSBpZiB0aGUgY3VycmVudCBwYXltZW50IG1ldGhvZCBpcyB2YWxpZC5cbiAqL1xuZnVuY3Rpb24gaXNQYXltZW50TWV0aG9kVmFsaWQocGF5bWVudE1ldGhvZCkge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhDb25zdGFudHMuUGF5bWVudE1ldGhvZCkuaW5jbHVkZXMocGF5bWVudE1ldGhvZCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGhlIGF1dGggbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoTWV0aG9kXG4gKiBAcmV0dXJuIHtib29sZWFufSBpZiB0aGUgY3VycmVudCBhdXRoIG1ldGhvZCBpcyB2YWxpZC5cbiAqL1xuZnVuY3Rpb24gaXNBdXRoTWV0aG9kVmFsaWQoYXV0aE1ldGhvZCkge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhDb25zdGFudHMuQXV0aE1ldGhvZCkuaW5jbHVkZXMoYXV0aE1ldGhvZCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgUGF5bWVudERhdGFSZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSB7IVBheW1lbnREYXRhUmVxdWVzdH0gcGF5bWVudERhdGFSZXF1ZXN0XG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBlcnJvck1lc3NhZ2UgaWYgdGhlIHJlcXVlc3QgaXMgaW52YWxpZC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQYXltZW50RGF0YVJlcXVlc3QocGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gIGlmICghcGF5bWVudERhdGFSZXF1ZXN0KSB7XG4gICAgcmV0dXJuICdwYXltZW50RGF0YVJlcXVlc3QgbXVzdCBiZSBzZXQhJztcbiAgfVxuICBpZiAocGF5bWVudERhdGFSZXF1ZXN0LnN3Zykge1xuICAgIHJldHVybiB2YWxpZGF0ZVBheW1lbnREYXRhUmVxdWVzdEZvclN3ZyhwYXltZW50RGF0YVJlcXVlc3Quc3dnKTtcbiAgfSBlbHNlIGlmICghcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mbykge1xuICAgIHJldHVybiAndHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0ISc7XG4gIH0gZWxzZSBpZiAoIXBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8uY3VycmVuY3lDb2RlKSB7XG4gICAgcmV0dXJuICdjdXJyZW5jeUNvZGUgaW4gdHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0ISc7XG4gIH0gZWxzZSBpZiAoXG4gICAgICAhcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby50b3RhbFByaWNlU3RhdHVzIHx8XG4gICAgICAhT2JqZWN0LnZhbHVlcyhDb25zdGFudHMuVG90YWxQcmljZVN0YXR1cylcbiAgICAgICAgICAgLmluY2x1ZGVzKHBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8udG90YWxQcmljZVN0YXR1cykpIHtcbiAgICByZXR1cm4gJ3RvdGFsUHJpY2VTdGF0dXMgaW4gdHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0IHRvIG9uZSBvZicgK1xuICAgICAgICAnIE5PVF9DVVJSRU5UTFlfS05PV04sIEVTVElNQVRFRCBvciBGSU5BTCEnO1xuICB9IGVsc2UgaWYgKFxuICAgICAgcGF5bWVudERhdGFSZXF1ZXN0LnRyYW5zYWN0aW9uSW5mby50b3RhbFByaWNlU3RhdHVzICE9PVxuICAgICAgICAgICdOT1RfQ1VSUkVOVExZX0tOT1dOJyAmJlxuICAgICAgIXBheW1lbnREYXRhUmVxdWVzdC50cmFuc2FjdGlvbkluZm8udG90YWxQcmljZSkge1xuICAgIHJldHVybiAndG90YWxQcmljZSBpbiB0cmFuc2FjdGlvbkluZm8gbXVzdCBiZSBzZXQgd2hlbicgK1xuICAgICAgICAnIHRvdGFsUHJpY2VTdGF0dXMgaXMgRVNUSU1BVEVEIG9yIEZJTkFMISc7XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBwYXltZW50IGRhdGEgcmVxdWVzdCBmb3IgVVBJIHBheW1lbnQgbWV0aG9kXG4gIGNvbnN0IGFsbG93ZWRQYXltZW50TWV0aG9kID0gZ2V0VXBpUGF5bWVudE1ldGhvZChwYXltZW50RGF0YVJlcXVlc3QpO1xuICBpZiAoYWxsb3dlZFBheW1lbnRNZXRob2QpIHtcbiAgICBpZiAoIWFsbG93ZWRQYXltZW50TWV0aG9kWydwYXJhbWV0ZXJzJ10pIHtcbiAgICAgIHJldHVybiAncGFyYW1ldGVycyBtdXN0IGJlIHNldCBpbiBhbGxvd2VkUGF5bWVudE1ldGhvZCEnO1xuICAgIH1cblxuICAgIHZhciBwYXJhbWV0ZXJzID0gYWxsb3dlZFBheW1lbnRNZXRob2RbJ3BhcmFtZXRlcnMnXTtcbiAgICBpZiAoIXBhcmFtZXRlcnNbJ3BheWVlVnBhJ10pIHtcbiAgICAgIHJldHVybiAncGF5ZWVWcGEgaW4gYWxsb3dlZFBheW1lbnRNZXRob2QgcGFyYW1ldGVycyBtdXN0IGJlIHNldCEnO1xuICAgIH0gZWxzZSBpZiAoIXBhcmFtZXRlcnNbJ3BheWVlTmFtZSddKSB7XG4gICAgICByZXR1cm4gJ3BheWVlTmFtZSBpbiBhbGxvd2VkUGF5bWVudE1ldGhvZCBwYXJhbWV0ZXJzIG11c3QgYmUgc2V0ISc7XG4gICAgfSBlbHNlIGlmICghcGFyYW1ldGVyc1sncmVmZXJlbmNlVXJsJ10pIHtcbiAgICAgIHJldHVybiAncmVmZXJlbmNlVXJsIGluIGFsbG93ZWRQYXltZW50TWV0aG9kIHBhcmFtZXRlcnMgbXVzdCBiZSBzZXQhJztcbiAgICB9IGVsc2UgaWYgKCFwYXJhbWV0ZXJzWydtY2MnXSkge1xuICAgICAgcmV0dXJuICdtY2MgaW4gYWxsb3dlZFBheW1lbnRNZXRob2QgcGFyYW1ldGVycyBtdXN0IGJlIHNldCEnO1xuICAgIH0gZWxzZSBpZiAoIXBhcmFtZXRlcnNbJ3RyYW5zYWN0aW9uUmVmZXJlbmNlSWQnXSkge1xuICAgICAgcmV0dXJuICd0cmFuc2FjdGlvblJlZmVyZW5jZUlkIGluIGFsbG93ZWRQYXltZW50TWV0aG9kIHBhcmFtZXRlcnMnICtcbiAgICAgICAgICAnIG11c3QgYmUgc2V0ISc7XG4gICAgfVxuXG4gICAgaWYgKHBheW1lbnREYXRhUmVxdWVzdFsndHJhbnNhY3Rpb25JbmZvJ11bJ2N1cnJlbmN5Q29kZSddICE9PSAnSU5SJykge1xuICAgICAgcmV0dXJuICdjdXJyZW5jeUNvZGUgaW4gdHJhbnNhY3Rpb25JbmZvIG11c3QgYmUgc2V0IHRvIElOUiEnO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHBheW1lbnREYXRhUmVxdWVzdFsndHJhbnNhY3Rpb25JbmZvJ11bJ3RvdGFsUHJpY2VTdGF0dXMnXSAhPT0gJ0ZJTkFMJykge1xuICAgICAgcmV0dXJuICd0b3RhbFByaWNlU3RhdHVzIGluIHRyYW5zYWN0aW9uSW5mbyBtdXN0IGJlIHNldCB0byBGSU5BTCEnO1xuICAgIH0gZWxzZSBpZiAoIXBheW1lbnREYXRhUmVxdWVzdFsndHJhbnNhY3Rpb25JbmZvJ11bJ3RyYW5zYWN0aW9uTm90ZSddKSB7XG4gICAgICByZXR1cm4gJ3RyYW5zYWN0aW9uTm90ZSBpbiB0cmFuc2FjdGlvbkluZm8gbXVzdCBiZSBzZXQhJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyB1cGkgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGlmIGl0IGV4aXN0cyBpbiBhbGxvd2VkIHBheW1lbnQgbWV0aG9kc1xuICogb3IgbnVsbCBpZiBpdCBkb2Vzbid0XG4gKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdHwhUGF5bWVudERhdGFSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcmV0dXJuIHs/T2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRVcGlQYXltZW50TWV0aG9kKHJlcXVlc3QpIHtcbiAgaWYgKCFjaHJvbWVTdXBwb3J0c1BheW1lbnRSZXF1ZXN0KCkgfHwgcmVxdWVzdC5hcGlWZXJzaW9uIDwgMiB8fFxuICAgICAgIXJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGdldEFsbG93ZWRQYXltZW50TWV0aG9kRm9yVHlwZV8ocmVxdWVzdCwgQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuVVBJKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBwYXJhbWV0ZXJzIGZvciBzd2cuXG4gKlxuICogQHBhcmFtIHs/U3dnUGFyYW1ldGVyc30gc3dnUGFyYW1ldGVyc1xuICogQHJldHVybiB7P3N0cmluZ30gZXJyb3JNZXNzYWdlIGlmIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUGF5bWVudERhdGFSZXF1ZXN0Rm9yU3dnKHN3Z1BhcmFtZXRlcnMpIHtcbiAgaWYgKCFzd2dQYXJhbWV0ZXJzKSB7XG4gICAgcmV0dXJuICdTd2cgcGFyYW1ldGVycyBtdXN0IGJlIHByb3ZpZGVkJztcbiAgfVxuICBpZiAoIXN3Z1BhcmFtZXRlcnMuc2t1SWQgfHwgIXN3Z1BhcmFtZXRlcnMucHVibGljYXRpb25JZCkge1xuICAgIHJldHVybiAnQm90aCBza3VJZCBhbmQgcHVibGljYXRpb25JZCBtdXN0IGJlIHByb3ZpZGVkJztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbGxvd2VkQXV0aE1ldGhvZHMgZm9yIGEgY2FyZCBmcm9tIHRoZSByZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSB7IUlzUmVhZHlUb1BheVJlcXVlc3R9IGlzUmVhZHlUb1BheVJlcXVlc3RcbiAqIEByZXR1cm4gez9BcnJheTxzdHJpbmc+fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEFsbG93ZWRBdXRoTWV0aG9kc0ZvckNhcmRzXyhpc1JlYWR5VG9QYXlSZXF1ZXN0KSB7XG4gIGlmIChpc1JlYWR5VG9QYXlSZXF1ZXN0LmFsbG93ZWRQYXltZW50TWV0aG9kcykge1xuICAgIGNvbnN0IGFsbG93ZWRQYXltZW50TWV0aG9kID0gZ2V0QWxsb3dlZFBheW1lbnRNZXRob2RGb3JUeXBlXyhcbiAgICAgICAgaXNSZWFkeVRvUGF5UmVxdWVzdCwgQ29uc3RhbnRzLlBheW1lbnRNZXRob2QuQ0FSRCk7XG4gICAgaWYgKGFsbG93ZWRQYXltZW50TWV0aG9kICYmIGFsbG93ZWRQYXltZW50TWV0aG9kLnBhcmFtZXRlcnMpIHtcbiAgICAgIHJldHVybiBhbGxvd2VkUGF5bWVudE1ldGhvZC5wYXJhbWV0ZXJzWydhbGxvd2VkQXV0aE1ldGhvZHMnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHBhcmFtIHshSXNSZWFkeVRvUGF5UmVxdWVzdH0gaXNSZWFkeVRvUGF5UmVxdWVzdFxuICogQHBhcmFtIHtzdHJpbmd9IHBheW1lbnRNZXRob2RUeXBlXG4gKiBAcmV0dXJuIHs/UGF5bWVudE1ldGhvZH0gUmV0dXJuIGZpcnN0IHBheW1lbnQgbWV0aG9kIGZvciB0aGUgZ2l2ZW4gdHlwZSxcbiAqICAgICByZXR1cm4gbnVsbCBpZiBub3QgZm91bmQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRBbGxvd2VkUGF5bWVudE1ldGhvZEZvclR5cGVfKFxuICAgIGlzUmVhZHlUb1BheVJlcXVlc3QsIHBheW1lbnRNZXRob2RUeXBlKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaXNSZWFkeVRvUGF5UmVxdWVzdC5hbGxvd2VkUGF5bWVudE1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhbGxvd2VkUGF5bWVudE1ldGhvZCA9IGlzUmVhZHlUb1BheVJlcXVlc3QuYWxsb3dlZFBheW1lbnRNZXRob2RzW2ldO1xuICAgIGlmIChhbGxvd2VkUGF5bWVudE1ldGhvZC50eXBlID09IHBheW1lbnRNZXRob2RUeXBlKSB7XG4gICAgICByZXR1cm4gYWxsb3dlZFBheW1lbnRNZXRob2Q7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQge1xuICBhcGlWMkRvZXNNZXJjaGFudFN1cHBvcnRTcGVjaWZpZWRDYXJkVHlwZSxcbiAgY2hyb21lU3VwcG9ydHNQYXltZW50SGFuZGxlcixcbiAgY2hyb21lU3VwcG9ydHNQYXltZW50UmVxdWVzdCxcbiAgZG9lc01lcmNoYW50U3VwcG9ydE9ubHlUb2tlbml6ZWRDYXJkcyxcbiAgZ2V0VXBpUGF5bWVudE1ldGhvZCxcbiAgaXNQYXltZW50TWV0aG9kVmFsaWQsXG4gIHZhbGlkYXRlSXNSZWFkeVRvUGF5UmVxdWVzdCxcbiAgdmFsaWRhdGVQYXltZW50T3B0aW9ucyxcbiAgdmFsaWRhdGVQYXltZW50RGF0YVJlcXVlc3QsXG4gIHZhbGlkYXRlU2VjdXJlQ29udGV4dFxufTtcbiIsIi8qKiBAbGljZW5zZVxuTWF0aC51dWlkLmpzICh2MS40KVxuaHR0cDovL3d3dy5icm9vZmEuY29tXG5tYWlsdG86cm9iZXJ0QGJyb29mYS5jb21cbkNvcHlyaWdodCAoYykgMjAxMCBSb2JlcnQgS2llZmZlclxuRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4qL1xuXG4vKlxuICogR2VuZXJhdGUgYSByYW5kb20gdXVpZC5cbiAqXG4gKiBVU0FHRTogTWF0aC51dWlkKGxlbmd0aCwgcmFkaXgpXG4gKiAgIGxlbmd0aCAtIHRoZSBkZXNpcmVkIG51bWJlciBvZiBjaGFyYWN0ZXJzXG4gKiAgIHJhZGl4ICAtIHRoZSBudW1iZXIgb2YgYWxsb3dhYmxlIHZhbHVlcyBmb3IgZWFjaCBjaGFyYWN0ZXIuXG4gKlxuICogRVhBTVBMRVM6XG4gKiAgIC8vIE5vIGFyZ3VtZW50cyAgLSByZXR1cm5zIFJGQzQxMjIsIHZlcnNpb24gNCBJRFxuICogICA+Pj4gTWF0aC51dWlkKClcbiAqICAgXCI5MjMyOUQzOS02RjVDLTQ1MjAtQUJGQy1BQUI2NDU0NEUxNzJcIlxuICpcbiAqICAgLy8gT25lIGFyZ3VtZW50IC0gcmV0dXJucyBJRCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aFxuICogICA+Pj4gTWF0aC51dWlkKDE1KSAgICAgLy8gMTUgY2hhcmFjdGVyIElEIChkZWZhdWx0IGJhc2U9NjIpXG4gKiAgIFwiVmN5ZHhnbHR4clZaU1RWXCJcbiAqXG4gKiAgIC8vIFR3byBhcmd1bWVudHMgLSByZXR1cm5zIElEIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLCBhbmQgcmFkaXguIChSYWRpeCBtdXN0IGJlIDw9IDYyKVxuICogICA+Pj4gTWF0aC51dWlkKDgsIDIpICAvLyA4IGNoYXJhY3RlciBJRCAoYmFzZT0yKVxuICogICBcIjAxMDAxMDEwXCJcbiAqICAgPj4+IE1hdGgudXVpZCg4LCAxMCkgLy8gOCBjaGFyYWN0ZXIgSUQgKGJhc2U9MTApXG4gKiAgIFwiNDc0NzMwNDZcIlxuICogICA+Pj4gTWF0aC51dWlkKDgsIDE2KSAvLyA4IGNoYXJhY3RlciBJRCAoYmFzZT0xNilcbiAqICAgXCIwOThGNEQzNVwiXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZG9tX3V1aWQge307XG4gIC8vIFByaXZhdGUgYXJyYXkgb2YgY2hhcnMgdG8gdXNlXG4gIHZhciBDSEFSUyA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicuc3BsaXQoJycpO1xuXG4gIFJhbmRvbV91dWlkLnV1aWQgPSBmdW5jdGlvbiAobGVuLCByYWRpeCkge1xuICAgIHZhciBjaGFycyA9IENIQVJTLCB1dWlkID0gW10sIGk7XG4gICAgcmFkaXggPSByYWRpeCB8fCBjaGFycy5sZW5ndGg7XG5cbiAgICBpZiAobGVuKSB7XG4gICAgICAvLyBDb21wYWN0IGZvcm1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgdXVpZFtpXSA9IGNoYXJzWzAgfCBNYXRoLnJhbmRvbSgpKnJhZGl4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmZjNDEyMiwgdmVyc2lvbiA0IGZvcm1cbiAgICAgIHZhciByO1xuXG4gICAgICAvLyByZmM0MTIyIHJlcXVpcmVzIHRoZXNlIGNoYXJhY3RlcnNcbiAgICAgIHV1aWRbOF0gPSB1dWlkWzEzXSA9IHV1aWRbMThdID0gdXVpZFsyM10gPSAnLSc7XG4gICAgICB1dWlkWzE0XSA9ICc0JztcblxuICAgICAgLy8gRmlsbCBpbiByYW5kb20gZGF0YS4gIEF0IGk9PTE5IHNldCB0aGUgaGlnaCBiaXRzIG9mIGNsb2NrIHNlcXVlbmNlIGFzXG4gICAgICAvLyBwZXIgcmZjNDEyMiwgc2VjLiA0LjEuNVxuICAgICAgZm9yIChpID0gMDsgaSA8IDM2OyBpKyspIHtcbiAgICAgICAgaWYgKCF1dWlkW2ldKSB7XG4gICAgICAgICAgciA9IDAgfCBNYXRoLnJhbmRvbSgpKjE2O1xuICAgICAgICAgIHV1aWRbaV0gPSBjaGFyc1soaSA9PSAxOSkgPyAociAmIDB4MykgfCAweDggOiByXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1dWlkLmpvaW4oJycpO1xuICB9O1xuXG4gIC8vIEEgbW9yZSBwZXJmb3JtYW50LCBidXQgc2xpZ2h0bHkgYnVsa2llciwgUkZDNDEyMnY0IHNvbHV0aW9uLiAgV2UgYm9vc3QgcGVyZm9ybWFuY2VcbiAgLy8gYnkgbWluaW1pemluZyBjYWxscyB0byByYW5kb20oKVxuICBSYW5kb21fdXVpZC51dWlkRmFzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjaGFycyA9IENIQVJTLCB1dWlkID0gbmV3IEFycmF5KDM2KSwgcm5kPTAsIHI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzNjsgaSsrKSB7XG4gICAgICBpZiAoaT09OCB8fCBpPT0xMyB8fCAgaT09MTggfHwgaT09MjMpIHtcbiAgICAgICAgdXVpZFtpXSA9ICctJztcbiAgICAgIH0gZWxzZSBpZiAoaT09MTQpIHtcbiAgICAgICAgdXVpZFtpXSA9ICc0JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChybmQgPD0gMHgwMikgcm5kID0gMHgyMDAwMDAwICsgKE1hdGgucmFuZG9tKCkqMHgxMDAwMDAwKXwwO1xuICAgICAgICByID0gcm5kICYgMHhmO1xuICAgICAgICBybmQgPSBybmQgPj4gNDtcbiAgICAgICAgdXVpZFtpXSA9IGNoYXJzWyhpID09IDE5KSA/IChyICYgMHgzKSB8IDB4OCA6IHJdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXVpZC5qb2luKCcnKTtcbiAgfTtcblxuICAvLyBBIG1vcmUgY29tcGFjdCwgYnV0IGxlc3MgcGVyZm9ybWFudCwgUkZDNDEyMnY0IHNvbHV0aW9uOlxuICBSYW5kb21fdXVpZC51dWlkQ29tcGFjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSoxNnwwLCB2ID0gYyA9PSAneCcgPyByIDogKHImMHgzfDB4OCk7XG4gICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG4gIH07XG4iXX0="}